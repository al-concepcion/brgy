;/*FB_PKG_DELIM*/

__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"10004682126249141",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometNotificationsBadgeCount.react",["fbt","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometPlaceholder.react","CometRelay","FBLogger","FDSNumberedBadge.react","hero-tracing","react","react-compiler-runtime","setupNotificationsLiveQuery","updateWidgetServiceWorker","useMaybeZeroNotificationsBadgeCount"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var a=o("react-compiler-runtime").c(14),i=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"}),l=i.viewer;if(l==null)throw r("FBLogger")("comet_feed").mustfixThrow("The viewer recieving these notifications cannot be null");var c=o("CometRelay").useFragment(u!==void 0?u:u=n("CometNotificationsBadgeCountFragment_viewer.graphql"),l),p=r("useMaybeZeroNotificationsBadgeCount")(c==null?void 0:c.notifications_unseen_count),_=t.isBadgeHidden,f=t.overflow,g=t.setBadgeCount,h=o("CometRelay").useRelayEnvironment(),y,C;a[0]!==h?(y=function(){var e=r("setupNotificationsLiveQuery")(h);return function(){return e.dispose()}},C=[h],a[0]=h,a[1]=y,a[2]=C):(y=a[1],C=a[2]),m(y,C);var b,v;a[3]!==p||a[4]!==g?(b=function(){g&&g(p),r("updateWidgetServiceWorker")()},v=[p,g],a[3]=p,a[4]=g,a[5]=b,a[6]=v):(b=a[5],v=a[6]),m(b,v);var S;a[7]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsx("span",{}),a[7]=S):S=a[7];var R;a[8]!==p||a[9]!==_||a[10]!==f?(R=_!==!0&&p>0?d.jsx(o("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(t,n){return d.jsxs(d.Fragment,{children:[d.jsx(r("FDSNumberedBadge.react"),{accessibilityText:s._(/*BTDS*/"Number of unread notifications"),overflow:f,ref:t,testid:void 0,value:p}),d.jsx(n,{})]})}}):null,a[8]=p,a[9]=_,a[10]=f,a[11]=R):R=a[11];var L;return a[12]!==R?(L=d.jsx(r("CometPlaceholder.react"),{fallback:S,name:"FDSNumberedBadge",children:R}),a[12]=R,a[13]=L):L=a[13],L}l.default=p}),226);
__d("CometTopNavTabBadge.react",["fbt","FDSNumberedBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(12),n=e.testid,a=e.value,i=e.isBadgeHidden,l=e.isTab,d=e.overflow,m=e.setBadgeCount,p,_;if(t[0]!==m||t[1]!==a?(p=function(){m==null||m(a)},_=[a,m],t[0]=m,t[1]=a,t[2]=p,t[3]=_):(p=t[2],_=t[3]),c(p,_),i===!0||a===0)return null;var f=l===!0?"red":void 0,g;t[4]!==a?(g=s._(/*BTDS*/"_j{\"*\":\"{number} items\",\"_1\":\"1 item\"}",[s._plural(a,"number")]),t[4]=a,t[5]=g):g=t[5];var h;return t[6]!==f||t[7]!==d||t[8]!==g||t[9]!==n||t[10]!==a?(h=u.jsx(r("FDSNumberedBadge.react"),{accessibilityText:g,color:f,overflow:d,testid:void 0,value:a}),t[6]=f,t[7]=d,t[8]=g,t[9]=n,t[10]=a,t[11]=h):h=t[11],h}l.default=d}),226);
__d("LSDatascriptEvaluatorDeferredForDisplay",["requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferredForDisplay")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferredForDisplay");function s(){return e.load()}l.default=s}),98);
__d("LSPlatformClientSingleton",[],(function(t,n,r,o,a,i){"use strict";var e={contents:void 0};function l(t){e.contents=t}i.saveInstance=l}),66);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MessengerLogHistory").getInstance("client_init"),u=(e=n("cr:6999"))!=null?e:n("cr:7350"),c=function(){u!=null&&(r("isArmadillo")()||r("isRegisterArmadilloOnIgEnabled")())&&(s.debug("Starting MAW main thread logger setup..."),u.setupMainWaLogger(),s.debug("Starting MAW main thread logger setup success"))};l.maybeSetupMAWMainThreadLogger=c}),98);
__d("LSPlatformClientInstances",["ExecutionEnvironment","FBLogger","LSLocalize","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWLoggerUtils","MAWMIC","MessengerLogHistory","PromiseAnnotate","cr:19622","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("LSLocalize"),o("MAWLoggerUtils").initMessengerWebLogging();var c=o("MessengerLogHistory").getInstance("client_init"),d=(u||(u=r("LSSuspense"))).makeCollection(),m=!1;function p(t,a,i){o("MAWMIC").startMAWMICFlow(),m||(c.debug("[Occamadillo] Beginning hardcoded init sync"),m=!0,o("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger()),o("LSPlatformArmadilloUtils").reportInitStart();var l=function(t){var e=r("getErrorSafe")(t);throw c.debug("Initializing LSPlatformClient failed"),o("LSPlatformLsInitLog").fail("client_setup_failure",e),o("MAWMIC").fail("client_setup_failure",e),r("FBLogger")("messenger_web").catching(e).warn("[LS] LSPlatformClient initialization failure"),e};return(u||(u=r("LSSuspense"))).getFromCollection(d,t,function(){return(e||(e=o("PromiseAnnotate"))).setDisplayName((async function(){o("LSPlatformLsInitLog").addAnnotations({bool:{canUseDOM:(s||(s=r("ExecutionEnvironment"))).canUseDOM,fromReact:i==null?void 0:i.fromReact},string:{configAppId:t.appId,configPlatformName:t.platformName}}),c.debug("Messenger loading UI suspending");try{var e=n("cr:19622")!=null?await n("cr:19622").maybeEvaluateInitSyncEagerly(t):!1;if(!(s||(s=r("ExecutionEnvironment"))).isInBrowser)return await t.getDb();var u=a(t,{didEvaluateInitSyncEagerly:e}).then(function(e){return o("LSPlatformLsInitLog").addPoint("start_client"),e.start().then(function(){return c.debug("Initializing LSPlatformClient success"),o("LSPlatformClientSingleton").saveInstance(e),o("LSPlatformArmadilloUtils").reportInitEnd(),e.db})});return await u}catch(e){l(e)}finally{c.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}var _={getOrInit:p};l.default=_}),98);
__d("LSPlatformClientMaybeEagerly",["LSEagerlyLoadOnMessenger","cr:12301"],(function(t,n,r,o,a,i,l){"use strict";var e=o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(n("cr:12301"));l.default=e}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","react-compiler-runtime","setTimeout","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useRef,m=r("justknobx")._("1134"),p=r("justknobx")._("1135"),_=r("gkx")("24156");function f(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a=d(null),i=d(!1),l;t[0]!==n.tables.pending_tasks?(l=function(){var e=n.tables.pending_tasks.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.pending_tasks).take(m)),function(e){var t=e.length;if(t===m){if(a.current!=null)return;a.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),i.current=!0,_&&r("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",t,p)},p)}else r("clearTimeout")(a.current),i.current&&_&&r("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),i.current=!1})});return function(){e()}},t[0]=n.tables.pending_tasks,t[1]=l):l=t[1];var s;return t[2]!==n?(s=[n],t[2]=n,t[3]=s):s=t[3],c(l,s),null}l.default=f}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","LSPlatformLogTooManyPendingTasksForS337085.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:r("LSPlatformLogTooManyPendingTasksForS337085.react")!=null&&s.jsx(r("LSPlatformLogTooManyPendingTasksForS337085.react"),{})}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("gkx")("20836")?u.Fragment:(e=n("cr:3921"))!=null?e:u.Fragment,d=c;l.default=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(r("MAWCondSetup.react"),{}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=s.jsx(r("MAWSetupWrapperOnce.react"),{setupComponent:a,children:n}),t[1]=n,t[2]=i):i=t[2],i}l.default=u}),98);
__d("LSPlatformClientProvider.react",["CometDOMOnlyBoundary.react","CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react"));function d(t,n){var a=o("react-compiler-runtime").c(3),i;if(a[0]!==t||a[1]!==n){var l=(e||(e=r("LSSuspense"))).getOrSuspend(t);i=r("LSPlatformClientInstances").getOrInit(l,n,{fromReact:!0}),a[0]=t,a[1]=n,a[2]=i}else i=a[2];return i}function m(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.config,a=e.loadLSPlatformClient,i=d(r,a),l;return t[0]!==n||t[1]!==i?(l=i!=null?c.jsx((s||(s=o("ReStoreProvider.react"))).ReStoreProvider,{db:i,children:n}):n,t[0]=n,t[1]=i,t[2]=l):l=t[2],l}function p(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=e.config,i=e.errorFallback,l=e.loadLSPlatformClient,s=e.placeholder,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(r("LSPlatformClientProviderAddons.react"),{}),t[0]=u):u=t[0];var d;t[1]!==n||t[2]!==s?(d=c.jsx(r("CometPlaceholder.react"),{fallback:s,name:"LSPlatformClientProvider.UISuspense",children:n}),t[1]=n,t[2]=s,t[3]=d):d=t[3];var p;t[4]!==a||t[5]!==l||t[6]!==d?(p=c.jsxs(m,{config:a,loadLSPlatformClient:l,children:[u,d]}),t[4]=a,t[5]=l,t[6]=d,t[7]=p):p=t[7];var _;t[8]!==s||t[9]!==p?(_=c.jsx(r("MAWCondWrapper.react"),{children:c.jsx(r("CometPlaceholder.react"),{fallback:s,name:"LSPlatformClientProvider.ClientProvider",children:p})}),t[8]=s,t[9]=p,t[10]=_):_=t[10];var f;t[11]!==i||t[12]!==_?(f=c.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:i,children:_}),t[11]=i,t[12]=_,t[13]=f):f=t[13];var g=f,h;return t[14]!==g?(h=r("gkx")("12254")?c.jsx(r("CometDOMOnlyBoundary.react"),{children:g}):g,t[14]=g,t[15]=h):h=t[15],h}l.default=p}),98);
__d("LSWaitForTierThree",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSWaitForTierThree");function s(){return e.load().then(function(){})}l.default=s}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientMaybeEagerly","LSPlatformClientProvider.react","LSPlatformLsInitLog","LSWaitForTierThree","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));async function u(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n;return r("gkx")("20208")?n=await r("LSWaitForTierThree")().then(function(){return r("LSPlatformClientMaybeEagerly").load()}):n=await r("LSPlatformClientMaybeEagerly").load(),o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.config,i=e.errorFallback,l=e.placeholder,c;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(c=s.jsx(r("LSPlatformClientProvider.react"),{config:a,errorFallback:i,loadLSPlatformClient:u,placeholder:l,children:n}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=c):c=t[4],c}l.default=c}),98);
__d("LSPlatformCometTransportMaybeEagerly",["CurrentMessengerUser","LSEagerlyLoadOnMessenger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSDedicatedMqttChannel").__setRef("LSPlatformCometTransportMaybeEagerly"),u=r("requireDeferred")("LSPlatformDGWTransport").__setRef("LSPlatformCometTransportMaybeEagerly"),c=r("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSPlatformCometTransportMaybeEagerly");function d(){return(e||(e=n("Promise"))).all([o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(c).load(),o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(u).load(),o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(s).load()]).then(function(e){var t=e[0],n=e[1].LSPlatformDGWTransport,r=e[2];return{dgw:n,mqtt:function(n,a){return t(n,a,{getInstance:r.getInstance(o("CurrentMessengerUser").isLoggedInNow),shutdownAndClear:r.shutdownAndClear})}}})}l.default=d}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("LSPlatformGraphQLLightspeedRequestQuery.graphql");l.query=s}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){return o("CometRelay").fetchQuery(o("XPlatRelayEnvironment").getRelayEnvironment(),o("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:e,requestId:t,requestPayload:n,requestType:r},a!=null?a:void 0).toPromise().then(function(e){var t,n=e==null||(t=e.viewer)==null?void 0:t.lightspeed_web_request;if(n!=null)return babelHelpers.extends({dependencies:void 0},n)})}l.default=e}),98);
__d("LSPlatformMessengerConfig",["LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformCometTransportMaybeEagerly","LSPlatformGraphQLLightspeedRequest","LSPlatformLsInitLog","LSPlatformMessengerSyncParams","LSSuspense","LSVersion","ServerAppID","cr:3239","cr:7358","getMWLSRegion","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e=n("cr:3239"))!=null?e:r("LSPlatformGraphQLLightspeedRequest");function d(){return(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton}function m(){return r("LSPlatformCometTransportMaybeEagerly")().then(function(e){return function(t,n){return o("LSPlatformLsInitLog").addAnnotations({int:{syncChannel:t}}),t===3?e.dgw(r("LSVersion"),n):e.mqtt(r("LSVersion"),n)}})}function p(){return r("LSDatascriptEvaluatorMaybeDeferred")()}var _={appId:r("ServerAppID").app_id,eagerEvaluatorForInitSync:n("cr:7358"),executeGraphQLLightSpeedRequest:r("gkx")("3889")?c:r("LSPlatformGraphQLLightspeedRequest"),getDb:d,getEval:p,platformName:"Messenger",realtimeUnderylingTransport:m,region:r("getMWLSRegion")(),schemaVersion:r("LSVersion"),sendHardcodedInitSync:!0,syncParams:r("LSPlatformMessengerSyncParams")},f=(s||(s=r("LSSuspense"))).makeWithValue(_);l.config=_,l.configEagerlyLoaded=f}),98);
__d("LSPlatformCometClientStartEagerly",["LSPlatformClientInstances","LSPlatformClientMaybeEagerly","LSPlatformLsInitLog","LSPlatformMessengerConfig"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n=await r("LSPlatformClientMaybeEagerly").load();return o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}function s(){try{r("LSPlatformClientInstances").getOrInit(o("LSPlatformMessengerConfig").config,e)}catch(e){return}}l.start=s}),98);
__d("LSPlatformEvaluateInitSyncEagerly",["ExecutionEnvironment","FBLogger","LSClearEpochBeforeResumeSync","LSDatabaseProviderType","LSPlatformDeviceId","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","cr:3411","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(t,a){o("LSPlatformLsInitLog").addPoint("ds_eval_registration");var e=await a(),i;try{i=n("cr:3411")!=null?n("cr:3411").registerEval(e)()(t):e()(t)}catch(n){var l=r("getErrorSafe")(n);r("FBLogger")("ls_web_init").catching(l).mustfix("fail to register datascriptEvaluator"),i=e()(t)}return o("LSPlatformLsInitLog").addPoint("ds_eval_registration_end"),i};async function u(t){if(!(e||(e=r("ExecutionEnvironment"))).canUseDOM||!t.sendHardcodedInitSync)return!1;var n=t.eagerEvaluatorForInitSync;if(n==null)return!1;var a=await t.getDb();if(o("LSDatabaseProviderType").isProviderPersisted(a))return!1;o("LSPlatformLsInitLog").addPoint("evaluate_init_sync_start");var i=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral"),l=await s(a,n);return await o("LSClearEpochBeforeResumeSync").call(a),await o("LSPlatformHardcodedInitSync").sendHardcodedInitSync(t,l,a,i),o("LSPlatformLsInitLog").addPoint("evaluate_init_sync_end"),!0}l.getDatascriptEvaluator=s,l.maybeEvaluateInitSyncEagerly=u}),98);
__d("MAWPreloadSecureMessagesDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWPreloadSecureMessages").__setRef("MAWPreloadSecureMessagesDeferred"),s=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.load().then(function(e){return e.preloadSecureMessagesByThreadKey.apply(e,n)})};l.preloadSecureMessagesByThreadKey=s}),98);
__d("QPLE2ESessionMarkers",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NONE:"none",START:"start",END:"end"}),l=e;i.default=l}),66);
__d("QPLE2E",["QuickPerformanceLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){}var n=t.prototype;return n.logPointDeprecated=function(n,o,a,i){var t,l,s,u;i===void 0&&(i={});var c=(t=i.timestamp)!=null?t:(e||(e=r("QuickPerformanceLogger"))).currentTimestamp(),d=babelHelpers.extends({},i.pointData),m=(l=i.action)!=null?l:12524;if(i.secondaryOrder!=null&&(d.string||(d.string={}),d.string.qpl_e2e__secondary_order=i.secondaryOrder),i.sessionMarker&&i.sessionMarker!=="none"){var p;d.bool||(d.bool={}),d.bool=babelHelpers.extends({},d.bool,(p={},p.qpl_e2e__session_marker_start_point=i.sessionMarker==="start",p.qpl_e2e__session_marker_end_point=i.sessionMarker==="end",p))}(e||(e=r("QuickPerformanceLogger"))).markerStart(n,void 0,c,{samplingBasis:a}),e.markerPoint(n,o,{data:d,timestamp:c*2}),i.annotations&&(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(n,i.annotations),e.markerAnnotate(n,{string:(s={},s.join_id=a,s.qpl__source="client",s),bool:(u={},u.qpl_e2e__align_points=!0,u)}),e.markerEnd(n,m,void 0,c)},t})(),u=new s;l.default=u}),98);
__d("MWCMChatTabNotificationsQPLLoggingUtils",["QPLE2E","QPLUserFlow","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(25298296,"1725"),s=r("qpl")._(25304846,"1726");function u(){var t=o("Random").uint32();return{logCancel:function(n){r("QPLUserFlow").endCancel(s,{annotations:{string:{cancelReason:n}},instanceKey:t})},logEventStreamReceived:function(o){o!=null&&r("QPLE2E").logPointDeprecated(e,"client:receive_event_stream",o,{action:2}),r("QPLUserFlow").start(s,{instanceKey:t})},logOpenChatTab:function(){r("QPLUserFlow").addPoint(s,"open_chat_tab",{instanceKey:t})},logOpenChatTabSuccess:function(){r("QPLUserFlow").endSuccess(s,{instanceKey:t})},logThreadLoaded:function(){r("QPLUserFlow").addPoint(s,"thread_loaded",{instanceKey:t})}}}l.createChatTabQPLLogger=u}),98);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recent_unread_count_with_e2ee",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatBadgeCountQuery",selections:t},params:{id:"9649973961748511",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("useMWJewelStartLoadingLogger",["CometBlendedInitialLoadTraceLog","qpl","react","react-compiler-runtime","useCometInteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState,m=r("qpl")._(30616158,"2565");function p(){var e=o("react-compiler-runtime").c(3),t=c(!1),n=d(),a=n[0],i=n[1],l=r("useCometInteractionTracing")(m,"slower","INTERACTION"),s,p;return e[0]!==l?(s=function(){t.current||(t.current=!0,l(function(e){r("CometBlendedInitialLoadTraceLog").logStart("mwj_badge",e.getInstanceKey(),e.getTrace()),i(e.getTraceId()),e.onVcMetricsComplete(function(t,n){r("CometBlendedInitialLoadTraceLog").logVc("mwj_badge",e.getInstanceKey(),t,n)}),e.onLog(_)},0))},p=[l],e[0]=l,e[1]=s,e[2]=p):(s=e[1],p=e[2]),u(s,p),a}function _(e,t){r("CometBlendedInitialLoadTraceLog").log("mwj_badge",t)}l.default=p}),98);
__d("useMWJewelStopLoadingLogger",["QPLEvent","interaction-tracing","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=r("qpl")._(30616158,"2565");function d(e,t,n){var a=o("react-compiler-runtime").c(5),i,l;a[0]!==t||a[1]!==e||a[2]!==n?(i=function(){n||r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(n){var r,a=n.getTrace();((r=a==null?void 0:a.completed)!=null?r:0)>0||n.getQPLEventMarkerId()===(s||(s=o("QPLEvent"))).getMarkerId(c)&&(n.addAnnotationInt("badgeCount",e),n.addAnnotationInt("badgeUnreadCount",t),e===0&&n.forceCompleteTrace())})},l=[n,e,t],a[0]=t,a[1]=e,a[2]=n,a[3]=i,a[4]=l):(i=a[3],l=a[4]),u(i,l)}l.default=d}),98);
__d("MWChatBadgeCount.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","HeroInteractionIgnoreWithDiv.react","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.react","hero-tracing","react","react-compiler-runtime","useMWJewelStartLoadingLogger","useMWJewelStopLoadingLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useEffect,p=d.useRef;function _(t){var a,i,l=o("react-compiler-runtime").c(12),u=t.overflow,d=t.setBadgeCount,_=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!1},{fetchPolicy:"store-or-network"}),f=((a=_.viewer)==null||(a=a.message_threads)==null?void 0:a.is_loading_client_threads)!==!1,g=(i=_.viewer)==null?void 0:i.message_threads,h=g!=null&&g.unseen_count!=null&&g.unseen_count>0?Math.min(o("MWChatBadgeCountUpdates.react").minSyncedThreads,g.unseen_count):0,y=g!=null&&g.recent_unread_count_with_e2ee!=null&&g.recent_unread_count_with_e2ee>0?Math.min(o("MWChatBadgeCountUpdates.react").minSyncedThreads,g.recent_unread_count_with_e2ee):0,C=p(null),b,v;l[0]!==h||l[1]!==d?(b=function(){d&&C.current!==h&&(C.current=h,d(h))},v=[h,d],l[0]=h,l[1]=d,l[2]=b,l[3]=v):(b=l[2],v=l[3]),m(b,v),r("useMWJewelStopLoadingLogger")(h,y,f);var S;l[4]!==h||l[5]!==u?(S=h>0?c.jsx(r("FDSNumberedBadge.react"),{accessibilityText:s._(/*BTDS*/"{count} Unread Chats",[s._param("count",h)]),overflow:u,testid:void 0,value:h,vcIgnore:!0}):null,l[4]=h,l[5]=u,l[6]=S):S=l[6];var R;l[7]!==f?(R=c.jsx(r("CometHeroHoldTrigger.react"),{description:"MessengerBadgeLoadingHold",hold:f}),l[7]=f,l[8]=R):R=l[8];var L;return l[9]!==S||l[10]!==R?(L=c.jsxs(c.Fragment,{children:[S,R]}),l[9]=S,l[10]=R,l[11]=L):L=l[11],L}function f(e){var t=o("react-compiler-runtime").c(7),n=e.overflow,a=e.setBadgeCount,i=r("useMWJewelStartLoadingLogger")(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("span",{}),t[0]=l):l=t[0];var s;t[1]!==n||t[2]!==a?(s=c.jsx(r("CometPlaceholder.react"),{fallback:l,name:"MWChatBadgeCount",children:c.jsx(_,{overflow:n,setBadgeCount:a})}),t[1]=n,t[2]=a,t[3]=s):s=t[3];var u;return t[4]!==i||t[5]!==s?(u=c.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:c.jsx(o("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MSGR_JEWEL_BADGE",interactionUUID:i,pageletName:"MessengerJewelBadge",children:s})}),t[4]=i,t[5]=s,t[6]=u):u=t[6],u}l.default=f}),226);
__d("MWChatBadgeCountUpdater.react",["CometRelay","FBLogger","LSIntEnum","MWChatBadgeCountUpdates.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect;function c(){var e=o("react-compiler-runtime").c(6),t=o("CometRelay").useRelayEnvironment(),n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(s||(s=o("LSIntEnum"))).ofNumber(0),e[0]=n):n=e[0];var a=o("MWChatBadgeCountUpdates.react").useUnseenThreadCount(n),i=a==null,l,c;return e[1]!==a||e[2]!==t||e[3]!==i?(l=function(){var e={suppress_xac_groups:!1};t.commitUpdate(function(t){var n=t.getRoot();if(n==null){r("FBLogger")("messenger_web_entrypoints").mustfix("A store root must be present to move forward.");return}var o=n.getOrCreateLinkedRecord("viewer","Viewer"),l=o.getOrCreateLinkedRecord("message_threads","ViewerMessageThreadsConnection");if(a!=null){var s=l.getValue("unseen_count",e);(s===null||s!==a)&&l.setValue(a,"unseen_count",e)}var u=l.getValue("is_loading_client_threads");(u==null||u!==i)&&l.setValue(i,"is_loading_client_threads")})},c=[t,a,i],e[1]=a,e[2]=t,e[3]=i,e[4]=l,e[5]=c):(l=e[4],c=e[5]),u(l,c),null}l.default=c}),98);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=r("FBLogger")("messenger_web_entrypoints");e!=null&&(t=t.catching(e)),t.debug("Error loading MWChatBadgeCountUpdater")}function d(){var t=o("react-compiler-runtime").c(1),a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(e||(e=r("ExecutionEnvironment"))).canUseDOM?u.jsx(r("CometErrorBoundary.react"),{onError:c,children:n("cr:4562")&&u.jsx(n("cr:4562"),{})}):null,t[0]=a):a=t[0],a}l.default=d}),98);
__d("MWChatConfig",["CurrentEnvironment","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273041")):r("bx").getURL(r("bx")("273022")),s=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273042")):r("bx").getURL(r("bx")("273023"));l.soundNotifMp3Url=e,l.soundNotifOggUrl=s}),98);
__d("MWChatHeadError.react",["fbt","CometHeroFailTrigger.react","CometHeroInteractionWithDiv.react","FDSCautionTriangleFilled24Icon","MWChatInteraction","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},d=s._(/*BTDS*/"Something went wrong while loading chat");function m(e){var t=o("react-compiler-runtime").c(7),n=e.contextRef,a=e.onPress,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MWChatInteraction").get(o("MWChatInteraction").MW_CHATHEADS_LOAD),l=u.jsx(r("CometHeroFailTrigger.react"),{description:"Error while loading chatheads",fail:!0}),t[0]=i,t[1]=l):(i=t[0],l=t[1]);var s=a==null,c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("MWXIcon_DEPRECATED.react"),{icon:r("FDSCautionTriangleFilled24Icon")}),t[2]=c):c=t[2];var m;return t[3]!==n||t[4]!==a||t[5]!==s?(m=u.jsxs(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:i,children:[l,u.jsx(r("MWXTooltip.react"),{align:"end",position:"above",tooltip:d,children:u.jsx(r("MWXPressable.react"),{"aria-label":d,disabled:s,display:"inline",onPress:a,ref:n,xstyle:p,children:c})})]}),t[3]=n,t[4]=a,t[5]=s,t[6]=m):m=t[6],m}function p(e){return[c.compose,c.dropShadow]}l.default=m}),226);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","react-compiler-runtime","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.contextRef,a=e.onPress,i=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=i?s.jsx("div",{className:"x1ey2m1c xtijo5x xixxii4",children:s.jsx("div",{className:"x191j7n5 xdg88n9 x10l6tqk",children:s.jsx(r("MWChatHeadError.react"),{contextRef:n,onPress:a})})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react",["CometErrorBoundary.react","CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","deferredLoadComponent","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsHandleRestoreWrapper.react").__setRef("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"));function c(e){return s.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return null},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"EncryptedBackupsHandleRestoreWrapper",children:s.jsx(u,babelHelpers.extends({},e))})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWChatStateV2IsComposeTab",["MWChatStateV2Types"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.tabType;return t.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab}l.isComposeTab=e}),98);
__d("MWChatStateV2HeadGroups",["MWChatStateV2CompareTabs","MWChatStateV2IsComposeTab","MWChatStateV2IsMinimized"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=Array.from(n.values()).filter(function(t){return o("MWChatStateV2IsMinimized").isMinimized(e,t)}).sort(function(e,t){var n=o("MWChatStateV2CompareTabs").byMostRecentMinimized(e,t);return n===0?o("MWChatStateV2CompareTabs").byMostRecentOpened(e,t):n}),i=t.filter(function(e){return!o("MWChatStateV2IsComposeTab").isComposeTab(e)}).concat(a);return[i.slice(0,r),i.slice(r,i.length)]}l.getHeadGroups=e}),98);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23885219097739619"}),null);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql",["MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsNotificationSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_notification_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"qpl_join_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t},params:{id:n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_notification_subscribe"},name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("MWChatTabsNotificationSubscription",["CometRelay","MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql");function u(e,t){return o("CometRelay").requestSubscription(e,{onNext:t,subscription:s,variables:{input:{}}})}l.subscribe=u}),98);
__d("MWChatThreadPingCounter",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n=e.get(t);return n!=null?n:0}function s(t){e.set(t,l(t)+1)}function u(){e.clear()}i.getCount=l,i.incrementCount=s,i.clear=u}),66);
__d("MWFallbackWithTimeout.react",["FBLogger","react","react-compiler-runtime","useTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(4),n=e.children,a=e.message,i=r("useTimeout")(1e4),l=i.pending,s,c;return t[0]!==a||t[1]!==l?(s=function(){l||r("FBLogger")("messenger_web_entrypoints","fallback_timeout").warn(a)},c=[a,l],t[0]=a,t[1]=l,t[2]=s,t[3]=c):(s=t[2],c=t[3]),u(s,c),n}l.default=c}),98);
__d("MWGetCurrentThreadIDForLSThread",["FBLogger","I64","LSIntEnum","mwCMIsAnyCMThread"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(a)return{NAME:"Page",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(7))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(16)))return{NAME:"UserSecret",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(13))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(201)))return{NAME:"User",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(5))||r("mwCMIsAnyCMThread")(n)||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(150))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(151))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(154))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(155))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(152))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(153))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(26)))return{NAME:"Group",VAL:(e||(e=o("I64"))).to_string(t)};throw r("FBLogger")("messenger_web_messaging").mustfixThrow("Unsupported MWMessagingThreadType %s",(e||(e=o("I64"))).to_string(n))}l.get=u}),98);
__d("MWNotificationRenderer.react",["fbt","I64","LSIntEnum"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(t,n,r,a,i){var l,c;if((e||(e=o("I64"))).equal(t.senderId,n))return s._(/*BTDS*/"New message");var d=(l=(c=i.nickname)!=null?c:a.firstName)!=null?l:a.name,m=r.threadName;return m!=null?s._(/*BTDS*/"{senderName} messaged {groupName}",[s._param("senderName",d),s._param("groupName",m)]):(e||(e=o("I64"))).equal(r.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))?s._(/*BTDS*/"{name} messaged your group",[s._param("name",d)]):s._(/*BTDS*/"{name} messaged you",[s._param("name",d)])}l.renderDocumentTitle=c}),226);
__d("MWLSChatPopperCommon",["CometSetBlinkingTitleMessageContext","CurrentEnvironment","CurrentUser","I64","MWChatConfig","MWChatSettingsQuery","MWNotificationRenderer.react","MWPIsThreadUnread","MessengerWebEventsFalcoEvent","ReQL","gkx","react","requireDeferred","useCometRouterState","useMWShowOpenInMessengerToast","useMatchViewport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=r("requireDeferred")("Sound").__setRef("MWLSChatPopperCommon");function p(e){var t=(s||(s=o("I64"))).to_string(e.senderId)!==r("CurrentUser").getID();t&&m.onReady(function(t){t.play([o("MWChatConfig").soundNotifOggUrl,o("MWChatConfig").soundNotifMp3Url],(s||(s=o("I64"))).to_float(e.timestampMs),!1)})}function _(e,t,n){var a,i=d(r("CometSetBlinkingTitleMessageContext")),l=r("useMatchViewport")("max","width",320),u=r("useCometRouterState")(),m=u==null||(a=u.main)==null?void 0:a.route,p=(m==null?void 0:m.tabKey)==="messenger",_=r("useMWShowOpenInMessengerToast")();return c(function(a,u,c,d){var m=o("MWNotificationRenderer.react").renderDocumentTitle(a,t,u,c,d);l&&r("CurrentEnvironment").facebookdotcom&&!p&&r("gkx")("15812")&&_((s||(s=o("I64"))).to_string(u.threadKey),m),n.contents!=null&&n.contents(),n.contents=o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(u.threadKey).subscribe(function(e,t){if(t.operation==="add"||t.operation==="put"){var r=t.value;if(o("MWPIsThreadUnread").isThreadUnread(r))return;n.contents!=null&&n.contents(),n.contents=void 0,i(null,(s||(s=o("I64"))).to_float(r.lastReadWatermarkTimestampMs))}}),i(m,(s||(s=o("I64"))).to_float(a.timestampMs))},[t,l,p,n,e.tables.threads,i,_])}function f(e){o("MWChatSettingsQuery").areChatTabsSoundsOn(function(t){if(t!=null&&t)return p(e);r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message_sound"}})})}l.useUpdateDocumentTitle=_,l.playChatTabSound=f}),98);
__d("MWLSChatTabPolicy",["$InternalEnum","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWCMThreadTypes.react","MWChatSettingsQuery","MWGenAIUtils","MessagingFolderTag","MessengerWebEventsFalcoEvent","emptyFunction","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({ALLOW:0,DENY:1});function c(e,t,n){if(n===u.ALLOW)return e(t)}var d=function(t){return r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:t}}})},m=function(t){t(u.ALLOW)},p=function(n,r,a){(e||(e=o("I64"))).equal(r.senderId,a)?(d("message_outgoing"),n(u.DENY)):n(u.ALLOW)},_=function(t,n,a){if(r("gkx")("23433"))t(u.ALLOW);else{o("MWChatSettingsQuery").areChatTabsTurnedOff(function(e){e!=null&&e?(d("turn_off_chat_tab"),n!=null&&o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)&&a!=null&&a.logCancel("turn_off_chat_tab"),t(u.DENY)):t(u.ALLOW)});return}},f=function(n,r,a){var t=(e||(e=o("I64"))).to_float(r.muteExpireTimeMs);t>Date.now()||t<0?(d("mention_muted"),o("MWCMThreadTypes.react").isJoinedCMThread(r.threadType)&&a!=null&&a.logCancel("mention_muted"),n(u.DENY)):n(u.ALLOW)},g=function(t,n){n.isAdminMessage?(d("message_non_user_generated"),t(u.DENY)):t(u.ALLOW)},h=function(n,a){a.folderName===r("MessagingFolderTag").INBOX||(e||(e=o("I64"))).equal(a.parentThreadKey,(s||(s=o("LSIntEnum"))).ofNumber(-10))?n(u.ALLOW):(d("message_no_inbox"),n(u.DENY))},y=function(n,a){(e||(e=o("I64"))).equal(a.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))?n(u.ALLOW):(d("message_blocked_participants"),n(u.DENY))},C=function(t,n){o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)?(d("community_messaging_group_blocked"),t(u.DENY)):t(u.ALLOW)},b=function(t,n){var e=n.mentionTypes;e!=null&&"s".includes(e)?t(u.DENY):t(u.ALLOW)},v=function(t,n){r("gkx")("23433")&&n?t(u.DENY):t(u.ALLOW)},S=function(t,n){o("MWGenAIUtils").isMetaAIThread(n.threadKey)&&r("qex")._("4970")===!0?t(u.DENY):t(u.ALLOW)},R=function(t,n){if(t.length===0)return function(e){return c(n,r("emptyFunction"),e)};var e=t[0],o=babelHelpers.arrayLikeToArray(t).slice(1);return function(t){return c(e,R(o,n),t)}},L=function(t,n){var e=t[0],r=babelHelpers.arrayLikeToArray(t).slice(1);e(R(r,n))};function E(e,t,n,r,o,a){return L([function(){return m.apply(void 0,arguments)},function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return p.apply(void 0,n.concat([e,r]))},function(){return _.apply(void 0,arguments)},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h.apply(void 0,n.concat([t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,t.concat([n]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return C.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,t.concat([o]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S.apply(void 0,n.concat([e]))}],a)}function k(e,t,n,r){return L([function(){return m.apply(void 0,arguments)},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _.apply(void 0,r.concat([e,t]))},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return f.apply(void 0,r.concat([e,t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v.apply(void 0,t.concat([n]))}],r)}l.shouldMessageBeAllowed=E,l.shouldCommunityChatThreadPopup=k}),98);
__d("useMWChatOpenTabFromNewMessage",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionStore","MAWPreloadSecureMessagesDeferred","MAWStateContext.react","MWChatInteraction","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatStateV2IsClosed","MWChatStateV2Types","MWChatThreadId","MessengerWebEventsFalcoEvent","ODS","dispatchOpenChatTabTraceLogging","gkx","justknobx","loadChatTabEntryPoint","react","setTimeout","useAsyncReStore","useCometFeedNoRoutingNavigationEventLogger","useCometRelayEntrypointContextualEnvironmentProvider","useLazyShouldShowMessagingEntrypointInCometRoot","useMWChatOpenTabTraceProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=e||(e=o("react")),m=d.useCallback,p=d.useContext,_=new Set;function f(e,t){var n=t.withChatTabTracing,a=n===void 0?!1:n,i=r("useCometFeedNoRoutingNavigationEventLogger")(),l=o("MWChatStateV2.react").useDispatch(),d=r("useMWChatOpenTabTraceProvider")(),f=o("MWChatStateContext").useChatState(function(e){return e.tabs}),g=r("useLazyShouldShowMessagingEntrypointInCometRoot")("CHAT"),h=r("useCometRelayEntrypointContextualEnvironmentProvider")(),y=p(o("MAWStateContext.react").MAWDispatchContext),C=r("useAsyncReStore")();return m(function(t,n,m){i(Date.now(),"","messenger"),(s||(s=o("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_incoming"),r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab_from_new_message"}}),o("LSThreadAttributionStore").setSource(o("MWChatThreadId").getFBID(t),e);var p=Date.now();if(o("LSMessagingThreadTypeUtil").isArmadilloSecure(n.threadType)){var b=r("gkx")("14315")?8:r("justknobx")._("2038");C.then(function(e){return o("MAWPreloadSecureMessagesDeferred").preloadSecureMessagesByThreadKey(e,n.threadKey,y,b)})}var v=function(t){var e={clientThreadKey:void 0,threadKey:n.threadKey,threadType:n.threadType},a=r("loadChatTabEntryPoint")(h);r("dispatchOpenChatTabTraceLogging")(t,e,"useMWChatOpenTabFromNewMessage"),l(o("MWChatStateActions").openTabOrFlyout(p,{shouldFocus:!1},{threadKeyDescriptor:e,type:o("MWChatStateV2Types").MWChatStateTabType.ChatTab},a),!r("gkx")("24037"))},S=n.threadKey,R=Array.from(f.values()).find(function(e){if(e.tabType.type===o("MWChatStateV2Types").MWChatStateTabType.ChatTab){var t=e.tabType.threadKeyDescriptor.threadKey;return(u||(u=o("I64"))).equal(S,t)}}),L=R!=null?o("MWChatStateV2IsClosed").isClosed(R):!1,E=_.has((u||(u=o("I64"))).to_string(S)),k=a&&(R==null&&!E||R!=null&&L)&&g();return k?(_.add((u||(u=o("I64"))).to_string(S)),d({entrypoint:"notificationInThreadReply",threadKey:n.threadKey,threadType:(c||(c=o("LSIntEnum"))).unwrapIntEnum(n.threadType)},function(e,t){o("MWChatInteraction").set((u||(u=o("I64"))).to_string(n.threadKey),e),t.onComplete(function(){_.delete((u||(u=o("I64"))).to_string(S))}),v(t)})):v(),r("setTimeout")(function(){return l(o("MWChatStateActions").closeFlyout(p,n.threadKey))},3e3),m()},[i,e,f,a,l,d,g])}l.default=f}),98);
__d("MWLSCommunityChatPopper",["CometRelay","GroupsCometChatsEngagementLogger","I64","MWCMChatTabNotificationsQPLLoggingUtils","MWChatTabsNotificationSubscription","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MercuryIDs","ReQL","promiseDone","react","react-compiler-runtime","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useEffect,m={contents:void 0};function p(e,t){var n=o("MWLSChatPopperCommon").useUpdateDocumentTitle(e,t,m),a=c(function(t){r("promiseDone")(window.Promise.all([e.tables.threads.get(t.threadKey),e.tables.contacts.get(t.senderId),e.tables.participants.get(t.threadKey,t.senderId)]),function(e){var a=e[0],i=e[1],l=e[2];if(i!=null&&l!=null){n(t,a,i,l);var u=r("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(a.threadKey));if(o("MWChatThreadPingCounter").getCount(u)<3){o("MWChatThreadPingCounter").incrementCount(u),o("MWLSChatPopperCommon").playChatTabSound(t);return}}})},[e,n]);return c(function(t,n,i){var l={contents:function(){}};l.contents=o("ReQL").fromTableAscending(e.tables.messages).getKeyRange((s||(s=o("I64"))).of_string(t),s.of_string(i),n).subscribe(function(e,t){if(t.operation==="add"){var n=t.value;l.contents(),a(n)}}),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.messages).getKeyRange(s.of_string(t),s.of_string(i),n)),function(e){e&&(l.contents(),a(e))})},[e,a])}function _(e){var t=o("react-compiler-runtime").c(9),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),m=r("CometRelay").useRelayEnvironment(),_=p(n,c),f=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),g=f.familyCenterData,h,y;t[2]!==m||t[3]!==g.hasActiveMsgrFamilyCenterEnforcement||t[4]!==u||t[5]!==n||t[6]!==_?(h=function(){var e=o("MWChatTabsNotificationSubscription").subscribe(m,function(e){var t=(e==null?void 0:e.messenger_chat_tabs_notification_subscribe)||{},a=t.message_id,i=t.message_timestamp,l=t.qpl_join_id,c=t.thread_id;if(!(c==null||i==null||a==null)){var d=o("MWCMChatTabNotificationsQPLLoggingUtils").createChatTabQPLLogger();d.logEventStreamReceived(l),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(c))),function(e){e!=null&&(d.logThreadLoaded(),o("MWLSChatTabPolicy").shouldCommunityChatThreadPopup(e,d,g.hasActiveMsgrFamilyCenterEnforcement,function(){var t=o("MWGetCurrentThreadIDForLSThread").get(e.threadKey,e.threadType,!1);d.logOpenChatTab(),u(t,e,function(){d.logOpenChatTabSuccess(),o("GroupsCometChatsEngagementLogger").log({action:"impression",event:"thread_open_auto",source:"auto_open_chat_tabs",surface:"auto_open_chat_tabs_container",thread_id:(s||(s=o("I64"))).to_string(e.threadKey)}),_(c,a,i)})}))})}});return function(){e.dispose()}},y=[m,n,u,_,g.hasActiveMsgrFamilyCenterEnforcement],t[2]=m,t[3]=g.hasActiveMsgrFamilyCenterEnforcement,t[4]=u,t[5]=n,t[6]=_,t[7]=h,t[8]=y):(h=t[7],y=t[8]),d(h,y)}l.useOpenCommunityChatTabs=_}),98);
__d("MWV2ChatHeadsLayout.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x191j7n5 xdg88n9 x10l6tqk x1useyqa"},t[0]=a):a=t[0];var i;return t[1]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{children:r})),t[1]=r,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWV2ChatOptionsHead.react",["fbt","FDSDots3HorizontalFilled20Icon","MWXDeferredPopoverTrigger.react","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useState,d=r("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.react"),m={head:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i",width:"x14qfxbe",":hover_boxShadow":"x19xcq9t",$$css:!0},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh",$$css:!0}},p=s._(/*BTDS*/"Options");function _(e){var t=o("react-compiler-runtime").c(11),n=e.isVisible,a=e.openTabCount,i=e.style,l=c(!1),s=l[0],_=l[1],f=c(!1),g=f[0],h=f[1],y=c(!1),C=y[0],b=y[1],v=a>0,S;t[0]!==v?(S={hasOpenTabs:v},t[0]=v,t[1]=S):S=t[1];var R;t[2]!==g||t[3]!==s||t[4]!==C||t[5]!==n||t[6]!==i?(R=function(t,o){return u.jsx("div",{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p xc9qbxq xrr41r3 x10l6tqk x14qfxbe",style:i,children:u.jsx("div",{className:"x6s0dn4 xjbqb8w x78zum5 xnnlda6 xl56j7k x1kovpyh xhsvlbd x1dmp6jm","data-testid":void 0,onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return _(!1)},children:u.jsx(r("MWXPressable.react"),{label:p,onFocusChange:function(t){return h(t)},onPress:o,ref:t,testid:void 0,xstyle:function(){return[m.head,n||s||g||C?m.headVisible:!1]},children:u.jsx(r("MWXTooltip.react"),{align:"middle",position:"start",tooltip:p,children:u.jsx(r("MWXIcon_DEPRECATED.react"),{icon:r("FDSDots3HorizontalFilled20Icon")})})})})})},t[2]=g,t[3]=s,t[4]=C,t[5]=n,t[6]=i,t[7]=R):R=t[7];var L;return t[8]!==S||t[9]!==R?(L=u.jsx(r("MWXDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:b,popoverProps:S,popoverResource:d,position:"above",children:R}),t[8]=S,t[9]=R,t[10]=L):L=t[10],L}l.default=_}),226);
__d("useMWV2PreloadComposeTab",["JSResourceForInteraction","JSScheduler","react","react-compiler-runtime","useCometPreloader"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback,c=r("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("useMWV2PreloadComposeTab");function d(){var e=o("react-compiler-runtime").c(3),t=m,n=r("useCometPreloader")("button",t,t),a=n.onHoverInPreloader,i=n.onHoverOutPreloader,l;return e[0]!==a||e[1]!==i?(l=[a,i],e[0]=a,e[1]=i,e[2]=l):l=e[2],l}function m(){(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(p)}function p(){c.preload()}l.default=d}),98);
__d("MWV2ComposeHead.react",["fbt","FDSComposeFilled20Icon","FDSIcon.react","LSThreadAttributionStore","MWChatInteraction","MWChatStateV2.react","MWChatStateV2Types","MWPBumpEntityKey","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","react","react-compiler-runtime","useMWNewChatOpenTabTraceProvider","useMWV2PreloadComposeTab"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={button:{alignItems:"x6s0dn4",appearance:"xjyslct",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x3nfvp2",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",":hover_boxShadow":"x19xcq9t",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(16),n=e.onFocusChange,a=e.onHoverChange,i=o("MWChatStateV2.react").useDispatch(),l=r("MessengerWebUXLogger").useInteractionLogger(),c=r("useMWNewChatOpenTabTraceProvider")(),d;t[0]!==i||t[1]!==l||t[2]!==c?(d=function(){c(function(e){o("MWChatInteraction").set("open_new",e),l==null||l({eventName:"create_thread"}),o("LSThreadAttributionStore").setSourceForNewThread("chatheadsNewMessage"),o("MWPBumpEntityKey").bumpEntityKey("comet.sidebar","compose_head_click");var t=Date.now(),n=function(n){return{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:n.closeWatermark,doNotBlockWithEBUpsell:!0,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:t,tabId:n.tabId,tabType:n.tabType}},r=function(n){var e=n.openWatermark<n.closeWatermark;return e?{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:n.closeWatermark,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:t,tabId:n.tabId,tabType:n.tabType}:{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:t,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:n.openWatermark,tabId:n.tabId,tabType:n.tabType}};return i([{inserter:n,tabConfig:{shouldFocus:!0},tabType:{initialTokens:[],secureThreadToggleEnabled:!1,type:o("MWChatStateV2Types").MWChatStateTabType.ComposeTab},type:o("MWChatStateV2Types").MWChatStateActionsType.UpsertTab,updater:r}])},"chatheadsNewMessage")},t[0]=i,t[1]=l,t[2]=c,t[3]=d):d=t[3];var p=d,_=r("useMWV2PreloadComposeTab")(),f=_[0],g=_[1],h,y,C,b,v;t[4]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"New message"),h=r("MWXTooltip.react"),C="middle",b="start",v=y.toString(),t[4]=h,t[5]=y,t[6]=C,t[7]=b,t[8]=v):(h=t[4],y=t[5],C=t[6],b=t[7],v=t[8]);var S;t[9]===Symbol.for("react.memo_cache_sentinel")?(S=u.jsx(r("FDSIcon.react"),{color:"primary",icon:r("FDSComposeFilled20Icon"),size:20}),t[9]=S):S=t[9];var R;return t[10]!==f||t[11]!==g||t[12]!==n||t[13]!==a||t[14]!==p?(R=u.jsx(h,{align:C,position:b,tooltip:v,children:u.jsx(r("MWXPressable.react"),{"aria-label":y,onFocusChange:n,onHoverChange:a,onHoverIn:f,onHoverOut:g,onPress:p,role:"button",testid:void 0,xstyle:m,children:S})}),t[10]=f,t[11]=g,t[12]=n,t[13]=a,t[14]=p,t[15]=R):R=t[15],R}function m(){return[c.button]}l.default=d}),226);
__d("useMWV2MaxChatHeadsCount",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";var e=5;function s(){var t=r("useCometRouterState")();if(t!=null){var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;if(a.route.tracePolicy==="comet.reels.unified.player")return 1}return e}l.default=s}),98);
__d("MWV2ChatHeads.react",["CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometPlaceholder.react","I64","JSResourceForInteraction","MWChatInteraction","MWChatStateContext","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPActor.react","MWV2ChatHeadsLayout.react","MWV2ChatOptionsHead.react","MWV2ComposeHead.react","WebUXLoggingEntryPointContextProvider","lazyLoadComponent","react","react-compiler-runtime","useMWChatStateV2MaxTabCount","useMWV2MaxChatHeadsCount"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useState,d=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatHead.react").__setRef("MWV2ChatHeads.react")),m=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatOverflowHead.react").__setRef("MWV2ChatHeads.react"));function p(e){return{transform:"translateY(-"+Math.imul(e,58)+"px)"}}function _(e){return{transform:"translateY(-"+(Math.imul(e,58)-12)+"px"}}function f(e){var t=o("react-compiler-runtime").c(27),n=e.isMediaViewer,a=r("useMWV2MaxChatHeadsCount")(),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MWPActor.react").isAPPlus(),t[0]=i):i=t[0];var l=i,f=o("MWChatStateContext").useChatState(y),C=f[0],b=f[1],v=f[2],S=r("useMWChatStateV2MaxTabCount")(n),R=o("MWChatStateV2TabGroups").getTabGroups(v,C,b,S),L=R.openExcessTabs,E=R.openTabs,k=o("MWChatStateV2HeadGroups").getHeadGroups(n?v:void 0,L,C,a),I=k[0],T=k[1],D=E.length,x=I.length,$=T.length>0?1:0,P=c(!1),N=P[0],M=P[1],w,A=T[0];if(T.length===1&&A.tabType.type!==o("MWChatStateV2Types").MWChatStateTabType.ComposeTab){var F=A.tabType.threadKeyDescriptor,O=(s||(s=o("I64"))).to_string(F.threadKey),B;t[1]===Symbol.for("react.memo_cache_sentinel")?(B=p(1),t[1]=B):B=t[1],w=u.jsx(r("CometErrorBoundary.react"),{fallback:h,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ExcessHeads",children:u.jsx(d,{onFocusChange:M,onHoverChange:M,style:B,tab:T[0],threadKeyDescriptor:F})})},O)}else if(T.length>1){var W;t[2]===Symbol.for("react.memo_cache_sentinel")?(W=p(1),t[2]=W):W=t[2],w=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatOverflowHead",children:u.jsx(m,{excessHeads:T,onActiveChange:M,style:W})})}var q=o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,U="chat_heads",V=r("CometHeroInteractionWithDiv.react"),H="Comet initial load to chatheads VC",G;t[3]===Symbol.for("react.memo_cache_sentinel")?(G=o("MWChatInteraction").get(o("MWChatInteraction").MW_CHATHEADS_LOAD),t[3]=G):G=t[3];var z=r("MWV2ChatHeadsLayout.react"),j;t[4]!==x||t[5]!==N||t[6]!==D||t[7]!==$?(j=r("MWV2ChatOptionsHead.react")!=null&&D+x>=2?u.jsx(r("MWV2ChatOptionsHead.react"),{isVisible:N,openTabCount:D,style:_(x+$+1)}):null,t[4]=x,t[5]=N,t[6]=D,t[7]=$,t[8]=j):j=t[8];var K;t[9]!==$||t[10]!==M?(K=function(t,n){var e=t.tabType;if(e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;var a=n+$+1;return u.jsx(r("CometErrorBoundary.react"),{fallback:g,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatHead",children:u.jsx(d,{onFocusChange:M,onHoverChange:M,style:p(a),tab:t,threadKeyDescriptor:e.threadKeyDescriptor})})},(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.threadKey))},t[9]=$,t[10]=M,t[11]=K):K=t[11];var Q=I.reverse().map(K),X;t[12]!==M?(X=!l&&u.jsx(r("MWV2ComposeHead.react"),{onFocusChange:M,onHoverChange:M}),t[12]=M,t[13]=X):X=t[13];var Y;t[14]!==z||t[15]!==w||t[16]!==j||t[17]!==Q||t[18]!==X?(Y=u.jsxs(z,{children:[j,Q,w,X]}),t[14]=z,t[15]=w,t[16]=j,t[17]=Q,t[18]=X,t[19]=Y):Y=t[19];var J;t[20]!==V||t[21]!==G||t[22]!==Y?(J=u.jsx(V,{interactionDesc:H,interactionUUID:G,children:Y}),t[20]=V,t[21]=G,t[22]=Y,t[23]=J):J=t[23];var Z;return t[24]!==q||t[25]!==J?(Z=u.jsx(q,{value:U,children:J}),t[24]=q,t[25]=J,t[26]=Z):Z=t[26],Z}function g(){return null}function h(){return null}function y(e){return[e.tabs,e.focusedTabId,e.mediaViewerOpenWatermark]}l.MWV2ChatHeads=f}),98);
__d("MWV2ChatTabRootLoaderDeferred.react",["deferredLoadComponent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferred")("MWV2ChatTabRootLoader.react").__setRef("MWV2ChatTabRootLoaderDeferred.react")),s=e;l.default=s}),98);
__d("MWV2ChatTabsLayout.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"xpqajaz x1ey2m1c x78zum5 x1jndppq xixxii4 x1vjfegm"},t[0]=a):a=t[0];var i;return t[1]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{"data-testid":void 0,children:r})),t[1]=r,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWV2ChatTabs.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","FocusRegion.react","HeroInteractionIgnoreWithDiv.react","I64","JSResourceForInteraction","MAWEditMessageContext.react","MWChatInteraction","MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPReplyContext.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2ChatTabRootLoaderDeferred.react","MWV2ChatTabsLayout.react","MWV2EnsureThatChatTabExists","MWV2IsTabFocusedContext.react","cr:7101","gkx","hero-tracing","lazyLoadComponent","react","react-compiler-runtime","useCometDisplayTimingTrackerForInteraction","useMWChatStateV2MaxTabCount","useMWV2MaxChatHeadsCount"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=n("cr:7101")||{},d=c.MWComposerKeyCommandFocusManager,m=c.MWComposerKeyCommandFocusManagerTabIndex,p=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("MWV2ChatTabs.react")),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("MWV2ChatTabs.react"));function f(e){var t=o("react-compiler-runtime").c(8),n=e.isMinimized,a=e.tab,i=e.threadKeyDescriptor;o("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(i.threadKey,i.threadType,i.clientThreadKey,"MWV2ChatTabs");var l=r("gkx")("16508");if(l===!0){var s;return t[0]!==n||t[1]!==a||t[2]!==i?(s=u.jsx(r("MWV2ChatTabRootLoaderDeferred.react"),{isMinimized:n,tab:a,threadKeyDescriptor:i}),t[0]=n,t[1]=a,t[2]=i,t[3]=s):s=t[3],s}var c;return t[4]!==n||t[5]!==a||t[6]!==i?(c=u.jsx(_,{isMinimized:n,tab:a,threadKeyDescriptor:i}),t[4]=n,t[5]=a,t[6]=i,t[7]=c):c=t[7],c}function g(e){var t=o("react-compiler-runtime").c(4),n=e.isMediaViewer,a=o("MWChatStateContext").useChatState(b),i=a[0],l=a[1],s=a[2],c=r("useMWChatStateV2MaxTabCount")(n),_=o("MWChatStateV2TabGroups").getTabGroups(n?s:void 0,i,l,c),g=_.minimizedTabs,S=_.openExcessTabs,R=_.openTabs,L=r("useMWV2MaxChatHeadsCount")(),E=o("MWChatStateV2HeadGroups").getHeadGroups(n?s:void 0,S,i,L),k=E[1],I=r("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0),T=g.filter(function(e){return!k.includes(e)}).filter(C),D=[].concat(R,T,S).sort(o("MWChatStateV2CompareTabs").byMostRecentOpened),x=D.map(function(e,t){var n=l===e.tabId,a=e.tabType,i,s=R.indexOf(e)===-1;a.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab?i=u.jsx(p,{initialTokens:a.initialTokens,tab:e},a.initialTokens.map(y).join()):i=u.jsx(f,{isMinimized:s,tab:e,threadKeyDescriptor:a.threadKeyDescriptor});var c=u.jsx(o("FocusRegion.react").FocusRegion,{autoRestoreFocus:!0,children:u.jsx(o("MWV2IsTabFocusedContext.react").MWV2IsTabFocusedContextProvider,{isFocused:n,children:u.jsx(o("MWPReplyContext.react").MWPReplyContextProvider,{children:u.jsx(o("MAWEditMessageContext.react").MAWEditMessageContext,{children:u.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:u.jsx(o("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MWV2_CHAT_TAB",interactionUUID:v(e.tabType),pageletName:"ChatTab",ref:I,children:u.jsx(r("CometPlaceholder.react"),{fallback:s?null:u.jsx(r("MWV2ChatTabLoadingWithGlimmers.react"),{tab:e}),name:"MWV2ChatTabs",children:i})})})})})})});return u.jsx(r("CometErrorBoundary.react"),{fallback:h,children:m==null?c:u.jsx(m,{value:t,children:c})},String(e.tabId))}),$;t[0]!==x?($=d==null?x:u.jsx(d,{children:x}),t[0]=x,t[1]=$):$=t[1];var P;return t[2]!==$?(P=u.jsx(r("MWV2ChatTabsLayout.react"),{children:$}),t[2]=$,t[3]=P):P=t[3],P}function h(){return null}function y(e){return e.id}function C(e){return e.isPreloaded!==!0||e.openWatermark>0}function b(e){return[e.tabs,e.focusedTabId,e.mediaViewerOpenWatermark]}function v(e){if(e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;var t=(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.threadKey),n=o("MWChatInteraction").get(t);return n==null&&r("FBLogger")("messenger_web").warn("Could not find interaction UUID for thread key %s, client thread key %s",t,e.threadKeyDescriptor.clientThreadKey?(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.clientThreadKey):"<empty>"),n}l.default=g}),98);
__d("useMWLSChatPopperUpper",["FBLogger","I64","JSResourceForInteraction","LSContactType","LSIntEnum","MWChatMessagesOnChatTabLoadTracker","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MWXacGating","MercuryIDs","ReQL","ServerTime","VisibilityAPI","clearInterval","gkx","isMWXacGroupThread","isMessengerPWA","justknobx","promiseDone","react","react-compiler-runtime","requireDeferred","setInterval","useGlobalEventListener","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useRef,p=r("requireDeferred")("MWDesktopNotifications").__setRef("useMWLSChatPopperUpper"),_=r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("useMWLSChatPopperUpper"),f=r("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("useMWLSChatPopperUpper"),g={contents:void 0};function h(e,t,n,a,i,l,c,d,m,g,h){h===void 0&&(h=o("MWLSChatTabPolicy").shouldMessageBeAllowed);var y=o("MWGetCurrentThreadIDForLSThread").get(a.threadKey,a.threadType,(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE))||(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE_PERSONA)));return h(n,a,i,d,m,function(){var u=r("gkx")("16508");u===!0?r("promiseDone")(f.load()):r("promiseDone")(_.load());var d=o("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(a.threadKey));return o("MWChatMessagesOnChatTabLoadTracker").trackReceivedFor(a.threadKey),e(y,a,function(){if(c(n,a,i,l),o("VisibilityAPI").isVisibilityHidden()===!0){var e=r("isMessengerPWA")()&&r("justknobx")._("1465");e&&r("promiseDone")((async function(){var e=await p.load(),r=e.triggerLocalNotification;await r(t,n,g)})())}if(o("MWChatThreadPingCounter").getCount(d)<3){o("MWChatThreadPingCounter").incrementCount(d),o("MWLSChatPopperCommon").playChatTabSound(n);return}})})}function y(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c==null){r("FBLogger")("messenger_web_entrypoints").mustfix("Thread is null when receiving a new message");return}if(d!=null&&m!=null)return h(i,s,o,c,d,m,u,t,n,a,l)})}function C(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c!=null&&d!=null&&m!=null&&!r("isMWXacGroupThread")(c))return h(i,s,o,c,d,m,u,t,n,a,l)})}function b(e){var t=o("react-compiler-runtime").c(11),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),p=o("MWLSChatPopperCommon").useUpdateDocumentTitle(n,c,g),_;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=o("ServerTime").getMillis(),t[2]=_):_=t[2];var f=m(_),h=r("useMWNavigation")(),b=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),v=b.familyCenterData,S,R;t[3]!==c||t[4]!==v.hasActiveMsgrFamilyCenterEnforcement||t[5]!==h||t[6]!==u||t[7]!==n||t[8]!==p?(S=function(){return o("ReQL").fromTableAscending(n.tables.messages).subscribe(function(e,t){if(t.operation==="add"){var r=t.value;if((s||(s=o("I64"))).to_float(r.timestampMs)<=f.current)return;f.current=(s||(s=o("I64"))).to_float(r.timestampMs);var a=o("MWXacGating").isGroupsEnabled()?y:C;return a({actor:c,hasActiveMsgrFamilyCenterEnforcement:v.hasActiveMsgrFamilyCenterEnforcement,message:r,navigationApi:h,openTabFromNewMessage:u,storage:n,updateDocumentTitle:p})}})},R=[c,h,v.hasActiveMsgrFamilyCenterEnforcement,u,n,p],t[3]=c,t[4]=v.hasActiveMsgrFamilyCenterEnforcement,t[5]=h,t[6]=u,t[7]=n,t[8]=p,t[9]=S,t[10]=R):(S=t[9],R=t[10]),d(S,R)}function v(e){var t=o("react-compiler-runtime").c(10),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==n||t[1]!==i?(l={storage:n,withChatTabTracing:i},t[0]=n,t[1]=i,t[2]=l):l=t[2],b(l);var s=m(),u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=function(){var e=s.current;if(e!=null){r("clearInterval")(e);return}},t[3]=u):u=t[3];var c=u,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=function(){c(),s.current=r("setInterval")(S,6e5)},t[4]=p):p=t[4];var _=p,f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return o("MWChatThreadPingCounter").clear(),c()},t[5]=f):f=t[5];var g=f,h;t[6]===Symbol.for("react.memo_cache_sentinel")?(h={},t[6]=h):h=t[6],r("useGlobalEventListener")("blur",_,h);var y;t[7]===Symbol.for("react.memo_cache_sentinel")?(y={},t[7]=y):y=t[7],r("useGlobalEventListener")("focus",g,y);var C,v;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return function(){return c()}},v=[],t[8]=C,t[9]=v):(C=t[8],v=t[9]),d(C,v)}function S(){return o("MWChatThreadPingCounter").clear()}l.default=v}),98);
__d("useSubscribeToErrorTableAndShowToast",["ReQL","react","react-compiler-runtime","requireDeferred","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c=r("requireDeferred")("LSUserVisibleErrorsUtil").__setRef("useSubscribeToErrorTableAndShowToast"),d=r("requireDeferred")("mwPushToast").__setRef("useSubscribeToErrorTableAndShowToast"),m={contents:!1};function p(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){if(!m.contents){m.contents=!0;var e=o("ReQL").fromTableAscending(a.tables.user_visible_errors).subscribe(function(e,n){switch(n.operation){case"add":{var o=n.value,i=o.presentationStyle;if(i!=null&&i!=="toast"&&i!=="undefined")return;d.onReady(function(e){e.mwPushErrorToast({body:o.errorBodyText!=null?r("translatedServerString")(o.errorBodyText):void 0,onDismiss:function(){c.onReady(function(e){e.removeUserVisibleErrorFromTable(a,o.errorId)})},title:r("translatedServerString")(o.errorTitleText)},t)});return}case"put":case"delete":return}});return function(){return m.contents=!1,e()}}},l=[a,t],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),u(i,l)}l.default=p}),98);
__d("useMWChatInit",["MWLSCommunityChatPopper","MWPGetThreadTitle","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useMWLSChatPopperUpper","useReStore","useSubscribeToErrorTableAndShowToast"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(){var t=o("react-compiler-runtime").c(12),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.community_folders||t[1]!==n.tables.contacts||t[2]!==n.tables.participants||t[3]!==n.tables.pinned_threads||t[4]!==n.tables.threads?(a=function(){var e;r("promiseDone")((e=o("ReQL")).toArrayAsync(e.fromTableAscending(n.tables.threads).map(function(e){return[e,o("ReQLSuspense").toArray(o("ReQL").leftJoin(o("ReQL").fromTableAscending(n.tables.participants,[]).getKeyRange(e.threadKey),o("ReQL").fromTableAscending(n.tables.contacts)).take(o("MWPGetThreadTitle").amountToFetchForTitle),i.id+":34")]}).take(30))),r("promiseDone")(e.toArrayAsync(e.fromTableAscending(n.tables.pinned_threads.index("pinnedTimestamp")))),r("promiseDone")(e.toArrayAsync(e.fromTableAscending(n.tables.community_folders)))},t[0]=n.tables.community_folders,t[1]=n.tables.contacts,t[2]=n.tables.participants,t[3]=n.tables.pinned_threads,t[4]=n.tables.threads,t[5]=a):a=t[5];var l;t[6]!==n?(l=[n],t[6]=n,t[7]=l):l=t[7],u(a,l),r("useSubscribeToErrorTableAndShowToast")();var s;t[8]!==n?(s={storage:n,withChatTabTracing:!0},t[8]=n,t[9]=s):s=t[9],r("useMWLSChatPopperUpper")(s);var c;t[10]!==n?(c={storage:n,withChatTabTracing:!0},t[10]=n,t[11]=c):c=t[11],o("MWLSCommunityChatPopper").useOpenCommunityChatTabs(c)}l.default=c}),98);
__d("useMWIsAPPlusChannelsInbox",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("useCometRouterState")();if(t==null)return!1;var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;return((e=a.route)==null?void 0:e.tracePolicy)==="comet.messenger.applus.inbox"}l.default=e}),98);
__d("useMWIsTopLevelRouteMessengerMediaViewer",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("useCometRouterState")();if(t==null)return!1;var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;return((e=a.route)==null?void 0:e.tracePolicy)==="comet.sharedmediaviewer.media"}l.default=e}),98);
__d("useMWV2ChatUpdateMediaViewerOpenWatermark",["MWChatStateActions","MWChatStateV2.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(2),t=o("MWChatStateV2.react").useDispatch(),n;return e[0]!==t?(n=function(){var e=Date.now();t(o("MWChatStateActions").updateMediaViewerOpenWatermark(e))},e[0]=t,e[1]=n):n=e[1],n}l.default=u}),98);
__d("MWV2CookieWriter",["DeferredCookie","FBLogger","I64","MWCMThreadTypes.react","MWChatStateV2Types","Promise","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(Number((s||(s=o("I64"))).to_string(e))){case 2:return"g.";case 15:return"sc.";case 16:return"sg.";case 18:return"cg.";case 19:return"cgu.";case 23:return"cbj.";case 24:return"cbu.";case 21:return"cphj.";case 22:return"cphu.";case 150:return"dp.";case 151:return"dpu.";case 152:return"dpb.";case 153:return"dpbu.";case 154:return"dp2.";case 155:return"dp2u.";default:return"u."}}function c(t,a,i){var l=function(t){if(a==null)return!1;var e=a.tabType;return e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab?!1:(s||(s=o("I64"))).equal(e.threadKeyDescriptor.threadKey,t)},c=function(t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.threads).getKeyRange(t))},d={contents:void 0},m=t.map(function(t){var r=t.isOpen,a=t.threadKey,i=t.threadType,m={o:r?1:0};return c(a).then(function(t){return t!=null?l(a)?(o("MWCMThreadTypes.react").isJoinedCMThread(i)&&(d.contents=(s||(s=o("I64"))).to_string(t.parentThreadKey)),(e||(e=n("Promise"))).resolve()):(m.i=u(i)+(s||(s=o("I64"))).to_string(a),o("MWCMThreadTypes.react").isJoinedCMThread(i)&&(m.p=(s||(s=o("I64"))).to_string(t.parentThreadKey)),(e||(e=n("Promise"))).resolve(m)):(m.i=u(i)+(s||(s=o("I64"))).to_string(a),(e||(e=n("Promise"))).resolve(m))})});r("promiseDone")((e||(e=n("Promise"))).all(m).then(function(t){var i;if(a!=null){var l=a.tabType;if(l.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)i=void 0;else{var c=l.threadKeyDescriptor,m=c.threadKey,p=c.threadType;i=u(p)+(s||(s=o("I64"))).to_string(m)}}else i=void 0;var _=t.filter(function(e){return e!=null}),f=d.contents,g=f!=null?JSON.stringify({lm3:i,lm3p:f,t3:_,utc3:Date.now(),v:1}):JSON.stringify({lm3:i,t3:_,utc3:Date.now(),v:1});return g!=null?r("DeferredCookie").addToQueue("presence","C"+g,0,"/",!1,!1,!0):r("FBLogger")("messenger_comet").mustfix("Failed to serialize cookie"),(e||(e=n("Promise"))).resolve()}))}l.write=c}),98);
__d("useMWV2CookieWriter",["MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2IsOpen","MWChatStateV2Types","MWPActor.react","MWV2CookieWriter","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(){var t=o("react-compiler-runtime").c(4),n=o("MWChatStateContext").useChatState(_),a=(e||(e=r("useReStore")))(),i,l;t[0]!==a||t[1]!==n?(i=function(){if(!o("MWPActor.react").isAPPlus()){var e=Array.from(n.values()).filter(p).sort(o("MWChatStateV2CompareTabs").byMostRecentOpened)[0],t=[];Array.from(n.values()).filter(m).sort(d).forEach(function(e){var n=e.tabType;n.type!==o("MWChatStateV2Types").MWChatStateTabType.ComposeTab&&t.push(babelHelpers.extends({},n.threadKeyDescriptor,{isOpen:!1}))}),o("MWV2CookieWriter").write(t,e,a)}},l=[a,n],t[0]=a,t[1]=n,t[2]=i,t[3]=l):(i=t[2],l=t[3]),u(i,l)}function d(e,t){var n=o("MWChatStateV2CompareTabs").byMostRecentMinimized(e,t);return n===0?o("MWChatStateV2CompareTabs").byMostRecentOpened(e,t):n}function m(e){return e.openWatermark>e.closeWatermark?!0:e.minimizeWatermark>e.closeWatermark}function p(e){return o("MWChatStateV2IsOpen").isOpen(void 0,e)}function _(e){return e.tabs}l.default=c}),98);
__d("MWV2ChatTabsRoot.react",["CometContextualLayerAnchorRoot.react","CometDOMOnlyBoundary.react","CometPlaceholder.react","FocusRegion.react","MWChatStateV2.react","MWChatVisibilityOverrideContext","MWDraftMessages.react","MWFallbackWithTimeout.react","MWLSThreadDisplayContext","MWV2ChatHeads.react","MWV2ChatTabs.react","WebUXLoggingEntryPointContextProvider","focusScopeQueries","react","react-compiler-runtime","useEnsureViewerContactExistAndUpdated","useMWChatInit","useMWIsAPPlusChannelsInbox","useMWIsTopLevelRouteMediaViewerExperiment","useMWIsTopLevelRouteMessengerMediaViewer","useMWV2ChatUpdateMediaViewerOpenWatermark","useMWV2CookieWriter","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useMemo;function m(e){var t=o("react-compiler-runtime").c(16),n=e.isMediaViewer,a=o("MWChatStateV2.react").useChatState(_),i=r("useMWIsTopLevelRouteMessengerMediaViewer")(),l;l=Array.from(a.values()).some(p);var u=l,c;t[0]!==i?(c={0:{className:"x1ey2m1c xtijo5x xixxii4 xamhafn x1vjfegm"},1:{className:"x1ey2m1c xtijo5x xixxii4 xamhafn x1vjfegm x1s85apg"}}[!!i<<0],t[0]=i,t[1]=c):c=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d={className:"xuk3077 x78zum5 xc8icb0"},t[2]=d):d=t[2];var m=u?o("focusScopeQueries").tabbableScopeQuery:void 0,f;t[3]!==n?(f=s.jsx(r("MWV2ChatTabs.react"),{isMediaViewer:n}),t[3]=n,t[4]=f):f=t[4];var g;t[5]!==n?(g=s.jsx(r("CometDOMOnlyBoundary.react"),{children:s.jsx(o("MWV2ChatHeads.react").MWV2ChatHeads,{isMediaViewer:n})}),t[5]=n,t[6]=g):g=t[6];var h;t[7]!==f||t[8]!==g?(h=s.jsxs(s.Fragment,{children:[f,g]}),t[7]=f,t[8]=g,t[9]=h):h=t[9];var y;t[10]!==m||t[11]!==h?(y=s.jsx(r("CometContextualLayerAnchorRoot.react"),{children:s.jsx("div",babelHelpers.extends({},d,{children:s.jsx(o("FocusRegion.react").FocusRegion,{containFocusQuery:m,id:"MWV2ChatTabsRootChatTabsFocusRegion",children:h})}))}),t[10]=m,t[11]=h,t[12]=y):y=t[12];var C;t[13]!==c||t[14]!==y?(C=s.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"popup_chat_box",children:s.jsx(o("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"ChatTab",children:s.jsx(o("MWDraftMessages.react").MWDraftProvider,{children:s.jsx("div",babelHelpers.extends({},c,{children:y}))})})}),t[13]=c,t[14]=y,t[15]=C):C=t[15];var b=C;return b}function p(e){return e.openWatermark>e.closeWatermark}function _(e){return e.tabs}function f(e){var t=e.children;return r("useMWV2CookieWriter")(),r("useMWChatInit")(),t}function g(){var e=o("react-compiler-runtime").c(10),t=r("useMWIsTopLevelRouteMediaViewerExperiment")(),n=o("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(t),a=r("useMWV2ChatUpdateMediaViewerOpenWatermark")(),i=r("useMWIsAPPlusChannelsInbox")(),l=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT_TABS_ROOT")&&n&&!i,u,d;e[0]!==t||e[1]!==a?(u=function(){t&&a()},d=[t,a],e[0]=t,e[1]=a,e[2]=u,e[3]=d):(u=e[2],d=e[3]),c(u,d),r("useEnsureViewerContactExistAndUpdated")();var p,_;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(r("MWFallbackWithTimeout.react"),{message:"MWV2ChatTabsRoot suspense timeout"}),e[4]=_):_=e[4];var g;e[5]!==t||e[6]!==l?(g=l?s.jsx(m,{isMediaViewer:t}):null,e[5]=t,e[6]=l,e[7]=g):g=e[7];var h;return e[8]!==g?(h=s.jsx(r("CometPlaceholder.react"),{fallback:_,name:"MWV2ChatTabsRoot",children:s.jsx(f,{children:g})}),e[8]=g,e[9]=h):h=e[9],p=h,p}l.default=g}),98);
__d("MWV2ChatContainer.react",["MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react","MWV2ChatTabsRoot.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(s.Fragment,{children:[s.jsx(r("MWV2ChatTabsRoot.react"),{}),s.jsx(r("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"),{})]}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","FBLogger","JSResourceForInteraction","LSDatabaseAfterInitSyncSingleton","LSDatabaseSingleton","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformMessengerConfig","MWChatDisabled.react","MWChatInteraction","MWV2ChatContainer.react","MWXLazyPopoverTrigger.react","gkx","isMWAppsSubdomainExperiment","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useLayoutEffect;function p(e){var t=r("FBLogger")("messenger_web");e!=null&&(t=t.catching(e)),t.warn("Error loading MWV2Chat")}var _=r("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),f=function(t){return u.jsx(r("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:t},popoverResource:_,position:"above",visibleOnLoad:!0,children:function(t,n){return u.jsx(r("MWChatDisabled.react"),{contextRef:t,onPress:n})}})},g=!r("gkx")("22788")||r("isMWAppsSubdomainExperiment")(!1);function h(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],m(C,t);var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=[],e[1]=n):n=e[1],d(y,n);var a;return e[2]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(r("CometErrorBoundary.react"),{fallback:f,onError:p,children:g?u.jsx(r("MWChatDisabled.react"),{}):u.jsx(r("LSPlatformClientProviderWithDeferredLoadingStrategy.react"),{config:o("LSPlatformMessengerConfig").configEagerlyLoaded,errorFallback:f,children:u.jsx(r("MWV2ChatContainer.react"),{})})}),e[2]=a):a=e[2],a}function y(){g&&o("LSDatabaseAfterInitSyncSingleton").resolveInitSync((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton)}function C(){o("MWChatInteraction").addAutoChatTabMarkerPoint("mwv2_chat_rendered")}l.default=h}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","react-compiler-runtime","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","onChange"],s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef;function p(t){var a,i=o("react-compiler-runtime").c(14),l,s,c;i[0]!==t?(c=t.ref,l=t.onChange,s=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=s,i[3]=c):(l=i[1],s=i[2],c=i[3]);var p=(a=r("useSearchCometEventEmitterContext")(r("SearchCometTypeaheadEventEmitterContext")))!=null?a:{},_=p.subscribeToGlobalTypeaheadFocus,f,g;i[4]!==l||i[5]!==_?(f=function(t){return _==null?void 0:_(function(){t!=null&&(t.value="",t.focus(),l(""))})},g=[l,_],i[4]=l,i[5]=_,i[6]=f,i[7]=g):(f=i[6],g=i[7]);var h=r("useRefEffect")(f,g),y=m(null),C=m(!1),b,v;i[8]===Symbol.for("react.memo_cache_sentinel")?(b=function(){var e=y.current;if(n("cr:2012305")!=null&&e!=null&&C.current===!1)return n("cr:2012305").trackTypingPerf(e,"top_tab_serp_typeahead"),C.current=!0,function(){n("cr:2012305").unregisterTypingPerf(e),C.current=!1}},v=[],i[8]=b,i[9]=v):(b=i[8],v=i[9]),d(b,v);var S=r("useMergeRefs")(h,y),R=r("useMergeRefs")(S,c),L;return i[10]!==R||i[11]!==l||i[12]!==s?(L=u.jsx(r("CometTypeaheadInputRoundedStrategy.react"),babelHelpers.extends({},s,{onChange:l,ref:R})),i[10]=R,i[11]=l,i[12]=s,i[13]=L):L=i[13],L}l.default=p}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e,t){"use no forget";var n=e?e.getInteractionUUID():null,r=e?e.getVCTrackerRef():null,o=n!=null&&e!=null&&!e.isResolved();return s(function(){var a=function(r,o){e&&o!=null&&e.setEventStartTime(o.timeStamp),t(r,o)};return{interactionUUID:n,onTracedChange:a,shouldHoldHeroTracing:o,vcTrackerRef:r}},[n,t,o,e,r])}l.default=u}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(t,n,r,o,a,i,l){"use strict";var e=["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","onLeftArrow","onRightArrow","viewRole","inputRef","xstyles"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(74),a,i,l,s,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T;n[0]!==t?(E=t.extraLayoutProps,i=t.helperText,l=t.label,s=t.onAbandonTypeahead_DO_NOT_USE,c=t.onBlur,d=t.onChange,m=t.onClick,p=t.onDownArrow,_=t.onEnter,f=t.onEscape,g=t.onHighlightEntry,y=t.onOutsideClick,C=t.onPressEntry,v=t.onShiftTab,S=t.onTab,R=t.onUpArrow,k=t.traceProvider,h=t.onLeftArrow,b=t.onRightArrow,I=t.viewRole,a=t.inputRef,T=t.xstyles,L=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g,n[12]=h,n[13]=y,n[14]=C,n[15]=b,n[16]=v,n[17]=S,n[18]=R,n[19]=L,n[20]=E,n[21]=k,n[22]=I,n[23]=T):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11],h=n[12],y=n[13],C=n[14],b=n[15],v=n[16],S=n[17],R=n[18],L=n[19],E=n[20],k=n[21],I=n[22],T=n[23]);var D;n[24]!==E?(D=E===void 0?{}:E,n[24]=E,n[25]=D):D=n[25];var x=D,$=x.afterViewContent,P=x.beforeViewContent,N=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),M=N.isOpened,w=r("useCometInternalTypeaheadState")(),A=w.activeEntries,F=w.highlightedEntry,O=w.secondaryActionHighlighted,B=r("useCometInternalTypeaheadFetch")(),W=B.isLoading,q=r("useCometTypeaheadInputRefs")(a),U=q.composedRef,V=q.inputRef,H=r("useSearchCometGlobalTypeaheadStyles")(),G=T!=null?T:H,z=r("useCometInternalTypeaheadHeroTracing")(k,d),j=z.interactionUUID,K=z.onTracedChange,Q=z.shouldHoldHeroTracing,X=z.vcTrackerRef,Y;n[26]!==s||n[27]!==c||n[28]!==m||n[29]!==p||n[30]!==_||n[31]!==f||n[32]!==g||n[33]!==h||n[34]!==y||n[35]!==C||n[36]!==b||n[37]!==v||n[38]!==S||n[39]!==K||n[40]!==R?(Y={onAbandonTypeahead_DO_NOT_USE:s,onBlur:c,onChange:K,onClick:m,onDownArrow:p,onEnter:_,onEscape:f,onHighlightEntry:g,onLeftArrow:h,onOutsideClick:y,onPressEntry:C,onRightArrow:b,onShiftTab:v,onTab:S,onUpArrow:R},n[26]=s,n[27]=c,n[28]=m,n[29]=p,n[30]=_,n[31]=f,n[32]=g,n[33]=h,n[34]=y,n[35]=C,n[36]=b,n[37]=v,n[38]=S,n[39]=K,n[40]=R,n[41]=Y):Y=n[41];var J;n[42]!==V||n[43]!==Y?(J={handlers:Y,inputRef:V},n[42]=V,n[43]=Y,n[44]=J):J=n[44];var Z=r("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(J),ee;n[45]!==A||n[46]!==i||n[47]!==F||n[48]!==M||n[49]!==l||n[50]!==O||n[51]!==I?(ee={activeEntries:A,helperText:i,highlightedEntry:F,inputLabel:l,isOpened:M,secondaryActionHighlighted:O,viewRole:I},n[45]=A,n[46]=i,n[47]=F,n[48]=M,n[49]=l,n[50]=O,n[51]=I,n[52]=ee):ee=n[52];var te=r("useCometTypeaheadLayoutContextualStrategyARIAProps")(ee),ne;n[53]!==Q?(ne=u.jsx(r("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:Q}),n[53]=Q,n[54]=ne):ne=n[54];var re;n[55]!==$||n[56]!==te||n[57]!==P||n[58]!==W||n[59]!==M?(re={afterViewContent:$,ariaProps:te,beforeViewContent:P,helperTextComponent:null,isLoading:W,isOpened:M},n[55]=$,n[56]=te,n[57]=P,n[58]=W,n[59]=M,n[60]=re):re=n[60];var oe;n[61]!==U||n[62]!==Z||n[63]!==l||n[64]!==L||n[65]!==re||n[66]!==I||n[67]!==G?(oe=u.jsx(r("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers.extends({},L,Z,{extraLayoutProps:re,inputRef:U,label:l,viewRole:I,xstyles:G})),n[61]=U,n[62]=Z,n[63]=l,n[64]=L,n[65]=re,n[66]=I,n[67]=G,n[68]=oe):oe=n[68];var ae;return n[69]!==j||n[70]!==ne||n[71]!==oe||n[72]!==X?(ae=u.jsxs(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:j,ref:X,children:[ne,oe]}),n[69]=j,n[70]=ne,n[71]=oe,n[72]=X,n[73]=ae):ae=n[73],ae}l.default=c}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("24247")}l.hasTypeaheadRedirection=e}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","XCometSearchResultsControllerRouteBuilder","react-compiler-runtime","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface","useSearchCometResultsURLBuilder"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={routeBuilder:r("XCometSearchResultsControllerRouteBuilder")},e[0]=t):t=e[0];var n=r("useSearchCometResultsURLBuilder")(t),a=r("useSearchCometHashtagRouteUrlBuilder")(),i=r("useSearchCometResultsEntryPointSurface")(),l;return e[1]!==a||e[2]!==i||e[3]!==n?(l=function(t){var e=t.entry,l=t.queryString,s=t.typeaheadSessionID,u=e.label.toLowerCase(),c=e.metaData,d=c==null?void 0:c.markers,m=o("SearchCometInterestsDeepDiveUtil").getHashtagTag(u);if(o("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&m!=null&&!d.has("see_all"))return a({entryPointAction:"SEARCH_BOX",exploreEntryPoint:l===""?3:4,hashtag:m,typeaheadSessionID:s});var p,_=e.rawData,f=(p=r("searchCometTypeaheadGetStsDisambiguation")(e))!=null?p:void 0;if(e.subtype==="keyword"&&d.has("disambiguation")){var g,h,y=(g=(h=_.structuredInfo)==null||(h=h.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?g:{},C=y.link_url;if(C!=null){var b=o("ConstUriUtils").getUri(C);if(b!=null){var v=new Map;i!=null&&v.set("__eps__",i),f!==void 0&&v.set("__stsd__",r("Base64").encode(JSON.stringify(f)));var S=new Map;for(var R of v){var L=R[0],E=R[1];S.set(L,E)}var k=b.addQueryParams(S);if(k!=null)return k.toString()}}}return n({entryPointAction:"SEARCH_BOX",highConfidenceResult:r("searchCometTypeaheadGetHighConfidenceResult")(e),query:u,stsDisambiguation:f,typeaheadSessionID:s})},e[1]=a,e[2]=i,e[3]=n,e[4]=l):l=e[4],l}l.default=e}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["react","react-compiler-runtime","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(10),n=e.entry,a=e.queryString,i=r("useCometRouterDispatcher")(),l=r("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),s,c;t[0]!==l||t[1]!==n||t[2]!==a?(c=l({entry:n,queryString:a}),t[0]=l,t[1]=n,t[2]=a,t[3]=c):c=t[3],s=c;var d=s,m,p;t[4]!==i||t[5]!==d?(m=function(){i!=null&&i.preloadRouteCode(d)},p=[i,d],t[4]=i,t[5]=d,t[6]=m,t[7]=p):(m=t[6],p=t[7]),u(m,p);var _,f;return t[8]!==d?(f={preloadCodeOnMount:!0,preventLocalNavigation:!0,url:d},t[8]=d,t[9]=f):f=t[9],_=f,_}l.default=d}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useMemo,d={view:{backgroundColor:"x1jx94hy",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function m(e){var t=e.onHeaderActionPress,n=c(function(){return[d.view]},[]),o=c(function(){return u.jsx(r("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return r("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:r("searchCometTypeaheadSTSMappings"),emptyStateContent:o,getLinkProps:r("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:t,seeAllLabelBuilder:p,xstyle:n})}function p(e){return s._(/*BTDS*/"Search for {=m1}",[s._implicitParam("=m1",u.jsx("strong",{children:s._(/*BTDS*/"{query}",[s._param("query",e)])}))])}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9365993650171871"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:t},params:{id:n("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","FBLogger","filterNulls","react","react-compiler-runtime","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var a=o("react-compiler-runtime").c(3),i=t.bootstrapDatasource,l=o("CometRelay").useRelayEnvironment(),s,u;return a[0]!==i||a[1]!==l?(u={validate:function(a){var t=r("filterNulls")(a.map(m));o("CometRelay").fetchQuery(l,e!==void 0?e:e=n("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:t}}).subscribe({error:d,next:function(t){var e=t.search_client_cache_policy_check;for(var n of(r=e==null?void 0:e.policy_decision)!=null?r:[]){var r,o=n.cache_type,a=n.force_cache_refresh,l=n.ids_to_remove;if(o==="KEYWORD_BOOTSTRAP"){for(var s of l)i.removeEntriesByEntID(s);a===!0&&(i.clear(),i.bootstrap())}}}})}},a[0]=i,a[1]=l,a[2]=u):u=a[2],s=u,s}function d(e){o("CometRelayErrorHandling").markErrorAsHandled(e)}function m(e){var t;if(e.subtype!=="bootstrap")return null;var n=(t=e.rawData.structuredInfo)!=null?t:{},o=n.direct_nav_result;if(o==null)return null;var a=o.ent_id,i=o.title;return a==null||i==null?(r("FBLogger")("search").mustfix("Unexpected missing ent_id or title on direct_nav_result"),null):{id:a,keyword:i}}l.default=c}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){function n(n){var r=o("react-compiler-runtime").c(15),a,i,l,s,c;r[0]!==n?(a=n.inputRef,i=n.onChange,l=n.onPressEntry,c=n.shouldQueryStringUpdateFromSelectedEntryOnClick,s=babelHelpers.objectWithoutPropertiesLoose(n,e),r[0]=n,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=c):(a=r[1],i=r[2],l=r[3],s=r[4],c=r[5]);var d=c===void 0?!1:c,m;r[6]!==i||r[7]!==l?(m=function(t,n){var e=t.metaData,r=t.subtype,o=e.markers,a=r==="recent"&&o.has("entity")||o.has("direct_nav");i(a?"":t.label),l==null||l(t,n)},r[6]=i,r[7]=l,r[8]=m):m=r[8];var p=m,_;return r[9]!==a||r[10]!==p||r[11]!==i||r[12]!==s||r[13]!==d?(_=u.jsx(t,babelHelpers.extends({},s,{inputRef:a,onChange:i,onPressEntry:p,shouldQueryStringUpdateFromSelectedEntryOnClick:d})),r[9]=a,r[10]=p,r[11]=i,r[12]=s,r[13]=d,r[14]=_):_=r[14],_}return n}l.default=d}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo;function p(t){function n(n){var a=o("react-compiler-runtime").c(13),i,l;a[0]!==n?(i=n.inputRef,l=babelHelpers.objectWithoutPropertiesLoose(n,e),a[0]=n,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=r("useCometTypeaheadInputRefs")(i),c=s.composedRef,d=s.inputRef,m=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),p=m.dispatchIsOpened,_;a[3]!==p||a[4]!==d?(_=function(){d.current!=null&&(d.current.focus(),p(!0))},a[3]=p,a[4]=d,a[5]=_):_=a[5];var f=_,g,h;a[6]!==f?(h=o("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",f),a[6]=f,a[7]=h):h=a[7];var y;a[8]!==h?(y=[h],a[8]=h,a[9]=y):y=a[9],g=y;var C=g;r("useGlobalKeyCommands")(C);var b;return a[10]!==c||a[11]!==l?(b=u.jsx(t,babelHelpers.extends({},l,{inputRef:c})),a[10]=c,a[11]=l,a[12]=b):b=a[12],b}return n}l.default=p}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onPressEntry","traceProvider"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){function n(n){var r=o("react-compiler-runtime").c(13),a,i,l,s;r[0]!==n?(a=n.inputRef,i=n.onPressEntry,s=n.traceProvider,l=babelHelpers.objectWithoutPropertiesLoose(n,e),r[0]=n,r[1]=a,r[2]=i,r[3]=l,r[4]=s):(a=r[1],i=r[2],l=r[3],s=r[4]);var c;r[5]!==i||r[6]!==s?(c=function(t,n){s&&s.setEndReason("successful_user_action"),i==null||i(t,n)},r[5]=i,r[6]=s,r[7]=c):c=r[7];var d=c,m;return r[8]!==a||r[9]!==d||r[10]!==l||r[11]!==s?(m=u.jsx(t,babelHelpers.extends({},l,{inputRef:a,onPressEntry:d,traceProvider:s})),r[8]=a,r[9]=d,r[10]=l,r[11]=s,r[12]=m):m=r[12],m}return n}l.default=d}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometTypeaheadErrorFallback.react","FBLogger","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","XCometSearchResultsControllerRouteBuilder","emptyFunction","qex","react","react-compiler-runtime","requireDeferred","searchCometGlobalTypeahead.config","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadNullStateDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsURLBuilder","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useContext,f=m.useEffect,g=m.useMemo,h=m.useRef,y=r("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react"),C=(u=r("qex")._("7"))!=null?u:!1;function b(t){var n=o("react-compiler-runtime").c(77),a,i,l,u,c,m,p,g,b,E;n[0]!==t?(E=t.autoOpen,a=t.inputXStyle,l=t.onClose,u=t.onEscape,c=t.onFocus,m=t.onHeaderActionPress,p=t.onPressEntry,g=t.onSelectFreeformQuery,i=t.queryString,b=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=c,n[6]=m,n[7]=p,n[8]=g,n[9]=b,n[10]=E):(a=n[1],i=n[2],l=n[3],u=n[4],c=n[5],m=n[6],p=n[7],g=n[8],b=n[9],E=n[10]);var k=E===void 0?!1:E,I=r("useCometTypeaheadStateQueryString")(i),T=I[0],D=I[1],x=r("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),$;n[11]===Symbol.for("react.memo_cache_sentinel")?($={routeBuilder:r("XCometSearchResultsControllerRouteBuilder")},n[11]=$):$=n[11];var P=r("useSearchCometResultsURLBuilder")($),N=r("useSearchCometHashtagRouteUrlBuilder")(),M;n[12]===Symbol.for("react.memo_cache_sentinel")?(M={tapPoint:"tap_search_bar"},n[12]=M):M=n[12];var w=r("useCometTypeaheadNavigate")(M),A=h(!1),F=r("useSearchCometGlobalTypeaheadNullStateDataSource")(),O;n[13]!==F?(O={config:r("searchCometGlobalTypeahead.config"),recentDataSource:F},n[13]=F,n[14]=O):O=n[14];var B=r("useSearchCometGlobalTypeaheadCompositeDataSource")(O),W;n[15]!==B?(W=B.getBootstrapKeywordsDataSource(),n[15]=B,n[16]=W):W=n[16];var q=W;if(q==null)throw r("FBLogger")("search").mustfixThrow("Bootstrap datasource is missing");var U;n[17]!==q?(U={bootstrapDatasource:q},n[17]=q,n[18]=U):U=n[18];var V=r("useSearchCometTypeaheadBootstrapValidation")(U),H=V.validate,G;n[19]!==H?(G=function(t){var e=t.shownEntries;H(e)},n[19]=H,n[20]=G):G=n[20];var z=G,j=_(o("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext),K=j.logger,Q=j.onSessionStart,X=j.setSessionEndCallback,Y=j.traceProvider,J=K,Z=Y,ee;n[21]!==z?(ee={context:"search_global",onSessionEnd:z},n[21]=z,n[22]=ee):ee=n[22];var te=r("useSearchCometTypeaheadLoggingProvider")(ee);r("useCometSearchTypeaheadTraceProvider")(K||te);var ne,re;if(n[23]!==z||n[24]!==X?(re=function(){X(z)},ne=[X,z],n[23]=z,n[24]=X,n[25]=ne,n[26]=re):(ne=n[25],re=n[26]),f(re,ne),J==null)throw J=te,y.onReady(R),r("FBLogger")("search").mustfix("Typeahead used without logger in context");if(Z==null)throw r("FBLogger")("search").mustfix("Typeahead used without traceProvider in context");var oe=r("useSearchCometTypeaheadRecentDataSourceContextDecorator")(B,!1),ae,ie;n[27]===Symbol.for("react.memo_cache_sentinel")?(ie={decorate:r("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")},n[27]=ie):ie=n[27];var le;n[28]!==oe?(le=[oe,ie].filter(Boolean),n[28]=oe,n[29]=le):le=n[29],ae=le;var se=ae,ue,ce;n[30]!==B?(ue=function(){B.bootstrap()},ce=[B],n[30]=B,n[31]=ue,n[32]=ce):(ue=n[31],ce=n[32]),f(ue,ce);var de;n[33]!==c||n[34]!==Q?(de=function(){A.current=!0,Q(),c&&c()},n[33]=c,n[34]=Q,n[35]=de):de=n[35];var me=de,pe;n[36]!==J||n[37]!==w||n[38]!==p||n[39]!==T||n[40]!==x?(pe=function(t,n){var e;if(n!==!0){var r=t.metaData,o=r==null?void 0:r.markers,a=o!=null&&o.has("entity"),i=o!=null&&o.has("direct_nav"),l=x({entry:t,queryString:T,typeaheadSessionID:(e=J)==null?void 0:e.getSessionID()}),s=L(t,l,a,i);w(s),p==null||p(t)}},n[36]=J,n[37]=w,n[38]=p,n[39]=T,n[40]=x,n[41]=pe):pe=n[41];var _e=pe,fe;n[42]!==N||n[43]!==J||n[44]!==w||n[45]!==g||n[46]!==T||n[47]!==P?(fe=function(t){var e=o("SearchCometInterestsDeepDiveUtil").getHashtagTag(t),n;if(o("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&e!=null){var r;n=N({entryPointAction:"SEARCH_BOX",exploreEntryPoint:T===""?3:4,hashtag:e,typeaheadSessionID:(r=J)==null?void 0:r.getSessionID()})}else{var a;n=P({entryPointAction:"SEARCH_BOX",query:t,typeaheadSessionID:(a=J)==null?void 0:a.getSessionID()})}w(n),g==null||g(t)},n[42]=N,n[43]=J,n[44]=w,n[45]=g,n[46]=T,n[47]=P,n[48]=fe):fe=n[48];var ge=fe,he;n[49]!==B||n[50]!==l?(he=function(){B.clearQueryCache(),l&&l()},n[49]=B,n[50]=l,n[51]=he):he=n[51];var ye=he,Ce=r("useStable")(S),be;n[52]===Symbol.for("react.memo_cache_sentinel")?(be=s._(/*BTDS*/"Search Facebook"),n[52]=be):be=n[52];var ve=be,Se=T==="",Re=Se?"grid":"listbox",Le;n[53]===Symbol.for("react.memo_cache_sentinel")?(Le={bypassCacheRenderLimitCheck:C},n[53]=Le):Le=n[53];var Ee=b.inputEndContent,ke;n[54]!==a?(ke={hideIconOnFocus:!0,size:"large",xstyle:a},n[54]=a,n[55]=ke):ke=n[55];var Ie=b.inputStartContent,Te;n[56]===Symbol.for("react.memo_cache_sentinel")?(Te=s._(/*BTDS*/"Search Facebook"),n[56]=Te):Te=n[56];var De=J,xe;n[57]!==m?(xe={onHeaderActionPress:m},n[57]=m,n[58]=xe):xe=n[58];var $e=r("useSearchCometGlobalTypeaheadViewStrategy")(xe),Pe;return n[59]!==Ce||n[60]!==k||n[61]!==B||n[62]!==ye||n[63]!==me||n[64]!==_e||n[65]!==ge||n[66]!==J||n[67]!==u||n[68]!==b||n[69]!==T||n[70]!==D||n[71]!==se||n[72]!==ke||n[73]!==$e||n[74]!==Z||n[75]!==Re?(Pe=d.jsx(r("CometErrorBoundary.react"),{fallback:v,children:d.jsx(Ce,babelHelpers.extends({},b,{autoOpen:k,dataSource:B,dataSourceFetchConfigParams:Le,decorators:se,inputEndContent:Ee,inputExtraProps:ke,inputStartContent:Ie,inputStrategyRenderer:r("SearchCometGlobalTypeaheadInputStrategy.react"),label:Te,layoutStrategyRenderer:r("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:De,onChange:D,onClose:ye,onEscape:u,onFocus:me,onPressEntry:_e,onSelectFreeformQuery:ge,placeholder:ve,queryString:T,testid:void 0,traceProvider:Z,viewRole:Re,viewStrategyRenderer:$e}))}),n[59]=Ce,n[60]=k,n[61]=B,n[62]=ye,n[63]=me,n[64]=_e,n[65]=ge,n[66]=J,n[67]=u,n[68]=b,n[69]=T,n[70]=D,n[71]=se,n[72]=ke,n[73]=$e,n[74]=Z,n[75]=Re,n[76]=Pe):Pe=n[76],Pe}function v(){return d.jsx(r("CometTypeaheadErrorFallback.react"),{})}v.displayName=v.name+" [from "+i.id+"]";function S(){return(r("withSearchCometTypeaheadSERPWarmCallDecorator")!=null?r("withSearchCometTypeaheadSERPWarmCallDecorator"):r("emptyFunction").thatReturnsArgument)(r("withSearchCometTypeaheadTraceEndReasonDecorator")(r("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(r("withSearchCometTypeaheadBaseNavigationDecorator")(r("BaseTypeahead.react")))))}function R(e){e.bumpEntityKey(354,"typeahead.missing_logger_context","focused")}function L(e,t,n,r){var o=e.rawData,a;if(o!=null&&e.subtype==="recent"&&n){var i;a=o==null||(i=o.profile)==null?void 0:i.url}if(o!=null&&(e.subtype==="keyword"||e.subtype==="bootstrap"||e.subtype==="recent")&&r){var l;a=o==null||(l=o.structuredInfo)==null||(l=l.direct_nav_result)==null?void 0:l.link_url}return a!=null?a:t}l.default=b}),226);/*FB_PKG_DELIM*/
__d("EntMessageReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REGULAR:0,BUMP:1});i.default=e}),66);
__d("LSHotEmojiSize",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});i.default=e}),66);
__d("LSMessageReplySourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});i.default=e}),66);
__d("LSMessageReplySourceTypeV2",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28,IG_COLLAB_INVITE:29,FB_QUICKSNAP:30});i.default=e}),66);
__d("LSMessageSendStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});i.default=e}),66);
__d("LSReplyMessageAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});i.default=e}),66);
__d("LSRequestId",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="0123456789abcdef",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(){for(var t=r("uuidv4")().replace(/[^0-9a-f]/gi,""),n=0,o=["#"];n<33;){var a=e.indexOf(t.charAt(n))<<8,i=e.indexOf(t.charAt(n+1))<<4,l=e.indexOf(t.charAt(n+2)),u=l|(i|a),c=u>>6;o.push(s.charAt(c)),o.push(s.charAt(u&63)),n+=3}return o.join("")}var c={generate:u};l.default=c}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("MAWAdminMsgType",[],(function(t,n,r,o,a,i){"use strict";var e="currentUserAddedDevice",l="participantAddedDevice",s="currentUserRemovedDevice",u="participantRemovedDevice",c="currentUserUpdatedDevice",d="participantUpdatedDevice",m="participantAddedYou",p="participantAddedYouAndOneUser",_="participantAddedYouAndMoreThanOneUsers",f="unknowUserAddedYou",g="unknowUserAddedYouAndOneUser",h="unknowUserAddedYouAndMoreThanOneUser",y="unknownUserAddedOneUser",C="unknownUserAddedTwoUser",b="unknownUserAddedMoreThanTwoUser",v="participantAddedOneUser",S="participantAddedTwoUser",R="participantAddedMoreThanTwoUser",L="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",k="currentUserRemovedMoreThanTwoParticipant",I="currentUserAddedOneParticipant",T="currentUserAddedTwoParticipant",D="currentUserAddedMoreThanTwoParticipant",x="participantRemovedYou",$="participantRemovedYouAndOneUser",P="participantRemovedYouAndMoreThanOneUsers",N="unknowUserRemovedYou",M="unknowUserRemovedYouAndOneUser",w="unknowUserRemovedYouAndMoreThanOneUser",A="unknownUserRemovedOneUser",F="unknownUserRemovedTwoUser",O="unknownUserRemovedMoreThanTwoUser",B="participantRemovedOneUser",W="participantRemovedTwoUser",q="participantRemovedMoreThanTwoUser",U="participantLeftGroup",V="currentUserLeftGroup",H="participantCustomizeParticipantNickname",G="participantClearParticipantNickname",z="participantCustomizeCurrentUserNickname",j="currentUserSetOwnNickname",K="currentUserClearOwnNickname",Q="currentUserClearParticipantNickname",X="participantSetOwnNickname",Y="participantClearOwnNickname",J="participantClearCurrentUserNickname",Z="currentUserCustomizeNickname",ee="currentUserNamedGroup",te="unkonwnUserNamedGroup",ne="participantNamedGroup",re="currentUserCustomizeHotlike",oe="participantCustomizeHotlike",ae="currentUserCustomizeTheme",ie="currentUserCustomizeAITheme",le="currentUserCustomizePhoto",se="participantCustomizeTheme",ue="participantCustomizeAITheme",ce="participantCustomizePhoto",de="currentUserSetAddModeAdminOnly",me="currentUserSetAddModeAllMembers",pe="participantSetAddModeAdminOnly",_e="participantSetAddModeAllMembers",fe="serverSetAddModeAdminOnly",ge="serverSetAddModeAllMembers",he="currentUserPinnedMessage",ye="currentUserUnpinnedMessage",Ce="participantPinnedMessage",be="participantUnpinnedMessage",ve="currentUserLimitSharingDisabled",Se="currentUserLimitSharingEnabled",Re="participantLimitSharingDisabled",Le="participantLimitSharingEnabled",Ee="cutoverThreadAdminMessage",ke="cutoverIGDThreadAdminMessage",Ie="cutoverRollbackAdminMessage",Te="dualThreadCutoverAdminMessage",De="dualThreadCutoverAdminMessageSelfThread",xe="dualThreadCutoverAdminMessageWithOtherUserName",$e="dualThreadCutoverAdminMessageOtherUserNameUnknown",Pe="e2eeThreadDescription",Ne="e2eeThreadUKOSAAdminMessage",Me="debugMsg",we="reachabilityError",Ae="twoUsersConnected",Fe="twoUsersConnectedOneMSplit",Oe="CurrentUserCreatedPoll",Be="ParticipantCreatedPoll",We="CurrentUserAddedPollOption",qe="ParticipantAddedPollOption",Ue="CurrentUserAddedMultiplePollOptions",Ve="ParticipantAddedMultiplePollOptions",He="CurrentUserAddedPollVote",Ge="ParticipantAddedPollVote",ze="CurrentUserAddedMultiplePollVotes",je="ParticipantAddedMultiplePollVotes",Ke="CurrentUserRemovedPollVote",Qe="ParticipantRemovedPollVote",Xe="CurrentUserRemovedMultiplePollVotes",Ye="ParticipantRemovedMultiplePollVotes",Je="CurrentUserMixedPollUpdate",Ze="ParticipantMixedPollUpdate",et="CurrentUserChangedPollVote",tt="ParticipantChangedPollVote",nt="CurrentUserChangedMultiplePollVotes",rt="ParticipantChangedMultiplePollVotes",ot="PollUnsentUpdate",at={CURRENT_USER_ADDED_DEVICE:e,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:D,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:Ue,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:ze,CURRENT_USER_ADDED_ONE_PARTICIPANT:I,CURRENT_USER_ADDED_POLL_OPTION:We,CURRENT_USER_ADDED_POLL_VOTE:He,CURRENT_USER_ADDED_TWO_PARTICIPANTS:T,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:nt,CURRENT_USER_CHANGED_POLL_VOTE:et,CURRENT_USER_CLEAR_OWN_NICKNAME:K,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Q,CURRENT_USER_CREATED_POLL:Oe,CURRENT_USER_CUSTOMIZE_AI_THEME:ie,CURRENT_USER_CUSTOMIZE_HOTLIKE:re,CURRENT_USER_CUSTOMIZE_NICKNAME:Z,CURRENT_USER_CUSTOMIZE_PHOTO:le,CURRENT_USER_CUSTOMIZE_THEME:ae,CURRENT_USER_LEFT_GROUP:V,CURRENT_USER_LIMIT_SHARING_DISABLED:ve,CURRENT_USER_LIMIT_SHARING_ENABLED:Se,CURRENT_USER_MIXED_POLL_UPDATE:Je,CURRENT_USER_NAMED_GROUP:ee,CURRENT_USER_PINNED_MESSAGE:he,CURRENT_USER_REMOVED_DEVICE:s,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:k,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:Xe,CURRENT_USER_REMOVED_ONE_PARTICIPANT:L,CURRENT_USER_REMOVED_POLL_VOTE:Ke,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:de,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:me,CURRENT_USER_SET_OWN_NICKNAME:j,CURRENT_USER_UNPINNED_MESSAGE:ye,CURRENT_USER_UPDATED_DEVICE:c,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:ke,CUTOVER_ROLLBACK_ADMIN_MESSAGE:Ie,CUTOVER_THREAD_ADMIN_MESSAGE:Ee,DEBUG_MSG:Me,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Te,E2EE_THREAD_DESCRIPTION:Pe,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:Ne,PARTICIPANT_ADDED_DEVICE:l,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:R,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:Ve,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:je,PARTICIPANT_ADDED_ONE_USER:v,PARTICIPANT_ADDED_POLL_OPTION:qe,PARTICIPANT_ADDED_POLL_VOTE:Ge,PARTICIPANT_ADDED_TWO_USER:S,PARTICIPANT_ADDED_YOU:m,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:_,PARTICIPANT_ADDED_YOU_AND_ONE_USER:p,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:rt,PARTICIPANT_CHANGED_POLL_VOTE:tt,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:J,PARTICIPANT_CLEAR_OWN_NICKNAME:Y,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:G,PARTICIPANT_CREATED_POLL:Be,PARTICIPANT_CUSTOMIZE_AI_THEME:ue,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:z,PARTICIPANT_CUSTOMIZE_HOTLIKE:oe,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:H,PARTICIPANT_CUSTOMIZE_PHOTO:ce,PARTICIPANT_CUSTOMIZE_THEME:se,PARTICIPANT_LEFT_GROUP:U,PARTICIPANT_LIMIT_SHARING_DISABLED:Re,PARTICIPANT_LIMIT_SHARING_ENABLED:Le,PARTICIPANT_MIXED_POLL_UPDATE:Ze,PARTICIPANT_NAMED_GROUP:ne,PARTICIPANT_PINNED_MESSAGE:Ce,PARTICIPANT_REMOVED_DEVICE:u,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:q,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:Ye,PARTICIPANT_REMOVED_ONE_USER:B,PARTICIPANT_REMOVED_POLL_VOTE:Qe,PARTICIPANT_REMOVED_TWO_USER:W,PARTICIPANT_REMOVED_YOU:x,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:P,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:$,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:pe,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:_e,PARTICIPANT_SET_OWN_NICKNAME:X,PARTICIPANT_UNPINNED_MESSAGE:be,PARTICIPANT_UPDATED_DEVICE:d,POLL_UNSENT_UPDATE:ot,REACHABILITY_ERROR:we,SERVER_SET_ADD_MODE_ADMIN_ONLY:fe,SERVER_SET_ADD_MODE_ALL_MEMBERS:ge,TWO_USERS_CONNECTED:Ae,TWO_USERS_CONNECTED_ONE_MSPLIT:Fe,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:b,UNKNOWN_USER_ADDED_ONE_USER:y,UNKNOWN_USER_ADDED_TWO_USER:C,UNKNOWN_USER_ADDED_YOU:f,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:h,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:g,UNKNOWN_USER_NAMED_GROUP:te,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:O,UNKNOWN_USER_REMOVED_ONE_USER:A,UNKNOWN_USER_REMOVED_TWO_USER:F,UNKNOWN_USER_REMOVED_YOU:N,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:M};i.CURRENT_USER_ADDED_DEVICE=e,i.CURRENT_USER_PINNED_MESSAGE=he,i.CURRENT_USER_UNPINNED_MESSAGE=ye,i.PARTICIPANT_PINNED_MESSAGE=Ce,i.PARTICIPANT_UNPINNED_MESSAGE=be,i.CURRENT_USER_LIMIT_SHARING_DISABLED=ve,i.CURRENT_USER_LIMIT_SHARING_ENABLED=Se,i.PARTICIPANT_LIMIT_SHARING_DISABLED=Re,i.PARTICIPANT_LIMIT_SHARING_ENABLED=Le,i.CUTOVER_THREAD_ADMIN_MESSAGE=Ee,i.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=ke,i.CUTOVER_ROLLBACK_ADMIN_MESSAGE=Ie,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Te,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=De,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=xe,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=$e,i.E2EE_THREAD_DESCRIPTION=Pe,i.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=Ne,i.CURRENT_USER_CREATED_POLL=Oe,i.PARTICIPANT_CREATED_POLL=Be,i.CURRENT_USER_ADDED_POLL_OPTION=We,i.PARTICIPANT_ADDED_POLL_OPTION=qe,i.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=Ue,i.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=Ve,i.CURRENT_USER_ADDED_POLL_VOTE=He,i.PARTICIPANT_ADDED_POLL_VOTE=Ge,i.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=ze,i.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=je,i.CURRENT_USER_REMOVED_POLL_VOTE=Ke,i.PARTICIPANT_REMOVED_POLL_VOTE=Qe,i.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=Xe,i.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=Ye,i.CURRENT_USER_MIXED_POLL_UPDATE=Je,i.PARTICIPANT_MIXED_POLL_UPDATE=Ze,i.CURRENT_USER_CHANGED_POLL_VOTE=et,i.PARTICIPANT_CHANGED_POLL_VOTE=tt,i.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=nt,i.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=rt,i.POLL_UNSENT_UPDATE=ot,i.ADMIN_MSG_TYPE=at}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e="emptySnippet",s="currentUserCreatedGroup",u="participantCreatedGroup",c="unknownUserCreatedGroup",d="currentUserGotPromoted",m="currentUserGotDemoted",p="participantGotPromoted",_="participantGotDemoted",f="participantPromotedYou",g="participantDemotedYou",h="currentUserPromotedParticipant",y="currentUserDemotedParticipant",C="participantDemotedParticipant",b="participantPromotedParticipant",v="participantSelfDemoted",S="currentUserSelfDemoted",R="currentUserSendText",L="currentUserSendImage",E="currentUserSendVideo",k="currentUserSendAudio",I="currentUserSendGif",T="currentUserSendSticker",D="participantSendText",x="participantSendTextInGroup",$="participantSendImage",P="participantSendVideo",N="participantSendAudio",M="participantSendGif",w="participantSendSticker",A="unavailableSnippet",F="messageUnavailableSnippet",O="unknownUserEphemeralSettingTurnedOnSeconds",B="unknownUserEphemeralSettingTurnedOnMinutes",W="unknownUserEphemeralSettingTurnedOnHours",q="unknownUserEphemeralSettingTurnedOnDays",U="youEphemeralSettingTurnedOnSeconds",V="youEphemeralSettingTurnedOnMinutes",H="youEphemeralSettingTurnedOnHours",G="youEphemeralSettingTurnedOnDays",z="participantEphemeralSettingTurnedOnSeconds",j="participantEphemeralSettingTurnedOnMinutes",K="participantEphemeralSettingTurnedOnHours",Q="participantEphemeralSettingTurnedOnDays",X="unknownUserEphemeralSettingChangeSeconds",Y="unknownUserEphemeralSettingChangeMinutes",J="unknownUserEphemeralSettingChangeHours",Z="unknownUserEphemeralSettingChangeDays",ee="youEphemeralSettingChangeSeconds",te="youEphemeralSettingChangeMinutes",ne="youEphemeralSettingChangeHours",re="youEphemeralSettingChangeDays",oe="participantEphemeralSettingChangeSeconds",ae="participantEphemeralSettingChangeMinutes",ie="participantEphemeralSettingChangeHours",le="participantEphemeralSettingChangeDays",se="unknownUserEphemeralSettingTurnedOff",ue="youEphemeralSettingTurnedOff",ce="participantEphemeralSettingTurnedOff",de="ephemeralSettingsAutoReset",me="currentUserUnsentMessage",pe="participantUnsentMessage",_e="participantReactMessage",fe="participantReactMessageInGroup",ge="unknownUserEphemeralTakeScreenshot",he="unknownUserEphemeralRecordScreen",ye="youEphemeralTakeScreenshot",Ce="youEphemeralRecordScreen",be="participantEphemeralTakeScreenshot",ve="participantEphemeralRecordScreen",Se="icdcAlertAdminMessage",Re="yourDeviceICDCAlertAdminMessage",Le="currentUserSendAttachment",Ee="participantSendAttachment",ke="currentUserSentPost",Ie="currentUserSentReel",Te="currentUserSentStory",De="currentUserSentEvent",xe="currentUserMentionedStoryIG",$e="currentUserReceivedStoryMentionIG",Pe="participantSentPost",Ne="participantSentReel",Me="participantSentStory",we="participantSentEvent",Ae="currentUserSentStoryHighlight",Fe="participantSentStoryHighlight",Oe="currentUserMissedAudioCall",Be="participantMissedAudioCall",We="currentUserMissedVideoCall",qe="participantMissedVideoCall",Ue="currentUserAudioCalled",Ve="participantAudioCalled",He="currentUserVideoCalled",Ge="participantVideoCalled",ze="currentUserStartedGroupAudioCall",je="participantStartedGroupAudioCall",Ke="currentUserStartedGroupVideoCall",Qe="participantStartedGroupVideoCall",Xe="currentUserBumpedOwnMessage",Ye="currentUserBumpedMessage",Je="participantBumpedOwnMessage",Ze="participantBumpedParticipantMessage",et="participantBumpedCurrentUserMessage",tt="userSendUnavailableMessage",nt="userSendEncryptedMessage",rt="currentUserSendUnrenderableMessage",ot="participantSendUnrenderableMessage",at="currentUserSendLocationFallback",it="participantSendLocation",lt="currentUserSendLiveLocationFallback",st="participantSendLiveLocation",ut="currentUserSendLocation",ct="participantSendLocation",dt="currentUserSendPollCreationFallback",mt="participantSendPollCreation",pt="currentUserSendContactShareFallback",_t="participantSendContactShareFallback",ft="currentUserSendContactShare",gt="participantSendContactShare",ht="currentUserSendAIContactShare",yt="participantSendAIContactShare",Ct="currentUserSendStoryMentionFallback",bt="currentUserSendStoryMention",vt="participantSendStoryMention",St="participantSendStoryMentionFallback",Rt="currentUserSendPostMentionFallback",Lt="participantSendPostMentionFallback",Et="currentUserSendMemoriesShare",kt="participantSendMemoriesShare",It="currentUserSendPostMention",Tt="participantSendPostMention",Dt="currentUserSendNoteMentionFallback",xt="participantSendNoteMentionFallback",$t="messengerMemoryEncryptedMessageFallback",Pt="rtcXMAMessageFallback",Nt="metaAISendMessageFallback",Mt="currentUserSendBumpMessageFallback",wt="participantSendBumpMessageFallback",At="participantSendBumpMessageOriginalUnavailable",Ft="currentUserSendStickerReceiverFetchMessageFallback",Ot="participantSendStickerReceiverFetchMessageFallback",Bt="viewOncePhotoMessageFallback",Wt="viewOnceVideoMessageFallback",qt="unavailableStory",Ut="currentUserLimitSharingDisabled",Vt="currentUserLimitSharingEnabled",Ht="participantLimitSharingDisabled",Gt="participantLimitSharingEnabled",zt="dualThreadCutoverAdminMessageOtherUserNameUnknown",jt="dualThreadCutoverAdminMessageSelfThread",Kt="dualThreadCutoverAdminMessageWithOtherUserName",Qt=babelHelpers.extends({},o("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:Ue,CURRENT_USER_BUMPED_MESSAGE:Ye,CURRENT_USER_BUMPED_OWN_MESSAGE:Xe,CURRENT_USER_CREATED_GROUP:s,CURRENT_USER_DEMOTED_PARTICIPANT:y,CURRENT_USER_GOT_DEMOTED:m,CURRENT_USER_GOT_PROMOTED:d,CURRENT_USER_LIMIT_SHARING_DISABLED:Ut,CURRENT_USER_LIMIT_SHARING_ENABLED:Vt,CURRENT_USER_MENTIONED_STORY_IG:xe,CURRENT_USER_MISSED_AUDIO_CALL:Oe,CURRENT_USER_MISSED_VIDEO_CALL:We,CURRENT_USER_PROMOTED_PARTICIPANT:h,CURRENT_USER_RECEIVED_STORY_MENTION_IG:$e,CURRENT_USER_SELF_DEMOTED:S,CURRENT_USER_SEND_AI_CONTACT_SHARE:ht,CURRENT_USER_SEND_ATTACHMENT:Le,CURRENT_USER_SEND_AUDIO:k,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Mt,CURRENT_USER_SEND_CONTACT_SHARE:ft,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:pt,CURRENT_USER_SEND_GIF:I,CURRENT_USER_SEND_IMAGE:L,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:lt,CURRENT_USER_SEND_LOCATION:ut,CURRENT_USER_SEND_LOCATION_FALLBACK:at,CURRENT_USER_SEND_MEMORIES_SHARE:Et,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:Dt,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:dt,CURRENT_USER_SEND_POST_MENTION:It,CURRENT_USER_SEND_POST_MENTION_FALLBACK:Rt,CURRENT_USER_SEND_STICKER:T,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ft,CURRENT_USER_SEND_STORY_MENTION:bt,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:Ct,CURRENT_USER_SEND_TEXT:R,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:rt,CURRENT_USER_SEND_VIDEO:E,CURRENT_USER_SENT_EVENT:De,CURRENT_USER_SENT_POST:ke,CURRENT_USER_SENT_REEL:Ie,CURRENT_USER_SENT_STORY:Te,CURRENT_USER_SENT_STORY_HIGHLIGHT:Ae,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ze,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ke,CURRENT_USER_UNSENT_MESSAGE:me,CURRENT_USER_VIDEO_CALLED:He,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:zt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:jt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:Kt,EMPTY_SNIPPET:e,EPHEMERAL_SETTINGS_AUTO_RESET:de,ICDC_ALERT_ADMIN_MESSAGE:Se,MESSAGE_UNAVAILABLE_SNIPPET:F,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:$t,META_AI_SEND_MESSAGE_FALLBACK:Nt,PARTICIPANT_AUDIO_CALLED:Ve,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:et,PARTICIPANT_BUMPED_OWN_MESSAGE:Je,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Ze,PARTICIPANT_CREATED_GROUP:u,PARTICIPANT_DEMOTED_PARTICIPANT:C,PARTICIPANT_DEMOTED_YOU:g,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ve,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:le,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:ie,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ae,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:oe,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ce,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:K,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:j,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:z,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:be,PARTICIPANT_GOT_DEMOTED:_,PARTICIPANT_GOT_PROMOTED:p,PARTICIPANT_LIMIT_SHARING_DISABLED:Ht,PARTICIPANT_LIMIT_SHARING_ENABLED:Gt,PARTICIPANT_MISSED_AUDIO_CALL:Be,PARTICIPANT_MISSED_VIDEO_CALL:qe,PARTICIPANT_PROMOTED_PARTICIPANT:b,PARTICIPANT_PROMOTED_YOU:f,PARTICIPANT_REACT_MESSAGE:_e,PARTICIPANT_REACT_MESSAGE_IN_GROUP:fe,PARTICIPANT_SELF_DEMOTED:v,PARTICIPANT_SEND_AI_CONTACT_SHARE:yt,PARTICIPANT_SEND_ATTACHMENT:Ee,PARTICIPANT_SEND_AUDIO:N,PARTICIPANT_SEND_BUMP_MESSAGE:wt,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:At,PARTICIPANT_SEND_CONTACT_SHARE:gt,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:_t,PARTICIPANT_SEND_GIF:M,PARTICIPANT_SEND_IMAGE:$,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:st,PARTICIPANT_SEND_LOCATION:ct,PARTICIPANT_SEND_LOCATION_FALLBACK:it,PARTICIPANT_SEND_MEMORIES_SHARE:kt,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:xt,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:mt,PARTICIPANT_SEND_POST_MENTION:Tt,PARTICIPANT_SEND_POST_MENTION_FALLBACK:Lt,PARTICIPANT_SEND_STICKER:w,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ot,PARTICIPANT_SEND_STORY_MENTION:vt,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:St,PARTICIPANT_SEND_TEXT:D,PARTICIPANT_SEND_TEXT_IN_GROUP:x,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ot,PARTICIPANT_SEND_VIDEO:P,PARTICIPANT_SENT_EVENT:we,PARTICIPANT_SENT_POST:Pe,PARTICIPANT_SENT_REEL:Ne,PARTICIPANT_SENT_STORY:Me,PARTICIPANT_SENT_STORY_HIGHLIGHT:Fe,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:je,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Qe,PARTICIPANT_UNSENT_MESSAGE:pe,PARTICIPANT_VIDEO_CALLED:Ge,RTC_XMA_FALLBACK:Pt,UNAVAILABLE_SNIPPET:A,UNAVAILABLE_STORY:qt,UNKNOWN_USER_CREATED_GROUP:c,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:he,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Z,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:J,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Y,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:X,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:se,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:q,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:W,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:B,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:ge,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:nt,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:tt,VIEW_ONCE_PHOTO_MESSAGE:Bt,VIEW_ONCE_VIDEO_MESSAGE:Wt,YOU_EPHEMERAL_RECORD_SCREEN:Ce,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:re,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:ne,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:te,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:ee,YOU_EPHEMERAL_SETTING_TURNED_OFF:ue,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:G,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:H,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:V,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:U,YOU_EPHEMERAL_TAKE_SCREENSHOT:ye,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Re});l.CURRENT_USER_CREATED_GROUP=s,l.CURRENT_USER_SEND_TEXT=R,l.CURRENT_USER_SEND_IMAGE=L,l.CURRENT_USER_SEND_VIDEO=E,l.CURRENT_USER_SEND_AUDIO=k,l.CURRENT_USER_SEND_GIF=I,l.CURRENT_USER_SEND_STICKER=T,l.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=O,l.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=ge,l.CURRENT_USER_SEND_ATTACHMENT=Le,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=zt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=jt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=Kt,l.LOCALIZATION_TYPE=Qt}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n;return(n=e.get(t))!=null?n:null}function s(t,n){e.set(t,n)}i.getThumbnailSpec=l,i.setThumbnailSpec=s}),66);
__d("WABlobToArrayBuffer",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return"arrayBuffer"in t&&typeof t.arrayBuffer=="function"?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onload=function(){var t=o.result;t instanceof ArrayBuffer?e(t):n(r("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof t))},o.onerror=function(){var e;n((e=o.error)!=null?e:r("err")("blobToArrayBuffer got unknown error"))},o.readAsArrayBuffer(t)})}l.blobToArrayBuffer=s}),98);
__d("WAIsOgg",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e.length<4||e[0]!==79||e[1]!==103||e[2]!==103||e[3]!==83)}i.isOgg=e}),66);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=o("WorkerBundleResource").createDedicatedWebWorker(r("WAWebOpusRecorderWorkerResource")),this.$1.onmessage=e!=null?e:null}var t=e.prototype;return t.getWorker=function(){return this.$1},t.postMessage=function(t,n){var e={type:"message",message:t};this.$1.postMessage(e,n)},t.addEventListener=function(t,n){this.$1.addEventListener(t,n)},t.removeEventListener=function(t,n){this.$1.addEventListener(t,n)},e})();function s(){return new e}function u(t){return new e(t)}l.WAOpusRecorderWorkerClient=e,l.getOpusEncoderWorker=s,l.getOpusDecoderWorker=u}),98);
__d("WAOpusRecorderPlayer",["Promise","WABinary","WABlobToArrayBuffer","WALogger","WAOpusRecorderWorkerClient"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="audio/wav",m,p=0;function _(){return p++,m||(m=new window.AudioContext),m}function f(){if(p--,p===0&&m){try{m.close().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close async error: ",""])),t).devConsole(t)})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close sync error: ",""])),e).devConsole(e)}m=void 0}}var g=(function(){function e(e){this.oggBlob=e}var t=e.prototype;return t.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)},t.oggBlobToWAVBlob=function(t,r){var e=this;r===void 0&&(r=2);var a=r;return new(c||(c=n("Promise")))(function(n){var r=function(r){if(r.data==null){for(var t=function(t){l.forEach(function(e){for(var n=e[t]||e[0],r=0;r<n.length;r++)s.push(n[r])})},o=0;o<a;o++)t(o);var i=e.encodeWAV(s,c,a),u=new Blob([i.readByteArrayView()],{type:d});f(),n(u)}else l.push(r.data),a=l[0].length},i=o("WAOpusRecorderWorkerClient").getOpusDecoderWorker(r),l=[],s=[],c=_(),m={outputBufferSampleRate:c.sampleRate,bufferLength:4096};i.postMessage({command:"decode-init",config:m}),o("WABlobToArrayBuffer").blobToArrayBuffer(t).then(function(e){i.postMessage({command:"decode",pages:new Uint8Array(e)}),i.postMessage({command:"decode-done"})}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""])),e).devConsole(e)})})},t.encodeWAV=function(t,n,r){var e=new(o("WABinary")).Binary(void 0,!0);e.ensureCapacity(44+t.length*2),e.writeString("RIFF"),e.writeUint32(36+t.length*2),e.writeString("WAVE"),e.writeString("fmt "),e.writeUint32(16),e.writeUint16(1),e.writeUint16(r),e.writeUint32(n.sampleRate),e.writeUint32(n.sampleRate*r*2),e.writeUint16(r*2),e.writeUint16(16),e.writeString("data"),e.writeUint32(t.length*2);for(var a=0;a<t.length;a++){var i=Math.max(-1,Math.min(t[a],1));i*=i>0?32767:32768,e.writeInt16(Math.floor(i))}return e},e})();l.default=g}),98);
__d("WAMaybeTranscodeOggOpusToWavForPlayback",["FBLogger","WABlobToArrayBuffer","WAIsOgg","WAOpusRecorderPlayer","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["audio"])},m=r("justknobx")._("4988"),p=new Audio().canPlayType("audio/ogg"),_=p==="probably"||p==="maybe";async function f(t){if(_)return d().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback supported no need to transcode"]))),t;if(d().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback is not supported. Start transcoding"]))),t.size>m)return d().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["blob size too large"]))),t;var n=await o("WABlobToArrayBuffer").blobToArrayBuffer(t);if(!o("WAIsOgg").isOgg(new Uint8Array(n)))return d().DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["blob is not Ogg, skip transcode"]))),t;var a=new(r("WAOpusRecorderPlayer"))(t);return a.generateBlob()}l.isOggPlaybackSupported=_,l.maybeTranscodeOggOpusToWavForPlayback=f}),98);
__d("MAWAudioUtils",["FBLogger","WAMaybeTranscodeOggOpusToWavForPlayback","gkx"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=r("gkx")("3053")?URL.createObjectURL(await o("WAMaybeTranscodeOggOpusToWavForPlayback").maybeTranscodeOggOpusToWavForPlayback(e)):URL.createObjectURL(e);return new Promise(function(e,n){var o=new Audio;o.setAttribute("crossOrigin","anonymous"),o.addEventListener("loadedmetadata",function(t){var r=t.currentTarget;if(r instanceof HTMLAudioElement){var o=r.duration;e(Math.ceil(o))}else n("EventTarget returned for event should be HTMLAudioElement")}),o.src=t,o.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading audio from provided URL"))},o.onerror=function(){var e,t;n(r("FBLogger")("messenger_web").mustfixThrow("getAudioDurationInSeconds: audioElement error code: %s. message: %s",(e=o.error)==null?void 0:e.code,(t=o.error)==null?void 0:t.message))}})}function s(e){return Array.from(new Uint8Array(e)).join(",")}l.getAudioDurationInSeconds=e,l.serializeWaveform=s}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof self.BigInt=="function",s=r("justknobx")._("3427")*1e3;function u(t,n){var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),i=o("MAWSendQplToServer").startQplUserFlow(r("qpl")._(1056840460,"718"),{bool:{has_big_int_support:e},string:{preprocess_type:t}},a,s);return n&&i.addAnnotations({int:{input_file_size:n.size},string:{mimetype:n.type}}),babelHelpers.extends({},i,{flowDetails:{event:r("qpl")._(1056840460,"718"),instanceKey:a}})}l.startMediaPreProcessQpl=u}),98);
__d("WABlobToImage",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r;return new(e||(e=n("Promise")))(function(e,n){r=new Image;var o=URL.createObjectURL(t),a=function(){return URL.revokeObjectURL(o)};r.onload=function(){e({image:r,releaseImageMemory:a})},r.onerror=function(){a(),n("loadBlobToImage error")},r.src=o})}i.blobToImage=l}),66);
__d("WACalculateBoundOutputSize",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t!=null?l(e.width,e.height,t.width,t.height):{outputWidth:e.width,outputHeight:e.height}}function l(e,t,n,r){var o=e,a=t;return e>t?e>n&&(a*=n/o,o=n):a>r&&(o*=r/a,a=r),{outputWidth:Math.round(Math.max(o,1)),outputHeight:Math.round(Math.max(a,1))}}i.calculateBoundOutputSize=e}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["decodeImage"]),c=typeof self.createImageBitmap=="function"&&typeof self.OffscreenCanvas=="function",d=c?m:p;async function m(t,n){u.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),t.name);var r=await self.createImageBitmap(t),a=r.width,i=r.height,l=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:a,height:i},n),s=l.outputWidth,c=l.outputHeight,d=new self.OffscreenCanvas(s,c),m=_({canvas:d,inputWidth:a,inputHeight:i,outputWidth:s,outputHeight:c,image:r});return m}async function p(e,t){u.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),e.name);var n=await o("WABlobToImage").blobToImage(e),r=n.image,a=n.releaseImageMemory,i=r.width,l=r.height,c=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:i,height:l},t),d=c.outputWidth,m=c.outputHeight,p=document.createElement("canvas"),f=_({canvas:p,inputWidth:i,inputHeight:l,outputWidth:d,outputHeight:m,image:r});return a(),f}function _(e){var t=e.canvas,n=e.image,r=e.inputWidth,o=e.inputHeight,a=e.outputWidth,i=e.outputHeight;t.width=a,t.height=i;var l=t.getContext("2d");l.fillStyle="rgb(255,255,255)",l.fillRect(0,0,t.width,t.height),l.drawImage(n,0,0,r,o,0,0,a,i);var s=l.getImageData(0,0,a,i);return s}l.canDecodeWithoutDOM=c,l.decodeImage=d,l.decodeImageWithoutDOM=m,l.decodeImageWithDOM=p}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=null,l=new(e||(e=n("Promise")))(function(e,n){t=setTimeout(function(){n(new(o("WACustomError")).TimeoutError(i)),clearTimeout(t)},a)});return e.race([r,l]).finally(function(){clearTimeout(t)})};l.promiseTimeout=s}),98);
__d("WAMediaWasmWorkerClient",["FBLogger","QPLUserFlow","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WorkerBundleResource","WorkerClient","WorkerMessagePort"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("WorkerBundleResource").createDedicatedWebWorker(r("WAMediaWasmWorkerResource")),x="media_platform",$=function(){return r("FBLogger")(x).tags(["WAMediaWasmWorkerClient"])},P=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(D,"WAMediaWasmWorker");o("WorkerClient").init(P),$().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."]))),P.addMessageListener("log",function(e){var t=e.logType,n=e.message;switch(t){case"dev":$().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),n);break;case"error":$().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),n);break;default:}}),P.addMessageListener("qpl",function(e){N(e)});function N(e){var t=e.event,n=e.action;switch(n.type){case"point":{r("QPLUserFlow").addPoint(t,n.pointName,{instanceKey:n.instanceKey});break}case"annotations":{r("QPLUserFlow").addAnnotations(t,n.annotations,{instanceKey:n.instanceKey});break}default:$().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unknown QPL action type from worker: ",""])),n.type)}}function M(e){var t=e.input,n=e.eventFlow;return q({operation:"webpCheck",input:o("WAByteArray").uint8ArrayToBuffer(t)},n)}function w(e){var t=e.input,n=e.eventFlow;return $().INFO(d||(d=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"]))),q({operation:"mp4RepairMux",input:o("WAByteArray").uint8ArrayToBuffer(t)},n)}async function A(e){var t=e.input,n=e.forceTranscode,r=e.supportsHevc,a=e.eventFlow;$().INFO(m||(m=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));var i=W();$().INFO(p||(p=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),i);var l=await U();if(!l.success)return o("WAResultOrError").makeError(l.error);var s=l.value,u=s.onMessageOnce("transcodeToMp4Response",function(e){return e.requestId===i}),c=o("WAByteArray").uint8ArrayToBuffer(t),d=c?[c]:void 0;s.postMessage({input:c,requestId:i,forceTranscode:n,supportsHevc:r,type:"transcodeToMp4Request",qplData:a.flowDetails},d),a==null||a.addPoint("sent_request_to_media_worker_start");var f=await u,g=f.output;return $().INFO(_||(_=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),i,g.success),g.success?(a==null||a.addPoint("sent_request_to_media_worker_end"),g):(a==null||a.addPoint("sent_request_to_media_worker_end"),a==null||a.addAnnotations({string:{errorMessage:g.error.errorMessage}}),o("WAResultOrError").makeError(g.error.errorType))}function F(e){var t=e.imageData,n=e.quality,r=e.useHdScanConfig,a=e.eventFlow;return q({operation:"progressiveJpegEncode",input:o("WAByteArray").uint8ArrayToBuffer(t.data),height:t.height,width:t.width,quality:n,useHdScanConfig:r},a)}async function O(e){var t=e.file,n=e.quality,r=e.useHdScanConfig,o=e.eventFlow,a=e.maxOutputResolution,i=await t.arrayBuffer();return q({operation:"progressiveJpegEncodeWithFile",input:i,fileName:t.name,fileType:t.type,quality:n,useHdScanConfig:r,maxOutputWidth:a==null?void 0:a.width,maxOutputHeight:a==null?void 0:a.height},o)}function B(e){$().INFO(f||(f=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),e),P.postMessage({type:"prewarm",operation:e})}var W=(function(){var e=0;return function(){return++e}})();async function q(e,t){var n=W();$().INFO(g||(g=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),n);var r=await U(t);if(!r.success)return r;var a=r.value,i=a.onMessageOnce("mediaOperationResponse",function(e){return e.requestId===n}),l=e.input?[e.input]:void 0;a.postMessage(babelHelpers.extends({},e,{requestId:n,type:"mediaOperationRequest"}),l),t==null||t.addPoint("sent_request_to_media_worker_start");var s=await i,u=s.output;return u.success?($().INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),n),t==null||t.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:u.value.isOpfsSyncSupported}}),o("WAResultOrError").makeResult(u.value.bytes)):($().MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),n,u.error.errorMessage),t==null||t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(u.error.errorType))}function U(e){e==null||e.addPoint("get_connected_worker_port_start");var t=3e4;return o("WAPromiseTimeout").promiseTimeout(P.fullyConnected,t).then(function(t){return e==null||e.addPoint("get_connected_worker_port_end"),o("WAResultOrError").makeResult(t)}).catch(function(t){return e==null||e.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:t instanceof o("WACustomError").TimeoutError?"timeout":"runtime-error"}}),t instanceof o("WACustomError").TimeoutError?o("WAResultOrError").makeError("worker-connection-timeout"):($().MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),t),o("WAResultOrError").makeError("worker-connection-runtime-error"))})}async function V(e){var t,n,r=e.file,a=e.maxDimension,i=e.thumbnailBlobByteSizeLimitBytes,l=e.thumbnailQualityPercentageWhenAboveByteSizeLimit,s=W();$().INFO(b||(b=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),s);var u=await U();if(!u.success)return u;var c=u.value,d=c.onMessageOnce("mediaGenerateImageThumbnailResponse",function(e){return e.requestId===s}),m=await r.arrayBuffer(),p=m?[m]:void 0;c.postMessage({input:m,fileName:r.name,fileType:r.type,maxDimension:a,requestId:s,thumbnailBlobByteSizeLimitBytes:i,thumbnailQualityPercentageWhenAboveByteSizeLimit:l,type:"mediaGenerateImageThumbnailRequest"},p);var _=await d;return $().INFO(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),s,_.output.success),_.output.success?o("WAResultOrError").makeResult(_.output.value):($().MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),s,(t=_.output.error)==null?void 0:t.errorMessage),Promise.reject((n=_.output.error)==null?void 0:n.errorMessage))}async function H(e,t){$().INFO(R||(R=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var n=W(),r=await U();if(!r.success)return o("WAResultOrError").makeError({errorName:"port-init",errorMessage:r.error});var a=r.value,i=a.onMessageOnce("mediaStorageShadowTestResponse",function(e){return e.requestId===n});a.postMessage({input:e,requestId:n,storageType:t,type:"mediaStorageShadowTestRequest"});var l=await i,s=l.output;return s.success?($().INFO(L||(L=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),n),o("WAResultOrError").makeResult(s.value)):($().MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),t,s.error.errorMessage),o("WAResultOrError").makeError({errorName:s.error.errorName,errorMessage:s.error.errorMessage}))}async function G(e){var t=e.mediaType,n=e.rawMimeType,r=e.input,a=e.eventFlow,i=W();$().INFO(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),i);var l=await U(a);if(!l.success)return l;var s=l.value,u=s.onMessageOnce("kaleidoscopeClassifyResponse",function(e){return e.requestId===i});s.postMessage({mediaType:t,rawMimeType:n,input:r,requestId:i,type:"kaleidoscopeClassifyRequest"}),a==null||a.addPoint("sent_request_to_media_worker_start");var c=await u,d=c.output;return d.success?($().INFO(I||(I=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),i),a==null||a.addPoint("sent_request_to_media_worker_end"),d):($().MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscope classifiy error: ",", requestId: ",","])),d.error,i),a==null||a.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(d.error))}l.webpCheckInWorker=M,l.mp4RepairMuxInWorker=w,l.transcodeToMp4InWorker=A,l.progressiveJpegEncodeInWorker=F,l.progressiveJpegEncodeInWorkerWithFile=O,l.prewarmMediaWasmWorker=B,l.getConnectedWorkerPortWithTimeout=U,l.generateImageThumbnailInWorker=V,l.runMediaStorageShadowTestWasmWorker=H,l.kaleidoscopeClassifyInWorker=G}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","cometIsMimeTypeForMedia","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=12e4,f=o("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),g=85,h=["image/heic"];function y(e,t,n,a){var i;a===!0?i={height:r("justknobx")._("187"),width:r("justknobx")._("187")}:i={height:r("justknobx")._("2144"),width:r("justknobx")._("2144")};var l;t?l=e.type==="image/webp"?Promise.resolve(e):S(e,"image/webp",t,n,i):l=e.type==="image/gif"?Promise.resolve(e):S(e,"image/jpeg",!1,n,i);var s=e.type==="image/gif";return s?l.then(function(e){return Promise.all([o("MAWGetImageSpec").getImageSpec(e),e])}).then(async function(n){var r=n[0],a=n[1];return{file:a,imageSpec:r,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:null,type:v(e,t)}}):l.then(function(t){return Promise.all([k(e,r("justknobx")._("2033")),o("MAWGetImageSpec").getImageSpec(t),t])}).then(async function(n){var r=n[0],a=n[1],i=n[2];return Promise.resolve({file:i,imageSpec:a,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(i),thumbnailUrlAndSpec:r,type:v(e,t)})})}async function C(e,n){var a=t.URL.createObjectURL(e),i=n===!0?r("justknobx")._("2545"):r("justknobx")._("2033"),l=await o("MAWImageUtils").urlToThumbnailSpec(a,i),s={height:l.height,width:l.width};return{file:e,imageSpec:s,thumbnailSpec:l,type:v(e,n),url:a}}function b(e,t){return o("MAWGetImageSpec").getImageSpec(e).then(function(n){return Promise.resolve({file:e,imageSpec:n,stickerReceiverFetchId:t,type:"sticker"})})}function v(e,t){return t===!0?"sticker":e.type==="image/gif"?"animated_image":"image"}async function S(t,n,r,a,i){f.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),t.name);var l=o("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",t);l.addAnnotations({int:{total_number_of_files:a!=null?a:1},string:{targetMimetype:n}});var u=function(){return L(t,n,g,r,i).then(function(e){return e.success?e.value:Promise.reject("runtime-error")}).catch(function(e){return f.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(e)),l.addPoint("native_encode_failure",{string:{native_encode_error:e.toString()}}),null})},c=n==="image/jpeg"?await o("WAPromiseTimeout").promiseTimeout(E(t,g,l,i).then(function(e){return e.success?e.value:Promise.reject(e.error)}),_).catch(function(e){return e instanceof o("WACustomError").TimeoutError?l.addPoint("mozjpeg_encode_timeout"):l.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:e.toString()}}),u()}):await u();if(c==null)throw l.endFail("unable_to_transcode_image"),f.mustfixThrow("unable to transcode image");return l.endSuccess({int:{compressed_file_size:c.size}}),c}function R(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToThumbnail(r,n)}function L(e,n,r,a,i){f.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var l=t.URL.createObjectURL(e),s=e.name;return o("MAWImageUtils").urlToFile(l,n,r,a,i).then(function(e){var t=e.blob;return f.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),t.size),o("WAResultOrError").makeResult(new File([t],s,{type:n}))})}async function E(e,t,n,r){f.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),e.name),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode"),n.addPoint("prewarm_worker_started");var a;if(o("WADecodeImage").canDecodeWithoutDOM&&(a=await o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:n,file:e,maxOutputResolution:r,quality:t,useHdScanConfig:!0})),a==null||!a.success&&a.error==="decode-image-error"){var i=await o("WADecodeImage").decodeImageWithDOM(e,r).catch(function(e){throw n.addPoint("image_decode_failure"),e});n.addPoint("image_decode_success"),a=await o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:n,imageData:i,quality:t,useHdScanConfig:!0})}return a.success?(n.addPoint("pjpeg_encode_success"),f.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),a.value.byteLength),o("WAResultOrError").makeResult(new File([a.value],e.name,{type:"image/jpeg"}))):a}function k(e,n){var a=async function(){var r=t.URL.createObjectURL(e),a=await o("MAWImageUtils").urlToThumbnail(r,n);return t.URL.revokeObjectURL(r),a};if(!o("WADecodeImage").canDecodeWithoutDOM)return a();var i=r("justknobx")._("2338")*1024,l=r("justknobx")._("2340");return o("WAPromiseTimeout").promiseTimeout(o("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:n,thumbnailBlobByteSizeLimitBytes:i,thumbnailQualityPercentageWhenAboveByteSizeLimit:l}).then(function(e){if(!e.success)throw f.mustfixThrow("urlToFileInWorker error: "+e.error);return{height:e.value.height,jpegThumbnail:e.value.blob,width:e.value.width}}).catch(function(e){throw f.catching(e).MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"]))),e}),_).catch(function(e){return a()})}function I(e){return e==="image/gif"||e==="image/webp"?!0:o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e)?!h.includes(e):!1}l.imagePreprocess=y,l.optimisticImagePreprocess=C,l.stickerPreprocess=b,l.getJpegThumbnailInfo=R,l.generateImageThumbnailInWorkerWithFallback=k,l.isSupportedImageFileType=I}),98);
__d("WAWebDataUrlToBlob",["err"],(function(t,n,r,o,a,i,l){var e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function s(t){var n=t.match(e);if(!n)throw r("err")("invalid data URI");var o=n[2]?n[1]:"text/plain"+(n[3]||";charset=US-ASCII"),a=!!n[4],i=t.slice(n[0].length),l;a?l=atob(i):l=decodeURIComponent(i);for(var s=new ArrayBuffer(l.length),u=new Uint8Array(s),c=0;c<l.length;c+=1)u[c]=l.charCodeAt(c);return new Blob([u],{type:o})}l.dataURLtoBlob=s}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s="image/jpeg",u=100,c=r("justknobx")._("2338")*1024,d=r("justknobx")._("2340"),m=r("justknobx")._("2545");function p(t,o){o===void 0&&(o=!0);var a;return new(e||(e=n("Promise")))(function(e,n){a=new Image;var i=/^(?:data|blob):/.test(t);o&&!i&&a.setAttribute("crossOrigin","anonymous"),a.onload=e,a.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))},a.onerror=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))},a.src=t}).then(function(){return a})}function _(t){return window.fetch(t,{cache:"no-store",method:"GET",mode:"cors"}).then(function(e){if(!e.ok)throw r("FBLogger")("messenger_web").mustfixThrow("Failed to fetch image: %s %s",e.status,e.statusText);return e.blob()}).then(function(t){return new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onloadend=function(){var t=new Image;t.onload=function(){e(t)},t.onerror=function(){n(function(){throw r("FBLogger")("messenger_web").mustfixThrow("Error loading image from blob data")})},typeof o.result=="string"?t.src=o.result:n(r("err")("FileReader result is not a string"))},o.onerror=function(){n(r("err")("Error reading blob as data URL"))},o.readAsDataURL(t)})}).catch(function(e){throw r("FBLogger")("messenger_web").mustfixThrow("Failed to load image from URL: %s, %s",t,String(e))})}function f(t,r,a,i){if(a===void 0&&(a=!1),t.toBlob)return new(e||(e=n("Promise")))(function(e){var n=i==null?void 0:i/100;t.toBlob(e,r,n)}).then(function(o){var i=c,l=d/100;return a&&o.size>=i?new(e||(e=n("Promise")))(function(e){t.toBlob(e,r,l)}):o});var l;o("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var s=(l=o("WAWebDataUrlToBlob").dataURLtoBlob)!=null?l:window.dataURLtoBlob;return(e||(e=n("Promise"))).resolve(s(t.toDataURL(r))).then(function(o){var i=c,l=d/100;return a&&o.size>=i?(e||(e=n("Promise"))).resolve(s(t.toDataURL(r,l))):o})}function g(t,a,i,l,s,u){u===void 0&&(u=!1);var c=u?_(t):p(t);return c.then(function(e){var t=e.naturalWidth,n=e.naturalHeight,r=o("WACalculateBoundOutputSize").calculateBoundOutputSize({height:n,width:t},s),u=r.outputHeight,c=r.outputWidth,d=document.createElement("canvas");d.width=c,d.height=u;var m=d.getContext("2d");return l!==!0&&b(d),m.drawImage(e,0,0,t,n,0,0,c,u),f(d,a,!1,i).then(function(e){return{blob:e,height:u,width:c}})}).catch(function(t){return(e||(e=n("Promise"))).reject(t!=null?t:r("err")("Error loading image from URL"))})}function h(e,t){return p(e).then(function(e){var n=document.createElement("canvas"),r=e.naturalWidth,a=e.naturalHeight,i=n.getContext("2d"),l=v(a,r,t);n.width=l.width,n.height=l.height;var u=n.width,c=n.height;return C(n),i.drawImage(e,0,0,u,c),f(n,s,!0).then(function(e){return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(function(e){return{height:c,jpegThumbnail:e,width:u}})})})}function y(e,t){return p(e).then(function(e){var n=v(e.naturalHeight,e.naturalWidth,t);return{height:n.height,width:n.width}})}function C(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function b(e){var t=e.getContext("2d");t.fillStyle="rgb(255,255,255)",t.fillRect(0,0,e.width,e.height)}function v(e,t,n){var r=t!=null?t:n,o=e!=null?e:n;return r>o?r>n&&(o*=n/r,r=n):o>n&&(r*=n/o,o=n),{height:Math.round(Math.max(o,1)),width:Math.round(Math.max(r,1))}}function S(e){return p(e).then(function(e){return{height:e.naturalHeight,width:e.naturalWidth}})}function R(t,a,i,l){l===void 0&&(l=!1);var s=o("MAWAnimatedImageThumbnailStore").getThumbnailSpec(t);if(s)return(e||(e=n("Promise"))).resolve(s);var u=g(t,"image/gif",void 0,void 0,void 0,l);return u==null?null:u.then(function(e){var n=new File([e.blob],"gif",{type:"image/gif"});return o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(n,Math.max(i!=null?i:e.width,a!=null?a:e.height)).then(function(e){return o("MAWAnimatedImageThumbnailStore").setThumbnailSpec(t,e),e})}).catch(function(e){throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",t,e)})}function L(t){var r=t==null?void 0:t.file,a=t==null?void 0:t.width,i=t==null?void 0:t.height;if(r==null||a==null||i==null)return(e||(e=n("Promise"))).resolve(t);var l=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(r.type,!0),s=l.mediaType;return s!==o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=n("Promise"))).resolve(t):o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(r,Math.max(a,i)).then(function(e){var t=new File([e.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:t,height:e.height,width:e.width}})}l.TYPE_JPEG=s,l.IMG_THUMB_MAX_EDGE=u,l.STICKER_THUMBNAIL_MAX_SIZE=m,l.canvasToBlob=f,l.urlToFile=g,l.urlToThumbnail=h,l.urlToThumbnailSpec=y,l.boundHeightWidth=v,l.urlToImageSpec=S,l.generateGIFThumbnail=R,l.generatePreviewBlobForShare=L}),98);
__d("MAWGetImageSpec",["MAWImageUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToFile(r,n!=null?n:e.type).then(function(e){var t=e.height,n=e.width;return{height:t,width:n}})}async function s(e){var n=t.URL.createObjectURL(e),r=await o("MAWImageUtils").urlToImageSpec(n);return t.URL.revokeObjectURL(n),r}l.getImageSpec_DEPRECATED=e,l.getImageSpec=s}),98);
__d("MAWMpsMigrationStatus",["ExecutionEnvironment","FBLogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){return r("justknobx")._("5255")?!0:c==null?(r("FBLogger")("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is not initialised, main thread: ",""])),(u||(u=r("ExecutionEnvironment"))).isInMainThread),!1):c}function m(e){r("FBLogger")("wmi").DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is ",""])),e),c=e}l.isMigrated=d,l.setStatus=m}),98);
__d("MAWMpsGating",["MAWMpsMigrationStatus","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("10465")}function s(){return r("gkx")("19024")}function u(){return o("MAWMpsMigrationStatus").isMigrated()&&(e()||r("gkx")("17181"))}function c(){return e()||r("gkx")("17846")}function d(){return r("gkx")("17946")}function m(){return u()&&r("gkx")("19368")}function p(){return u()&&r("gkx")("19318")}l.isFullMpsEnabled=e,l.isMpsSpamReports=s,l.isMpsMessageRendering=u,l.isMpsSnippetsCacheServiceEnabled=c,l.isEBMessageProbeEnabled=d,l.isFileGalleryEBTaggingEnabled=m,l.isMediaGalleryEnabled=p}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15418")||o("MAWMpsGating").isMpsMessageRendering()}l.isQuotedMessagesInLsEnabled=e}),98);
__d("WAHashUtils",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function s(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function u(e){return e}function c(e){return e}function d(e){return""+e.slice(0,3)}l.toPlaintextHash=e,l.toCiphertextHash=s,l.stringToPlaintextHash=u,l.toHashedPlaintextHash=c,l.sanitisePlaintextHash=d}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=!0);var n=e,r=o("MAWCurrentUser").getID(),a=e.author,i=e.externalId,l=e.msgId,s=e.threadJid;if(s==null)return null;var u=n.content,c=n.sortOrderMs,d={chatJid:s,externalId:i,msg:{msgId:l,sender:o("WAJids").authorToUserId(a,r),ts:e.canonicalTs},sortOrderMs:c},m=u;return babelHelpers.extends({},d,{msg:babelHelpers.extends({},d.msg,{content:m!=null?o("MAWVault").isVaulted(m)?t?m:o("MAWVault").unvault(m):t?o("MAWVault").vault(m):m:void 0})})}var s="message_content_search",u="non_message_content_search";l.createBridgeSearchMsg=e,l.MESSAGE_CONTENT_SEARCH=s,l.NON_MESSAGE_CONTENT_SEARCH=u}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0},s={messageComposerDrafts:e,snippets:e},u=null,c=function(t,n,a){var e="maw_cache_service",i=new(o("WormEAR")).WormEAR(a,e,n),l=new(o("WormIDbDriver")).WormIDbDriver(t,e,a,i,o("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:m});return new(o("Worm")).WormDatabase(l,r("qpl")._(1056840657,"2716"))};function d(){return u!==null||(u=new Promise(async function(e,t){try{var n=c(o("MAWIndexedDbMetadata").MAWcacheServiceDbName(o("MAWCurrentUser").getID()),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),s);await n.init(),e(n)}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),u=null,t(a)}})),u}function m(e){if(e instanceof o("WormEAR").DecryptionError){var t=e;r("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",t.store),r("promiseDone")(d().then(function(e){return e.runInTransaction([t.store],"readwrite",function(e){return e.stores[t.store].clear()},"delete-corrupted-entity")}).then(function(){r("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",t.store)}).catch(function(e){var n=r("getErrorSafe")(e);r("FBLogger")("MAWCacheService").catching(n).mustfix("Failed to delete corrupted store %s, err: %s",t.store,n.message)}))}}function p(e){return e.map(function(e){var t=e[0],n=e[1];return n})}async function _(){var e=await d();return e.dump({snippets:{customFields:{id:o("WormDump").wormNonSensitiveField,key:o("WormDump").wormNonSensitiveField,timestamp:o("WormDump").wormNonSensitiveField,value:function(t){var e;return{snippet:(e=o("WormDump")).wormRedact(t.snippet),snippetMsgAckLevel:e.wormNonSensitiveField(t.snippetMsgAckLevel),snippetMsgId:e.wormNonSensitiveField(t.snippetMsgId),snippetNewestIncomingMsgs:e.wormNonSensitiveField(t.snippetNewestIncomingMsgs),snippetReactionId:e.wormRedact(t.snippetReactionId)}}}}})}l.getOrSetupMAWCacheDB=d,l.convertCacheValueToDBRawValue=p,l.getDbDump=_}),98);
__d("MAWCacheServiceQPL",["ExecutionEnvironment","MAWCurrentUser","MAWQplProxy","QPLUserFlow","performanceAbsoluteNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set,c=new Set,d=3e3,m=r("qpl")._(1056836703,"2955");function p(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(c.has(t))return;f(t),o("MAWQplProxy").startQplUserFlow(m,{},{callBridgeWithTimestamp:!0,providedInstanceKey:t})}else{if(u.has(t))return;_(t),r("QPLUserFlow").start(m,{annotations:{string:{service:n}},instanceKey:t})}}function _(e){u.add(e)}function f(e){c.add(e)}function g(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQplPointThroughBridge(m,"worker@"+i+n,{instanceKey:t},!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();a==="realtime-update"?window.setTimeout(function(){r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t,timestamp:p})},d):r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t})}}function h(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(!c.has(t))return;o("MAWQplProxy").sendQPLAnnotationsThroughBridge(m,n,t)}else{if(!u.has(t))return;r("QPLUserFlow").addAnnotations(m,n,{instanceKey:t})}}function y(t){var n=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(n){if(!c.has(t))return;c.delete(t),o("MAWQplProxy").sendQPLSuccessThroughBridge(m,{},t,!0)}else{if(!u.has(t))return;var a=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endSuccess(m,{instanceKey:t,timestamp:a})},d)}}function C(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQPLFailThroughBridge(m,"worker@"+i+n,{},t,!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endFailure(m,"ui@"+n,{instanceKey:t,timestamp:p})},d),u.delete(t)}}function b(e){return e?e.replace(/-/g,"_")+"_":""}function v(e){return o("MAWCurrentUser").isEmployee()||o("MAWCurrentUser").isTestUser()?e:void 0}var S={addAnnotationsQPL:h,addPointQPL:g,endFailureQPL:C,endSuccessQPL:y,redactKeysForNonEmployee:v,registerInstanceKeyInUI:_,registerInstanceKeyInWorker:f,startQPL:p};l.default=S}),98);
__d("MAWCacheServiceUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_cache_service_broadcast",s=typeof window!="undefined"?window:self,u=function(){return s.BroadcastChannel?new s.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},c={concurrency:1,maxTaskLimit:1,maxThrottleMs:500};function d(e){return"maw-cache-service-"+e}function m(e,t){var n=new Set,r=[];return e.forEach(function(e){var o=t(e);if(n.has(o)){r.push(e);return}n.add(o)}),r}l.MAW_CACHE_SERVICE_BROADCAST_CHANNEL=e,l.globalScope=s,l.getMAWCacheServiceBroadcastChannel=u,l.SCHEDULER_CONFIG=c,l.getSchedulerName=d,l.findDuplicates=m}),98);
__d("MAWEBLSInWorkerSwitch",["MAWEBEnabledStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager,s=e;l.default=s}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$MAWCombinedStateManager$p_1=t,r.$MAWCombinedStateManager$p_2=n,r.$MAWCombinedStateManager$p_3=null,r.$MAWCombinedStateManager$p_4=!1,r.$MAWCombinedStateManager$p_1.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_2.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_5(),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){var t=e.prototype.isEnabled.call(this);return this.$MAWCombinedStateManager$p_6(),t},n.$MAWCombinedStateManager$p_6=function(){var e=this.$MAWCombinedStateManager$p_1.isEnabled(),t=this.$MAWCombinedStateManager$p_2.isEnabled(),n=e!==t,r=e?"enabled":"disabled",a=t?"enabled":"disabled",i=n?"mismatch":"match";if(n&&!this.$MAWCombinedStateManager$p_4)this.$MAWCombinedStateManager$p_3=Date.now(),this.$MAWCombinedStateManager$p_4=!0;else if(this.$MAWCombinedStateManager$p_4&&this.$MAWCombinedStateManager$p_3!=null){var l=this.$MAWCombinedStateManager$p_3,s=Date.now()-l;this.$MAWCombinedStateManager$p_4=n,this.$MAWCombinedStateManager$p_3=n?Date.now():null;var u=this.$MAWCombinedStateManager$p_7(s);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.duration_bucket."+u});var c=n?"failed":"success";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.result."+c})}o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch."+i+"."+r+"."+a})},n.$MAWCombinedStateManager$p_7=function(t){return t<100?"under_100ms":t<500?"100_to_500ms":t<1e3?"500ms_to_1s":t<5e3?"1s_to_5s":t<1e4?"5s_to_10s":"over_10s"},n.$MAWCombinedStateManager$p_5=function(){this.set(this.$MAWCombinedStateManager$p_1.isEnabled()&&this.$MAWCombinedStateManager$p_2.isEnabled()),this.$MAWCombinedStateManager$p_6()},t})(o("MAWEBEnabledStateManager").MAWEBEnabledStateManager),s=new e(r("MAWEBSwitch"),r("MAWEBLSInWorkerSwitch"));l.MAWCombinedStateManager=e,l.MAWEBCombinedSwitch=s}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=300,u=600,c=900,d=1800,m=Math.imul((e=o("WATimeUtils")).HOUR_SECONDS,6),p=Math.imul(e.HOUR_SECONDS,12),_=Math.imul(e.DAY_SECONDS,14),f=1e3,g=5,h=10,y=30,C=60,b=m;l.fiveMinutesInSeconds=s,l.tenMinutesInSeconds=u,l.fifteenMinutesInSeconds=c,l.thirtyMinutesInSeconds=d,l.oneHourInSeconds=e.HOUR_SECONDS,l.sixHoursInSeconds=m,l.twelveHoursInSeconds=p,l.oneDayInSeconds=e.DAY_SECONDS,l.ephemeralMaxDelectionWindowForUnseenMessage=_,l.msPerSec=f,l.fiveSeconds=g,l.tenSeconds=h,l.thirtySeconds=y,l.oneMinuteInSeconds=C,l.ephemeralReportingWindowInSeconds=b}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15740")}l.isFbProfileDirectoryItemXmaEnabled=e}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(t,n,r,o,a,i,l){"use strict";var e=["s2sInstanceKey","s2sUserFlowQPLEvent"],s=["scheduleConfig"];function u(e){return e}function c(e){return e}var d={acceptGroupInvite:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,inviteCode:o,invitedParticipantUserId:r,inviteExpirationTs:a,inviterUserId:n},scheduleConfig:e!=null?e:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(t,n,r,o){var e=_(o);return{args:{group:t,s2sInstanceKey:r,users:n},scheduleConfig:e!=null?e:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(t,n){var e=_(n);return{args:{msgIds:t},scheduleConfig:e!=null?e:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(t,n,r,o,a,i,l,s){var e=_(s);return{args:{downloadType:a,hash:n,metricInstanceKeys:l,msgType:o,protocolMsgId:t,qplEntryPoint:r},scheduleConfig:e!=null?e:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(n,r,a,i,l,s,u){var t=_(u),c=a!=null?a:{},d=c.s2sInstanceKey,m=c.s2sUserFlowQPLEvent,p=babelHelpers.objectWithoutPropertiesLoose(c,e);return{args:{args:p,chatJid:n,ephemeralSetting:i,externalId:l!=null?l:o("MAWExternalId").generateExternalId(),isFirstMsg:s,protocolMsgId:r,s2sInstanceKey:d},scheduleConfig:t!=null?t:void 0,type:"forwardMsg"}},getSpams:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"getSpams"}},handleFutureproofMsg:function(t){var e=_(t);return{args:{},scheduleConfig:e!=null?e:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(t,n){var e=t.chatJid,r=t.context,o=t.frxParams,a=t.frxTags,i=t.msgs,l=t.reportedMessageId,s=t.spamFlow,u=t.userJid,c=_(n);return{args:{chatJid:e,context:r,frxParams:o,frxTags:a,msgs:i,reportedMessageId:l,spamFlow:s,userJid:u},scheduleConfig:c!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(t,n){var e=t.actorID,r=t.taskID,o=_(n);return{args:{actorID:e,taskID:r},scheduleConfig:o!=null?o:void 0,type:"igdSendMsg"}},leaveGroups:function(t,n){var e=_(n);return{args:{groups:t},scheduleConfig:e!=null?e:void 0,type:"leaveGroups"}},markThreadAsRead:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,isBlocked:r,isReadReceiptsDisabled:a,isRestricted:o,relationship:n},scheduleConfig:e!=null?e:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(t,n,r,o,a,i,l,s,u,c){var e=_(u);return{args:{chatJid:r,context:i,frxParams:l,frxTags:a,isIgd:o,openMsgs:c,reportedMessageId:s,spamFlow:n,userJid:t},scheduleConfig:e!=null?e:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g){var e=_(p);return{args:{deanonApiPayload:f,hasMoreAfter:a,hasMoreBefore:o,instanceKey:c,isMediaGalleryRestore:g,isPointQuery:i,messages:r,minMsgId:l,optimisticMsgs:d,startSortKey:u,taskSource:m,threadId:n,traceId:s,transportKey:t},scheduleConfig:e!=null?e:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g,h){var e=_(m);return{args:{chatJid:h,deanonApiPayload:f,echoMessages:t,hasMoreAfter:i,hasMoreBefore:a,instanceKey:d,isMediaGalleryRestore:g,isPointQuery:l,messages:o,minMsgId:s,referenceTimestamp:c,requestId:u,taskSource:p,threadId:r,transportKey:n},scheduleConfig:e!=null?e:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(t,n){var e=_(n);return{args:t,scheduleConfig:e!=null?e:void 0,type:"revokeMsgs"}},sendAppData:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendAppData"}},sendBumpMsg:function(t,n,r,a){var e=_(a);return{args:{args:n,chatJid:t,externalId:r!=null?r:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:L,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:r,source:b,width:i},attachmentType:R,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),file:n},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L,E){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:E,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:R,source:b,width:i},attachmentType:L,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),mimeType:n,plaintext:r},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(t,n,r){var e=_(r);return{args:{groupJid:t,memberAddMode:n},scheduleConfig:e!=null?e:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(t,n,r){var e=_(r);return{args:{group:t,subject:n},scheduleConfig:e!=null?e:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(t,n){var e=_(n);return{args:{qplInstanceKey:t},scheduleConfig:e!=null?e:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(t,n,r,o){var e=_(o);return{args:{backupEntFbid:n,deliveryObjectId:t,traceId:r},scheduleConfig:e!=null?e:void 0,type:"updateBackupEntFbidForMedia"}}};function m(e,t){return p(e,t)}function p(e,t){var n=t.scheduleConfig,r=babelHelpers.objectWithoutPropertiesLoose(t,s),a={args:{},scheduleConfig:n,type:e};return t.externalIdJob&&(a.args.externalId=o("MAWExternalId").generateExternalId()),a.args=babelHelpers.extends({},a.args,r),t.uniqueJob&&(a.uniqKey=e),a}function _(e){if(e!=null)return{jobId:e.jobId,maxTimeoutMs:e.maxTimeoutMs,priority:e.priority}}function f(e){return{otid:e.toplevelProtobuf.messageId,supplementalProtobufs:new Map(e.supplementalProtobufs.entries().map(function(e){var t=e[0],n=e[1];return[t,{decryptedProtobuf:n.payload,protobufTimestampMS:n.timestampMs}]})),tags:e.tags,toplevelProtobuf:{decryptedProtobuf:e.toplevelProtobuf.payload,protobufTimestampMS:e.toplevelProtobuf.timestampMs}}}l.toThreadJidPrimaryId=u,l.toEncodedEchoMessage=c,l.jobSerializers=d,l.createStartJobInfo=m,l.createStartJobInfoGeneric=p,l.serializeJobScheduledConfig=_,l.mpsMessageToEncryptedBackupsMessage=f}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]),l=e;i.default=l}),66);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","MsgrWebGating","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&(!o("MsgrWebGating").isQuotedMessagesInLsEnabled()||e.replyAttachmentPlaintextHash==null)?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","WAArmadilloXMA.pb","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function u(e){var t=e.fbTargetType,n=e.silentExposure;if(t!=null&&s.has(t))return!0;var a=n!=null?n:!1;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return a?r("gkx")("9338"):r("gkx")("9339");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return o("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:return r("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(t)),!1}}l.FB_FULLY_SUPPORTED_TARGET_TYPES=s,l.isFBSupportedTargetType=u}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).of_float(t*1e3)}function u(e){var t=Number(e);return t<=o("WATimeUtils").MAX_INT&&t!==-1e3&&t!==0}function c(t){return u(t)?(Number(t)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(t)),s(t)):(e||(e=o("I64"))).of_float(t)}function d(e,t){var n=Date.now(),r=n-t*24*60*60*1e3,a=o("WATimeUtils").castMilliSecondsToUnixTime(r);return e>=a}function m(e){if(e!=null)return u(e)?(Number(e)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(e)),o("WATimeUtils").castToMillisTime(e*1e3)):e}var p=(e||(e=o("I64"))).of_string("9999999999999"),_=Number.MAX_VALUE;l.toTimestamp=s,l.millisTimeToTimestamp=c,l.isTimestampNewerThanXDays=d,l.ensureValidMillisTime=m,l.MAX_TIMESTAMP_MS=p,l.MAX_TIMESTAMP=_,l.MIN_TIMESTAMP_MS=e.zero}),98);
__d("MAWUICacheServicesBase",["FBLogger","MAWCacheServiceDB","MAWCacheServiceQPL","MAWMpsGating"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"];function s(e){return o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?e+"_mps_reactive":e}var u=(function(){function t(e){this.$1=new Map,this.QPLMetadata=new Map,this.$2=e}var n=t.prototype;return n.resetInMemoryCache=function(t,n){var e=this.$1.get(t);e!=null&&(r("FBLogger")("MAWUICacheServices").info("Reset in memory cache. Namespace: %s",t),n.forEach(function(t){e.delete(t)}))},n.updateInMemoryCacheAndTriggerCallback=function(t,n,o,a,i){this.$3(t,n);var e=this.$2[t];e!=null&&(a!=null&&(r("MAWCacheServiceQPL").addPointQPL(a,"triggering_callback",o),(o==="cache-invalidation"||o==="realtime-update"||o==="from-scratch"&&this.QPLMetadata.get(a)==="all-from-scratch"||o==="in-memory"&&i===!0)&&(r("MAWCacheServiceQPL").endSuccessQPL(a),this.QPLMetadata.delete(a))),e.onCacheChange(n,o))},n.checkInMemoryCacheAndTriggerCallback=function(t,n,o){var e=this,a=[],i=[];n.forEach(function(n){var r=e.$4(t,n);r==null?a.push(n):i.push([n,r])});var l=a.length===0;return l&&o!=null&&r("MAWCacheServiceQPL").addPointQPL(o,"all_in_memory"),i.length>0&&this.updateInMemoryCacheAndTriggerCallback(t,i,"in-memory",o,l),a},n.checkPersistedCacheAndTriggerCallback=async function(n,a,i){var t=await o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),l=await t.runInTransaction([n],"readonly",function(e){return Promise.all(a.map(function(t){return e.stores[n].getByIndex("key",[s(t)])}))},"read_from_persisted_"+n),u=[],c=[];return l.forEach(function(t,n){if(t==null)u.push(a[n]);else{var r=t.id,o=babelHelpers.objectWithoutPropertiesLoose(t,e);c.push([a[n],o])}}),i!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(i,{int:{numPersistedHit:c.length,numPersistedMiss:u.length}}),u.length===0&&i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"all_in_persisted"),c.length>0&&this.updateInMemoryCacheAndTriggerCallback(n,c,"persisted",i),u},n.$3=function(t,n){var e,r=(e=this.$1.get(t))!=null?e:new Map;n.forEach(function(e){var t=e[0],n=e[1];r.set(t,n)}),this.$1.set(t,r)},n.$4=function(t,n){var e=this.$1.get(t);if(e==null)return null;var r;return(r=e.get(n))!=null?r:null},t})();l.adjustCacheKey=s,l.MAWUICacheServicesBase=u}),98);
__d("MAWWorkerPersistedDataService",["FBLogger","MAWBridge","MAWCacheServiceUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_persisted_data_service_broadcast",s=function(){return o("MAWCacheServiceUtils").globalScope.BroadcastChannel?new(o("MAWCacheServiceUtils")).globalScope.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},u=(function(){function t(){this.$1=s()}var n=t.prototype;return n.emitBroadcastChannelMessageToUI=function(n,r,a,i){var t={cache:r,instanceKey:i,namespace:n,source:a};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:t},namespace:e}):this.$1.postMessage(t)},t})(),c=null,d=function(){return c==null&&(c=new u),c};l.MAW_PERSISTED_DATA_SERVICE_BROADCAST_CHANNEL=e,l.getMAWPersistedDataServiceBroadcastChannel=s,l.getMAWWorkerPersistedDataService=d}),98);
__d("MAWXMALoggingUtils",["WAArmadilloXMA.pb","objectEntries"],(function(t,n,r,o,a,i,l){"use strict";var e=r("objectEntries")(o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function s(t){return t!=null?e.get(t):void 0}l.getXmaTargetTypeStringFromEnum=s}),98);
__d("MessagingAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});i.default=e}),66);
__d("MpsOverBridge",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){this.loadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessage",e)},this.loadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessages",e)},this.batchLoadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessages",e)},this.batchLoadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessage",e)},this.debugDbDump=function(){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsDebugDbDump")},this.copMps={loadBatchMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadBatchMsgsIntoMaw",t)},loadMoreMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMoreMsgsIntoMaw",t)},loadMsgIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMsgIntoMaw",t)}}},s;function u(){return s==null&&(s=new e),s}l.mps=u}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,!1)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isConnected=function(){return this.get()},n.waitForConnection=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager),s=new e;l.WACommsConnectionState=s}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{var n=31,r=BigInt(n<<17),a=BigInt(0),i=BigInt(1<<17),l=BigInt(t)&r;return l===a?"web":l===i?"mobile":"unknown"}catch(n){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),t,n),"error"}}l.getPlatformFromStanzaId=s}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"}),l=1,s=e.LOW,u=10*1e3;i.JOB_PRIORITY=e,i.DEFAULT_CONCURRENCY=l,i.DEFAULT_JOB_PRIORITY=s,i.DEFAULT_JOB_TIMEOUT_MS=u}),66);
__d("WAMediaQplHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e<0||e>1e3*1024*1024?"invalid_size":e===0?"size equal to 0KB":e<=1*1024?"size lower than 1 KB":e<=50*1024?"size between 1 KB and 50 KB":e<=100*1024?"size between 50 KB and 100 KB":e<=500*1024?"size between 100 KB and 500 KB":e<=1*1024*1024?"size between 500 KB and 1 MB":e<=2*1024*1024?"size between 1 MB and 2 MB":e<=5*1024*1024?"size between 2 MB and 5 MB":e<=10*1024*1024?"size between 5 MB and 10 MB":e<=20*1024*1024?"size between 10 MB and 20 MB":e<=25*1024*1024?"size between 20 MB and 25 MB":e<=30*1024*1024?"size between 25 MB and 30 MB":e<=50*1024*1024?"size between 30 MB and 50 MB":e<=75*1024*1024?"size between 50 MB and 75 MB":e<=100*1024*1024?"size between 75 MB and 100 MB":"size above 100 MB"}i.convertIntegerSizeToStringBucket=e}),66);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t!=null&&(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP))}l.default=u}),98);/*FB_PKG_DELIM*/
__d("Comet2ndChannelContextProvider.react",["Comet2ndChannelContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(4),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={},t[0]=a):a=t[0];var i=d(a),l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=function(){return i.current},t[1]=l):l=t[1];var u=l,c;return t[2]!==n?(c=s.jsx(r("Comet2ndChannelContext").Provider,{value:u,children:n}),t[2]=n,t[3]=c):c=t[3],c}l.default=m}),98);
__d("CometClipboardCustomCopy.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e,t){var n=[];if(t==null)return n;for(var r of t){var o=r(e);o!==null&&n.push.apply(n,Array.isArray(o)?o:[o])}return n}function d(e,t){var n=[];if(t==null)return n;for(var r of t)r.onReadyImmediately(function(t){var r=t(e);r!==null&&n.push.apply(n,Array.isArray(r)?r:[r])});return n}function m(e){var t=o("react-compiler-runtime").c(8),n=e.children,r=e.reformers,a=e.reformersDeferred,i;t[0]!==r||t[1]!==a?(i=function(t){if(t.clipboardData!=null){var e=document.getSelection();if(!(e===null||e.isCollapsed)){var n=[];if(n.push.apply(n,c(e,r)),n.push.apply(n,d(e,a)),n.length!==0){t.preventDefault();for(var o of n){var i,l=o.data,s=o.format;(i=t.clipboardData)==null||i.setData(s,l)}}}}},t[0]=r,t[1]=a,t[2]=i):i=t[2];var l=i;if((r==null?void 0:r.length)===0&&(a==null?void 0:a.length)===0){var u;return t[3]!==n?(u=s.jsx("div",{children:n}),t[3]=n,t[4]=u):u=t[4],u}var m;return t[5]!==n||t[6]!==l?(m=s.jsx("div",{onCopy:l,children:n}),t[5]=n,t[6]=l,t[7]=m):m=t[7],m}l.default=m}),98);
__d("CometFeed5sImpressionDelayContextProvider.react",["CometFeed5sImpressionDelayContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(3),n=e.children,a,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={firstAdStoryPosition:null,firstLoggedAdImpressionStoryPosition:null,hasAnyAdImpressionAlreadyBeenLogged:!1,hasUserSeenAnyAd:!1},t[0]=i):i=t[0],a=i;var l=a,u;return t[1]!==n?(u=s.jsx(r("CometFeed5sImpressionDelayContext").Provider,{value:l,children:n}),t[1]=n,t[2]=u):u=t[2],u}l.default=c}),98);
__d("CometFeedBrandSafetyContextProvider.react",["CometFeedBrandSafetyContext","react","useUnsafeRef_DEPRECATED","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo;function p(t){var n=t.children,o=t.feedStateInfoRef,a=m(function(){return{brsSessionId:r("uuidv4")()}},[]),i=(e||(e=r("useUnsafeRef_DEPRECATED")))({}),l=e({feedSessionInfo:a,feedStateInfoRef:o,feedUnitRegistry:i.current}),s=d(function(){return l.current},[]);return u.jsx(r("CometFeedBrandSafetyContext").Provider,{value:s,children:n})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("CometFeedEndOfFeedBugNub.react",["fbt","FDSBugOutline20Icon","FDSCircleButton.react","react","react-compiler-runtime","useCometReportBug"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(3),t=r("useCometReportBug")(),n=t[0],a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Bug nub label"),e[0]=a):a=e[0];var i;return e[1]!==n?(i=u.jsx(r("FDSCircleButton.react"),{"aria-label":a,icon:r("FDSBugOutline20Icon"),onPress:function(){return n({initialProduct:"feed"})},size:32}),e[1]=n,e[2]=i):i=e[2],i}l.default=c}),226);
__d("CometFeedEndOfFeedMessage.react",["fbt","CometEntryPointDialogTrigger.react","CometTailLoadLogger","FBLogger","FDSButton.react","FDSCard.react","FDSNullState.react","GraphQLGender","NullStateGeneral","SPFCometConnectionsDialog.entrypoint","XCometFriendingControllerRouteBuilder","gkx","performanceNow","react","react-compiler-runtime","useCometIgnoreLateMutation","useCometRouteTracePolicy"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useEffect,p=d.useRef,_=r("gkx")("20861"),f="ADDITIONAL_PROFILE_END_OF_NEWSFEED_UNIT";function g(t){var n=o("react-compiler-runtime").c(39),a=t.bugnub,i=t.canHaveFriends,l=t.friendsCount,u=t.isError,d=t.isTailLoadError,g=t.onReload,y=t.pageletName,C=t.position,b=t.unstable_fbOnlyMessage,v=t.viewerName,S=i===void 0?!0:i,R;n[0]===Symbol.for("react.memo_cache_sentinel")?(R=s._(/*BTDS*/"Something went wrong"),n[0]=R):R=n[0];var L=R,E;n[1]!==g?(E=g!=null?s._(/*BTDS*/"This may be because of a technical error that we're working to get fixed. Try reloading this page."):s._(/*BTDS*/"This may be because of a technical error that we're working to get fixed."),n[1]=g,n[2]=E):E=n[2];var k=E,I=r("NullStateGeneral"),T;n[3]!==d||n[4]!==g?(T=g!=null?c.jsx(r("FDSButton.react"),{label:d===!0?s._(/*BTDS*/"Try again"):s._(/*BTDS*/"Reload page"),onPress:g}):null,n[3]=d,n[4]=g,n[5]=T):T=n[5];var D=T;if(!u&&r("gkx")("22997")&&l!=null&&l<60){var x;n[6]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"_j[\"No more posts\",\"96cc0d1d8acdfbcc9fe4623a53183f99\",1]"),n[6]=x):x=n[6],L=x;var $;n[7]===Symbol.for("react.memo_cache_sentinel")?($=s._(/*BTDS*/"Add more friends to see more posts in your Feed."),n[7]=$):$=n[7],k=$,I=null;var P,N,M;n[8]===Symbol.for("react.memo_cache_sentinel")?(P=s._(/*BTDS*/"Find friends"),N={ref:"EMPTY_FEED"},M=r("XCometFriendingControllerRouteBuilder").buildURL({}),n[8]=P,n[9]=N,n[10]=M):(P=n[8],N=n[9],M=n[10]);var w;n[11]!==M?(w=c.jsx(r("FDSButton.react"),{label:P,linkProps:{passthroughProps:N,url:M}}),n[11]=M,n[12]=w):w=n[12],D=w}var A=p(!1),F=r("useCometRouteTracePolicy")(),O,B;if(n[13]!==y||n[14]!==C||n[15]!==F?(O=function(){!A.current&&y!=null&&C!=null&&C>0&&(o("CometTailLoadLogger").logMarkerEnd(y,C,(e||(e=r("performanceNow")))(),3,F),A.current=!0)},B=[y,C,F],n[13]=y,n[14]=C,n[15]=F,n[16]=O,n[17]=B):(O=n[16],B=n[17]),m(O,B),!u&&!S){v==null&&r("FBLogger")("profile_plus").mustfix("viewer name cannot be null");var W;n[18]===Symbol.for("react.memo_cache_sentinel")?(W=s._(/*BTDS*/"Follow more profiles and others"),n[18]=W):W=n[18],L=W;var q;n[19]!==v?(q=s._(/*BTDS*/"_j{\"*\":\"You'll see more useful content here by others that are relevant to {actor}.\"}",[s._name("actor",v!=null?v:null,new(r("GraphQLGender"))("NEUTER").toIntlVariationsEnum())]),n[19]=v,n[20]=q):q=n[20],k=q,I=null;var U;n[21]===Symbol.for("react.memo_cache_sentinel")?(U=c.jsx(r("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:r("SPFCometConnectionsDialog.entrypoint"),otherProps:{followLocation:f,title:s._(/*BTDS*/"Suggested for you")},preloadParams:{followLocation:f},children:h}),n[21]=U):U=n[21],D=U}var V=r("useCometIgnoreLateMutation")(!0),H;n[22]===Symbol.for("react.memo_cache_sentinel")?(H={className:"x1yztbdb"},n[22]=H):H=n[22];var G;n[23]!==a?(G=a!=null&&c.jsx("div",{className:"xo2ifbc x10l6tqk x1eu8d0j",children:a}),n[23]=a,n[24]=G):G=n[24];var z;n[25]!==D||n[26]!==I||n[27]!==k||n[28]!==L?(z=c.jsx(r("FDSNullState.react"),{action:D,body:k,headline:L,icon:I}),n[25]=D,n[26]=I,n[27]=k,n[28]=L,n[29]=z):z=n[29];var j;n[30]!==b?(j=b!=null&&_?c.jsx("div",{className:"x1p5oq8j x64bnmy xwxc41k x13jy36j",children:b}):null,n[30]=b,n[31]=j):j=n[31];var K;n[32]!==j||n[33]!==G||n[34]!==z?(K=c.jsxs(r("FDSCard.react"),{background:"default",dropShadow:1,children:[G,z,j]}),n[32]=j,n[33]=G,n[34]=z,n[35]=K):K=n[35];var Q;return n[36]!==V||n[37]!==K?(Q=c.jsx("div",babelHelpers.extends({},H,{"data-testid":void 0,ref:V,role:"article",children:K})),n[36]=V,n[37]=K,n[38]=Q):Q=n[38],Q}function h(e){return c.jsx(r("FDSButton.react"),{label:s._(/*BTDS*/"See Suggestions"),onPress:e})}h.displayName=h.name+" [from "+i.id+"]",l.default=g}),226);
__d("CometFeedEndOfFeedMessageForNewsfeedOnly.react",["CometFeedEndOfFeedBugNub.react","CometFeedEndOfFeedMessage.react","HiddenSubtreePassiveContext","NetworkStatus","WebConnectionClassServerGuess","cr:1638891","gkx","pageID","react","requireDeferred","useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";var e=["endOfFeedComponent","feedUnitReceivedCount","feedUnitRenderedCount","hasPageInfo","maxFeedUnitsReceived","onTailLoadReload","pageletName","position","renderLocation","setStopFutureTailLoads","tailLoadErrored","friendsCount","isError","onReload"],s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=c.useRef,_=r("requireDeferred")("CometNewsFeedEofFalcoEvent").__setRef("CometFeedEndOfFeedMessageForNewsfeedOnly.react"),f=r("requireDeferred")("CometNewsFeedEofUnmountedFalcoEvent").__setRef("CometFeedEndOfFeedMessageForNewsfeedOnly.react");function g(t){var o,a,i=t.endOfFeedComponent,l=i===void 0?r("CometFeedEndOfFeedMessage.react"):i,s=t.feedUnitReceivedCount,c=t.feedUnitRenderedCount,g=t.hasPageInfo,h=t.maxFeedUnitsReceived,y=t.onTailLoadReload,C=t.pageletName,b=t.position,v=t.renderLocation,S=t.setStopFutureTailLoads,R=t.tailLoadErrored,L=t.friendsCount,E=t.isError,k=t.onReload,I=babelHelpers.objectWithoutPropertiesLoose(t,e),T=p(!1),D=d(r("HiddenSubtreePassiveContext")),x=p(null),$=!r("gkx")("22809")&&r("gkx")("21058"),P=k!=null?function(){T.current=!0,$&&R?(S(!1),y()):k()}:void 0,N=r("useCometRouterState")(),M=(o=N==null||(a=N.main)==null||(a=a.route)==null?void 0:a.tabKey)!=null?o:"",w=M==="most_recent_feed";m(function(){if(v==="homepage_stream"||w){var e=E?"unknown_error":"no_more_edges";E&&(!g&&R?e="missing_page_info_and_tail_load_error":g?R&&(e="tail_load_error"):e="missing_page_info");var t=r("NetworkStatus").isOnline();return x.current=Date.now(),_.onReady(function(n){n.log(function(){return{connection_class:r("WebConnectionClassServerGuess").connectionClass,eof_mount_reason:e,feed_tab_key:M,feed_unit_count:c.toString(),feed_unit_received_count:s.toString(),is_online:t,max_feed_units_received_count:h.toString(),page_id:r("pageID"),position:b.toString(),was_in_hidden_subtree:D.getCurrentState().hiddenOrBackgrounded_FIXME}})}),function(){var e=Date.now(),t=x.current!=null?e-x.current:null,n=T.current,o=D.getCurrentState().hiddenOrBackgrounded;f.onReady(function(e){e.log(function(){return{connection_class:r("WebConnectionClassServerGuess").connectionClass,feed_unit_count:c.toString(),feed_unit_received_count:s.toString(),manual_reload:n,mounted_duration:t==null?void 0:t.toString(),page_id:r("pageID"),position:b.toString(),was_in_hidden_subtree:o}})})}}},[]);var A=!E&&(L==null||L>=60);return u.jsx(l,babelHelpers.extends({},I,{bugnub:r("CometFeedEndOfFeedBugNub.react")!=null?u.jsx(r("CometFeedEndOfFeedBugNub.react"),{}):null,feedUnitReceivedCount:s,friendsCount:L,isError:E,isTailLoadError:$&&R,onReload:P,pageletName:C,position:b,unstable_fbOnlyMessage:A&&n("cr:1638891")!=null?u.jsx(n("cr:1638891"),{}):void 0}))}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("MinGapTypeUtils.facebook",["$InternalEnumUtils","MinGapType"],(function(t,n,r,o,a,i,l){var e,s=o("$InternalEnumUtils").createToJSEnum(e||(e=r("MinGapType"))),u=o("$InternalEnumUtils").createFromJSEnum(e);l.toJSEnum=s,l.fromJSEnum=u}),98);
__d("CometFeedGapRules",["CometFeedV2GapRules","FBLogger","MinGapType","MinGapTypeUtils.facebook","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=JSON.parse(r("CometFeedV2GapRules").json_min_gap_rules),u=r("gkx")("22618");function c(){var t=s.min_gap_rules;return Object.keys(t).map(function(t){return(e||(e=r("MinGapType"))).cast(parseInt(t,10))}).filter(Boolean)}function d(e){return c().indexOf(e)!==-1}var m=new Set;function p(e,t,n){if(!m.has(e)){var o=r("FBLogger")(t);n&&(o=o.catching(n)),o.warn(e),m.add(e)}}function _(e){if(e!==1){var t,n=(t=o("MinGapTypeUtils.facebook").fromJSEnum(e))!=null?t:"";!d(e)&&u&&p("Min gap type "+n+" is not supported by server-side gap rule config","CometFeedGapValidation")}}function f(e,t){var n,r,o=[e,t];o.forEach(_);var a=s.min_gap_rules;return(n=(r=a[e])==null?void 0:r[t])!=null?n:0}function g(e){var t;_(e);var n=s.min_gap_from_top_rules;return e===5&&r("gkx")("2276")?2:(t=n[e])!=null?t:0}l.getSupportedMinGapTypes=c,l.getMinGapBetweenTypes=f,l.getMinGapFromTop=g}),98);
__d("CometFeedKeyboardNavPositionContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(0);l.default=u}),98);
__d("CometValidFeedUnitOrdering",["AdsExtremeGapUtils","BrandSafetyEnforcementUtils","BrandSafetyOpportunityLossRateFalcoEvent","CometFeedGapRules","CometFeedUnitStatusTrackingUtils","MinGapType","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=["status"],s;function u(e){return e.reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t.key]=t,n))},{})}function c(t){return t.map(function(t){var n=t.status,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},r)})}var d={};function m(e){var t={};return o("CometFeedGapRules").getSupportedMinGapTypes().forEach(function(e){t[e]=null}),e.forEach(function(e,n){t[e.minGapType]=n}),t}function p(e,t,n,r,a,i){return _(e,t,o("CometFeedUnitStatusTrackingUtils").isPossiblyVisible,n,r,a,i)===null}function _(e,t,n,a,i,l,u){var c,p=o("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(e,n),_=p.length,f=m(p),g=Object.keys(f).map(function(e){return(s||(s=r("MinGapType"))).cast(parseInt(e,10))}).filter(Boolean),h=o("CometFeedGapRules").getMinGapFromTop(t),y=_;if(y<h-1)return{conflictPosition:null,conflictUnitMinGapType:null,violationType:"minGapFromTop"};var C=null,b=(c=a==null?void 0:a.sponsoredAuctionDistance)!=null?c:0;if(e.length>=1){var v,S=e[e.length-1],R=S==null||(v=S.edgeData)==null?void 0:v.brsContentLabel,L=a==null?void 0:a.brsFilterSetting,E=o("BrandSafetyEnforcementUtils").isInvalidBrandSafetyPositioning(t,L,R),k=u===!0&&L!=null&&L<100&&r("qex")._("291")===!0;if(E||k)return E&&l!=null&&d[l]!==e.length&&(r("BrandSafetyOpportunityLossRateFalcoEvent")==null||r("BrandSafetyOpportunityLossRateFalcoEvent").log(function(){return{ad_insertion_status:"SLOT_SKIPPED",ad_insertion_sub_status:"BLOCKED_BY_PREV",ad_inventory_filter:String(L),adjacent_edges_info:{unit_before:{brs_content_label:String(R)}},client_token:i!=null?i:"",feed_session_id:"",impression_original_timestamp_ms:"",slot_position:String(e.length)}}),d[l]=e.length),{conflictPosition:e.length,conflictUnitMinGapType:5,violationType:k?"brandSafetyLastEdge":"brandSafetyViolation"}}var I=o("AdsExtremeGapUtils").shouldApplyExtremeGapProtection(p,t);return g.some(function(e){var n=o("CometFeedGapRules").getMinGapBetweenTypes(t,e),r=t===5&&e===5,a=r?Math.max(n,b+1):n;if(r&&a===o("AdsExtremeGapUtils").EXTREME_GAP_DISTANCE&&I&&(a+=1),f[e]!=null){var i=_-f[e];if(i<a)return C={conflictPosition:p[f[e]].position,conflictUnitMinGapType:e,violationType:"minGapBetweenCategories"},!0}return!1}),C}function f(e,t){for(var n=0;n<t.length;n++){var r,o,a,i,l=t[n];if(p(e,l.minGapType,{brsContentLabel:l==null||(r=l.edgeData)==null?void 0:r.brsContentLabel,brsFilterSetting:l==null||(o=l.edgeData)==null?void 0:o.brsFilterSetting,sponsoredAuctionDistance:l==null||(a=l.edgeData)==null?void 0:a.sponsoredAuctionDistance},l==null||(i=l.edgeData)==null?void 0:i.clientToken,l.key,n===t.length-1))return l}return null}function g(e,t){var n=u(e);return t.filter(function(e){return n[e.key]==null})}function h(e,t){if(e.length<2||t.length===0)return[];for(var n=t.reduce(function(e,t){return e.add(t)},new Set),r=[],o=0;o<e.length;o++){var a=e[o];if(n.has(a.key))return r;r.push(a)}return[]}function y(e,t){t===void 0&&(t=0);for(var n=[],r=t;r<e.length;r++){var a=e[r];if(o("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible(a)){var i=_(e.slice(0,r),a.minGapType,o("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible);i!=null&&n.push(babelHelpers.extends({},i,{violationPosition:r,violationUnitKey:a.key,violationUnitMinGapType:a.minGapType}))}}return n}function C(e,t,n){n===void 0&&(n=!1);var r=t.reduce(function(e,t,n){var r;return babelHelpers.extends({},e,(r={},r[t.key]=n,r))},{}),o={};if(e.forEach(function(e,t){var n;if(o[e.key]!=null){o[e.key].receivedPositions=o[e.key].receivedPositions.concat([t]);return}o[e.key]={receivedPositions:[t],renderedPosition:(n=r[e.key])!=null?n:null}}),n)return o;var a={};return Object.keys(o).forEach(function(e){var t=o[e];t.receivedPositions.length===1&&t.receivedPositions[0]===t.renderedPosition||(a[e]=t)}),a}function b(e){var t={};return e.filter(function(e){return t[e.key]?!1:(t[e.key]=!0,!0)})}function v(e,t,n){for(var a=b(t),i=u(a),l=e.filter(function(e){return i[e.key]!=null}),s=o("CometFeedUnitStatusTrackingUtils").getAllPositionedFeedUnits(o("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithRenderingOutOfOrderFixed(l)),d=h(a,n).map(function(e){return babelHelpers.extends({},e,{status:"positioned"})}),m=d.concat(s),p=g(m,a),_=function(){var e=f(m,p);if(e==null)return 0;if(m.length>=1){var t,n,i=m[m.length-1],l=o("BrandSafetyEnforcementUtils").isInvalidBrandSafetyPositioning(i.minGapType,(t=i.edgeData)==null?void 0:t.brsFilterSetting,(n=e.edgeData)==null?void 0:n.brsContentLabel);if(l){r("BrandSafetyOpportunityLossRateFalcoEvent")==null||r("BrandSafetyOpportunityLossRateFalcoEvent").log(function(){var t,n,r,o;return{ad_insertion_status:"SLOT_SKIPPED",ad_insertion_sub_status:"BLOCKED_BY_NEXT",ad_inventory_filter:String((t=i.edgeData)==null?void 0:t.brsFilterSetting),adjacent_edges_info:{unit_after:{brs_content_label:String((n=e.edgeData)==null?void 0:n.brsContentLabel)}},client_token:(r=(o=i.edgeData)==null?void 0:o.clientToken)!=null?r:"",feed_session_id:"",impression_original_timestamp_ms:"",slot_position:String(m.length-1)}});var s=m.pop();if(s!=null){var u=[s];p=p.concat(c(u))}return p=S(m,e,p),p=p.slice().sort(function(e,t){return a.findIndex(function(t){return t.key===e.key})-a.findIndex(function(e){return e.key===t.key})}),1}}p=S(m,e,p)},y;p.length>0&&(y=_(),y!==0););return m}function S(e,t,n){return e.push(babelHelpers.extends({},t,{status:"received"})),n.filter(function(e){return e.key!==t.key})}l.getFeedUnitMap=u,l.convertStatusListToReceivedList=c,l.getLastPositionsForMinGapType=m,l.isUnitEligibleToBePlacedNext=p,l.getViolationIfUnitIsPlacedNext=_,l.getNextEligibleUnit=f,l.getAvailableUnits=g,l.getNewHeadLoadedUnits=h,l.getFeedUnitOrderViolations=y,l.getFeedUnitReorderInfo=C,l.removeDuplicates=b,l.getValidFeedUnitOrdering=v}),98);
__d("CometFeedUnitOrderingDebugInfo",["CometValidFeedUnitOrdering","MinGapTypeUtils.facebook"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=[],r=[],a=o("CometValidFeedUnitOrdering").getFeedUnitMap(t.map(function(e){return babelHelpers.extends({},e,{status:"received"})}).concat(e)),i=o("CometValidFeedUnitOrdering").getFeedUnitReorderInfo(t,e,!0);return t.forEach(function(e){var t=e.key,o={renderedPosition:i[t]!=null?i[t].renderedPosition:null,receivedPositions:i[t]!=null?i[t].receivedPositions:[],minGapType:a[t].minGapType,key:t,status:a[t].status};o.renderedPosition!=null?n[o.renderedPosition]=o:r.push(o)}),{feedUnitsDeferred:r,feedUnitsToRender:n}}function s(t,n,r,a,i){r===void 0&&(r=!0),a===void 0&&(a=0);var l=e(t,n),s=l.feedUnitsToRender.concat(l.feedUnitsDeferred),u=s.slice(a,i!=null?i:s.length),c=u.map(function(e){var t,n,r=e.renderedPosition!==e.receivedPositions[0];return(r?"*":" ")+" "+((t=e.renderedPosition)!=null?t:"X").toString().padStart(3)+": ["+(e.receivedPositions.toString()+"]").padEnd(7)+" "+((n=o("MinGapTypeUtils.facebook").fromJSEnum(e.minGapType))!=null?n:"UNKNOWN").padEnd(12).slice(0,12)+" "+e.key.padEnd(10).slice(0,10)+" "+e.status.slice(0,16)});if(r){var d="  Pos: [recvd]  "+"Category".padEnd(13)+"Key (part)".padEnd(11)+"Status";return[d].concat(c).join("\n")}return c.join("\n")}l.getCometFeedUnitOrderingDebugInfo=e,l.getCometFeedUnitOrderingDebugInfoString=s}),98);
__d("CometHomeContentAnimationContainer.react",["CometFeedGlimmer.react","CometVisualCompletion","clearTimeout","react","react-compiler-runtime","scrollTo","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=u.useState,p="x18re5ia-B",_=500,f=1500;function g(e){var t=o("react-compiler-runtime").c(19),n=e.children,a=e.disableScroll,i=e.isPending,l=a===void 0?!1:a,u=d(null),p=m(!1),g=p[0],h=p[1],y=m(!1),C=y[0],b=y[1],v,S;t[0]!==l||t[1]!==i?(v=function(){var e=u.current;i&&e!=null&&(b(!0),r("setTimeout")(function(){if(!l){var e=Math.max(window.innerHeight,f);window.scrollY>e&&r("scrollTo")({top:e}),r("scrollTo")({behavior:"smooth",top:0}),r("CometVisualCompletion").setInitialScrollY(0),r("CometVisualCompletion").addAnnotationInt("ScrollToTop",1)}},_))},S=[l,i],t[0]=l,t[1]=i,t[2]=v,t[3]=S):(v=t[2],S=t[3]),c(v,S);var R,L;t[4]!==C||t[5]!==i?(R=function(){if(!(i!==!1||C===!1)){h(!0);var e=r("setTimeout")(function(){h(!1),b(!1)},_);return function(){return r("clearTimeout")(e)}}},L=[i,C],t[4]=C,t[5]=i,t[6]=R,t[7]=L):(R=t[6],L=t[7]),c(R,L);var E;t[8]!==C?(E=C===!0?s.jsx("div",{className:"x54ewbq xqcmdr3 x1hc1fzr x47corl x1unhpq9 x6o7n8i xh8yej3",children:s.jsx(r("CometFeedGlimmer.react"),{})}):null,t[8]=C,t[9]=E):E=t[9];var k;t[10]!==g||t[11]!==C?(k={0:{className:"x1hc1fzr x1unhpq9 x6o7n8i"},2:{className:"x1unhpq9 x6o7n8i xg01cxk"},1:{className:"x1unhpq9 x6o7n8i xg01cxk x47corl"},3:{className:"x1unhpq9 x6o7n8i xg01cxk x47corl"}}[!!g<<1|(C===!0)<<0],t[10]=g,t[11]=C,t[12]=k):k=t[12];var I;t[13]!==n||t[14]!==k?(I=s.jsx("div",babelHelpers.extends({},k,{ref:u,children:n})),t[13]=n,t[14]=k,t[15]=I):I=t[15];var T;return t[16]!==E||t[17]!==I?(T=s.jsxs(s.Fragment,{children:[E,I]}),t[16]=E,t[17]=I,t[18]=T):T=t[18],T}l.default=g}),98);
__d("CometModernHomeFeedQuery.graphql",["CometModernHomeFeedQuery_facebookRelayOperation","GHLShouldChangeSponsoredAuctionDistanceFieldName.relayprovider","GHLShouldUseSponsoredAuctionLabelFieldNameV1.relayprovider","GHLShouldUseSponsoredAuctionLabelFieldNameV2.relayprovider","GHLShouldChangeSponsoredDataFieldName.relayprovider","GHLShouldChangeAdIdFieldName.relayprovider","FBReels_enable_view_dubbed_audio_type_gk.relayprovider","CometUFICommentAvatarStickerAnimatedImage.relayprovider","IsWorkUser.relayprovider","TestPilotShouldIncludeDemoAdUseCase.relayprovider","FBReels_deprecate_short_form_video_context_gk.relayprovider","FeedDeepDiveTopicPillThreadViewEnabled.relayprovider","CometImmersivePhotoCanUserDisable3DMotion.relayprovider","WorkCometIsEmployeeGKProvider.relayprovider","IsMergQAPolls.relayprovider","FBReels_enable_meta_ai_label_gk.relayprovider","FBReelsMediaFooter_comet_enable_reels_ads_gk.relayprovider","CometUFIReactionsEnableShortName.relayprovider","CometUFIShareActionMigration.relayprovider","CometUFI_dedicated_comment_routable_dialog_gk.relayprovider","StoriesArmadilloReplyEnabled.relayprovider","FBReelsIFUTileContent_reelsIFUPlayOnHover.relayprovider","GroupsCometGYSJFeedItemHeight.relayprovider","StoriesShouldIncludeFbNotes.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"RELAY_INCREMENTAL_DELIVERY"},t={defaultValue:null,kind:"LocalArgument",name:"connectionClass"},r={defaultValue:null,kind:"LocalArgument",name:"experimentalValues"},o={defaultValue:null,kind:"LocalArgument",name:"feedClientSession"},a={defaultValue:null,kind:"LocalArgument",name:"feedEndCursor"},i={defaultValue:2,kind:"LocalArgument",name:"feedInitialFetchSize"},l={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},s={defaultValue:null,kind:"LocalArgument",name:"feedStyle"},u={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},c={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},d={defaultValue:["TOP_STORIES"],kind:"LocalArgument",name:"orderby"},m={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},p={defaultValue:null,kind:"LocalArgument",name:"recentVPVs"},_={defaultValue:null,kind:"LocalArgument",name:"refreshMode"},f={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},g={defaultValue:null,kind:"LocalArgument",name:"scale"},h={defaultValue:!1,kind:"LocalArgument",name:"shouldChangeBRSLabelFieldName"},y={defaultValue:!1,kind:"LocalArgument",name:"shouldObfuscateCategoryField"},C={defaultValue:!1,kind:"LocalArgument",name:"shouldUseBRSLabelFieldNameV1"},b={defaultValue:!1,kind:"LocalArgument",name:"shouldUseBRSLabelFieldNameV2"},v={defaultValue:!1,kind:"LocalArgument",name:"useDefaultActor"},S=[{kind:"Variable",name:"after",variableName:"feedEndCursor"},{kind:"Variable",name:"client_session",variableName:"feedClientSession"},{kind:"Variable",name:"connection_class",variableName:"connectionClass"},{kind:"Literal",name:"environment",value:"DESKTOP"},{kind:"Variable",name:"experimental_values",variableName:"experimentalValues"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"first",variableName:"feedInitialFetchSize"},{kind:"Literal",name:"is_setting_suitable_for_autoplay",value:!0},{kind:"Variable",name:"orderby",variableName:"orderby"},{kind:"Variable",name:"recent_vpvs_v2",variableName:"recentVPVs"},{kind:"Variable",name:"refresh_mode",variableName:"refreshMode"},{kind:"Literal",name:"site",value:"comet"}],R={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},E=[L],k={kind:"InlineFragment",selections:E,type:"Node",abstractKey:"__isNode"},I=[{alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null},R,{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_adv_iden",args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"post_rendering_loggers",storageKey:null}],T={alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:E,storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v],kind:"Fragment",metadata:null,name:"CometModernHomeFeedQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[{kind:"Variable",name:"clientSession",variableName:"feedClientSession"},{kind:"Variable",name:"count",variableName:"feedInitialFetchSize"},{kind:"Variable",name:"cursor",variableName:"feedEndCursor"},{kind:"Variable",name:"refreshMode",variableName:"refreshMode"},{kind:"Variable",name:"shouldChangeBRSLabelFieldName",variableName:"shouldChangeBRSLabelFieldName"},{kind:"Variable",name:"shouldObfuscateCategoryField",variableName:"shouldObfuscateCategoryField"},{kind:"Variable",name:"shouldUseBRSLabelFieldNameV1",variableName:"shouldUseBRSLabelFieldNameV1"},{kind:"Variable",name:"shouldUseBRSLabelFieldNameV2",variableName:"shouldUseBRSLabelFieldNameV2"}],kind:"FragmentSpread",name:"CometNewsFeed_viewerConnection"},{args:null,kind:"FragmentSpread",name:"CometNewsFeed_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,i,l,s,u,o,a,c,m,g,v,_,f,e,d,p,r,y,h,C,b,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFICommentAvatarStickerAnimatedImagerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsWorkUserrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__TestPilotShouldIncludeDemoAdUseCaserelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FeedDeepDiveTopicPillThreadViewEnabledrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__WorkCometIsEmployeeGKProviderrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsMergQAPollsrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_enable_meta_ai_label_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFIReactionsEnableShortNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFIShareActionMigrationrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFI_dedicated_comment_routable_dialog_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesArmadilloReplyEnabledrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReelsIFUTileContent_reelsIFUPlayOnHoverrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GroupsCometGYSJFeedItemHeightrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider"}],kind:"Operation",name:"CometModernHomeFeedQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:S,concreteType:"NewsFeedConnection",kind:"LinkedField",name:"news_feed",plural:!1,selections:[{if:"RELAY_INCREMENTAL_DELIVERY",kind:"Stream",label:"CometNewsFeed_viewerConnection$stream$CometNewsFeed_viewer_news_feed",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_gap_type_index_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"top_story_cache_score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[R,{kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"debug_info",storageKey:null},L,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"context_actor_hovercard",storageKey:null},L],storageKey:null},L],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_story_civic",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[R,{kind:"InlineFragment",selections:[L,{condition:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider",kind:"Condition",passingValue:!0,selections:[{args:null,documentName:"CometFeedUnit_feedUnit_dubbing",fragmentName:"FBReelsDubbingInfoLink_dubbing",fragmentPropName:"dubbing",kind:"ModuleImport"}]}],type:"Video",abstractKey:null},k,{kind:"InlineFragment",selections:E,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:E,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:E,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:E,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:I,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:I,storageKey:null}]},{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"Story",abstractKey:null},k,{kind:"InlineFragment",selections:E,type:"CommunityTabTrendingPOGFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:E,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:E,type:"GroupsMultiGYSJStoryUnit",abstractKey:null},{kind:"InlineFragment",selections:E,type:"GroupsTabCategoriesUnit",abstractKey:null},{kind:"InlineFragment",selections:E,type:"PagesYouMayLikeFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:E,type:"StoriesTrayFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:E,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{kind:"InlineFragment",selections:[T],type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[T,{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitQuickPromotionStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitGoodwillMemoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GoodwillCometStory",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMKQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedPeopleYouMayKnowFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometReelsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"ShowcaseFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFriendRequestsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"FriendRequestsFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GroupsCometGYSJFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupsYouShouldJoinFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometEndOfFeedUpsellStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"EndOfFeedUpsellFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometGroupRelatedGroupsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupRelatedGroupsFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometStoriesSingleBucketFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"StoriesSingleBucketInlineViewerFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedCustomizedStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"CustomizedStory",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TrackingData",kind:"LinkedField",name:"trackingdata",plural:!1,selections:E,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}],type:"TrackableFeedUnit",abstractKey:"__isTrackableFeedUnit"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"serialized_payloads",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{condition:"shouldUseBRSLabelFieldNameV1",kind:"Condition",passingValue:!0,selections:[{alias:"of_label_new_contet_brrs",args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null}]},{condition:"shouldUseBRSLabelFieldNameV2",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_bru_cntent_lakb",args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!0,selections:[{alias:"cat_sensitive",args:null,concreteType:"FeedCategorySensitive",kind:"LinkedField",name:"category_sensitive",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cat",storageKey:null}],storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"distanc_spvonsored_auceti",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"aucti_ditan_sposored_label",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]}],storageKey:null}]},{if:"RELAY_INCREMENTAL_DELIVERY",kind:"Defer",label:"CometNewsFeed_viewerConnection$defer$CometNewsFeed_viewer_news_feed$page_info",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[R,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:S,filters:["orderby","feed_style","client_session"],handle:"comet_news_feed",key:"CometNewsFeed_viewer_news_feed",kind:"LinkedHandle",name:"news_feed"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[R,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},L],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null},{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null}],storageKey:null}]},params:{id:n("CometModernHomeFeedQuery_facebookRelayOperation"),metadata:{},name:"CometModernHomeFeedQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider:n("GHLShouldChangeSponsoredAuctionDistanceFieldName.relayprovider"),__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider:n("GHLShouldUseSponsoredAuctionLabelFieldNameV1.relayprovider"),__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider:n("GHLShouldUseSponsoredAuctionLabelFieldNameV2.relayprovider"),__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider:n("GHLShouldChangeSponsoredDataFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider:n("GHLShouldChangeAdIdFieldName.relayprovider"),__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider:n("FBReels_enable_view_dubbed_audio_type_gk.relayprovider"),__relay_internal__pv__CometUFICommentAvatarStickerAnimatedImagerelayprovider:n("CometUFICommentAvatarStickerAnimatedImage.relayprovider"),__relay_internal__pv__IsWorkUserrelayprovider:n("IsWorkUser.relayprovider"),__relay_internal__pv__TestPilotShouldIncludeDemoAdUseCaserelayprovider:n("TestPilotShouldIncludeDemoAdUseCase.relayprovider"),__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider:n("FBReels_deprecate_short_form_video_context_gk.relayprovider"),__relay_internal__pv__FeedDeepDiveTopicPillThreadViewEnabledrelayprovider:n("FeedDeepDiveTopicPillThreadViewEnabled.relayprovider"),__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider:n("CometImmersivePhotoCanUserDisable3DMotion.relayprovider"),__relay_internal__pv__WorkCometIsEmployeeGKProviderrelayprovider:n("WorkCometIsEmployeeGKProvider.relayprovider"),__relay_internal__pv__IsMergQAPollsrelayprovider:n("IsMergQAPolls.relayprovider"),__relay_internal__pv__FBReels_enable_meta_ai_label_gkrelayprovider:n("FBReels_enable_meta_ai_label_gk.relayprovider"),__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:n("FBReelsMediaFooter_comet_enable_reels_ads_gk.relayprovider"),__relay_internal__pv__CometUFIReactionsEnableShortNamerelayprovider:n("CometUFIReactionsEnableShortName.relayprovider"),__relay_internal__pv__CometUFIShareActionMigrationrelayprovider:n("CometUFIShareActionMigration.relayprovider"),__relay_internal__pv__CometUFI_dedicated_comment_routable_dialog_gkrelayprovider:n("CometUFI_dedicated_comment_routable_dialog_gk.relayprovider"),__relay_internal__pv__StoriesArmadilloReplyEnabledrelayprovider:n("StoriesArmadilloReplyEnabled.relayprovider"),__relay_internal__pv__FBReelsIFUTileContent_reelsIFUPlayOnHoverrelayprovider:n("FBReelsIFUTileContent_reelsIFUPlayOnHover.relayprovider"),__relay_internal__pv__GroupsCometGYSJFeedItemHeightrelayprovider:n("GroupsCometGYSJFeedItemHeight.relayprovider"),__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider:n("StoriesShouldIncludeFbNotes.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometNewsFeedLoadedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743387"),s=o("FalcoLoggerInternal").create("comet_news_feed_loaded",e),u=s;l.default=u}),98);
__d("CometNewsFeedUnit_feedEdge.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_adv_iden",args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider"},{defaultValue:!1,kind:"LocalArgument",name:"shouldObfuscateCategoryField"}],kind:"Fragment",metadata:null,name:"CometNewsFeedUnit_feedEdge",selections:[{condition:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"distanc_spvonsored_auceti",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"aucti_ditan_sposored_label",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_newsFeedEdge"},{kind:"InlineDataFragmentSpread",name:"CometNewsFeedVPVDStore_newsFeedEdge",selections:[{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"serialized_payloads",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null}],args:null,argumentDefinitions:[]},{args:[{kind:"Variable",name:"shouldObfuscateCategoryField",variableName:"shouldObfuscateCategoryField"}],kind:"FragmentSpread",name:"useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_feedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:e,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:e,storageKey:null}]}],type:"Story",abstractKey:null}],storageKey:null}],type:"NewsFeedEdge",abstractKey:null}})();a.exports=e}),null);
__d("FeedStoryCategory",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5,END_OF_FEED_CONTENT:6,FB_STORIES:7,HIGH_VALUE_PROMOTION:8,FB_STORIES_ENGAGEMENT:9,SHOWCASE:10,FB_SHORTS:11,TRENDING:12,ENGAGEMENT_QP:13,MULTI_FB_STORIES_TRAY:14,END_OF_FEED_REELS:15,FB_SHORTS_FALLBACK:16,FRIENDLY_FEED_MID_CARD:17,FRIENDLY_FEED_PROMOTION:18,INJECTED_STORY:19,LIMITED_PERSONALIZATION_NOTICE:20});i.default=e}),66);
__d("GHLFeedStoryCategoryObfuscationUtils",["CryptoJS","FeedStoryCategory"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(e==null||t==null)return null;var n=r("CryptoJS").SHA256(t),o=n.toString(r("CryptoJS").enc.Hex);for(var a of Object.entries(r("FeedStoryCategory"))){var i=a[0],l=a[1],s=r("CryptoJS").SHA256(o.concat(l)),u=s.toString(r("CryptoJS").enc.Hex);if(u===e)return i}return null}l.getMatchWithFeedStoryCategory=e}),98);
__d("useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"shouldObfuscateCategoryField"}],kind:"Fragment",metadata:null,name:"useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge",selections:[{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!0,selections:[{alias:"cat_sensitive",args:null,concreteType:"FeedCategorySensitive",kind:"LinkedField",name:"category_sensitive",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cat",storageKey:null}],storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useCometFeedUnitEventLogger_feedUnit"},{kind:"InlineFragment",selections:[{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}]}],type:"Story",abstractKey:null}],storageKey:null}],type:"NewsFeedEdge",abstractKey:null};a.exports=e}),null);
__d("useLogCometFeedUnitRenderAttemptEvent",["CometRelay","FBLogger","GHLFeedStoryCategoryObfuscationUtils","react","react-compiler-runtime","useCometFeedUnitEventLogger","useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useRef;function m(t,a,i,l){var s,u=o("react-compiler-runtime").c(18),m=d(!1),p=o("CometRelay").useFragment(e!==void 0?e:e=n("useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql"),t);if(p.node==null)throw r("FBLogger")("comet_feed").mustfixThrow("node cannot be null on edge in useLogCometFeedUnitRenderAttemptEvent");var _=r("useCometFeedUnitEventLogger")(p.node),f=p.cat_sensitive,g=p.deduplication_key,h;if(u[0]!==f||u[1]!==p.category||u[2]!==((s=p.node)==null?void 0:s.post_id)){var y;if(h=null,f){var C,b=f==null?void 0:f.cat,v=f==null?void 0:f.enc;h=b!=null?b:o("GHLFeedStoryCategoryObfuscationUtils").getMatchWithFeedStoryCategory(v,(C=p.node)==null?void 0:C.post_id)}else h=p.category;u[0]=f,u[1]=p.category,u[2]=(y=p.node)==null?void 0:y.post_id,u[3]=h}else h=u[3];var S;u[4]!==h||u[5]!==g||u[6]!==_||u[7]!==l||u[8]!==a||u[9]!==i?(S=function(){m.current||(m.current=!0,g!=null?_({category:h!=null?h:void 0,event:"render_attempt",minGapType:l,position:a,renderLocation:i!=null?i:void 0}):r("FBLogger")("comet_feed").mustfix("deduplication key and node cannot be null in useLogCometFeedUnitRenderAttemptEvent"))},u[4]=h,u[5]=g,u[6]=_,u[7]=l,u[8]=a,u[9]=i,u[10]=S):S=u[10];var R;u[11]!==h||u[12]!==g||u[13]!==_||u[14]!==l||u[15]!==a||u[16]!==i?(R=[h,g,_,a,i,l],u[11]=h,u[12]=g,u[13]=_,u[14]=l,u[15]=a,u[16]=i,u[17]=R):R=u[17],c(S,R)}l.default=m}),98);
__d("CometNewsFeedUnit.react",["CometFeedAdsProductContext","CometFeedUnit.react","CometFeedUnitOnUnsupportedLoggerContext","CometFeedUnitSetStatusContext","CometGHLReactPropsScrambler.react","CometNewsFeedUnit_feedEdge.graphql","CometNewsFeedVPVDStore","CometRelay","FBLogger","GHLMitigationsGating","GHLSharedMitigationsGating","RelayHooks","react","react-compiler-runtime","useLogCometFeedUnitRenderAttemptEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useLayoutEffect,p=c.useMemo;function _(t){var a,i,l,s,c,p,_,f=o("react-compiler-runtime").c(28),g=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("minGapStringType"),h=o("CometRelay").useFragment(e!==void 0?e:e=n("CometNewsFeedUnit_feedEdge.graphql"),t.edge),y=h.node,C=y==null?void 0:y.__typename,b=y==null?void 0:y.post_id,v=t.minGapType,S=t.minGapTypeAlias,R=t.position,L=o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?S:v,E;f[0]!==L||f[1]!==g?(E=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?g:L,f[0]=L,f[1]=g,f[2]=E):E=f[2];var k=E,I=t.variables.renderLocation!=="%future added value"?t.variables.renderLocation:null,T=o("RelayHooks").useRelayEnvironment();r("useLogCometFeedUnitRenderAttemptEvent")(h,R,I,k);var D=d(o("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContext),x=y==null,$,P;f[3]!==x||f[4]!==D?($=function(){x&&(D("error"),r("FBLogger")("CometNewsFeedUnitNull").warn("node should not be null in CometNewsFeedUnit","comet_feed"))},P=[x,D],f[3]=x,f[4]=D,f[5]=$,f[6]=P):($=f[5],P=f[6]),m($,P),y==null||y.sponsored_data,y==null||y.th_dat_spo,h==null||h.sponsored_auction_distance,h==null||h.aucti_ditan_sposored_label,h==null||h.distanc_spvonsored_auceti;var N,M=(a=(i=(l=y==null?void 0:y.sponsored_data)!=null?l:y==null?void 0:y.th_dat_spo)==null?void 0:i.ad_id)!=null?a:(s=(c=y==null?void 0:y.sponsored_data)!=null?c:y==null?void 0:y.th_dat_spo)==null?void 0:s.lbl_adv_iden,w=(p=(_=h==null?void 0:h.sponsored_auction_distance)!=null?_:h==null?void 0:h.aucti_ditan_sposored_label)!=null?p:h.distanc_spvonsored_auceti,A=k!=null?k:"UNKNOWN",F;f[7]!==M||f[8]!==w||f[9]!==A?(F={adId:M,minGapRule:w,minGapType:A},f[7]=M,f[8]=w,f[9]=A,f[10]=F):F=f[10],N=F;var O=N;if(y==null)return null;var B="FeedPost-"+String(b),W;f[11]!==O||f[12]!==h||f[13]!==y||f[14]!==R||f[15]!==b||f[16]!==t.variables||f[17]!==I||f[18]!==C||f[19]!==k?(W=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?u.jsx(o("CometFeedUnitOnUnsupportedLoggerContext").CometFeedUnitOnUnsupportedLoggerContextProvider,{position:R,postID:b,renderLocation:I,unitName:C,children:u.jsx(r("CometFeedAdsProductContext").Provider,{value:O,children:u.jsx(r("CometFeedUnit.react"),{feedUnit:y,newsFeedEdge:h,position:R,variables:t.variables})})}):u.jsx(o("CometFeedUnitOnUnsupportedLoggerContext").CometFeedUnitOnUnsupportedLoggerContextProvider,babelHelpers.extends({},o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?{minGapTypeAlias:k}:{minGapType:k},{position:R,postID:b,renderLocation:I,unitName:C,children:u.jsx(r("CometFeedAdsProductContext").Provider,{value:O,children:u.jsx(r("CometFeedUnit.react"),babelHelpers.extends({feedUnit:y},o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?{minGapTypeAlias:k}:{minGapType:k},{newsFeedEdge:h,position:R,variables:t.variables}))})})),f[11]=O,f[12]=h,f[13]=y,f[14]=R,f[15]=b,f[16]=t.variables,f[17]=I,f[18]=C,f[19]=k,f[20]=W):W=f[20];var q;f[21]!==h||f[22]!==T||f[23]!==W?(q=u.jsx(o("CometNewsFeedVPVDStore").LoggerProvider,{environment:T,newsFeedEdge:h,children:W}),f[21]=h,f[22]=T,f[23]=W,f[24]=q):q=f[24];var U;return f[25]!==q||f[26]!==B?(U=u.jsx("div",{className:o("GHLMitigationsGating").getIsGHLExtraElementsForFeedEnabled?"":void 0,"data-testid":void 0,children:q}),f[25]=q,f[26]=B,f[27]=U):U=f[27],U}var f=u.memo(_);l.default=f}),98);
__d("CometNewsFeed_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometNewsFeed_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null},{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometNewsFeedPaginationQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25126369493721494"}),null);
__d("CometNewsFeedPaginationQuery.graphql",["CometNewsFeedPaginationQuery_facebookRelayOperation","GHLShouldChangeSponsoredAuctionDistanceFieldName.relayprovider","GHLShouldChangeSponsoredDataFieldName.relayprovider","GHLShouldUseSponsoredAuctionLabelFieldNameV1.relayprovider","GHLShouldUseSponsoredAuctionLabelFieldNameV2.relayprovider","GHLShouldChangeSponsoredAuctionDistanceFieldName.relayprovider","GHLShouldUseSponsoredAuctionLabelFieldNameV1.relayprovider","GHLShouldUseSponsoredAuctionLabelFieldNameV2.relayprovider","GHLShouldChangeSponsoredDataFieldName.relayprovider","GHLShouldChangeAdIdFieldName.relayprovider","FBReels_enable_view_dubbed_audio_type_gk.relayprovider","CometUFICommentAvatarStickerAnimatedImage.relayprovider","IsWorkUser.relayprovider","TestPilotShouldIncludeDemoAdUseCase.relayprovider","FBReels_deprecate_short_form_video_context_gk.relayprovider","FeedDeepDiveTopicPillThreadViewEnabled.relayprovider","CometImmersivePhotoCanUserDisable3DMotion.relayprovider","WorkCometIsEmployeeGKProvider.relayprovider","IsMergQAPolls.relayprovider","FBReels_enable_meta_ai_label_gk.relayprovider","FBReelsMediaFooter_comet_enable_reels_ads_gk.relayprovider","CometUFIReactionsEnableShortName.relayprovider","CometUFIShareActionMigration.relayprovider","CometUFI_dedicated_comment_routable_dialog_gk.relayprovider","StoriesArmadilloReplyEnabled.relayprovider","FBReelsIFUTileContent_reelsIFUPlayOnHover.relayprovider","GroupsCometGYSJFeedItemHeight.relayprovider","StoriesShouldIncludeFbNotes.relayprovider"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"RELAY_INCREMENTAL_DELIVERY"},t={defaultValue:null,kind:"LocalArgument",name:"clientQueryId"},r={defaultValue:null,kind:"LocalArgument",name:"clientSession"},o={defaultValue:null,kind:"LocalArgument",name:"connectionClass"},a={defaultValue:2,kind:"LocalArgument",name:"count"},i={defaultValue:null,kind:"LocalArgument",name:"cursor"},l={defaultValue:null,kind:"LocalArgument",name:"experimentalValues"},s={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},u={defaultValue:null,kind:"LocalArgument",name:"feedStyle"},c={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},d={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},m={defaultValue:null,kind:"LocalArgument",name:"orderby"},p={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},_={defaultValue:null,kind:"LocalArgument",name:"recentVPVs"},f={defaultValue:null,kind:"LocalArgument",name:"refreshMode"},g={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},h={defaultValue:null,kind:"LocalArgument",name:"scale"},y={defaultValue:!1,kind:"LocalArgument",name:"shouldChangeBRSLabelFieldName"},C={defaultValue:null,kind:"LocalArgument",name:"shouldChangeSponsoredAuctionDistanceFieldName"},b={defaultValue:null,kind:"LocalArgument",name:"shouldChangeSponsoredDataFieldName"},v={defaultValue:!1,kind:"LocalArgument",name:"shouldObfuscateCategoryField"},S={defaultValue:!1,kind:"LocalArgument",name:"shouldUseBRSLabelFieldNameV1"},R={defaultValue:!1,kind:"LocalArgument",name:"shouldUseBRSLabelFieldNameV2"},L={defaultValue:null,kind:"LocalArgument",name:"shouldUseSponsoredAuctionLabelFieldNameV1"},E={defaultValue:null,kind:"LocalArgument",name:"shouldUseSponsoredAuctionLabelFieldNameV2"},k={defaultValue:null,kind:"LocalArgument",name:"useDefaultActor"},I=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"client_query_id",variableName:"clientQueryId"},{kind:"Variable",name:"client_session",variableName:"clientSession"},{kind:"Variable",name:"connection_class",variableName:"connectionClass"},{kind:"Literal",name:"environment",value:"DESKTOP"},{kind:"Variable",name:"experimental_values",variableName:"experimentalValues"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"first",variableName:"count"},{kind:"Literal",name:"is_setting_suitable_for_autoplay",value:!0},{kind:"Variable",name:"orderby",variableName:"orderby"},{kind:"Variable",name:"recent_vpvs_v2",variableName:"recentVPVs"},{kind:"Variable",name:"refresh_mode",variableName:"refreshMode"},{kind:"Literal",name:"site",value:"comet"}],T={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},x=[D],$={kind:"InlineFragment",selections:x,type:"Node",abstractKey:"__isNode"},P=[{alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null},T,{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_adv_iden",args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"post_rendering_loggers",storageKey:null}],N={alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:x,storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k],kind:"Fragment",metadata:null,name:"CometNewsFeedPaginationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[{kind:"Variable",name:"clientQueryId",variableName:"clientQueryId"},{kind:"Variable",name:"clientSession",variableName:"clientSession"},{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"},{kind:"Variable",name:"refreshMode",variableName:"refreshMode"},{kind:"Variable",name:"shouldChangeBRSLabelFieldName",variableName:"shouldChangeBRSLabelFieldName"},{kind:"Variable",name:"shouldObfuscateCategoryField",variableName:"shouldObfuscateCategoryField"},{kind:"Variable",name:"shouldUseBRSLabelFieldNameV1",variableName:"shouldUseBRSLabelFieldNameV1"},{kind:"Variable",name:"shouldUseBRSLabelFieldNameV2",variableName:"shouldUseBRSLabelFieldNameV2"}],kind:"FragmentSpread",name:"CometNewsFeed_viewerConnection"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,r,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFICommentAvatarStickerAnimatedImagerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsWorkUserrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__TestPilotShouldIncludeDemoAdUseCaserelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FeedDeepDiveTopicPillThreadViewEnabledrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__WorkCometIsEmployeeGKProviderrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsMergQAPollsrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_enable_meta_ai_label_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFIReactionsEnableShortNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFIShareActionMigrationrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__CometUFI_dedicated_comment_routable_dialog_gkrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesArmadilloReplyEnabledrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReelsIFUTileContent_reelsIFUPlayOnHoverrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GroupsCometGYSJFeedItemHeightrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider"}],kind:"Operation",name:"CometNewsFeedPaginationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:I,concreteType:"NewsFeedConnection",kind:"LinkedField",name:"news_feed",plural:!1,selections:[{if:"RELAY_INCREMENTAL_DELIVERY",kind:"Stream",label:"CometNewsFeed_viewerConnection$stream$CometNewsFeed_viewer_news_feed",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_gap_type_index_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"top_story_cache_score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[T,{kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"debug_info",storageKey:null},D,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"context_actor_hovercard",storageKey:null},D],storageKey:null},D],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_story_civic",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[T,{kind:"InlineFragment",selections:[D,{condition:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider",kind:"Condition",passingValue:!0,selections:[{args:null,documentName:"CometFeedUnit_feedUnit_dubbing",fragmentName:"FBReelsDubbingInfoLink_dubbing",fragmentPropName:"dubbing",kind:"ModuleImport"}]}],type:"Video",abstractKey:null},$,{kind:"InlineFragment",selections:x,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:x,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:x,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:x,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:P,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:P,storageKey:null}]},{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"Story",abstractKey:null},$,{kind:"InlineFragment",selections:x,type:"CommunityTabTrendingPOGFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:x,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:x,type:"GroupsMultiGYSJStoryUnit",abstractKey:null},{kind:"InlineFragment",selections:x,type:"GroupsTabCategoriesUnit",abstractKey:null},{kind:"InlineFragment",selections:x,type:"PagesYouMayLikeFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:x,type:"StoriesTrayFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:x,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{kind:"InlineFragment",selections:[N],type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[N,{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitQuickPromotionStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitGoodwillMemoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GoodwillCometStory",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMKQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedPeopleYouMayKnowFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometReelsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"ShowcaseFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFriendRequestsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"FriendRequestsFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GroupsCometGYSJFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupsYouShouldJoinFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometEndOfFeedUpsellStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"EndOfFeedUpsellFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometGroupRelatedGroupsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupRelatedGroupsFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometStoriesSingleBucketFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"StoriesSingleBucketInlineViewerFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedCustomizedStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"CustomizedStory",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TrackingData",kind:"LinkedField",name:"trackingdata",plural:!1,selections:x,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}],type:"TrackableFeedUnit",abstractKey:"__isTrackableFeedUnit"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"serialized_payloads",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{condition:"shouldUseBRSLabelFieldNameV1",kind:"Condition",passingValue:!0,selections:[{alias:"of_label_new_contet_brrs",args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null}]},{condition:"shouldUseBRSLabelFieldNameV2",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_bru_cntent_lakb",args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!0,selections:[{alias:"cat_sensitive",args:null,concreteType:"FeedCategorySensitive",kind:"LinkedField",name:"category_sensitive",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cat",storageKey:null}],storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"distanc_spvonsored_auceti",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"aucti_ditan_sposored_label",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]}],storageKey:null}]},{if:"RELAY_INCREMENTAL_DELIVERY",kind:"Defer",label:"CometNewsFeed_viewerConnection$defer$CometNewsFeed_viewer_news_feed$page_info",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[T,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:I,filters:["orderby","feed_style","client_session"],handle:"comet_news_feed",key:"CometNewsFeed_viewer_news_feed",kind:"LinkedHandle",name:"news_feed"}],storageKey:null}]},params:{id:n("CometNewsFeedPaginationQuery_facebookRelayOperation"),metadata:{},name:"CometNewsFeedPaginationQuery",operationKind:"query",text:null,providedVariables:{shouldChangeSponsoredAuctionDistanceFieldName:n("GHLShouldChangeSponsoredAuctionDistanceFieldName.relayprovider"),shouldChangeSponsoredDataFieldName:n("GHLShouldChangeSponsoredDataFieldName.relayprovider"),shouldUseSponsoredAuctionLabelFieldNameV1:n("GHLShouldUseSponsoredAuctionLabelFieldNameV1.relayprovider"),shouldUseSponsoredAuctionLabelFieldNameV2:n("GHLShouldUseSponsoredAuctionLabelFieldNameV2.relayprovider"),__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider:n("GHLShouldChangeSponsoredAuctionDistanceFieldName.relayprovider"),__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider:n("GHLShouldUseSponsoredAuctionLabelFieldNameV1.relayprovider"),__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider:n("GHLShouldUseSponsoredAuctionLabelFieldNameV2.relayprovider"),__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider:n("GHLShouldChangeSponsoredDataFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider:n("GHLShouldChangeAdIdFieldName.relayprovider"),__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider:n("FBReels_enable_view_dubbed_audio_type_gk.relayprovider"),__relay_internal__pv__CometUFICommentAvatarStickerAnimatedImagerelayprovider:n("CometUFICommentAvatarStickerAnimatedImage.relayprovider"),__relay_internal__pv__IsWorkUserrelayprovider:n("IsWorkUser.relayprovider"),__relay_internal__pv__TestPilotShouldIncludeDemoAdUseCaserelayprovider:n("TestPilotShouldIncludeDemoAdUseCase.relayprovider"),__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider:n("FBReels_deprecate_short_form_video_context_gk.relayprovider"),__relay_internal__pv__FeedDeepDiveTopicPillThreadViewEnabledrelayprovider:n("FeedDeepDiveTopicPillThreadViewEnabled.relayprovider"),__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider:n("CometImmersivePhotoCanUserDisable3DMotion.relayprovider"),__relay_internal__pv__WorkCometIsEmployeeGKProviderrelayprovider:n("WorkCometIsEmployeeGKProvider.relayprovider"),__relay_internal__pv__IsMergQAPollsrelayprovider:n("IsMergQAPolls.relayprovider"),__relay_internal__pv__FBReels_enable_meta_ai_label_gkrelayprovider:n("FBReels_enable_meta_ai_label_gk.relayprovider"),__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:n("FBReelsMediaFooter_comet_enable_reels_ads_gk.relayprovider"),__relay_internal__pv__CometUFIReactionsEnableShortNamerelayprovider:n("CometUFIReactionsEnableShortName.relayprovider"),__relay_internal__pv__CometUFIShareActionMigrationrelayprovider:n("CometUFIShareActionMigration.relayprovider"),__relay_internal__pv__CometUFI_dedicated_comment_routable_dialog_gkrelayprovider:n("CometUFI_dedicated_comment_routable_dialog_gk.relayprovider"),__relay_internal__pv__StoriesArmadilloReplyEnabledrelayprovider:n("StoriesArmadilloReplyEnabled.relayprovider"),__relay_internal__pv__FBReelsIFUTileContent_reelsIFUPlayOnHoverrelayprovider:n("FBReelsIFUTileContent_reelsIFUPlayOnHover.relayprovider"),__relay_internal__pv__GroupsCometGYSJFeedItemHeightrelayprovider:n("GroupsCometGYSJFeedItemHeight.relayprovider"),__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider:n("StoriesShouldIncludeFbNotes.relayprovider")}}}})();a.exports=e}),null);
__d("CometNewsFeed_viewerConnection.graphql",["CometNewsFeedPaginationQuery.graphql"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider"},t=["news_feed"],r={alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null},a=[o,{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l=[o];return{argumentDefinitions:[{kind:"RootArgument",name:"RELAY_INCREMENTAL_DELIVERY"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider"},e,{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider"},{defaultValue:null,kind:"LocalArgument",name:"clientQueryId"},{defaultValue:null,kind:"LocalArgument",name:"clientSession"},{kind:"RootArgument",name:"connectionClass"},{defaultValue:2,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{kind:"RootArgument",name:"experimentalValues"},{kind:"RootArgument",name:"feedLocation"},{kind:"RootArgument",name:"feedStyle"},{kind:"RootArgument",name:"feedbackSource"},{kind:"RootArgument",name:"focusCommentID"},{kind:"RootArgument",name:"orderby"},{kind:"RootArgument",name:"privacySelectorRenderLocation"},{kind:"RootArgument",name:"recentVPVs"},{defaultValue:null,kind:"LocalArgument",name:"refreshMode"},{kind:"RootArgument",name:"renderLocation"},{kind:"RootArgument",name:"scale"},{defaultValue:!1,kind:"LocalArgument",name:"shouldChangeBRSLabelFieldName"},{defaultValue:!1,kind:"LocalArgument",name:"shouldObfuscateCategoryField"},{defaultValue:!1,kind:"LocalArgument",name:"shouldUseBRSLabelFieldNameV1"},{defaultValue:!1,kind:"LocalArgument",name:"shouldUseBRSLabelFieldNameV2"},{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:t,stream:!0}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:t},fragmentPathInResult:["viewer"],operation:n("CometNewsFeedPaginationQuery.graphql")}},name:"CometNewsFeed_viewerConnection",selections:[{alias:"news_feed",args:[{kind:"Variable",name:"client_session",variableName:"clientSession"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"orderby",variableName:"orderby"}],concreteType:"NewsFeedConnection",kind:"LinkedField",name:"__CometNewsFeed_viewer_news_feed_comet_news_feed",plural:!1,selections:[{kind:"Stream",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{condition:"shouldChangeBRSLabelFieldName",kind:"Condition",passingValue:!1,selections:[r]},{condition:"shouldUseBRSLabelFieldNameV1",kind:"Condition",passingValue:!0,selections:[{alias:"of_label_new_contet_brrs",args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null}]},{condition:"shouldUseBRSLabelFieldNameV2",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_bru_cntent_lakb",args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}]},{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!0,selections:[{alias:"cat_sensitive",args:null,concreteType:"FeedCategorySensitive",kind:"LinkedField",name:"category_sensitive",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cat",storageKey:null}],storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_gap_type_index_string",storageKey:null},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredAuctionDistanceFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV1relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"distanc_spvonsored_auceti",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldUseSponsoredAuctionLabelFieldNameV2relayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"aucti_ditan_sposored_label",args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"top_story_cache_score",storageKey:null},{kind:"InlineDataFragmentSpread",name:"useCometFeedUnitReordering_newsFeedEdge",selections:[r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:a,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:a,storageKey:null}]}],type:"Story",abstractKey:null}],storageKey:null}],args:null,argumentDefinitions:[e]},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,{args:null,kind:"FragmentSpread",name:"CometFeedUnitErrorBoundary_feedUnit"},{kind:"InlineFragment",selections:[{condition:"shouldObfuscateCategoryField",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:l,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:l,storageKey:null}]}],type:"Story",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null}],storageKey:null},{args:[{kind:"Variable",name:"shouldObfuscateCategoryField",variableName:"shouldObfuscateCategoryField"}],kind:"FragmentSpread",name:"CometNewsFeedUnit_feedEdge"},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{kind:"Defer",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null}],type:"Viewer",abstractKey:null}})();a.exports=e}),null);
__d("CometNewsfeedOrderingDebuggingState",[],(function(t,n,r,o,a,i){"use strict";var e={hasInjectedStories:null,order:null,reorderingEnabled:null};function l(){return e}function s(t){e.order=t}function u(t){e.hasInjectedStories=t}function c(t){e.reorderingEnabled=t}i.dump=l,i.setFeedUnitOrderingState=s,i.setHasInjectedStories=u,i.setReorderingEnabled=c}),66);
__d("GHLExtraElementWrapper",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.children,n=e.elementTag,r=e.n,o=t;if(n==="span")for(var a=0;a<r;a++)o=s.jsx("span",{children:o},a);else for(var i=0;i<r;i++)o=s.jsx("div",{children:o},i);return o}l.default=u}),98);
__d("useCometFeedIneligibleUnitLogger",["CometAdsProductLogger","CometFeedUnitsTypedLoggerLite","CometValidFeedUnitOrdering","MinGapType","MinGapTypeUtils.facebook","react","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useMemo,p=c.useRef;function _(t,n){var a=(e||(e=r("useUnsafeRef_DEPRECATED")))({}),i=m(function(){return t.map(function(e){if(e!=null&&e.deduplication_key!=null){var t,n,o;return{key:e.deduplication_key,minGapType:(t=(s||(s=r("MinGapType"))).cast(parseInt(e.min_gap_type_index_string,10)))!=null?t:0,status:"received",typename:(n=e==null||(o=e.node)==null?void 0:o.__typename)!=null?n:null}}return null}).filter(Boolean)},[t]),l=i.reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t.key]=t,n))},{}),u=i.map(function(e){return{category:e.category,key:e.key,minGapType:e.minGapType,status:"rendered"}}),c=0;u.some(function(e,t){if(a.current[e.key]==null)return c=t,!0});var _=o("CometValidFeedUnitOrdering").getFeedUnitOrderViolations(u,c),f=p({}),g=p({});d(function(){var e={};if(i.forEach(function(t,a){if(e[t.key]!=null){var i;if(e[t.key]+=1,e[t.key]>((i=f.current[t.key])!=null?i:0)){var l;r("CometFeedUnitsTypedLoggerLite").log({event:"ineligible_for_position",ineligible_reason:"duplicate",min_gap_type:(l=o("MinGapTypeUtils.facebook").fromJSEnum(t.minGapType))!=null?l:"UNKNOWN",position:a,render_location:n,unit_name:t.typename})}}else e[t.key]=1}),f.current=e,i.length>0){var t=i[0];if((t.category==="SPONSORED"||t.minGapType===5)&&g.current[t.key]==null){var a,l;o("CometAdsProductLogger").logCometFeedHighestPositionAd({minGapRule:(a=t.edgeData)==null?void 0:a.sponsoredAuctionDistance,minGapType:(l=o("MinGapTypeUtils.facebook").fromJSEnum(t.minGapType))!=null?l:"UNKNOWN"}),g.current[t.key]=!0}}},void 0),d(function(){_.forEach(function(e){if(a.current[e.violationUnitKey]==null){var t,i,s,u=e.violationPosition,c=e.violationUnitKey,d=e.violationUnitMinGapType;r("CometFeedUnitsTypedLoggerLite").log({event:"ineligible_for_position",ineligible_reason:"gap_rule_violation",min_gap_type:(t=o("MinGapTypeUtils.facebook").fromJSEnum(d))!=null?t:"UNKNOWN",position:u,render_location:n,unit_name:(i=(s=l[c])==null?void 0:s.typename)!=null?i:null})}}),u.forEach(function(e){a.current[e.key]=!0})},void 0)}l.default=_}),98);
__d("FeedRequestWaterfallTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:FeedRequestWaterfallLoggerConfig")}),null);
__d("useCometFeedRequestWaterfallLogger",["FeedRequestWaterfallTypedLoggerLite","react","react-compiler-runtime","usePrevious","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=function(t){return t===!0};function p(e,t,n){var a=o("react-compiler-runtime").c(16),i=d(null),l=r("usePrevious")(e),s,u;a[0]!==e||a[1]!==n||a[2]!==l?(s=function(){if(m(n)&&l!==e&&i.current!=null){var t=l!=null?e.filter(function(e){return!l.find(function(t){return t===e})}):e,o=t.reduce(_,{});Object.keys(o).forEach(function(e){r("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:i.current,event:"client_received_response",is_employee:n,number_of_stories:o[e],query_id:e})})}},u=[e,n,l],a[0]=e,a[1]=n,a[2]=l,a[3]=s,a[4]=u):(s=a[3],u=a[4]),c(s,u);var p=d(0),f=t.length,g,h;a[5]!==n||a[6]!==f?(g=function(){m(n)&&i.current!=null&&(r("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:i.current,event:"client_rendered_success",is_employee:n,number_of_stories:f-p.current}),p.current=f)},h=[f,n],a[5]=n,a[6]=f,a[7]=g,a[8]=h):(g=a[7],h=a[8]),c(g,h);var y;a[9]!==n?(y=function(){var e=r("uuidv4")();return m(n)&&(r("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e,event:"client_sent_request",is_employee:n}),i.current=e),e},a[9]=n,a[10]=y):y=a[10];var C=y,b;a[11]!==n?(b=function(t){m(n)&&r("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:i.current,event:"client_failed_to_receive_response",failure_reason:t.message,is_employee:n,number_of_stories:p.current})},a[11]=n,a[12]=b):b=a[12];var v=b,S;return a[13]!==v||a[14]!==C?(S=[C,v],a[13]=v,a[14]=C,a[15]=S):S=a[15],S}function _(e,t){var n,r=(n=t.feed_backend_data)==null?void 0:n.qid;return r==null||(e[r]==null?e[r]=1:e[r]=e[r]+1),e}l.default=p}),98);
__d("getCometFeedUnitOrderingDebuggingTable",["CometFeedUnitOrderingDebugInfo","MinGapTypeUtils.facebook"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return{ReceivedPositions:"["+e.receivedPositions.toString()+"]"+(e.renderedPosition!==e.receivedPositions[0]?" reordered":""),MinGapType:(t=o("MinGapTypeUtils.facebook").fromJSEnum(e.minGapType))!=null?t:"UNKNOWN",Key:e.key,Status:e.status+(e.renderedPosition==null?" (deferred)":"")}}function s(t,n){var r=o("CometFeedUnitOrderingDebugInfo").getCometFeedUnitOrderingDebugInfo(t,n),a=r.feedUnitsToRender.map(e),i=r.feedUnitsDeferred.map(e);return{feedUnitsDeferred:i,feedUnitsToRender:a}}l.default=s}),98);
__d("debugCometFeedUnitOrdering",["getCometFeedUnitOrderingDebuggingTable"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("getCometFeedUnitOrderingDebuggingTable")(e,t),o=n.feedUnitsDeferred,a=n.feedUnitsToRender,i=console.table!=null?console.table:console.log;console.group("Feed Unit Order"),i(Array.from(a)),o.length>0&&i(Array.from(o)),console.groupEnd()}l.default=e}),98);
__d("useCometFeedGapRuleViolationLogger",["CometFeedUnitOrderingDebugInfo","CometFeedUnitStatusTrackingUtils","CometValidFeedUnitOrdering","MinGapTypeUtils.facebook","react","react-compiler-runtime","requireDeferred","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c=r("requireDeferred")("CometFeedGapRuleViolationTypedLoggerLite").__setRef("useCometFeedGapRuleViolationLogger"),d=6,m=3;function p(t,n,a){var i=o("react-compiler-runtime").c(10),l;i[0]===Symbol.for("react.memo_cache_sentinel")?(l={},i[0]=l):l=i[0];var s=(e||(e=r("useUnsafeRef_DEPRECATED")))(l),p;if(i[1]!==s||i[2]!==t){var g=0;t.some(function(e,t){if(o("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible(e)&&s.current[e.key]==null)return g=t,!0}),p=o("CometValidFeedUnitOrdering").getFeedUnitOrderViolations(t,g),i[1]=s,i[2]=t,i[3]=p}else p=i[3];var h=p,y;i[4]!==s||i[5]!==a||i[6]!==n||i[7]!==t||i[8]!==h?(y=function(){h.forEach(function(e){if(t[e.violationPosition]!=null&&s.current[t[e.violationPosition].key]==null){var r=e.conflictPosition,i=e.conflictUnitMinGapType,l=e.violationPosition,u=e.violationType,p=e.violationUnitMinGapType,g=r!=null?r:0,h=a?o("CometFeedUnitOrderingDebugInfo").getCometFeedUnitOrderingDebugInfoString(t,n,!0,g-d,l+1+m):null,y=t.slice(0,l+1).filter(f).length,C=t.slice(g+1,l).filter(_).length;c.onReady(function(e){e.log({conflict_position:r,conflict_unit_category:o("MinGapTypeUtils.facebook").fromJSEnum(i),debug_info:h,errored_in_gap_count:C,errored_total_count:y,reordering_enabled:a,violation_cause:"unknown",violation_position:l,violation_type:u,violation_unit_category:o("MinGapTypeUtils.facebook").fromJSEnum(p)})})}}),t.filter(o("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible).forEach(function(e){s.current[e.key]=!0})},i[4]=s,i[5]=a,i[6]=n,i[7]=t,i[8]=h,i[9]=y):y=i[9],u(y,void 0)}function _(e){return e.status==="error"}function f(e){return e.status==="error"}l.default=p}),98);
__d("useCometFeedUnitReordering_newsFeedEdge.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"useCometFeedUnitReordering_newsFeedEdge"};a.exports=e}),null);
__d("useCometFeedUnitStatusTracking",["CometFeedUnitStatusTrackingUtils","react","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef,m=["received","positioned","rendered","error"];function p(e,t){var n=t.map(function(t){if(e[t]!=null){var n,r;return{category:(n=e[t].category)!=null?n:"UNKNOWN",edgeData:e[t].edgeData,key:t,minGapType:(r=e[t].minGapType)!=null?r:0,status:e[t].status}}return null}).filter(Boolean);return o("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithRenderingOutOfOrderFixed(n)}function _(t,n){var o=(e||(e=r("useUnsafeRef_DEPRECATED")))({}),a=e([]),i=d({}),l=e(0),s=l.current,u=c(function(){if(t!=null){var e=p(o.current,a.current);t(e)}},[t]),_=c(function(){return p(o.current,a.current)},[]),f=c(function(){o.current={},a.current=[],i.current={},l.current+=1},[]),g=c(function(e){var t=a.current.length===e.length&&a.current.every(function(t,n){return t===e[n]});t||(a.current.filter(function(t){return e.indexOf(t)===-1}).forEach(function(e){delete o.current[e]}),a.current=e,u())},[u]),h=c(function(e,t){var r=o.current[e];if(r==null){o.current[e]=t,u();return}var a=m[Math.max(m.indexOf(t.status),m.indexOf(r.status))],l={category:t.category,edgeData:t.edgeData,minGapType:t.minGapType,status:a};l.minGapType===r.minGapType&&l.status===r.status||(l.status==="error"&&i.current[e]===void 0&&(n!=null&&n(e,r.status==="rendered"),i.current[e]=!0),o.current[e]=l,u())},[n,u,s]),y=p(o.current,a.current);return[y,g,h,f,_]}l.default=_}),98);
__d("useCometFeedUnitReordering",["CometFeedUnitStatusTrackingUtils","CometNewsfeedOrderingDebuggingState","CometRelay","CometValidFeedUnitOrdering","FBLogger","InteractionTracing","MinGapType","MinGapTypeUtils.facebook","debugCometFeedUnitOrdering","emptyFunction","getCometFeedUnitOrderingDebuggingTable","gkx","react","react-compiler-runtime","useCometFeedGapRuleViolationLogger","useCometFeedUnitReordering_newsFeedEdge.graphql","useCometFeedUnitStatusTracking","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useCallback,m=c.useEffect,p=c.useRef,_=c.useState;function f(e,t,n){t===void 0&&(t="CometFeedRenderingOrderError"),n===void 0&&(n="Feed unit effects called out of order");var a=null,i=null;if(e.forEach(function(e,t){e.status==="rendered"&&(a=t),e.status==="received"&&i===null&&(i=t)}),a!=null&&i!=null&&i<a&&i!==0){var l=e.map(function(e,t){return babelHelpers.extends({},e,{position:t})}).slice(Math.max(0,i-2),a+2).map(function(e){var t;return String(e.position).padStart(2)+": "+e.status+" | "+(e.minGapType!=null&&(t=o("MinGapTypeUtils.facebook").fromJSEnum(e.minGapType))!=null?t:"")+" | "+e.key}).join("\n");r("FBLogger")(t).warn("%s in positions %s-%s.\n%s",n,i,a,l)}}function g(t,a,i,l,u,c){var d,g=o("react-compiler-runtime").c(47),R=u===void 0?S:u,L=_(0),E=L[1],k;g[0]===Symbol.for("react.memo_cache_sentinel")?(k={},g[0]=k):k=g[0];var I=p(k),T;g[1]===Symbol.for("react.memo_cache_sentinel")?(T=function(t,n){E(v),n&&(I.current[t]=!0)},g[1]=T):T=g[1];var D=T,x,$;g[2]!==a?(x=function(){o("CometNewsfeedOrderingDebuggingState").setReorderingEnabled(a)},$=[a],g[2]=a,g[3]=x,g[4]=$):(x=g[3],$=g[4]),m(x,$);var P=r("useCometFeedUnitStatusTracking")(r("emptyFunction"),D),N=P[0],M=P[1],w=P[2],A=P[3],F=P[4],O=r("gkx")("22809"),B,W,q;if(g[5]!==l||g[6]!==t){var U;g[10]!==l?(U=function(a,i){var t,u,c,d,m,p,_;if(a==null)return r("FBLogger")("comet_feed").mustfix("edge should not be nullish in useCometFeedUnitReordering"),null;if(a.node==null)return null;if(a.min_gap_type_index_string==null)return r("FBLogger")("comet_feed").mustfix("min gap type should not be nullish in useCometFeedUnitReordering"),null;if(a.deduplication_key==null)return r("FBLogger")("comet_feed").mustfix("deduplication_key should not be nullish in useCometFeedUnitReordering"),null;var f={category:(t=a.category)!=null?t:"UNKNOWN",key:a.deduplication_key,minGapType:(u=(s||(s=r("MinGapType"))).cast(parseInt(a.min_gap_type_index_string,10)))!=null?u:0},g=o("CometRelay").readInlineData(e!==void 0?e:e=n("useCometFeedUnitReordering_newsFeedEdge.graphql"),l==null?void 0:l[i]),h=(c=g==null||(d=g.node)==null?void 0:d.sponsored_data)!=null?c:g==null||(m=g.node)==null?void 0:m.th_dat_spo;return O?f:babelHelpers.extends({},f,{edgeData:{brsContentLabel:g==null?void 0:g.brs_content_label,brsFilterSetting:h==null?void 0:h.brs_filter_setting,clientToken:h==null?void 0:h.client_token,sponsoredAuctionDistance:(p=(_=a.sponsored_auction_distance)!=null?_:a.aucti_ditan_sposored_label)!=null?p:a.distanc_spvonsored_auceti}})},g[10]=l,g[11]=U):U=g[11],q=t.map(U).filter(Boolean),B=r("usePrevious"),W=q.map(b),g[5]=l,g[6]=t,g[7]=B,g[8]=W,g[9]=q}else B=g[7],W=g[8],q=g[9];var V=B(W);r("useCometFeedGapRuleViolationLogger")(N,q,a);var H;g[12]!==a||g[13]!==N||g[14]!==V||g[15]!==q?(H=a?o("CometValidFeedUnitOrdering").getValidFeedUnitOrdering(N,q,V!=null?V:[]):q.map(C),g[12]=a,g[13]=N,g[14]=V,g[15]=q,g[16]=H):H=g[16];var G=H,z;g[17]!==M||g[18]!==w||g[19]!==G?(z=function(){var e=G.map(y);M(e),o("CometFeedUnitStatusTrackingUtils").getUncommittedFeedUnits(G).forEach(function(e){var t;return w(e.key,{category:(t=e.category)!=null?t:"UNKNOWN",edgeData:e.edgeData,minGapType:e.minGapType,status:e.status})})},g[17]=M,g[18]=w,g[19]=G,g[20]=z):z=g[20],m(z,void 0);var j;if(g[21]!==a||g[22]!==t||g[23]!==R||g[24]!==i||g[25]!==G){var K;g[27]!==R?(K=function(t,n){var e,r=n.deduplication_key;return r==null||t[r]!=null||R(r)?t:babelHelpers.extends({},t,(e={},e[r]=n,e))},g[27]=R,g[28]=K):K=g[28];var Q=t.filter(Boolean).reduce(K,{}),X=i&&a?G.filter(o("CometFeedUnitStatusTrackingUtils").isPossiblyVisible):G;j=a?X.map(function(e){return Q[e.key]}).filter(Boolean):t.filter(Boolean),g[21]=a,g[22]=t,g[23]=R,g[24]=i,g[25]=G,g[26]=j}else j=g[26];var Y=j,J=p(!1),Z;if(g[29]!==a||g[30]!==((d=t[0])==null?void 0:d.deduplication_key)||g[31]!==q||g[32]!==G){var ee;Z=function(){var e,n=(e=t[0])==null?void 0:e.deduplication_key;if(a&&!J.current&&n!=null&&q!=null&&G!=null){var i=o("CometValidFeedUnitOrdering").getFeedUnitReorderInfo(q,G);i[n]!=null&&r("InteractionTracing").getPendingInteractions().forEach(h),J.current=!0}},g[29]=a,g[30]=(ee=t[0])==null?void 0:ee.deduplication_key,g[31]=q,g[32]=G,g[33]=Z}else Z=g[33];m(Z,void 0);var te,ne;g[34]!==a?(te=function(){},ne=[a],g[34]=a,g[35]=te,g[36]=ne):(te=g[35],ne=g[36]),m(te,ne);var re;g[37]!==q||g[38]!==G?(re=function(){o("CometNewsfeedOrderingDebuggingState").setFeedUnitOrderingState(r("getCometFeedUnitOrderingDebuggingTable")(G,q))},g[37]=q,g[38]=G,g[39]=re):re=g[39],m(re,void 0);var oe;g[40]!==F?(oe=function(){window.requestAnimationFrame(function(){f(F(),"CometFeedRenderingOrderErrorAfterAnimationFrame","Feed units rendered out of order")})},g[40]=F,g[41]=oe):oe=g[41],m(oe,void 0);var ae;return g[42]!==Y||g[43]!==F||g[44]!==A||g[45]!==w?(ae={feedEdgesToRender:Y,getFeedUnitStatusListPassive:F,resetFeedUnitRegistry:A,setFeedUnitRecord:w},g[42]=Y,g[43]=F,g[44]=A,g[45]=w,g[46]=ae):ae=g[46],ae}function h(e){e.addAnnotationInt("firstFeedUnitReordered",1)}function y(e){return e.key}function C(e){return babelHelpers.extends({},e,{status:"received"})}function b(e){return e.key}function v(e){return e+1}function S(){return!1}l.default=g}),98);
__d("GhlNfmFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("30"),s=o("FalcoLoggerInternal").create("ghl_nfm",e),u=s;l.default=u}),98);
__d("useGHLIsCanvasFillTextModified.react",["GHLDetectionUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("react-compiler-runtime").c(1),n,r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=o("GHLDetectionUtils").isCanvasFillTextModified(t.CanvasRenderingContext2D),e[0]=r):r=e[0],n=r,n}l.default=u}),98);
__d("useGHLIsJSONParseShimmed.react",["GHLDetectionUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("react-compiler-runtime").c(1),t,n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=o("GHLDetectionUtils").isJSONParseShimmed(),e[0]=n):n=e[0],t=n,t}l.default=u}),98);
__d("useGHLIsXHRModified.react",["GHLDetectionUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("react-compiler-runtime").c(1),n,r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=o("GHLDetectionUtils").isXHRModified(t.XMLHttpRequest),e[0]=r):r=e[0],n=r,n}l.default=u}),98);
__d("useGHLNativeFunctionModificationLogger",["GhlNfmFalcoEvent","gkx","react","useGHLIsCanvasFillTextModified.react","useGHLIsJSONParseShimmed.react","useGHLIsXHRModified.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(){var e=s(!1),t=e[0],n=e[1],o=r("useGHLIsXHRModified.react")(),a=r("useGHLIsJSONParseShimmed.react")(),i=r("useGHLIsCanvasFillTextModified.react")(),l=r("gkx")("5599");!l||t||(o&&r("GhlNfmFalcoEvent").log(m),a&&r("GhlNfmFalcoEvent").log(d),i&&r("GhlNfmFalcoEvent").log(c),n(!0))}function c(){return{event:"cfm"}}function d(){return{event:"jm"}}function m(){return{event:"xm"}}l.default=u}),98);
__d("CometNewsFeed.react",["fbt","BaseHeadingContext","Comet2ndChannelContextProvider.react","CometBackupPlaceholder.react","CometBrandSafety","CometClipboardCustomCopy.react","CometFeed5sImpressionDelayContextProvider.react","CometFeedBrandSafetyContextProvider.react","CometFeedEndOfFeedMessageForNewsfeedOnly.react","CometFeedInfiniteScrollSuspenseList.react","CometFeedKeyboardNavPositionContext","CometFeedStalenessConstantsEntryPointVariables","CometFeedTailLoadConfig","CometFeedUnitErrorBoundary.react","CometFeedUnitSetDebugInfoContextProvider.react","CometFeedUnitSetStatusContext","CometFeedUnitStatusListPassiveContext","CometFeedUnitsTypedLoggerLite","CometGHLFeedClassContext","CometGHLFeedFallbackContext","CometGHLFeedRandomElementWrapperContext","CometGHLReactPropsScrambler.react","CometHeroFeedItem.react","CometHeroHoldTrigger.react","CometHomeFeedStyleContext","CometNewsFeedEofFalcoEvent","CometNewsFeedLoadedFalcoEvent","CometNewsFeedUnit.react","CometNewsFeedVPVDStore","CometNewsFeed_viewer.graphql","CometNewsFeed_viewerConnection.graphql","CometNewsfeedOrderingDebuggingState","CometOnInitialMount.react","CometOnRefresh","CometPageletWithDiv.react","CometRelay","CometScreenReaderHeading.react","ErrorGuard","FBLogger","GHLExtraElementWrapper","GHLFeedStoryCategoryObfuscationUtils","GHLGating","GHLMitigationsGating","GHLSharedMitigationsGating","GHLSurfaceContainerContext","HiddenSubtreePassiveContext","InteractionTracing","MinGapType","MinGapTypeUtils.facebook","NetworkStatus","VideoAutoplayLocalScopeProvider.react","VideoPlayerAutoplayRulesProvider","WebConnectionClassServerGuess","cometCappedListFactory","cr:1142206","cr:1813330","cr:3683","cr:7827","gkx","justknobx","pageID","qex","react","react-compiler-runtime","useCometFeedIneligibleUnitLogger","useCometFeedKeyCommands","useCometFeedRequestWaterfallLogger","useCometFeedUnitReordering","useCometRouterState","useGHLNativeFunctionModificationLogger","useSimpleImpression","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p,_,f=_||(_=o("react")),g=_,h=g.useCallback,y=g.useContext,C=g.useEffect,b=g.useLayoutEffect,v=g.useMemo,S=g.useRef,R=g.useState,L=r("justknobx")._("546"),E=r("justknobx")._("3495"),k=(c=r("qex")._("3688"))!=null?c:0,I=r("cometCappedListFactory")(),T=I.CappedListItemTracker,D=I.useCometCappedList,x=!0,$=o("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("default_feed"),P="homepage_stream",N=r("gkx")("21050")?[2,2,2,2,4]:void 0,M=e!==void 0?e:e=n("CometNewsFeed_viewerConnection.graphql"),w=u!==void 0?u:u=n("CometNewsFeed_viewer.graphql"),A=o("GHLMitigationsGating").getIsGHLRandomElementWrapperForFeedEnabled()?{enabled:!0,wrapWithRandomElement:function(t){return f.jsx(n("cr:7827"),{elementTag:"randomSpan",children:t})}}:{enabled:!1};function F(e){var t,n,a,i=o("react-compiler-runtime").c(31),l=e.feedEdge,s=e.position,u=e.setFeedUnitRecord,c=e.variables,m=S(!1),p=l.node;if(p==null)return null;var _=(t=p.__typename)!=null?t:null,g,h;if(i[0]!==l.min_gap_type_index_string){var y,C;g=(y=(d||(d=r("MinGapType"))).cast(parseInt(l.min_gap_type_index_string,10)))!=null?y:0,h=(C=o("MinGapTypeUtils.facebook").fromJSEnum(g))!=null?C:"UNKNOWN",i[0]=l.min_gap_type_index_string,i[1]=g,i[2]=h}else g=i[1],h=i[2];var b=h,v=l.cat_sensitive,R;if(i[3]!==v||i[4]!==l.category||i[5]!==p.post_id){if(R=null,v){var L=v==null?void 0:v.cat,E=v==null?void 0:v.enc;R=L!=null?L:o("GHLFeedStoryCategoryObfuscationUtils").getMatchWithFeedStoryCategory(E,p.post_id)}else R=l.category;i[3]=v,i[4]=l.category,i[5]=p.post_id,i[6]=R}else R=i[6];var k=(n=(a=l.brs_content_label)!=null?a:l.lbl_bru_cntent_lakb)!=null?n:l.of_label_new_contet_brrs,I,T;i[7]!==R||i[8]!==b||i[9]!==s||i[10]!==_?(I=f.jsx(r("CometOnInitialMount.react"),{onInitialMount:function(){r("CometFeedUnitsTypedLoggerLite").log({category:R,event:"unexpected_resuspense",min_gap_type:b,position:s,render_location:P,unit_name:_})}}),T=function(t){m.current||(r("CometFeedUnitsTypedLoggerLite").log({category:R,event:"unexpected_resuspense_with_name",min_gap_type:b,position:s,promise_name:t,render_location:P,unit_name:_}),m.current=!0)},i[7]=R,i[8]=b,i[9]=s,i[10]=_,i[11]=I,i[12]=T):(I=i[11],T=i[12]);var D;if(i[13]!==k||i[14]!==R||i[15]!==l||i[16]!==g||i[17]!==b||i[18]!==p||i[19]!==s||i[20]!==u||i[21]!==_||i[22]!==c){var x,$,N,M,w,A,F,O;D=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?f.jsx(o("CometGHLReactPropsScrambler.react").CometGHLPropsScramblerProvider,{targettedProps:{category:R,minGapEnumType:g,minGapStringType:b},children:f.jsx(o("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContextProvider,{brsContentLabel:k,brsFilterSetting:(x=($=(N=l.node)==null?void 0:N.sponsored_data)!=null?$:(M=l.node)==null?void 0:M.th_dat_spo)==null?void 0:x.brs_filter_setting,deduplicationKey:l.deduplication_key,setFeedUnitRecord:u,children:f.jsx(r("CometFeedUnitErrorBoundary.react"),{feedUnit:p,position:s,renderLocation:P,unitTypename:_,children:f.jsx(r("CometNewsFeedUnit.react"),{edge:l,position:s,variables:c})})})}):f.jsx(o("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContextProvider,babelHelpers.extends({brsContentLabel:k,brsFilterSetting:(w=(A=(F=l.node)==null?void 0:F.sponsored_data)!=null?A:(O=l.node)==null?void 0:O.th_dat_spo)==null?void 0:w.brs_filter_setting},o("GHLSharedMitigationsGating").getIsGHLNewsFeedCategoryAliasEnabled()?{categoryAlias:R!=null?R:void 0}:{category:R!=null?R:void 0},{deduplicationKey:l.deduplication_key},o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?{minGapTypeAlias:g}:{minGapType:g},{setFeedUnitRecord:u,children:f.jsx(r("CometFeedUnitErrorBoundary.react"),babelHelpers.extends({},o("GHLSharedMitigationsGating").getIsGHLNewsFeedCategoryAliasEnabled()?{categoryAlias:R!=null?R:void 0}:{category:R!=null?R:void 0},{feedUnit:p},o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?{minGapTypeAlias:b}:{minGapType:b},{position:s,renderLocation:P,unitTypename:_,children:f.jsx(r("CometNewsFeedUnit.react"),babelHelpers.extends({edge:l},o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?{minGapTypeAlias:b}:{minGapType:b},{position:s,variables:c}))}))})),i[13]=k,i[14]=R,i[15]=l,i[16]=g,i[17]=b,i[18]=p,i[19]=s,i[20]=u,i[21]=_,i[22]=c,i[23]=D}else D=i[23];var B;i[24]!==I||i[25]!==T||i[26]!==D?(B=f.jsx(r("CometBackupPlaceholder.react"),{fallback:I,unstable_onSuspense:T,children:D}),i[24]=I,i[25]=T,i[26]=D,i[27]=B):B=i[27];var W;return i[28]!==s||i[29]!==B?(W=f.jsx(r("CometHeroFeedItem.react"),{position:s,children:B}),i[28]=s,i[29]=B,i[30]=W):W=i[30],W}var O=f.memo(F);function B(e){var t,a,i,l,u,c,d,_,g,I=R(!1),F=I[0],B=I[1],W=R(!1),q=W[0],U=W[1],V=R(!1),H=V[0],G=V[1],z=o("CometRelay").usePaginationFragment(M,e.viewerConnection),j=z.data,K=z.hasNext,Q=z.isLoadingNext,X=z.loadNext,Y=o("CometRelay").useIsParentQueryActive(M,e.viewer),J=o("CometRelay").useFragment(w,e.viewer),Z=e.endOfFeedComponent,ee=e.isReloading,te=e.onReload,ne=e.variables,re=J==null?void 0:J.is_fb_employee,oe=j==null?void 0:j.news_feed,ae=(t=J==null?void 0:J.can_have_friends)!=null?t:!0,ie=(a=J==null||(i=J.actor)==null?void 0:i.name)!=null?a:null,le=Q||Y||!q||ee,se=(l=r("qex")._("3689"))!=null?l:!1,ue=R(!0),ce=ue[0],de=ue[1],me=!F&&(K||le),pe=J==null?void 0:J.injected_stories,_e=(oe==null?void 0:oe.page_info)!=null,fe=J==null||(u=J.all_friends)==null?void 0:u.friend_count,ge=(c=oe==null?void 0:oe.edges)!=null?c:[],he=E&&ge.some(function(e){return(e==null?void 0:e.category)==="END_OF_FEED_CONTENT"}),ye=S(null),Ce=v(function(){return{isFallbackEnabled:H,isInNewsFeed:!0,setIsFallbackEnabled:G}},[H,G]),be=S(null);C(function(){var e={didMount:q,hasMore:me,hasNextFromPaginationFragment:K,isParentQueryActive:Y,tailLoadErrored:F};if(be.current!=null&&be.current.tailLoadErrored===!1&&be.current.hasMore===!1&&me===!0){var t;if(se&&Ae.current>0)return;var n=(t=(m||(m=r("ErrorGuard"))).applyWithGuard(function(){return JSON.stringify({hasMoreObject:e,previousHasMoreObject:be.current})},null,[]))!=null?t:"";r("FBLogger")("CometNewsfeedHasMoreUnstable").addMetadata("COMET_FEED","FEED_UNIT_RECEIVED_COUNT",String(ge.length)).mustfix("hasMore unexpectedly became true again after being false\n\n%s",n)}be.current=e},[q,ge.length,me,K,se,Y,ce,F]);var ve=(p||(p=r("useUnsafeRef_DEPRECATED")))(0),Se=Math.max(ve.current,ge.length);C(function(){ve.current=Se},[Se]),r("useCometFeedIneligibleUnitLogger")(ge,P),r("useGHLNativeFunctionModificationLogger")();var Re=r("useCometFeedUnitReordering")(ge,!pe,x,ge),Le=Re.feedEdgesToRender,Ee=Re.getFeedUnitStatusListPassive,ke=Re.resetFeedUnitRegistry,Ie=Re.setFeedUnitRecord;o("CometOnRefresh").useOnRefresh(function(){ke()});var Te=y(r("HiddenSubtreePassiveContext")),De=y(o("CometNewsFeedVPVDStore").StoreContext),xe=y(r("CometHomeFeedStyleContext")),$e=xe.feedStyle,Pe=S(!1);C(function(){Pe.current||(r("CometNewsFeedLoadedFalcoEvent").log(function(){return{connection_class:ne.connectionClass,feed_unit_count:Le.length.toString(),feed_unit_received_count:ge.length.toString(),page_id:r("pageID"),was_in_hidden_subtree:Te.getCurrentState().hiddenOrBackgrounded_FIXME}}),Pe.current=!0)},[]),C(function(){return U(!0),function(){return o("CometNewsFeedVPVDStore").resetVisibleViewstateIDs()}},[]),C(function(){o("CometNewsfeedOrderingDebuggingState").setHasInjectedStories(pe!=null)},[pe]);var Ne=r("useCometFeedRequestWaterfallLogger")(ge,Le,!!re),Me=Ne[0],we=Ne[1],Ae=S(0),Fe=R(!1),Oe=Fe[0],Be=Fe[1],We=h(function(){if(n("cr:1142206")==null||n("cr:1142206").log("[handleLoadMore]","checking if we have hasNext or are isLoading",{hasNext:me,isLoading:le}),!(se&&!ce&&(!me||le))&&!(!se&&(!me||le))&&!he){n("cr:1142206")==null||n("cr:1142206").log("[handleLoadMore]","starting tail load with trace");var e={clientQueryId:Me(),recentVPVs:De==null?void 0:De.readRecentVPVDs()};o("CometFeedStalenessConstantsEntryPointVariables").PAGINATION_REFRESH_MODE!=null&&(e=babelHelpers.extends({},e,{refreshMode:o("CometFeedStalenessConstantsEntryPointVariables").PAGINATION_REFRESH_MODE})),X(r("CometFeedTailLoadConfig").fetchCount,{UNSTABLE_extraVariables:babelHelpers.extends({},e),onComplete:function(t){t!=null?(Be(!0),se&&Ae.current===k&&de(!1),B(!0),we(t),n("cr:1142206")!=null&&n("cr:1142206").log("[loadNext]","Failed to fetch next page",{errorMessage:t.toString(),hasNext:me,isLoading:le,isOnline:navigator.onLine})):K===!1?se&&Ae.current===k&&de(!1):(Ae.current=0,Be(!1))}})}},[me,le,ce,Me,De,X,se,K,we]),qe=h(function(){B(!1),We()},[We]),Ue=null;pe!=null&&(Ue=o("CometRelay").ModuleResource.read(pe));var Ve={},He=Le.map(function(e,t){if(e.node==null)return null;var n=e.deduplication_key,r=null;return n!=null?(Ve[n]!=null?Ve[n]+=1:Ve[n]=1,r=n+"-"+Ve[n].toString()):r=t.toString(),{edge:e,reactKey:r}}).filter(Boolean),Ge=(d=r("qex")._("626"))!=null?d:0;Ge=Ge<=0?L:Ge;var ze=D(He,Ge,h(function(e){return e.reactKey},[])),je=0,Ke=Le.length,Qe=0,Xe=e.numConnectionsForSSR!=null&&e.numConnectionsForSSR>0?e.numConnectionsForSSR-1:1,Ye=He.map(function(e,t){var n=e.edge,a=e.reactKey,i=f.jsx(O,{feedEdge:n,position:je++,setFeedUnitRecord:Ie,variables:ne},a),l=o("GHLMitigationsGating").getIsGHLExtraElementsForFeedEnabled()?f.jsx(r("GHLExtraElementWrapper"),{elementTag:"span",n:o("GHLGating").getExtraElementsForFeedCount(),children:f.jsx("div",{className:"x1lliihq","data-testid":void 0,children:A.enabled===!0&&t>Xe?A.wrapWithRandomElement(i):i})}):f.jsx("div",{"data-testid":void 0,children:i});return ze!=null&&ze.cappedItemIDs.has(a)&&(Ke--,Qe++),f.createElement(T,babelHelpers.extends({},ze,{id:a,key:a}),l)});r("useSimpleImpression")(function(){r("InteractionTracing").getPendingInteractions().forEach(function(e){e.addAnnotationInt("comet_news_feed_count",Ke)})}),n("cr:1813330")!=null&&(n("cr:1813330").setNewsFeedCount(Ke),n("cr:1813330").setNewsFeedStoryPositionOffset(Qe));var Je=r("useCometFeedKeyCommands")(Le.length,"newsfeed",null),Ze=!le&&!me&&!he,et=r("useCometRouterState")(),tt=(_=et==null||(g=et.main)==null||(g=g.route)==null?void 0:g.tabKey)!=null?_:"",nt=se&&ce&&ge.length>0&&!he;b(function(){var e;Ze&&ce&&ge.length>0&&((e=r("qex")._("3690"))!=null&&e)&&Ae.current<k&&(r("CometNewsFeedEofFalcoEvent").log(function(){return{connection_class:r("WebConnectionClassServerGuess").connectionClass,eof_mount_reason:"auto_retry_tail_load",feed_tab_key:tt,feed_unit_count:Ke.toString(),feed_unit_received_count:ge.length.toString(),is_online:r("NetworkStatus").isOnline(),max_feed_units_received_count:Se.toString(),page_id:r("pageID"),position:je.toString(),was_in_hidden_subtree:Te.getCurrentState().hiddenOrBackgrounded_FIXME}}),Ae.current++,qe())},[nt,qe,Ze]);var rt=!_e||F,ot=null;Ze&&(nt?ot=null:ot=f.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"FeedUnit_EOF",children:f.jsx(r("CometFeedEndOfFeedMessageForNewsfeedOnly.react"),{canHaveFriends:ae,endOfFeedComponent:Z,feedUnitReceivedCount:ge.length,feedUnitRenderedCount:Ke,friendsCount:fe,hasPageInfo:_e,isError:rt,maxFeedUnitsReceived:Se,onReload:te,onTailLoadReload:qe,pageletName:"FeedUnit",position:je,renderLocation:P,setStopFutureTailLoads:Be,tailLoadErrored:F,viewerName:ie})}));var at=o("CometBrandSafety").useCometBrandSafetyFeedStateInfo(me,rt,le,Ze),it=r("gkx")("23000")||Ye.length===0?null:{role:"feed"},lt=$e===28?193:0,st=f.jsx(r("CometScreenReaderHeading.react"),{children:s._(/*BTDS*/"Feed posts")}),ut=f.jsxs(f.Fragment,{children:[o("GHLMitigationsGating").getIsGHLChangeH3ToH4Enabled()?f.jsx(r("BaseHeadingContext").Provider,{value:4,children:st}):st,o("GHLMitigationsGating").getIsGHLEmptyDivElementAfterH3Enabled()?f.jsx("div",{"aria-hidden":!0}):null,f.jsx(r("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:$,children:f.jsx(r("CometClipboardCustomCopy.react"),{reformersDeferred:n("cr:3683")!=null?[n("cr:3683")]:[],children:f.jsx(r("GHLSurfaceContainerContext").Provider,{value:ye,children:f.jsxs(r("CometFeedKeyboardNavPositionContext").Provider,{value:Je,children:[Ue?f.jsx(Ue,{}):null,f.jsx(r("CometFeedUnitStatusListPassiveContext").Provider,{value:Ee,children:f.jsx(r("CometFeedUnitSetDebugInfoContextProvider.react"),{location:"newsfeed",children:f.jsx(r("Comet2ndChannelContextProvider.react"),{children:f.jsx(r("CometFeedBrandSafetyContextProvider.react"),{feedStateInfoRef:at,children:f.jsxs(r("CometFeed5sImpressionDelayContextProvider.react"),{children:[f.jsx(r("CometHeroHoldTrigger.react"),{description:"FeedQuery",hold:(me||le)&&Ke<2}),f.jsx(r("CometGHLFeedFallbackContext").Provider,{value:Ce,children:f.jsx(r("CometGHLFeedClassContext").Provider,{value:r("gkx")("22882"),children:f.jsx(r("CometGHLFeedRandomElementWrapperContext").Provider,{value:A,children:f.jsx(r("CometFeedInfiniteScrollSuspenseList.react"),{hasMore:(me||nt)&&!he,incrementalRenderingPageSizes:N,interactionSource:lt,isLoading:le,onLoadMore:We,pageletName:"FeedUnit",positionLimitForSSR:Xe,reduceSitewidePostSpacing:r("gkx")("19871"),stopFutureTailLoads:Oe,waitOnScrollIntent:!0,children:Ye})})})})]})})})})}),ot]})})})})]});return f.jsx("div",babelHelpers.extends({"data-testid":void 0,ref:ye},it,{children:ut}))}B.displayName=B.name+" [from "+i.id+"]",l.default=B}),226);
__d("CometModernHomeFeed.react",["CometModernHomeFeedQuery.graphql","CometNewsFeed.react","CometRelay","RelayUFI2CommentsKeyContext","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferred")("CometFeedFavoritesEndOfFeedMessage.react").__setRef("CometModernHomeFeed.react")),d=r("deferredLoadComponent")(r("requireDeferred")("FeedsCometEndOfFeed.react").__setRef("CometModernHomeFeed.react")),m=e!==void 0?e:e=n("CometModernHomeFeedQuery.graphql");function p(e){var t,n=o("react-compiler-runtime").c(8),a=e.cacheBreaker,i=e.feedQueryReference,l=e.isLoading,s=e.onReload,p=o("CometRelay").usePreloadedQuery(m,i),_=String(i.variables.orderby),f=_+"_"+a,g=i.variables.feedStyle==="FAVORITES_FEED"&&!r("gkx")("20836")?c:_==="MOST_RECENT"?d:void 0,h=typeof(i==null||(t=i.environmentProviderOptions)==null?void 0:t.numConnectionsForSSR)=="number"?i.environmentProviderOptions.numConnectionsForSSR:i.variables.feedInitialFetchSize,y;return n[0]!==p.viewer||n[1]!==g||n[2]!==f||n[3]!==i.variables||n[4]!==l||n[5]!==h||n[6]!==s?(y=u.jsx(r("RelayUFI2CommentsKeyContext").Provider,{value:"CometModernHomeFeedQuery",children:u.jsx(r("CometNewsFeed.react"),{endOfFeedComponent:g,isReloading:l,numConnectionsForSSR:h,onReload:s,variables:i.variables,viewer:p.viewer,viewerConnection:p.viewer},f)}),n[0]=p.viewer,n[1]=g,n[2]=f,n[3]=i.variables,n[4]=l,n[5]=h,n[6]=s,n[7]=y):y=n[7],y}var _=u.memo(p);l.default=_}),98);/*FB_PKG_DELIM*/
__d("ArmadilloSignatures",["WASignalKeys","WASignalOther","WASignalSignatures","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WASignalOther")).ensureSize(o("XPlatReactCrypto").getRandomValues(new Uint8Array(64)),64);return o("WASignalSignatures").makeSignature(o("WASignalKeys").makeKeyPairFromArrayBuffers(n.toBuffer(n.makeBytes(32)),n.toBuffer(e)),t,r)}function s(e,t,n){return o("WASignalSignatures").verifyMsgSignalVariant(o("WASignalSignatures").convertPublicKeyToSerializedPubKey(t),n,e)}l.armadilloSign=e,l.validateArmadilloSignature=s}),98);
__d("ArrayBuffer",["UInt8Array"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.map(function(e){return new Uint8Array(e)});return o("UInt8Array").concatBytes(t).buffer}l.mergeBuffers=e}),98);
__d("CreateEncryptionKeyPair",["CryptoLogger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("CreateEncryptionKeyPair");function u(){return s.load().then(function(t){var r=t.generateKeys(t.KeyPurpose.Encryption);return(e||(e=n("Promise"))).resolve([r.sk.buffer,r.pk.buffer])}).catch(function(e){var t=o("CryptoLogger").CryptoLogger("create_encryption_key_pair");throw o("CryptoLogger").captureError(t,e).mustfix("failed to generate an encryption key pair"),e})}l.default=u}),98);
__d("EBGetContactEpochHead",["EBMinosSecureMailboxKeysForContact","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.rawContactId;if(t==null)return Promise.reject(o("WAResultOrError").makeError("invalid-arguments"));var n=await o("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(t);return n==null?o("WAResultOrError").makeResult():o("WAResultOrError").makeResult({epochHead:n.epoch_head,epochHeadCreationTime:n.epoch_head_creation_time})}l.getContactEpochHead=e}),98);
__d("EBGetLatestChatJids",["I64","MAWBridgeSafeActionsWorkerAndUI","ReQL","WAResultOrError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=1e3;async function u(e,t){t===void 0&&(t=s);try{var n=c(e,t);return o("WAResultOrError").makeResult(await n)}catch(e){return o("WAResultOrError").makeError(r("getErrorSafe")(e))}}async function c(t,n){n===void 0&&(n=s);var r=await Promise.all([o("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestChatJids",{count:n}),await t.runInTransaction(function(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table).map(function(t){var n=t.jid;return(e||(e=o("I64"))).to_string(n)}))},"readonly",void 0,void 0,i.id+":54")]),a=r[0],l=r[1],u=[];if(l.length>0){var c=new Set(l);a.forEach(function(e){var t=e.split("@")[0];c.has(t)&&u.push(e)})}return u}l.getLatestChatJids=u}),98);
__d("EBGetMessageKeys",["EBMinosDb","FBLogger","WAResultOrError","WebMps","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(t,n){var e=await o("EBMinosDb").getEBMinosDb(),r=await e.runInTransaction(["secure_minos_message_epoch_heads"],"readonly",function(e){return e.stores.secure_minos_message_epoch_heads.readIndex("[thread_id+message_id]",[t,n])},"LoadNewMinosMessageEpochHead");return r.length===0?null:{epochHead:r[0].epoch_head}};async function u(t){var n=t.messageId,a=t.threadId;try{if(n==null||a==null)return o("WAResultOrError").makeError("invalid-arguments");var i=await o("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-only"},debug:{purpose:"get-message-keys"},messageId:n,threadId:a}),l=await s(a,n);if(l==null)return o("WAResultOrError").makeError("no-epoch-head-found");if(i.success===!1)return o("WAResultOrError").makeError(i.error);var u=i.value;if(u==null)return o("WAResultOrError").makeError("no-message");var c=new Map;await Promise.all(Array.from(u.supplementalProtobufs).map(async function(e){var t=e[0],n=e[1],r=await s(a,n.messageId);if(r==null)return o("WAResultOrError").makeError("no-epoch-head-found");c.set(t,babelHelpers.extends({},n,{senderEpochHead:r.epochHead}))}));var d=babelHelpers.extends({},u.toplevelProtobuf,{senderEpochHead:l.epochHead});return o("WAResultOrError").makeResult(babelHelpers.extends({},u,{supplementalProtobufs:c,toplevelProtobuf:d}))}catch(t){throw r("FBLogger")("wmi_minos").catching(r("getErrorSafe")(t)).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Runtime error in EBGetMessageKeys"]))),t}}l.getMessageKeys=u}),98);
__d("EBMainThreadEBDBApi",["$InternalEnum","EBDB","EBDBConsistencyApi","FBLogger","LSDatabaseSingleton","WAResolvable","WormDump","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;async function u(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;try{await o("EBDBConsistencyApi").startListeningDeviceRegistrations(t,o("EBDB").EBDBEnvironment.UI)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").catching(n).mustfix("Error on startListeningDeviceRegistrations in UI")}finally{s.resolve(t)}}async function c(e){await o("EBDBConsistencyApi").trackOverprompting(o("EBDB").EBDBEnvironment.UI,e)}async function d(e){var t=await s.promise;await o("EBDBConsistencyApi").addNewDevice(t,o("EBDB").EBDBEnvironment.UI,e)}async function m(){var e,t=await o("EBDB").getEBDB();return t.dump({auto_restore_opt_out:{customFields:{optOutKey:(e=o("WormDump")).wormNonSensitiveField,optOutValue:e.wormNonSensitiveField}},device_metadata:{customFields:{backupId:e.wormNonSensitiveField,deviceRegistrationId:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,taskId:e.wormNonSensitiveField}},device_state:{customFields:{deviceId:e.wormNonSensitiveField,env:e.wormNonSensitiveField}},encrypted_backups:{customFields:{authorityLevel:e.wormNonSensitiveField,backupId:e.wormNonSensitiveField,backupTenancy:e.wormNonSensitiveField,hasOtcEligibleDevices:e.wormNonSensitiveField,isUserOptedOut:e.wormNonSensitiveField,pk:e.wormNonSensitiveField}},encrypted_backups_virtual_devices:{customFields:{backupId:e.wormNonSensitiveField,creationTime:e.wormNonSensitiveField,deviceCreatedOn:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,removalStatus:e.wormNonSensitiveField,requiresHsmMigration:e.wormNonSensitiveField}},experiences_shared_state:{},secure_encrypted_backups_client_state:{customFields:{authorityLevel:e.wormNonSensitiveField,backupId:e.wormNonSensitiveField,backupTenancy:e.wormNonSensitiveField,deviceId:e.wormNonSensitiveField,encryptionVersion:e.wormNonSensitiveField}},secure_encrypted_backups_epochs:{customFields:{authorityLevel:e.wormNonSensitiveField,epochId:e.wormNonSensitiveField,epochStatus:e.wormNonSensitiveField}},secure_encrypted_backups_recovery_code_status:{customFields:{pk:e.wormNonSensitiveField,recoveryCodeStatus:e.wormNonSensitiveField}}})}var p=n("$InternalEnum")({Disabled:0,UIInconsistent:1,WorkerInconsistent:2,Consistent:3});async function _(e,t){var n=await s.promise;o("EBDBConsistencyApi").trackConsistency(n,o("EBDB").EBDBEnvironment.UI,e,function(){var e=p.Disabled,n=o("EBDBConsistencyApi").getDeviceId();return n!=null&&t!=null?e=p.Consistent:n!=null&&t==null?e=p.WorkerInconsistent:n==null&&t!=null&&(e=p.UIInconsistent),{int:{crossEnvConsistency:e}}})}l.startListeningDeviceRegistrations=u,l.trackOverprompting=c,l.addNewDevice=d,l.getEBDBDump=m,l.EBCrossEnvConsistencyResult=p,l.trackConsistency=_}),98);
__d("EBMinosWriteKeyChangeAdminMessage",["EBMinosTypes","FBLogger","MAWAdminWriteUserDeviceMsgTxn","MAWBridge","MAWDbAppMeta","MAWDbThreadTxns","MAWDexieTable","MAWExternalId","MAWIndexedDb","MAWTransactionMode","MpsTypes","WAArmadilloTransportEvent.pb","WABuildMpsPayload","WADbContact","WAGlobals","WAJids","WAStanzaUtils","WebMps","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert}).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlert)!=null?t:!1})}function u(e,t){var n=o("WAGlobals").getMyUserJid()===t;return!n&&e}async function c(e){var t=e.deviceChangeType,n=t===void 0?o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED:t,a=e.epochHeadCreationTime,i=e.userJid;try{var l=o("MAWExternalId").generateExternalId(),s=o("WABuildMpsPayload").buildMpsDeviceChangeAdminMessage(i,a,o("WAStanzaUtils").toStanzaId(l),n),u={directive:null,insertionSource:o("MpsTypes").InsertionSource.Receive,message:s};await o("WebMps").mps().saveNewMessages([u],{source:"eb-minos-device-change"}),r("FBLogger")("wmi_minos").info("Sent device change transport event for user %s with type %s",i,String(n))}catch(e){var c=r("getErrorSafe")(e);throw r("FBLogger")("wmi_minos").catching(c).mustfix("Failed to send device change transport event for user %s",i),c}}async function d(t){var n=t.contactId,a=t.epochHeadCreationTime,i=o("EBMinosTypes").userFbidToUserJid(n);if(i==null)return r("FBLogger")("wmi_minos").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Invalid userJid generated in writeKeyChangeAdminMessage"]))),Promise.resolve();var l=await o("MAWIndexedDb").makeMsgrTransactor({participants:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"writeKeyChangeAdminMessage",function(e){return function(){return o("MAWDbThreadTxns").getAllThreadsForUsers(e,[i])}})(),d=l.get(i),m=await o("MAWBridge").getBridge().sendAndReceive("event","getLSDBUsersRelationships",{users:[i]});if(d==null||(d==null?void 0:d.length)===0)return Promise.resolve();var p=d.filter(function(e){var t=o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(){return"group"},user:function(){return"one_to_one"}});return t==="one_to_one"}),_=await Promise.all([c({deviceChangeType:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED,epochHeadCreationTime:a,userJid:i}),o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY,ftsBackloggedMessages:o("MAWTransactionMode").READWRITE,groupInfo:o("MAWTransactionMode").READONLY,messages:o("MAWTransactionMode").READWRITE,threads:o("MAWTransactionMode").READWRITE},"writeKeyChangeAdminMessage",function(e){return function(){return o("MAWDexieTable").dexieAll(p.map(function(t){return s(e).then(function(n){u(n,i)&&m.get(i)===o("WADbContact").TWO_WAY_CONTACT?o("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(e,i,t,"update",a):o("MAWDexieTable").dexieResolve()})}))}})()]),f=_[1];return f}l.saveDeviceChangeTransportEvent=c,l.writeMinosKeyChangeAdminMessage=d}),98);
__d("EBMinosWriteSecureStorageAlert",["EBMinosTypes","FBLogger","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWIndexedDb","MAWTransactionMode","MAWUnsafeCoerce","Promise","WAJids","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=t.contactId,i=t.epochHead,l=t.epochHeadCreationTime,u=o("WAJids").validateDeviceJid(o("EBMinosTypes").userFbidToUserJid(o("EBMinosTypes").unsafeCastToUserFbId(a)));return u==null?(r("FBLogger")("wmi_minos").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Invalid deviceJid generated in writeMinosSecureStorageAlert"]))),(s||(s=n("Promise"))).resolve()):o("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:o("MAWTransactionMode").READWRITE},"writeMinosSecureStorageAlert",function(e){return function(){return o("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(e,{action:o("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:u,epochHead:i,identity:o("MAWUnsafeCoerce").unsafeCoerce(o("WASignalOther").toBytes(i,32)),isArchived:!1,model:"secure_storage",platform:"Meta",ts:l})}})()}l.writeMinosSecureStorageAlert=u}),98);
__d("EBSMGating",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("24151")}l.isPersistedEBTableEnabled=e}),98);
__d("EBSMGatingUI",["EBSMGating","MAWWaitForBackendSetup"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("MAWWaitForBackendSetup").isBackendSetupSuccessful()||o("EBSMGating").isPersistedEBTableEnabled()}l.isBackendSetupSuccessfulForEBSM=e}),98);
__d("LSEncryptedBackupsClientRestoreState",[],(function(t,n,r,o,a,i){var e=Object.freeze({RESTORE_IN_PROGRESS:1,RESTORE_COMPLETE:2});i.default=e}),66);
__d("EBSetRestoreStatusForInitialRestore",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","ReQL","WAJids","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(t,n){var a=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.encrypted_backups_client_restore_status).map(function(e){var t=e.threadId;return t}));return n.runInTransaction(async function(n){var i=[],l=[];a.forEach(function(e){i.push(n.encrypted_backups_client_restore_status.delete(e))}),await Promise.all(i),t.forEach(function(t){l.push(n.encrypted_backups_client_restore_status.put({lastUpdated:(u||(u=o("I64"))).of_float((e||(e=r("performanceAbsoluteNow")))()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),threadId:o("WAJids").threadIdForChatJid(t)}))}),await Promise.all(l)},"readwrite",void 0,void 0,i.id+":37")}async function d(e){var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.encrypted_backups_client_restore_status).map(function(e){var t=e.threadId;return t}));return e.runInTransaction(async function(e){var n=[];t.forEach(function(t){n.push(e.encrypted_backups_client_restore_status.delete(t))}),await Promise.all(n)},"readwrite",void 0,void 0,i.id+":75")}l.setRestoreStatusForInitialRestore=c,l.resetClientRestoreStatus=d}),98);
__d("GaloisField32",["EBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=o("EBLogger").EBLogger(),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,5,7,1,3,13,15,9,11,21,23,17,19,29,31,25,27,0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,21,22,19,16,25,26,31,28,13,14,11,8,1,2,7,4,0,4,8,12,16,20,24,28,5,1,13,9,21,17,29,25,10,14,2,6,26,30,18,22,15,11,7,3,31,27,23,19,0,5,10,15,20,17,30,27,13,8,7,2,25,28,19,22,26,31,16,21,14,11,4,1,23,18,29,24,3,6,9,12,0,6,12,10,24,30,20,18,21,19,25,31,13,11,1,7,15,9,3,5,23,17,27,29,26,28,22,16,2,4,14,8,0,7,14,9,28,27,18,21,29,26,19,20,1,6,15,8,31,24,17,22,3,4,13,10,2,5,12,11,30,25,16,23,0,8,16,24,5,13,21,29,10,2,26,18,15,7,31,23,20,28,4,12,17,25,1,9,30,22,14,6,27,19,11,3,0,9,18,27,1,8,19,26,2,11,16,25,3,10,17,24,4,13,22,31,5,12,23,30,6,15,20,29,7,14,21,28,0,10,20,30,13,7,25,19,26,16,14,4,23,29,3,9,17,27,5,15,28,22,8,2,11,1,31,21,6,12,18,24,0,11,22,29,9,2,31,20,18,25,4,15,27,16,13,6,1,10,23,28,8,3,30,21,19,24,5,14,26,17,12,7,0,12,24,20,21,25,13,1,15,3,23,27,26,22,2,14,30,18,6,10,11,7,19,31,17,29,9,5,4,8,28,16,0,13,26,23,17,28,11,6,7,10,29,16,22,27,12,1,14,3,20,25,31,18,5,8,9,4,19,30,24,21,2,15,0,14,28,18,29,19,1,15,31,17,3,13,2,12,30,16,27,21,7,9,6,8,26,20,4,10,24,22,25,23,5,11,0,15,30,17,25,22,7,8,23,24,9,6,14,1,16,31,11,4,21,26,18,29,12,3,28,19,2,13,5,10,27,20,0,16,5,21,10,26,15,31,20,4,17,1,30,14,27,11,13,29,8,24,7,23,2,18,25,9,28,12,19,3,22,6,0,17,7,22,14,31,9,24,28,13,27,10,18,3,21,4,29,12,26,11,19,2,20,5,1,16,6,23,15,30,8,25,0,18,1,19,2,16,3,17,4,22,5,23,6,20,7,21,8,26,9,27,10,24,11,25,12,30,13,31,14,28,15,29,0,19,3,16,6,21,5,22,12,31,15,28,10,25,9,26,24,11,27,8,30,13,29,14,20,7,23,4,18,1,17,2,0,20,13,25,26,14,23,3,17,5,28,8,11,31,6,18,7,19,10,30,29,9,16,4,22,2,27,15,12,24,1,21,0,21,15,26,30,11,17,4,25,12,22,3,7,18,8,29,23,2,24,13,9,28,6,19,14,27,1,20,16,5,31,10,0,22,9,31,18,4,27,13,1,23,8,30,19,5,26,12,2,20,11,29,16,6,25,15,3,21,10,28,17,7,24,14,0,23,11,28,22,1,29,10,9,30,2,21,31,8,20,3,18,5,25,14,4,19,15,24,27,12,16,7,13,26,6,17,0,24,21,13,15,23,26,2,30,6,11,19,17,9,4,28,25,1,12,20,22,14,3,27,7,31,18,10,8,16,29,5,0,25,23,14,11,18,28,5,22,15,1,24,29,4,10,19,9,16,30,7,2,27,21,12,31,6,8,17,20,13,3,26,0,26,17,11,7,29,22,12,14,20,31,5,9,19,24,2,28,6,13,23,27,1,10,16,18,8,3,25,21,15,4,30,0,27,19,8,3,24,16,11,6,29,21,14,5,30,22,13,12,23,31,4,15,20,28,7,10,17,25,2,9,18,26,1,0,28,29,1,31,3,2,30,27,7,6,26,4,24,25,5,19,15,14,18,12,16,17,13,8,20,21,9,23,11,10,22,0,29,31,2,27,6,4,25,19,14,12,17,8,21,23,10,3,30,28,1,24,5,7,26,16,13,15,18,11,22,20,9,0,30,25,7,23,9,14,16,11,21,18,12,28,2,5,27,22,8,15,17,1,31,24,6,29,3,4,26,10,20,19,13,0,31,27,4,19,12,8,23,3,28,24,7,16,15,11,20,6,25,29,2,21,10,14,17,5,26,30,1,22,9,13,18],u=[0,1,18,28,9,23,14,12,22,4,25,16,7,15,6,13,11,24,2,29,30,26,8,5,17,10,21,31,3,19,20,27],c="ACDEFHJKLMNPQRSTUVWXYZ0123456789",d=(function(){for(var e={},t=0;t<c.length;t++){var n=f(t);n!=null&&(e[c[t]]=n)}return e})();function m(e,t){return s[e*32+t]}function p(t){for(var n=[],r=0;r<t.length;r++){if(!(t[r]in d))return e.mustfix("gf32: tried to convert invalid string to GF32 matrix: %s",t),null;n[r]=d[t[r]]}return n}function _(e){var t=[];for(var n of e)t.push(c[n]);return t.join("")}function f(e){return e===0||e===1||e===2||e===3||e===4||e===5||e===6||e===7||e===8||e===9||e===10||e===11||e===12||e===13||e===14||e===15||e===16||e===17||e===18||e===19||e===20||e===21||e===22||e===23||e===24||e===25||e===26||e===27||e===28||e===29||e===30||e===31?e:null}function g(t){for(var n=[],r=0;r<t.length;r++){var o=f(t[r]);if(o==null)throw e.mustfixThrow("gf32: tried to convert bad value to GF32 element: %s",t[r]);n.push(o)}return n}function h(t,n){var r=t^n,o=f(r);if(o==null)throw e.mustfixThrow("gf32: xor of gf32 elements returned a non-element (should be impossible): %s ^ %s = %s",t,n,r);return o}function y(e,t,n,r,o){for(var a=0;a<t;a++)e[n*t+a]=h(e[n*t+a],m(e[r*t+a],o))}function C(e,t,n,r){for(var o=0;o<t;o++){var a=e[n*t+o];e[n*t+o]=e[r*t+o],e[r*t+o]=a}}function b(e,t,n,r){for(var o=0;o<t;o++)e[n*t+o]=m(e[n*t+o],r)}function v(t,n){if(n===0)throw e.mustfixThrow("gf32: tried to divide by 0");return m(t,u[n])}function S(e){for(var t=Array(e*e).fill(0),n=0;n<e;n++)t[n*e+n]=1;return t}function R(e,t){for(var n=e.slice(),r=S(t),o=0;o<t;o++){var a=o;if(n[o*t+a]===0){for(var i=!1,l=o+1;l<t;l++)if(n[l*t+a]!==0){C(n,t,o,l),C(r,t,o,l),i=!0;break}if(!i)return null}for(var s=o+1;s<t;s++){var c=v(n[s*t+a],n[o*t+a]);y(n,t,s,o,c),y(r,t,s,o,c)}}for(var d=t-1;d>=0;d--)for(var m=d,p=d-1;p>=0;p--){var _=v(n[p*t+m],n[d*t+m]);y(n,t,p,d,_),y(r,t,p,d,_)}for(var f=0;f<t;f++){var g=n[f*t+f];if(g===0)return null;b(r,t,f,u[g])}return r}var L=0;l.zero=L,l.matrixToSymbols=_,l.symbolsToMatrix=p,l.invert=R,l.xor=h,l.multiply=m,l.asGf32MatExn=g}),98);
__d("GF32RecoveryCodes",["EBLogger","GaloisField32"],(function(t,n,r,o,a,i,l){"use strict";var e=o("EBLogger").EBLogger(),s=34,u=4,c=3,d=s+u,m=o("GaloisField32").asGf32MatExn([18,24,16,12,8,20,2,19,4,22,21,5,28,5,14,21,7,16,15,10,3,9,28,22,11,30,19,6,7,7,9,18,16,2,9,12,18,14,7,6,5,16,9,24,16,28,19,2,14,8,2,4,1,21,26,21,10,27,16,25,18,14,20,17,11,22,21,22,16,20,2,5,0,9,6,7,23,23,23,11,6,5,3,31,29,30,17,28,0,30,28,7,13,5,11,22,12,16,25,3,20,22,26,22,14,29,5,14,5,19,12,19,18,8,25,7,30,7,8,12,0,26,15,10,17,21,2,29,14,4,31,7,29,6,29,1,14,16,17,15,4,16,7,4,7,4,8,26,10,23,24,26]);function p(e,t,n){n===void 0&&(n=1);for(var r=[],o=e;o<t;o+=n)r.push(o);return r}var _={};function f(e,t){function n(e,t,r,o){if(t<=0)return[[]];if(o-r<=t)return[p(r,o)];var a=e|t<<8|r<<16|o<<24,i=_[a];if(i!=null)return i;var l=[];return n(e-1,t-1,r+1,o).forEach(function(e){var t=e.slice();t.splice(0,0,r),l.push(t)}),n(e-1,t,r+1,o).forEach(function(e){l.push(e.slice())}),_[a]=l,l}return n(e,t,0,e)}function g(e,t){for(var n=e.length,r=Array(n*n).fill(0),o=0,a=0;a<u;a++)if(a!==t){for(var i=0;i<n;i++){var l=e[i];r[o*n+i]=m[a*d+l]}o++}return r}function h(e,t){for(var n=0;n<u;n++){var r=g(e,n),a=o("GaloisField32").invert(r,t);if(a!=null)return{excludeRow:n,submatInv:a}}return null}function y(t){for(var n=Array(u).fill(0),r=0;r<u;r++)for(var a=0;a<s;a++)n[r]=o("GaloisField32").xor(n[r],o("GaloisField32").multiply(m[r*d+a],t[a]));for(var i=Array(u*u),l=0;l<u;l++)for(var c=0;c<u;c++)i[l*u+c]=m[l*d+s+c];var p=o("GaloisField32").invert(i,u);if(p==null)throw e.mustfixThrow("gf32: failed to invert error code submatrix (should be impossible): %s",JSON.stringify(i));for(var _=Array(u).fill(0),f=0;f<u;f++)for(var g=0;g<u;g++)_[f]=o("GaloisField32").xor(_[f],o("GaloisField32").multiply(p[f*u+g],n[g]));return _}function C(t){var n=new Set,r=o("GaloisField32").symbolsToMatrix(t);if(r==null)return e.warn("gf32: recovery code %s could not be converted to GF32 matrix",t),[t];for(var a=Array(u).fill(0),i=0;i<u;i++)for(var l=0;l<d;l++)a[i]=o("GaloisField32").xor(a[i],o("GaloisField32").multiply(m[i*d+l],r[l]));var s=f(d,c);for(var p of s){for(var _=a.slice(),g=0;g<u;g++)for(var y of p)_[g]=o("GaloisField32").xor(_[g],o("GaloisField32").multiply(m[g*d+y],r[y]));var C=h(p,c);if(C==null){e.warn("gf32: no submat inverse found for error locs %s",JSON.stringify(p));continue}var b=C.excludeRow,v=C.submatInv,S=Array(c).fill(0),R=_.slice();R.splice(b,1);for(var L=0;L<c;L++)for(var E=0;E<c;E++)S[L]=o("GaloisField32").xor(S[L],o("GaloisField32").multiply(v[L*c+E],R[E]));for(var k=o("GaloisField32").zero,I=0;I<c;I++)k=o("GaloisField32").xor(k,o("GaloisField32").multiply(m[b*d+p[I]],S[I]));if(k===_[b]){for(var T=r.slice(),D=0;D<p.length;D++)T[p[D]]=S[D];n.add(o("GaloisField32").matrixToSymbols(T))}}return Array.from(n)}l.getEccForCode=y,l.getCandidateCodes=C}),98);
__d("LSCreateAuthKeyPair.nop",["CryptoLogger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("LSCreateAuthKeyPair.nop"),u=function(r,a){return s.load().then(function(t){var r=t.generateKeys(t.KeyPurpose.Encryption),o=r.pk,a=r.sk;return(e||(e=n("Promise"))).resolve([a.buffer,o.buffer])}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("create_auth_key_pair"),e).mustfix("failed to generate an auth key pair"),e})};u.__nop_name__="LSCreateAuthKeyPair",l.default=u}),98);
__d("LSCreateDebugToken.nop",["ArrayBuffer","Base64Utils","CryptoLogger","I64","LSCreateDerivedKeys.nop","LSCryptoUtils","LSVec","Promise","RetUtil","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("LSCryptoUtils").strToBuf("debug_token_type_"),c=o("LSCryptoUtils").strToBuf("debug_token_rkid"),d=o("LSCryptoUtils").strToBuf("debug_token_anon"),m=(s||(s=o("I64"))).of_string("32"),p=s.of_string("12");function _(e){return Array.from(e.keys()).reduce(function(t,n){var r=e.get(n);return r!=null&&(t[n]=r),t},{})}function f(e){return new Int32Array([new DataView(new Int32Array([e]).buffer).getInt32(0)]).buffer}function g(e,t){var n=t.length,r=o("ArrayBuffer").mergeBuffers([e,f(n)]);return o("ArrayBuffer").mergeBuffers([r,o("LSCryptoUtils").strToBuf(t)])}function h(e,t){var n=t.keys().sort();return n.reduce(function(e,n){var r=t.get(n);return r!=null?g(g(e,n),r):e},g(u,e))}function y(e,t,n,o,a){return r("LSCreateDerivedKeys.nop")(e,t,n,void 0,o,r("LSVec").ofArray([a])).then(function(e){var t=e[0];if(t!=null){var n=r("LSVec").toArray(t);return n.length===1?n[0]:void 0}})}function C(t,a,i,l,u){return(s||(s=o("I64"))).equal((s||(s=o("I64"))).zero,u)?y(t,a,d,l,m).then(function(e){return y(t,a,i,r("nullthrows")(e),(s||(s=o("I64"))).of_int32(i.byteLength))}):(e||(e=n("Promise"))).resolve(i)}function b(e,t,n,o,a,i,l){return y(e,t,n,o,a).then(function(n){return C(e,t,r("nullthrows")(n),i,l)})}var v=function(a,i,l,u,d,f,g){try{return(e||(e=n("Promise"))).all([y(a,i,h(u,g),l,m).then(function(e){return b(a,i,d,r("nullthrows")(e),p,l,f)}),b(a,i,c,l,p,l,f)]).then(function(e){var t=e[0],n=e[1];return o("RetUtil").getNullableRetResult(o("LSCryptoUtils").strToBuf(JSON.stringify({ctx:(s||(s=o("I64"))).equal((s||(s=o("I64"))).zero,f)?"anon":"auth",rkid:o("Base64Utils").fromArrayBuffer(r("nullthrows")(n)),scopes:_(g),type:u,val:o("Base64Utils").fromArrayBuffer(r("nullthrows")(t))})))})}catch(t){return o("CryptoLogger").CryptoLogger("create_debug_token").warn("getExn Error"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())}};v.__nop_name__="LSCreateDebugToken",l.default=v}),98);
__d("LSCreateEncryptionKeyPair.nop",["CreateEncryptionKeyPair"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){return r("CreateEncryptionKeyPair")()};e.__nop_name__="LSCreateEncryptionKeyPair",l.default=e}),98);
__d("LSCreateMinosEpochParams.nop",["EBMinosCheckWasmFeatureSupport","EBMinosQplFlow","FBLogger","MAWCurrentUser","WAResultOrError","cr:5968","cr:6443","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("cr:5968")||n("cr:6443"),u=async function(n,a,i,l,u,c,d){var t,m=await o("EBMinosCheckWasmFeatureSupport").checkWasmFeatureSupport();if(s==null)throw r("err")("createMinosEpochParamsType error: gk is off but still called");if(!m)throw r("err")("createMinosEpochParamsType error: wasm is not supported");var p=o("EBMinosQplFlow").startMinosCreateEpochParamsQpl(),_=await s.createMinosEpochParamsType({epochAnonId:l,epochRootKeyBlob:i,previousEpochAnonId:c,previousEpochHead:d,previousEpochRootKeyBlob:u,qplFlow:p,rawUserFbid:o("MAWCurrentUser").getID()}).catch(function(t){var n=r("FBLogger")("minos"),a=r("getErrorSafe")(t);return n.catching(a).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["createMinosEpochParamsType runtime-error"]))),o("WAResultOrError").makeError({errorName:"runtime-error",failReason:a.message})});if(!_.success){var f;throw p.endFailWithError(_.error.errorName,_.error.failReason),r("err")("createMinosEpochParamsType error: "+_.error.errorName+" "+((f=_.error.failReason)!=null?f:""))}return p.endSuccess(),[_.value.mailboxEncryptionPk,_.value.mailboxSigningPk,_.value.mailboxAuthPk,_.value.epochHead,_.value.selfEpochSignature,(t=_.value.previousEpochSignature)!=null?t:void 0]};u.__nop_name__="LSCreateMinosEpochParamsType",l.default=u}),98);
__d("LSCreateRecoveryCode.nop",["CryptoLogger","GF32RecoveryCodes","GaloisField32","LSResult","Promise","UInt8Array"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){for(;;){var t=o("UInt8Array").getBufferWithRandomValuesFromLength(1),n=new Uint8Array(t)[0];if(n<256-256%e)return n%e}return 0}var u=function(a,i){var t=["2","0"].join("");try{for(var l=[],u=0;u<=33;++u)l.push(s(32));var c=o("GF32RecoveryCodes").getEccForCode(o("GaloisField32").asGf32MatExn(l)),d=l.concat(c),m=o("GaloisField32").matrixToSymbols(o("GaloisField32").asGf32MatExn(d)),p=t+m;return(e||(e=n("Promise"))).resolve(r("LSResult")(p))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("create_recovery_code"),e).mustfix("creating recovery code failed"),e}};u.__nop_name__="LSCreateRecoveryCode",l.default=u}),98);
__d("LSCreateSignatureKeyPair.nop",["CryptoLogger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("LSCreateSignatureKeyPair.nop"),u=function(r,a){return s.load().then(function(t){var r=t.generateKeys(t.KeyPurpose.Signing);return(e||(e=n("Promise"))).resolve([r.sk.buffer,r.pk.buffer])}).catch(function(e){var t=o("CryptoLogger").CryptoLogger("create_signature_key_pair");throw o("CryptoLogger").captureError(t,e).mustfix("Failed to create signing key pair keys"),e})};u.__nop_name__="LSCreateSignatureKeyPair",l.default=u}),98);
__d("LSCreateSignatureWithArmadilloKey.nop",["ArmadilloSignatures","EBDeps","LSResult"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("EBDeps").getDeps().getMAWIdentityKeys().then(function(e){var t=e.identityPrivateKey;return o("ArmadilloSignatures").armadilloSign(t,new Uint8Array(a))}).then(function(e){return r("LSResult")(e.buffer)})};e.__nop_name__="LSCreateSignatureWithArmadilloKey",l.default=e}),98);
__d("LSCreateSignature_v2.nop",["CryptoLogger","LSResult","Promise","UInt8Array","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("LSCreateSignature_v2.nop");function u(e){return r("LSResult")(e)}function c(e,t){return o("UInt8Array").concatBytes([t,e].map(function(e){return new Uint8Array(e)}))}var d=function(r,a,i,l,d){var t=o("CryptoLogger").CryptoLogger("create_signature_v2");return l.byteLength!==1?(t.mustfix("Bad aad for signing, should be 1 byte"),(e||(e=n("Promise"))).resolve(u(void 0))):s.load().then(function(r){var o=r.secretKeyFromBytes(new Uint8Array(i),r.KeyPurpose.Signing);return o!=null?r.sign(o,c(d,l)).then(function(t){return(e||(e=n("Promise"))).resolve(u(t.buffer))}):(t.mustfix("No Signature Private key"),(e||(e=n("Promise"))).resolve(u(void 0)))})};d.__nop_name__="LSCreateSignature_v2",l.default=d}),98);
__d("LSCreateSymmetricEncryptionSecretKey.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){return(e||(e=n("Promise"))).resolve(r("LSResult")(o("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer)).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("create_symmetric_encryption_secret_key"),e).mustfix("Creation of symmetric encryption secret key failed"),e})};s.__nop_name__="LSCreateSymmetricEncryptionSecretKey",l.default=s}),98);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={createScript:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.forEach(function(e){if(typeof window!="undefined"&&typeof window.trustedTypes!="undefined"&&!window.trustedTypes.isScript(e))throw r("err")("Trusted Function requires TrustedScripts args only.")});var a=n.slice(0,-1).join(","),i=n.pop().toString();return"(function anonymous(\n     "+a+"\n     ) {\n     "+i+"\n     })"}},u=r("TrustedTypes").createPolicy("unsafe-function-do-not-use",s);function c(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r("TrustedTypes").isSupportedNatively()&&(e||(e=r("Env"))).useTrustedTypes){var i=u.createScript.apply(u,[""].concat(o));return t.eval(i)}else return babelHelpers.construct(Function,o)}l.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=u,l.createTrustedFunction=c}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","cr:8018","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=function(n){return function(t,r){var o;return e==null||(o=e.qe)==null||(o=o[t])==null||(o=o[n])==null?void 0:o[r]}},a=new Proxy({getBool:n("fb"),getNumber:n("fb"),getString:n("fb")},{get:function(t,r){return r in t?t[r]:{getBool:n(r),getNumber:n(r),getString:n(r)}}}),i=function(n){var t;return e==null||(t=e.gk)==null?void 0:t[n]};i.ig=function(t){var n;return e==null||(n=e.iggk)==null?void 0:n[t]};var l={getBool:function(n){var t;return e==null||(t=e.justknob)==null?void 0:t[n]}};return function(e){var n,s=o("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((n=r("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),n.createScript("qex"),n.createScript("justknobx"),n.createScript("return "+t));return s(i,a,l)(r("LSFactory")(e,{dynamic:!0}))}}var u=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function c(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function d(e,t,n){if(!r("justknobx")._("3078"))return m(e,t,n);if(n==null)throw u(n);switch(n){case 3:return c(e,t);default:throw u(n)}}function m(e,t,n){if(n==null)return r("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!"),s(e,t);switch(n){case 3:return c(e,t);case 2:return s(e,t);case 1:throw r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function p(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,c=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=d(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:c,type:"sync_script"},i.id+":247")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}p.__debugModuleName="LSDatascriptEvaluator",l.default=p}),98);
__d("LSEncryptedBackupsOpStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:0,FAILURE:1,UNKNOWN:2});i.default=e}),66);
__d("LSFindBackup",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsFindBackupStoredProcedure] Beginning execution."),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[1]=a[0],r[2]=a[1],r[3]=a[2],r[4]=a[3],r[5]=a[4],r[6]=a[5],r[7]=a[6],r[8]=a[7],r[9]=a[8],r[10]=a[9],r[11]=a[10],r[12]=a[11],r[13]=a[12],r[14]=a[13],r[15]=a[14],r[16]=a[15],r[17]=a[16],r[18]=a[17],a):(o=l.item,t.sequence([function(e){return r[32]=o.backupTenancy,r[31]=o.encryptionVersion,r[27]=void 0,t.i64.neq(r[27],void 0)?t.resolve(r[28]=r[27]):t.sequence([function(e){return r[33]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]&&(r[43]=(r[33].push(t.i64.cast([0,0])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[43]=(r[33].push(t.i64.cast([0,2])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[43]=(r[33].push(t.i64.cast([0,3])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[43]=(r[33].push(t.i64.cast([0,4])),r[33])),r[38]=t.createArray(),r[39]=t.i64.of_int32(r[33].length),t.i64.gt(r[39],t.i64.cast([0,0]))?t.loopAsync(r[39],function(e){return r[43]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],r[43]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],t})},function(e){return r[46]=(r[38].push(r[44]),r[38])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[43]=t.createArray(),r[44]=t.i64.of_int32(r[38].length),t.i64.gt(r[44],t.i64.cast([0,0]))?t.loopAsync(r[44],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[38],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=(r[43].push(t.i64.to_string(r[47])),r[43])}])}):t.resolve()},function(e){return r[45]=r[43].join(","),r[40]=r[45]}])},function(e){return r[38].some(function(e){return t.i64.eq(r[31],e)})?r[41]=r[31]:r[41]=void 0,t.i64.neq(r[41],void 0)?r[42]=r[41]:r[42]=void 0,r[28]=r[42]}])},function(e){var n;return t.i64.neq(r[28],void 0)?r[29]=r[28]:r[29]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[30]=r[32]:r[30]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[29],r[30],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[1]=n[0],r[2]=n[1],r[3]=n[2],r[4]=n[3],r[5]=n[4],r[6]=n[5],r[7]=n[6],r[8]=n[7],r[9]=n[8],r[10]=n[9],r[11]=n[10],r[12]=n[11],r[13]=n[12],r[14]=n[13],r[15]=n[14],r[16]=n[15],r[17]=n[16],r[18]=n[17]}]))})},function(e){return t.i64.neq(r[1],void 0)?r[20]=t.i64.to_string(r[1]):r[20]=void 0,r[21]=t.i64.of_float(Date.now()),r[22]=t.i64.random(),r[24]="Finishing execution. Execution time: ",r[25]=t.i64.to_string(t.i64.sub(r[21],r[0])),r[26]=" ms",r[23]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsFindBackupStoredProcedure] ",r[23],r[24],r[23],r[25],r[23],r[26]].join("")),t.i64.eq(t.i64.mod_(r[22],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[27]=",",r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFindBackupStoredProcedure",[r[24],r[27],r[25],r[27],r[26]].join(""),r[28],t.i64.cast([0,4]))):t.resolve()},function(e){return o[0]=r[20]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsFindBackupStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSGenerateLocalKeys",["LSArrayGetObjectAt","LSCreateAuthKeyPair.nop","LSCreateEncryptionKeyPair.nop","LSCreateSignatureKeyPair.nop","LSCreateSignature_v2.nop","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][generateLocalKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),e[0]?t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!0}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[29]=new t.Map,r[29].set("error_msg","Expected a nonempty query result"),r[29].set("code",t.i64.cast([0,3])),r[29].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[30]=t.createArray(),r[31]=(r[30].push(r[29]),r[30]),o=[void 0,r[30]],r[17]=o[0],r[18]=o[1]):(n=l.item,r[29]=new t.Map,r[29].set("backup_id",n.backupId),r[29].set("device_public_key_blob",n.devicePublicKeyBlob),r[29].set("device_private_key_blob",n.devicePrivateKeyBlob),r[29].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[29].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[29].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[29].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[29].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[29].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[29].set("orf_client_state_v2_blob",void 0),r[29].set("orf_v2_authority_level",void 0),r[29].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[29].set("device_id",n.deviceId),r[29].set("backup_tenancy",n.backupTenancy),r[29].set("encryption_version",n.encryptionVersion),r[29].set("revision_version",n.revisionVersion),r[29].set("initialize_restore_result",void 0),r[29].set("device_creation_timestamp_sec",void 0),r[29].set("authority_level",n.authorityLevel),a=[r[29],void 0],r[17]=a[0],r[18]=a[1])})},function(e){return r[20]=new t.Map,r[20].set("value",r[17]),r[20].set("errors",r[18]),r[21]=r[20].get("value"),r[21]!==void 0?t.sequence([function(e){return r[29]=r[21].get("backup_id"),r[30]=r[21].get("device_public_key_blob"),r[31]=r[21].get("device_private_key_blob"),r[32]=r[21].get("epoch_storage_public_key_blob"),r[33]=r[21].get("epoch_storage_private_key_blob"),r[34]=r[21].get("epoch_auth_public_key_blob"),r[35]=r[21].get("epoch_auth_private_key_blob"),r[36]=r[21].get("mailbox_root_key_blob"),r[37]=r[21].get("ocmf_client_state_blob"),r[38]=r[21].get("orf_client_state_v2_blob"),r[39]=r[21].get("orf_v2_authority_level"),r[40]=r[21].get("oblivious_validation_token_blob"),r[41]=r[21].get("device_id"),r[42]=r[21].get("backup_tenancy"),r[43]=r[21].get("encryption_version"),r[44]=r[21].get("revision_version"),r[45]=r[21].get("initialize_restore_result"),r[46]=r[21].get("device_creation_timestamp_sec"),r[47]=r[21].get("authority_level"),t.i64.neq(r[41],void 0)?t.sequence([function(e){return r[55]=void 0,t.i64.neq(r[55],void 0)?t.resolve(r[56]=r[55]):t.sequence([function(e){return r[59]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return r[60]&&(r[69]=(r[59].push(t.i64.cast([0,0])),r[59])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[61]&&(r[69]=(r[59].push(t.i64.cast([0,2])),r[59])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return r[62]&&(r[69]=(r[59].push(t.i64.cast([0,3])),r[59])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[63]=t[0],t})},function(e){return r[63]&&(r[69]=(r[59].push(t.i64.cast([0,4])),r[59])),r[64]=t.createArray(),r[65]=t.i64.of_int32(r[59].length),t.i64.gt(r[65],t.i64.cast([0,0]))?t.loopAsync(r[65],function(e){return r[69]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[59],r[69]).then(function(e){var t;return t=e,r[70]=t[0],r[71]=t[1],t})},function(e){return r[72]=(r[64].push(r[70]),r[64])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[69]=t.createArray(),r[70]=t.i64.of_int32(r[64].length),t.i64.gt(r[70],t.i64.cast([0,0]))?t.loopAsync(r[70],function(e){return r[72]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[64],r[72]).then(function(e){var t;return t=e,r[73]=t[0],r[74]=t[1],t})},function(e){return r[75]=(r[69].push(t.i64.to_string(r[73])),r[69])}])}):t.resolve()},function(e){return r[71]=r[69].join(","),r[66]=r[71]}])},function(e){return r[64].some(function(e){return t.i64.eq(r[43],e)})?r[67]=r[43]:r[67]=void 0,t.i64.neq(r[67],void 0)?r[68]=r[67]:r[68]=void 0,r[56]=r[68]}])},function(e){var n;return t.i64.neq(r[56],void 0)?r[57]=r[56]:r[57]=t.i64.cast([0,0]),t.i64.neq(r[42],void 0)?r[58]=r[42]:r[58]=t.i64.cast([0,1]),n=[!0,r[30],r[31],r[32],r[33],r[34],r[35]],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],r[52]=n[4],r[53]=n[5],r[54]=n[6]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] Fetching keys locally failed. Reason: 24"),r[56]="Fetching keys locally failed. Reason: 24",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] ","",r[56]].join("")),r[55]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateLocalKeysStoredProcedure",r[56],r[55],t.i64.cast([0,3]))},function(e){var n;return n=[!1,t.blob("ZGV2aWNlX3B1YmxpY19rZXk="),t.blob("ZGV2aWNlX3ByaXZhdGVfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wcml2YXRlX2tleQ=="),t.blob("ZXBvY2hfYXV0aF9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfYXV0aF9wcml2YXRlX2tleQ==")],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],r[52]=n[4],r[53]=n[5],r[54]=n[6],n}])},function(e){var t;return t=[r[48],r[49],r[50],r[51],r[52],r[53],r[54]],r[22]=t[0],r[23]=t[1],r[24]=t[2],r[25]=t[3],r[26]=t[4],r[27]=t[5],r[28]=t[6],t}]):t.sequence([function(e){return r[29]=r[20].get("errors"),r[30]=r[20].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] Fetching keys locally failed. Reason: 1"),r[32]="Fetching keys locally failed. Reason: 1",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] ","",r[32]].join("")),r[31]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateLocalKeysStoredProcedure",r[32],r[31],t.i64.cast([0,3]))},function(e){var n;return n=[!1,t.blob("ZGV2aWNlX3B1YmxpY19rZXk="),t.blob("ZGV2aWNlX3ByaXZhdGVfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wcml2YXRlX2tleQ=="),t.blob("ZXBvY2hfYXV0aF9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfYXV0aF9wcml2YXRlX2tleQ==")],r[22]=n[0],r[23]=n[1],r[24]=n[2],r[25]=n[3],r[26]=n[4],r[27]=n[5],r[28]=n[6],n}])},function(e){var t;return t=[r[22],r[23],r[24],r[25],r[26],r[27],r[28]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}]):t.sequence([function(e){return t.nativeOperation(n("LSCreateSignatureKeyPair.nop")).then(function(e){var t;return t=e,r[17]=t[0],r[18]=t[1],t})},function(e){return t.nativeOperation(n("LSCreateEncryptionKeyPair.nop")).then(function(e){var t;return t=e,r[19]=t[0],r[20]=t[1],t})},function(e){return t.nativeOperation(n("LSCreateAuthKeyPair.nop")).then(function(e){var t;return t=e,r[21]=t[0],r[22]=t[1],t})},function(e){var t;return t=[!0,r[18],r[17],r[20],r[19],r[22],r[21]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}])},function(e){var o;return r[2]?t.sequence([function(e){return t.nativeOperation(n("LSCreateSignature_v2.nop"),r[4],t.blob("MA=="),r[5]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateSignature_v2.nop"),r[4],t.blob("MQ=="),r[7]).then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){var n;return r[19]=new t.Map,r[19].set("device_private_key",r[4]),r[19].set("device_public_key",r[3]),r[20]=new t.Map,r[20].set("epoch_storage_private_key",r[6]),r[20].set("epoch_storage_public_key",r[5]),r[21]=new t.Map,r[21].set("epoch_auth_private_key",r[8]),r[21].set("epoch_auth_public_key",r[7]),r[22]=new t.Map,r[22].set("device_key",r[19]),r[22].set("epoch_storage_key",r[20]),r[22].set("epoch_storage_public_key_sig",r[17]==null?t.blob("bnVsbA=="):r[17]),r[22].set("epoch_auth_key",r[21]),r[22].set("epoch_auth_public_key_sig",r[18]==null?t.blob("bnVsbA=="):r[18]),n=[r[22],void 0],r[9]=n[0],r[10]=n[1]}]):t.resolve((r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,9])),r[17].set("stored_procedure","LSEncryptedBackupsGenerateLocalKeysStoredProcedure"),r[17].set("error_message",""),o=[void 0,r[17]],r[9]=o[0],r[10]=o[1]))},function(e){return r[11]=t.i64.of_float(Date.now()),r[12]=t.i64.random(),r[14]="Finishing execution. Execution time: ",r[15]=t.i64.to_string(t.i64.sub(r[11],r[0])),r[16]=" ms",r[13]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][generateLocalKeys] ",r[13],r[14],r[13],r[15],r[13],r[16]].join("")),t.i64.eq(t.i64.mod_(r[12],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[17]=",",r[18]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"generateLocalKeys",[r[14],r[17],r[15],r[17],r[16]].join(""),r[18],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[9],r[10]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGenerateLocalKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("checkLSRecoveryCodeMatch",["LSBinaryToHex.nop","LSShape","LSVec","Promise","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a,i,l,s){var u=r("LSVec").toArray(s).map(function(e){return o("LSShape").toRecord(e)}),c=r("LSBinaryToHex.nop")(t,a,r("nullthrows")(i)),d=function(s,u){return s.then(function(o){if(o[0]!=null)return(e||(e=n("Promise"))).resolve(o);var s=r("LSBinaryToHex.nop")(t,a,u.virtual_device_id);return(e||(e=n("Promise"))).all([c,s]).then(function(t){var r=t[0],o=t[1],a=r.length===o.length&&r.every(function(e,t){return e===o[t]});return a?(e||(e=n("Promise"))).resolve([i,l]):(e||(e=n("Promise"))).resolve([void 0,void 0])})})};return u.reduce(d,(e||(e=n("Promise"))).resolve([void 0,void 0]))}l.default=s}),98);
__d("deriveLSKey",["I64","LSCreateDerivedKeys.nop","LSCryptoUtils","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i,l){var s=l==="1"?(e||(e=o("I64"))).of_string("8"):(e||(e=o("I64"))).of_string("16"),u=r("LSVec").ofArray([s,(e||(e=o("I64"))).of_string("32")]);return r("LSCreateDerivedKeys.nop")(t,n,o("LSCryptoUtils").strToBuf(i),void 0,o("LSCryptoUtils").strToBuf(a),u).then(function(e){var t=e[0];if(t==null)return[void 0,void 0];var n=r("LSVec").toArray(t);return n.length===2?[n[0],n[1]]:[void 0,void 0]})}l.default=s}),98);
__d("parseLSRecoveryCode",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e.substring(0,1);if(!(e.length!==40||n!=="1"&&n!=="2")){var r=n==="1"?35:34,o=e.substring(1,2),a=e.substring(2,r+2),i="BackupRecoveryCode_v"+n+"_"+o+"_"+t;return[a,i,n]}}i.default=e}),66);
__d("LSParseRecoveryCode_v2.nop",["CryptoLogger","GF32RecoveryCodes","Promise","checkLSRecoveryCodeMatch","deriveLSKey","parseLSRecoveryCode"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a,i,l,s){var u=o("CryptoLogger").CryptoLogger("parse_recovery_code_v2"),c=r("parseLSRecoveryCode")(i,l);return c!=null?r("deriveLSKey")(t,a,c[0],c[1],c[2]):(s&&u.mustfix("could not parse recovery code with uid"),(e||(e=n("Promise"))).resolve([void 0,void 0]))}var u=new Map([["B","8"],["G","C"],["I","1"],["O","0"]]),c=new RegExp("["+Array.from(u.keys()).join("")+"]","g");function d(e){return e.replace(c,function(e){return u.get(e)||e})}var m=function(a,i,l,u,c){if(l.length!==40)return(e||(e=n("Promise"))).resolve([void 0,void 0]);var t=l.substring(0,2),m=d(l.substring(2,40)),p=o("GF32RecoveryCodes").getCandidateCodes(m),_=function(l,d){return l.then(function(o){return o[0]!=null?(e||(e=n("Promise"))).resolve(o):s(a,i,t+d,u,!1).then(function(t){var o=t[0];return o==null?(e||(e=n("Promise"))).resolve([void 0,void 0]):r("checkLSRecoveryCodeMatch")(a,i,o,t[1],c)}).then(function(e){return e[0]==null?[void 0,void 0]:e})})};return p.reduce(_,(e||(e=n("Promise"))).resolve([void 0,void 0])).then(function(r){return r[0]==null?s(a,i,t+m,u,!0):(e||(e=n("Promise"))).resolve(r)})};m.__nop_name__="LSParseRecoveryCode_v2",l.default=m}),98);
__d("LSGenerateRecoveryCode",["LSCreateRecoveryCode.nop","LSGetViewerFBID","LSLogMebClientEvent.nop","LSParseRecoveryCode_v2.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] Beginning execution."),t.forEach(t.filter(t.db.table(174).fetch(),function(e){return e.recoveryCode==="1SHADOWTESTINGRECOVERYCODE00000000000000"}),function(e){return e.delete()})},function(e){return t.db.table(174).fetch([[[t.i64.cast([0,1])]]]).next().then(function(e,o){var a=e.done,i=e.value;return a?t.sequence([function(e){return t.nativeOperation(n("LSCreateRecoveryCode.nop")).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.db.table(174).add({pk:t.i64.cast([0,1]),recoveryCode:r[15]})},function(e){return r[1]=r[15]}]):(o=i.item,r[1]=o.recoveryCode)})},function(n){return t.forEach(t.db.table(174).fetch([[[t.i64.cast([0,1])]]]),function(t){var n=t.update,r=t.item;return n({virtualDeviceType:e[0],cloudServiceAccount:void 0,hsmPinNormalizationStatus:void 0})})},function(e){return r[3]=t.createArray(),t.db.table(172).fetch().next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=void 0:(n=a.item,r[16]=n.encryptionManagementDelegatorId,t.i64.neq(r[16],void 0)?(t.i64.neq(r[16],t.i64.cast([0,0]))?r[17]=t.i64.to_string(r[16]):r[17]=void 0,r[15]=r[17]):r[15]=void 0,r[4]=r[15])})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return t.nativeOperation(n("LSParseRecoveryCode_v2.nop"),r[1],r[4]==null?t.i64.to_string(r[6]):r[4],r[3]).then(function(e){var t;return t=e,r[7]=t[0],r[8]=t[1],t})},function(e){return r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[1],t.i64.cast([0,0]),r[7]],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure",e.__tables__=["secure_encrypted_backups_generated_recovery_code","encrypted_backups"],a.exports=e}),null);
__d("LSGenerateRecoveryCodeStoredProcedure",["LSGenerateRecoveryCode","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSGenerateRecoveryCode"),a.virtualDeviceType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSGetArmadilloPublicKey.nop",["CryptoLogger","EBDeps","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a){return o("EBDeps").getDeps().getMAWIdentityKeys().then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t.identityPublicKey.buffer))}).catch(function(t){var r=o("CryptoLogger").CryptoLogger("get_armadillo_keys");return r.catching(t).mustfix("Failed to get identity keys."),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSGetArmadilloPublicKey",l.default=s}),98);
__d("LSGetNextEpochAnonId.nop",["CryptoLogger","LSCryptoUtils","LSResult","Promise","XPlatReactTextDecoder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l){var t=o("LSCryptoUtils").strToBuf("0"),s;if(l!=null){var u=l;if(u.byteLength===0)s=t;else{var c=new(o("XPlatReactTextDecoder")).TextDecoder,d=c.decode(u),m=Number.parseInt(d,10),p=m+1;s=o("LSCryptoUtils").strToBuf(String(p))}}else s=t;return(e||(e=n("Promise"))).resolve(r("LSResult")(s)).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("get_next_epoch_anonid"),e).mustfix("Getting next epoch anon id failed"),e})};s.__nop_name__="LSGetNextEpochAnonId",l.default=s}),98);
__d("ObliviousConsistentMappingFunction",["FBLogger","UInt8Array","nullthrows","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ristretto255").__setRef("ObliviousConsistentMappingFunction");function s(e){return e.some(function(e){return e!==0})}function u(e){for(;;){var t=e.getRandom();if(s(t))return t}return new Uint8Array(0)}var c=r("nullthrows")(o("UInt8Array").fromHexString("edd3f55c1a631258d69cf7a2def9de1400000000000000000000000000000010"));function d(e){return"ClientState has length "+String(e)+", expected "+String(32)}function m(e){return"ClientState is greater or equal to max: "+e.toString()}var p="ClientState is zero.";function _(e){var t=e.length;if(t!==32)throw r("FBLogger")("wmi_eb").mustfixThrow(d(t));var n=e.reduce(function(e,t){return e?!0:t>0},!1);if(!n)throw r("FBLogger")("wmi_eb").mustfixThrow(p);for(var o=!1,a=31;a>=0;--a)if(!o){var i=e[a],l=c[a];if(i>l)throw r("FBLogger")("wmi_eb").mustfixThrow("ClientState is greater or equal to max: "+e.toString());i<l&&(o=!0)}if(!o)throw r("FBLogger")("wmi_eb").mustfixThrow("ClientState is greater or equal to max: "+e.toString())}function f(t){return _(t),e.load().then(function(e){var n=u(e.scalar),r=e.scalar.mul(t,n),o=e.scalar.invert(n);return{evolveToken:o,newClientState:r}})}l.checkNonZero=s,l.maxState=c,l.buildInputLengthErrorMsg=d,l.buildInputValueErrorMsg=m,l.getInputZeroErrorMsg=p,l.clientEvolve=f}),98);
__d("LSOcmfClientEvolve_v2.nop",["CryptoLogger","ObliviousConsistentMappingFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("ObliviousConsistentMappingFunction").clientEvolve(new Uint8Array(r)).then(function(e){return[e.newClientState.buffer,e.evolveToken.buffer]}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("ocmf_client_evolve_v2"),e).mustfix("Failed to evolve client."),e})};e.__nop_name__="LSOcmfClientEvolve_v2",l.default=e}),98);
__d("LSPublicEncryptionCreateDecryptedData.nop",["PublicEncryptionCreateDecryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i,l,s,u){return r("PublicEncryptionCreateDecryptedData")(o,a,i,l,s,u)};e.__nop_name__="LSPublicEncryptionCreateDecryptedData",l.default=e}),98);
__d("MWPakeQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(231349365,"1751");l.pakeInitiatorQplEvent=e}),98);
__d("PAKEMessageQplLoggingAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADD_MARKER:0,END_SUCCESS:1,END_FAILURE:2,ADD_ERROR_ANNOTATION:3});i.default=e}),66);
__d("LSQplInteractionHelper.nop",["FBLogger","I64","MWPakeQPLEvents","PAKEMessageQplLoggingAction","Promise","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c){var t=(s||(s=o("I64"))).to_int32(u);switch(t){case r("PAKEMessageQplLoggingAction").ADD_MARKER:l==null?r("FBLogger")("wmi_eb").mustfix("PAKE: markerName is null when adding DS PAKE marker."):r("QPLUserFlow").addPoint(o("MWPakeQPLEvents").pakeInitiatorQplEvent,l);break;case r("PAKEMessageQplLoggingAction").END_FAILURE:l==null?r("FBLogger")("wmi_eb").mustfix("PAKE: markerName is null when adding failure DS PAKE marker."):r("QPLUserFlow").endFailure(o("MWPakeQPLEvents").pakeInitiatorQplEvent,l);break;case r("PAKEMessageQplLoggingAction").END_SUCCESS:r("QPLUserFlow").endSuccess(o("MWPakeQPLEvents").pakeInitiatorQplEvent);break;case r("PAKEMessageQplLoggingAction").ADD_ERROR_ANNOTATION:c==null?r("FBLogger")("wmi_eb").mustfix("PAKE: pakeMessageType is null when annotating PAKE error."):r("QPLUserFlow").addAnnotations(o("MWPakeQPLEvents").pakeInitiatorQplEvent,{int:{errorCode:(s||(s=o("I64"))).to_int32(c)}});break}return(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSQplInteractionHelper",l.default=u}),98);
__d("LSStoreEpoch",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return n[1]="Storing newly derived epoch ",n[2]=t.blobs.to_string(e[2]),n[3]=" authority_level:",n[4]=t.i64.to_string(e[5]),n[5]=" status:",n[6]=t.i64.to_string(e[4]),n[0]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] ",n[0],n[1],n[0],n[2],n[0],n[3],n[0],n[4],n[0],n[5],n[0],n[6]].join("")),t.resolve()},function(n){return(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] Storing epoch in epochs table (regular execution)"),t.filter(t.db.table(169).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.epochId,e[0])&&t.i64.gt(n.authorityLevel,e[5])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(169).put({epochId:e[0],backupId:e[1],epochAnonIdBlob:e[2],epochRootKeyBlob:e[3],epochStatus:e[4],epochHead:e[7],authorityLevel:e[5]}):0})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSEncryptedBackupsStoreEpochStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LogWebQplNOP",["I64","LSIntEnum","Promise","QPLUserFlow","WAHashStringToNumber","WALogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=e==null?null:(c||(c=o("I64"))).to_int32(e);switch(t){case 521476165:return r("qpl")._(521476165,"2432");case 521481602:return r("qpl")._(521481602,"829");default:return null}}function m(t,a,i,l,m,p){return new(s||(s=n("Promise")))(function(n,s){try{var _=m?(u||(u=o("LSIntEnum"))).unwrapIntEnum(m):null,f=d(a);if(f!=null&&i!=null){var g,h={int:{num_messages:(c||(c=o("I64"))).to_int32(l)},string:{message_count:String(l),taskSource:(g=_==null?void 0:_.toString())!=null?g:"unknown"}};p===!0?r("QPLUserFlow").endSuccess(f,{annotations:h,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}):p===!1?r("QPLUserFlow").endFailure(f,i,{annotations:h,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}):(r("QPLUserFlow").addAnnotations(f,h,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}),r("QPLUserFlow").addPoint(f,i,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}))}n()}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["LSLogWebQpl error: ",""])),t),n()}})}l.call=m}),98);
__d("MAWEBFrontendQPLLogger",["EBEnableUnifiedAttachment","EBUnifyLegacyMediaUpload","ExecutionEnvironment","FBLogger","MAWBridgeSafeActionsWorkerAndUI","MAWEBUploadTrackingUtils","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){e!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?(y("point",t),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("point",e,t,n)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:n,pointName:t,qplInstanceKey:e,qplType:"point"}))}function c(e,t){(s||(s=r("ExecutionEnvironment"))).isInWorker?(y("success","upload_tracking_completed"),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("success",e,"upload_tracking_completed",t)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:t,pointName:"upload_tracking_completed",qplInstanceKey:e,qplType:"success"})}function d(e,t,n){(s||(s=r("ExecutionEnvironment"))).isInWorker?(y("fail",t),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("fail",e,t,n)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:n,pointName:t,qplInstanceKey:e,qplType:"fail"})}function m(e){var t=e.deliveryObjectId,n=e.flow,a=e.mediaType,i=e.messageId,l=e.threadId,s=e.traceId;if(_(n)){var u=o("WAHashStringToNumber").hashStringToNumber(s),c={bool:{is_legacy_hardening:o("EBUnifyLegacyMediaUpload").getEnableUnifyLegacyMediaUpload(),is_unified_attachment:o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()},string:{deliveryObjectId:t,flow:n,mediaType:a,messageId:i,threadId:l,traceId:s}};r("QPLUserFlow").start(r("qpl")._(521480391,"1167"),{annotations:c,instanceKey:u})}}function p(e,t,n,a){if(e!=null&&_(n)){var i=o("WAHashStringToNumber").hashStringToNumber(e);if(t){r("QPLUserFlow").endSuccess(r("qpl")._(521480391,"1167"),{instanceKey:i});return}r("QPLUserFlow").endFailure(r("qpl")._(521480391,"1167"),"upload_attachment_backup_failed",{annotations:{string:{error:a!=null?a:"upload_attachment_backup_failed"}},instanceKey:i})}}function _(e){return e==="unified"&&o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()||e==="old"&&!o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()}function f(e,t){e.forEach(function(e){if(e.uploadTrackingInstanceKey!=null){var n={string:{traceId:e.traceId}};u(e.uploadTrackingInstanceKey,t,n)}})}function g(e){return{addAnnotations:function(n){h(e,n)},addPoint:function(n,r){u(e,n,r)},endCancel:function(n,r){d(e,""+(n!=null?n:""),r)},endFail:function(n,r){d(e,n,r)},endSuccess:function(n){c(e,n)},getQPLAttrs:function(){return{instanceKey:e}},isActive:function(){return!0},start:function(){}}}function h(e,t){r("FBLogger")("EBFrontendQPLLogger").warn("addAnnotations not implemented for EB Frontend QPL")}function y(t,n){(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_FRONTEND_QPL_IN_WORKER,t+"."+n)}l.addPointEBUploadTracking=u,l.endEBUploadTracking=c,l.failEBUploadTracking=d,l.startFlowUploadAttachmentBackup=m,l.endFlowUploadAttachmentBackup=p,l.addPointForUploadMessageArray=f,l.makeEBFrontendQplFlowFromInstanceKey=g}),98);
__d("MWEncryptedBackupsInitializeRestore",["EBGetLatestChatJids","EBSetRestoreStatusForInitialRestore","ExecutionEnvironment","FBLogger","LSRequestId","MAWBridge","MAWBridgeSendAndReceive","MAWEBRestoreTrackingUtils","MAWMpsGating","MAWUICacheServices","MpsOverBridge","MpsTypes","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=20;function c(e){var t=r("LSRequestId").generate();return o("MAWMpsGating").isFullMpsEnabled()?d(e,t,m,"FULL_MPS"):d(e,t,p,"MPS")}async function d(t,n,a,i){r("FBLogger")("messenger_web").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Initializing restore with ",""])),i),_(i);try{o("MAWEBRestoreTrackingUtils").markEBRestoreInitial({querySource:"GQL_MAIN_THREAD",traceId:n});var l=await o("EBGetLatestChatJids").getLatestChatJids(t,50);if(l.success===!1){o("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,(s||(s=r("ExecutionEnvironment"))).isInWorker,"latestChatJidsResultOrError: "+r("getErrorSafe")(l.error).message);return}if(await o("EBSetRestoreStatusForInitialRestore").setRestoreStatusForInitialRestore(l.value,t),o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()||r("gkx")("2792")){var u=o("MAWUICacheServices").getMAWUICacheServices();r("promiseDone")(u.getFromScratchSkippingCacheAndNotifyListenersFor("snippets",l.value.map(o("MpsTypes").toThreadId)))}await a(l.value),o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(n)}catch(e){throw o("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,(s||(s=r("ExecutionEnvironment"))).isInWorker,"initialize_restore_failed: "+r("getErrorSafe")(e).message),e}finally{await o("EBSetRestoreStatusForInitialRestore").resetClientRestoreStatus(t)}}function m(e){return Promise.all(e.map(function(e){return o("MpsOverBridge").mps().loadMessages({debug:{purpose:"InitializeRestore"},direction:"desc",from:[o("MpsTypes").toTimestamp(Number.MAX_SAFE_INTEGER),void 0],numMessages:u,threadId:o("MpsTypes").toThreadId(e)})})).then(function(){})}function p(e){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs_by_chat_jids_into_maw",{actionType:"pre-load",config:e.map(function(e){return{chatJid:e,direction:"before",includeLowerBoundMsg:!0,lowerBoundSortOrderMs:Date.now(),numMsgs:u}})})}function _(e){o("MAWBridge").getBridge().fireAndForget("backend","logInitRestoreMethodForDebugging",{method:e})}l.initializeRestore=c}),98);
__d("X25519",["$InternalEnum","Promise","WACryptoCurve25519Dependencies","WASignalKeys","WASignalOther","WASignalSignatures"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["Encryption","Signing"]),u=n("$InternalEnum")({PublicKey:0,PrivateKey:1,Signature:2});function c(e,t){if(t===s.Encryption)return[];var n=1;switch(e){case u.PublicKey:n=1;break;case u.PrivateKey:n=2;break;case u.Signature:n=3;break}return[255,n]}function d(e,t,n){var r=c(t,n),o=r.length;if(o<=0)return e;var a=new Uint8Array(o+e.byteLength);return a.set(Array.from(r)),a.set(e,o),a}function m(e,t,n){var r=c(t,n).length;return e.slice(r)}function p(e,t){return{privateKey:d(e.privateKey,u.PrivateKey,t),publicKey:d(e.publicKey,u.PublicKey,t)}}function _(e){var t=p(o("WASignalKeys").makeKeyPair(),e);return{pk:t.publicKey,sk:t.privateKey}}function f(e,t){if(t===s.Encryption)return 32;switch(e){case u.PublicKey:case u.PrivateKey:return 32;case u.Signature:return 64}}function g(e,t,n){var r=c(t,n),o=r.length,a=f(t,n),i=a!=null?o+a:0;if(e.length!==i)return!1;var l=e.subarray(0,o),s=new Uint8Array(r);return s.length===l.length&&s.every(function(e,t){return e===l[t]})}function h(e,t){if(g(e,u.PublicKey,t))return e}function y(e,t){if(g(e,u.PrivateKey,t))return e}function C(e,t){var n=h(e.pkBytes,t),r=y(e.skBytes,t);if(n!=null&&r!=null)return{pk:n,sk:r}}function b(t,r){var a=m(t,u.PrivateKey,s.Signing);return o("WASignalSignatures").signMsg(o("WASignalKeys").makeKeyPairFrom(o("WASignalOther").ensureSize(a,32)),r).then(function(t){var r=d(t,u.Signature,s.Signing);return(e||(e=n("Promise"))).resolve(r)})}function v(e){if(g(e,u.Signature,s.Signing))return e}function S(e,t,n){var r=m(t,u.PublicKey,s.Signing);return o("WASignalSignatures").verifyMsgSignalVariant(o("WASignalKeys").serializeIdentity(r),n,o("WASignalOther").ensureSize(m(e,u.Signature,s.Signing),64))}function R(t,r){var a=r,i=t;return!g(i,u.PublicKey,s.Encryption)||!g(a,u.PrivateKey,s.Encryption)?(e||(e=n("Promise"))).resolve():o("WACryptoCurve25519Dependencies").calculateAgreement(i,a).then(function(t){return(e||(e=n("Promise"))).resolve(new Uint8Array(t))})}l.KeyPurpose=s,l.generateKeys=_,l.publicKeyFromBytes=h,l.secretKeyFromBytes=y,l.keysFromBytes=C,l.sign=b,l.signatureFromBytes=v,l.verify=S,l.exchangeKeys=R}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(t,n,r,o,a,i,l){var e=r("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,n){return new Uint8Array(Array.prototype.slice.call(this,t,n))}});var s={},u=e.lowlevel,c=u.gf([1]);function d(){return[u.gf(),u.gf(),u.gf(),u.gf()]}var m=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),p=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function _(e,t,n){for(var r=new Float64Array(64),o=0;o<32;o++)for(var a=0;a<32;a++)r[o+a]+=t[o]*n[a];u.modL(e,r)}function f(e,t){_(e,t,t)}function g(e,t){for(var n=0;n<32;n++)e[n]=t[n];for(var r=251;r>=0;r--)f(e,e),(p[r>>3]>>(r&7)&1)!==0&&_(e,e,t)}var h=u.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),y=u.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),C=u.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),b=u.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),v=u.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function S(e){var t=new Uint8Array(32);u.pack25519(t,e);for(var n=1,r=0;r<32;r++)n&=t[r]===0;return n}function R(e,t,n){for(var r,o=-n,a=0;a<16;a++)r=e[a]^t[a],r&=o,e[a]^=r}function L(e){var t=new Uint8Array(32);return u.pack25519(t,e),t[0]&1}function E(e,t){u.Z(e,u.gf(),t)}function k(e,t,n){var r=u.gf();E(r,t),u.set25519(e,t),R(e,r,n)}function I(e,t){k(e,t,L(t))}function T(e,t,n){var r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf();u.S(r,n),u.M(r,r,n),u.S(e,r),u.M(e,e,n),u.M(e,e,t),u.pow2523(e,e),u.M(e,e,r),u.M(e,e,t),u.S(o,e),u.M(o,o,n),u.Z(a,o,t),u.A(i,o,t),u.M(l,t,h),u.A(l,o,l);var c=S(a),d=S(i),m=S(l);return u.M(s,e,h),R(e,s,d|m),I(e,e),c|d}function D(e){var t=u.gf(),n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf(),_=u.gf(),f=u.gf(),g=u.gf(),y=u.gf(),b=u.gf(),v=u.gf(),S=0,E=new Uint8Array(32);return u.A(m,e[2],e[1]),u.Z(v,e[2],e[1]),u.M(m,m,v),u.M(p,e[0],e[1]),u.S(_,p),u.M(_,m,_),T(a,c,_),u.M(t,a,m),u.M(n,a,p),u.M(b,t,n),u.M(b,b,e[3]),u.M(i,e[0],h),u.M(l,e[1],h),u.M(o,t,C),u.M(d,e[3],b),S=L(d),f=u.gf(e[0]),g=u.gf(e[1]),r=u.gf(n),R(f,l,S),R(g,i,S),R(r,o,S),u.M(y,f,b),k(g,g,L(y)),u.Z(s,e[2],g),u.M(s,r,s),I(s,s),u.pack25519(E,s),E}function x(e){for(var t=e[31]&127^127,n=30;n>0;n--)t|=e[n]^255;t=(t|0)-1>>8;var r=236-(e[0]|0)>>8;return 1-((t&r|e[0])&1|(e[31]&255)>>7)}function $(e,t){var n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf();if(x(t)===0)return-1;u.unpack25519(o,t),u.S(a,o),u.set25519(i,c),u.Z(i,i,a),u.S(s,i),u.set25519(l,c),u.A(l,l,a),u.S(d,l),u.M(m,u.D,s),E(m,m),u.Z(m,m,d),u.M(p,m,d),u.set25519(r,c);var _=T(n,r,p);return u.M(e[0],n,l),u.M(e[1],n,e[0]),u.M(e[1],e[1],m),u.M(e[0],e[0],o),u.A(e[0],e[0],e[0]),I(e[0],e[0]),u.M(e[1],i,e[1]),u.set25519(e[2],c),u.M(e[3],e[0],e[1]),-(1-_|L(e[3])|S(e[1]))}function P(e,t){var n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf(),_=u.gf(),f=u.gf(),g=u.gf(),C=u.gf();u.set25519(o,c),u.S(a,t),u.M(a,h,a),u.A(m,a,o),u.M(m,m,b),u.set25519(n,c),E(n,n),u.A(i,a,u.D),u.M(p,a,u.D),u.Z(p,n,p),u.M(p,p,i);var S=1-T(l,m,p);u.M(s,l,t),I(s,s),E(s,s),R(l,s,S),R(n,a,S),u.Z(r,a,o),u.M(r,r,n),u.M(r,r,v),u.Z(r,r,p),u.A(_,l,l),u.M(_,_,p),u.M(f,r,y),u.S(d,l),u.Z(g,o,d),u.A(C,o,d),u.M(e[0],_,C),u.M(e[1],g,f),u.M(e[2],f,C),u.M(e[3],_,g)}function N(e){var t=u.gf(),n=u.gf(),r=d(),o=d();return u.unpack25519(t,e.slice(0,32)),u.unpack25519(n,e.slice(32,64)),P(r,t),P(o,n),u.add(r,o),r}function M(e){var t=d();return u.scalarbase(t,e),D(t)}function w(e,t){var n=d(),r=d();if($(n,t)!==0)throw new Error("Invalid argument");return u.scalarmult(r,n,e),D(r)}function A(e){var t=d();return $(t,e)!==-1}function F(e,t){var n=d(),r=d();if($(n,e)===-1)throw new Error("Invalid argument");if($(r,t)===-1)throw new Error("Invalid argument");return[n,r]}function O(e,t){var n=F(e,t),r=n[0],o=n[1];return u.add(r,o),D(r)}function B(e,t){var n=u.gf();E(n,t[3]);var r=u.gf();E(r,t[0]);var o=[r,t[1],t[2],n];u.add(e,o)}function W(e,t){var n=F(e,t),r=n[0],o=n[1];return B(r,o),D(r)}function q(){var t=e.randomBytes(64);return N(t)}function U(e){return D(N(e))}function V(){return D(q())}function H(){var t=new Uint8Array(32),n=0;do{t=e.randomBytes(32),t[31]&=31;var r=32,o=1;do r--,n|=t[r]-u.L[r]>>8&o,o&=(t[r]^u.L[r])-1>>8;while(r!==0)}while(n===0);return t}function G(e){var t=new Uint8Array(32);return g(t,e),t}function z(e){for(var t=new Float64Array(64),n=0;n<32;n++)t[n]=-e[n];var r=new Uint8Array(32);return u.modL(r,t),r}function j(e,t){for(var n=new Float64Array(64),r=0;r<32;r++)n[r]=e[r]+t[r];var o=new Uint8Array(32);return u.modL(o,n),o}function K(e,t){return j(e,z(t))}function Q(e,t){var n=new Uint8Array(32);return _(n,e,t),n}s.scalarMultBase=M,s.scalarMult=w,s.isValid=A,s.add=O,s.sub=W,s.fromHash=U,s.getRandom=V,s.basePoint=m,s.scalar={},s.scalar.getRandom=H,s.scalar.invert=G,s.scalar.negate=z,s.scalar.add=j,s.scalar.sub=K,s.scalar.mul=Q,s.unsafe={},s.unsafe.point={},s.unsafe.point.toBytes=D,s.unsafe.point.fromBytes=$,s.unsafe.point.fromHash=N,s.unsafe.point.sub=B,s.unsafe.point.add=u.add,s.unsafe.point.scalarMultBase=u.scalarbase,s.unsafe.point.scalarMult=u.scalarmult,s.unsafe.point.getRandom=q,s.unsafe.point.alloc=d,s.unsafe.constants={},s.unsafe.constants.LSub2=p,s.unsafe.constants.sqrtm1=h,s.unsafe.constants.sqrtadm1=y,s.unsafe.constants.invsqrtamd=C,s.unsafe.constants.onemsqd=b,s.unsafe.constants.sqdmone=v,i.exports=s}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(t,n,r,o,a,i){a.exports=n("ristretto255-0.1.1")}),null);/*FB_PKG_DELIM*/
__d("ReStorePersistence",["FBLogger","JSONStringifyBigIntSafe","ReStoreCommonUtils","ReStoreKeyComparer","ReStorePersistenceIds","ReStoreUtils","gkx","isPromise","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=["dir"],s,u,c=d();function d(){return r("gkx")("17880")?"__ReStore_DELETED__":{}}var m={gt:[!1,0],gte:[!0,0],lt:[!0,1],lte:[!1,1]},p=new Set(["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state"]),_=16,f=64,g=64,h=Math.floor(_/2),y=Math.floor(f/2),C=Math.floor(g/2);function b(e){if(e==null)return e;var t=Object.getOwnPropertyNames(e),n={},r,o;for(r=0;r<t.length;r++)o=e[t[r]],n[t[r]]=o;return n}function v(e,t){return t===void 0&&(t=c),e===t}function S(e,t,n){for(var r=0,a=e.length-1;r<=a;){var i=r+a>>1;(n[0]?(u||(u=o("ReStoreKeyComparer"))).compareKey(e[i],t)<0:(u||(u=o("ReStoreKeyComparer"))).compareKey(e[i],t)<=0)?r=i+1:a=i-1}var l=[r,a][n[1]];return l===e.length?-1:l}var R=(function(){function t(e,t,n,r,o,a){this.$2=t,this.$3=n,this.$1=e,this.$4=r,this.$5=o,this.$6=a}var n=t.prototype;return n.$7=function(t){return t==null?"root":"index("+t+")"},n.$8=function(t,n){return o("ReStoreUtils").getOrCreate(this.$1,n,function(){return{children:[].concat(t.children),isLeaf:!0,keys:[].concat(t.keys),nextId:t.nextId,prevId:t.prevId}})},n.$9=function(t,n){return o("ReStoreUtils").getOrCreate(this.$1,n,function(){return{children:[].concat(t.children),isLeaf:!1,keys:[].concat(t.keys)}})},n.$10=function(t,n){return o("ReStoreUtils").getOrCreate(this.$1,n,function(){return{headId:t.headId,rootId:t.rootId,tailId:t.tailId}})},n.$11=function(t,n){if(!t.length)return[0,0];var e=S(t,n,m.gte);return e===-1?[t.length,0]:(u||(u=o("ReStoreKeyComparer"))).compareKey(t[e],n)===0?[e,1]:[e,0]},n.$12=function*(t,n,o,a){for(var e=yield*this.$13(t,n),i=e,l=n,s=-1;!i.isLeaf;){if(a==null||a.push([i,l,s]),i.keys==null){if(p.has(this.$2)){var u,c;(u=(c=this.$4).logError)==null||u.call(c,this.$2,this.$5,"dbCorruption",{})}throw r("FBLogger")("messenger_web").mustfixThrow("Encountered not leaf node without keys")}s=S(i.keys,o,m.gt),s===-1&&(s=i.keys.length),l=i.children[s],i=yield*this.$13(t,l)}return[i,l,s]},n.$14=function*(t,n){this.$3();var e=this.$1.get(n);if(!v(e)){if(e!==void 0)return e;var o=this.$4.get(t,this.$2,n,this.$5);return(s||(s=r("isPromise")))(o)?yield o:o}},n.$13=function*(t,n){var e=yield*this.$14(t,n);if(e===void 0){var o,a,i=this.$1.get(n);throw(o=(a=this.$4).logError)==null||o.call(a,this.$2,this.$5,"dbCorruption",{deletedInThisTxn:v(i)?"true":"false",id:r("JSONStringifyBigIntSafe")(n)||""}),r("FBLogger")("messenger_web").mustfixThrow("value not found")}return e},n.$15=function*(t,n){var e,r=(e=yield*this.$14(t,o("ReStorePersistenceIds").idForNextId))!=null?e:0;return this.$1.set("nextId",r+1),this.$1.set(r,n),r},n.$16=function(t,n){this.$3(),this.$1.set(t,n)},n.incrementSeed=function*(t,n){var e,r=(e=yield*this.$14(t,"seed"))!=null?e:0;return n===void 0?(this.$1.set("seed",r+1),r):(n>=r&&this.$1.set("seed",n+1),n)},n.readData=function*(t,n){return yield*this.$14(t,n)},n.$17=function*(t,n,r){var e=yield*this.$14(t,this.$7(n));if(e!=null){var a=yield*this.$12(t,e.rootId,r),i=a[0],l=S(i.keys,r,m.gte);if(!(l===-1||(u||(u=o("ReStoreKeyComparer"))).compareKey(i.keys[l],r)!==0))return i.children[l]}},n.tableGet=function*(t,n){var e=yield*this.$17(t,void 0,n);if(e!==void 0)return yield*this.$18(t,e)},n.$18=function*(t,n){return Array.isArray(n)?n[0]:yield*this.$13(t,n)},n.$19=function*(t,n,o,a){if(Array.isArray(n)){var e=yield*this.$17(t,void 0,n);if(e==null)throw r("gkx")("3570")&&this.$6(o,a,this.$2),r("FBLogger")("messenger_web").mustfixThrow("Encountered value in index %s but not found in table %s",o,this.$2);return yield*this.$18(t,e)}return yield*this.$13(t,n)},n.indexGet=function*(t,n,r){var e=yield*this.$17(t,n,r);if(e!=null)return yield*this.$19(t,e,n,r)},n.getId=function*(t,n){var e=yield*this.$17(t,void 0,n);return Array.isArray(e)?n:e},n.tableSet=function*(t,n,r){var e,o=this.$4.shouldInline(this.$2,r),a=this.$7(),i=yield*this.$14(t,a);if(i==null){o||(e=yield*this.$15(t,r));var l={children:[e!=null?e:[r]],isLeaf:!0,keys:[n]},s=yield*this.$15(t,l);return this.$16(a,{headId:s,rootId:s,tailId:s}),[e!=null?e:n,!1]}var u=[],d=yield*this.$12(t,i.rootId,n,u),m=d[0],p=d[1],_=this.$11(m.keys,n),f=_[0],g=_[1],h=!1;if(g===1){var y=m.children[f];if(!Array.isArray(y))if(h=!0,o)this.$1.set(y,c);else return this.$16(y,r),[y,!1]}var C=this.$8(m,p);return o||(e=yield*this.$15(t,r)),g===0&&C.keys.splice(f,0,n),C.children.splice(f,g,e!=null?e:[r]),yield*this.$20(t,C,p,u,i,a,!0),[e!=null?e:n,g===1&&!(o&&!h)]},n.indexSet=function*(t,n,r,o){var e=this.$7(n),a=yield*this.$14(t,e);if(a==null){var i={children:[o],isLeaf:!0,keys:[r]},l=yield*this.$15(t,i);this.$16(e,{headId:l,rootId:l,tailId:l});return}var s=[],u=yield*this.$12(t,a.rootId,r,s),c=u[0],d=u[1],m=this.$11(c.keys,r),p=m[0],_=m[1];if(!(_===1&&c.children[p]===o)){var f=this.$8(c,d);f.keys.splice(p,_,r),f.children.splice(p,_,o),yield*this.$20(t,f,d,s,a,e,!1)}},n.$20=function*(t,n,r,o,a,i,l){for(var e=n,s,u,c,d=r;e.keys.length>=(e.isLeaf?l?_:f:g);e=s,d=c){var m,p=(m=o.pop())!=null?m:[];u=p[0],c=p[1],c!=null?s=this.$9(u,c):(s={children:[d],isLeaf:!1,keys:[]},this.$10(a,i).rootId=yield*this.$15(t,s));var h=Math.floor(e.keys.length/2),y=void 0;if(e.isLeaf){var C={children:e.children.slice(h),isLeaf:!0,keys:e.keys.slice(h),nextId:e.nextId,prevId:d},b=y=e.nextId=yield*this.$15(t,C),v=C.nextId;v?this.$8(yield*this.$13(t,v),v).prevId=b:this.$10(a,i).tailId=y}else y=yield*this.$15(t,{children:e.children.slice(h+1),isLeaf:!1,keys:e.keys.slice(h+1)});var S=this.$11(s.keys,e.keys[h]),R=S[0],L=S[1];s.keys.splice(R,L,e.keys[h]),s.children.splice(R+1,0,y),e.keys.length=h,e.children.length=h+(e.isLeaf?0:1)}},n.tableDelete=function*(t,n){var e=yield*this.$21(t,void 0,n);return e==null?!1:(Array.isArray(e)||(this.$3(),this.$1.set(e,c)),!0)},n.indexDelete=function*(t,n,r){return(yield*this.$21(t,n,r))!=null},n.$21=function*(t,n,a){var e=this.$7(n),i=yield*this.$14(t,e);if(i!=null){var l=[],s=yield*this.$12(t,i.rootId,a,l),d=s[0],_=s[1],f=s[2],g=this.$8(d,_),b=S(d.keys,a,m.gte);if(!(b===-1||(u||(u=o("ReStoreKeyComparer"))).compareKey(d.keys[b],a)!==0)){var v=g.children[b];g.keys.splice(b,1),g.children.splice(b,1);for(var R=g,L=_,E=f,k,I,T,D;R.keys.length<(R.isLeaf?n==null?h:y:C)&&l.length;x=[k,T,D],R=x[0],L=x[1],E=x[2],x){var x,$=l.pop();I=$[0],T=$[1],D=$[2],k=this.$9(I,T);var P=[[{nodeId:k.children[E-1]},{node:R,nodeId:L},E-1],[{node:R,nodeId:L},{nodeId:k.children[E+1]},E]].filter(function(e){var t=e[0],n=e[1];return t.nodeId!==void 0&&n.nodeId!==void 0});for(var N of P){var M=N[0],w=N[1],A=N[2],F=M.node=M.node||(yield*this.$13(t,M.nodeId)),O=w.node=w.node||(yield*this.$13(t,w.nodeId)),B=R.isLeaf?n==null?h:y:C;if(F.keys.length+w.node.keys.length>=B*2){if(R.isLeaf){var W=this.$8(F,M.nodeId),q=this.$8(O,w.nodeId),U=[].concat(W.children,q.children),V=[].concat(F.keys,O.keys);W.children=(q.children=U).splice(0,B),W.keys=(q.keys=V).splice(0,B),k.keys[A]=V[0]}else{var H=this.$9(F,M.nodeId),G=this.$9(O,w.nodeId),z=[].concat(H.children,G.children),j=[].concat(H.keys,[k.keys[A]],G.keys);H.children=(G.children=z).splice(0,B+1),k.keys[A]=j.splice(B,1)[0],H.keys=(G.keys=j).splice(0,B)}return v}}for(var K of P){var Q=K[0],X=K[1],Y=K[2];if(R.isLeaf){var J=this.$8(Q.node,Q.nodeId),Z=this.$8(X.node,X.nodeId);J.children=[].concat(J.children,Z.children),J.keys=[].concat(J.keys,Z.keys),Z.keys.length=0;var ee=Z.nextId;if(ee){var te=this.$8(yield*this.$13(t,ee),ee);te.prevId=Q.nodeId}else this.$10(i,e).tailId=Q.nodeId;J.nextId=Z.nextId}else{var ne=this.$9(Q.node,Q.nodeId),re=this.$9(X.node,X.nodeId);ne.children=[].concat(ne.children,re.children),ne.keys=[].concat(ne.keys,[k.keys[Y]],re.keys)}k.keys.splice(Y,1),k.children.splice(Y+1,1),this.$1.set(X.nodeId,c);break}}var oe=yield*this.$13(t,i.rootId);if(!oe.keys.length&&oe.children.length){if(oe.isLeaf){if(p.has(this.$2)){var ae,ie;(ae=(ie=this.$4).logError)==null||ae.call(ie,this.$2,this.$5,"dbCorruption",{})}throw r("FBLogger")("messenger_web").mustfixThrow("cannot be leaf")}this.$1.set(i.rootId,c),this.$10(i,e).rootId=oe.children[0]}return v}}},n.btreeIterator=function(n,a,i){var t=i===void 0?{}:i,l=t.dir,s=l===void 0?"asc":l,c=babelHelpers.objectWithoutPropertiesLoose(t,e);function d(){if(s==="asc"){if(Object.prototype.hasOwnProperty.call(c,"gt"))return c.gt;if(Object.prototype.hasOwnProperty.call(c,"gte"))return c.gte}else{if(Object.prototype.hasOwnProperty.call(c,"lt"))return c.lt;if(Object.prototype.hasOwnProperty.call(c,"lte"))return c.lte}}function p(e){return s==="asc"?Object.prototype.hasOwnProperty.call(c,"gt")?S(e.keys,c.gt,m.gt):Object.prototype.hasOwnProperty.call(c,"gte")?S(e.keys,c.gte,m.gte):0:Object.prototype.hasOwnProperty.call(c,"lt")?S(e.keys,c.lt,m.lt):Object.prototype.hasOwnProperty.call(c,"lte")?S(e.keys,c.lte,m.lte):e.keys.length-1}if(Object.prototype.hasOwnProperty.call(c,"gt")&&Object.prototype.hasOwnProperty.call(c,"gte"))throw r("FBLogger")("messenger_web").mustfixThrow("cannot specify both greater than and greater than or equal");if(Object.prototype.hasOwnProperty.call(c,"lt")&&Object.prototype.hasOwnProperty.call(c,"lte"))throw r("FBLogger")("messenger_web").mustfixThrow("cannot specify both less than and less than or equal");var _,f=this;return{next:function*(t){var e,i,l,g;if(_==null){var h=yield*f.$14(n,f.$7(a));if(h==null)return{done:!0};var y=d();if(y!==void 0){var C=yield*f.$12(n,h.rootId,y);i=C[0],l=C[1]}else if(s==="asc"){var b=[yield*f.$13(n,h.headId),h.headId];i=b[0],l=b[1]}else{var v=[yield*f.$13(n,h.tailId),h.tailId];i=v[0],l=v[1]}e=p(i)}else{var R=_;if(e=R.i,g=R.key,l=R.nodeId,i=yield*f.$14(n,l),t!=null){if((u||(u=o("ReStoreKeyComparer"))).compareKey(t,g)===(s==="asc"?-1:1))throw r("FBLogger")("messenger_web").mustfixThrow("key must be ahead of current key");if(i==null||(u||(u=o("ReStoreKeyComparer"))).compareKey(t,i.keys[0])<0||(u||(u=o("ReStoreKeyComparer"))).compareKey(t,i.keys[i.keys.length-1])>0){var L=yield*f.$14(n,f.$7(a));if(L==null)return{done:!0};var E=yield*f.$12(n,L.rootId,t);i=E[0],l=E[1]}e=S(i.keys,t,m[s==="asc"?"gte":"lte"])}else{if(i==null||e<0||e>=i.keys.length||(u||(u=o("ReStoreKeyComparer"))).compareKey(i.keys[e],g)!==0){if(i==null||!i.keys.length||(u||(u=o("ReStoreKeyComparer"))).compareKey(g,i.keys[0])<0||(u||(u=o("ReStoreKeyComparer"))).compareKey(g,i.keys[i.keys.length-1])>0){var k=yield*f.$14(n,f.$7(a));if(k==null)return{done:!0};var I=yield*f.$12(n,k.rootId,g);i=I[0],l=I[1]}e=S(i.keys,g,m[s==="asc"?"lte":"gte"])}e+=s==="asc"?1:-1}}if(e<0||e>=i.keys.length)if(s==="asc"){if(i.nextId===void 0)return{done:!0};l=i.nextId,i=yield*f.$13(n,l),e=0}else{if(i.prevId===void 0)return{done:!0};l=i.prevId,i=yield*f.$13(n,l),e=i.keys.length-1}if(g=i.keys[e],_={i:e,key:g,node:i,nodeId:l},e<0||e>=i.keys.length)return{done:!0};var T=s==="asc"?Object.prototype.hasOwnProperty.call(c,"lt")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.lt)>=0||Object.prototype.hasOwnProperty.call(c,"lte")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.lte)>0:Object.prototype.hasOwnProperty.call(c,"gt")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.gt)<=0||Object.prototype.hasOwnProperty.call(c,"gte")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.gte)<0;return T?{done:!0}:{done:!1,value:[i.keys[e],i.children[e]]}}}},n.tableEntries=function(t,n){n===void 0&&(n={});var e=this.btreeIterator(t,void 0,n),r=this;return{next:function*(o){var n=yield*e.next(o);if(n.done)return n;var a=n.value,i=a[0],l=a[1],s=yield*r.$18(t,l);return{done:!1,value:[i,s]}}}},n.indexEntries=function(t,n,r){r===void 0&&(r={});var e=this.btreeIterator(t,n,r),o=this;return{next:function*(a){var r=yield*e.next(a);if(r.done)return r;var i=r.value,l=i[0],s=i[1],u=yield*o.$19(t,s,n,l);return{done:!1,value:[l,u]}}}},n.keys=function(t,n,r){r===void 0&&(r={});var e=this.btreeIterator(t,n,r);return{next:function*(n){var t=yield*e.next(n);if(t.done)return t;var r=t.value,o=r[0];return{done:!1,value:o}}}},n.clearIds=function*(t,n){this.$3();var e=this.$7(n),r=yield*this.$14(t,e);if(this.$3(),r!=null){for(var o=yield*this.$13(t,r.rootId),a=[{id:r.rootId,node:o}];a.length>0;){var i=a.shift(),l=i.id,s=i.node;if(!s.isLeaf)for(var u of s.children){var d=yield*this.$14(t,u);d!=null&&a.push({id:u,node:d})}this.$1.set(l,c)}this.$1.set(e,c)}},n.readSeed=function*(t){var e;return(e=yield*this.$14(t,o("ReStorePersistenceIds").idForSeed))!=null?e:0},n.remove=function(t,n){this.$3(),this.$1.set(n,c)},n.writeData=function(t,n,r){this.$16(n,b(r))},n.writeNewData=function*(t,n){return yield*this.$15(t,b(n))},t})(),L=(function(){function e(e,t,n,a,i){var l=this;this.$2=new Map,this.$6=!1,this.$3=function(){if(l.$6)throw a==null||a.mark("transaction_closed"),r("FBLogger")("messenger_web").mustfixThrow("Transaction has closed");n()},this.$4=t,this.$1=e,this.$5={get:function(n,r,a){var e=o("ReStoreUtils").getOrCreate(l.$1,r,function(){return new Map}),i=e.get(a);if(!v(i))return i!==void 0?i:t.get(n,r,a,"readwrite")},logError:t.logError,shouldInline:t.shouldInline},this.$7=i}var t=e.prototype;return t.flush=function(){for(var e of this.$2){var t=e[0],n=e[1],r=o("ReStoreUtils").getOrCreate(this.$1,t,function(){return new Map});for(var a of n){var i=a[0],l=a[1];r.set(i,l)}}this.$6=!0},t.table=function(t){return new R(o("ReStoreUtils").getOrCreate(this.$2,t,function(){return new Map}),t,this.$3,this.$5,"readwrite",this.$7)},e})(),E=(function(){function e(e,t,n,o){var a=this;this.$1=new Map,this.$2=!1,this.$7=function(){if(a.$2)throw r("FBLogger")("messenger_web").mustfixThrow("Transaction has closed: %s",a.$5)},this.$3=e,this.$4=t,this.types=e.types,this.$5=n,this.$6=o}var t=e.prototype;return t.close=function(){this.$2=!0},t.flush=async function(t){t===void 0&&(t={upgrade:!1}),await this.$3.flush(this.$1,t),this.$2=!0},t.tablePermitsSynchronousIO=function(t){var e,n,r;return(e=(n=(r=this.$3).permitsSynchronousIO)==null?void 0:n.call(r,t))!=null?e:!1},t.table=function(t){return new R(o("ReStoreUtils").getOrCreate(this.$1,t,function(){return new Map}),t,this.$7,this.$3,this.$4,this.$6)},t.createNested=function(t){return new L(this.$1,this.$3,this.$7,t,this.$6)},e})();function k(e){function t(t,n,a){r("promiseDone")((async function(){await e.runExclusively(function(){return Promise.resolve([async function(){var r=new E(e,"readwrite",void 0,function(){});await o("ReStoreCommonUtils").gen(r.table(a).indexDelete(new WeakMap,t,n)),await r.flush()},"readwrite"])},"fixBrokenIndex")})())}return{clearCache:e.clearCache,close:e.close,createTransaction:function(r,o){return new E(e,r,o,t)},isClosed:e.isClosed||function(){return!1},isPersistenceSupported:e.isPersistenceSupported,logError:e.logError,runExclusively:e.runExclusively}}l.sentinelDeleted=c,l.isDeletedValue=v,l.ReStoreDbStoreTable=R,l.ReStoreDbStoreTransaction=E,l.createDbStore=k}),98);
__d("EBDBEbsmApi",["$InternalEnum","EBDB","FBLogger","I64","QPLUserFlow","ReStorePersistence","getErrorSafe","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],u=n("$InternalEnum").Mirrored(["Success","EmptyDb"]);function c(t){var n={};for(var r of Object.keys(t)){var a=t[r];typeof a=="bigint"?n[r]=(e||(e=o("I64"))).of_string(String(a)):n[r]=a}return n}async function d(t){var n=await o("EBDB").getEBDB(),r=Array.from(t.keys());await n.runInTransaction(r,"readwrite",async function(n){var r=[],a=async function(){var t=l[0];i=l[1];var a=i.toAdd,s=i.toDelete,u=o("EBDB").schema==null?void 0:o("EBDB").schema[t];r.push(n.stores[t].bulkDelete(s.map(function(t){var n=typeof t=="object"?t==null?void 0:t[u.primaryKey]:null;if(n!=null)return(e||(e=o("I64"))).isI64(n)?BigInt((e||(e=o("I64"))).to_string(n)):n}).filter(function(e){return!!e})),n.stores[t].bulkPut(a.filter(function(e){return typeof e=="object"&&(e==null?void 0:e[u.primaryKey])!=null}).map(function(t){var n={};for(var r of Object.keys(t)){var a=t[r];(e||(e=o("I64"))).isI64(a)?n[r]=BigInt((e||(e=o("I64"))).to_string(a)):n[r]=a}return n})))},i;for(var l of t)await a();await Promise.all(r)},"EBDB - flush EBSM state",i.id+":79")}async function m(e){for(var t=await e.next();t.done===!1;)t=await e.next();return t.value}async function p(e,t,n){var r=e(t),a=new(o("ReStorePersistence")).ReStoreDbStoreTable(r,t,function(){},{get:function(){},logError:function(){},shouldInline:function(){return!1}},"readwrite",function(){});for(var i of n){var l=c(i),s=l[o("EBDB").schema[t].primaryKey];await m(a.tableSet(new WeakMap,[s],l))}}async function _(e){r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_LOAD_DATA_FROM_EBDB");var t=await o("EBDB").getEBDB(),n=!0,a=new Map;if(await t.runInTransaction(s,"readonly",function(e){return Promise.all(s.map(async function(t){var r=await e.stores[t].readAll();n=n&&r.length===0,a.set(t,r)}))},"EBDB - fetch for rehydration EBSM",i.id+":186"),r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_LOAD_DATA_FROM_EBDB_DONE"),n)return u.EmptyDb;var l;try{await Promise.all(Array.from(a).map(async function(t){var n=t[0],o=t[1];try{await p(e,n,o),r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_DONE_ON_"+n.toUpperCase())}catch(e){throw l=n,r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED_ON_"+n.toUpperCase()),e}}))}catch(t){var c=r("getErrorSafe")(t);r("FBLogger")("wmi_eb").catching(c).mustfix("rehydrateEBSMFromEBDB: Invalid data to build BTree: %s",l),o("EBDB").clearEbStores();for(var d of s){var m=e(d);m.clear()}return u.EmptyDb}return u.Success}function f(e){return function(t,n){return e.runInTransaction(async function(e){var n=[];for(var r of t){var a=r[0],i=r[1],l=i.toAdd,s=i.toDelete,u=o("EBDB").schema==null?void 0:o("EBDB").schema[a];for(var c of s){var d=typeof c=="object"?c==null?void 0:c[u.primaryKey]:null;d!=null&&n.push(e[a].delete(d))}for(var m of l)typeof m=="object"&&(m==null?void 0:m[u.primaryKey])!=null&&n.push(e[a].put(m))}await Promise.all(n)},"readwrite",void 0,{source:n,type:"user_initiated"},i.id+":254")}}l.EB_STORES=s,l.RehydrationResult=u,l.flushEBSMtoEBDB=d,l.rehydrateEBSMFromEBDB=_,l.updateEBSM=f}),98);
__d("EBDBMetricsConsistencyOperationEnum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Upload:0});i.EBConsistencyOperation=e}),66);
__d("EBMinosCheckWasmFeatureSupport",["qex","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e=await o("wasm-feature-detect").bulkMemory(),t=await o("wasm-feature-detect").bigInt(),n=await o("wasm-feature-detect").referenceTypes();return e&&t&&n}async function s(){var t=await e();if(!t)return!1;var n=r("qex")._("208")===!0;return n}l.checkWasmFeatureSupport=e,l.checkWasFeatureSupportAndQE=s}),98);
__d("EBReadyNotifier",["WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAResolvable")).Resolvable;function s(){e.resolve()}function u(){e.resolveWasCalled()&&(e=new(o("WAResolvable")).Resolvable)}function c(){return e.promise}l.markEBReady=s,l.resetEBReady=u,l.waitForEBReady=c}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]),u=(function(){function t(){}var n=t.prototype;return n.handle=function(n){s.debug("Running default reenrollment trigger handler for reason: "+(e||(e=o("LSIntEnum"))).toNumber(n.deviceReenrollmentReason));for(var t of r("MWEncryptedBackupsLocalStorageEntryEnum").members())s.debug("Clearing local storage key: "+t),t!==r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&o("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(t)},t})();l.DefaultEBReenrollmentTriggerHandler=u}),98);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=new Map,this.$4=new(o("EBReenrollmentTriggerHandler")).DefaultEBReenrollmentTriggerHandler,this.$2=e,this.$5()}var n=t.prototype;return n.$5=function(){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(n,a){if(a.operation==="add"||a.operation==="put"){(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");var l=t.getDefaultHandler();if(a.value.deviceReenrollmentReason!=null){var u;l=(u=t.$1.get((s||(s=o("LSIntEnum"))).unwrapIntEnum(a.value.deviceReenrollmentReason)))!=null?u:l}l.handle(a.value),r("promiseDone")(t.$2.runInTransaction(function(e){return e.encrypted_backups_reenrollment_trigger.delete(a.value.pk)},"readwrite",void 0,void 0,i.id+":77"))}})),this.$3},n.attachHandler=function(t,n){this.$1.set(t,n)},n.getDefaultHandler=function(){return this.$4},t})(),c;function d(e){return c!=null||(c=new u(e)),c}function m(e){return c==null&&d(e),c}l.initEBReenrollmentTriggerListener=d,l.getEBReenrollmentTriggerListener_TESTING_ONLY=m}),98);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){try{var t=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(a)).update(new Uint8Array(i)).finish();return(e||(e=n("Promise"))).resolve(r("LSResult")(o("PakeCpaceUtils").typedArrayToBuffer(t)))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("hmac_v2"),e).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",i==null?void 0:i.byteLength,!1),e}};l.default=s}),98);
__d("IntervalList",["FBLogger","JSONStringifyBigIntSafe","ReQLBounds","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("must not be null");return e}function c(t,n){var a=new Map,i=new Map,l=new Map;function c(e,n){return n==null?!0:(n.gt!==void 0?t(e,n.gt)>0:n.gte!==void 0?t(e,n.gte)>=0:!0)&&(n.lt!==void 0?t(e,n.lt)<0:n.lte!==void 0?t(e,n.lte)<=0:!0)}function*d(t){for(var l=0;l<t.length&&i.size;){l++;var s=t.slice(0,l);l<n&&s.push((e||(e=o("ReStoreKeyComparer"))).MAX_KEY);var u=i.get(r("JSONStringifyBigIntSafe")(s));if(u!=null)for(var d of u)yield d}for(var m of a.entries()){var p=m[0],_=m[1];a.has(p)&&c(t,_)&&(yield p)}}function m(e){var t=l.get(e);if(t!=null){l.delete(e);var n=u(i.get(t));n.delete(e),n.size===0&&i.delete(t)}else a.delete(e)}function p(e,t){var u;if(e&&e.gte!=null&&e.lte!=null&&(u=r("JSONStringifyBigIntSafe")((s||(s=o("ReQLBounds"))).nextKey(e.gte,n)))===r("JSONStringifyBigIntSafe")(e.lte)){var c=i.get(u);c==null&&(c=new Set,i.set(u,c)),c.add(t),l.set(t,u)}else a.set(t,e)}return{delete:m,findIntersecting:d,set:p}}l.default=c}),98);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","getErrorSafe","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=n("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),d=o("MessengerLogHistory").getInstance("client_init"),m=r("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",p={c:{},d:r("MqttWebDeviceID").clientID,s:c.NOT_SYNCING,u:r("pageID")};function _(e){function t(e){o("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(e),window.location.hostname)}var n=r("Cookie").get(m);if(n==null){var a;t((a={},a[o("CurrentMessengerUser").getIDorEIMU()]=e,a));return}var i=JSON.parse(n);if(i.u==null){var l;t(babelHelpers.extends({},i,(l={},l[o("CurrentMessengerUser").getIDorEIMU()]=e,l)))}else{var s;t((s={},s[o("CurrentMessengerUser").getIDorEIMU()]=e,s))}}function f(){r("Cookie").clear(m)}function g(e){if(typeof e!="object"||e==null)return null;var t=e.c,n=e.d,r=e.s,o=e.u,a=typeof r=="string"?c.cast(r):null,i=typeof t=="object"&&t!=null?Object.entries(t).reduce(function(e,t){var n=t[0],r=t[1];return e==null||typeof r!="string"?null:(e[n]=r,e)},{}):null;return typeof n!="string"||a==null||i==null||typeof o!="string"?null:{c:i,d:n,s:a,u:o}}function h(){var e,t=r("Cookie").get(m);if(r("isStringNullOrEmpty")(t))return p;var n=JSON.parse(t),a=o("CurrentMessengerUser").getIDorEIMU(),i=g(n),l=typeof n=="object"&&n!=null?g(n[a]):null;return(e=l!=null?l:i)!=null?e:p}function y(e){var t=h();if(t.u===r("pageID")){var n={};e.forEach(function(e){var t=e[0],r=e[1],a=r.currentCursor,i=r.groupId;a!=null&&(n[(s||(s=o("I64"))).to_string(i)]=a)}),d.debug("Updated sync cookie to set syncing=false, saving latest cursors"),_(babelHelpers.extends({},t,{c:n,s:c.NOT_SYNCING}))}}var C=[1,2,o("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function b(t){var n=o("SortedAsyncIterable").toArray(o("ReQL").union.apply(void 0,C.map(function(e){return e==null?o("ReQL").empty():o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(e))})));if((e||(e=r("isPromise")))(n)){r("promiseDone")(n.then(function(e){y(e)}));return}y(n)}function v(){try{var e=h();d.debug("Updated sync cookie to set syncing=true"),_(babelHelpers.extends({},e,{s:c.SYNCING,u:r("pageID")}))}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("[LS] Failed to sync cookie")}}l.Status=c,l.DEFAULT_COOKIE=p,l.clear=f,l.get=h,l.syncBeforeUnload=b,l.setSyncing=v}),98);
__d("LSDatabase",[],(function(t,n,r,o,a,i){}),null);
__d("LSDatabaseProviderType",[],(function(t,n,r,o,a,i){"use strict";function e(e){return l(e.persistenceTypes)}function l(e){return e.includes("indexeddb")}i.isProviderPersisted=e,i.hasPersistentType=l}),66);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6542"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6542")}),98);
__d("LSEagerlyLoadOnMessenger",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.eagerlyLoadOnMessenger=e}),66);
__d("LSDatascriptEvaluatorMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorMaybeEagerly");function s(){return o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e).load()}l.default=s}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:1232")!=null&&n("cr:1232").shutdownAndClear()}function s(e,t,o,a,i,l){return function(s){return n("cr:1232")!=null?n("cr:1232").getInstance(s,e,t,o,a,i,l):r("FBMqttChannel")}}l.shutdownAndClear=e,l.getInstance=s}),98);
__d("LSSyncGroupsUtils",["CurrentLocale","LSIntEnum","LSMailboxInitialSyncCursor"],(function(t,n,r,o,a,i,l){"use strict";var e,s={locale:r("CurrentLocale").get()},u={canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:(e||(e=o("LSIntEnum"))).ofNumber(0),initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:e.ofNumber(0),minTimeToSyncTimestampMs:e.ofNumber(-1),priority:e.ofNumber(0),regionHint:void 0,sendSyncParams:!0,syncChannel:o("LSMailboxInitialSyncCursor").syncChannel,syncParams:JSON.stringify(s),syncStatus:e.ofNumber(0)},c={epochId:void 0,failureCount:e.ofNumber(0),lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:e.ofNumber(0),lastSyncRequestTimestampMs:e.ofNumber(0),networkTaskIdentifier:void 0,syncDatabaseId:e.ofNumber(0),taskQueueName:""},d=e.ofNumber(9999999999999);l.defaultSyncParams=s,l.defaultSyncGroup=u,l.defaultNetworkRequest=c,l.neverSyncTimestamp=d}),98);
__d("LSVoprfWasmPrewarmDeferred",["WAWasmModuleCache","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSVoprfWasm").__setRef("LSVoprfWasmPrewarmDeferred");async function s(){var t=await e.load(),n=t.locateFile;await o("WAWasmModuleCache").loadWasmModule(n())}l.prewarmAcsVoprfWasmModule=s}),98);
__d("seedUserInfo",["CurrentMessengerUser","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){var n=o("CurrentMessengerUser").getPageMessagingMailboxId(),r=n==="0"?o("CurrentMessengerUser").getIDorEIMU():n;await t._user_info.put({facebookUserId:(e||(e=o("I64"))).of_string(r),id:(s||(s=o("LSIntEnum"))).ofNumber(1)})}l.default=u}),98);
__d("LSDefaultSyncGroups",["CurrentEnvironment","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","LSMailboxInitialSyncCursor","LSPlatformLsInitLog","LSSyncGroupsUtils","LSVoprfWasmPrewarmDeferred","MNetRankType","ReQL","gkx","promiseDone","seedUserInfo"],(function(t,n,r,o,a,i,l){"use strict";var e=["groupId"],s,u,c=new Set;o("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()&&c.add(95);var d=o("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroup(),m=[{groupId:1,lastSyncRequestTimestampMs:o("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:o("LSMailboxInitialSyncCursor").syncChannel,syncParams:o("LSMailboxInitialSyncCursor").syncParams},{groupId:2,lastSyncRequestTimestampMs:o("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:o("LSMailboxInitialSyncCursor").syncChannel},{groupId:16,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},r("gkx")("4246")?null:{groupId:28,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel,syncParams:JSON.stringify(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncParams,{size_type:"wide"}))},{groupId:118,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:198},{groupId:89},{groupId:197}],p=[].concat(m,[{groupId:7,syncParams:JSON.stringify({mnet_rank_types:[r("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE]})},o("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroupForIGDSyncGroup()]),_=[].concat(m,[{groupId:7,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncParams:JSON.stringify({mnet_rank_types:[r("MNetRankType").MESSENGER_USER_SEARCH,r("gkx")("17703")?r("MNetRankType").MESSENGER_SEARCH_NULL_STATE_UNBLENDED:r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE,r("MNetRankType").INBOX_ACTIVE_NOW,r("MNetRankType").MESSENGER_OMNIPICKER_NULLSTATE,r("MNetRankType").MESSENGER_BROADCAST_FLOW_TOP_THREADS,r("MNetRankType").BROADCAST_FLOW_TOP_CONTACTS]})},{groupId:15,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:12,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:26},{groupId:196},d,r("gkx")("24113")?{groupId:120,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel}:null,r("gkx")("26390")?{groupId:6,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp}:null,{groupId:145,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},r("gkx")("5985")?{groupId:202}:null]).concat(r("gkx")("22843")?[{groupId:104,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:143},{groupId:140},{groupId:141}]:[]);async function f(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange("")),r=n.map(function(e){var t=e.syncDatabaseId;return(s||(s=o("LSIntEnum"))).toNumber(t)});return Promise.all(t.map(async function(t){t!=null&&(!r.includes(t.groupId)||c.has(t.groupId))&&await e.network_requests.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultNetworkRequest,{syncDatabaseId:(s||(s=o("LSIntEnum"))).ofNumber(t.groupId)}))}))}async function g(e){var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.sync_groups));return new Map(t.map(function(e){return[(s||(s=o("LSIntEnum"))).toNumber(e.groupId),e]}))}async function h(t,n){var r=await g(t);async function a(n){var a=n.groupId,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=r.get(a);l==null||c.has(a)?await t.sync_groups.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncGroup,i,{groupId:(s||(s=o("LSIntEnum"))).ofNumber(a)})):l!=null&&(l.syncParams!==i.syncParams||i.syncChannel!=null&&!(u||(u=o("I64"))).equal(l.syncChannel,i.syncChannel))&&await t.sync_groups.put(babelHelpers.extends({},l,{syncChannel:i.syncChannel!=null?i.syncChannel:l.syncChannel,syncParams:i.syncParams}))}await Promise.all(n.map(function(e){return e&&a(e)}))}function y(e){return e!=null?e:r("CurrentEnvironment").instagramdotcom?p:_}async function C(e,t){var n=y(t);o("LSPlatformLsInitLog").addPoint("db_seed_start"),await r("seedUserInfo")(e),await f(e,n),await h(e,n),r("promiseDone")(o("LSVoprfWasmPrewarmDeferred").prewarmAcsVoprfWasmModule()),o("LSPlatformLsInitLog").addPoint("db_seed_end")}l.e2eeMetadataSyncGroup=d,l.igdSyncGroups=p,l.defaultSyncGroups=_,l.seedDb=C}),98);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]="",r[3]=void 0,r[4]=void 0,r[5]=void 0,e[0]?t.resolve(0):(r[15]=void 0,t.i64.neq(r[15],void 0)?t.sequence([function(e){return t.count(t.db.table(169).fetch([[[r[15]]]])).then(function(e){return r[16]=e})},function(e){return t.i64.le(r[16],t.i64.cast([0,1]))?t.sequence([function(e){return t.db.table(169).fetch([[[r[15]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[26]=new t.Map,r[26].set("error_msg","Expected a nonempty query result"),r[26].set("code",t.i64.cast([0,3])),r[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[27]=t.createArray(),r[28]=(r[27].push(r[26]),r[27]),o=[void 0,r[27]],r[22]=o[0],r[23]=o[1]):(n=l.item,r[26]=new t.Map,r[26].set("epoch_id",n.epochId),r[26].set("backup_id",n.backupId),r[26].set("epoch_anon_id_blob",n.epochAnonIdBlob),r[26].set("epoch_root_key_blob",n.epochRootKeyBlob),r[26].set("epoch_status",n.epochStatus),r[26].set("epoch_head",n.epochHead),r[26].set("authority_level",n.authorityLevel),a=[r[26],void 0],r[22]=a[0],r[23]=a[1])})},function(e){return r[25]=new t.Map,r[25].set("value",r[22]),r[25].set("errors",r[23]),r[17]=r[25]}]):t.resolve((r[22]=new t.Map,r[22].set("error_msg","Expected at most one result"),r[22].set("code",t.i64.cast([0,4])),r[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[23]),r[17]=r[24]))},function(e){return r[18]=r[17].get("value"),r[18]!==void 0?(r[22]=r[18].get("epoch_id"),r[23]=r[18].get("backup_id"),r[24]=r[18].get("epoch_anon_id_blob"),r[25]=r[18].get("epoch_root_key_blob"),r[26]=r[18].get("epoch_status"),r[27]=r[18].get("epoch_head"),r[28]=r[18].get("authority_level"),r[29]=r[17],r[19]=r[29]):(r[22]=r[17].get("errors"),r[23]=r[17].get("errors"),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[22]),r[19]=r[24]),r[20]=r[19].get("value"),r[20]!==void 0?(r[22]=r[20].get("epoch_id"),r[23]=r[20].get("backup_id"),r[24]=r[20].get("epoch_anon_id_blob"),r[25]=r[20].get("epoch_root_key_blob"),r[26]=r[20].get("epoch_status"),r[27]=r[20].get("epoch_head"),r[28]=r[20].get("authority_level"),r[2]=t.blobs.to_string(r[24]),r[3]=r[22],r[4]=r[25],t.blobs.neq(r[27],void 0)&&(r[5]=r[27]),r[21]=!0):(r[22]=r[19].get("errors"),r[23]=r[19].get("errors"),r[21]=!1)}]):t.resolve())},function(n){return t.i64.neq(r[3],void 0)?t.resolve(0):t.sequence([function(n){return r[15]=void 0,r[16]="",r[17]=void 0,r[18]=void 0,t.forEach(t.filter(t.db.table(169).fetch(),function(n){return e[0]||t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}),function(e){var n=e.item;return r[20]=t.blobs.to_string(n.epochAnonIdBlob),t.i64.eq([0,r[20].length],[0,r[16].length])?r[19]=r[20]>r[16]:r[19]=t.i64.gt([0,r[20].length],[0,r[16].length]),r[19]?(r[15]=n.epochId,r[16]=r[20],r[17]=n.epochRootKeyBlob,r[18]=n.epochHead):0})},function(e){return t.i64.neq(r[15],void 0)&&(r[2]=r[16],r[3]=r[15],r[4]=r[17],t.blobs.neq(r[18],void 0)&&(r[5]=r[18]),r[19]=t.i64.of_float(Date.now())),0}])},function(e){var o,a,i,l,s,u;return r[11]=t.blobs.of_string(r[2]),t.i64.neq(r[3],void 0)?(t.blobs.neq(r[11],void 0)?(t.blobs.neq(r[4],void 0)?(r[19]=new t.Map,r[19].set("epoch_id",r[3]),r[19].set("epoch_root_key",r[4]),r[19].set("epoch_anon_id",r[11]),r[19].set("epoch_head",r[5]),r[20]=new t.Map,r[20].set("epoch_keys",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):(r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,402])),r[19].set("error_message","failed to query latest epoch"),r[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[15]=i[0],r[16]=i[1]):(r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,403])),r[17].set("error_message","failed to query latest epoch"),r[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),l=[void 0,r[17]],r[15]=l[0],r[16]=l[1]),s=[r[15],r[16]],r[6]=s[0],r[7]=s[1]):(r[15]=new t.Map,r[15].set("error_code",t.i64.cast([0,400])),r[15].set("error_message","failed to query latest epoch"),r[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),u=[void 0,r[15]],r[6]=u[0],r[7]=u[1]),r[8]=t.i64.of_float(Date.now()),r[9]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[8],r[0])),r[14]=" ms",r[10]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][getLatestEpochKeys] ",r[10],r[12],r[10],r[13],r[10],r[14]].join("")),t.i64.eq(t.i64.mod_(r[9],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[6],r[7]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("Hmac_v2")(o,a)};e.__nop_name__="LSHmac_v2",l.default=e}),98);
__d("LSTransactionLogger",["cr:8879"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8879")}),98);
__d("LSReStoreQplLogger",["LSTransactionLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{startTracking:function(n,o){var t=r("LSTransactionLogger")==null?void 0:r("LSTransactionLogger").startTracking(n,e,o);return{addAnnotations:function(o){r("LSTransactionLogger")==null||r("LSTransactionLogger").addAnnotations(e,t,o)},end:function(){r("LSTransactionLogger")==null||r("LSTransactionLogger").end(e,t)},fail:function(o){r("LSTransactionLogger")==null||r("LSTransactionLogger").fail(e,t,o)},mark:function(o){r("LSTransactionLogger")==null||r("LSTransactionLogger").mark(e,t,o)},recordLogicalWrite:function(){r("LSTransactionLogger")==null||r("LSTransactionLogger").recordLogicalWrite(t)}}}}}l.createQplLogger=e}),98);
__d("createReStoreEphemeralPersistence",["FBLogger","ReStorePersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function s(t,n){var a=Promise.resolve(),i=new Map;function l(t){return e(i,t,function(){return new Map})}return{flush:function(t){return t.forEach(function(e,t){var n=l(t);e.forEach(function(e,t){o("ReStorePersistence").isDeletedValue(e)?n.delete(t):n.set(t,e)})}),Promise.resolve()},get:function(t,n,r){var e=l(n);return e.get(r)},logError:function(t,n,o,a){if(o==="dbCorruption"){var e,i;throw r("FBLogger")("messenger_web").mustfixThrow("Got unexpected undefined in edb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",n,t,(e=a==null?void 0:a.id)!=null?e:"",(i=a==null?void 0:a.deletedInThisTxn)!=null?i:"")}},permitsSynchronousIO:function(t){return!0},queueCommitWork:void 0,runExclusively:function(t){var e=n==null?void 0:n.startTracking(!1);return e==null||e.addAnnotations({string:{source:"createReStoreEphemeralPersistence",type:"runExclusivelyPromiseChain"}}),new Promise(function(n,r){a=a.then(async function(){var o=await t(),a=o[0],i=o[1];try{n(await a()),e==null||e.end()}catch(t){r(t),e==null||e.fail()}}).catch(function(e){r(e)})})},shouldApplySync:function(){return!1},shouldInline:function(t,n){return!0},shouldSync:function(){return!1},types:["ephemeral"],uniqueId:t}}l.default=s}),98);
__d("createLSReStoreEphemeralPersistence",["LSReStoreQplLogger","MAWCurrentUser","createReStoreEphemeralPersistence","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return r("createReStoreEphemeralPersistence")("LSEphemeral "+e,o("LSReStoreQplLogger").createQplLogger(r("qpl")._(25303045,"817")))}l.createLSReStoreEphemeralPersistence=e}),98);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeStart:n}})}function s(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeEnd:n}})}l.logMemoryForQPLStart=e,l.logMemoryForQPLEnd=s}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBLogger","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WebSession","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("CurrentMessengerUser").getIDorEIMU(),d=r("ReStoreTabNotifier")==null?void 0:r("ReStoreTabNotifier")("mwChat-"+c),m=null,p=!1,_=!1,f=o("EBLogger").EBLogger().tags(["EBSM","Pesistence","MainThread"]);function g(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function h(t){var n=Promise.resolve(),a="flushChangesV2",i=new Map;function l(e){return g(i,e,function(){return new Map})}var c=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();r("QPLUserFlow").start(r("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:c,sessionTabId:o("WebSession").getId()}}}),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").START),o("QPLMemoryUtils").logMemoryForQPLStart(r("qpl")._(521481876,"1407"));async function h(){try{await t.rehydrateEBSMFromEBDB(l),o("QPLMemoryUtils").logMemoryForQPLEnd(r("qpl")._(521481876,"1407")),r("QPLUserFlow").endSuccess(r("qpl")._(521481876,"1407")),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").SUCCESS)}catch(t){r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED");var n=r("getErrorSafe")(t);f.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["An error occured in EBSM hydration when loading EB data: ",""])),n.message),r("QPLUserFlow").endFailure(r("qpl")._(521481876,"1407"),"Hydration failed."),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").FAIL)}}return m=h(),d==null||d.onEventReceive("flushChangesV2",function(e){var n=e.changeSet,i=new Map;if(n.forEach(function(e,t){i.set(t,{toAdd:[],toDelete:[]});var n=l(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=i.get(t))==null||a.toDelete.push(n.get(r))}else{var l;(l=i.get(t))==null||l.toAdd.push(e)}})}),t.updateEBSM==null){f.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ebdbEbsmApi.updateEBSM is not defined"])));return}r("promiseDone")(t.updateEBSM(i,a))}),{flush:async function(n,i){var e,s;if(n.size!==0&&(n.size>0&&n.forEach(function(e,t){e.size===0&&n.delete(t)}),n.size!==0)){var u=((e=i.actionSource)==null?void 0:e.type)==="user_initiated"&&((s=i.actionSource)==null?void 0:s.source)===a;if(u){n.forEach(function(e,t){var n=l(t);e.forEach(function(e,t){o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)?n.delete(t):n.set(t,e)})});return}var c=new Map;n.forEach(function(e,t){c.set(t,{toAdd:[],toDelete:[]});var n=l(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=c.get(t))==null||a.toDelete.push(n.get(r)),n.delete(r)}else{var i;(i=c.get(t))==null||i.toAdd.push(e),n.set(r,e)}})}),d==null||d.postMessage("flushChangesV2",{changeSet:n,fromVersion:"",sentinelDeleted:o("ReStorePersistence").sentinelDeleted,version:""});var p=o("Random").uint32(),_=Array.from(n.keys());r("QPLUserFlow").start(r("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:_}},instanceKey:p}),await m,await t.flushEBSMtoEBDB(c).catch(function(){})}},get:function(t,n,r){var e=l(n);return p?e.get(r):m==null?Promise.reject("rehydration is not complete"):m.then(function(){return p=!0,e.get(r)})},logError:function(n,a,i,l){if((u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,n),i==="dbCorruption"){var e,s;(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,n);var c="Got unexpected undefined in ebsm, mode: "+a+", table: "+n+", id: "+((e=l==null?void 0:l.id)!=null?e:"")+", deletedInThisTxn: "+((s=l==null?void 0:l.deletedInThisTxn)!=null?s:"")+". Deleting EBSM db";f.mustfix(c);var d=o("Random").uint32();o("MAWUnrecoverableDbErrors").setError(new(o("MAWUnrecoverableDbErrors")).EbsmHydrationError(c,!0,d,n),function(){r("promiseDone")(t.clearEbStores(),function(){(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,"db_deleted.main_thread")})}),_||(_=!0,o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full"))}},queueCommitWork:void 0,runExclusively:function(t){return new Promise(function(e,r){n=n.then(async function(){var n=await t(),o=n[0],a=n[1];try{e(await o())}catch(e){r(e)}})})},shouldApplySync:function(){return!1},shouldInline:function(t,n){return!1},shouldSync:function(t,n){return t!=="notifyInMemoryTable"},tabTablesNotifier:function(){return d},types:["ephemeral"],uniqueId:""}}l.default=h}),98);
__d("createReStoreTableNameAllowListPersistence",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r;return{clearCache:function(){e.clearCache==null||e.clearCache(),t.clearCache==null||t.clearCache()},close:function(){e.close==null||e.close(),t.close==null||t.close()},flush:async function(o,a){var r=new Map,i=new Map;o.forEach(function(e,t){n.has(t)?i.set(t,e):r.set(t,e)}),await Promise.all([e.flush(r,a),t.flush(i,a)])},get:function(o,a,i,l){return n.has(a)?t.get(o,a,i,l):e.get(o,a,i,l)},isClosed:function(){return(e.isClosed==null?void 0:e.isClosed())||!1},isPersistenceSupported:e.isPersistenceSupported,logError:function(o,a,i,l){n.has(o)?t.logError==null||t.logError(o,a,i,l):e.logError==null||e.logError(o,a,i,l)},permitsSynchronousIO:function(o){if(n.has(o)){var r;return(r=t.permitsSynchronousIO==null?void 0:t.permitsSynchronousIO(o))!=null?r:!1}else{var a;return(a=e.permitsSynchronousIO==null?void 0:e.permitsSynchronousIO(o))!=null?a:!1}},runExclusively:function(r,o){return e.runExclusively(function(){return new Promise(function(e,n){var a=t.runExclusively(async function(){var t=await r(),n=t[0],o=t[1],i=new Promise(function(t){e([function(){return t(),a},o])});return[async function(){return await i,n()},o]},o);a.catch(n)})},o)},shouldApplySync:function(o,a){return n.has(a)?t.shouldApplySync(o,a):e.shouldApplySync(o,a)},shouldInline:function(o,a){return n.has(o)?t.shouldInline(o,a):e.shouldInline(o,a)},shouldSync:function(o,a){return n.has(a)?t.shouldSync(o,a):e.shouldSync(o,a)},tabTablesNotifier:(r=e.tabTablesNotifier)!=null?r:t.tabTablesNotifier,types:[].concat(e.types,t.types),uniqueId:t.uniqueId+e.uniqueId}}i.default=e}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreTableNameAllowListPersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("createReStoreTableNameAllowListPersistence")(o("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),r("createReStoreEBSMTablesPersistence")(e),r("EBSMProperties").persistedTables);return t}l.makeReStorePersistence=e}),98);
__d("ReStoreCustomMigration",["ReStoreMigrateUtil","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n,r=t.storeTx,a=t.transaction;if(e==null)return o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED;var i=new(o("ReStorePersistedMetadata")).ReStorePersistedCustomMigrationVersion,l=(n=await i.read(r))==null?void 0:n.customMigrationVersion;return e.targetVersion===l?o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED:(await e.migration(l!=null?l:0,a),i.write(r,{customMigrationVersion:e.targetVersion}),o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE)}l.runCustomMigration=e}),98);
__d("ReStoreHooks",["PromiseOrValue"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return{afterAdd:t.reduce(function(t,n){var r=n.onAfterAdd;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),afterEntriesNext:t.reduce(function(e,t){var n=t.onAfterEntriesNext;return n?function(t){return n({tableName:t.tableName,value:e(t)})}:e},function(e){var t=e.value;return t}),afterGet:t.reduce(function(e,t){var n=t.onAfterGet;return n?function(t){return n({tableName:t.tableName,value:e(t)})}:e},function(e){var t=e.value;return t}),afterPut:t.reduce(function(t,n){var r=n.onAfterPut;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),beforeAdd:t.reduce(function(t,n){var r=n.onBeforeAdd;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),beforeDelete:t.reduce(function(t,n){var r=n.onBeforeDelete;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.key;return t}),beforeNotify:t.reduce(function(e,t){var n=t.onBeforeNotify;return n?function(t){var r=e(t),o=r.newValue,a=r.prevValue;return n({newValue:o,prevValue:a,tableName:t.tableName})}:e},function(e){var t=e.newValue,n=e.prevValue;return{newValue:t,prevValue:n}}),beforePut:t.reduce(function(t,n){var r=n.onBeforePut;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),beforeUpsert:t.reduce(function(t,n){var r=n.onBeforeUpsert;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t})}}l.createHookManager=s}),98);
__d("ReStoreIndexeddbPersistenceInitFailure",[],(function(t,n,r,o,a,i){"use strict";var e="ReStoreIndexeddbPersistenceInitFailure",l=(function(t){function n(n){var r;return r=t.call(this,n)||this,r.message=n,r.name=e,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));i.ERROR_NAME=e,i.ReStoreIndexeddbPersistenceInitFailure=l}),66);
__d("ReStoreTransactionDelay",["setTimeout"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e==="background"?new Promise(function(e){return r("setTimeout")(e,0)}):Promise.resolve();await t}l.default=e}),98);
__d("createReStoreSubscriptionManager",["ExecutionEnvironment","FBLogger","IntervalList","PromiseOrValue","ReStoreKeyComparer","ReStoreUtils","getErrorSafe","isPromise","nullthrows","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(t,n,a){var i=new Map,l=new Map;function d(e,t){return(c||(c=o("ReStoreKeyComparer"))).compareValue(e,t)===0}function m(e,t,n,r){for(var o,a=(o=R.get(e))!=null?o:[],i=[],l=0;l<t.length;l++)for(var s=t[l],u=0;u<32&&s!==0;u++){if(s&1){var c=a[(l<<5)+u];if(!d(n[c],r[c])){var m;i[l]=((m=i[l])!=null?m:0)|1<<u%32}}s=s>>>1}return i}function p(e,t){for(var n=0;n<Math.max(e.length,t.length);n++)if((e[n]&t[n])!==0)return!0;return!1}function _(t,n,o,a){try{var i=t(n,o,a);return(e||(e=r("isPromise")))(i)?i.catch(function(e){r("FBLogger")("messenger_web").catching(e).mustfix("error in ReStore subscription async handler")}):i}catch(e){var l=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(l).mustfix("error in ReStore subscription handlers")}}function f(e,t,n,r,a){var i=Array.from(t(r));if(a.operation==="put"&&a.prevValue!=null){var l=a.prevValue,s=[];for(var c of i){var d=c[0],f=c[1];f!=null&&f.forEach(function(e,t){var n;s[t]=((n=s[t])!=null?n:0)|e})}var g=m(e,s,l,a.value);return(u||(u=o("PromiseOrValue"))).all(i.map(function(e){var t=e[0],o=e[1];if(o==null||p(g,o))return _(t,r,a,n)}))}return Promise.all(i.map(function(e){var t=e[0],o=e[1];return _(t,r,a,n)}))}function g(e){return r("nullthrows")((i.has(e)?i:i.set(e,[r("IntervalList")((c||(c=o("ReStoreKeyComparer"))).compareKey,t.tableNames[e].primaryKeyIds.length),new Map])).get(e))}function h(e,n){var a=g(e),i=a[0],l=a[1];return r("nullthrows")((l.has(n)?l:l.set(n,r("IntervalList")((c||(c=o("ReStoreKeyComparer"))).compareKey,t.tableNames[e].indexes[n].length))).get(n))}function y(e,n,a,i,l,s){var d=function(r,o){return f(n,e.findIntersecting,s,r,o)},m=a==null?void 0:o("ReStoreUtils").searchKey(t.tableNames[n],a,l),p=i==null?void 0:o("ReStoreUtils").searchKey(t.tableNames[n],i,l);if(p==null&&m!=null)return d(m,{operation:"delete",prevValue:r("nullthrows")(a)});if(m==null&&p!=null)return d(p,{operation:"add",value:r("nullthrows")(i)});if(m!=null&&p!=null)return(c||(c=o("ReStoreKeyComparer"))).compareKey(m,p)===0?d(m,{operation:"put",prevValue:r("nullthrows")(a),value:r("nullthrows")(i)}):(u||(u=o("PromiseOrValue"))).map(d(m,{operation:"delete",prevValue:r("nullthrows")(a)}),function(){return d(p,{operation:"add",value:r("nullthrows")(i)})})}function C(e,t,n,r){var a=g(e),i=a[0],l=a[1];return(u||(u=o("PromiseOrValue"))).map(y(i,e,t,n,null,r),function(){return(u||(u=o("PromiseOrValue"))).all(Array.from(l.entries()).map(function(o){var a=o[0],i=o[1];return y(i,e,t,n,a,r)}).filter(function(e){return e!=null}))})}function b(){l.forEach(function(e){return e()})}function v(e,t){function o(){var o=new Map;try{for(var a of e){var i=a[0],l=a[1];n(t,i)&&o.set(i,l)}}catch(e){var s=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(s).mustfix("Couldnot format changes to broadcast")}return Array.from(o)}if((s||(s=r("ExecutionEnvironment"))).isInBrowser&&a!=null){var i=o();if(i.length===0)return;a.postMessage(t,i)}}(s||(s=r("ExecutionEnvironment"))).isInBrowser&&a!=null&&a.onEventReceive("notifyTableV2",function(e){r("promiseDone")((async function(){var t=new WeakMap,n=e.values();await(u||(u=o("PromiseOrValue"))).loop(function(e){if(e.done)return{action:"break",value:void 0};var r=e.value,a=r[0],i=r[1],l=i.values();return(u||(u=o("PromiseOrValue"))).map(u.loop(function(e){if(e.done)return{action:"break",value:void 0};var n=e.value,r=n[0],i=n[1];return(u||(u=o("PromiseOrValue"))).map(C(a,r,i,t),function(){return{action:"continue",value:l.next()}})},l.next()),function(){return{action:"continue",value:n.next()}})},n.next()),b()})())});var S=new Map,R=new Map;function L(e,t){if(t==null)return null;var n=S.get(e);n==null&&(n=new Map,S.set(e,n));var r=[];for(var o of t){var a,i=n.get(o);if(i==null){i=n.size,n.set(o,i);var l=R.get(e);l==null&&(l=[],R.set(e,l)),l.push(o)}var s=i>>5,u=i&31;r[s]=((a=r[s])!=null?a:0)|1<<u}return r}return{dispose:function(){i.clear(),l.clear()},notifyCommit:b,notifyTableAndIndexSubscribers:C,notifyTableV2:v,subscribeIndex:function(t,n,r,o,a){var e=h(t,n),i=!1,l=function(t,n,o){return i?Promise.resolve():_(r,t,n,o)},s=[l,L(t,a)];return e.set(o,s),function(){i=!0,e.delete(s)}},subscribeTable:function(t,n,r,o){var e=g(t),a=e[0],i=!1,l=function(t,r,o){return i?Promise.resolve():_(n,t,r,o)},s=[l,L(t,o)];return a.set(r,s),function(){i=!0,a.delete(s)}},subscribeToCommit:function(t){return l.set(t,t),function(){l.delete(t)}}}}l.default=d}),98);
__d("ReStore",["ExecutionEnvironment","FBLogger","JSONStringifyBigIntSafe","ODS","PromiseOrValue","ReStoreCustomMigration","ReStoreHooks","ReStoreIndexeddbPersistenceInitFailure","ReStoreMigrateUtil","ReStoreOperationLock","ReStorePersistedMetadata","ReStorePersistence","ReStoreTable","ReStoreTransactionDelay","ReStoreUtils","clearTimeout","cr:1088","cr:6665","createReStoreSubscriptionManager","getErrorSafe","promiseDone","setImmediate","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(e){function t(){return e.call(this,"ReStore transaction timed out")||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),d={enableRejectingTransaction:!1,enableTransactionTimeout:!1,fbLoggerProject:"maw_db",odsCategoryID:600},m=12e4;function p(t){var a=t.persistence,i=t.hooks,l=i===void 0?[]:i,p=t.customMigration,_=t.loggers,f=_===void 0?{logHistory:void 0,transactionQplLogger:void 0,userFlow:void 0}:_,g=t.config,h=g===void 0?d:g,y=t.schema,C=f.logHistory,b=f.transactionQplLogger,v=f.userFlow,S=o("ReStorePersistence").createDbStore(a),R=a.tabTablesNotifier==null?void 0:a.tabTablesNotifier(),L=y.defaults,E=r("createReStoreSubscriptionManager")(y,a.shouldSync,R),k=o("ReStoreHooks").createHookManager(l),I=S.createTransaction("readonly"),T=a.types.includes("indexeddb"),D={background:{first:null,last:null},sync_script:{first:null,last:null},ui:{first:null,last:null}},x="<first_txn>";v==null||v.addPoint("migration_start"),C==null||C.debug("restore migration start");var $=new(o("ReStoreOperationLock")).WaitForPromiseLock(a.types.includes("devtool")?Promise.resolve():S.runExclusively(function(){return Promise.resolve([async function(){v==null||v.addPoint("migration_execute_start");var e=new Map,t=S.createTransaction("readwrite"),n=M(t,e);C==null||C.debug("migration transaction created");var r={changedKeys:e,clearCache:N,hooksManager:k,loggers:f,storeTx:t,transaction:n};try{var a=await y.migrate(r);v==null||v.addPoint("migration_custom_start");var i=await o("ReStoreCustomMigration").runCustomMigration(p,r);if(C==null||C.debug("migration custom end"),v==null||v.addPoint("migration_custom_end"),i===o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED&&a===o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED){t.close(),C==null||C.debug("restore migration skipped"),v==null||v.addPoint("migration_skipped");return}var l=a!==o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA&&e.size!==0;await t.flush({upgrade:l}),v==null||v.addPoint("migration_execute_end"),C==null||C.debug("restore migration complete")}catch(e){throw t.close(),e}v==null||v.addPoint("migration_end"),C==null||C.debug("restore migration end")},"readwrite"])},"migration").catch(function(e){var t=r("getErrorSafe")(e);throw v==null||v.addAnnotations({string:{migration_error:t.message}}),e instanceof o("ReStoreIndexeddbPersistenceInitFailure").ReStoreIndexeddbPersistenceInitFailure||v==null||v.endFail("migration_error"),C==null||C.debug("restore migration error"),r("FBLogger")("restore_init").catching(t).mustfix("migration failed"),e}));async function P(e,t){var n=new WeakMap;await S.runExclusively(function(){return Promise.resolve([async function(){var r=new Map,a=S.createTransaction("readwrite"),i=M(a,r),l=t.values();await(u||(u=o("PromiseOrValue"))).loop(function(t){if(t.done)return{action:"break",value:void 0};var r=t.value,a=r[0],s=r[1];return(u||(u=o("PromiseOrValue"))).map(u.map(s==null?i.table(e).delete(o("ReStoreUtils").searchKey(y.tableNames[e],a)):i.table(e).put(s),function(){return E.notifyTableAndIndexSubscribers(e,a,s,n)}),function(){return{action:"continue",value:l.next()}})},l.next());try{await a.flush({upgrade:!0})}catch(e){throw a.close(),e}},"readwrite"])},"applyChangesToTable")}function N(){S.clearCache==null||S.clearCache()}function M(e,t,n){return o("ReStoreUtils").createReStoreTransaction(y,L,k,E,e,t,n)}var w;function A(e,t,n,r){return new Promise(function(o,a){h.enableRejectingTransaction&&(w=a);var i=function(){return x=r,e().then(o,a).finally(function(){return x=void 0})};D[t].last==null?D[t].first=D[t].last={value:{code:i,writemode:n}}:D[t].last=D[t].last.next={value:{code:i,writemode:n}}})}function F(e){return S.runExclusively(function(){var e=D.ui.first!=null?D.ui:D.sync_script.first!=null?D.sync_script:D.background;if(e.first==null)return r("FBLogger")(h.fbLoggerProject).mustfix("Expected work is missing"),Promise.resolve([function(){return Promise.resolve({})},"readonly"]);var t=e.first;return e.first===e.last&&(e.last=null),e.first=e.first.next,Promise.resolve([t.value.code,t.value.writemode])},e)}async function O(e,t,n,o){var a;n===void 0&&(n="background"),o===void 0&&(o={source:"unknown",type:"user_initiated"});var i,l=(a=arguments[4])!=null?a:"<unknown callsite>";l==="<unknown callsite>"&&o.type!=="test_env"&&r("FBLogger")(h.fbLoggerProject).info("Unknown callsite for runInTransaction, action source %s",o.source),o.type==="maw_ui_bridge"&&(l=l+":"+o.events.map(function(e){var t=e.tag;return t}).join(","));try{i=await B(e,t,n,o,l)}catch(e){throw e instanceof c?r("FBLogger")(h.fbLoggerProject).blameToPreviousFrame().mustfixThrow("ReStore transaction took too long to execute: %s",l):e}return i}async function B(t,a,i,l,s){var c;i===void 0&&(i="background");var d,p,_,f,g,y=b==null?void 0:b.startTracking(T,i);n("cr:1088")&&(d=Date.now()),y==null||y.addAnnotations({string:{currentlyExecutingModuleAndLineNo:x,moduleAndLineNo:s}});async function C(){y==null||y.mark("execute_start"),n("cr:1088")&&(p=Date.now());var a={ref:void 0},i=new Map,c=S.createTransaction("readwrite",s),m;n("cr:1088")==null||n("cr:1088").trackingStoredProceduresForNewTransaction(l),n("cr:1088")==null||n("cr:1088").recordModuleName(s);try{var C=M(c,i,{qplFlow:y});(e||(e=r("ExecutionEnvironment"))).isInBrowser?m=await Promise.race([t(C),q(a,y,s)]):m=await t(C),a.ref!=null&&r("clearTimeout")(a.ref),y==null||y.mark("execute_end"),y==null||y.mark("flush_start"),await c.flush({actionSource:l,qplFlow:y}),y==null||y.mark("flush_end"),n("cr:1088")&&(_=Date.now())}catch(e){a.ref!=null&&r("clearTimeout")(a.ref);var b=r("getErrorSafe")(e);throw c.close(),y==null||y.fail(b),r("FBLogger")(h.fbLoggerProject).catching(b).mustfix("Transaction failed: %s",s),n("cr:1088")==null||n("cr:1088").recordRestoreTransaction({broadcast:f,complete:_,flush:g,queue:d,start:p},{changedKeys:i}),e}finally{n("cr:1088")==null||n("cr:1088").stopTrackingStoredProcedures()}n("cr:1088")&&(g=Date.now()),y==null||y.mark("broadcast_start");var v=new WeakMap,R=new Map;for(var L of i){var I=L[0],T=L[1],D=JSON.parse(I),x=D[0],$=D[1],P=R.get(x);P==null&&(P=[],R.set(x,P));var N=T[0],w=T[1],A=k.beforeNotify({newValue:w,prevValue:N,tableName:x}),F=A.newValue,O=A.prevValue;P.push([O,F])}var B=R.entries();if(await(u||(u=o("PromiseOrValue"))).loop(function(e){if(e.done)return{action:"break",value:void 0};var t=e.value,n=t[0],r=t[1],a=r.values();return(u||(u=o("PromiseOrValue"))).map(u.loop(function(e){if(e.done)return{action:"break",value:void 0};var t=e.value,r=t[0],i=t[1];return(u||(u=o("PromiseOrValue"))).map(E.notifyTableAndIndexSubscribers(n,r,i,v),function(){return{action:"continue",value:a.next()}})},a.next()),function(){return{action:"continue",value:B.next()}})},B.next()),E.notifyTableV2(R,"notifyTableV2"),E.notifyTableV2(R,"notifyInMemoryTable"),E.notifyCommit(),n("cr:1088")){f=Date.now();var W={broadcast:f,complete:_,flush:g,queue:d,start:p};n("cr:1088").recordRestoreTransaction(W,{changedKeys:i})}return y==null||y.mark("broadcast_end"),y==null||y.mark("post_commit_start"),r("setImmediate")(function(){y==null||y.mark("post_commit_end"),y==null||y.end()}),m}await r("ReStoreTransactionDelay")(i);var v=A(C,i,a,s);if(y==null||y.mark("enqueued"),y==null||y.addAnnotations({string:{actionSourceSource:l.source,actionSourceType:l.type},string_array:{actionSourceEvents:(c=l.events)==null?void 0:c.map(function(e){return e.tag}),actionSourceTaskNames:l.taskNames}}),r("promiseDone")(F(s),function(){},function(e){w==null||w(e)}),!(e||(e=r("ExecutionEnvironment"))).isInBrowser)return v;var R=r("setTimeout")(function(){var t,o,a;r("FBLogger")("messenger_web").mustfix("Transaction not resolved after %s ms. Source: %s; currently processing: %s. Native ops: %s. Executed SP: %s, isInWorker: %s",m,s,x,(t=r("JSONStringifyBigIntSafe")(n("cr:6665")==null?void 0:n("cr:6665").getCurrentlyExecutingNativeOps()))!=null?t:"<devtools not running>",(o=n("cr:1088")==null||(a=n("cr:1088").getStoredProcedureCallLog())==null?void 0:a.sp.map(function(e){return e.spName}).join(","))!=null?o:"<devtools not running>",(e||(e=r("ExecutionEnvironment"))).isInWorker)},m);return v.finally(function(){return r("clearTimeout")(R)})}(e||(e=r("ExecutionEnvironment"))).isInBrowser&&R!=null&&R.onEventReceive("notifyInMemoryTable",function(e){r("promiseDone")((async function(){for(var t of e){var n=t[0],r=t[1];a.shouldApplySync("notifyInMemoryTable",n)&&await P(n,r)}E.notifyCommit()})())});var W=Object.keys(y.tableNames).reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=new(o("ReStoreTable")).ReStoreTable(y.tableNames[t],k,$,I,E),n))},{});return{clearCacheIfSupported:N,closeDb:function(){var e=S;e instanceof Object&&e.close!==void 0&&e.close()},getCustomMigrationVersion:async function(){var e=await new(o("ReStorePersistedMetadata")).ReStorePersistedCustomMigrationVersion().read(S.createTransaction("readonly"));return e==null?void 0:e.customMigrationVersion},getTableData:function(){return y},isClosed:function(){return S.isClosed()},isPersistenceSupported:function(){var e=S;return e instanceof Object&&e.isPersistenceSupported!==void 0&&e.isPersistenceSupported instanceof Function?e.isPersistenceSupported():Promise.resolve(!0)},persistence:a,persistenceTypes:a.types,runInTransaction:O,subscribeToCommit:function(t){return E.subscribeToCommit(t)},subscriptionManager:E,table:function(t){return W[t]},tables:W,uniqueId:a.uniqueId};function q(t,a,i){return h.enableTransactionTimeout?new Promise(function(e,n){var o=5e3;t.ref=r("setTimeout")(function(){a==null||a.mark("slow_transaction"),n(new c)},o)}):new Promise(function(){var a=3e4;t.ref=r("setTimeout")(function(){var t;r("FBLogger")(h.fbLoggerProject).mustfix("ReStore transaction took longer than 30000ms to execute, check it: %s. Executed SP: %s. isInWorker: %s.",i,n("cr:1088")==null||(t=n("cr:1088").getStoredProcedureCallLog())==null?void 0:t.sp.map(function(e){return e.spName}).join(","),(e||(e=r("ExecutionEnvironment"))).isInWorker),(s||(s=o("ODS"))).bumpEntityKey(h.odsCategoryID,"messenger.restore.transaction","timeout_"+(i||"").replace(/:/g,"_"),1)},a)})}}l.default=p}),98);
__d("LSReStoreWrapper",["LSReStoreQplLogger","MessengerLogHistory","ReStore","ReStoreInstrumentation","gkx","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a,i){n===void 0&&(n=[]);var l=o("ReStoreInstrumentation").instrument(r("ReStore")({config:{enableRejectingTransaction:r("gkx")("8566"),enableTransactionTimeout:r("gkx")("2947"),fbLoggerProject:"maw_db",odsCategoryID:3185},customMigration:a,hooks:n,loggers:{logHistory:o("MessengerLogHistory").getInstance("db_init"),transactionQplLogger:o("LSReStoreQplLogger").createQplLogger(r("qpl")._(25306500,"1488")),userFlow:i},persistence:e,schema:t}));return l}l.createLSReStore=e}),98);
__d("MAWLSVaultingHooks",["ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e={onAfterEntriesNext:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeVaultDbRow(n,e)},onAfterGet:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeVaultDbRow(n,e)},onBeforeAdd:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeUnvaultDbRow(n,e)},onBeforeNotify:function(t){var e=t.newValue,n=t.prevValue,r=t.tableName;return{newValue:o("ReStoreVaulting").maybeVaultDbRow(e,r),prevValue:o("ReStoreVaulting").maybeVaultDbRow(n,r)}},onBeforePut:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeUnvaultDbRow(n,e)},onBeforeUpsert:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeUnvaultDbRow(n,e)}};l.default=e}),98);
__d("LSJSInMemoryStorage",["LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","createLSReStoreEphemeralPersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("LSReStoreWrapper").createLSReStore(o("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),e,[r("MAWLSVaultingHooks")],void 0,o("LSPlatformLsInitLog").lsInitLogger)}l.default=e}),98);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return r("emptyFunction")}function u(){return(e||(e=n("Promise"))).resolve()}var c={cleanup:r("emptyFunction"),logEvent:function(t){},onConnectionStatusChange:s,onReconnect:s,publish:u,subscribe:s};l.default=c}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("21118")?r("MqttWebDeviceID").clientID:r("ChannelClientID").getID()}var s=e();function u(t){return t==null&&r("FBLogger")("messenger_web").info("Missed provider type for deviceId"),t==="persisted"?o("LSCookie").get().d:e()}l.deviceId=s,l.getDeviceIdForProviderType=u}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("isMessengerPWA")();if(t){var n=(e=new URL(window.location.href).searchParams.get("__pwa"))!=null?e:"1.0.0";return n}}l.default=e}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("qpl")._(701246226,"1285"),m="LSPlatformRealtimeTransport.NotConnected",p="LSPlatformRealtimeTransport.Timeout";function _(e){var t=new Map;return{getAll:function(){return Array.from(t.values())},getOrStart:function(r){var n=r.toString(),o=t.get(n);return o==null&&(o=e(r),t.set(n,o)),o}}}function f(e){}function g(t,a,i){var l=new Map,m={contents:f},g=new Set,h=new Map,y=[],C=_(function(e){var n=t(e,i);return y.push(n.subscribe(function(e){var t=JSON.parse(e),n=o("LSDynamicDependencies").downloadBootloaderDependencies(t.sp,t.nop,t.ntop),a=t.request_id,i;if(a!=null){var s=l.get(a);if(s==null)i=!1;else{r("clearTimeout")(s.timeoutId),s.resolve({downloadTask:n,payload:t,type:"taskresponse"}),l.delete(a);var u=s.instanceKey;(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:u}),c.markerEnd(d,2,u),i=!0}}else i=!1;if(!i){Array.from(h.entries()).forEach(function(e){return e[1](n,t)});return}})),y.push(n.onReconnect(function(e){return m.contents(e)})),y.push(n.onConnectionStatusChange(function(e){g.forEach(function(t){return t(e)})})),n});return C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(o("LSMailboxInitialSyncCursor").syncChannel)),{cleanup:function(){y.forEach(function(e){return e()}),C.getAll().forEach(function(e){return e.cleanup()})},logEvent:function(t){C.getAll().forEach(function(e){return e.logEvent(t)})},onConnectionStatusChange:function(t){return g.add(t),function(){g.delete(t)}},onReconnect:function(t){return m.contents=t,function(){m.contents=f}},publish:function(i){var t=i.databaseType,m=i.payload,_=i.queueName,f=i.requestId,g=i.syncChannel,h=i.type_;return new(e||(e=n("Promise")))(function(e,n){var i=C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(g)),y=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);if((s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3))){var b=r("setTimeout")(function(){i.logEvent("Timeout");var e=l.get(f);return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"timeout",{instanceKey:y}),c.markerEnd(d,3,y),e!=null&&(l.delete(f),e.reject({RE_EXN_ID:p})),n({RE_EXN_ID:p})},3e4);l.set(f,{instanceKey:y,queueName:_,reject:n,resolve:e,timeoutId:b,timestamp:Date.now()})}(c||(c=r("QuickPerformanceLogger"))).markerStart(d,y),c.markerPoint(d,"publish",{instanceKey:y}),c.markerAnnotate(d,{string:{networkStatus:String(r("NetworkStatus").isOnline()),streamGroupId:o("LSStreamGroupRef").getTransportId(),streamGroupStatus:o("LSStreamGroupRef").getTransportStatus()}},{instanceKey:y}),c.markerAnnotate(d,{int:{databaseType:t,requestType:u.toNumber(h)}},{instanceKey:y});var v=r("MessengerPWAVersionForUserAgent")();r("promiseDone")(i.publish(o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({app_id:a,payload:m},v!=null?{pwa_version:v}:{},{request_id:f,type:h}))),h,t),function(){if(!(s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3)))return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:y}),c.markerEnd(d,2,y),e({type:"noresponseexpected"})},function(e){(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"fail",{instanceKey:y}),c.markerEnd(d,3,y),n(e)})})},subscribeToNonTaskResponses:function(t){var e={};return h.set(e,t),function(){h.delete(e)}}}}l.NotConnected=m,l.Timeout=p,l.LSPlatformRealtimeTransport=g}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!(e||(e=r("ExecutionEnvironment"))).isInWorker}l.default=s}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:e}),qos:1,topic:"/ls_app_settings"}]}function d(t){var a={contents:t.getConnectionState()},i={contents:function(){}},l={contents:new(u||(u=n("Promise")))(function(e,t){i.contents=e})},c={onMQTTStateChanged:function(t){t==="Connected"?i.contents():t==="Disconnected"&&a.contents==="Connected"&&(l.contents=new(u||(u=n("Promise")))(function(e,t){i.contents=e})),a.contents=t}};return a.contents==="Connected"&&i.contents(),t.subscribeChannelEvents(c),[function(){t.unsubscribeChannelEvents(c)},function(a,i,c){return l.contents.then(function(){return new(u||(u=n("Promise")))(function(n,l){r("promiseDone")(t.publish("/ls_req",a,{listener:{onEvent:function(t){if(t==="NOT_CONNECTED")return l({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})}},qos:(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return n()},function(e){return e.message==="Publish Timed Out"?l({RE_EXN_ID:o("LSPlatformRealtimeTransport").Timeout}):l(e)})})})}]}var m={contents:void 0};function p(e,t,n){if(r("shouldStubUnderlyingTransport")())return r("LSPlatformDefaultUnderlyingApi");var o=n.getInstance(t),a={getPublishMessages:function(){return c(e)}};o.registerExtraConnectPayloadProvider(a);var i={onMQTTStateChanged:function(t){var e=m.contents;if(e!=null)return e(t)}};o.subscribeChannelEvents(i);var l=o.subscribe("/ls_foreground_state",function(){}),s=d(o),u=s[0],p=s[1];return{cleanup:function(){o.unregisterExtraConnectPayloadProvider(a),n.shutdownAndClear(),o.unsubscribeChannelEvents(i),l(),u()},logEvent:function(t){},onConnectionStatusChange:function(t){return m.contents=t,function(){m.contents=void 0}},onReconnect:function(t){var e={contents:o.getConnectionState()},n={contents:e.contents==="Connected"},r={onMQTTStateChanged:function(o){o==="Connected"&&(n.contents&&e.contents!=="Connected"&&t(1),n.contents=!0),e.contents=o}};return o.subscribeChannelEvents(r),function(){o.unsubscribeChannelEvents(r)}},publish:p,subscribe:function(t){return o.subscribe("/ls_resp",function(e){return t(e)})}}}l.default=p}),98);
__d("LSPlatformRequestId",[],(function(t,n,r,o,a,i){"use strict";var e=4;function l(){var t=e;return e+=1,t}var s={generate:l};i.default=s}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.pow(2,31)-1,s=(function(){function t(){this.requests=new Map}var n=t.prototype;return n.schedule=function(n,o,a){var t=this.requests.get(o);t!=null&&r("clearTimeout")(t);var i=r("justknobx")._("4435")?Math.min(a,e):a;this.requests.set(o,r("setTimeout")(n,i))},n.cleanup=function(){this.requests.forEach(function(e){return r("clearTimeout")(e)})},t})();l.default=s}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","clearTimeout","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e="executeFirstBlockForSyncTransaction",s=(function(){function t(e){this.eval=e,this.currentlyRunning=new Map}var n=t.prototype;return n.evalWhenReady=async function(t,n){var e;try{await t,e=r("setTimeout")(function(){r("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),await this.eval(n)}finally{r("clearTimeout")(e)}},n.$1=function(t){var e=this.currentlyRunning.get(t);return e==null&&(e=Promise.resolve(),this.currentlyRunning.set(t,e)),e},t.getSyncScriptType=function(n){var t;if(!((t=n.sp)!=null&&t.includes(e)))return{status:"non-transactional"};var o=(function(){try{var e;return(e=JSON.parse(n.syncScript))==null?void 0:e.step}catch(e){return null}})();if(!Array.isArray(o))return r("FBLogger")("messenger_web").warn("Sync payload appears invalid."),{status:"non-transactional"};for(var a=[o];a.length;){var i=r("nullthrows")(a.shift());for(var l of i)if(Array.isArray(l)){if(l[0]===5&&l[1]===e&&Array.isArray(l[2]))return{status:"transactional",syncGroup:parseInt(l[2][1],10)};a.push(l)}}return{status:"err"}},n.maybeEvalInOrderReceived=function(n,o){var e,a=this,i=t.getSyncScriptType(o),l=0;switch(i.status){case"err":r("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=o.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(n,o);case"transactional":l=i.syncGroup;break}var s=this.$1(l),u=s.then(function(){return a.evalWhenReady(n,babelHelpers.extends({},o,{priority:"sync_script"}))}).catch(function(e){throw a.currentlyRunning.delete(l),e});return this.currentlyRunning.set(l,u),u},t})();l.default=s}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({DASM:1,JS:2,JSON:3}),l=e;i.default=l}),66);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{bool:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateBool",l.default=s}),98);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),l=o("SymmetricEncryptionPaddingUtils").padData(i),s=o("XPlatReactCrypto").getRandomValues(new Uint8Array(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes)),u=new(o("HChaCha20")).HChaCha20,c=u.hChaCha20Bytes(s.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(e){return o("XPlatReactCrypto").subtleEncrypt({additionalData:a,iv:new Uint8Array(s.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,l)}).then(function(t){var r=s.byteLength+t.byteLength,a=new Uint8Array(r);return a.set(s),a.set(new Uint8Array(t),o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(a.buffer))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric data encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=s}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["SymmetricEncryptionCreateEncryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i){return r("SymmetricEncryptionCreateEncryptedData")(o,a,i)};e.__nop_name__="LSSymmetricEncryptionCreateEncryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return r("LSSymmetricEncryptionCreateEncryptedData.nop")(a,i,l,s,o("LSCryptoUtils").strToBuf(u)).then(function(e){return e[0]}).then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t?o("Base64Utils").fromArrayBuffer(t):void 0))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric string encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSSymmetricEncryptionCreateEncryptedString",l.default=s}),98);
__d("LSVersion",[],(function(t,n,r,o,a,i){a.exports="32381005491547324"}),null);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSIntEnum","LSMessagingThreadTypeUtil","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var r=o("ReQL").fromTableAscending(t.threads_ranges_v2__generated).filter(function(e){return(s||(s=o("I64"))).equal(e.parentThreadKey,(u||(u=o("LSIntEnum"))).ofNumber(-1))||(s||(s=o("I64"))).equal(e.parentThreadKey,(u||(u=o("LSIntEnum"))).ofNumber(-10))});return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.threads_ranges_v2__generated.delete(n.parentThreadKey,n.minThreadKey,n.minLastActivityTimestampMs)})},(e||(e=n("Promise"))).resolve())})}function d(t){var r=o("ReQL").fromTableAscending(t.threads).filter(function(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)});return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.threads.delete(n.threadKey)})},(e||(e=n("Promise"))).resolve())})}function m(t){return(e||(e=n("Promise"))).all([c(t),d(t)]).then(function(){return(e||(e=n("Promise"))).resolve()})}l.call=m}),98);
__d("MWPMiniSearch",["minisearch"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e={fuzzy:0,prefix:!0};return{fields:["content"],searchOptions:e}}function s(t){t===void 0&&(t=function(){return{}});var n;function o(){n=new(r("minisearch"))(babelHelpers.extends({},e(),t()))}return{getInstance:function(){return n==null&&o(),n}}}l.createMiniSearchSingleton=s}),98);
__d("WAAbPropsTypes",[],(function(t,n,r,o,a,i){"use strict";var e={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};i.ABPropConfigs=e}),66);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=["client_group_participants_limit","client_group_name_length_limit"];function s(t){var n=t!=null?t:{},r={};return e.forEach(function(e){n[e]!=null?r[e]=n[e]:r[e]=o("WAAbPropsTypes").ABPropConfigs[e][2]}),r}l.prepareAbPropsForUI=s}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]),l=n("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});i.ServerRPCMode=e,i.WAClientInfraOfflineProgress=l}),66);
__d("getMWLSRegion",["MessengerWebRegion"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MessengerWebRegion").regionNullable;return e==null?"":e}l.default=e}),98);
__d("isGroupInvitesEnabled",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("125")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("EBFormatUtils",["I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){if(t!=null)return(e||(e=o("I64"))).min(t,e.of_float(o("WATimeUtils").millisTime()));switch(n){case"before":return(e||(e=o("I64"))).of_float(o("WATimeUtils").millisTime());case"after":return(e||(e=o("I64"))).zero;default:return(e||(e=o("I64"))).max_int}}function u(e,t){switch(t){case"before":return[e,0];case"after":return[0,e];default:return[Math.ceil(e/2),Math.ceil(e/2)]}}l.adjustTs=s,l.adjustCount=u}),98);
__d("LSCheckAuthoritativeMessageExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[1]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.offlineThreadingId===e[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,r){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n));if(a!=null){var i=(e||(e=o("I64"))).to_string(r);return o("LSMessagingThreadTypeUtil").isGroup(a.threadType)?o("WAJids").toGroupJid(i):o("WAJids").toMsgrUserJid(i)}}l.getMaybeChatJidForLSDBJid=s}),98);
__d("LSShimCompleteThreadCutover.nop",["I64","MAWBridgeFireAndForget","ReQL","getChatJidForLSDBJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,r,a,i,l){var t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.cutover_threads).getKeyRange(i));if(t!=null){var s=t.showOpenMessageHistory===!1;if(s)return[(e||(e=o("I64"))).one];var u=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.mi_act_mapping_table.index("jid")).getKeyRange(t.armadilloThreadId));if(u!=null){var c=await o("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(n,u.serverThreadKey,u.jid);return c==null?[(e||(e=o("I64"))).one]:(o("MAWBridgeFireAndForget").fireAndForget("backend","insertAdminMessageInCutoverThreads",{openThreadId:(e||(e=o("I64"))).to_string(i),threadJid:c,traceId:l}),[e.zero])}return[(e||(e=o("I64"))).one]}return[(e||(e=o("I64"))).one]};s.__nop_name__="LSShimCompleteThreadCutover",l.default=s}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.nativeOperation(n("LSShimCompleteThreadCutover.nop"),e[0],e[1],e[2]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteAllCommunityChannelCategories",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(182).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure",e.__tables__=["cm_category_list","threads"],a.exports=e}),null);
__d("LSDeleteAllCommunityFolders",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(162).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSDeleteBanner",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.bannerId,e[0])}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.sequence([function(o){return r[1]=t.createArray(),r[2]=t.i64.of_int32(e[1].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(e){return r[7]=(r[1].push(t.i64.to_string(r[5])),r[1])}])}):t.resolve()},function(e){return r[3]=r[1].join(","),r[0]=r[3]}])},function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&e[1].some(function(e){return t.i64.eq(n.bannerId,e)})}),function(e){return e.delete()})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteRowRichStatusCustomAudience",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSOmnistoreSettingsDeleteRowRichStatusCustomAudienceStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertAvatarFeatureConfig",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSContactDeleteThenInsertAvatarFeatureConfigStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(299).put({botId:e[0],isCreatedByViewer:e[1],description:e[4],tintColor:e[2],shortDescription:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure",e.__tables__=["bot_profile_info_v2"],a.exports=e}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(167).put({communityId:e[0],threadId:e[1],categoryId:e[2],channelPrivacy:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmChannelListStoredProcedure",e.__tables__=["cm_channel_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(166).put({communityId:e[0]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(162).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.folderId,e[0])&&t.i64.gt(t.i64.cast([0,80]),e[54])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(162).put({folderId:e[0],fbGroupId:e[1],name:e[2],memberCount:e[4],description:e[3],pictureUrl:e[5],pictureUrlFallback:e[6],pictureUrlExpirationTimestampMs:e[7],joiningChannelTaskId:e[8],afterJoiningOpenChannelId:e[10],capabilities:e[11],capabilities2:e[12],capabilities3:e[13],notificationSetting:e[14],notificationMutedUntil:e[15],sendsBlockedUntil:e[17],isHidden:e[18],hasSeenDisablingAlert:e[19],inviteLink:e[21],communityType:e[22],directInviteLink:e[23],enableState:e[24],takedownState:e[25],fbGroupType:e[28],threadCount:e[29],disableTimestamp:e[32],readTimestampMs:e[33],inviteStatus:e[37],blockedFromCommunityMemberCount:e[40],categoryCount:e[41],snippetText:e[42],coverPicUrl:e[43],coverPicUrlFallback:e[44],coverPicUrlExpirationTimestampMs:e[45],invitedThreadId:e[47],fbGroupUserParticipationApprovalStatus:e[48],ccAdminAssistRegistrationStatus:e[49],pauseStatus:e[50],isMember:e[51],latestThreadId:e[52],latestThreadActivityTimestampMs:e[53]}):0})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[1]=e[12]==null?t.i64.cast([0,19]):e[12],n[2]="community",n[3]=t.i64.cast([0,0])==null?t.i64.cast([0,0]):t.i64.cast([0,0]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26]}):(o=s.item,n[4]=o.lastActivityTimestampMs,n[6]=o.parentThreadKey,n[5]=o.disappearingThreadKey,n[7]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[4],e[7])&&t.i64.neq(n[5],void 0)?(t.i64.eq(e[1],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[6],t.i64.cast([0,0]))?(a=[n[6],o.folderName],n[8]=a[0],n[9]=a[1]):(i=[e[1],n[2]],n[8]=i[0],n[9]=i[1]),t.db.table(9).put({threadKey:e[0],parentThreadKey:n[8],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[9],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:n[4],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]})):t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityUnjoinedThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSMinosVerifySingleEpoch.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WAGetSafeQPLError","gkx","qex","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("EBMinosVerifySingleEpoch").__setRef("LSMinosVerifySingleEpoch.nop"),c=function(a,i,l,c,d,m,p,_,f){if(!(r("qex")._("208")===!0||r("gkx")("17219")))return(s||(s=n("Promise"))).resolve([!1]);var t=o("EBMinosQplFlow").startMinosVerifySingleEpochQpl({entryPoint:"verify-single-epoch-native-op"});try{var g,h=(g=o("EBMinosInterfaceTypes")).unsafeCastToBase64StringIntToEpochNumber(l),y=g.unsafeCastToMailboxAuthPK(p),C=g.unsafeCastToMailboxEncryptionPK(m),b=g.unsafeCastToMailboxSigningPK(d),v=g.unsafeCastToUserFbId((e||(e=o("I64"))).to_string(c)),S=o("EBMinosInterfaceTypes").unsafeCastToEpochSelfSig(f),R=_!=null?o("EBMinosInterfaceTypes").unsafeCastToEpochHead(_):void 0;return u.load().then(function(e){return e.minosVerifySingleEpoch(h,v,b,C,y,R,S,t)})}catch(e){return t.endFailWithError("runtime-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(e)),(s||(s=n("Promise"))).resolve([!1])}};c.__nop_name__="LSMinosVerifySingleEpoch",l.default=c}),98);
__d("LSSetThreadImageURL",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1]===""?void 0:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],isCustomThreadPicture:e[4],shouldRoundThreadPicture:e[5]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSWriteMinosPublicKey.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WALongInt","WATimeUtils","cr:12274","gkx","promiseDone","qex","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("EBWriteMinosMailboxKeysToCache").__setRef("LSWriteMinosPublicKey.nop"),c=function(a,i,l,c,d,m,p,_,f,g,h,y){if(!(r("qex")._("208")||r("gkx")("17219"))||p==null)return(s||(s=n("Promise"))).resolve();var t=o("EBMinosQplFlow").startMinosWritePublicKeysQpl();return n("cr:12274")!=null&&t.addAnnotations({bool:{isBackendSetupInProgress:n("cr:12274").isBackendSetupInProgress(),isBackendSetupSuccessful:n("cr:12274").isBackendSetupSuccessful()}}),c==null||d==null||m==null||_==null?(t.endFailWithError("missing_required_values"),(s||(s=n("Promise"))).resolve()):(t.addPoint("mailbox_to_cache_deferred_load_start"),r("promiseDone")(u.load().then(function(n){var r;return t.addPoint("mailbox_to_cache_deferred_load_end"),n.writeMinosMailboxKeysToCache({contactId:(r=o("EBMinosInterfaceTypes")).unsafeCastToUserFbId((e||(e=o("I64"))).to_string(l)),encryptionPublicKey:o("EBMinosInterfaceTypes").unsafeCastToMailboxEncryptionPK(m),epochAnonId:o("EBMinosInterfaceTypes").unsafeCastToBase64StringIntToEpochNumber(c),epochHead:o("EBMinosInterfaceTypes").unsafeCastToEpochHead(p),epochHeadCreationTime:o("EBMinosInterfaceTypes").unsafeCastToEpochCreationTime(o("WATimeUtils").castLongIntToUnixTime(o("WALongInt").decimalStringToLongInt(e.to_string(d)))),publicKeyFbid:o("EBMinosInterfaceTypes").unsafeCastToMailboxFbId(o("WALongInt").decimalStringToLongInt(e.to_string(_))),qplFlow:t})})),(s||(s=n("Promise"))).resolve())};c.__nop_name__="LSWriteMinosPublicKey",l.default=c}),98);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSMinosVerifySingleEpoch.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop","gkx","qex"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return t.sequence([function(r){return e[50]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[50]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[0]=o[25]}]):t.resolve(o[0]=void 0)},function(r){return e[52]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[52]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[1]=o[25]}]):t.resolve(o[1]=void 0)},function(r){return e[53]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[53]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[2]=o[25]}]):t.resolve(o[2]=void 0)},function(r){return e[55]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[55]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[3]=o[25]}]):t.resolve(o[3]=void 0)},function(r){return e[56]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[56]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[4]=o[25]}]):t.resolve(o[4]=void 0)},function(r){return e[57]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[57]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[5]=o[25]}]):t.resolve(o[5]=void 0)},function(r){return e[58]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[58]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[6]=o[25]}]):t.resolve(o[6]=void 0)},function(e){return o[21]="LSContactDeleteThenInsertContactStoredProcedure",o[7]=t.i64.random(),o[8]=t.i64.to_string(o[7]),o[8]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,1021650676]),o[8],!0,void 0):t.resolve()},function(e){return o[8]!==void 0&&o[21]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"MinosPublicKeyClientUtils",o[21]):t.resolve()},function(a){var i,l,s;return o[22]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[22]!==void 0?o[9]=o[22]:o[9]=!1,o[9]&&r("gkx")("16269")?t.sequence([function(r){return t.blobs.eq(o[2],void 0)&&t.blobs.eq(o[1],void 0)&&t.i64.eq(e[51],void 0)&&t.i64.eq(e[54],void 0)&&t.blobs.eq(o[3],void 0)&&t.blobs.eq(o[4],void 0)&&t.blobs.eq(o[5],void 0)&&t.blobs.eq(o[0],void 0)?t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_minos_keys_null"):t.resolve()},function(t){var n;return n=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[25]=n[0],o[26]=n[1],o[27]=n[2],o[28]=n[3],o[29]=n[4],o[30]=n[5],o[31]=n[6],o[32]=n[7],o[33]=n[8],n}]):t.sequence([function(r){return t.blobs.neq(o[2],void 0)?t.sequence([function(r){return t.blobs.neq(o[4],void 0)?t.sequence([function(r){return t.blobs.neq(o[3],void 0)?t.sequence([function(r){return t.blobs.neq(o[0],void 0)?t.sequence([function(r){return t.blobs.neq(o[5],void 0)?t.sequence([function(r){return t.nativeOperation(n("LSMinosVerifySingleEpoch.nop"),o[2],e[0],o[3],o[0],o[4],o[6],o[5]).then(function(e){var t;return t=e,o[48]=t[0],t})},function(r){return o[48]?o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_native_op_success"):t.resolve():t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_native_op_failure"):t.resolve()},function(r){return o[49]=["MinosPublicKeyClientUtils",".",["Key verification failed for contact id: ","",t.i64.to_string(e[0])].join("")].join(""),o[8]!==void 0&&o[49]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"error",o[49]):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[8],!1):t.resolve()}])},function(e){return o[47]=o[48]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Epoch Signature Self"):t.resolve()},function(e){return o[47]=!1}])},function(e){return o[46]=o[47]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Encryption Public Key"):t.resolve()},function(e){return o[46]=!1}])},function(e){return o[45]=o[46]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Signing Public Key"):t.resolve()},function(e){return o[45]=!1}])},function(e){return o[44]=o[45]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Auth Public Key"):t.resolve()},function(e){return o[44]=!1}])},function(e){return o[34]=o[44]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Epoch Anon ID"):t.resolve()},function(e){return o[34]=!1}])},function(r){var a;return o[34]?t.resolve((a=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[35]=a[0],o[36]=a[1],o[37]=a[2],o[38]=a[3],o[39]=a[4],o[40]=a[5],o[41]=a[6],o[42]=a[7],o[43]=a[8],a)):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_epoch_verify_return_existing_contact_minos_keys_due_to_failure"):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: verification failed"):t.resolve()},function(n){var r,a,i;return o[44]=t.createArray(),o[57]=(o[44].push(e[0]),o[44]),o[45]=new t.Map,o[46]=o[45].get(e[0]),o[46]?o[47]=!1:o[47]=!0,o[47]?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[48]=a[0],o[49]=a[1],o[50]=a[2],o[51]=a[3],o[52]=a[4],o[53]=a[5],o[54]=a[6],o[55]=a[7],o[56]=a[8]):(o[57]=o[46].get("mailbox_encryption_public_key"),o[58]=o[46].get("epoch_anon_id"),o[59]=o[46].get("epoch_head"),o[60]=o[46].get("epoch_head_creation_time"),o[61]=o[46].get("minos_mailbox_public_keys_fbid"),r=[o[57],o[58],o[59],o[60],o[61],void 0,void 0,void 0,void 0],o[48]=r[0],o[49]=r[1],o[50]=r[2],o[51]=r[3],o[52]=r[4],o[53]=r[5],o[54]=r[6],o[55]=r[7],o[56]=r[8]),i=[o[48],o[49],o[50],o[51],o[52],o[53],o[54],o[55],o[56]],o[35]=i[0],o[36]=i[1],o[37]=i[2],o[38]=i[3],o[39]=i[4],o[40]=i[5],o[41]=i[6],o[42]=i[7],o[43]=i[8]}])},function(e){var t;return t=[o[35],o[36],o[37],o[38],o[39],o[40],o[41],o[42],o[43]],o[25]=t[0],o[26]=t[1],o[27]=t[2],o[28]=t[3],o[29]=t[4],o[30]=t[5],o[31]=t[6],o[32]=t[7],o[33]=t[8],t}])},function(e){var t;return t=[o[25],o[26],o[27],o[28],o[29],o[30],o[31],o[32],o[33]],o[10]=t[0],o[11]=t[1],o[12]=t[2],o[13]=t[3],o[14]=t[4],o[15]=t[5],o[16]=t[6],o[17]=t[7],o[18]=t[8],t}]):t.resolve((o[25]=t.createArray(),o[38]=(o[25].push(e[0]),o[25]),o[26]=new t.Map,o[27]=o[26].get(e[0]),o[27]?o[28]=!1:o[28]=!0,o[28]?(l=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[29]=l[0],o[30]=l[1],o[31]=l[2],o[32]=l[3],o[33]=l[4],o[34]=l[5],o[35]=l[6],o[36]=l[7],o[37]=l[8]):(o[38]=o[27].get("mailbox_encryption_public_key"),o[39]=o[27].get("epoch_anon_id"),o[40]=o[27].get("epoch_head"),o[41]=o[27].get("epoch_head_creation_time"),o[42]=o[27].get("minos_mailbox_public_keys_fbid"),i=[o[38],o[39],o[40],o[41],o[42],void 0,void 0,void 0,void 0],o[29]=i[0],o[30]=i[1],o[31]=i[2],o[32]=i[3],o[33]=i[4],o[34]=i[5],o[35]=i[6],o[36]=i[7],o[37]=i[8]),s=[o[29],o[30],o[31],o[32],o[33],o[34],o[35],o[36],o[37]],o[10]=s[0],o[11]=s[1],o[12]=s[2],o[13]=s[3],o[14]=s[4],o[15]=s[5],o[16]=s[6],o[17]=s[7],o[18]=s[8]))},function(a){return o[23]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[23]!==void 0?o[19]=o[23]:o[19]=!1,o[19]&&r("gkx")("16269"),o[24]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[24]!==void 0?o[20]=o[24]:o[20]=!1,o[20]&&r("gkx")("16269")?t.nativeOperation(n("LSWriteMinosPublicKey.nop"),e[0],o[11],o[13],o[10],o[12],o[14],o[17],o[16],o[15],o[18]):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[8],!0):t.resolve()},function(n){return t.i64.eq(e[23],t.i64.cast([0,39423]))?o[25]=t.i64.cast([0,1]):(t.i64.eq(e[23],t.i64.cast([0,14342874]))?o[26]=t.i64.cast([0,2]):o[26]=void 0,o[25]=o[26]),t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))&&t.i64.gt(n.authorityLevel,e[21])}).next().then(function(n){var r=n.done,a=n.value;return r?t.db.table(7).put({id:e[0],profilePictureUrl:e[2],profilePictureFallbackUrl:e[3],profilePictureUrlExpirationTimestampMs:e[4],profilePictureLargeUrl:e[5],profilePictureLargeFallbackUrl:e[6],profilePictureLargeUrlExpirationTimestampMs:e[7],name:e[9],secondaryName:e[41],normalizedNameForSearch:e[10],normalizedSearchTerms:e[33],isMessengerUser:e[11],isMemorialized:e[12],isManagedByViewer:e[35],blockedByViewerStatus:e[14],rank:e[17],firstName:e[18],contactType:e[19],contactTypeExact:e[20],authorityLevel:e[21],messengerCallLogThirdPartyId:e[22],profileRingColor:e[23],requiresMultiway:e[24],blockedSinceTimestampMs:e[25],fbUnblockedSinceTimestampMs:e[48],canViewerMessage:e[26],profileRingColorExpirationTimestampMs:e[27],phoneNumber:e[28],emailAddress:e[29],workCompanyId:e[30],workCompanyName:e[31],workJobTitle:e[32],deviceContactId:e[34],workForeignEntityType:e[36],capabilities:e[37],capabilities2:e[38],profileRingState:o[25],contactViewerRelationship:e[39],gender:e[40],username:e[43],contactReachabilityStatusType:e[44],friendshipStatus:e[45],restrictionType:e[46],waConnectStatus:e[47],isEmployee:!1,pageType:e[49]}):0})},function(r){return t.storedProcedure(n("LSSetThreadImageURL"),e[0],e[2],e[3],e[4],!1,!0)}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure",e.__tables__=["contacts"];var s=e;l.default=s}),98);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(175).put({id:e[0],globalMuteUntil:e[1],showMessagePreview:e[4],isSoundOn:e[7],groupNotificationSetting:e[8],oneToOneNotificationSetting:e[9],replyReminderSetting:e[10],messageReminderDisabled:e[12],messageSound:e[13],ringtoneSound:e[14],newFriendBumpDisabledSetting:e[15],globalMuteMessageUntil:e[2],globalMuteCallUntil:e[3],includeInSwitchAccountBadges:e[11],dismissNfbThreadsCount:e[16],mutePageAccountMessageReminder:e[17]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("MAWDeanonDataCheck",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t;return n||(r=t+1),e.length>=r}i.hasEnoughDeanonData=e}),66);
__d("MAWFetchEBDeanonMessagesMetadata",["DateConsts","EBFormatUtils","FBLogger","I64","MAWEBDeanonFetch","MAWMessagesDirection","MAWMessagesPaginationUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=100,u="timeout",c=10*o("DateConsts").MS_PER_SEC;async function d(t){var n=t.chatJid,a=t.direction,i=t.includeReferenceTimestamp,l=t.logger,d=t.range,m=t.sortFn;r("FBLogger")("messenger_web").info("EBMessageRangeDataSource: Issuing fetch request to EB Deanon API"),l==null||l.markQPLPoint("eb_fetch_deanon_start");var p=o("MAWMessagesDirection").translateMwpDirectionToMawDirection(a),_=(e||(e=o("I64"))).to_float(o("EBFormatUtils").adjustTs(o("MAWMessagesDirection").getI64RangeTimestampForDirection(a,d),p)),f=await o("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(a,d);return Promise.race([o("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:n,count:s,direction:p,includeReferenceTimestamp:i,referenceExternalId:f,referenceTimestampMs:_,sortFn:m}),new Promise(function(e){return window.setTimeout(function(){return e(o("WAResultOrError").makeError(u))},c)})]).then(function(e){return l==null||l.markQPLPoint("eb_fetch_deanon_end"),e})}l.fetchEBDeanonMessagesMetadata=d}),98);
__d("MAWFetchDeanonMetadataUsingCache",["I64","MAWDeanonDataCheck","MAWFetchEBDeanonMessagesMetadata","MAWMessagesCompare","MAWMessagesDirection","MAWSubscribeToLSTruncateMetadataThreads","WAJids","WAResultOrError","WATagsLogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS(["MAWFetchDeanonMetadataUsingCache"]),d=new Map,m=r("justknobx")._("3763"),p=new Map,_=null;async function f(t){var n=t.chatJid,r=t.db,a=t.direction,i=t.isFirstPage,l=t.logger,s=t.pageSize,u=t.range,d=t.sortFn;h(r);var m=g(n,a,l,u);if(m!=null&&(l==null||l.addQPLAnnotations({bool:{is_first_page:i},int:{deanon_cached_data_size:m==null?void 0:m.length}}),o("MAWDeanonDataCheck").hasEnoughDeanonData(m,s,i)))return c.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Using cached Deanon messages metadata for comparison to local data"]))),l==null||l.addQPLAnnotations({bool:{is_deanon_cached_data_used:!0}}),o("WAResultOrError").makeResult(m);var p=await o("MAWFetchEBDeanonMessagesMetadata").fetchEBDeanonMessagesMetadata({chatJid:n,direction:a,includeReferenceTimestamp:!i,logger:l,range:u,sortFn:d});return p.success===!0&&(l==null||l.addQPLAnnotations({bool:{is_deanon_data_fetched:!0}}),C(n,a,l,p.value,u)),p}function g(e,t,n,r){var a;n==null||n.markQPLPoint("deanon_cache_fetch_start"),v(e,t);var i=(a=d.get(o("WAJids").threadIdForChatJid(e)))==null?void 0:a.get(t);if(i==null)return null;var l=o("MAWMessagesDirection").getI64RangeTimestampForDirection(t,r),s=(u||(u=o("I64"))).ge(l,i.minTimestampMs)&&(u||(u=o("I64"))).le(l,i.maxTimestampMs);if(!s)return null;var c=o("MAWMessagesDirection").switchOnMWPMessagesDirection(t,{asc:i.msgsMetadata.findIndex(function(e){return(u||(u=o("I64"))).ge(u.of_float(e.sortOrderMs),l)}),desc:i.msgsMetadata.findIndex(function(e){return(u||(u=o("I64"))).le(u.of_float(e.sortOrderMs),l)})}),m=i.msgsMetadata.slice(c);return n==null||n.markQPLPoint("deanon_cache_fetch_end"),m}function h(e){_==null&&(_=o("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(e,function(e,t){var n=(u||(u=o("I64"))).to_string(e);d.delete(n),p.delete(n)}))}function y(e,t,n,r){var a,i=o("WAJids").threadIdForChatJid(e),l=(a=d.get(i))!=null?a:new Map;l.set(t,{maxTimestampMs:r.max,minTimestampMs:r.min,msgsMetadata:n}),d.set(i,l)}function C(e,t,n,r,a){if(r.length!==0){n==null||n.markQPLPoint("deanon_cache_replace_start");var i=(u||(u=o("I64"))).of_float(r[r.length-1].sortOrderMs),l=o("MAWMessagesDirection").switchOnMWPMessagesDirection(t,{asc:{max:i,min:a.maxTimestampMs},desc:{max:a.minTimestampMs,min:i}});y(e,t,r,l),n==null||n.markQPLPoint("deanon_cache_replace_end")}}function b(e,t){if(t.length!==0){for(var n=[].concat(t).sort(o("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc")),r=0,a=n.length-1;r<a&&n[r].sortOrderMs===n[r+1].sortOrderMs;)r++;if(r!==a){var i=(u||(u=o("I64"))).of_float(n[a].sortOrderMs);p.set(u.to_string(e),{insertTime:Date.now(),minTimestampMs:i,msgsMetadata:n.slice(r)})}}}function v(e,t){var n=S(e,t);n!=null&&(c.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Using init-sync deanon data for ",""])),e),y(e,t,n.msgsMetadata,{max:(u||(u=o("I64"))).max_int,min:n.minTimestampMs}),p.delete(o("WAJids").threadIdForChatJid(e)))}function S(e,t){if(t==="desc"){var n=Date.now(),r=p.get(o("WAJids").threadIdForChatJid(e));if(!(r!=null&&n-r.insertTime>m))return r}}l.MAWFetchDeanonMetadataUsingCache=f,l.fetchDeanonDataFromCache=g,l.initDeanonCacheDescForThread=b}),98);
__d("LSFillDeanonCacheForE2EEThread.nop",["I64","LSShape","LSSynchronousPromise","LSVec","MAWFetchDeanonMetadataUsingCache","PromiseOrValue","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n,a,i,l){if(!r("gkx")("15959"))return o("LSSynchronousPromise").makeSynchronousPromise();var t=r("LSVec").toArray(l).map(function(t){var n=o("LSShape").toRecord(t),r=n.offline_threading_id,a=n.sort_order_ms;return{externalId:r,msgType:"unknown-deanon",sortOrderMs:(e||(e=o("I64"))).to_float(a)}}),u=o("ReQL").fromTableAscending(n.mi_act_mapping_table).getKeyRange(i).iterator(new WeakMap);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise((s||(s=o("PromiseOrValue"))).map(u.next(),function(e){var n;((n=e.value)==null?void 0:n[1].jid)!=null&&o("MAWFetchDeanonMetadataUsingCache").initDeanonCacheDescForThread(e.value[1].jid,t)}))};u.__nop_name__="LSFillDeanonCacheForE2EEThread",l.default=u}),98);
__d("LSFillDeanonCacheForE2EEThread",["LSFillDeanonCacheForE2EEThread.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSFillDeanonCacheForE2EEThread.nop"),e[0],e[1])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxFillDeanonCacheForE2EEThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",[],(function(t,n,r,o,a,i){"use strict";var e=async function(t,n,r){};e.__nop_name__="LSShimHybridThreadDeleteByThreadKey",i.default=e}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSShimHybridThreadDeleteByThreadKey.nop"),e[0])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertAttachmentCta",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(19).add({ctaId:e[0],attachmentFbid:e[1],attachmentIndex:e[2],threadKey:e[3],messageId:e[5],title:e[6],type_:e[7],platformToken:e[8],actionUrl:e[9],nativeUrl:e[10],urlWebviewType:e[11],actionContentBlob:e[12],enableExtensions:e[13],extensionHeightType:e[14],targetId:e[15]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSIssueFetchThreadCapabilitiesTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxIssueFetchThreadCapabilitiesTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"insert_persistent_menu_items",t.i64.cast([0,117]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,0]):(n=a.item,r[0]=n.lastActivityTimestampMs)})},function(o){return t.i64.gt(r[0],e[1])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.count(t.filter(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.senderId,r[2])&&t.i64.gt(n.timestampMs,e[1])})).then(function(e){return r[3]=e})},function(n){return t.count(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]])).then(function(e){return r[4]=e})},function(n){return t.i64.eq(r[3],r[4])&&t.i64.gt(r[4],t.i64.cast([0,0]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({lastReadWatermarkTimestampMs:n.lastActivityTimestampMs})}):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}]):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure",e.__tables__=["threads","messages"],a.exports=e}),null);
__d("LSReplaceOptimisticReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var n=e.update,r=e.item;return n({authorityLevel:t.i64.cast([0,60])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxReplaceOptimisticReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSGroupRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.neq(e.groupRoomType,void 0)&&t.i64.neq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSUpdateOrInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).add({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:e[59],isDisappearingMode:e[60],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[38],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[38],e[10]],n[5]=i[0],n[6]=i[1]),t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,a=t.item;return r({lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[32],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,o=t.item;return r({lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.storedProcedure(n("LSDeleteThenInsertCommunityFolder"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],void 0,void 0,void 0,e[11],e[12],e[13],e[14],e[15],void 0,e[16],e[17],e[18],void 0,e[19],e[20],e[21],e[22],e[23],void 0,void 0,e[24],e[26],void 0,void 0,e[25],e[37],void 0,void 0,t.i64.cast([0,0]),e[29],void 0,t.i64.cast([0,1]),e[28],e[27],e[30],e[31],e[32],e[33],void 0,e[34],e[35],e[36],e[38],e[39],void 0,void 0,t.i64.cast([0,80]))},function(r){return t.storedProcedure(n("LSUpdateOrInsertThread"),e[8],e[9],e[10],e[2],e[5],void 0,t.i64.cast([0,80]),e[0],t.i64.cast([0,0]),t.i64.cast([0,17]),"community",e[6],e[7],t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,e[40],void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0)}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.eq(e.groupRoomType,void 0)||t.i64.eq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSTruncateCommunityListTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(166).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSTruncateNotificationSettings",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(175).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncCompletedTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSUpsertGradientColor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(117).put({themeFbid:e[0],gradientIndex:e[1],color:e[2],type_:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertGradientColorStoredProcedure",e.__tables__=["gradient_colors"],a.exports=e}),null);
__d("LSUpsertTheme",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.neq(e[12],void 0)?n[0]=e[12]:n[0]=e[0],t.db.table(116).put({fbid:e[0],themeIdx:e[1],fallbackColor:e[2],reverseGradiantsForRadial:e[3],accessibilityLabel:e[4],iconUrl:e[5],iconUrlFallback:e[6],backgroundUrl:e[8],description:e[9],isDeprecated:e[11],normalThemeId:n[0],appColorMode:e[13],titlebarBackgroundColor:e[14],titlebarButtonTintColor:e[15],titlebarTextColor:e[16],titlebarAttributionTextColor:e[17],composerTintColor:e[18],composerUnselectedTintColor:e[19],composerInputTextPlaceholderColor:e[20],composerInputBackgroundColor:e[21],composerInputBorderColor:e[22],composerInputBorderWidth:e[23],composerBackgroundColor:e[24],messageTextColor:e[25],messageBorderColor:e[26],messageBorderWidth:e[27],incomingMessageTextColor:e[28],incomingMessageBorderColor:e[29],incomingMessageBorderWidth:e[30],deliveryReceiptColor:e[31],tertiaryTextColor:e[32],primaryButtonBackgroundColor:e[33],hotLikeColor:e[34],reactionPillBackgroundColor:e[35],secondaryTextColor:e[36],quotedIncomingMessageBubbleColor:e[37],cornerRadius:e[38],blurredComposerBackgroundColor:e[39],composerSecondaryButtonColor:e[40],composerPlaceholderTextColor:e[41]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertThemeStoredProcedure",e.__tables__=["thread_themes"],a.exports=e}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSReplaceOptimisticReaction","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(t,n,r,o,a,i,l){"use strict";var e={deleteAllCommunityChannelCategories:r("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:r("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:r("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:r("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:r("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:r("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:r("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:r("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:r("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:r("LSGroupRoomTruncate"),populateCommunityFolderData:r("LSPopulateCommunityFolderData"),removeTask:r("LSRemoveTask"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),roomTruncate:r("LSRoomTruncate"),setRegionHint:r("LSSetRegionHint"),taskExists:r("LSTaskExists"),truncateCommunityListTable:r("LSTruncateCommunityListTable"),truncateNotificationSettings:r("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:r("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:r("LSUpsertGradientColor"),upsertSequenceId:r("LSUpsertSequenceId"),upsertTheme:r("LSUpsertTheme"),verifyContactRowExists:r("LSVerifyContactRowExists")},s=e;l.default=s}),98);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSBase64Decode.nop"),e[4]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.blobs.neq(r[0],void 0)?t.db.table(307).put({configId:e[1],projectName:e[0],cipherSuite:e[5],publicKey:r[0],maxEvals:e[2],redemptionLimit:e[3],expirationTimestampMs:e[6],tokenPollFrequencyMs:e[7],maxClientTokenPoolSize:e[8]}):((function(e){t.logger(e).info(e)})("issuing retry for project configurations task since public key was null"),r[1]=new t.Map,r[1].set("project_name",e[0]),r[2]=r[1].get("project_name"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),["acs_credentials","_",r[2]].join(""),t.i64.cast([0,351]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure",e.__tables__=["secure_acs_configurations"],a.exports=e}),null);
__d("LSSyncBumpThreadDataToClient",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[1],n.lastActivityTimestampMs)}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(o){return t.i64.eq(a.parentThreadKey,t.i64.cast([-1,4294967286]))&&t.i64.eq(e[2],t.i64.cast([0,2]))?(r[0]=new t.Map,r[0].set("thread_fbid",e[0]),r[0].set("force_upsert",!1),r[0].set("use_open_messenger_transport",!1),r[0].set("sync_group",t.i64.cast([0,95])),r[0].set("metadata_only",!1),r[0].set("preview_only",!1),r[1]=r[0].get("thread_fbid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,209]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1]})})},function(n){return t.i64.eq(e[2],t.i64.cast([0,1]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.i64.eq(e[2],t.i64.cast([0,2]))?t.resolve(0):t.i64.eq(e[2],t.i64.cast([0,3]))?t.i64.ge(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve():t.resolve(0)}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxSyncBumpThreadDataToClientStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTriggerReenrollementFromOptOutDelta",["LSArrayGetObjectAt","LSDeleteAndReenrollDeviceState","LSIsEncryptionVersionSecure"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r[16]=a[16],r[17]=a[17],a):(o=l.item,t.sequence([function(e){return r[26]=o.backupTenancy,r[25]=o.encryptionVersion,r[21]=void 0,t.i64.neq(r[21],void 0)?t.resolve(r[22]=r[21]):t.sequence([function(e){return r[27]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[28]&&(r[37]=(r[27].push(t.i64.cast([0,0])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]&&(r[37]=(r[27].push(t.i64.cast([0,2])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return r[30]&&(r[37]=(r[27].push(t.i64.cast([0,3])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[31]&&(r[37]=(r[27].push(t.i64.cast([0,4])),r[27])),r[32]=t.createArray(),r[33]=t.i64.of_int32(r[27].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[37]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[27],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=(r[32].push(r[38]),r[32])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[37]=t.createArray(),r[38]=t.i64.of_int32(r[32].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[40]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[40]).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return r[43]=(r[37].push(t.i64.to_string(r[41])),r[37])}])}):t.resolve()},function(e){return r[39]=r[37].join(","),r[34]=r[39]}])},function(e){return r[32].some(function(e){return t.i64.eq(r[25],e)})?r[35]=r[25]:r[35]=void 0,t.i64.neq(r[35],void 0)?r[36]=r[35]:r[36]=void 0,r[22]=r[36]}])},function(e){var n;return t.i64.neq(r[22],void 0)?r[23]=r[22]:r[23]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[24]=r[26]:r[24]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[23],r[24],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r[16]=n[16],r[17]=n[17]}]))})},function(o){return r[19]=!1,r[20]=t.i64.of_int32(e[1].length),t.i64.gt(r[20],t.i64.cast([0,0]))?t.loopAsync(r[20],function(o){return r[21]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[21]).then(function(e){var t;return t=e,r[22]=t[0],r[23]=t[1],t})},function(e){return r[19]=r[19]||t.i64.eq(r[22],r[1])}])}):t.resolve()},function(o){return r[19]&&t.i64.eq(e[0],r[0])&&t.i64.neq(r[1],void 0)?t.storedProcedure(n("LSDeleteAndReenrollDeviceState"),r[1],t.i64.cast([0,6])):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTriggerReenrollementFromOptOutDeltaStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a){if(r("gkx")("9855")){for(var t=n.mi_act_mapping_table.keys(new WeakMap);;){var i,l=await t.next();if(l.done)break;await(i=n.mi_act_mapping_table).delete.apply(i,l.value)}for(var u=o("ReQL").fromTableAscending(n.threads).filter(function(t){return t.syncGroup!=null&&(e||(e=o("I64"))).equal(t.syncGroup,(s||(s=o("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap);;){var c,d=await u.next();if(d.done)break;await(c=n.threads).delete.apply(c,d.value[0])}}return Promise.resolve()};u.__nop_name__="LSTruncateMetadataThreads",l.default=u}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.nativeOperation(n("LSTruncateMetadataThreads.nop"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.eq(e[5],t.i64.cast([0,0]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({defaultCtaId:e[2],defaultCtaTitle:e[3],defaultCtaType:e[4]})}):t.i64.eq(e[5],t.i64.cast([0,1]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta1Id:e[2],cta1Title:e[3],cta1Type:e[4],cta1IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,2]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta2Id:e[2],cta2Title:e[3],cta2Type:e[4],cta2IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,3]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta3Id:e[2],cta3Title:e[3],cta3Type:e[4],cta3IconType:void 0})}):t.resolve((function(e){t.logger(e).warn(e)})("Unexpected CTA index"))},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&([t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)})||t.i64.eq(n.threadType,t.i64.cast([0,152])))}).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.db.table(294).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(294).add({threadKey:e[0],threadQueueSequenceId:t.i64.cast([0,0]),isStale:e[1]}):(r=a.item,t.forEach(t.db.table(294).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({isStale:e[1]})}))}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure",e.__tables__=["threads","community_thread_sync_info"],a.exports=e}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(253).put({surfaceType:e[0],communityKey:e[1],isLoadingAfter:!1,hasMoreAfter:e[2],nextPageCursor:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure",e.__tables__=["community_surface_ranges"],a.exports=e}),null);
__d("LSUpdateReadReceipt",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[2])&&t.i64.lt(n.readWatermarkTimestampMs,e[0])}),function(n){var r=n.update,o=n.item;return r({readWatermarkTimestampMs:e[0],readActionTimestampMs:t.i64.gt(e[3],t.i64.cast([0,0]))?e[3]:o.readActionTimestampMs})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(o){return r[2]=new t.Map,r[2].set("thread_fbid",e[0]),r[2].set("force_upsert",!1),r[2].set("use_open_messenger_transport",!1),r[2].set("sync_group",t.i64.cast([0,104])),r[2].set("metadata_only",!1),r[2].set("preview_only",!1),r[3]=r[2].get("thread_fbid"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,209]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(o){return r[5]=t.createArray(),r[8]=(r[5].push(e[0]),r[5]),r[6]=new t.Map,r[6].set("number_of_threads",t.i64.cast([0,1])),r[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),r[6].set("thread_ids",r[5]),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"log_community_resnapshot_event",t.i64.cast([0,576]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[0]=t.i64.cast([0,2])}]):(a=l.item,t.sequence([function(n){return t.i64.lt(a.lastActivityTimestampMs,e[1])?t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1],snippet:e[2]})})},function(e){return r[2]=t.i64.cast([0,1])}]):t.resolve(r[2]=t.i64.cast([0,0]))},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table.index("jid")).getKeyRange(r));return o("RetUtil").getNullableRetResult(e==null?void 0:e.serverThreadKey)};e.__nop_name__="LSShimGetServerThreadKeyFromJIDV2",l.default=e}),98);
__d("LSReplaceOptimisticThread",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({threadKey:e[1],authorityLevel:t.i64.cast([0,40])})}):(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,40]))?(r("gkx")("14697")?n[2]=!1:n[2]=!0,n[1]=n[2]):n[1]=!0,n[1]?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()}):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure",e.__tables__=["threads"];var s=e;l.default=s}),98);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(32).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})},function(n){return t.forEach(t.filter(t.db.table(31).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure",e.__tables__=["threads_optimistic_context","messages_optimistic_context"],a.exports=e}),null);
__d("LSUpdateTaskQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({queueName:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateTaskValue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({taskValue:r.taskValue.split(e[1]).join(e[2])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSHybridThreadDelete","LSIssueNewTask","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[1]=!1:(t=o.item,r[1]=!0)})},function(n){return t.filter(t.db.table(9).fetch(),function(n){return t.i64.eq(n.threadKey,e[2])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!1:(t=o.item,r[3]=!0)})},function(o){return r[5]=t.i64.neq(r[0],void 0),r[7]=t.i64.eq(r[0],e[2])&&r[5],!r[7]&&!(t.i64.eq(r[0],e[1])&&r[5])&&r[5]&&(function(e){t.logger(e).mustfix(e)})("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."),t.i64.neq(e[2],void 0)?r[6]=e[2]:r[6]=t.i64.cast([0,0]),r[5]?r[7]?t.sequence([function(o){return r[1]?t.sequence([function(n){return t.db.table(173).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[8]=void 0:(t=o.item,r[8]=t.jid)})},function(o){return r[10]=new t.Map,r[10].set("authoritative_thread_key",e[1]),r[10].set("jid_authoritative_mapped",r[8]),r[10].set("jid_optimistic_mapped",e[0]),r[10].set("optimistic_thread_key",e[2]),r[11]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),"e2ee_log_incorrect_occam_mapping",t.i64.cast([0,160033]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSHybridThreadDelete"),e[1])}]):t.resolve()},function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):r[3]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.resolve():r[3]?r[1]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.sequence([function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):t.resolve()},function(o){return r[3]?t.sequence([function(o){return r[9]=t.i64.to_string(r[6]),r[8]=t.i64.to_string(e[1]),t.storedProcedure(n("LSUpdateTaskQueueName"),r[9],r[8])},function(e){return t.storedProcedure(n("LSUpdateTaskValue"),r[8],r[9],r[8])}]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure",e.__tables__=["threads","mi_act_mapping_table"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.neq(r[0],e[1])?r[1]=r[0]:r[1]=void 0,t.storedProcedure(n("LSUpdateThreadAuthorityAndMapping"),e[0],e[1],r[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSOnSendMessageFailure.nop",["MWChatInteraction","Promise","err","justknobx","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("sendToSentQPLLogger").__setRef("LSOnSendMessageFailure.nop");function u(t,o,a,i){if(!r("justknobx")._("1414")||a==null)return(e||(e=n("Promise"))).resolve();var l=c(a);return l==null||r("promiseDone")(s.load().then(function(e){return e.markSendToSentFail(l,"send_message_server_error",r("err")("send_message_server_error: %s",i))})),(e||(e=n("Promise"))).resolve()}function c(e){var t=o("MWChatInteraction").get(o("MWChatInteraction").s2sKey(e));return t==null?null:Number(t)}u.__nop_name__="LSOnSendMessageFailure",l.default=u}),98);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return e[2]===!0?r[0]=t.i64.cast([0,5]):r[0]=t.i64.cast([0,4]),e[2]===!0?r[1]=t.i64.cast([0,5]):r[1]=t.i64.cast([0,4]),e[2]===!0?r[2]=t.i64.cast([0,5]):r[2]=t.i64.cast([0,4]),t.nativeOperation(n("LSOnSendMessageFailure.nop"),e[0],e[1])},function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0]]],"optimistic"]),function(n){return n.offlineThreadingId===e[0]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var t=e.update,n=e.item;return t({sendStatus:r[0],sendStatusV2:r[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSMarkOptimisticMessageFailed"),a.optimisticMid,a.errorMessage,a.isRetryable);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWMarkMessageSendAsFailedLSDB",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o,a){var l;return(l=o==null?void 0:o.runInTransaction(async function(t){await r("LSMarkOptimisticMessageFailedStoredProcedure")(r("LSFactory")(t),{errorMessage:n,isRetryable:a,optimisticMid:e})},"readwrite",void 0,void 0,i.id+":29"))!=null?l:Promise.resolve()}l.markMessageSendAsFailed=e}),98);
__d("MAWCommonSetupBridge",["BroadcastChannelFallback","BrowserLockManager","CurrentAppID","CurrentUser","FBLogger","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWBridge","MAWChatJid","MAWCrossWorkerPortal","MAWCurrentUser","MAWDbMedia","MAWInit","MAWJobActionsV2","MAWMIC","MAWReportSendMessageSuccessResult","MAWThreadCutover","MAWThreadUtils","MWLogSend","ODS","Promise","QPLEvent","QPLUserFlow","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WAExceededStorageQuota","WAJids","cr:2691","gkx","justknobx","pageID","performanceAbsoluteNow","promiseDone","requireDeferred","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),g=new Set([25312111,25311870]),h=new Map,y=new Map([[(_=o("MAWDbMedia")).MEDIA_TYPE.IMAGE,8],[_.MEDIA_TYPE.VIDEO,10],[_.MEDIA_TYPE.GIF,6],[_.MEDIA_TYPE.STICKER,4],[_.MEDIA_TYPE.PTT,11],[_.MEDIA_TYPE.DOCUMENT_FILE,9]]),C=new Set([25312150,25313100,1056840931,25299294]),b=function(){return(p||(p=r("performanceAbsoluteNow")))()-Date.now()},v=b();function S(e,t,n){return(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return o("MAWThreadCutover").isCutoverSecureThreadFromChatJid(a,e).then(function(e){r("QPLUserFlow").addAnnotations(t,{bool:{is_cutover:e}},{instanceKey:n})})})}var R=/[^a-zA-Z0-9._-]/g,L=/[.]+/g,E=/[\s_.-]+/g;function k(e){return e.replace(E,".").replace(R,"").replace(L,".")}var I={broadcastChannelFallback:function(t){var e=t.event,n=t.namespace;o("BroadcastChannelFallback").handleBroadcastChannelFallbackMessage(n,e)},handleMessageSendResult:function(t){t.success&&o("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResult(t.report)},log:function(t){var e=t.logLevel,n=t.logString,r=t.tags,a=r.length>0,i=""+(o("CurrentAppID").getAppID()||"unknown");switch(e){case"count":(u||(u=o("ODS"))).bumpEntityKey(3185,k("e2ee."+(a?r.join("."):n)),k("count."+(a?n+"."+i:i)),1),f.onReadyImmediately(function(e){var t=e.count;return t(n,r)});return;case"log":f.onReadyImmediately(function(e){var t=e.info;return t(n,r)});return;case"warn":f.onReadyImmediately(function(e){var t=e.warn;return t(n,r)});return;case"logRestricted":f.onReadyImmediately(function(e){var t=e.logRestricted;return t(n,r)});return;case"debug":break;case"error":break;default:break}},logError:function(t){var e=t.entriesToReport,n=t.framesToPop,r=t.logString,o=t.message,a=t.stack,i=t.tags;f.onReadyImmediately(function(t){var l=t.logError;return l(r,i,o,a,n,e)})},odsBumpEntityKey:function(t){var e=t.amount,n=t.entity,r=t.key;(u||(u=o("ODS"))).bumpEntityKey(3185,n,r+"."+(o("CurrentAppID").getAppID()||"unknown"),e)},onJobFinished:function(t){switch(t.type==="createGroup"&&t.originalArgs.key!=null&&o("MAWJobActionsV2").recentFinishedJobsCache.set(t.originalArgs.key,t.result),t.type){case"sendAppData":{var e,n=t.originalArgs,a=t.result;(e=n.args.contents.actions)==null||e.forEach(function(e){var t=e.messageAction;t==null||t.type!=="delete_for_me"||a.type!=="not_sent"||h.set(a.appDataExternalId,{chatJid:t.protocolMsgId.chat,externalId:t.protocolMsgId.externalId,type:"deleteMsgForMe"})});break}}if(t.type==="sendWrittenAppData"){var i=t.originalArgs.appDataExternalId,l=h.get(i);if(h.delete(i),l!=null&&l.type==="deleteMsgForMe"&&t.result.type==="success"){var u=l.chatJid,m=l.externalId,p=o("MAWThreadUtils").getLSThreadTypeFromJid(u);r("promiseDone")((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){r("promiseDone")(o("MAWChatJid").toThreadKey(e.tables,u,"MAWCommonSetupBridge::sendWrittenAppData").then(function(t){o("MWLogSend").log(e,{actor:(c||(c=o("I64"))).of_string(o("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:25,backend:1,hasReply:!1,messagingThreadId:c.to_string(t),offlineThreadingId:m,sendType:3,source:(d||(d=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN),threadKey:t,threadType:p})}))}))}}},qplEvent:function(a){var t,i=a.action,l=a.annotations,s=a.debugInfo,u=a.error,c=a.event,d=a.instanceKey,p=a.performanceAndDateSkew,_=a.timeoutInMs,f=a.timestamp;if(!(!r("CurrentUser").isEmployee()&&g.has((m||(m=o("QPLEvent"))).getMarkerId(c)))){var h=d||0,y=l==null||(t=l.string)==null?void 0:t.jid,R=y!=null?o("WAJids").validateChatJid(y):void 0,L=C.has((m||(m=o("QPLEvent"))).getMarkerId(c))&&R!=null?S(R,c,h):(e||(e=n("Promise"))).resolve(),E=f!=null&&p!=null&&r("gkx")("8334")?f+p-v+b():f;switch(i.type){case"start":r("QPLUserFlow").start(c,{annotations:babelHelpers.extends({},l||{},{bool:babelHelpers.extends({},(l==null?void 0:l.bool)||{},{isArmadilloPublicLaunchUser:r("gkx")("23405"),isDev:0,isGifSearchEnbled:!0,isLockApiSupported:r("BrowserLockManager")!=null,isRestoreDBEnabled:r("gkx")("23906"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),s_pdb:r("gkx")("8483"),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()})}),instanceKey:h,timeoutInMs:_,timestamp:E});break;case"success":{r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endSuccess(c,{annotations:l,instanceKey:h,timestamp:E})});break}case"cancel":{r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endCancel(c,{annotations:l,cancelReason:i.cancelReason,instanceKey:h,timestamp:E})});break}case"point":l&&r("QPLUserFlow").addAnnotations(c,l,{instanceKey:h}),(m||(m=o("QPLEvent"))).getMarkerId(c)===1056839232?o("MAWMIC").addPoint(i.name,E):r("QPLUserFlow").addPoint(c,i.name,{instanceKey:h,timestamp:E});break;case"annotations":r("QPLUserFlow").addAnnotations(c,l!=null?l:{},{instanceKey:h});break;case"failure":r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{failureReason:i.name}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endFailure(c,i.name,{annotations:l,instanceKey:h,timestamp:E})});break;case"error":r("QPLUserFlow").markError(c,i.name,{debugInfo:s,error:u,instanceKey:h});break;default:throw r("FBLogger")("messenger_web").mustfixThrow("Bridge sends unreachable qplEvent action type")}}}},T=function(t,n){return t.push(n),t},D=function(t){var e=t.customizeEventHandlers,a=t.worker;o("MAWInit").MAWInit.logPoint("bridge_setup_start");var i=o("MAWBridge").getBridge();i.setHandlers("event",babelHelpers.extends({},I,e));var l=o("MAWCrossWorkerPortal").getOrCreateCrossWorkerPortal(i,["backend","kt","mps","waapi","ebsmapi"],T,{bridgeBatcherMaxTokens:Number.MAX_SAFE_INTEGER,portalCacheSize:r("justknobx")._("3092")});if(l.setPort(a),r("gkx")("3282")){var s=o("WADevToolsBridge").getDevToolBridge(),u=new MessageChannel,c=o("WACrossWorkerPortal").attachPortal(s,["backend"],T,r("pageID")),d=o("WACrossWorkerPortal").attachPortal(s,["devtool","mawDbDevTool"],T,r("pageID"));o("WADevToolMessageChannel").onCreateNewChannel(function(e){c.setPort(e.port1)}),d.setPort(u.port1),n("cr:2691")==null||n("cr:2691").connectAddonPort(u.port2),l.addListener(function(e,t){return s.fireAndForget("devtool","bridgeMessage",{direction:t==="outgoing"?"toWorker":"toMain",msg:e,ts:Date.now()},!0)})}return o("MAWMIC").addPoint("bridge_setup_done"),o("MAWInit").MAWInit.logPoint("bridge_setup_end"),i};l.MEDIA_TYPE_TO_ATTACHMENT_TYPE=y,l.initBridge=D}),98);
__d("MAWGetAttachmentTypeForSendWrittenMsg",["MAWCommonSetupBridge"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l,s){if(a)return 43;if(e==="revokeMsg")return 26;if(i!=null)return i;if(n)return 3;if(r&&l===!1||s===!0)return 13;var u=t!=null?o("MAWCommonSetupBridge").MEDIA_TYPE_TO_ATTACHMENT_TYPE.get(t):null;return u!=null?u:0}l.getAttachmentTypeForSendWrittenMsg=e}),98);
__d("MAWReportSendMessageSuccessResult",["BrowserLockManager","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWChatJid","MAWCurrentUser","MAWFrontendMediaUtils","MAWGetAttachmentTypeForSendWrittenMsg","MAWThreadUtils","MAWVault","MAWXMAUtils","MWLogSend","MultipleTabsLogger","URLMatcher","getErrorSafe","justknobx","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(e,t){try{var n=await o("MAWChatJid").toThreadKey(e.tables,t,"MAWCommonSetupBridge::sendWrittenMsg");return n}catch(e){throw r("getErrorSafe")(e)}}function d(t,n){var a,i=t.externalId,l=null,d=!1,m=!1;switch(t.messageType){case"editMsg":d=!0;break;case"revokeMsg":i=t.referencedExternalId;break;case"sendMsg":m=t.specialTextSize!=null;break;case"reactionMsg":l=t.reaction!=null?20:27;break;case"bumpMsg":break;case"noteReplyMsg":break;case"sendPoll":break;case"fixMe":return;default:t.messageType}var p=null;t.fileType!=null&&(p=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(t.fileType).mediaType);var _=t.xmaMessageType!=null,f=t.quote!=null||o("MAWXMAUtils").isXMAStoryReply(t.xmaMessageType),g=r("URLMatcher").match(o("MAWVault").unvault((a=t.content)!=null?a:"")),h=g!=null&&g.length>0,y=o("MAWGetAttachmentTypeForSendWrittenMsg").getAttachmentTypeForSendWrittenMsg(t.messageType,p,m,_,d,l,f,h),C=o("MAWThreadUtils").getLSThreadTypeFromJid(t.chatJid);r("promiseDone")((e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(async function(e){var a,l=(t==null?void 0:t.source)!=null?t.source:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN),d=await c(e,t.chatJid);o("MWLogSend").log(e,{actor:(u||(u=o("I64"))).of_string(o("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:y,backend:1,hasReply:f,initatingSource:t==null?void 0:t.initiatingSource,messageSendDataclass:n,messagingThreadId:u.to_string(d),msgTtl:(a=t.ephemeralSetting)==null?void 0:a.ephemeralExpirationInSec,offlineThreadingId:i,sendType:1,source:l,threadKey:d,threadType:C,waGroupJid:void 0})}))}function m(e){r("justknobx")._("154")&&o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()&&r("BrowserLockManager")!=null&&!o("MultipleTabsLogger").hasUniqueLock()||d(e)}l.reportSendMessageSuccessResultFn=d,l.reportSendMessageSuccessResult=m}),98);
__d("MAWMessageSendReporter",["FBLogger","MAWMarkMessageSendAsFailedLSDB","MAWReportSendMessageSuccessResult","MAWSetupWorkerAuxStateForLogging","MWLogSendToSentFailedError","QPLUserFlow","WAGetSafeQPLError","getErrorSafe","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,a,i){var l=n.qplEventType,u=n.qplInstanceKey;try{var c=await t;if(c==null)return;if(c.success)c.value!=null?o("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResultFn(c.value,i):r("QPLUserFlow").addPoint(l,"no-op",{instanceKey:u}),r("QPLUserFlow").endSuccess(l,{instanceKey:u});else{var d,m,p,_=c.error.isRetriable===!0;r("MWLogSendToSentFailedError")({qplEventType:l,qplInstanceKey:u},c.error.type,void 0,c.error.errorCode,c.error.applicationErrorCode),r("QPLUserFlow").endFailure(l,c.error.type,{annotations:{bool:{isRetriable:(d=c.error.isRetriable)!=null?d:!1,workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{errorCode:(m=c.error.errorCode)!=null?m:0},string:{details:(p=c.error.details)!=null?p:""},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:u}),s(e,_,a)}}catch(t){var f=r("getErrorSafe")(t);if(r("MWLogSendToSentFailedError")({qplEventType:l,qplInstanceKey:u},"runtime-failure",f),r("QPLUserFlow").endFailure(l,"runtime-failure",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:o("WAGetSafeQPLError").getSafeQPLErrorMessage(f)},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:u}),s(e,!1,a,f),r("FBLogger")("messenger_web").catching(f).mustfix("MAWMessageSendReporter"),r("justknobx")._("4010")&&typeof f=="object"){var g=String(f==null?void 0:f.message),h=String(f==null?void 0:f.messageParams),y=String(f==null?void 0:f.stack);r("FBLogger")("messenger_web").mustfix("Failed to send, e: %s. error params: %s. call stack: %s",g,h,y)}}}function s(e,t,n,a){if(e!=null){var i=e.chatJid,l=e.externalId;r("promiseDone")(o("MAWMarkMessageSendAsFailedLSDB").markMessageSendAsFailed(l,i,o("WAGetSafeQPLError").getSafeQPLErrorMessage(a),n,t))}}l.MAWMessageSendReporter=e}),98);
__d("LSUpdateDisappearingSettingInClientThreadsTable.nop",["I64","LSMessagingThreadAttributionType","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","MAWJids","MAWMessageSendReporter","MAWMiActOnActThreadReady","ReQL","WATimeUtils","promiseDone","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,a,i){var t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.threads).getKeyRange(i));if(t!=null)return o("MAWMiActOnActThreadReady").onActThreadReady(n,i,"LSUpdateDisappearingSettingInClientThreadsTable.nop",function(n,a){var i,l,s={ephemeralExpirationInSec:(e||(e=o("I64"))).to_int32((i=t.disappearingSettingTtl)!=null?i:(e||(e=o("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(e.to_float((l=t.disappearingSettingUpdatedTs)!=null?l:(e||(e=o("I64"))).zero))};if(o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:a,settings:s}),t.disappearingSettingUpdatedBy!=null){var u=(e||(e=o("I64"))).to_string(t.disappearingSettingUpdatedBy),c=u===r("MAWEphemeralMsgAutoResetSystemId");if(u===o("MAWCurrentUser").getID()||c){var d=function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{chatJid:a,ephemeralExpirationInSec:s.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:s.ephemeralLastUpdatedOrSetTimestamp,isEphemeralSettingReset:c,s2sInstanceKey:t})},m=o("sendToSentQPLLogger").markSendToSentStartWithAnnotation(t,{isEphemeralSetting:!0},r("LSMessagingThreadAttributionType").UNKNOWN);r("promiseDone")(o("MAWMessageSendReporter").MAWMessageSendReporter(null,d(m),{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:m}))}else o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingsFromMI",{author:o("MAWJids").toUserJid(u),chatJid:a,ephemeralExpirationInSec:s.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:s.ephemeralLastUpdatedOrSetTimestamp,fromWAI:!1,isEphemeralSettingReset:!1,serverTs:s.ephemeralLastUpdatedOrSetTimestamp})}return Promise.resolve()})};s.__nop_name__="LSInsertAdminMessageInClientMessages",l.default=s}),98);
__d("LSUpdateThreadDisappearingSetting",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSUpdateDisappearingSettingInClientThreadsTable.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("ephemerality_type",void 0),t.i64.neq(e[1],void 0)?r[1]=t.i64.to_string(e[1]):r[1]=void 0,r[0].set("ephemeral_options_duration_in_sec",r[1]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,o){var a=e.done,i=e.value;return a?r[2]=void 0:(o=i.item,t.sequence([function(e){return r[8]=o.metadata,r[8]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[8]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[10]=new t.Map,r[11]=r[9].keys(),r[12]=t.i64.of_int32(r[11].length),t.i64.gt(r[12],t.i64.cast([0,0]))?t.loopAsync(r[12],function(e){return r[13]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[11],r[13]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(e){return r[16]=r[9].get(r[14]),r[10].set(r[14],r[16])}])}):t.resolve()},function(e){return r[7]=r[10]}]):t.resolve((r[9]=new t.Map,r[7]=r[9]))},function(e){return r[2]=r[7]}]))})},function(n){return r[2]?r[4]=!1:r[4]=!0,r[4]||r[2].set("message_ephemerality_setting",r[0]),r[2]?r[5]=!1:r[5]=!0,r[5]?r[6]=void 0:(r[7]=t.toJSON(r[2]),r[6]=r[7]),t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.syncGroup,t.i64.cast([0,95]))}),function(t){var n=t.update,o=t.item;return n({disappearingSettingTtl:e[1],disappearingSettingUpdatedTs:e[2],disappearingSettingUpdatedBy:e[3],metadata:r[6]})})},function(r){return t.nativeOperation(n("LSUpdateDisappearingSettingInClientThreadsTable.nop"),e[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadDisappearingSettingStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadNullState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],nullstateDescriptionText1:e[5],nullstateDescriptionType1:e[10],nullstateDescriptionText2:e[6],nullstateDescriptionType2:e[11],nullstateDescriptionText3:e[7],nullstateDescriptionType3:e[12],capabilities:e[15],threadName:e[16],threadSubtype:e[4]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadNullStateStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpsertContextualProfileV1",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.eq(e[5],t.i64.cast([0,0]))?n[0]=void 0:n[0]=e[5],t.db.table(216).put({ownerId:e[0],associatedEntityId:e[1],profilePictureUrl:e[2],profilePictureFallbackUrl:e[4],profilePictureUrlExpirationTimestampMs:n[0],profileName:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactUpsertContextualProfileV1StoredProcedure",e.__tables__=["contextual_profile_v1"],a.exports=e}),null);
__d("LSVoprfComputeSharedSecret.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),i=e.voprfInstance,l=i.voprfInfo,s=i.voprfWasm;try{var u=s.clientFinalize(l,new Uint8Array(r),new Uint8Array(a));return Promise.resolve([u.finalEvaluation.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(i)}};e.__nop_name__="LSVoprfComputeSharedSecret",l.default=e}),98);
__d("LSVoprfUnblind.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a,i,l,s,u){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),c=e.voprfInstance,d=c.voprfInfo,m=c.voprfWasm;try{var p=m.verifiableUnblind(d,new Uint8Array(s),new Uint8Array(u),new Uint8Array(a),new Uint8Array(l),new Uint8Array(i),new Uint8Array(r),!0);return Promise.resolve([p.unblindedElement.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(c)}};e.__nop_name__="LSVoprfUnblind",l.default=e}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(307).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?(r[1]=t.createArray(),r[2]=(r[1].push("No valid config found when saving signed credentials for project: "),r[1]),r[3]=(r[1].push("unknown"),r[1]),r[4]=t.toJSON(r[1]),(function(e){t.logger(e).mustfix(e)})(r[4])):(a=l.item,t.sequence([function(o){return r[1]=t.i64.of_int32(e[1].length),t.i64.gt(r[1],t.i64.cast([0,0]))?t.loopAsync(r[1],function(o){return r[2]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[2]).then(function(e){var t;return t=e,r[3]=t[0],r[4]=t[1],t})},function(e){return r[5]=r[3].get("token_id"),t.db.table(308).fetch([[[r[5]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.blob(""),t.blob(""),t.blob("")],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.nonce,n.blindedNonce,n.blindingFactor],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return t.forEach(t.db.table(308).fetch([[[r[5]]]]),function(e){return e.delete()})},function(e){return r[10]=r[3].get("signed_nonce"),t.nativeOperation(n("LSBase64Decode.nop"),r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return r[12]=r[3].get("proof_c"),t.nativeOperation(n("LSBase64Decode.nop"),r[12]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[14]=r[3].get("proof_s"),t.nativeOperation(n("LSBase64Decode.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSVoprfUnblind.nop"),a.publicKey,r[8],r[7],r[11]==null?t.blob(""):r[11],r[13]==null?t.blob(""):r[13],r[15]==null?t.blob(""):r[15]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfComputeSharedSecret.nop"),r[6],r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(n){return t.blobs.neq(r[17],void 0)?t.db.table(309).add({tokenId:r[5],configId:e[0],nonce:r[6],redeemLimit:a.redemptionLimit,sharedSecret:r[17]}):t.resolve()}]):t.resolve()}])}):t.resolve()},function(r){return t.storedProcedure(n("LSRemoveBlindedTokens"),e[0])}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_blinded_tokens","secure_acs_tokens"],a.exports=e}),null);
__d("LSVerifyCommunityFolderExistsV2",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return e[1]?t.resolve(r[0]=e[1]):t.sequence([function(n){return t.db.table(162).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!0:(t=o.item,r[3]=!1)})},function(e){return r[1]=r[3]}]))})},function(e){return r[0]=r[1]}])},function(o){return r[0]?(r[1]=new t.Map,r[1].set("folder_id",e[0]),r[2]=r[1].get("folder_id"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[2]),t.i64.cast([0,813]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyCommunityFolderExistsV2StoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSCheckAuthoritativeMessageExists","LSClearPinnedMessages","LSCompleteThreadCutover","LSDeleteBanner","LSDeleteBannersByIds","LSDeleteExistingMessageRanges","LSDeleteRowRichStatusCustomAudience","LSDeleteThenInsertAvatarFeatureConfig","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmChannelList","LSDeleteThenInsertCommunityUnjoinedThread","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSFillDeanonCacheForE2EEThread","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueFetchThreadCapabilitiesTask","LSIssueInsertPersistentMenuItemsForThreadTask","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkThreadReadV2","LSReplaceOptimisticReaction","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSStoreProjectConfiguration","LSSyncBumpThreadDataToClient","LSTransportHybridParticipantUpdateReceipts","LSTriggerReenrollementFromOptOutDelta","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateCommunityThreadStaleState","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadActivityStatus","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadDisappearingSetting","LSUpdateThreadNullState","LSUpdateThreadsRangesV2","LSUpsertContextualProfileV1","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSVerifyAndSaveNewCredentials","LSVerifyCommunityFolderExistsV2","LSVerifyE2EEMetadataThreadExistsV2","LSWriteThreadCapabilities"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("LSStaticDependencies"),{LSVerifyCommunityFolderExistsV2:r("LSVerifyCommunityFolderExistsV2"),addParticipantIdToGroupThread:r("LSAddParticipantIdToGroupThread"),checkAuthoritativeMessageExists:r("LSCheckAuthoritativeMessageExists"),clearPinnedMessages:r("LSClearPinnedMessages"),completeThreadCutover:r("LSCompleteThreadCutover"),deleteBanner:r("LSDeleteBanner"),deleteBannersByIds:r("LSDeleteBannersByIds"),deleteExistingMessageRanges:r("LSDeleteExistingMessageRanges"),deleteRowRichStatusCustomAudience:r("LSDeleteRowRichStatusCustomAudience"),deleteThenInsertAvatarFeatureConfig:r("LSDeleteThenInsertAvatarFeatureConfig"),deleteThenInsertBotProfileInfoV2:r("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmChannelList:r("LSDeleteThenInsertCmChannelList"),deleteThenInsertCommunityUnjoinedThread:r("LSDeleteThenInsertCommunityUnjoinedThread"),deleteThenInsertRankingRequest:r("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:r("LSDeleteThenInsertRankingScore"),fillDeanonCacheForE2EEThread:r("LSFillDeanonCacheForE2EEThread"),getFirstAvailableAttachmentCTAID:r("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:r("LSHybridThreadDelete"),insertAttachmentCta:r("LSInsertAttachmentCta"),insertAttachmentItem:r("LSInsertAttachmentItem"),insertBlobAttachment:r("LSInsertBlobAttachment"),insertNewMessageRange:r("LSInsertNewMessageRange"),issueFetchThreadCapabilitiesTask:r("LSIssueFetchThreadCapabilitiesTask"),issueInsertPersistentMenuItemsForThreadTask:r("LSIssueInsertPersistentMenuItemsForThreadTask"),issueNextSync:r("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:r("LSMailboxTaskCompletionApiOnTaskCompletion"),markThreadReadV2:r("LSMarkThreadReadV2"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),setForwardScore:r("LSSetForwardScore"),setMessageDisplayedContentTypes:r("LSSetMessageDisplayedContentTypes"),storeProjectConfiguration:r("LSStoreProjectConfiguration"),syncBumpThreadDataToClient:r("LSSyncBumpThreadDataToClient"),transportHybridParticipantUpdateReceipts:r("LSTransportHybridParticipantUpdateReceipts"),triggerReenrollementFromOptOutDelta:r("LSTriggerReenrollementFromOptOutDelta"),truncateMetadataThreads:r("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:r("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:r("LSUpdateAttachmentItemCtaAtIndex"),updateCommunityThreadStaleState:r("LSUpdateCommunityThreadStaleState"),updateOrInsertCommunitySurfaceRange:r("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:r("LSUpdateOrInsertOhaiGatewayKeyConfigs"),updateOrInsertThread:r("LSUpdateOrInsertThread"),updateReadReceipt:r("LSUpdateReadReceipt"),updateThreadActivityStatus:r("LSUpdateThreadActivityStatus"),updateThreadAuthorityAndMappingWithOTIDFromJID:r("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadDisappearingSetting:r("LSUpdateThreadDisappearingSetting"),updateThreadNullState:r("LSUpdateThreadNullState"),updateThreadsRangesV2:r("LSUpdateThreadsRangesV2"),upsertContextualProfileV1:r("LSUpsertContextualProfileV1"),upsertFolderSeenTimestamp:r("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:r("LSUpsertInboxThreadsRange"),upsertMessage:r("LSUpsertMessage"),upsertReaction:r("LSUpsertReaction"),upsertSyncGroupThreadsRange:r("LSUpsertSyncGroupThreadsRange"),verifyAndSaveNewCredentials:r("LSVerifyAndSaveNewCredentials"),verifyE2EEMetadataThreadExistsV2:r("LSVerifyE2EEMetadataThreadExistsV2"),writeThreadCapabilities:r("LSWriteThreadCapabilities")}),s=e;l.default=s}),98);/*FB_PKG_DELIM*/
__d("BroadcastChat.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"5 5 25 25",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",d:"M18 28.07c6.393 0 11-4.467 11-10.57v-.002C29 11.396 24.393 7 18 7S7 11.396 7 17.498v.002c0 2.091.414 3.98 1.383 5.562.458.747.564 1.664.29 2.5l-.727 2.411c-.2.614.373 1.188.964.986l3.668-1.126a4.261 4.261 0 0 1 2.39-.09c.952.233 1.966.328 3.032.328zm0-8.27a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.31-5.888a.75.75 0 0 1 1.06.008l.176.179a5.293 5.293 0 0 1 0 7.402l-.175.178a.75.75 0 0 1-1.061.01l-.357-.351a.75.75 0 0 1-.008-1.061l.175-.178a3.293 3.293 0 0 0 0-4.598l-.175-.178a.75.75 0 0 1 .008-1.06l.357-.351zm-8.255 1.411a.75.75 0 0 0-.008-1.06l-.357-.351a.75.75 0 0 0-1.06.008l-.176.179a5.293 5.293 0 0 0 0 7.402l.175.178a.75.75 0 0 0 1.061.01l.357-.351a.75.75 0 0 0 .008-1.061l-.175-.178a3.293 3.293 0 0 1 0-4.598l.175-.178z",clipRule:"evenodd"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9578991145469240"}),null);
__d("GroupsCometGlobalChatCreationDialogQuery$Parameters",["GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometGlobalChatCreationDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometGlobalChatCreationDialog.entrypoint",["GroupsCometGlobalChatCreationDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("GroupsCometGlobalChatCreationDialogQuery$Parameters"),variables:{scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("GroupsCometGlobalChatCreationDialog.react").__setRef("GroupsCometGlobalChatCreationDialog.entrypoint")};l.default=e}),98);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("limit",e[0]),r[1]=t.createArray(),r[5]=(r[1].push("search_contacts"),r[1]),r[2]=t.i64.of_float(Date.now()),r[5]=(r[1].push(t.i64.to_string(r[2])),r[1]),r[3]=t.toJSON(r[1]),r[4]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),r[3],t.i64.cast([0,452]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSSearchInsertRankingContactsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertRankingContactsStoredProcedure",["LSInsertRankingContacts","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertRankingContacts"),a.limit);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LsUniversalSearchDataSource",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LOCAL_BLENDED:0,SERVER_ENTITIES_NAMED_DSQ1:1,SERVER_ENTITIES_NAMED_DSQ2:2}),l=e;i.default=l}),66);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2}),l=e;i.default=l}),66);
__d("MWChatSearchTypeheadActionButtonViewItem.react",["CometTypeaheadViewItem.react","FDSSkittleIcon.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.entry,a=e.icon,i=e.onHighlightEntry,l=e.onPressEntry,u=e.title,c;t[0]!==a?(c=s.jsx(r("FDSSkittleIcon.react"),{color:"gray",icon:a,size:36}),t[0]=a,t[1]=c):c=t[1];var d=c,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x3ct3a4 xexx8yu x1icxu4v x18d9i69 x25sj25"},t[2]=m):m=t[2];var p;t[3]!==u?(p=s.jsx(r("MWXText.react"),{type:"body3",children:u}),t[3]=u,t[4]=p):p=t[4];var _;return t[5]!==n||t[6]!==d||t[7]!==i||t[8]!==l||t[9]!==p?(_=s.jsx("div",babelHelpers.extends({},m,{role:"listbox",children:s.jsx(r("CometTypeaheadViewItem.react"),{entry:n,isActive:!1,itemStartContent:d,onHighlightEntry:i,onPressEntry:l,role:"option",children:p})})),t[5]=n,t[6]=d,t[7]=i,t[8]=l,t[9]=p,t[10]=_):_=t[10],_}l.default=u}),98);
__d("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10056616957724259"}),null);
__d("MWCreateBroadcastChannelDialogQuery$Parameters",["MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCreateBroadcastChannelDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23896442089962141"}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters",["MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionCreateBroadcastChannelNuxQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionCreateBroadcastChannelNux.entrypoint",["JSResourceForInteraction","MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{broadcastChannelQueryRef:{parameters:r("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWQuickPromotionCreateBroadcastChannelNux.react").__setRef("MWQuickPromotionCreateBroadcastChannelNux.entrypoint")},s=e;l.default=s}),98);
__d("MWCreateBroadcastChannelDialog.entrypoint",["JSResourceForInteraction","MWCreateBroadcastChannelDialogQuery$Parameters","MWQuickPromotionCreateBroadcastChannelNux.entrypoint","NestedRelayEntryPointBuilderUtils"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{entryPoints:{nuxEntryPoint:o("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:r("MWQuickPromotionCreateBroadcastChannelNux.entrypoint"),entryPointParams:{}})},queries:{queryReference:{parameters:r("MWCreateBroadcastChannelDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWCreateBroadcastChannelDialog.react").__setRef("MWCreateBroadcastChannelDialog.entrypoint")};l.default=e}),98);
__d("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react",["fbt","BroadcastChannelQPL","BroadcastChat.svg.react","MWChatSearchTypeheadActionButtonViewItem.react","MWCreateBroadcastChannelDialog.entrypoint","MWLogBroadcastChannelFalcoEvent","emptyFunction","react","react-compiler-runtime","useBroadcastChannelImpressionLogger","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(9),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"Create channel"),e[0]=t):t=e[0];var n=t,a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={},e[1]=a):a=e[1];var i=r("useMWXEntryPointDialog")(r("MWCreateBroadcastChannelDialog.entrypoint"),a),l=i[0],c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c={clientExtras:{entry_point:"public_chats:omnipicker"},event:161,parentSurface:7,source:20,surface:4},e[2]=c):c=e[2];var m=r("useBroadcastChannelImpressionLogger")(c),p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={key:"newBroadcastChannel",label:"New Broadcast Channel",type:"entry"},e[3]=p):p=e[3];var _;e[4]!==l?(_=u.jsx(r("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:p,icon:r("BroadcastChat.svg.react"),onHighlightEntry:r("emptyFunction"),onPressEntry:function(){o("BroadcastChannelQPL").logCreateBroadcastChannelQPLStart("public_chats:omnipicker"),o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({clientExtras:{entry_point:"public_chats:omnipicker"},event:95,parentSurface:7,source:20,surface:4}),l({},d)},title:n}),e[4]=l,e[5]=_):_=e[5];var f;return e[6]!==m||e[7]!==_?(f=u.jsx("div",{ref:m,children:_}),e[6]=m,e[7]=_,e[8]=f):f=e[8],f}function d(){}l.default=c}),226);
__d("MessengerGroup.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 26 19",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M13 10c-2.13 0-3.96-1.5-3.96-4.75C9.04 2.6 10.71.83 13 .83c2.3 0 3.96 1.77 3.96 4.42C16.96 8.51 15.13 10 13 10zm6.62 8.33c.57 0 .88-.5.88-1.1 0-3.08-3.47-5.56-7.5-5.56-4.03 0-7.5 2.48-7.5 5.55 0 .62.3 1.11.88 1.11h13.24zm2.55-7.5c-1.57 0-2.92-1.08-2.92-3.45 0-1.93 1.23-3.21 2.92-3.21s2.91 1.28 2.91 3.21c0 2.37-1.34 3.45-2.91 3.45zm.81 6.67a.83.83 0 0 1-.83-.72l-.01-.11a6.3 6.3 0 0 0-1.7-3.65c-.2-.22-.14-.57.14-.67a4.95 4.95 0 0 1 1.59-.27c1.66 0 3.33.84 3.33 2.5 0 2.92-2.08 2.92-2.08 2.92h-.44zM.92 7.38c0 2.37 1.34 3.45 2.91 3.45s2.92-1.08 2.92-3.45c0-1.93-1.23-3.21-2.92-3.21S.92 5.45.92 7.38zm2.1 10.12h-.44S.5 17.5.5 14.58c0-1.66 1.67-2.5 3.33-2.5.54 0 1.08.1 1.6.27.27.1.33.45.13.67a6.3 6.3 0 0 0-1.7 3.65l-.01.1a.83.83 0 0 1-.83.73z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useMWLoggerEntrypoint",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("gkx")("23433"),n=null;return e!==void 0&&(e==="Inbox"?n=t?"messengerdotcom":"fb_groups:comet_www_inbox":e==="ChatTab"?n="fb_groups:comet_www_chat":e==="FullscreenChat"&&(n="fb_groups:comet_www_fullscreen_chat")),n}l.default=e}),98);
__d("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react",["fbt","$InternalEnum","GroupsCometChatsEngagementLogger","GroupsCometGlobalChatCreationDialog.entrypoint","LSThreadAttributionStore","MWChatSearchTypeheadActionButtonViewItem.react","MWLSThreadDisplayContext","MessengerGroup.svg.react","emptyFunction","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger","useMWLoggerEntrypoint","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=n("$InternalEnum")({CHAT_HEAD:"bottom_chat_create",JEWEL:"top_chat_create"});function d(){var e=o("react-compiler-runtime").c(14),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={},e[0]=t):t=e[0];var n=r("useMWXEntryPointDialog")(r("GroupsCometGlobalChatCreationDialog.entrypoint"),t),a=n[0],i=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),l=r("useMWLoggerEntrypoint")(i),d=o("LSThreadAttributionStore").getSourceForNewThread(),p=d==="chatheadsNewMessage"?c.CHAT_HEAD:d==="jewelNewMessage"?c.JEWEL:null,_=l!=null?l:"",f;e[1]!==_?(f={client_extras:{entry_point:_,origin:p!=null?p:""},event:"community_chat_button_impression",surface:"chat_creation_template_list"},e[1]=_,e[2]=f):f=e[2];var g=r("useGroupsCometChatsEngagementImpressionLogger")(f),h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h={key:"newCommunityChat",label:"New Community Chat",type:"entry"},e[3]=h):h=e[3];var y;e[4]!==i||e[5]!==l||e[6]!==a?(y=function(){a({entrypoint:l!=null?l:void 0,shouldCloseComposeTab:i==="ChatTab",shouldGoToMessenger:i==="Inbox"},m),o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{entry_point:l!=null?l:"",origin:p!=null?p:""},event:"create_cc_button_clicked",source:"create_cc_button",surface:"chat_creation_template_list"})},e[4]=i,e[5]=l,e[6]=a,e[7]=y):y=e[7];var C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"Create community chat"),e[8]=C):C=e[8];var b;e[9]!==y?(b=u.jsx(r("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:h,icon:r("MessengerGroup.svg.react"),onHighlightEntry:r("emptyFunction"),onPressEntry:y,title:C}),e[9]=y,e[10]=b):b=e[10];var v;return e[11]!==g||e[12]!==b?(v=u.jsx("div",{ref:g,children:b}),e[11]=g,e[12]=b,e[13]=v):v=e[13],v}function m(){}l.default=d}),226);
__d("MWCMLightSpeedChatTabActionViewItems.react",["BaseDivider.react","MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react","MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react","MWPActor.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={divider:{marginTop:"x1xmf6yo",marginInlineEnd:"x1ys307a",marginBottom:"x1e56ztr",marginInlineStart:"xyqm7xq",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(2),t=r("gkx")("4710"),n=r("gkx")("24048"),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=o("MWPActor.react").isPromode(),e[0]=a):a=e[0];var i=a,l=n||i,c=!t||l,d=i||n,m;return e[1]===Symbol.for("react.memo_cache_sentinel")?(m=c?s.jsxs(s.Fragment,{children:[!t&&s.jsx(r("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react"),{}),d&&s.jsx(r("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react"),{}),s.jsx(r("BaseDivider.react"),{xstyle:u.divider})]}):null,e[1]=m):m=e[1],m}l.default=c}),98);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MWChatTemporarySearchResult","ReQL"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"],u,c,d=3;async function m(e,t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(15))?[]:_(await p(e,d))}async function p(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.cm_search_nullstate_metadata).filter(function(e){return(u||(u=o("I64"))).equal(e.threadType,(c||(c=o("LSIntEnum"))).ofNumber(18))}));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}function _(t){return t.map(function(t,n){var a,i,l=t.communityId,d=t.contextLine,m=t.score,p=t.scoreType,_=t.secondaryThreadPictureUrl,f=t.secondaryThreadPictureUrlFallback,g=t.threadKey,h=t.threadName,y=t.threadPictureUrl,C=t.threadPictureUrlFallback,b=t.threadType,v=babelHelpers.objectWithoutPropertiesLoose(t,e),S={contactId:g,contactType:(c||(c=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:m,scoreIndex:(u||(u=o("I64"))).of_int32(n),scoreType:p};return{communityId:l!=null?(u||(u=o("I64"))).to_string(l):"",displayName:h,id:u.to_string(g),imageUrl:(a=y!=null?y:_)!=null?a:"",isAiBot:u.equal(b,c.ofNumber(201)),isContact:o("LSMessagingThreadTypeUtil").isOneToOne(b),isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(b),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,rankingScore:S,resultType:o("MWChatTemporarySearchResult").getResultType(c.ofNumber(13)),searchSource:"server",secondaryImageUrl:(i=_!=null?_:f)!=null?i:"",section:s._(/*BTDS*/"Your channels").toString(),subtext:d!=null?d:"",threadKey:g,threadType:b}})}l.fetchCCs=m,l.mapToSearchResults=_}),226);
__d("MWChatSearchFetchGenAIBotRecommendations",["I64","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResultUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=3;async function c(t,n){return(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))?[]:m(await d(t,u))}async function d(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.ai_bot_search_metadata));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}function m(t){return t.map(function(t,n){var a=t.botId,i=t.contactViewerRelationship,l=t.contextLine,u=t.displayName,c=t.displayPictureUrl,d=t.score,m={contactId:a,contactType:(s||(s=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").BOT),score:d,scoreIndex:(e||(e=o("I64"))).of_int32(n),scoreType:s.ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)};return{displayName:u,id:e.to_string(a),imageUrl:c!=null?c:"",isAiBot:!0,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,isViewerUnconnected:e.equal(i,s.ofNumber(r("LSContactViewerRelationship").NOT_CONTACT)),rankingScore:m,resultType:r("MWChatSearchResultType").AI_BOT,searchSource:"server",secondaryImageUrl:"",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForAIBot(),subtext:l!=null?l:"",threadKey:a,threadType:e.of_int32(201)}})}l.fetchGenAIBots=c,l.mapToSearchResults=m}),98);
__d("MWPOfllineOpenMiniSearchSingleton",["MWPMiniSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWPMiniSearch").createMiniSearchSingleton(function(){return{storeFields:["category"]}}),s=e;l.default=s}),98);
__d("MWPSearchOfflineOpenConversations",["MWPOfllineOpenMiniSearchSingleton"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("MWPOfllineOpenMiniSearchSingleton").getInstance().search(e)}function s(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().add(e)}function u(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().remove(e)}l.search=e,l.add=s,l.remove=u}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(t,n,r,o,a,i){"use strict";var e="Contact",l="ThreadName",s="ThreadParticipant",u={Contact:e,ThreadName:l,ThreadParticipant:s};i.MWPSearchType=u}),66);
__d("MWSearchQPLLogger",["MAWLoggerUtils","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:o("MAWLoggerUtils").getInstanceKey(),query:null,sessionInstanceId:null},s=r("qpl")._(25301700,"2966");function u(){e.hasStarted=!1,e.query=null}function c(t){var n,a=t.queryString,i=t.sessionInstanceId,l=t.surface;return e.query!=null&&a===""||(e.hasStarted&&d(),e.instanceKey=o("MAWLoggerUtils").getInstanceKey(),e.hasStarted=!0,e.query=a!=null?a:"",e.sessionInstanceId=i,r("QPLUserFlow").start(s,{instanceKey:e.instanceKey}),p({annotations:{int:{query_length:(n=a==null?void 0:a.length)!=null?n:0},string:{surface:l}}})),e.instanceKey}function d(t){e.hasStarted&&(r("QPLUserFlow").endCancel(s,{annotations:{string:{end_action:t!=null?t:"unknown"}},instanceKey:e.instanceKey}),u())}function m(t){var n=t.annotations,o=t.point;e.hasStarted&&(r("QPLUserFlow").addPoint(s,o,{instanceKey:e.instanceKey}),n!=null&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey}))}function p(t){var n=t.annotations;e.hasStarted&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function _(t){var n=t.queryString,o=t.renderIndex,a=t.sessionInstanceId,i=t.source;e.hasStarted&&a===e.sessionInstanceId&&n===e.query&&r("QPLUserFlow").addPoint(s,"render_search_result_"+o,{data:{int:{render_index:o},string:{source:i!=null?i:"unknown"}},instanceKey:e.instanceKey})}function f(){e.hasStarted&&(r("QPLUserFlow").endSuccess(s,{instanceKey:e.instanceKey}),u())}l.qplStart=c,l.qplCancel=d,l.qplAddPoint=m,l.qplAddAnnotations=p,l.renderSearchResult=_,l.qplSuccess=f}),98);
__d("MWPSearchOfflineOpenConversationsUtils",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactBlockedByViewerStatus","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResult","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","MWSearchQPLLogger","MWSearchThreadUtils","ReQL","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("justknobx")._("5018");function c(t,n){return"p__"+(e||(e=o("I64"))).to_string(t)+"__"+e.to_string(n)}function d(e,t){if(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_start"}),f.contents==null)return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{string:{offline_search_end_reason:"initial_index_not_started"}},point:"offline_search_end"}),Promise.resolve([]);var n=f.contents,a=o("MWPSearchOfflineOpenConversations").search(e).filter(function(e){return g(e,t)!==!0});return r("gkx")("6792")===!0?m(n,a,e):o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(n,(s||(s=o("LSIntEnum"))).ofNumber(7)).then(function(){return m(n,a,e)})}async function m(t,n,r){var a=_(await Promise.all(n.map(function(n){var a=n.category.type;if(a==null)return Promise.resolve();switch(a){case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:{var i=h(n.id);if(i!=null){var l=i[0];return v(t,(e||(e=o("I64"))).to_string(l),n.terms)}else return Promise.resolve()}case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return v(t,n.id,n.terms);case o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return y(t,n.id,n.terms,r)}}))),i=p(a.filter(Boolean));return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_end"}),i}function p(e){var t=e.filter(function(e){return e.resultType!==r("MWChatSearchResultType").GROUP}).sort(R),n=e.filter(function(e){return e.resultType===r("MWChatSearchResultType").GROUP}).sort(R),o=t.concat(n);return o}function _(e){if(!u)return e;var t=[],n=new Set;for(var r of e)r&&!n.has(r.id)&&(n.add(r.id),t.push(r));return t}var f={contents:void 0};function g(e,t){if(t)return!1;var n=e.category;return(n==null?void 0:n.type)!=="Contact"}function h(t){var n=t.split("__");if(n.length===3)return[(e||(e=o("I64"))).of_string(n[1]),e.of_string(n[2])]}async function y(t,n,a,i,l){l===void 0&&(l="offline");var u=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange((e||(e=o("I64"))).of_string(n))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ig_contact_info).getKeyRange(e.of_string(n))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(e.of_string(n),(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH)))]),c=u[0],d=u[1],m=u[2];if(!(c==null||C(c,i,l)))return o("MWChatTemporarySearchResult").fromContact(m!=null?m:void 0,void 0,c,d!=null?d:void 0,l,a,i)}function C(t,n,a){var i=o("LSContactBitOffset").hasWithDefault(66,t,!1);return t.isMemorialized===!0||(e||(e=o("I64"))).equal(t.contactViewerRelationship,(e||(e=o("I64"))).one)&&a!=="null_state_recent"||!(e||(e=o("I64"))).equal(t.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))||i&&b(t.name,n)}function b(e,t,n){n===void 0&&(n=.7);var r=e.trim().toLowerCase(),o=t.trim().toLowerCase(),a=!r.startsWith(o)||o.length/r.length<n;return a}async function v(t,n,r){var a,i=await Promise.all([(a=o("ReQL")).firstExnAsync(a.fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),a.firstAsync(a.leftJoin(a.fromTableAscending(t.tables.threads).getKeyRange((e||(e=o("I64"))).of_string(n)).filter(function(e){return!S(e)}),o("ReQL").fromTableAscending(t.tables.ig_thread_info).getKeyRange(e.of_string(n))))]),l=i[0],s=i[1];if(s==null)return Promise.resolve();var u=s[0],c=s[1],d=await Promise.all([o("MWSearchThreadUtils").getThreadPics(u,l,t),o("MWSearchThreadUtils").getThreadParticipants(u,t)]),m=d[0],p=d[1],_={contactId:e.zero,contactType:e.zero,score:e.to_float(u.lastActivityTimestampMs),scoreIndex:e.zero,scoreType:e.zero};return o("MWChatTemporarySearchResult").fromThread(u,"offline",l,m[0],m[1],p,_,r,c)}function S(t){return t.folderName!=="inbox"||o("LSMessagingThreadTypeUtil").isChannelPreview(t.threadType)||o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType)&&o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&(e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))}function R(e,t){var n=e.rankingScore,r=n!=null?n.score:0,o=t.rankingScore,a=o!=null?o.score:0;return a>r?1:a<r?-1:0}l.getGroupParticipantKey=c,l.search=d,l.searchHelper=m,l.db=f,l.mapContact=y,l.mapThread=v}),98);
__d("MWChatSearchResultTypeMapping",["MWChatSearchResultType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWChatSearchResultType").GROUP:return 3;case r("MWChatSearchResultType").MESSAGE:return 5;case r("MWChatSearchResultType").PAGE:return 4;case r("MWChatSearchResultType").USER:return 1;case r("MWChatSearchResultType").AI_BOT:return 16}}l.mapMWChatSearchResultTypeToLSSearchType=e}),98);
__d("MWRecentSearchesStorage",["FBLogger","LSIntEnum","MWChatSearchResultTypeMapping","MWSearchStandardResultTypeMappings","WATimeUtils","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="msgr_web_recent_searches";function u(t){var n;if(((n=t.rawData.serverSearchResult)==null?void 0:n.type_)!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.serverSearchResult.type_);var r=t.rawData.searchResultType!=null?o("MWSearchStandardResultTypeMappings").mapSearchStandardResultTypeToLSSearchType(t.rawData.searchResultType):void 0;return r!=null?(e||(e=o("LSIntEnum"))).unwrapIntEnum(r):o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(t.rawData.resultType)}function c(t,n){var r;if(((r=t.rawData.serverSearchResult)==null?void 0:r.threadType)!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.serverSearchResult.threadType);if(t.rawData.threadType!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.threadType);if(n===3)return t.rawData.isE2EE===!0?16:2}function d(e){var t=u(e);return{key:e.key,lastAccessedTimestamp:o("WATimeUtils").unixTime(),searchResultType:t,threadType:c(e,t)}}async function m(e){var t=await p(),n=t.find(function(t){return t.key===e.key});return n!=null?n.lastAccessedTimestamp=o("WATimeUtils").unixTime():t.push(d(e)),new Promise(function(e){r("WebAsyncStorage").setItem(s,JSON.stringify(t),function(t){t!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",t.toString()),e()})})}function p(){return new Promise(function(e){r("WebAsyncStorage").getItem(s,function(t,n){if(t!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",t.message),e([]);if(n==null)return e([]);try{var o=JSON.parse(n);return e(o.sort(function(e,t){return t.lastAccessedTimestamp-e.lastAccessedTimestamp}))}catch(t){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),e([])}})})}function _(e){return new Promise(function(t){r("WebAsyncStorage").getItem(s,function(n,o){if(n!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",n.message),t();if(o==null)return t();try{var a=JSON.parse(o),i=a.filter(function(t){return t.key!==e});return r("WebAsyncStorage").setItem(s,JSON.stringify(i),function(e){e!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",e.toString()),t()})}catch(e){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),t()}})})}l.upsertRecentSearchEntry=m,l.getAllRecentSearches=p,l.clearRecentSearchItem=_}),98);
__d("MWChatSearchFetchNSRecentSearches",["FBLogger","I64","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSVerifyContactExistsWithID","LSVerifyThreadRowExistsStoredProcedure","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWPSearchOfflineOpenConversationsUtils","MWRecentSearchesStorage","MWSearchStandardResultTypeMappings","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={searchSource:"null_state_recent",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForRecentSearches(),sectionAnalyticsName:"null_state_recent"},c=4,d={isAiBot:!1,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,subtext:""},m=[1,2,4,16],p=[3,13,14];function _(t,n){var a;return babelHelpers.extends({displayName:(n==null?void 0:n.threadName)||"",id:t.key,imageUrl:"",resultType:r("MWChatSearchResultType").GROUP,searchResultType:o("MWSearchStandardResultTypeMappings").mapLSSearchTypeToSearchStandardResultType((e||(e=o("LSIntEnum"))).ofNumber(t.searchResultType)),threadType:(a=n==null?void 0:n.threadType)!=null?a:t.threadType!=null?(s||(s=o("I64"))).of_int32(t.threadType):void 0},d,u)}async function f(t,n,a){var i=o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n),l=await o("ReQL").firstAsync(i);l==null&&r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(t,function(t){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(t),{syncGroup:(e||(e=o("LSIntEnum"))).ofNumber(1),threadKey:n,threadType:a})},"readwrite"))}async function g(e){var t=await o("MWRecentSearchesStorage").getAllRecentSearches(),n=await Promise.all(t.map(async function(t){if(m.includes(t.searchResultType)){await o("LSVerifyContactExistsWithID").waitForTaskFinish(e,(s||(s=o("I64"))).of_string(t.key),!1);var n=await o("MWPSearchOfflineOpenConversationsUtils").mapContact(e,t.key,[],"","null_state_recent");return n==null?null:babelHelpers.extends({},n,u)}if(p.includes(t.searchResultType)){if(t.threadType!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecureGroup((s||(s=o("I64"))).of_int32(t.threadType)))return null;r("promiseDone")(f(e,(s||(s=o("I64"))).of_string(t.key),t.threadType!=null?(s||(s=o("I64"))).of_int32(t.threadType):void 0));var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(s.of_string(t.key))),i=_(t,a);return i==null?null:babelHelpers.extends({},i,u)}return r("FBLogger")("messenger_web_search").warn("Unknown result type in recent searches: %s",t.searchResultType),Promise.resolve()}));return n.filter(Boolean).slice(0,c)}l.fetchNullStateRecentSearches=g}),98);
__d("MWChatSearchFetchRecommendations",["I64","LSInitSyncCompleteSubscription","LSIntEnum","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchGenAIBotRecommendations","MWChatSearchIssueLightspeedQuery","Promise","cr:8409","emptyFunction","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i,l,c){var d=a.includes((u||(u=o("LSIntEnum"))).ofNumber(13)),p=a.includes(u.ofNumber(16));r("promiseDone")((e||(e=n("Promise"))).all([(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(1))&&n("cr:8409")!=null?n("cr:8409").fetchNullStateRecentSearches(t):(e||(e=n("Promise"))).resolve([]),o("MWChatSearchFetchContactRecommendations").fetchContacts(t,i,l),d?o("MWChatSearchFetchCCRecommendations").fetchCCs(t,l):[],p?o("MWChatSearchFetchGenAIBotRecommendations").fetchGenAIBots(t,l):[]]).then(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=m(t,n,r,o);return c(a)}))}function d(e,t,n,a,i,l){return r("promiseDone")(o("MWChatSearchIssueLightspeedQuery").makeSearchQuery(t,a,i)),r("gkx")("15587")?r("promiseDone")(o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(e,(u||(u=o("LSIntEnum"))).ofNumber(7)),function(){c(e,t,n,a,l)}):c(e,t,n,a,l),r("emptyFunction")}function m(e,t,n,r){return[].concat(e,r,n,t)}l.requestRecommendations=d,l.blendSearchResults=m}),98);
__d("MWChatSearchInsertRankingContacts",["I64","LSFactory","LSInsertRankingContactsStoredProcedure","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1},c=(e||(e=o("I64"))).of_string("100");function d(t){if(!s.contents&&(e||(e=o("I64"))).gt(c,(e||(e=o("I64"))).zero)){s.contents=!0,r("promiseDone")(t.runInTransaction(function(e){return r("LSInsertRankingContactsStoredProcedure")(r("LSFactory")(e),{limit:c})},"readwrite",void 0,void 0,i.id+":39"),function(){u.contents=!0});return}}function m(){return u.contents}l.insertRankingContacts=d,l.isDone=m}),98);
__d("MWChatSearchIssueMAWFTSQuery",["I64","LSContactBitOffset","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MNetRankType","MWChatSearchResultTypeMapping","MWChatTemporarySearchResult","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchQPLLogger","MWSearchStandardResultTypeMappings","MWSearchThreadUtils","ReQL","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a,i,l){return o("MAWChatJid").toThreadKeyMaybe(t.tables,n).then(function(n){if(r("vulture")("55CqO8SSMoXHNOOlno0v1POeV24="),n!=null)return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n)).then(function(t){return{displayName:i!=null?i:"",id:a,imageUrl:"",isAiBot:t!=null&&(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:t!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType):!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:t!=null&&o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:t!=null&&o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:t!=null&&o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:t!=null&&o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:t!=null&&o("LSThreadBitOffset").has(229,t),isVerified:!1,matchedTerms:l,resultType:o("MWChatTemporarySearchResult").getResultType((s||(s=o("LSIntEnum"))).ofNumber(5)),searchResultType:14,searchSource:"secure",section:"",subtext:"",threadKey:n}})})}function d(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t)).then(function(t){return t!=null?o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(n){return(e||(e=o("I64"))).equal(n.armadilloThreadId,t.jid)})).then(function(e){return e!=null?e.openThreadId:t.jid}):Promise.resolve()})}function m(e){var t=e.score-1e-6;return{contactId:e.contactId,contactType:e.contactType,score:t,scoreIndex:e.scoreIndex,scoreType:e.scoreType}}function p(e,t){return d(e,t).then(function(n){var a=n!=null?n:e,i=n!=null;return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(a,(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH))).then(function(e){if(e!=null)return i?m(e):e})})}function _(t,n,r,a){var i,l=(i=n.threadDescription)!=null?i:"";return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(15))&&(l=o("MWLSThreadTitle").getThreadTitleWithSecondaryNames(n.threadDescription,r,a,n.threadType).toString()),l}async function f(t,n,r,a){var i=await Promise.all([o("MAWChatJid").toThreadKeyMaybe(t.tables,n),o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId}))]),l=i[0],u=i[1];if(l!=null){var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(l));if(!(c==null||c.folderName!=="inbox")){var d=await Promise.all([o("MWSearchThreadUtils").getThreadPics(c,u,t),o("MWSearchThreadUtils").getThreadParticipants(c,t),p(c.threadKey,t)]),m=d[0],f=d[1],g=d[2],h=m[0],y=m[1],C=o("LSMessagingThreadTypeUtil").isOneToOne(c.threadType),b=o("LSMessagingThreadTypeUtil").isGroup(c.threadType)?(s||(s=o("LSIntEnum"))).ofNumber(3):(s||(s=o("LSIntEnum"))).ofNumber(1),v=null;return C===!0&&(v=await o("MWGetOtherContactOrSelf").getOtherContactOrSelf(c.threadKey,u,t)),{displayName:o("MWLSThreadTitle").getDefaultThreadTitle(c.threadName,u,f,c.threadType).toString(),id:(e||(e=o("I64"))).to_string(c.threadKey),imageUrl:h,isAiBot:e.equal(c.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:C,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,c),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,c),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,c),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,c),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,c),isVerified:v!=null?o("LSContactBitOffset").has(23,v):!1,matchedTerms:a,otherUserId:v?(e||(e=o("I64"))).to_string(v.id):void 0,rankingScore:g,resultType:o("MWChatTemporarySearchResult").getResultType(b),searchResultType:o("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(c.threadType),searchSource:"secure",secondaryImageUrl:y,section:"",subtext:_(r,c,u,f),threadKey:c.threadKey,threadType:c.threadType}}}}async function g(t,n,r){var a,i,l=await o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),u=await o("MAWChatJid").toThreadKeyMaybe(t.tables,n);if(u==null)return null;var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(u));if(c==null)return null;var d=await o("MWSearchThreadUtils").getThreadPics(c,l,t),m=d[0],p=d[1],_={contactId:(e||(e=o("I64"))).zero,contactType:e.zero,score:e.to_float(c.lastActivityTimestampMs),scoreIndex:e.zero,scoreType:e.zero};return{displayName:(a=c.threadName)!=null?a:"",id:e.to_string(u),imageUrl:m,isAiBot:e.equal(c.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,c),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,c),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,c),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,c),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,c),isVerified:!1,matchedTerms:r,rankingScore:_,resultType:o("MWChatTemporarySearchResult").getResultType(s.ofNumber(3)),searchResultType:3,searchSource:"secure",secondaryImageUrl:p,section:"",subtext:(i=c.threadDescription)!=null?i:"",threadKey:u}}async function h(e,t){var n=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=await Promise.all(e.map(function(e){switch(e.recordType){case"msg":{var r=e.msg,o=r==null?void 0:r.msgId;return r==null||o==null?null:c(n,e.chatJid,o,r.content,e.matchedTerms)}case"groupInfo":return g(n,e.groupJid,e.matchedTerms);case"participant":return f(n,e.threadJid,t,e.matchedTerms)}}));return r.filter(Boolean)}function y(t,n,r){return t.filter(function(t){var a=(s||(s=o("LSIntEnum"))).ofNumber(o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(t.resultType)),i=n.includes(a);if(!i)return!1;var l=(e||(e=o("I64"))).equal(a,s.ofNumber(3));return!l||r})}function C(e,t,n,r){return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"mawdb_query_start"}),o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:r.query,searchMode:o("MAWBridgeSearchMsg").NON_MESSAGE_CONTENT_SEARCH},{timeoutMs:1e4}).then(function(e){return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"mawdb_query_end"}),h(e,t)}).then(function(t){return y(t,e,n)})}l.filterSearchResults=y,l.fetchResults=C}),98);
__d("mwGroupEntriesForDisplay",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new Map;for(var n of e){var r,o,a=(r=n.rawData.section)!=null?r:"",i=(o=t.get(a))!=null?o:[];i.push(n),t.set(a,i)}return t}i.mwGroupEntriesForDisplay=e}),66);
__d("MWChatSearchLightspeedTypeaheadViewList.react",["MWCMLightSpeedChatTabActionViewItems.react","MWXText.react","getItemRoleFromCompositeRole","mwGroupEntriesForDisplay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["showActionItems","ariaProps","children","entries","highlightedEntry"],s,u=s||(s=o("react")),c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(19),n=e.activeEntryKey,a=e.children,i=e.entries,l=e.itemRole,s=e.title,c="chatSearchListHeading-"+s.toString().replace(/\s/g,"-");if(i!=null&&i.length>0){var d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={className:"xexx8yu x1icxu4v x18d9i69 x25sj25"},t[0]=d):d=t[0];var m;t[1]!==s||t[2]!==c?(m=s?u.jsx("div",{className:"x1y1aw1k xf159sx xwib8y2 xmzvs34",children:u.jsx(r("MWXText.react"),{id:c,isSemanticHeading:!0,type:"entityHeaderMeta1",children:s})}):null,t[1]=s,t[2]=c,t[3]=m):m=t[3];var p;if(t[4]!==n||t[5]!==a||t[6]!==i||t[7]!==l){var _;t[9]!==n||t[10]!==a||t[11]!==l?(_=function(t,r){var e=n===t.key;return a({entry:t,index:r,isActive:e,itemRole:l})},t[9]=n,t[10]=a,t[11]=l,t[12]=_):_=t[12],p=i.map(_),t[4]=n,t[5]=a,t[6]=i,t[7]=l,t[8]=p}else p=t[8];var f;t[13]!==p||t[14]!==c?(f=u.jsx("ul",{"aria-labelledby":c,children:p}),t[13]=p,t[14]=c,t[15]=f):f=t[15];var g;return t[16]!==m||t[17]!==f?(g=u.jsxs("li",babelHelpers.extends({},d,{children:[m,f]})),t[16]=m,t[17]=f,t[18]=g):g=t[18],g}return null}function m(t){var n=t.showActionItems,a=t.ariaProps,i=t.children,l=t.entries,s=t.highlightedEntry,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p=s!=null?s.key:null,_=c(function(){return o("mwGroupEntriesForDisplay").mwGroupEntriesForDisplay(l)},[l]),f=r("getItemRoleFromCompositeRole")(a.role);return u.jsxs("ul",{className:"x1yrsyyn xyri2b x10b6aqq x1c1uobl","data-testid":void 0,role:"listbox",children:[n&&u.jsx(r("MWCMLightSpeedChatTabActionViewItems.react"),{}),Array.from(_.entries()).map(function(e){var t=e[0],n=e[1];return u.jsx(d,{activeEntryKey:p,children:i,entries:n,itemRole:f,title:t},t)})]})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e||(e=o("LSIntEnum"))).ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(13)].concat(r("gkx")("24112")?[(e||(e=o("LSIntEnum"))).ofNumber(14)]:[]),u=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2)],c=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(5)],d=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],m=[e.ofNumber(1)],p=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)].concat([e.ofNumber(13)]),_=[e.ofNumber(1),e.ofNumber(2)],f=[e.ofNumber(1),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],g=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(2)],h=[e.ofNumber(1),e.ofNumber(2)];l.allSupportedTypes=s,l.supportedTypesForMSplitUser=u,l.allSupportedTypesWithMessageSearch=c,l.armadilloSupportedTypes=d,l.onlyContacts=m,l.broadcastFlowSupportedTypes=p,l.addParticipantBase=_,l.addParticipantXac=f,l.socialChannelsSupportedTypes=g,l.communityDirectInviteSupportedTypes=h}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1};function c(t){if(!s.contents){s.contents=!0,r("promiseDone")(o("MWLSDatabaseLazySync").sync(t,(e||(e=o("LSIntEnum"))).ofNumber(7)),function(){u.contents=!0});return}}function d(){return u.contents}l.sync=c,l.isDone=d}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts))}function c(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.threads).filter(function(t){return(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}))}function d(t,n){return c(n).then(function(r){var a=new Set(r.map(function(t){return(e||(e=o("I64"))).to_string(t.threadKey)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.participants).filter(function(n){return!(e||(e=o("I64"))).equal(n.contactId,t)&&a.has((e||(e=o("I64"))).to_string(n.threadKey))}).map(function(e){var t=[e,o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(e.contactId),i.id+":54")];return t}))})}l.fetchContacts=u,l.fetchGroupThreads=c,l.fetchGroupParticipants=d}),98);
__d("MWPSearchOpenIndexer",["I64","LSIntEnum","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversationsUtils","MWPSearchOfflineSearchTypes","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=new Map,d=new Map;function m(t){var n=t.id,r=t.name,a=(e||(e=o("I64"))).to_string(n),i={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:r,id:a};o("MWPSearchOfflineOpenConversations").add(i),u.set(a,i)}function p(e){var t=u.get(e);if(t!=null){u.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function _(t){var n=t.threadKey,r=t.threadName;if(r!=null){var a=(e||(e=o("I64"))).to_string(n),i={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:r,id:a};o("MWPSearchOfflineOpenConversations").add(i),c.set(a,i)}}function f(e){var t=c.get(e);if(t!=null){c.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function g(e,t){if(t!=null){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e.threadKey,e.contactId),r=t.name;e.nickname!=null&&(r+=" "+e.nickname);var a={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:r.trim(),id:n};o("MWPSearchOfflineOpenConversations").add(a),d.set(n,a)}}async function h(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t.contactId)),a=await y(e,t.threadKey);if(!(a&&r("gkx")("16989")))return g(t,n)}async function y(t,n){var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n));return r==null?!1:!(e||(e=o("I64"))).equal(r.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}function C(e,t){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e,t),r=d.get(n);if(r!=null){d.delete(n),o("MWPSearchOfflineOpenConversations").remove(r);return}}function b(t,n){switch(n.operation){case"add":return m(n.value);case"put":return p((e||(e=o("I64"))).to_string(t)),m(n.value);case"delete":return p((e||(e=o("I64"))).to_string(t))}}function v(t,n){switch(n.operation){case"add":return _(n.value);case"put":return f((e||(e=o("I64"))).to_string(t)),_(n.value);case"delete":return f((e||(e=o("I64"))).to_string(t))}}function S(e,t,n,r){switch(r.operation){case"add":return h(e,r.value);case"put":return C(t,n),h(e,r.value);case"delete":return Promise.resolve(C(t,n))}}function R(e,t,n,r){o("MWPSearchOfflineOpenConversationsUtils").db.contents=e,t.forEach(m),n.forEach(_),r.forEach(function(e){var t=e[0],n=e[1];return g(t,n)})}l.onContactChanged=b,l.onGroupThreadChanged=v,l.onGroupParticipantChanged=S,l.startInitialIndex=R}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d={contents:!1},m={contents:!1},p={contents:!1};function _(t){if(!p.contents){p.contents=!0,(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){o("MWChatSearchInsertRankingContacts").insertRankingContacts(t),o("MWLSSyncRankings").sync(t);var a=(c||(c=o("I64"))).of_string(r("CurrentUser").getID());if(!d.contents){d.contents=!0;var i=r("gkx")("16989");r("promiseDone")((e||(e=n("Promise"))).all([o("MWPSearchIndexingSource").fetchContacts(t),i?o("MWPSearchIndexingSource").fetchGroupThreads(t):(e||(e=n("Promise"))).resolve([]),i?o("MWPSearchIndexingSource").fetchGroupParticipants(a,t):(e||(e=n("Promise"))).resolve([])]).then(function(e){var n=e[0],r=e[1],a=e[2];o("MWPSearchOpenIndexer").startInitialIndex(t,n,r,a)}),function(){m.contents=!0},function(e){r("FBLogger")("messenger_web_search").catching(e).mustfix("Error indexing contacts for search")}),o("ReQL").fromTableAscending(t.tables.contacts).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onContactChanged(n,t)}),i&&(o("ReQL").fromTableAscending(t.tables.threads).filter(function(e){return(c||(c=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))}).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onGroupThreadChanged(n,t)}),o("ReQL").fromTableAscending(t.tables.participants,["contactId","threadKey","nickname"]).filter(function(e){return!(c||(c=o("I64"))).equal(e.contactId,a)}).subscribe(function(e,n){var a=e[0],i=e[1];r("promiseDone")(o("MWPSearchOpenIndexer").onGroupParticipantChanged(t,a,i,n))}))}});return}}function f(e){return e.runInTransaction(function(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})},"readwrite",void 0,void 0,i.id+":122")}function g(){return o("MWLSSyncRankings").isDone()&&o("MWChatSearchInsertRankingContacts").isDone()?m.contents:!1}l.makeAll=_,l.clearAll=f,l.isDone=g}),98);
__d("SearchTransportType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6}),l=e;i.default=l}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("844"),s=o("FalcoLoggerInternal").create("universal_search_end",e),u=s;l.default=u}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("846"),s=o("FalcoLoggerInternal").create("universal_search_result_selected",e),u=s;l.default=u}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29,NS_SUGGESTED_CHANNELS:30,NS_SUGGESTED_CHANNELS_SEE_MORE:31,NULL_STATE_MESSAGES:32,NULL_STATE_SUGGESTED_PROMPT:33,NULL_STATE_PYMK:34,QUERY_SUGGESTED_PROMPT:35,INVITE_TO_INSTAGRAM:36,INVITE_TO_INSTAGRAM_SEE_MORE:37,NULL_STATE_GROUP_CHATS:38,NULL_STATE_GROUP_CHATS_SEE_MORE:39,QUERY_NON_FOLLOWING_SEE_MORE:40,META_AI_SNIPPET:41,QUERY_BUSINESSES_SEE_MORE:42,QUERY_MESSAGES_SEE_MORE:43,PHOTOS_AND_VIDEOS:44,PHOTOS_AND_VIDEOS_SEE_MORE:45,LINKS:46,LINKS_SEE_MORE:47,FILES:48,FILES_SEE_MORE:49,PHONE_CONTACTS:50,PHONE_CONTACTS_SEE_MORE:51,NOT_IN_PHONE_CONTACTS:52,NULL_STATE_SUGGESTED_REELS:53,NULL_STATE_NOTIFICATIONS:54}),l=e;i.default=l}),66);
__d("MWSearchLogging",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"noncontacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups",MESSAGE_SEARCH:"message_search"}),u=function(t){switch(t){case"server":return[1,2];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}};function c(e){return e===!0?1:3}function d(e){return e===!0?0:2}function m(e,t){var n=t.searchSource,r=t.section,o=t.sectionAnalyticsName;if(e==="")return n==="null_state_recent"?1:3;if(s.cast(o)===s.MESSAGE_SEARCH)return 10;if(n!=="server"||r==="")return 5;var a=s.cast(o);if(a==null)return 11;switch(a){case s.CM_THREADS:return 13;case s.CONTACTS_GROUPS:return 5;case s.NON_CONTACTS:return 6;case s.PAGES:return 9;default:return 11}}function p(e){return(e!=null?e:-1).toString()}function _(t,n,a,i){var l=a.rawData,s=l.id,d=l.isE2EE,_=l.isEPD,f=l.renderIndex,g=l.searchResultType,h=l.searchSource,y=l.serverSearchResult,C=p(f),b=s,v=c(d);if(y!=null){var S;b=(S=y.resultId)!=null?S:b,v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(y==null?void 0:y.threadType)?1:3,C=(e||(e=o("I64"))).to_string(y.globalIndex)}if(r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:u(h),is_epd:r("gkx")("23390")||_,search_result:{query_string:n,result_fbid:b,result_index:C,result_type:g!=null?g:7},session_id:t,transport_type:v,ui_section:m(n,l)}}),!i.current){var R=7;a.rawData.resultType===r("MWChatSearchResultType").MESSAGE&&(R=23),r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:R,is_epd:r("gkx")("24110")||_,session_id:t,transport_type:v}}),i.current=!0}}l.SectionAnalyticsNameType=s,l.getLoggingDataSources=u,l.getTransportType=c,l.getLsTransportType=d,l.mapSectionToSearchUISection=m,l.logResultSelected=_}),98);
__d("MWStaticSearchEntries",["fbt","MWChatSearchResultType","MWSearchLogging"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=s._(/*BTDS*/"Search messages for {param}",[s._param("param",e)]).toString();return{key:e,label:t,rawData:{displayName:t,id:"0",imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:r("MWChatSearchResultType").MESSAGE,searchResultType:14,secondaryImageUrl:"",sectionAnalyticsName:o("MWSearchLogging").SectionAnalyticsNameType.MESSAGE_SEARCH,subtext:""},type:"entry"}}l.createMessageSearchHeaderEntry=e}),226);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;return{key:e.id,label:e.displayName,rawData:{canViewerMessage:e.canViewerMessage,communityId:e.communityId,defaultE2eeThreadOneToOne:e.defaultE2eeThreadOneToOne,defaultE2eeThreads:e.defaultE2eeThreads,displayName:e.displayName,hasCutoverThread:e.hasCutoverThread,id:e.id,igid:e.resultIgid,imageUrl:e.imageUrl,isAiBot:e.isAiBot,isContact:e.isContact,isDisappearingModeSettingOn:e.isDisappearingModeSettingOn,isE2EE:e.isE2EE,isEPD:e.isEPD,isGroupCreationReachable:e.isGroupCreationReachable,isGroupsXacEligible:!!e.isGroupsXacEligible,isInstagramAccount:!!e.isInstagramAccount,isInstamadilloCutover:e.isInstamadilloCutover,isInteropEligible:e.isInteropEligible!==!1,isRestrictedByViewer:e.isRestrictedByViewer,isTTLCClipEnabled:!!e.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:!!e.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:!!e.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:!!e.isTTLCStoryShareEnabled,isViewerUnconnected:e.isViewerUnconnected,isWAEligible:e.isWAEligible,otherUserId:e.otherUserId,rankingScore:e.rankingScore,reachabilityStatus:e.reachabilityStatus,renderIndex:t,resultType:e.resultType,searchResultType:e.searchResultType,searchSource:e.searchSource,secondaryImageUrl:(n=e.secondaryImageUrl)!=null?n:"",section:e.section,sectionAnalyticsName:e.sectionAnalyticsName,serverSearchResult:e.serverSearchResult,subtext:e.subtext,subtextAdditional:e.subtextAdditional,supportsE2eeSpamdStorage:e.supportsE2eeSpamdStorage,threadType:e.threadType,verificationStatus:e.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:e.waAddressable,waEligibility:e.waEligibility},type:"entry"}}i.default=e}),66);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchSurfaces"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t===r("MWChatSearchSurfaces").instagramAll?e:e.filter(function(e){return!e.isInstagramAccount})}l.default=e}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){return function(n){var r=n.entries,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return babelHelpers.extends({entries:r.filter(function(e){return!t.includes(e.key)})},o)}}i.default=l}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){var n,r=t.entries,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=(n=t.params)==null?void 0:n.query,i=r.reduce(function(e,t,n){var r=t.rawData.section;if(r==null)return e;r===""&&e.set(r,0);var o=e.get(r),a=o==null?n:Math.min(o,n);return e.set(r,a),e},new Map),l=r.map(function(e,t){var n=e.key,r=e.label,o=e.rawData,l=o.section;return{key:n,label:r,rawData:babelHelpers.extends({},o,{query:a,renderIndex:t,sectionRenderIndex:l==null?-1:i.get(l)}),type:"entry"}});return babelHelpers.extends({entries:l},o)}i.default=l}),66);
__d("sortMWChatSearchLocalResults",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={group:1,message:2,messages:3,page:4,user:0},s=r("gkx")("23913");function u(t,n){var r={};for(var o of t){var a;r[o.id]=(a=o.rankingScore)==null?void 0:a.score}var i=t.sort(function(t,o){var a,i,l=e[t.resultType],u=e[o.resultType];if(l!==u)return l-u;if(s&&n.length>1){var c,d,m,p,_=(c=(d=t.matchedTerms)==null?void 0:d.length)!=null?c:0,f=(m=(p=o.matchedTerms)==null?void 0:p.length)!=null?m:0;if(f!==_)return f-_}var g=(a=r[t.id])!=null?a:0,h=(i=r[o.id])!=null?i:0;return h-g});return i}l.default=u}),98);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","I64","LSIntEnum","MNetRankType","MWChatSearchFetchRecommendations","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchSurfaces","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","MWPSearchSystem","MWSearchQPLLogger","MWStaticSearchEntries","cr:3752","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","gkx","isArmadillo","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalResults"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=10,c=10,d=r("isArmadillo")(),m=(function(){function t(t){var n=t.database,a=t.excludedIDs,i=a===void 0?[]:a,l=t.lightspeedSupportedTypes,s=l===void 0?o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:l,u=t.source,c=u===void 0?r("MWChatSearchSurfaces").universal:u,d=t.includeRecommendations,m=d===void 0?!0:d,p=t.includeGroupSearch,_=p===void 0?!1:p,f=t.includeMessageSearchEntry,g=f===void 0?!0:f,h=t.nullstateRankType,y=h===void 0?r("gkx")("17703")?(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_SEARCH_NULL_STATE_UNBLENDED):(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):h,C=t.includeAiBots,b=C===void 0?!0:C;this.$1=[],this.$5=function(){},this.$1=i,this.$2=c===r("MWChatSearchSurfaces").omnipickerArmadillo?o("MWLSSearchIssueSearchQuerySupportedTypes").armadilloSupportedTypes:s,this.$3=c,this.$4=n,this.$6=m,this.$7=_,this.$8=g,this.$9=y,this.$10=b,o("MWPSearchSystem").makeAll(n)}var a=t.prototype;return a.resolveData=async function(t,n){var e=n.map(r("createMWChatSearchTypeaheadDataEntry")),a=[].concat(this.$8&&t.query.length>1?[o("MWStaticSearchEntries").createMessageSearchHeaderEntry(t.query)]:[],e),i=o("MWChatSearchFilteringUtils").dedupeByThreadKey(a),l=await o("MWChatSearchFilteringUtils").filterSearchResults(i,this.$4,!1,d,!this.$10),s=r("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return r("mwChatSearchPayloadEnumerate")(s({entries:l,params:t}))},a.fetchNetwork=function(t){var e=this;return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddAnnotations({annotations:{bool:{include_group_search:this.$7},int:{source:(s||(s=o("I64"))).to_int32(this.$3)}}}),this.$5(),r("relay-runtime/network/RelayObservable").create(function(n){if(t.query.length===0){e.$5=e.fetchNullstateResults(t,n);return}var a=[],i=[],l=!1;o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{query_length:t.query.length}},point:"local_query_start"});var s=Promise.allSettled(e.issueLocalSearchQuery(t)).then(async function(s){var u=s[0],c=s[1],d=u.status==="fulfilled"?u.value:[],m=c.status==="fulfilled"?c.value:[];o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{offline_search_results_count:m.length,secure_search_results_count:d.length}},point:"local_query_end"}),a=e.transformLocalSearchResults(d,m),a=r("sortMWChatSearchLocalResults")(a,t.query),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var p=await e.resolveData(t,a.concat(i));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_end"}),l||n.next(p)}).catch(function(e){r("FBLogger")("messenger_search").catching(e).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),u=o("MWChatSearchIssueLightspeedQuery").requestResults_T200619723;r("justknobx")._("2003")&&(u=o("MWChatSearchIssueLightspeedQuery").requestResults),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"server_query_start"});var c=u(e.$4,e.$2,e.$3,e.$7,t,function(l){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{server_search_results_count:l.length}},point:"server_query_end"}),i=l;var u=t.query.length>0&&o("MWPSearchSystem").isDone(),c=u?s:Promise.resolve();o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{wait_for_local_search:u}},point:"wait_for_local_search_start"}),r("promiseDone")(c.finally(async function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"wait_for_local_search_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var r=await e.resolveData(t,a.concat(i));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{total_results_count:r.entries.length}},point:"resolve_data_end"}),n.next(r),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),n.complete()}))});e.$5=function(){c(),l=!0}})},a.issueLocalSearchQuery=function(t){return[n("cr:3752")!=null?n("cr:3752").fetchResults(this.$2,this.$3,this.$7,t):Promise.resolve([]),this.$3!==r("MWChatSearchSurfaces").broadcast?o("MWPSearchOfflineOpenConversationsUtils").search(t.query,this.$7):Promise.resolve([])]},a.transformLocalSearchResults=function(t,n){var e=u<=0?n:n.slice(0,u),r=c<=0?t:t.slice(0,c);return e.concat(r)},a.fetchNullstateResults=function(n,a){var t=this;return this.$6?(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{should_fetch_community_chats:this.$2.includes((e||(e=o("LSIntEnum"))).ofNumber(13)),should_fetch_genai_bots:this.$2.includes((e||(e=o("LSIntEnum"))).ofNumber(16))},int:{null_state_rank_type:(s||(s=o("I64"))).to_int32(this.$9)}},point:"null_state_query_start"}),o("MWChatSearchFetchRecommendations").requestRecommendations(this.$4,this.$2,this.$9,this.$3,n,async function(e){var i=r("filterInstagramContactsMWChatSearchLocalEntries")(e,t.$3);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"null_state_query_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var l=await t.resolveData(n,i);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{null_state_results_count:l.entries.length}},point:"resolve_data_end"}),a.next(l),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),a.complete()})):(a.next({entries:[],params:n}),a.complete(),function(){})},a.setExcludedIds=function(t){this.$1=t},t})();l.default=m}),98);
__d("MWJewelSearchTypeaheadViewItemStartContent.react",["I64","LSMessagingThreadTypeUtil","MWChatFacepile.react","MWChatProfile.react","MWChatSearchResultType","MWFacepile.react","MWLSThread","MWXIconMagnifyingGlass","MWXIconStrict.react","getLSMediaThreadPictureUrl","gkx","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(18),n=e.entry,a=n.rawData,i=a.imageUrl,l=a.resultType,c=a.searchSource,m=a.secondaryImageUrl,p;t[0]!==n.key?(p=(s||(s=o("I64"))).of_string_opt(n.key),t[0]=n.key,t[1]=p):p=t[1];var _=p,f=o("MWLSThread").useThread(_!=null?_:null,d),g;t[2]!==f?(g=f!=null?f:{},t[2]=f,t[3]=g):g=t[3];var h=g,y=h.threadType,C;t[4]!==f?(C=f!=null?r("getLSMediaThreadPictureUrl")(f):null,t[4]=f,t[5]=C):C=t[5];var b=C;if(l===r("MWChatSearchResultType").MESSAGE){var v;return t[6]===Symbol.for("react.memo_cache_sentinel")?(v=u.jsx("div",{className:"x1qhmfi1 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1y1aw1k xf159sx xwib8y2 xmzvs34",children:u.jsx(r("MWXIconStrict.react"),{color:"primary",icon:r("MWXIconMagnifyingGlass"),isDecorative:!0,size:20})}),t[6]=v):v=t[6],v}if(c==="null_state_recent"&&r("gkx")("17176")&&y!=null&&o("LSMessagingThreadTypeUtil").isGroup(y)&&_!=null){var S;return t[7]!==_||t[8]!==b||t[9]!==y?(S=b!=null?u.jsx(r("MWChatProfile.react"),{size:36,src:b}):u.jsx(r("MWFacepile.react"),{actualBadge:null,onlyAuthoratitiveContacts:!0,photoSize:36,threadKey:_,threadType:y}),t[7]=_,t[8]=b,t[9]=y,t[10]=S):S=t[10],S}var R=!(y!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(y));if(r("isStringNullOrEmpty")(m)){var L;return t[11]!==i?(L=u.jsx(r("MWChatProfile.react"),{size:36,src:i}),t[11]=i,t[12]=L):L=t[12],L}if(R){var E;return t[13]!==i||t[14]!==m?(E=u.jsx(r("MWChatFacepile.react"),{firstParticipantURI:i,secondParticipantURI:m,size:36}),t[13]=i,t[14]=m,t[15]=E):E=t[15],E}var k;return t[16]!==m?(k=u.jsx(r("MWChatProfile.react"),{size:36,src:m}),t[16]=m,t[17]=k):k=t[17],k}function d(e){var t=e.threadPictureUrl,n=e.threadPictureUrlExpirationTimestampMs,r=e.threadPictureUrlFallback,o=e.threadType;return{threadPictureUrl:t,threadPictureUrlExpirationTimestampMs:n,threadPictureUrlFallback:r,threadType:o}}l.default=c}),98);
__d("MWJewelSearchTypeaheadViewItemUtils",["fbt","ConstUriUtils","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","MWSearchLogging","QPLUserFlow","UniversalSearchResultSelectedFalcoEvent","XCometMessengerControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","gkx","isTlcSearchEnabled","justknobx","qpl"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=function(t){if(t==null)return null;var e=t.loggingSessionId;return e};function c(t){var n=t!=null?t:{},a=n.threadType,i=n.type_;return!(a==null||i==null||!o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a)||(e||(e=o("I64"))).to_int32(i)!==14||!r("gkx")("24052"))}function d(e){if(r("CurrentEnvironment").messengerdotcom===!0||r("justknobx")._("1406"))return!1;var t=e===r("MWChatSearchResultType").USER||e===r("MWChatSearchResultType").GROUP;return r("isTlcSearchEnabled")()===!0&&t}function m(e){var t,n=e!=null?e:{},r=n.threadJoinLinkHash,a=n.threadType;if(!(a==null||r==null)){var i=c(e)||o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a),l=i?(t=o("ConstUriUtils").getUri(r))==null?void 0:t.getPath().split("/").reverse()[1]:void 0;return l}}function p(e){return e==null?!1:o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(e)}function _(e){return e==null?!1:o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e)}function f(){return s._(/*BTDS*/"Secret conversation")}function g(e,t){r("CurrentEnvironment").facebookdotcom?r("XCometMessengerControllerRouteBuilder").buildURL({link_hash:e,thread_key:t}):r("XMessengerDotComCometMainControllerRouteBuilder").buildURL({link_hash:e,thread_key:t})}function h(e,t,n){if(e!=null){var a=n.rawData,i=a.id,l=a.isE2EE,s=a.isEPD,u=a.renderIndex,c=a.searchResultType,d=a.searchSource;r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:o("MWSearchLogging").getLoggingDataSources(d),is_epd:r("gkx")("23390")||s,search_result:{query_string:t,result_fbid:i,result_index:(u!=null?u:-1).toString(),result_type:c!=null?c:7},session_id:e,transport_type:o("MWSearchLogging").getTransportType(l),ui_section:o("MWSearchLogging").mapSectionToSearchUISection(t,a)}})}}function y(e,t,n,o){e===!0?r("QPLUserFlow").endSuccess(r("qpl")._(25312244,"1683")):r("QPLUserFlow").endCancel(r("qpl")._(25312244,"1683")),h(t,n,o)}l.getSessionId=u,l.isUnjoinedPublicChat=c,l.shouldUpdateThreadKey=d,l.genLinkHash=m,l.isUnjoinedBroadcastChannel=p,l.isBroadcastChannel=_,l.gete2eeAttributionSubtext=f,l.getChatNavigationUrl=g,l.logSearchResultClickHepler=h,l.logSearchResultClick=y}),226);
__d("UniversalSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("845"),s=o("FalcoLoggerInternal").create("universal_search_impression",e),u=s;l.default=u}),98);
__d("useUniversalSearchImpressionFalcoEvent",["MWSearchLogging","MWSearchQPLLogger","UniversalSearchImpressionFalcoEvent","react","react-compiler-runtime","usePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t,n=o("react-compiler-runtime").c(17),a=e.cmGroupId,i=e.entry,l=e.instanceId,s=e.queryString,u=i.rawData,c=u.id,d=u.isE2EE,m=u.isEPD,p=u.renderIndex,_=u.searchResultType,f=u.searchSource,g=c,h=g,y=p!=null?p:-1,C;n[0]!==y?(C=y.toString(),n[0]=y,n[1]=C):C=n[1];var b=C,v;if(n[2]!==a||n[3]!==((t=i.rawData)==null?void 0:t.query)||n[4]!==l||n[5]!==d||n[6]!==m||n[7]!==s||n[8]!==u||n[9]!==p||n[10]!==h||n[11]!==b||n[12]!==_||n[13]!==f){var S;v=function(){var e;l!=null&&(r("UniversalSearchImpressionFalcoEvent").log(function(){return{cm_group_id:a,data_sources:o("MWSearchLogging").getLoggingDataSources(f),impression_selected:!1,is_epd:m,search_result:{query_string:s,result_fbid:h,result_index:b,result_type:_!=null?_:7},session_id:l,transport_type:o("MWSearchLogging").getTransportType(d),ui_section:o("MWSearchLogging").mapSectionToSearchUISection(s,u)}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").renderSearchResult({queryString:(e=i.rawData)==null?void 0:e.query,renderIndex:p!=null?p:-1,sessionInstanceId:l,source:f}))},n[2]=a,n[3]=(S=i.rawData)==null?void 0:S.query,n[4]=l,n[5]=d,n[6]=m,n[7]=s,n[8]=u,n[9]=p,n[10]=h,n[11]=b,n[12]=_,n[13]=f,n[14]=v}else v=n[14];var R=v,L;return n[15]!==R?(L={onImpressionStart:R},n[15]=R,n[16]=L):L=n[16],r("usePartialViewImpression")(L)}l.default=u}),98);
__d("MWJewelSearchTypeaheadViewItem.react",["BaseMiddot.react","CometTypeaheadViewItem.react","FBLogger","I64","LSIntEnum","LSThreadAttributionStore","MAWThreadCutover","MWJewelSearchTypeaheadViewItemStartContent.react","MWJewelSearchTypeaheadViewItemUtils","MWLSThreadDisplayContext","MWXPageVerificationIcon.react","MWXText.react","MWXTextPairing.react","cr:393","cr:4538","cr:4539","cr:8414","cr:8415","cr:8417","deferredLoadComponent","isStringNullOrEmpty","mwCMIsAnyCMThread","react","requireDeferred","useMWNavigation","useMergeRefs","useUniversalSearchImpressionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry","extraViewItemProps","onPressEntry","queryString"],s,u,c,d=s||(s=o("react")),m=s,p=m.useEffect,_=m.useRef,f=m.useState,g=r("deferredLoadComponent")(r("requireDeferred")("MAWChatVerifyCutover.react").__setRef("MWJewelSearchTypeaheadViewItem.react")),h={contentRoot:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",":hover_backgroundColor":"x8du52y",$$css:!0}};function y(t){var a=t.entry,i=t.extraViewItemProps,l=t.onPressEntry,s=t.queryString,m=babelHelpers.objectWithoutPropertiesLoose(t,e),y=a.rawData,C=y.id,b=y.isE2EE,v=y.isInstagramAccount,S=y.isInteropEligible,R=y.otherUserId,L=y.resultType,E=y.searchSource,k=y.section,I=y.serverSearchResult,T=y.subtext,D=y.subtextAdditional,x=y.threadType,$=y.verificationStatus,P=n("cr:4538")==null?void 0:n("cr:4538")(),N=n("cr:4539")==null?void 0:n("cr:4539")({onSuccess:function(t){return P==null?void 0:P(t)}}),M=o("MAWThreadCutover").useShouldHideE2eeAttribution((u||(u=o("I64"))).of_string_opt(C),x),w=r("useMWNavigation")(),A=x!=null&&r("mwCMIsAnyCMThread")(x),F=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),O=o("MWJewelSearchTypeaheadViewItemUtils").getSessionId(i),B=r("useUniversalSearchImpressionFalcoEvent")({entry:a,instanceId:O,isCommunityChat:A,queryString:s}),W=_(null),q=r("useMergeRefs")(W,B),U=n("cr:8414")(),V=f(),H=V[0],G=V[1],z=R,j=b&&!M?o("MWJewelSearchTypeaheadViewItemUtils").gete2eeAttributionSubtext():T;p(function(){if(m.isActive){var e;(e=W.current)==null||e.scrollIntoView({block:"nearest"})}},[m.isActive]);var K=H!=null?H:C,Q=o("MWJewelSearchTypeaheadViewItemUtils").genLinkHash(I),X=babelHelpers.extends({},a,{key:K,rawData:babelHelpers.extends({},y,{id:K},z==null&&C!==K?{otherUserId:C}:{})}),Y=$==="BLUE_VERIFIED"||$==="GRAY_VERIFIED";return r("isStringNullOrEmpty")(a.label)&&n("cr:8415")!=null&&E!=="null_state_recent"?(r("FBLogger")("search").warn("aibolk Empty search result label for entry: %s",a.rawData.id),null):d.jsx("div",{ref:q,children:d.jsxs(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},m,{entry:X,isDisabled:v===!0&&S===!1,itemEndContent:E==="null_state_recent"&&n("cr:8417")!=null?d.jsx(n("cr:8417"),{entry:a}):null,itemStartContent:d.jsx(r("MWJewelSearchTypeaheadViewItemStartContent.react"),{entry:a}),linkProps:{preventLocalNavigation:!0,url:o("MWJewelSearchTypeaheadViewItemUtils").getChatNavigationUrl(Q,K)},onPressEntry:function(t,n){var e=o("LSThreadAttributionStore").getSourceForNewThread();if(e==="jewel"||e==="unknown"&&F==null?e="jewelSearch":e==="unknown"&&F==="ChatTab"?e="chatheadsNewMessage":e==="unknown"&&F==="Inbox"&&(e="messengerUniversalSearch"),e!=="unknown"&&o("LSThreadAttributionStore").setSource(K,e),o("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedPublicChat(I)){var r=I!=null?I:{},i=r.threadJoinLinkHash;i!=null&&(N==null||N(i))}else o("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedBroadcastChannel(x)?(U==null||U(a),w.openInbox({threadKey:(u||(u=o("I64"))).of_string(K),threadLinkHash:Q,threadType:(c||(c=o("LSIntEnum"))).ofNumber(153)},"jewelSearch")):(l(t,n),o("MWJewelSearchTypeaheadViewItemUtils").logSearchResultClick(A,O,s,a))},testid:void 0,xstyle:h.contentRoot,children:[o("MWJewelSearchTypeaheadViewItemUtils").shouldUpdateThreadKey(L)?d.jsx(g,{id:C.toString(),updateThreadKey:G}):null,d.jsx(r("MWXTextPairing.react"),{body:d.jsxs(r("MWXText.react"),{numberOfLines:1,type:"body3",children:[E==="null_state_recent"&&n("cr:8415")!=null?d.jsx(n("cr:8415"),{entry:a}):a.label,$!=null&&Y&&!o("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(x)?d.jsx("span",{className:"xmzvs34",children:d.jsx(r("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:$})}):null]}),level:3,meta:j&&j!==""?d.jsxs(r("MWXText.react"),{numberOfLines:1,type:"meta4",children:[j,o("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(x)&&!!D&&d.jsxs(d.Fragment,{children:[$!=null&&Y&&d.jsx("span",{className:"x135b78x xxymvpz",children:d.jsx(r("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:$})}),d.jsx(r("BaseMiddot.react"),{}),D]}),(k==null||k==="")&&a.rawData.isInstagramAccount?d.jsxs(d.Fragment,{children:[d.jsx(r("BaseMiddot.react"),{}),"Instagram"]}):null]}):null}),n("cr:393")!=null&&d.jsx(n("cr:393"),{rawData:X.rawData})]}))})}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),98);
__d("MWJewelSearchTypeaheadViewItemLabel.react",["Actor","I64","LSAuthorityLevel","LSIntEnum","MWChatSearchResultType","MWLSParticipant","MWLSThreadTitle","ReQL","ReQLSuspense","isStringNullOrEmpty","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(15),a=t.entry,l=(u||(u=r("useReStore")))(),c=o("Actor").useActor(),d=c[0],m=a.rawData,p=m.id,_=m.resultType,f,g;n[0]!==l||n[1]!==p||n[2]!==_?(f=function(){return _!==r("MWChatSearchResultType").GROUP?o("ReQL").empty():o("ReQL").fromTableAscending(l.tables.threads).getKeyRange((e||(e=o("I64"))).of_string(p))},g=[_,p,l],n[0]=l,n[1]=p,n[2]=_,n[3]=f,n[4]=g):(f=n[3],g=n[4]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":38"),y,C;n[5]!==l||n[6]!==p||n[7]!==_?(y=function(){return _!==r("MWChatSearchResultType").GROUP?o("ReQL").empty():o("MWLSParticipant").getAllInOpenThread(l,o("ReQL").fromTableAscending(l.tables.contacts),(e||(e=o("I64"))).of_string(p))},C=[p,_,l],n[5]=l,n[6]=p,n[7]=_,n[8]=y,n[9]=C):(y=n[8],C=n[9]);var b=o("ReQLSuspense").useArray(y,C,i.id+":45");if(!r("isStringNullOrEmpty")(a.label))return a.label;if(h!=null&&(e||(e=o("I64"))).ge(h.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").SERVER_PARTIAL))){var v;return n[10]!==d||n[11]!==b||n[12]!==h.threadName||n[13]!==h.threadType?(v=o("MWLSThreadTitle").getDefaultThreadTitle(h.threadName,(e||(e=o("I64"))).of_string(d),b,h.threadType),n[10]=d,n[11]=b,n[12]=h.threadName,n[13]=h.threadType,n[14]=v):v=n[14],v}return a.label}l.default=c}),98);
__d("MWRecentSearchDeleteButton.react",["fbt","CometInternalTypeaheadFetchContext","MWRecentSearchesStorage","MWXCircleButton.react","MWXIconCross","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(6),n=e.entry,a=m(r("CometInternalTypeaheadFetchContext")),i=a.refetch,l;t[0]!==n.key||t[1]!==i?(l=function(){r("promiseDone")(o("MWRecentSearchesStorage").clearRecentSearchItem(n.key),function(){i==null||i()})},t[0]=n.key,t[1]=i,t[2]=l):l=t[2];var c=l,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Clear"),t[3]=d):d=t[3];var p;return t[4]!==c?(p=u.jsx(r("MWXCircleButton.react"),{"aria-label":d,color:"secondary",icon:r("MWXIconCross"),onPress:c,size:24,type:"deemphasized"}),t[4]=c,t[5]=p):p=t[5],p}l.default=p}),226);
__d("MWXSpacing.stylex",[],(function(t,n,r,o,a,i,l){"use strict";var e="@media (max-width: 320px), (max-height: 256px)",s={spacing4:"var(--x1e4hm47)",spacing8:"var(--x15qbgmd)",spacing10:"var(--x19nwfu8)",spacing12:"var(--xxjzes5)",spacing16:"var(--xsyyfky)",spacing20:"var(--x44p0ev)",spacing24:"var(--x1npqni6)",__varGroupHash__:"x1g5acrz"};l.MWXSpacing=s}),98);
__d("useAddSearchResultToRecents",["MWRecentSearchesStorage","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e){r("promiseDone")(o("MWRecentSearchesStorage").upsertRecentSearchEntry(e))}l.default=u}),98);
__d("useMWChatSearchClearSearchResults",["LSClearTablesStoredProcedure","LSFactory","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(){r("promiseDone")(n.runInTransaction(d,"readwrite",void 0,void 0,i.id+":22"))},t[0]=n,t[1]=a):a=t[1],a}function d(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})}l.default=c}),98);/*FB_PKG_DELIM*/
__d("FBGroupChatInviteState",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACCEPTED:1,ACTIVE:2,DECLINED_BY_RECEIVER:3,IGNORED_BY_RECEIVER:4,DELETED_BY_SENDER:5,DISCARDED:6});i.default=e}),66);
__d("GroupFeatureType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ARTICLES","AUTO_INVITES","CHATS","CHILDHOOD_VACCINES","CLIMATE_PLEDGE","COMMUNITY_GIVING","COMMUNITY_MESSAGING","EVENTS","FANTASY_LEAGUE","FILES","FUNDRAISER_CHALLENGE","GAME_LINKS","GIF","GROUP_AFFILIATION","GUIDES","HORIZON_WORLDS","LIVE","LOOKING_FOR_PLAYERS","MARKETPLACE_JOBS","PLAYER_INFO","POLL","PRODUCT_TAGGING","QN_A","RAISE_MONEY","REEL","REPUTATION_SYSTEM","REQUEST_OR_OFFER_HELP","ROOMS","SELLING","SELL_SOMETHING","SETTING","SUPPORTER_STICKERS","TOPIC_CHANNELS","USER_SIGNAL","WELCOME_POST"]),l=e;i.default=l}),66);
__d("MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9311215579001270"}),null);
__d("MWCMCasaOffboardingNuxDialogQuery$Parameters",["MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMCasaOffboardingNuxDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("XFBGroupFeatureTypeUtils.facebook",["$InternalEnumUtils","GroupFeatureType"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("GroupFeatureType")),s=o("$InternalEnumUtils").createFromJSEnum(r("GroupFeatureType"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("GroupsCometCMOffboardingDialog.entrypoint",["JSResourceForInteraction","MWCMCasaOffboardingNuxDialogQuery$Parameters","XFBGroupFeatureTypeUtils.facebook"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e,n=t.groupID;return{queries:{queryReference:{parameters:r("MWCMCasaOffboardingNuxDialogQuery$Parameters"),variables:{communityMessagingFeatureType:(e=o("XFBGroupFeatureTypeUtils.facebook").fromJSEnum("COMMUNITY_MESSAGING"))!=null?e:"COMMUNITY_MESSAGING",groupID:n}}}}},root:r("JSResourceForInteraction")("MWCMCasaOffboardingNuxDialog.react").__setRef("GroupsCometCMOffboardingDialog.entrypoint")};l.default=e}),98);
__d("JSSet.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){return Array.from(e.values())}i.values=e}),66);
__d("LSOptimisticUpdateHasPendingJoinRequest",["LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.forEach(t.filter(t.db.table(9).fetch(),function(n){return n.needsAdminApprovalForNewParticipant===!0&&t.i64.eq(n.threadKey,e[0])}),function(o){var a=o.item;return t.sequence([function(o){return e[1]?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3199643703]),void 0).then(function(e){return r[2]=e})},function(e){return r[0]=r[2]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1531706844]),void 0).then(function(e){return r[2]=e})},function(e){return r[0]=r[2]}])},function(n){return r[1]=a.lastReadWatermarkTimestampMs,t.forEach(t.db.table(9).fetch([[[a.threadKey]]]),function(t){var n=t.update,o=t.item;return n({hasPendingJoinRequest:e[1],snippet:r[0],lastReadWatermarkTimestampMs:r[1]})})}])})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpdateHasPendingJoinRequestStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSSetCommunityChannelJoiningErrorCodeForTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxSetCommunityChannelJoiningErrorCodeForTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateCommunityChannelJoiningTaskID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(162).fetch([[[e[0]]],"byFbGroupId"],[[[e[0]]]]),function(n){return t.i64.eq(n.fbGroupId,e[0])||t.i64.eq(n.communityType,t.i64.cast([0,1]))&&t.i64.eq(n.folderId,e[0])}),function(t){var n=t.update,r=t.item;return n({joiningChannelTaskId:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityChannelJoiningTaskIDStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSJoinCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSSetCommunityChannelJoiningErrorCodeForTask","LSUpdateCommunityChannelJoiningTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([-1,4294967295]):(n=a.item,r[0]=n.parentThreadKey)})},function(e){return t.db.table(162).fetch([[[r[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([-1,4294967295]):(n=a.item,t.i64.eq(n.communityType,t.i64.cast([0,1]))?r[13]=n.folderId:r[13]=n.fbGroupId,r[2]=r[13])})},function(e){return t.storedProcedure(n("LSSetCommunityChannelJoiningErrorCodeForTask"),r[2],void 0)},function(r){return e[2]?t.storedProcedure(n("LSOptimisticUpdateHasPendingJoinRequest"),e[0],!0):t.resolve()},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=t.i64.cast([0,1]):(n=a.item,r[14]=n.syncGroup,t.i64.neq(r[14],void 0)?r[13]=r[14]:r[13]=t.i64.cast([0,1]),r[4]=r[13])})},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[6]=!1:(t=o.item,r[6]=t.errorShouldBeShown)})},function(e){return r[6]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[13]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[14]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[13],r[14],void 0,void 0)}]):t.resolve()},function(o){return r[8]=new t.Map,r[8].set("thread_key",e[0]),r[8].set("community_id",r[2]),r[8].set("sync_group",r[4]),r[8].set("entry_point",e[1]),r[8].set("is_request_to_join",e[2]),r[8].set("request_source",void 0),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[13]=t.i64.of_float(Date.now()),r[9]=t.i64.add(r[13],t.i64.cast([0,0]))):r[9]=t.i64.cast([0,0]),r[10]=r[8].get("thread_key"),r[11]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),t.i64.to_string(r[10]),t.i64.cast([0,337]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[9],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return t.storedProcedure(n("LSUpdateCommunityChannelJoiningTaskID"),r[2],r[12])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxJoinCommunityChannelStoredProcedure",e.__tables__=["threads","community_folders","user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSJoinCommunityChannelStoredProcedure",["LSJoinCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSJoinCommunityChannel"),a.threadKey,a.entryPoint,a.isRequestToJoin);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateCommunityChannelDirectInvite",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSUpdateCommunityChannelJoiningTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.i64.eq(e[1],t.i64.cast([0,1])),t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=!1:(t=o.item,r[0]=t.errorShouldBeShown)})},function(e){return r[0]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[11]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[12]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[11],r[12],void 0,void 0)}]):t.resolve()},function(o){return r[2]=new t.Map,r[2].set("channel_id",e[0]),r[2].set("state",e[1]),r[2].set("is_request_to_join",!1),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[3]=t.i64.add(r[11],t.i64.cast([0,0]))):r[3]=t.i64.cast([0,0]),r[4]=r[2].get("channel_id"),r[5]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["community_channel_invitation","_",t.i64.to_string(r[4])].join(""),t.i64.cast([0,463]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[6]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=t.i64.cast([-1,4294967295]):(n=a.item,r[7]=n.parentThreadKey)})},function(e){return t.db.table(162).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[9]=t.i64.cast([-1,4294967295]):(n=a.item,r[9]=n.fbGroupId)})},function(o){return t.i64.eq(e[1],t.i64.cast([0,1]))?t.storedProcedure(n("LSUpdateCommunityChannelJoiningTaskID"),r[9],r[6]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateCommunityChannelDirectInviteStoredProcedure",e.__tables__=["user_visible_network_connectivity_error","threads","community_folders"],a.exports=e}),null);
__d("LSUpdateCommunityChannelDirectInviteStoredProcedure",["LSSynchronousPromise","LSUpdateCommunityChannelDirectInvite","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateCommunityChannelDirectInvite"),a.channelId,a.state);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWGroupInvitesForThread",["LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),n=o("LSMessagingThreadTypeUtil").isGroup(e.threadType),r=o("LSThreadBitOffset").has(105,e);return t&&n?r:!1}l.isGroupInviteThread=e}),98);
__d("MWFDSCheckmark.svg.react",["cr:21598"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21598")}),98);
__d("MWFDSDisappearingMessage.svg.react",["cr:21626"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21626")}),98);
__d("MWFDSPauseChat.svg.react",["cr:21726"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21726")}),98);
__d("MWJewelThreadSnippet.react",["CurrentEnvironment","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.isUnread,a=e.text,i=e.type,l=i==="missedCall";if(n){if(r("CurrentEnvironment").facebookdotcom){var c=l?"negative":"primary",d;return t[2]!==c||t[3]!==a?(d=s.jsx(r("MWXText.react"),{color:c,numberOfLines:1,showTruncationTooltip:!1,type:"bodyLink4",children:a}),t[2]=c,t[3]=a,t[4]=d):d=t[4],d}}else{var u;return t[0]!==a?(u=s.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,showTruncationTooltip:!1,type:"body4",children:a}),t[0]=a,t[1]=u):u=t[1],u}var m=l?"negative":"primary",p;return t[5]!==m||t[6]!==a?(p=s.jsx(r("MWXText.react"),{color:m,numberOfLines:1,type:"entityHeaderMeta3",children:a}),t[5]=m,t[6]=a,t[7]=p):p=t[7],p}l.default=u}),98);
__d("MWXIconCheckmark",["MWXSvgIcon","SVGIcon","cr:22262","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22262")),r("gkx")("23219"));l.default=e}),98);
__d("MWPThreadListItemInviteAddOn.react",["fbt","MWPBumpEntityKey","MWXCircleButton.react","MWXIconCheckmark","MWXIconCross","MWXRow.react","MWXRowItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Accept invite"),d=s._(/*BTDS*/"Decline invite");function m(e){var t=o("react-compiler-runtime").c(7),n=e.onAccept,a=e.onDecline,i;t[0]!==n?(i=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":c,icon:r("MWXIconCheckmark"),onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.accept"),n(t)},size:32})}),t[0]=n,t[1]=i):i=t[1];var l;t[2]!==a?(l=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":d,icon:r("MWXIconCross"),onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.decline"),a(t)},size:32})}),t[2]=a,t[3]=l):l=t[3];var s;return t[4]!==i||t[5]!==l?(s=u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[i,l]}),t[4]=i,t[5]=l,t[6]=s):s=t[6],s}l.default=m}),226);
__d("MWPThreadsForThreadList",["I64","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){if(r!=null){var i=o("ReQL").fromTableDescending(t.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),a).getKeyRange(n).bounds({gt:o("ReQL").key((e||(e=o("I64"))).zero)}),l=r.minLastActivityTimestampMs,s=r.maxLastActivityTimestampMs,u=!(e||(e=o("I64"))).equal(l,(e||(e=o("I64"))).zero)&&!(e||(e=o("I64"))).equal(l,(e||(e=o("I64"))).one)?l:void 0,c=!(e||(e=o("I64"))).equal(s,(e||(e=o("I64"))).zero)&&!(e||(e=o("I64"))).equal(s,(e||(e=o("I64"))).one)?s:void 0;return u!=null?c!=null?i.bounds({gte:o("ReQL").key(u),lte:o("ReQL").key(c)}):i.bounds({gte:o("ReQL").key(u)}):c!=null?i.bounds({lte:o("ReQL").key(c)}):i}return o("ReQL").empty()}l.createIterable=s}),98);
__d("MWXIconPauseChat",["MWXSvgIcon","SVGIcon","cr:22420","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22420")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadAddOnSecondary.react",["fbt","CometOverlappingFacepile_DEPRECATED.react","CurrentEnvironment","FDSBadge.react","I64","MWPActor.react","MWXIconBellCross","MWXIconPauseChat","MWXIconPushpin","MWXIconStrict.react","MWXPressable.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","isArmadillo","react","react-compiler-runtime","useMWIsReadReceiptsDisabledForThread","useMWLSMarkThreadAsRead","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.memo;function p(t){var n=o("react-compiler-runtime").c(19),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s;n[0]!==a.tables.threads||n[1]!==t?(s=function(){return o("ReQL").fromTableAscending(a.tables.threads,["threadKey","lastActivityTimestampMs"]).getKeyRange(t)},n[0]=a.tables.threads,n[1]=t,n[2]=s):s=n[2];var c;n[3]!==a||n[4]!==t?(c=[a,t],n[3]=a,n[4]=t,n[5]=c):c=n[5];var d=o("ReQLSuspense").useFirst(s,c,i.id+":54"),m=r("useMWIsReadReceiptsDisabledForThread")(t),p;n[6]!==l||n[7]!==a.tables.contacts||n[8]!==a.tables.participants||n[9]!==m||n[10]!==d?(p=function(){return m||d==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(d.threadKey).bounds({gte:o("ReQL").key(d.lastActivityTimestampMs)}).filter(function(e){var t=e.contactId;return!(u||(u=o("I64"))).equal(t,l)}).take(3).map(function(e){var t=e.contactId,n=o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.contacts,["name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(t),i.id+":82");return n!=null?{alt:n.name,source:{uri:r("getLSMediaContactProfilePictureUrl")(n)}}:null})},n[6]=l,n[7]=a.tables.contacts,n[8]=a.tables.participants,n[9]=m,n[10]=d,n[11]=p):p=n[11];var _;n[12]!==l||n[13]!==a||n[14]!==m||n[15]!==d?(_=[a,l,d,m],n[12]=l,n[13]=a,n[14]=m,n[15]=d,n[16]=_):_=n[16];var f=o("ReQLSuspense").useArray(p,_,i.id+":65"),g;return n[17]!==f?(g=f.filter(Boolean),n[17]=f,n[18]=g):g=n[18],g}function _(e){var t=o("react-compiler-runtime").c(26),n=e.entryPoint,a=e.isMuted,i=e.isPaused,l=e.isPinnedThread,u=e.isUnread,c=e.isViewerSender,m=e.lastMessageDeliveryStatusIcon,_=e.thread,g=r("useMWLSMarkThreadAsRead")(n),h=p(_.threadKey),y;if(t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==u||t[4]!==c||t[5]!==m||t[6]!==g||t[7]!==h){if(y=[],i){var C;t[9]===Symbol.for("react.memo_cache_sentinel")?(C=d.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconPauseChat"),size:16}),t[9]=C):C=t[9],y.push(C)}if(a){var b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconBellCross"),size:16}),t[10]=b):b=t[10],y.push(b)}if(l){var v;t[11]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(r("MWXIconStrict.react"),{alt:s._(/*BTDS*/"Pinned thread"),color:"disabled",icon:r("MWXIconPushpin"),size:16}),t[11]=v):v=t[11],y.push(v)}if(u){var S;t[12]!==g?(S=function(t){return g()},t[12]=g,t[13]=S):S=t[13];var R;t[14]===Symbol.for("react.memo_cache_sentinel")?(R=d.jsx(r("FDSBadge.react"),{color:"blue",isProfileBadge:!0,size:r("isArmadillo")()&&r("CurrentEnvironment").messengerdotcom?10:12}),t[14]=R):R=t[14];var L;t[15]!==S?(L=d.jsx(r("MWXPressable.react"),{"aria-hidden":!0,expanding:!0,focusable:!1,onPress:S,testid:void 0,children:R}),t[15]=S,t[16]=L):L=t[16],y.push(L)}else if(c)if(h.length===0)m&&y.push(m);else{var E;t[17]!==h[0]||t[18]!==h.length?(E=h.length===1?s._(/*BTDS*/"Seen by {=personName}",[s._param("=personName",h[0].alt)]):s._(/*BTDS*/"_j{\"*\":\"Seen by {=numPeople} people\"}",[s._param("=numPeople",h.length,[0])]),t[17]=h[0],t[18]=h.length,t[19]=E):E=t[19];var k;t[20]!==h||t[21]!==E?(k=d.jsx(r("CometOverlappingFacepile_DEPRECATED.react"),{count:h.length,isTextInline:!0,items:h,screenReaderLabel:E,size:16}),t[20]=h,t[21]=E,t[22]=k):k=t[22],y.push(k)}t[0]=a,t[1]=i,t[2]=l,t[3]=u,t[4]=c,t[5]=m,t[6]=g,t[7]=h,t[8]=y}else y=t[8];var I;t[23]===Symbol.for("react.memo_cache_sentinel")?(I={className:"x6s0dn4 x78zum5 xozqiw3"},t[23]=I):I=t[23];var T;return t[24]!==y?(T=d.jsx("div",babelHelpers.extends({},I,{children:y.map(f)})),t[24]=y,t[25]=T):T=t[25],T}function f(e,t){return d.jsxs(d.Fragment,{children:[t!==0?d.jsx("div",{className:"x1fsd2vl"}):null,e]},"item_"+t.toString(10))}f.displayName=f.name+" [from "+i.id+"]";var g=m(_);l.default=g}),226);
__d("useMWLogLongSuspense",["MWPBumpEntityKey","clearTimeout","react","react-compiler-runtime","setTimeout","useMergeRefs","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=_(e,5,t),o=_(e,15,t),a=_(e,60,t),i=_(e,300,t);return r("useMergeRefs")(n,o,a,i)}var p=/\W/g;function _(e,t,n){var a=o("react-compiler-runtime").c(11),i;a[0]!==e?(i=e.replace(p,"_"),a[0]=e,a[1]=i):i=a[1];var l=i,s=d(),u;a[2]!==n||a[3]!==l||a[4]!==t?(u=function(){s.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mwp","long_suspension."+l+".suspended_"+t+"_sec"),n==null||n(t)},t*1e3)},a[2]=n,a[3]=l,a[4]=t,a[5]=u):u=a[5];var m=u,_;a[6]===Symbol.for("react.memo_cache_sentinel")?(_=function(){r("clearTimeout")(s.current)},a[6]=_):_=a[6];var f=_,g,h;a[7]===Symbol.for("react.memo_cache_sentinel")?(g=function(){return f},h=[f],a[7]=g,a[8]=h):(g=a[7],h=a[8]),c(g,h);var y;return a[9]!==m?(y={onHidden:f,onVisible:m},a[9]=m,a[10]=y):y=a[10],r("useVisibilityObserver")(y)}l.default=m}),98);
__d("MWThreadListGlimmer.react",["CometVisualCompletionAttributes","MWXGlimmer.react","gkx","react","react-compiler-runtime","react-strict-dom","useMWLogLongSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmerBody:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xktia5q",$$css:!0},glimmerHeadline:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1qx5ct2",marginBottom:"x1e56ztr",width:"x3hqpx7",$$css:!0},glimmerPhoto:{flexShrink:"x2lah0s",$$css:!0},glimmerPhoto48:{borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",height:"xsdox4t",marginInlineEnd:"x1sa5p1d",width:"x1useyqa",$$css:!0},glimmerPhoto56:{borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",height:"xnnlda6",marginInlineEnd:"x1sa5p1d",width:"x15yg21f",$$css:!0},glimmerRoot:{display:"x78zum5",paddingBottom:"x1a8lsjc",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},glimmerText:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}},c=r("gkx")("23219");function d(e){var t=o("react-compiler-runtime").c(8),n=e.ref,a=e.role,i=e.vcIgnore,l;t[0]!==i?(l=i===!0?r("CometVisualCompletionAttributes").IGNORE:{},t[0]=i,t[1]=l):l=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[c?u.glimmerPhoto48:u.glimmerPhoto56,u.glimmerPhoto]}),t[2]=d):d=t[2];var m;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs(o("react-strict-dom").html.div,{style:u.glimmerText,children:[s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.glimmerHeadline}),s.jsx(r("MWXGlimmer.react"),{index:2,xstyle:u.glimmerBody})]}),t[3]=m):m=t[3];var p;return t[4]!==n||t[5]!==a||t[6]!==l?(p=s.jsxs(o("react-strict-dom").html.div,babelHelpers.extends({ref:n,role:a,style:u.glimmerRoot},l,{children:[d,m]})),t[4]=n,t[5]=a,t[6]=l,t[7]=p):p=t[7],p}function m(e){var t=o("react-compiler-runtime").c(11),n=e.numberOfItems,a=e.parentComponentForDebug,i=e.role,l=e.vcIgnore,u=n===void 0?1:n,c=r("useMWLogLongSuspense")(a+".MWThreadListGlimmer"),m;if(t[0]!==u||t[1]!==c||t[2]!==i||t[3]!==l){var p;t[5]!==c||t[6]!==i||t[7]!==l?(p=function(t,n){return s.jsx(d,{ref:n===0?c:void 0,role:i,vcIgnore:l},"mw_list_glimmer_"+n)},t[5]=c,t[6]=i,t[7]=l,t[8]=p):p=t[8],m=Array(u).fill(!0).map(p),t[0]=u,t[1]=c,t[2]=i,t[3]=l,t[4]=m}else m=t[4];var _;return t[9]!==m?(_=s.jsx(s.Fragment,{children:m}),t[9]=m,t[10]=_):_=t[10],_}l.default=m}),98);
__d("MWThreadListItemAddOnEnd.react",["fbt","FBGroupChatInviteState","I64","Int64Hooks","LSFactory","LSIntEnum","LSUpdateCommunityChannelDirectInviteStoredProcedure","MWCMGetValidId","MWJewelPopoverDialogContext.react","MWPActor.react","MWPIsThreadUnread","MWPThreadListItemInviteAddOn.react","MWThreadAddOnSecondary.react","ReQL","ReQLSuspense","ThreadStatus","cometPushToast","cr:21160","promiseDone","react","react-compiler-runtime","requireDeferred","useEmptyFunction","useMWChatCalculateIsMutedFromExpireTime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["threadKey","communityId","fbGroupId","renderAddOnEnd"],u,c,d,m,p,_,f=m||(m=o("react")),g=m.useContext,h=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("MWThreadListItemAddOnEnd.react"),y=(u=(c=n("cr:21160"))==null?void 0:c.useIsPinnedThread)!=null?u:r("useEmptyFunction");function C(e){var t=e.clientExtras,n=e.communityId,r=e.event,a=e.groupId,i=e.parentSurface,l=i===void 0?"channel_list":i,s=e.source,u=e.threadId;h.onReady(function(e){return e.log(function(){return{action:"tap",client_extras:t,community_id:n==null?null:(_||(_=o("I64"))).to_string(n),event:r,group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(a)?(_||(_=o("I64"))).to_string(a):null,parent_surface:l,source:s,surface:"chat_row",thread_id:(_||(_=o("I64"))).to_string(u)}})})}function b(e){var t,n=o("react-compiler-runtime").c(32),a=e.communityId,l=e.fbGroupId,u=e.isMaximized,c=e.messagingEntrypoint,m=e.mutedUntilMs,h=e.parentSurface,b=e.showGroupsJoinChatDialog,v=e.thread,S=(d||(d=r("useReStore")))(),R=o("MWPActor.react").useActor(),L=v.snippetSenderContactId,E;n[0]!==R||n[1]!==L?(E=L!=null?(_||(_=o("I64"))).equal(L,R):!1,n[0]=R,n[1]=L,n[2]=E):E=n[2];var k=E,I=(_||(_=o("I64"))).equal(v.parentThreadKey,(p||(p=o("LSIntEnum"))).ofNumber(0)),T=g(r("MWJewelPopoverDialogContext.react")),D=T.setIsOpenForDialog,x=v.hasPendingInvitation||!1,$=r("useMWChatCalculateIsMutedFromExpireTime")(m),P=(t=y(v.threadTags))!=null?t:!1,N=o("MWPIsThreadUnread").useIsThreadUnread(v.threadKey),M;n[3]!==v.threadStatus?(M=v.threadStatus!=null&&((_||(_=o("I64"))).equal(v.threadStatus,(_||(_=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(_||(_=o("I64"))).equal(v.threadStatus,(_||(_=o("I64"))).of_int32(r("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),n[3]=v.threadStatus,n[4]=M):M=n[4];var w=M,A;n[5]!==a||n[6]!==S||n[7]!==l||n[8]!==h||n[9]!==v.needsAdminApprovalForNewParticipant||n[10]!==v.threadKey?(A=function(){var e;r("promiseDone")(S.runInTransaction(function(e){return r("LSUpdateCommunityChannelDirectInviteStoredProcedure")(r("LSFactory")(e),{channelId:v.threadKey,state:(p||(p=o("LSIntEnum"))).ofNumber(r("FBGroupChatInviteState").DECLINED_BY_RECEIVER)})},"readwrite",void 0,void 0,i.id+":158")),C({clientExtras:{member_join_request_enabled:(e=v.needsAdminApprovalForNewParticipant)!=null&&e?"1":"0"},communityId:a,event:"invite_declined",groupId:l,parentSurface:h,source:"direct_invite_decline_button",threadId:v.threadKey}),o("cometPushToast").cometPushSimpleToast(s._(/*BTDS*/"You declined the invitation to join").toString())},n[5]=a,n[6]=S,n[7]=l,n[8]=h,n[9]=v.needsAdminApprovalForNewParticipant,n[10]=v.threadKey,n[11]=A):A=n[11];var F=A;if(x){var O;n[12]!==a||n[13]!==l||n[14]!==c||n[15]!==h||n[16]!==D||n[17]!==b||n[18]!==v.needsAdminApprovalForNewParticipant||n[19]!==v.threadKey?(O=function(t){var e;return C({clientExtras:{member_join_request_enabled:(e=v.needsAdminApprovalForNewParticipant)!=null&&e?"1":"0"},communityId:a,event:"invite_accepted",groupId:l,parentSurface:h,source:"direct_invite_join_button",threadId:v.threadKey}),D(c==="jewel"),b(t)},n[12]=a,n[13]=l,n[14]=c,n[15]=h,n[16]=D,n[17]=b,n[18]=v.needsAdminApprovalForNewParticipant,n[19]=v.threadKey,n[20]=O):O=n[20];var B;return n[21]!==F||n[22]!==O?(B=f.jsx(r("MWPThreadListItemInviteAddOn.react"),{onAccept:O,onDecline:F}),n[21]=F,n[22]=O,n[23]=B):B=n[23],B}if(u||!I){var W;return n[24]!==$||n[25]!==w||n[26]!==P||n[27]!==N||n[28]!==k||n[29]!==c||n[30]!==v?(W=f.jsx(r("MWThreadAddOnSecondary.react"),{entryPoint:c,isMuted:$,isPaused:w,isPinnedThread:P,isUnread:N,isViewerSender:k,lastMessageDeliveryStatusIcon:null,thread:v}),n[24]=$,n[25]=w,n[26]=P,n[27]=N,n[28]=k,n[29]=c,n[30]=v,n[31]=W):W=n[31],W}return null}var v=f.memo(b);function S(t){var n=o("react-compiler-runtime").c(25),a,l,s,u,c;n[0]!==t?(c=t.threadKey,a=t.communityId,l=t.fbGroupId,s=t.renderAddOnEnd,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l,n[3]=s,n[4]=u,n[5]=c):(a=n[1],l=n[2],s=n[3],u=n[4],c=n[5]);var m,p;n[6]!==l?(m=function(){return l},p=[l],n[6]=l,n[7]=m,n[8]=p):(m=n[7],p=n[8]);var _=o("Int64Hooks").useMemoInt64(m,p),g,h;n[9]!==a?(g=function(){return a},h=[a],n[9]=a,n[10]=g,n[11]=h):(g=n[10],h=n[11]);var y=o("Int64Hooks").useMemoInt64(g,h),C=(d||(d=r("useReStore")))(),b;n[12]!==C.tables.threads||n[13]!==c?(b=function(){return o("ReQL").fromTableAscending(C.tables.threads,["threadType","threadStatus","threadKey","snippetSenderContactId","parentThreadKey","hasPendingInvitation","takedownState","needsAdminApprovalForNewParticipant","threadTags"]).getKeyRange(c)},n[12]=C.tables.threads,n[13]=c,n[14]=b):b=n[14];var S;n[15]!==C||n[16]!==c?(S=[C,c],n[15]=C,n[16]=c,n[17]=S):S=n[17];var R=o("ReQLSuspense").useFirst(b,S,i.id+":248");if(s!=null){var L;return n[18]!==s?(L=s(),n[18]=s,n[19]=L):L=n[19],L}if(R==null)return null;var E;return n[20]!==y||n[21]!==_||n[22]!==u||n[23]!==R?(E=f.jsx(v,babelHelpers.extends({communityId:y,fbGroupId:_,thread:R},u)),n[20]=y,n[21]=_,n[22]=u,n[23]=R,n[24]=E):E=n[24],E}l.default=S}),226);
__d("MWXIconDisappearingMessage",["MWXSvgIcon","SVGIcon","cr:22294","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22294")),r("gkx")("23219"));l.default=e}),98);
__d("useMWThreadListLastMessageGlimmer.react",["Int64Hooks","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReadyWithoutValidator","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useState;function c(e){var t=o("react-compiler-runtime").c(6),n;t[0]!==e?(n=e!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&e.snippet==null,t[0]=e,t[1]=n):n=t[1];var a=n,i=u(a),l=i[0],c=i[1],d=e==null?void 0:e.threadKey,m,p;return t[2]!==a||t[3]!==d?(m=function(){if(d!=null){if(a===!1){c(!1);return}var e=!1;return r("promiseDone")((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return o("MAWMiActOnActThreadReadyWithoutValidator").waitForACTThreadReadyWithoutValidator(t.tables,d,"useShouldShowGlimmerForThread").then(function(){e||c(!1)})})),function(){e=!0}}},p=[d,a],t[2]=a,t[3]=d,t[4]=m,t[5]=p):(m=t[4],p=t[5]),o("Int64Hooks").useEffectInt64(m,p),l}l.default=c}),98);
__d("MWThreadListLastMessage.react",["fbt","BaseMiddot.react","CometErrorBoundary.react","CometHeroHoldTrigger.react","CometScreenReaderText.react","FDSRelativeTimestamp.react","I64","MAWCurrentUser","MAWStrings","MWJewelThreadSnippet.react","MWVerticalRhythm","MWXGlimmer.react","MWXIconDisappearingMessage","MWXIconStrict.react","MWXText.react","isArmadilloUI","justknobx","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","useMWIsStaleCall","useMWPThreadHasSpectraUser","useMWThreadListLastMessageGlimmer.react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d={bodyGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1l36t39",$$css:!0},bodyGlimmerSecond:{width:"xktia5q",$$css:!0},disappearingMessageVisualIndicator:{paddingInlineEnd:"x14vy60q",$$css:!0},followUpsCTA:{paddingInlineStart:"xyiysdx",$$css:!0},root:{alignItems:"x6s0dn4",color:"xi81zsa",display:"x78zum5",minHeight:"x1hshjfz",$$css:!0},subtext:{paddingInlineStart:"xyiysdx",whiteSpace:"xuxw1ft",$$css:!0},threadSnippet:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",maxWidth:"x193iq5w",paddingInlineEnd:"x14vy60q",$$css:!0},zeroMinWidth:{minWidth:"xeuugli",$$css:!0}};function m(e){var t,n=o("react-compiler-runtime").c(41),a=e.hasOngoingCall,i=e.isUnread,l=e.lastMessageCtaType,m=e.lastMessageTimestamp,p=e.showDisappearingMessageVisualIndicator,_=e.showFollowUpReminder,f=e.showSnippetText,g=e.showTimestamp,h=e.snippet,y=e.thread,C=_===void 0?!1:_,b=r("useMWThreadListLastMessageGlimmer.react")(y),v=r("useMWIsStaleCall")(y==null?void 0:y.threadType,a,y==null?void 0:y.ongoingCallTimestampMs),S=r("useMWPThreadHasSpectraUser")((t=y==null?void 0:y.threadKey)!=null?t:(u||(u=o("I64"))).zero);if(b===!0){var R;return n[0]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsxs(c.Fragment,{children:[c.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[d.bodyGlimmer,d.bodyGlimmerSecond]}),c.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListLastMessage",hold:!0})]}),n[0]=R):R=n[0],R}var L=l==="xma_rtc_missed_audio"||l==="xma_rtc_missed_group_audio",E=l==="xma_rtc_missed_video"||l==="xma_rtc_missed_group_video",k=L||E,I=f===!0&&!r("mwIsThreadDisabled")(y==null?void 0:y.takedownState)&&(y==null?void 0:y.snippetText)!=null,T=(y==null?void 0:y.snippetSenderContactId)==null?null:(u||(u=o("I64"))).to_string(y.snippetSenderContactId)===o("MAWCurrentUser").getID(),D=I?null:d.zeroMinWidth,x;n[1]!==D?(x=[d.threadSnippet,D],n[1]=D,n[2]=x):x=n[2];var $;n[3]!==i?($=i&&r("justknobx")._("5026")&&c.jsx(r("CometScreenReaderText.react"),{text:s._(/*BTDS*/"Unread message:")}),n[3]=i,n[4]=$):$=n[4];var P;n[5]!==k||n[6]!==i||n[7]!==h?(P=k&&i?o("MAWStrings").MAW_MISSED_CALL_STRING():h,n[5]=k,n[6]=i,n[7]=h,n[8]=P):P=n[8];var N=k?"missedCall":void 0,M;n[9]!==i||n[10]!==P||n[11]!==N?(M=c.jsx(r("MWJewelThreadSnippet.react"),{isUnread:i,text:P,type:N}),n[9]=i,n[10]=P,n[11]=N,n[12]=M):M=n[12];var w;n[13]!==x||n[14]!==$||n[15]!==M?(w=c.jsxs(o("react-strict-dom").html.span,{style:x,children:[$,M]}),n[13]=x,n[14]=$,n[15]=M,n[16]=w):w=n[16];var A;n[17]!==I||n[18]!==(y==null?void 0:y.snippetText)?(A=I===!0&&c.jsxs(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:[c.jsx(o("react-strict-dom").html.span,{children:"\xB7"}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:d.subtext,children:y==null?void 0:y.snippetText})]}),n[17]=I,n[18]=y==null?void 0:y.snippetText,n[19]=A):A=n[19];var F;n[20]!==p||n[21]!==g?(F=p===!0&&c.jsxs(c.Fragment,{children:[c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:[d.subtext,g?d.disappearingMessageVisualIndicator:void 0],children:c.jsx(r("MWXIconStrict.react"),{color:"secondary",icon:r("MWXIconDisappearingMessage"),size:12})})]}),n[20]=p,n[21]=g,n[22]=F):F=n[22];var O;n[23]!==T||n[24]!==m||n[25]!==C||n[26]!==g||n[27]!==(y==null?void 0:y.takedownState)?(O=g&&!r("mwIsThreadDisabled")(y==null?void 0:y.takedownState)&&m!=null&&m>0&&c.jsxs(c.Fragment,{children:[c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:d.subtext,children:C&&T===!0?c.jsx(r("MWXText.react"),{color:"highlight",numberOfLines:1,type:"body4",children:c.jsxs(o("react-strict-dom").html.span,{children:[s._(/*BTDS*/"Follow up"),"?"]})}):c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("FDSRelativeTimestamp.react"),{date:new Date(m),format:"minimized"})})}),C&&T===!1&&c.jsxs(c.Fragment,{children:[c.jsx(o("react-strict-dom").html.span,{style:d.followUpsCTA,children:c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})})}),c.jsx(o("react-strict-dom").html.span,{style:d.subtext,children:c.jsxs(r("MWXText.react"),{color:"highlight",numberOfLines:1,type:"body4",children:[s._(/*BTDS*/"Reply"),"?"]})})]})]}),n[23]=T,n[24]=m,n[25]=C,n[26]=g,n[27]=y==null?void 0:y.takedownState,n[28]=O):O=n[28];var B;n[29]!==F||n[30]!==O||n[31]!==w||n[32]!==A?(B=c.jsxs(o("react-strict-dom").html.div,{"data-testid":void 0,style:d.root,children:[w,A,F,O]}),n[29]=F,n[30]=O,n[31]=w,n[32]=A,n[33]=B):B=n[33];var W;n[34]!==a||n[35]!==v||n[36]!==S?(W=a&&!v&&!S?c.jsxs(c.Fragment,{children:[r("isArmadilloUI")()?c.jsx(r("MWVerticalRhythm"),{height:5}):null,c.jsx(r("MWXText.react"),{align:"start",color:"positive",numberOfLines:1,type:"body4",children:s._(/*BTDS*/"Ongoing call")})]}):null,n[34]=a,n[35]=v,n[36]=S,n[37]=W):W=n[37];var q;return n[38]!==B||n[39]!==W?(q=c.jsxs(c.Fragment,{children:[B,W]}),n[38]=B,n[39]=W,n[40]=q):q=n[40],q}function p(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=c.jsx(r("CometErrorBoundary.react"),{fallback:_,children:c.jsx(m,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function _(){return c.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,style:d.root})}_.displayName=_.name+" [from "+i.id+"]",l.default=p}),226);
__d("MessageRequestsBulkActionsThreadListItem",["ix","CometPressable.react","I64","JSSet.bs","MWPIsThreadUnread","MWXIcon_DEPRECATED.react","MessageRequestsBulkActionsContext.react","fbicon","react","react-compiler-runtime","useMWAriaLabelForThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useContext,_=d.useEffect,f={pressableContent:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",display:"x1lliihq",width:"xh8yej3",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(33),n=e.thread,a=e.threadListCell,i=p(r("MessageRequestsBulkActionsContext.react")),l=i.setBulkActionsUnreadSelectedThreads,d=i.setBulkActionsSelectedThreads,m=i.bulkActionsSelectedThreads,f;t[0]!==n.threadKey?(f=(u||(u=o("I64"))).to_string(n.threadKey),t[0]=n.threadKey,t[1]=f):f=t[1];var g=f,y;t[2]!==d||t[3]!==g?(y=function(){return d(function(e){var t=new Set(o("JSSet.bs").values(e));return t.delete(g)?t:t.add(g)})},t[2]=d,t[3]=g,t[4]=y):y=t[4];var C=y,b;t[5]!==m||t[6]!==l||t[7]!==n||t[8]!==g?(b=function(){l(function(e){var t=new Set(o("JSSet.bs").values(e));return o("MWPIsThreadUnread").isThreadUnread(n)&&m.has(g)?t.add(g):(o("MWPIsThreadUnread").isThreadUnread(n)&&t.delete(g),t)})},t[5]=m,t[6]=l,t[7]=n,t[8]=g,t[9]=b):b=t[9];var v;t[10]!==m?(v=[m],t[10]=m,t[11]=v):v=t[11],_(b,v);var S;t[12]!==m||t[13]!==g?(S=m.has(g),t[12]=m,t[13]=g,t[14]=S):S=t[14];var R=S,L=r("useMWAriaLabelForThread")(n),E,k;t[15]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x6s0dn4 x78zum5 xexx8yu x2vl965 x18d9i69 xe2zdcy"},k={className:"xf159sx"},t[15]=E,t[16]=k):(E=t[15],k=t[16]);var I=R?"highlight":"disabled",T;t[17]!==R?(T=R?o("fbicon")._(s("484757"),20):o("fbicon")._(s("659288"),20),t[17]=R,t[18]=T):T=t[18];var D;t[19]!==I||t[20]!==T?(D=c.jsx("div",babelHelpers.extends({},k,{children:c.jsx(r("MWXIcon_DEPRECATED.react"),{color:I,hideHoverOverlay:!0,icon:T})})),t[19]=I,t[20]=T,t[21]=D):D=t[21];var x;t[22]===Symbol.for("react.memo_cache_sentinel")?(x={className:"x1iyjqo2 xeuugli x47corl"},t[22]=x):x=t[22];var $;t[23]!==a?($=c.jsx("div",babelHelpers.extends({},x,{children:a})),t[23]=a,t[24]=$):$=t[24];var P;t[25]!==$||t[26]!==D?(P=c.jsxs("div",babelHelpers.extends({"aria-hidden":!0},E,{children:[D,$]})),t[25]=$,t[26]=D,t[27]=P):P=t[27];var N;return t[28]!==L||t[29]!==R||t[30]!==C||t[31]!==P?(N=c.jsx(r("CometPressable.react"),{"aria-checked":R,"aria-label":L,onPress:C,role:"checkbox",xstyle:h,children:P}),t[28]=L,t[29]=R,t[30]=C,t[31]=P,t[32]=N):N=t[32],N}function h(){return[f.pressableContent]}l.default=g}),98);
__d("useGroupsCometJoinChatDialog",["GroupsCometJoinChatDialog.entrypoint","I64","Int64Hooks","MWXCardedDialogLoadingState.react","react","react-compiler-runtime","useMWCMShouldGoToFullScreenChatHook","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(){return u.jsx(r("MWXCardedDialogLoadingState.react"),{})}d.displayName=d.name+" [from "+i.id+"]";function m(e,t,n,a,i,l){var u=o("react-compiler-runtime").c(12),c,m;u[0]!==t||u[1]!==e.threadKey?(c=function(){return{groupID:(s||(s=o("I64"))).to_string(t!=null?t:(s||(s=o("I64"))).zero),threadID:s.to_string(e.threadKey)}},m=[t,e.threadKey],u[0]=t,u[1]=e.threadKey,u[2]=c,u[3]=m):(c=u[2],m=u[3]);var p=o("Int64Hooks").useMemoInt64(c,m),_=r("useMWXEntryPointDialog")(r("GroupsCometJoinChatDialog.entrypoint"),p,void 0,d),f=_[0],g=r("useMWCMShouldGoToFullScreenChatHook")(),h=e.hasPendingInvitation||!1,y;return u[4]!==h||u[5]!==l||u[6]!==i||u[7]!==n||u[8]!==g||u[9]!==f||u[10]!==a?(y=function(){var e={invited:h,isSMC:l,onSuccess:i,parentSurface:n,shouldGoToMessenger:g,surface:a};f(e)},u[4]=h,u[5]=l,u[6]=i,u[7]=n,u[8]=g,u[9]=f,u[10]=a,u[11]=y):y=u[11],y}l.default=m}),98);
__d("getValidMediaURL",["I64","ServerTime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=o("I64"))).of_float(o("ServerTime").getMillis()/1e3)}function u(t){return(e||(e=o("I64"))).gt(t,(e||(e=o("I64"))).zero)?(e||(e=o("I64"))).lt(t,s()):!1}function c(e,t,n){return e!=null?u(e)?n:t:n}l.default=c}),98);
__d("useGroupsCometCMOffboardingEntryPointDialog",["FDSCardedDialogLoadingStateLegacy.react","GroupsCometCMOffboardingDialog.entrypoint","react","react-compiler-runtime","useCometEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsx(r("FDSCardedDialogLoadingStateLegacy.react"),{onClose:e,withCloseButton:!0})}u.displayName=u.name+" [from "+i.id+"]";function c(e){var t=o("react-compiler-runtime").c(2),n=e.groupID,a;return t[0]!==n?(a={groupID:n},t[0]=n,t[1]=a):a=t[1],r("useCometEntryPointDialog")(r("GroupsCometCMOffboardingDialog.entrypoint"),a,void 0,u)}l.default=c}),98);
__d("useMWCMJoinCMThread",["C4GFalcoLoggerDeferred","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSCommunityBitOffset","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMailboxType","LSThreadBitOffset","LSVec","LSVerifyThreadViewStoredProcedure","ReQL","ThreadStatus","emptyFunction","mwCMisStandAloneCommunity","promiseDone","react","react-compiler-runtime","useGroupsCometCMOffboardingEntryPointDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("react"))).useState,m=function(t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(18))||(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(21))};function p(t,n){var a=o("react-compiler-runtime").c(32),l=(e||(e=r("useReStore")))(),s;a[0]!==n?(s=n?o("LSCommunityBitOffset").has(1,n):!1,a[0]=n,a[1]=s):s=a[1];var p=s,_;a[2]===Symbol.for("react.memo_cache_sentinel")?(_=r("JSResourceForInteraction")("MWCMPausedChatMemberDialog.react").__setRef("useMWCMJoinCMThread"),a[2]=_):_=a[2];var f=r("useMWXLazyDialog")(_),g=f[0],h=r("useMWNavigation")(),y=d(!1),C=y[0],b=y[1],v;a[3]!==(n==null?void 0:n.fbGroupId)?(v=function(){var e;return{groupID:(u||(u=o("I64"))).to_string((e=n==null?void 0:n.fbGroupId)!=null?e:(u||(u=o("I64"))).zero)}},a[3]=n==null?void 0:n.fbGroupId,a[4]=v):v=a[4];var S=n==null?void 0:n.fbGroupId,R;a[5]!==S?(R=[S],a[5]=S,a[6]=R):R=a[6];var L=r("useGroupsCometCMOffboardingEntryPointDialog")(o("Int64Hooks").useMemoInt64(v,R)),E=L[0],k=t.clientThreadKey,I=t.threadKey,T=t.threadType,D,x;a[7]!==k||a[8]!==h||a[9]!==C||a[10]!==I||a[11]!==T?(D=function(){C&&m(T)&&(h.openTabOrInbox({clientThreadKey:k,threadKey:I,threadType:T},"inboxThreadList"),b(!1))},x=[T,k,I,C,h],a[7]=k,a[8]=h,a[9]=C,a[10]=I,a[11]=T,a[12]=D,a[13]=x):(D=a[12],x=a[13]),o("Int64Hooks").useEffectInt64(D,x);var $;a[14]!==l||a[15]!==(n==null?void 0:n.communityType)||a[16]!==(n==null?void 0:n.enableState)||a[17]!==(n==null?void 0:n.fbGroupId)||a[18]!==p||a[19]!==E||a[20]!==g||a[21]!==I?($=function(t,a,s,d){r("promiseDone")((async function(e){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(I));if(m!=null){var _=function(){r("promiseDone")(l.runInTransaction(function(e){return r("LSVerifyThreadViewStoredProcedure")(r("LSFactory")(e),{contacts:r("LSVec").ofArray([]),mailboxType:(c||(c=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),threadKey:m.threadKey,threadType:m.threadType})},"readwrite",void 0,void 0,i.id+":148"))},f=m.hasPendingInvitation||!1,h=m.threadStatus!=null&&(u||(u=o("I64"))).equal(m.threadStatus,(u||(u=o("I64"))).of_int32(r("ThreadStatus").PAUSED)),y=(u||(u=o("I64"))).equal((e=n==null?void 0:n.enableState)!=null?e:(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)),C=!y&&h&&!o("LSThreadBitOffset").has(154,m)&&!f;if(C)return g({thread:m},r("emptyFunction"));if(!y&&o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,n==null?void 0:n.communityType)&&s){var v=a?a.metaKey||a.ctrlKey||a.shiftKey:!1;return _(),s(v)}if(r("mwCMisStandAloneCommunity")(n==null?void 0:n.communityType)){o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,n==null?void 0:n.communityType)?r("promiseDone")(l.runInTransaction(function(e){return b(!0),r("LSJoinCommunityChannelStoredProcedure")(r("LSFactory")(e),{entryPoint:"",isRequestToJoin:!1,threadKey:m.threadKey})},"readwrite","ui",void 0,i.id+":213")):(t(),b(!0));return}if(m.needsAdminApprovalForNewParticipant===!0&&p&&d)return o("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",client_extras:{member_join_request_enabled:"1"},community_id:(u||(u=o("I64"))).to_string(m.parentThreadKey),event:"thread_join",parent_surface:"thread_list",source:m.hasPendingInvitation===!0?"direct_invite_join_button":"join_button",surface:"messenger_inbox",thread_id:u.to_string(m.threadKey)}),d();if(!y)return t();if((n==null?void 0:n.fbGroupId)!=null)return E({},r("emptyFunction"))}})())},a[14]=l,a[15]=n==null?void 0:n.communityType,a[16]=n==null?void 0:n.enableState,a[17]=n==null?void 0:n.fbGroupId,a[18]=p,a[19]=E,a[20]=g,a[21]=I,a[22]=$):$=a[22];var P=n==null?void 0:n.communityType,N=n==null?void 0:n.enableState,M=n==null?void 0:n.fbGroupId,w;return a[23]!==l||a[24]!==p||a[25]!==E||a[26]!==g||a[27]!==M||a[28]!==P||a[29]!==N||a[30]!==I?(w=[l,P,N,M,p,E,g,I],a[23]=l,a[24]=p,a[25]=E,a[26]=g,a[27]=M,a[28]=P,a[29]=N,a[30]=I,a[31]=w):w=a[31],o("Int64Hooks").useCallbackInt64($,w)}l.default=p}),98);
__d("useOnPressMWThreadListItem",["fbt","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MAWGroupInvitesForThread","MWCMThreadTypes.react","MWPIsThreadUnread","MessengerThreadTakedownState","MessengerWebUXLogger","ReQL","ThreadStatus","cr:12043","emptyFunction","getValidMediaURL","promiseDone","react-compiler-runtime","useCommunityFolder","useGroupsCometCMDisabledChatEntryPointDialog","useMWCMJoinCMThread","useMWNavigation","useMWXLazyDialog","useMWXPushErrorToast","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(e){var t=o("react-compiler-runtime").c(9),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useOnPressMWThreadListItem"),t[0]=n):n=t[0];var a=r("useMWXLazyDialog")(n),i=a[0],l=(c||(c=r("useReStore")))(),s;t[1]!==l.tables.threads||t[2]!==i||t[3]!==e?(s=function(){return function(){r("promiseDone")((async function(t){var n=(t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(e)))!=null?t:{},a=n.threadName,s=n.threadPictureUrl,u=n.threadPictureUrlExpirationTimestampMs,c=n.threadPictureUrlFallback;if(!(u==null||s==null||c==null||a==null)){var d=r("getValidMediaURL")(u,s,c);i({threadImageUrl:d,threadTitle:a},r("emptyFunction"))}})())}},t[1]=l.tables.threads,t[2]=i,t[3]=e,t[4]=s):s=t[4];var u;return t[5]!==l||t[6]!==i||t[7]!==e?(u=[l,i,e],t[5]=l,t[6]=i,t[7]=e,t[8]=u):u=t[8],o("Int64Hooks").useMemoInt64(s,u)}function m(t,a,i,l,m,p){var _=o("react-compiler-runtime").c(45),f=m===void 0?!0:m,g=(c||(c=r("useReStore")))(),h=r("useMWNavigation")(),y;_[0]===Symbol.for("react.memo_cache_sentinel")?(y=r("JSResourceForInteraction")("MAWGroupInviteDialog.react").__setRef("useOnPressMWThreadListItem"),_[0]=y):y=_[0];var C=r("useMWXLazyDialog")(y),b=C[0],v=r("useCommunityFolder")(i),S=r("MessengerWebUXLogger").useInteractionLogger(),R;_[1]!==i.takedownState?(R=i.takedownState!=null&&(e||(e=o("I64"))).equal(i.takedownState,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerThreadTakedownState").GEO_BLOCKED)),_[1]=i.takedownState,_[2]=R):R=_[2];var L=R,E;_[3]!==i.threadKey?(E=(e||(e=o("I64"))).to_string(i.threadKey),_[3]=i.threadKey,_[4]=E):E=_[4];var k;_[5]!==L||_[6]!==E?(k={isGeoBlocked:L,threadID:E},_[5]=L,_[6]=E,_[7]=k):k=_[7];var I=r("useGroupsCometCMDisabledChatEntryPointDialog")(k),T=I[0],D;_[8]!==i.threadType?(D=o("LSMessagingThreadTypeUtil").isPublicCMThread(i.threadType),_[8]=i.threadType,_[9]=D):D=_[9];var x=D,$=d(i.threadKey),P=$[0],N=r("useMWCMJoinCMThread")(i,v),M=r("useMWXPushErrorToast")(),w;_[10]!==g||_[11]!==t||_[12]!==L||_[13]!==f||_[14]!==x||_[15]!==N||_[16]!==S||_[17]!==a||_[18]!==p||_[19]!==(v==null?void 0:v.takedownState)||_[20]!==h||_[21]!==M||_[22]!==l||_[23]!==T||_[24]!==b||_[25]!==P||_[26]!==i.threadKey?(w=function(d,m,_,y){r("promiseDone")((async function(){var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(g.tables.threads).getKeyRange(i.threadKey));if(c!=null){var C=o("MAWGroupInvitesForThread").isGroupInviteThread(c),R=o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(c.threadType),E=o("MWCMThreadTypes.react").isUnjoinedCMThread(c.threadType),k=o("LSMessagingThreadTypeUtil").isCMSubthread(c.threadType),I=c.threadStatus!=null&&((e||(e=o("I64"))).equal(c.threadStatus,(e||(e=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(e||(e=o("I64"))).equal(c.threadStatus,(e||(e=o("I64"))).of_int32(r("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),D=(v==null?void 0:v.takedownState)!=null&&(e||(e=o("I64"))).equal(v==null?void 0:v.takedownState,(e||(e=o("I64"))).of_int32(1)),$=c.takedownState!=null&&(e||(e=o("I64"))).equal(c.takedownState,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerThreadTakedownState").TAKEN_DOWN)),w=c.needsAdminApprovalForNewParticipant===!0,A=(e||(e=o("I64"))).equal(t!=null?t:(u||(u=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(u||(u=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)),F=c.folderName==="inbox"?(u||(u=o("LSIntEnum"))).ofNumber(12):c.folderName==="pending"?(u||(u=o("LSIntEnum"))).ofNumber(29):(u||(u=o("LSIntEnum"))).ofNumber(30),O=o("MWPIsThreadUnread").isThreadUnread(c),B=function(t){var e={clientThreadKey:c.clientThreadKey,isUnread:O,threadKey:c.threadKey,threadType:c.threadType};if(n("cr:12043")!=null&&n("cr:12043").isFollowUpTagDisplayed(c)&&n("cr:12043").touchThreadMetadata(c.threadKey),t)return h.openInbox(e,a,F);h.openTabOrInbox(e,a,y,F,{subEntrypoint:p}),_&&_()},W=function(){l==null||l(!0),r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(g,function(e){return r("LSJoinCommunityChannelStoredProcedure")(r("LSFactory")(e),{entryPoint:"messengerdotcom",isRequestToJoin:w,threadKey:i.threadKey})},"joinCommunityChannel"),function(){B(!1),l==null||l(!1)},function(){M({title:s._(/*BTDS*/"Couldn't join chat. Please try again later.")})})},q=c.hasPendingInvitation||!1,U=!A&&I&&!o("LSThreadBitOffset").has(154,c)&&!q;if(S==null||S({eventName:"open_thread",threadKey:c.threadKey,threadType:c.threadType}),f||S==null||S({eventName:"open_thread_from_mini_list",threadKey:c.threadKey,threadType:c.threadType}),x&&($||D||L))return T({threadID:(e||(e=o("I64"))).to_string(c.threadKey)});if(E)return N(m,d,B,W);if(R&&U)return P();C?b({thread:c},r("emptyFunction")):k||B(d.metaKey||d.ctrlKey||d.shiftKey)}})())},_[10]=g,_[11]=t,_[12]=L,_[13]=f,_[14]=x,_[15]=N,_[16]=S,_[17]=a,_[18]=p,_[19]=v==null?void 0:v.takedownState,_[20]=h,_[21]=M,_[22]=l,_[23]=T,_[24]=b,_[25]=P,_[26]=i.threadKey,_[27]=w):w=_[27];var A=v==null?void 0:v.takedownState,F;return _[28]!==g||_[29]!==t||_[30]!==L||_[31]!==f||_[32]!==N||_[33]!==S||_[34]!==a||_[35]!==p||_[36]!==h||_[37]!==M||_[38]!==l||_[39]!==T||_[40]!==b||_[41]!==P||_[42]!==A||_[43]!==i.threadKey?(F=[g,i.threadKey,A,t,S,f,L,h,a,p,l,M,T,N,P,b],_[28]=g,_[29]=t,_[30]=L,_[31]=f,_[32]=N,_[33]=S,_[34]=a,_[35]=p,_[36]=h,_[37]=M,_[38]=l,_[39]=T,_[40]=b,_[41]=P,_[42]=A,_[43]=i.threadKey,_[44]=F):F=_[44],o("Int64Hooks").useCallbackInt64(w,F)}l.default=m}),226);
__d("usePreloadRoute",["JSScheduler","react","react-compiler-runtime","useCometRouterDispatcher","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect;function c(e,t){var n=o("react-compiler-runtime").c(6),a=r("useMWNavigation")(),i=r("useCometRouterDispatcher")(),l,c;n[0]!==i||n[1]!==a||n[2]!==e||n[3]!==t?(l=function(){(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){i!=null&&i.prefetchRouteDefinition(a.getUrlFromThreadKey(e,t))})},c=[i,a,e,t],n[0]=i,n[1]=a,n[2]=e,n[3]=t,n[4]=l,n[5]=c):(l=n[4],c=n[5]),u(l,c)}l.default=c}),98);
__d("MWThreadListItem.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometTextWithEntities.react","CurrentEnvironment","HeroInteractionIgnoreWithDiv.react","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSRtcCallState","LSThreadRangeFilter","LSThreadTitle.react","MAWUIMessageComposerDraftsPersistedDataService","MWCMJewelContext","MWCMThreadTypes.react","MWChatTextTransform","MWLogInboxFiltersInteraction","MWLogInteraction","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListItemAddOnEnd.react","MWThreadListLastMessage.react","MWThreadPicture.react","MWThreadSnippetForDisplay.react","MWVerticalRhythm","MWXGlimmer.react","MWXListCellPressable.react","MWXSpinner.react","MWXText.react","MessageRequestsBulkActionsContext.react","MessageRequestsBulkActionsThreadListItem","MessagingCommunityChatsPauseStatus","MessengerMuteUtils","MessengerWebEntryPointsUtil","MessengerWebUXLogger","MetaConfig","ReQL","ReQLSuspense","deferredLoadComponent","emptyFunction","gkx","interaction-tracing-metrics","justknobx","mwCMIsAnyCMThread","mwCMIsThreadBumped","mwCMisStandAloneCommunity","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","requireDeferred","useCommunityFolder","useGroupsCometChatsEngagementImpressionLogger","useGroupsCometJoinChatDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWPThreadHasSpectraUser","useMWPreloadThread","useMWThreadSnippetForDisplay","useMenuButtonVisibilityState","useMergeRefs","useOnPressMWThreadListItem","usePreloadRoute","useReStore","useSimpleImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.memo,f=p.useCallback,g=p.useContext,h=p.useMemo,y=p.useState,C=r("deferredLoadComponent")(r("requireDeferred")("MWThreadListItemMoreActions.react").__setRef("MWThreadListItem.react")),b={communityGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x170jfvy",width:"x3hqpx7",$$css:!0},listItemContainer:{overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0},listItemContainerDisabled:{opacity:"xbyyjgo",$$css:!0},listItemContainerForMessengerDotCom:{paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0},threadBodyGlimmer:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},threadSnippetGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xktia5q",$$css:!0},threadTitleGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1qx5ct2",marginBottom:"x1e56ztr",marginTop:"x1k70j0n",width:"x3hqpx7",$$css:!0}};function v(t){var n=o("react-compiler-runtime").c(12),a=t.isUnread,l=t.selected,s=t.showFollowUpReminder,u=t.threadKey,c=(e||(e=r("useReStore")))(),d;n[0]!==c.tables.threads||n[1]!==u?(d=function(){return o("ReQL").fromTableAscending(c.tables.threads).getKeyRange(u)},n[0]=c.tables.threads,n[1]=u,n[2]=d):d=n[2];var p;n[3]!==c||n[4]!==u?(p=[c,u],n[3]=c,n[4]=u,n[5]=p):p=n[5];var _=o("ReQLSuspense").useFirst(d,p,i.id+":156");if(_==null)return null;var f;n[6]===Symbol.for("react.memo_cache_sentinel")?(f=m.jsx(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:m.jsx(r("MWXGlimmer.react"),{index:2,xstyle:b.threadSnippetGlimmer})}),n[6]=f):f=n[6];var g;return n[7]!==a||n[8]!==l||n[9]!==s||n[10]!==_?(g=m.jsx(r("CometPlaceholder.react"),{fallback:f,name:"MWThreadListItem.DefaultSubtitle",children:m.jsx(S,{isUnread:a,selected:l,showFollowUpReminder:s,thread:_})}),n[7]=a,n[8]=l,n[9]=s,n[10]=_,n[11]=g):g=n[11],g}function S(e){var t=o("react-compiler-runtime").c(22),n=e.isUnread,a=e.selected,i=e.showFollowUpReminder,l=e.thread,s=r("useMWThreadSnippetForDisplay")(l,a),d=s.isDraft,p=s.lastMessageCtaType,_=s.shouldHideTimestamp,f=s.snippet,g;t[0]!==l.threadType?(g=o("MWCMThreadTypes.react").isUnjoinedCMThread(l.threadType),t[0]=l.threadType,t[1]=g):g=t[1];var h=g,y;t[2]!==l.disappearingSettingTtl?(y=r("MetaConfig")._("112")&&l.disappearingSettingTtl!=null&&(u||(u=o("I64"))).gt(l.disappearingSettingTtl,(u||(u=o("I64"))).zero),t[2]=l.disappearingSettingTtl,t[3]=y):y=t[3];var C=y,v=o("MAWUIMessageComposerDraftsPersistedDataService").getMAWUIMessageComposerDraftsPersistedDataService().isThreadLoading(l.threadKey,l.threadType);if(l.threadName==null&&r("mwCMIsAnyCMThread")(l.threadType)||v){var S;return t[4]===Symbol.for("react.memo_cache_sentinel")?(S=m.jsxs(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:[m.jsx(r("MWXGlimmer.react"),{index:2,xstyle:b.threadSnippetGlimmer}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultSubtitleWithThread",hold:!0})]}),t[4]=S):S=t[4],S}if(o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(l.threadType)&&f==null)return null;var R=!(u||(u=o("I64"))).equal(l.ongoingCallState,(c||(c=o("LSIntEnum"))).ofNumber(r("LSRtcCallState").NO_ONGOING_CALL)),L;t[5]!==l.lastActivityTimestampMs?(L=(u||(u=o("I64"))).to_float(l.lastActivityTimestampMs),t[5]=l.lastActivityTimestampMs,t[6]=L):L=t[6];var E=h&&(l==null?void 0:l.hasPendingInvitation)!==!0,k=!h&&!_,I;t[7]!==d||t[8]!==f||t[9]!==l?(I=m.jsx(r("MWThreadSnippetForDisplay.react"),{isDraftMessage:d,snippetRaw:f,thread:l}),t[7]=d,t[8]=f,t[9]=l,t[10]=I):I=t[10];var T;return t[11]!==C||t[12]!==n||t[13]!==p||t[14]!==i||t[15]!==R||t[16]!==L||t[17]!==E||t[18]!==k||t[19]!==I||t[20]!==l?(T=m.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:R,isUnread:n,lastMessageCtaType:p,lastMessageTimestamp:L,showDisappearingMessageVisualIndicator:C,showFollowUpReminder:i,showSnippetText:E,showTimestamp:k,snippet:I,thread:l}),t[11]=C,t[12]=n,t[13]=p,t[14]=i,t[15]=R,t[16]=L,t[17]=E,t[18]=k,t[19]=I,t[20]=l,t[21]=T):T=t[21],T}function R(t){var n=o("react-compiler-runtime").c(8),a=t.threadKey,l=(e||(e=r("useReStore")))(),s;n[0]!==l.tables.threads||n[1]!==a?(s=function(){return o("ReQL").fromTableAscending(l.tables.threads,["threadName","threadType","threadKey"]).getKeyRange(a)},n[0]=l.tables.threads,n[1]=a,n[2]=s):s=n[2];var u;n[3]!==l||n[4]!==a?(u=[l,a],n[3]=l,n[4]=a,n[5]=u):u=n[5];var c=o("ReQLSuspense").useFirst(s,u,i.id+":261");if(c==null)return null;var d;return n[6]!==c?(d=c.threadName==null&&r("mwCMIsAnyCMThread")(c.threadType)?m.jsxs(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:[m.jsx(r("MWXGlimmer.react"),{index:1,xstyle:b.threadTitleGlimmer}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultThreadTitle",hold:!0})]}):m.jsx(r("LSThreadTitle.react"),{thread:c}),n[6]=c,n[7]=d):d=n[7],d}function L(e){var t=o("react-compiler-runtime").c(170),n=e.hideMoreActions,a=e.lsEntryPoint,i=e.lsSubEntryPoint,l=e.messagingEntrypoint,d=e.onClose,p=e.onPress,_=e.onPressOverride,f=e.onThreadJoined,h=e.onThreadSelected,S=e.parentSurface,L=e.renderAddOnEnd,E=e.renderThreadPhoto,k=e.renderThreadSubtitle,I=e.renderThreadTitle,T=e.selected,D=e.showFollowUpReminder,x=e.thread,$=n===void 0?!1:n,P=d===void 0?r("emptyFunction"):d,N=f===void 0?r("emptyFunction"):f,M=h===void 0?r("emptyFunction"):h,w=S===void 0?"channel_list":S,A=D===void 0?!1:D,F=g(r("MWCMJewelContext")),O=F.selectedFilterTab,B;t[0]!==x.threadType?(B={eventName:"threadlist_item_impression",threadType:x.threadType},t[0]=x.threadType,t[1]=B):B=t[1];var W=r("MessengerWebUXLogger").useImpressionLoggerRef(B),q;e:{if(!r("mwCMIsThreadBumped")(x)){q=!1;break e}if(r("CurrentEnvironment").messengerdotcom){q=w==="channel_list";break e}if(a==="jewel"){var U;t[2]!==O?(U=(u||(u=o("I64"))).equal(O,u.of_int32(r("LSThreadRangeFilter").NONE)),t[2]=O,t[3]=U):U=t[3],q=U;break e}q=a!=="inboxThreadList"}var V=q,H,G;t[4]!==V||t[5]!==E||t[6]!==x.threadKey?(G=function(){return E!=null?E:function(){return m.jsx(r("MWThreadPicture.react"),{badgeSize:r("gkx")("23219")?10:14,photoSize:r("gkx")("23219")?48:56,threadKey:x.threadKey,withAltText:!1,withCommunityPicture:V})}},H=[V,E,x.threadKey],t[4]=V,t[5]=E,t[6]=x.threadKey,t[7]=H,t[8]=G):(H=t[7],G=t[8]);var z=o("Int64Hooks").useMemoInt64(G,H),j,K;t[9]!==I||t[10]!==x.threadKey?(j=function(){return I!=null?I:function(){return m.jsx(R,{threadKey:x.threadKey})}},K=[I,x.threadKey],t[9]=I,t[10]=x.threadKey,t[11]=j,t[12]=K):(j=t[11],K=t[12]);var Q=o("Int64Hooks").useMemoInt64(j,K),X=r("useCommunityFolder")(x),Y=X==null?void 0:X.takedownState,J;t[13]!==Y||t[14]!==x.takedownState?(J=r("mwIsThreadDisabled")(x.takedownState,Y),t[13]=Y,t[14]=x.takedownState,t[15]=J):J=t[15];var Z=J,ee=o("MWPIsThreadUnread").useIsThreadUnread(x.threadKey)&&!Z,te,ne;t[16]!==ee||t[17]!==k||t[18]!==T||t[19]!==A||t[20]!==x.threadKey?(te=function(){return k!=null?k:function(){return m.jsx(v,{isUnread:ee,selected:T,showFollowUpReminder:A,threadKey:x.threadKey})}},ne=[ee,k,x.threadKey,T,A],t[16]=ee,t[17]=k,t[18]=T,t[19]=A,t[20]=x.threadKey,t[21]=te,t[22]=ne):(te=t[21],ne=t[22]);var re=o("Int64Hooks").useMemoInt64(te,ne),oe;t[23]!==(X==null?void 0:X.name)||t[24]!==x.threadType?(oe=function(){return!r("mwCMIsAnyCMThread")(x.threadType)||r("CurrentEnvironment").messengerdotcom?null:(X==null?void 0:X.name)==null?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXGlimmer.react"),{index:1,xstyle:b.communityGlimmer}),m.jsx(r("MWVerticalRhythm"),{height:8}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.Folder",hold:!0})]}):m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta3",children:X==null?void 0:X.name}),m.jsx(r("MWVerticalRhythm"),{height:8})]})},t[23]=X==null?void 0:X.name,t[24]=x.threadType,t[25]=oe):oe=t[25];var ae=X==null?void 0:X.name,ie;t[26]!==ae||t[27]!==x.threadType?(ie=[ae,x.threadType],t[26]=ae,t[27]=x.threadType,t[28]=ie):ie=t[28];var le=o("Int64Hooks").useCallbackInt64(oe,ie),se;t[29]!==x.threadType?(se=function(){var e=o("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),t=o("interaction-tracing-metrics").InteractionTracingMetricsCore.currentInteractionLogger(),n=Number(e);return t.forEach(function(e){var t;n=((t=e.annotations.int)==null?void 0:t.hasSecureThread)||0||n}),t.addMetadata("hasSecureThread",n?1:0)},t[29]=x.threadType,t[30]=se):se=t[30],r("useSimpleImpression")(se);var ue;t[31]!==x.parentThreadKey?(ue=(u||(u=o("I64"))).to_string(x.parentThreadKey),t[31]=x.parentThreadKey,t[32]=ue):ue=t[32];var ce;t[33]!==X?(ce=X?(u||(u=o("I64"))).to_string(X.fbGroupId):void 0,t[33]=X,t[34]=ce):ce=t[34];var de=a==="jewel"?"jewel_inbox":"chats_inbox",me;t[35]!==x.threadKey?(me=(u||(u=o("I64"))).to_string(x.threadKey),t[35]=x.threadKey,t[36]=me):me=t[36];var pe;t[37]!==ue||t[38]!==ce||t[39]!==de||t[40]!==me?(pe={community_id:ue,event:"bumped_chat_rendered",group_id:ce,parent_surface:de,source:"unknown",surface:"messenger_inbox",thread_id:me},t[37]=ue,t[38]=ce,t[39]=de,t[40]=me,t[41]=pe):pe=t[41];var _e=r("useGroupsCometChatsEngagementImpressionLogger")(pe),fe;t[42]!==x.threadType?(fe=o("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),t[42]=x.threadType,t[43]=fe):fe=t[43];var ge=fe,he=r("useMWNavigation")(),ye=o("MWCMThreadTypes.react").isUnjoinedCMThread(x.threadType),Ce;t[44]!==(X==null?void 0:X.communityType)||t[45]!==x?(Ce=x.hasPendingInvitation===!0&&o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(x,X==null?void 0:X.communityType),t[44]=X==null?void 0:X.communityType,t[45]=x,t[46]=Ce):Ce=t[46];var be=Ce,ve,Se;t[47]!==x?(Se=o("MessengerMuteUtils").calcMuteUntilMs(x),t[47]=x,t[48]=Se):Se=t[48],ve=Se;var Re=ve,Le=r("useMenuButtonVisibilityState")(!0),Ee=Le[1],ke=Ee.setListItemFocused,Ie=Ee.setListItemHovered,Te=r("mwCMIsAnyCMThread")(x.threadType),De;t[49]!==x.parentThreadKey?(De=(u||(u=o("I64"))).equal(x.parentThreadKey,(c||(c=o("LSIntEnum"))).ofNumber(0)),t[49]=x.parentThreadKey,t[50]=De):De=t[50];var xe=De,$e=r("useMWPThreadHasSpectraUser")(x.threadKey),Pe=Z||$e?!1:xe?!0:!(ye||$),Ne;t[51]!==Ie?(Ne=function(){return Ie(!1)},t[51]=Ie,t[52]=Ne):Ne=t[52];var Me=Ne,we;t[53]!==Ie?(we=function(){return Ie(!0)},t[53]=Ie,t[54]=we):we=t[54];var Ae=we,Fe=r("useMWPreloadThread")(x,ge),Oe=Fe.onHoverInPreloader,Be=Fe.onHoverOutPreloader,We=Fe.onPressInPreloader,qe;if(X!=null&&Te){var Ue;t[55]!==X.enableState||t[56]!==X.fbGroupId||t[57]!==X.folderId?(Ue=[X.fbGroupId,X.folderId,X.enableState],t[55]=X.enableState,t[56]=X.fbGroupId,t[57]=X.folderId,t[58]=Ue):Ue=t[58],qe=Ue}else{var Ve;t[59]===Symbol.for("react.memo_cache_sentinel")?(Ve=[void 0,void 0,void 0],t[59]=Ve):Ve=t[59],qe=Ve}var He=qe,Ge=He[0],ze=He[1],je=He[2],Ke=g(r("MessageRequestsBulkActionsContext.react")),Qe=Ke.isBulkActionsEditMode;r("usePreloadRoute")(x.threadKey,x.threadType);var Xe;t[60]!==X?(Xe=(X==null?void 0:X.pauseStatus)!=null&&(u||(u=o("I64"))).equal(X.pauseStatus,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingCommunityChatsPauseStatus").PAUSED_BY_SOFT_ACTION)),t[60]=X,t[61]=Xe):Xe=t[61];var Ye=Xe,Je;t[62]!==V||t[63]!==Ye||t[64]!==Z||t[65]!==a||t[66]!==x.threadType?(Je=function(){return o("MessengerWebEntryPointsUtil").getEntryPointShouldOverrideThreadSnippetRemoval(a)?!1:Ye||!Z&&!V&&o("MWCMThreadTypes.react").isJoinedCMThread(x.threadType)},t[62]=V,t[63]=Ye,t[64]=Z,t[65]=a,t[66]=x.threadType,t[67]=Je):Je=t[67];var Ze=Je,et=y(!1),tt=et[0],nt=et[1],rt=r("useOnPressMWThreadListItem")(je,a,x,nt,!0,i),ot=X==null?void 0:X.communityType,at;t[68]!==ot?(at=r("mwCMisStandAloneCommunity")(ot),t[68]=ot,t[69]=at):at=t[69];var it=at,lt=r("useGroupsCometJoinChatDialog")(x,Ge,w,"messenger_inbox",N,it),st,ut;t[70]!==ze||t[71]!==be||t[72]!==Ge||t[73]!==Z||t[74]!==l||t[75]!==Re||t[76]!==P||t[77]!==rt||t[78]!==w||t[79]!==L||t[80]!==lt||t[81]!==x.threadKey?(st=function(){return Z||be?void 0:m.jsx(r("MWThreadListItemAddOnEnd.react"),{communityId:ze,fbGroupId:Ge,isMaximized:!0,messagingEntrypoint:l,mutedUntilMs:Re,parentSurface:w,renderAddOnEnd:L,showGroupsJoinChatDialog:function(t){return rt(t,lt,P)},threadKey:x.threadKey})},ut=[ze,be,Ge,!0,Z,l,Re,P,rt,w,L,lt,x.threadKey],t[70]=ze,t[71]=be,t[72]=Ge,t[73]=Z,t[74]=l,t[75]=Re,t[76]=P,t[77]=rt,t[78]=w,t[79]=L,t[80]=lt,t[81]=x.threadKey,t[82]=st,t[83]=ut):(st=t[82],ut=t[83]);var ct=o("Int64Hooks").useMemoInt64(st,ut),dt;t[84]!==ct||t[85]!==tt||t[86]!==Z||t[87]!==Ze||t[88]!==ee||t[89]!==he||t[90]!==P||t[91]!==Oe||t[92]!==Be||t[93]!==p||t[94]!==We||t[95]!==rt||t[96]!==_||t[97]!==M||t[98]!==le||t[99]!==z||t[100]!==re||t[101]!==Q||t[102]!==T||t[103]!==ke||t[104]!==lt||t[105]!==x?(dt=function(){var e=x.additionalThreadContext!=null?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta4",children:m.jsx(r("CometTextWithEntities.react"),{text:x.additionalThreadContext,transforms:o("MWChatTextTransform").textTransforms})}),m.jsx(r("MWVerticalRhythm"),{height:8})]}):null,t=s._(/*BTDS*/"Joining chat..."),n=m.jsxs(m.Fragment,{children:[m.jsx(r("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.AddOnEndLoadingSpinner",hold:!0})]});return m.jsx(r("MWXListCellPressable.react"),{addOnEnd:tt?n:ct,addOnStart:z(),"aria-current":T?"page":!1,content:m.jsxs(o("react-strict-dom").html.div,{children:[e,le(),m.jsx(r("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:ee?"headlineEmphasized4":"headline4",children:Q()}),Ze()?null:m.jsxs(m.Fragment,{children:[m.jsx(r("MWVerticalRhythm"),{height:8}),tt?m.jsx(r("MWXText.react"),{type:"entityHeaderMeta3",children:t}):re()]})]}),disabled:tt,linkProps:Z?void 0:{preventLocalNavigation:!0,url:he.getUrlFromThreadKey(x.threadKey,x.threadType)},onFocusChange:ke,onHoverIn:Oe,onHoverOut:Be,onPress:function(t){r("justknobx")._("4052")?(o("MWLogInteraction").logPopoverOpenComplete("thread_click"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationComplete()):(o("MWLogInteraction").logPopoverOpenCancel("thread_click"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("thread_click")),_!=null?_==null||_(t):(p==null||p(t,x),rt(t,lt,P)),M()},onPressIn:We,selected:T,size:"large"})},t[84]=ct,t[85]=tt,t[86]=Z,t[87]=Ze,t[88]=ee,t[89]=he,t[90]=P,t[91]=Oe,t[92]=Be,t[93]=p,t[94]=We,t[95]=rt,t[96]=_,t[97]=M,t[98]=le,t[99]=z,t[100]=re,t[101]=Q,t[102]=T,t[103]=ke,t[104]=lt,t[105]=x,t[106]=dt):dt=t[106];var mt;t[107]!==ct||t[108]!==xe||t[109]!==tt||t[110]!==Z||t[111]!==Ze||t[112]!==ee||t[113]!==he||t[114]!==P||t[115]!==Oe||t[116]!==Be||t[117]!==p||t[118]!==We||t[119]!==rt||t[120]!==_||t[121]!==M||t[122]!==le||t[123]!==z||t[124]!==re||t[125]!==Q||t[126]!==T||t[127]!==ke||t[128]!==lt||t[129]!==x?(mt=[x,tt,ct,z,T,!0,xe,le,ee,Q,Ze,re,Z,he,ke,Oe,Be,We,_,M,p,rt,lt,P],t[107]=ct,t[108]=xe,t[109]=tt,t[110]=Z,t[111]=Ze,t[112]=ee,t[113]=he,t[114]=P,t[115]=Oe,t[116]=Be,t[117]=p,t[118]=We,t[119]=rt,t[120]=_,t[121]=M,t[122]=le,t[123]=z,t[124]=re,t[125]=Q,t[126]=T,t[127]=ke,t[128]=lt,t[129]=x,t[130]=mt):mt=t[130];var pt=o("Int64Hooks").useMemoInt64(dt,mt),_t;t[131]!==Le||t[132]!==l||t[133]!==P||t[134]!==T||t[135]!==Pe||t[136]!==x.threadKey||t[137]!==x.threadName||t[138]!==x.threadType?(_t=function(){return Pe?m.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWThreadListItem.MoreActions",children:m.jsx(C,{menuButtonVisibilityState:Le,messagingEntrypoint:l,onClose:P,selected:T,thread:{threadKey:x.threadKey,threadName:x.threadName,threadType:x.threadType}})})}):null},t[131]=Le,t[132]=l,t[133]=P,t[134]=T,t[135]=Pe,t[136]=x.threadKey,t[137]=x.threadName,t[138]=x.threadType,t[139]=_t):_t=t[139];var ft;t[140]!==Ge||t[141]!==Le||t[142]!==l||t[143]!==P||t[144]!==T||t[145]!==Pe||t[146]!==x.threadKey||t[147]!==x.threadName||t[148]!==x.threadType?(ft=[Ge,Le,l,P,T,Pe,x.threadName,x.threadKey,x.threadType],t[140]=Ge,t[141]=Le,t[142]=l,t[143]=P,t[144]=T,t[145]=Pe,t[146]=x.threadKey,t[147]=x.threadName,t[148]=x.threadType,t[149]=ft):ft=t[149];var gt=o("Int64Hooks").useMemoInt64(_t,ft),ht=r("useMergeRefs")(W,V?_e:null),yt=ge?"mwthreadlist-item-secure":"mwthreadlist-item-open",Ct=Z?b.listItemContainerDisabled:!1,bt;t[150]!==Ct?(bt=[b.listItemContainer,Ct,r("gkx")("23219")?b.listItemContainerForMessengerDotCom:!1],t[150]=Ct,t[151]=bt):bt=t[151];var vt;t[152]!==Qe||t[153]!==x||t[154]!==pt?(vt=Qe?m.jsx(r("MessageRequestsBulkActionsThreadListItem"),{thread:x,threadListCell:pt}):pt,t[152]=Qe,t[153]=x,t[154]=pt,t[155]=vt):vt=t[155];var St;t[156]!==vt?(St=m.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:m.jsx(o("react-strict-dom").html.div,{role:"gridcell",children:vt})}),t[156]=vt,t[157]=St):St=t[157];var Rt;t[158]!==gt||t[159]!==St?(Rt=m.jsxs(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:[St,gt]}),t[158]=gt,t[159]=St,t[160]=Rt):Rt=t[160];var Lt;t[161]!==Ae||t[162]!==Me||t[163]!==bt||t[164]!==Rt?(Lt=m.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,onMouseEnter:Ae,onMouseLeave:Me,role:"row",style:bt,children:Rt}),t[161]=Ae,t[162]=Me,t[163]=bt,t[164]=Rt,t[165]=Lt):Lt=t[165];var Et;return t[166]!==ht||t[167]!==yt||t[168]!==Lt?(Et=m.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,ref:ht,children:Lt}),t[166]=ht,t[167]=yt,t[168]=Lt,t[169]=Et):Et=t[169],Et}var E=_(L);l.default=E}),226);
__d("useMWPMarkSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWPMarkSeenDeferred").__setRef("useMWPMarkSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return function(e){return n.markSeen(t,e)}}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMWPWatchFolderFocusChanges",["react","react-compiler-runtime","useGlobalEventListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e,t){var n=o("react-compiler-runtime").c(6),a=c(!1),i;n[0]!==e||n[1]!==t?(i=function(){a.current&&(t.current&&e!=null&&e(),a.current=!1)},n[0]=e,n[1]=t,n[2]=i):i=n[2];var l=i,s;n[3]===Symbol.for("react.memo_cache_sentinel")?(s=function(){a.current||(a.current=!0)},n[3]=s):s=n[3];var u=s,d;n[4]===Symbol.for("react.memo_cache_sentinel")?(d={},n[4]=d):d=n[4],r("useGlobalEventListener")("focus",l,d);var m;n[5]===Symbol.for("react.memo_cache_sentinel")?(m={},n[5]=m):m=n[5],r("useGlobalEventListener")("blur",u,m)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("BlobStorageWorkerClient",["BlobStorageWorkerResource","MAWQplProxy","Random","WACryptoUtils","WATagsLogger","WorkerBundleResource","WorkerClient","WorkerMessagePort","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("WATagsLogger").TAGS(["WebMediaStorageWorkerClient"]),p=o("WorkerBundleResource").createDedicatedWebWorker(r("BlobStorageWorkerResource")),_=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(p,"BlobStorageWorker");o("WorkerClient").init(_),m.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."])));var f=0;async function g(e){var t=e.blob,n=e.fileName,a=f++;m.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["writing to storage with request id: ",""])),a);var i=o("Random").uint32(),l=o("MAWQplProxy").startQplUserFlow(r("qpl")._(521482747,"3166"),{int:{blob_size:t.byteLength},string:{storage_type:"opfs"}},{providedInstanceKey:i});l.addPoint("port_connection_start");var c=await _.fullyConnected;l.addPoint("port_connection_end");var d=c.onMessageOnce("writeBlobToOpfsResponse",function(e){return e.requestId===a});c.postMessage({blob:t,fileName:n,requestId:a,type:"writeBlobToOpfsRequest"}),l.addPoint("write_start");var p=await d;p.output.success?(l.addPoint("write_end"),l.endSuccess()):(l.addAnnotations({string:{error_message:p.output.error}}),l.endFail("write_fail"));var g=p.output.success?p.output.value:p.output.error;m.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["received response from worker, requestId: ",", write result: ",""])),a,g)}async function h(e){var t,n,a=e.fileName,i=e.idbBlob,l=f++;m.DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["reading from storage with request id: ",""])),l);var s=o("Random").uint32(),u=o("MAWQplProxy").startQplUserFlow(r("qpl")._(521474002,"3167"),{int:{idb_blob_size:i==null?void 0:i.size},string:{storage_type:"opfs"}},{providedInstanceKey:s});u.addPoint("port_connection_start");var p=await _.fullyConnected;u.addPoint("port_connection_end");var g=p.onMessageOnce("readBlobFromOpfsResponse",function(e){return e.requestId===l});p.postMessage({fileName:a,requestId:l,type:"readBlobFromOpfsRequest"},[]),u.addPoint("read_start");var h=await Promise.all([g,i.arrayBuffer()]),y=h[0],C=h[1],b=(t=y.output)==null?void 0:t.value,v=b!=null?o("WACryptoUtils").arrayBuffersEqual(b,C):!1;return u.addAnnotations({bool:{blob_matches:v}}),m.DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["BlobStorageWorkerClient matches blob from storage: ",", hasBlob: "," for request id: ",""])),v,y.output!=null,l),y.output.success?(u.addPoint("read_end"),u.endSuccess()):(u.addAnnotations({string:{error_message:y.output.error}}),u.endFail("read_fail")),(n=y.output)==null?void 0:n.value}l.writeBlobToStorage=g,l.readBlobfromStorage=h}),98);
__d("EBMainThreadListeners",["EBReenrollmentTriggerListener","LSDatabaseSingleton"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;o("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(t)}l.initEBListeners=s}),98);
__d("FBIconCheckmarkCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsx(o("XPlatReactSVG").Path,{d:"m459.3 1078.26-3.718 4a.75.75 0 0 1-1.099 0l-1.79-1.925a.75.75 0 0 1 1.1-1.022l1.24 1.335 3.168-3.409a.75.75 0 0 1 1.098 1.022m-3.3-4.76c-3.308 0-6 2.69-6 6 0 3.308 2.692 6 6 6 3.31 0 6-2.692 6-6 0-3.31-2.69-6-6-6"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useFDSProgressRingSvg.react",["FDSProgressRingUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useRef,m=2;function p(e){var t=o("react-compiler-runtime").c(50),n=e.color,r=e.isHidden,a=e.size,i=d(null),l=d(null),u=d(null),c;t[0]!==n?(c=o("FDSProgressRingUtils").getRingColor(n),t[0]=n,t[1]=c):c=t[1];var p=c,_=p.backgroundColor,f=p.foregroundColor,g=(a-m)*Math.PI,h,y;t[2]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy"},t[2]=y):y=t[2];var C="0 0 "+a+" "+a,b=a/2,v=a/2,S=(a-m)/2,R;t[3]!==_||t[4]!==b||t[5]!==v||t[6]!==S?(R=s.jsx("circle",{cx:b,cy:v,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:S,stroke:_,strokeLinecap:"round",strokeWidth:m}),t[3]=_,t[4]=b,t[5]=v,t[6]=S,t[7]=R):R=t[7];var L;t[8]!==a||t[9]!==C||t[10]!==R?(L=s.jsx("svg",babelHelpers.extends({},y,{height:a,ref:i,viewBox:C,width:a,children:R})),t[8]=a,t[9]=C,t[10]=R,t[11]=L):L=t[11];var E,k;t[12]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x1ey2m1c xtijo5x xbudbmw x6ikm8r x10wlt62 x10l6tqk x13vifvy"},k={className:"x1ey2m1c x9f619 xtijo5x xyj9dbu x10l6tqk x13vifvy x1jpgh95"},t[12]=E,t[13]=k):(E=t[12],k=t[13]);var I="0 0 "+a+" "+a,T=a/2,D=a/2,x=(a-m)/2,$=g/2,P=3*g/4,N=r?"hidden":void 0,M;t[14]!==N?(M={visibility:N},t[14]=N,t[15]=M):M=t[15];var w;t[16]!==f||t[17]!==T||t[18]!==D||t[19]!==x||t[20]!==$||t[21]!==P||t[22]!==M?(w=s.jsx("circle",{cx:T,cy:D,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:x,stroke:f,strokeDasharray:$,strokeDashoffset:P,strokeWidth:m,style:M}),t[16]=f,t[17]=T,t[18]=D,t[19]=x,t[20]=$,t[21]=P,t[22]=M,t[23]=w):w=t[23];var A;t[24]!==a||t[25]!==I||t[26]!==w?(A=s.jsx("div",babelHelpers.extends({},E,{children:s.jsx("svg",babelHelpers.extends({},k,{height:a,ref:l,viewBox:I,width:a,children:w}))})),t[24]=a,t[25]=I,t[26]=w,t[27]=A):A=t[27];var F,O;t[28]===Symbol.for("react.memo_cache_sentinel")?(F={className:"x1ey2m1c x1dkd41z x1o0tod x6ikm8r x10wlt62 x10l6tqk x13vifvy"},O={className:"x1ey2m1c x9f619 x1h4o2ik x1o0tod x10l6tqk x13vifvy x1jpgh95"},t[28]=F,t[29]=O):(F=t[28],O=t[29]);var B="0 0 "+a+" "+a,W=a/2,q=a/2,U=(a-m)/2,V=g/2,H=g/4,G=r?"hidden":void 0,z;t[30]!==G?(z={visibility:G},t[30]=G,t[31]=z):z=t[31];var j;t[32]!==f||t[33]!==W||t[34]!==q||t[35]!==U||t[36]!==V||t[37]!==H||t[38]!==z?(j=s.jsx("circle",{cx:W,cy:q,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:U,stroke:f,strokeDasharray:V,strokeDashoffset:H,strokeWidth:m,style:z}),t[32]=f,t[33]=W,t[34]=q,t[35]=U,t[36]=V,t[37]=H,t[38]=z,t[39]=j):j=t[39];var K;t[40]!==a||t[41]!==B||t[42]!==j?(K=s.jsx("div",babelHelpers.extends({},F,{children:s.jsx("svg",babelHelpers.extends({},O,{height:a,ref:u,viewBox:B,width:a,children:j}))})),t[40]=a,t[41]=B,t[42]=j,t[43]=K):K=t[43];var Q;t[44]!==A||t[45]!==K||t[46]!==L?(Q=s.jsxs(s.Fragment,{children:[L,A,K]}),t[44]=A,t[45]=K,t[46]=L,t[47]=Q):Q=t[47],h=Q;var X=h,Y;return t[48]!==X?(Y={backgroundRef:i,leftCircleRef:u,progressRing:X,rightCircleRef:l},t[48]=X,t[49]=Y):Y=t[49],Y}l.default=p}),98);
__d("FDSProgressRingDeterminate.react",["BaseLoadingStateElement.react","react","useFDSProgressRingSvg.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c={rootDiv:{position:"x1n2onr6",$$css:!0},rootSizing:function(t){return[{height:t!=null?"x16ye13r":t,width:t!=null?"x5lhr3w":t,$$css:!0},{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}};function d(e){var t=e.color,n=e.percentage,o=e.size,a=e["aria-label"],i=e["aria-labelledby"],l=r("useFDSProgressRingSvg.react")({color:t,isHidden:!1,size:o}),d=l.leftCircleRef,m=l.progressRing,p=l.rightCircleRef;return u(function(){var e=p.current,t=d.current;if(!(e==null||t==null)&&!(!(e instanceof SVGSVGElement)||!(t instanceof SVGSVGElement))){var r=Math.max(0,Math.min(100,n))/100*360;e.style.transform="rotate("+Math.min(r,180)+"deg)",t.style.transform="rotate("+Math.max(r-180,0)+"deg)"}},[d,n,p]),s.jsx(r("BaseLoadingStateElement.react"),{"aria-label":a,"aria-labelledby":i,progress:n,xstyle:[c.rootDiv,c.rootSizing(o)],children:m})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("LSGetLatestThreadIds.nop",["I64","LSVec","MAWBridgeSafeActionsWorkerAndUI","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n){var a=[],i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.mi_act_mapping_table)).then(function(t){return t.map(function(t){var n=t.jid;return(e||(e=o("I64"))).to_string(n)})});if(i.length>0){var l=new Set(i);t.forEach(function(e){l.has(e)&&a.push(e)})}return Promise.resolve([r("LSVec").ofArray(a),!0])}async function u(t){var n=await o("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestThreadIds",{numThreads:(e||(e=o("I64"))).to_int32(t)});return n}async function c(t,n,a,i,l){if(l===void 0&&(l=!1),(e||(e=o("I64"))).gt(i,(e||(e=o("I64"))).zero))try{var c=await u(i);return l?s(c,t):Promise.resolve([r("LSVec").ofArray(c),!0])}catch(e){return Promise.resolve([r("LSVec").ofArray([]),!1])}return Promise.resolve([r("LSVec").ofArray([]),!0])}var d=c;c.__nop_name__="getLatestThreadIds",l.default=d}),98);
__d("LSGetThreadDataFromTam.nop",["I64","LSMessagingThreadTypeUtil","LSResult","LSShape","LSVec","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,a,i){var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.threads).filter(function(e){var t=e.threadType;return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)}).take((e||(e=o("I64"))).to_int32(i))),l=t.map(function(t,n){var r=t.lastActivityTimestampMs,a=t.lastReadWatermarkTimestampMs,i=t.threadKey,l=t.threadType;return o("LSShape").ofRecord({client_thread_pk:i,display_timestamp_ms:r,is_group_thread:o("LSMessagingThreadTypeUtil").isGroup(l),last_activity_timestamp_ms:r,last_read_watermark_timestamp_ms:a,server_thread_key:i,sort_order:(e||(e=o("I64"))).of_int32(n)})});return r("LSResult")(r("LSVec").ofArray(l))};s.__nop_name__="LSGetThreadDataFromTam",l.default=s}),98);
__d("LSScheduleOccamThreadsIntegrityChecker",["LSGetCursor","LSGetThreadDataFromTam.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,95])).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return r[1]=t.createArray(),r[2]=t.createArray(),t.i64.neq(e[1],void 0)?r[3]=e[1]:r[3]=t.i64.cast([0,20]),t.forEach(t.db.table(220).fetch([[[t.i64.cast([0,95]),t.i64.cast([0,0])]]]),function(e){var n=e.item;return r[10]=n.minLastActivityTimestampMs,r[9]=new t.Map,r[9].set("has_more_before",n.hasMoreBefore),r[9].set("is_loading_before",n.isLoadingBefore),r[9].set("min_last_activity_timestamp_ms",r[10]),r[9].set("min_thread_key",n.minThreadKey),r[9].set("parent_thread_key",t.i64.cast([0,0])),r[11]=(r[2].push(r[9]),r[2]),t.forEach(t.islc(t.filter(t.db.table(9).fetch([[[{gte:r[10]}]],"lastActivityTimestampMs"]),function(e){return t.i64.ge(e.lastActivityTimestampMs,r[10])&&t.i64.eq(e.syncGroup,t.i64.cast([0,95]))&&t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(r[3])),function(e){var n=e.item;return r[11]=new t.Map,r[11].set("authority_level",n.authorityLevel),r[11].set("folder_name",n.folderName),r[11].set("last_activity_timestamp_ms",n.lastActivityTimestampMs),r[11].set("last_read_watermark_timestamp_ms",n.lastReadWatermarkTimestampMs),r[11].set("thread_key",n.threadKey),r[12]=(r[1].push(r[11]),r[1])})})},function(e){return r[4]=t.createArray(),t.nativeOperation(n("LSGetThreadDataFromTam.nop"),r[3]).then(function(e){var t;return t=e,r[5]=t[0],t})},function(e){return r[6]=t.createArray(),r[7]=new t.Map,r[7].set("cursor",r[0]),r[7].set("mi_act_mapping_columns_for_integrity_check",r[6]),r[7].set("occam_threads_columns_for_integrity_check",r[1]),r[7].set("threads_ranges_columns_for_integrity_check",r[2]),r[7].set("tam_threads_columns_for_integrity_check",r[5]),r[8]=t.toJSON(r[7]),t.storedProcedure(n("LSIssueNewTask"),"occam-threads-integrity-check",t.i64.cast([0,701]),r[8],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxScheduleOccamThreadsIntegrityCheckerStoredProcedure",e.__tables__=["sync_group_threads_ranges","threads"],a.exports=e}),null);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSScheduleOccamThreadsIntegrityChecker"),a.delayMs,a.maxThreadCount);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MessengerWaitForEvent",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r,o){var a,i=o;return new(e||(e=n("Promise")))(function(e){i?a=function(){i.apply(this,arguments)&&e.apply(this,arguments)}:a=e,t==null||t.addEventListener==null||t.addEventListener(r,a)}).finally(function(){t==null||t.removeEventListener==null||t.removeEventListener(r,a)})}i.waitForEvent=l}),66);
__d("LocalStorageMutex",["FBLogger","MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=1e3,c=r("qpl")._(1056847375,"584"),d=(function(){function t(e){var t=this,n=e.mutexKey,o=e.localTakeoverKey,a=e.log,i=e.logError,l=e.getStorage,s=e.setItemGuarded,c=e.mutexTimeoutMs,d=c===void 0?u:c,m=e.mutexTimeoutCallback;this.mutexFilter=function(e){if(e.key!==t.$1)return!1;var n=e.newValue||"";return!n.includes(r("pageID"))},this.$1=n,this.$2=o,this.$5=l,this.$6=s,this.$3=a,this.$4=i,this.$7=d,this.$8=m}var a=t.prototype;return a.init=function(){r("QPLUserFlow").start(c),this.$3("APPMUTEX - this tab is "+r("pageID"));var t=this.getMutex();if(t===r("pageID"))return this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT"),r("QPLUserFlow").endSuccess(c),(e||(e=n("Promise"))).resolve(!0);if(t!=null)return this.$3("APPMUTEX - initiating localTAKEOVER"),this.localTakeover();this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");var o=this.$9(r("pageID")),a=this.$10(r("pageID"));return!o.success||!a.success?(r("QPLUserFlow").addAnnotations(c,{bool:{setMutexResult:a.success,setTakeoverResult:o.success},string:{setMutexError:a.error,setTakeoverError:o.error}}),r("QPLUserFlow").endFailure(c,"fail_to_set_takeover_or_mutex"),(e||(e=n("Promise"))).resolve(!1)):(r("QPLUserFlow").endSuccess(c),(e||(e=n("Promise"))).resolve(!0))},a.localTakeover=function(){var t,a=this,i=this.$9(r("pageID"));if(!i.success)return r("QPLUserFlow").addAnnotations(c,{string:{initTakeoverError:i.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_init_takeover_failure"),(e||(e=n("Promise"))).resolve(!1);var l,s=function(){l!=null&&clearTimeout(l)},d=o("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter),m=(t=this.$7)!=null?t:u;return(e||(e=n("Promise"))).race([d,new e(function(e){l=setTimeout(function(){e()},m)}),this.$8?this.$8():new(e||(e=n("Promise")))(r("emptyFunction"))]).then(function(e){if(e==null){a.$3("AppMutex - Forcefully took the mutex and takeover lock");var t=a.$9(r("pageID")),n=a.$10(r("pageID"));return!t.success||!n.success?(r("QPLUserFlow").addAnnotations(c,{string:{setMutexError:n.error,setTakeoverError:t.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_forcefully_takeover_failure"),!1):(r("QPLUserFlow").endSuccess(c),!0)}a.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");var o=a.$11(e.newValue);if(!o&&a.hasTakeoverPermission()){a.$3("APPMUTEX - setting mutex on localtakeover");var i=a.$10(r("pageID"));return i.success?(r("QPLUserFlow").endSuccess(c),!0):(r("QPLUserFlow").addAnnotations(c,{string:{setMutexError:i.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_set_mutex_failure"),!1)}else return a.hasTakeoverPermission()&&a.$12(),r("QPLUserFlow").endFailure(c,"local_takeover_no_takeover_permission"),!1}).then(function(e){return s(),e}).catch(function(e){return s(),a.$4("AppMutex - localTakeover error no permission - "+e),r("QPLUserFlow").endFailure(c,"local_takeover_general_failure"),!1})},a.onMutexDeath=function(){var e=this.getMutex();e!=null&&e===r("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())},a.takeoverFilter=function(t){if(t.key!==this.$2)return!1;var e=t.newValue||"";return!e.includes(r("pageID"))},a.$14=function(){if(!s){var e=this.$5();if(!e)throw r("FBLogger")("messenger_web").mustfixThrow("Could not get localStorage");s=e}return s},a.getMutex=function(){return s=this.$14(),s.getItem(this.$1)},a.$10=function(t){return s=this.$14(),this.$6(s,this.$1,t)},a.$13=function(){s=this.$14(),s.removeItem(this.$1)},a.getTakeover=function(){return s=this.$14(),s.getItem(this.$2)},a.$9=function(t){return s=this.$14(),this.$6(s,this.$2,t)},a.$12=function(){s=this.$14(),s.removeItem(this.$2)},a.$11=function(t){return t!=null?t:""},a.hasTakeoverPermission=function(){var e=this.getTakeover();return e!=null&&e===r("pageID")},t})();l.THIS_TAB=r("pageID"),l.LocalStorageMutex=d}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e="armadillo_msgr_mutex",s="armadillo_msgr_local_takeover",u=null;function c(){return u==null&&(u=new(o("LocalStorageMutex")).LocalStorageMutex({getStorage:o("MAWLocalStorage").getStorage,localTakeoverKey:s,log:function(t){o("WALogger").LOG([t])},logError:function(t){o("WALogger").ERROR([t])},mutexKey:e,setItemGuarded:o("MAWLocalStorage").setItemGuarded})),u}l.MAW_MUTEX_KEY=e,l.MAW_LOCALTAKEOVER_KEY=s,l.use=c}),98);
__d("MAWBridgeGetMinosEpochDataForUser",["EBMinosCheckWasmFeatureSupport","LSDatabaseSingleton","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(){var t=await o("EBMinosCheckWasmFeatureSupport").checkWasFeatureSupportAndQE();if(t)return Promise.resolve();var n=await(e||(e=o("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue(),r=await n.runInTransaction(function(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.secure_encrypted_backups_epochs))},"readonly",void 0,void 0,i.id+":24");return r}l.getMinosEpochDataForUser=s}),98);
__d("MAWBridgeRunMediaStorageShadowTestHandler",["Promise","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).resolve(o("WAResultOrError").makeError({errorName:"gk-inconsistency"}))}l.fetchMediaStorageResults=s}),98);
__d("MAWBridgeUIEventHandlerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWBridgeUIEventHandler").__setRef("MAWBridgeUIEventHandlerDeferred"),s=function(n,r){e.load().then(function(e){e.handleEvents(n,r)})},u=function(n,r,o){return e.load().then(function(e){return e.handleShimEvent(n,r,o)})};l.handleEvents=s,l.handleShimEvent=u}),98);
__d("MAWBridgeWriteMediaStorageHandler",["BlobStorageWorkerClient","Promise","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=t.blob,i=t.fileName;return r("gkx")("6236")?o("BlobStorageWorkerClient").writeBlobToStorage({blob:a,fileName:i}):(e||(e=n("Promise"))).resolve()}l.writeToMediaStorage=s}),98);
__d("MAWCommonBackendSetup",["EBIsEbEnabled","FBLogger","MAWAppMutex","MAWInitError","MAWLocalStorage","MAWLoggerUtils","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","getErrorSafe","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup"),s=function(t,n){return n?Promise.resolve(!0):t.measurePerformance("acquire_mutex",function(){return o("MAWAppMutex").use().init()})};async function u(t,n,a,i,l,u){await t.measurePerformance("prepare_logger",async function(){var t=e.load();(await t).setupMainWaLogger()}),o("MAWLoggerUtils").initMessengerWebLogging();var c=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();c||await t.measurePerformance("detection_support",function(){if(!o("MAWLocalStorage").isLocalStorageAvailable())throw new(o("MAWInitError")).MAWInitError("localstorage_not_supported");return Promise.resolve()});var d=t.measurePerformance("setup_vault_materials",function(){return o("MAWVaultMaterialsStorage").setupVaultMaterials()}),m=await s(t,c);if(!m)throw t.logPoint("maw_appmutex_no_permission"),new(o("MAWInitError")).MAWInitError("maw_appmutex_no_permission");var p=await d,_;if(r("gkx")("1458"))try{_=await o("EBIsEbEnabled").isEBEnabled()}catch(e){var f=r("getErrorSafe")(e).message;t.addStringAnnotation("eb_state_fetch_error",f),r("FBLogger")("wmi_eb").mustfix("Failed to get EB state: %s",f),_=void 0}else _=void 0;await t.measurePerformance("setup_worker",function(){return o("MAWSetupWorker").getOrSetupWorker(p,n,a,i,l,u,_).catch(function(e){return t.logPoint("reboot_worker_on_backend_setup_failure"),t.addStringAnnotation("backend_setup_failure_reason",e.message),o("MAWWorkerReboot").rebootWorker(p,n,a,i,"backend_setup_failure",u).catch(function(e){throw new(o("MAWInitError")).MAWInitError("worker_setup_error",e)})})})}l.getMutexPermission=s,l.setupArmadilloBackend=u}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=r("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function c(e){var t=o("react-compiler-runtime").c(4),n=r("useAsyncReStore")(),a,i;t[0]!==n||t[1]!==e?(a=function(){var t,o=!1;return u.onReadyImmediately(function(a){r("promiseDone")(n,function(n){o||(t=a.subscribeToEncryptedBackupsRow(n,e))})}),function(){o=!0,t==null||t()}},i=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=i):(a=t[2],i=t[3]),s(a,i)}l.default=c}),98);
__d("MAWCommonSetup",["EBMainThreadEBDBApiDeferred","EBMainThreadListeners","EBMinosCheckWasmFeatureSupport","ExecutionEnvironment","MAWBridgeFireAndForget","MAWCacheServiceDB","MAWCommonBackendSetup","MAWCurrentUser","MAWEncryptedBackupsStateManager","MAWIndexedDbMetadata","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWLoggerUtils","MAWMIC","MAWStateContext.react","MAWUIJob","MAWWaitForBackendSetup","MessengerWebInitData","MpsReverbInit","WABridge","WADynamicRouterSync","WAJobOrchestratorTypes","WALogger","cr:13007","cr:7327","cr:8498","getErrorSafe","isMWAppsSubdomainExperiment","justknobx","performance","promiseDone","qpl","react","react-compiler-runtime","requireDeferred","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useContext,p=d.useEffect,_=r("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),f=n("cr:7327")||n("cr:8498"),g=n("cr:13007")==null?void 0:n("cr:13007").MAWInitialiseMAWDbInUI;r("requireDeferred")("MAWTimedJob").__setRef("MAWCommonSetup");var h=!1,y=function(){return(s||(s=r("performance"))).now()},C=function(t){o("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(t),o("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:t})};function b(){o("MAWBridgeFireAndForget").fireAndForget("backend","resendEBLSInWorkerEbEnabledState")}function v(){o("MAWBridgeFireAndForget").fireAndForget("backend","resendWorkerStateManagerValuesToMainThread")}function S(){b(),v()}function R(e){var t=o("react-compiler-runtime").c(8);o("MAWLoggerUtils").initMessengerWebLogging();var n=m(o("MAWStateContext.react").MAWDispatchContext),a=o("MAWIsIDBOperational").useIsIDBOperational(),i,l;t[0]!==n||t[1]!==a||t[2]!==e?(i=function(){a&&(u||(u=r("ExecutionEnvironment"))).isInBrowser&&r("promiseDone")(L(n,e))},l=[e,n,a],t[0]=n,t[1]=a,t[2]=e,t[3]=i,t[4]=l):(i=t[3],l=t[4]),p(i,l);var s,c;t[5]!==a?(s=function(){a&&r("promiseDone")(o("EBMainThreadListeners").initEBListeners())},c=[a],t[5]=a,t[6]=s,t[7]=c):(s=t[6],c=t[7]),p(s,c),r("useMWEncryptedBackupsProcessBackupIdsDeferred")(C),r("justknobx")._("4966")===!1&&S()}async function L(t,n){var a=n.logout,i=n.reregisterDevice,l=n.rotateCryptoAuthToken,s=n.setupBridge;if(h){_.load().then(function(e){e("messenger_web").warn("Armadillo already setup - return")});return}if(r("isMWAppsSubdomainExperiment")(!1)){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"])));return}h=!0,o("MAWMIC").startMAWMICFlow(),o("MAWInit").MAWInit.start(),(u||(u=r("ExecutionEnvironment"))).isInBrowser&&(await o("MpsReverbInit").initReverb({blockingErrorThreshold:r("justknobx")._("3218"),name:o("MAWIndexedDbMetadata").webReverDbbName(o("MAWCurrentUser").getID()),onBlockingError:function(){},qplEvent:r("qpl")._(1056840657,"2716"),strEncKey:r("MessengerWebInitData").accountKeyV2}),await o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),g!=null&&r("promiseDone")(g(t),function(){},function(e){return _.load().then(function(t){return t("messenger_web").catching(e).mustfix("UI Dexie initialisation failed: %s",e.message)})})),o("WABridge").makeWABridge(new(o("WADynamicRouterSync")).DynamicRouterSync);try{o("MAWIssueNewUserVisibleErrors").deleteAllErrors(),await o("MAWCommonBackendSetup").setupArmadilloBackend(o("MAWInit").MAWInit,function(e){return s({dispatch:t,logout:a,reregisterDevice:i,rotateCryptoAuthToken:l,worker:e})},function(){t({tag:"InitOfflineQueueSyncComplete",value:void 0}),t({tag:"IsDbMigrating",value:!1}),r("justknobx")._("4966")===!0&&S(),o("MAWMIC").onConnectToExistingWorker()},function(){t({tag:"InitOfflineQueueSyncComplete",value:void 0}),t({tag:"IsDbMigrating",value:!1})},"mawInit",function(e){}),o("MAWUIJob").UIJobStarters.fireAndForget(o("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),o("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",y()),o("MAWInit").MAWInit.endSuccess()}catch(e){var c,d=r("getErrorSafe")(e),m=d instanceof o("MAWInitError").MAWInitError?d.message:"maw_init_failure";d.message=(c=d.message)!=null?c:"Unknown";var p=d.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";throw p?o("MAWInit").MAWInit.cancel(m,d):(o("MAWWaitForBackendSetup").rejectBackendSetup(d),o("MAWInit").MAWInit.fail(m,d)),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,d.message),d&&_.load().then(function(e){e("messenger_web").catching(d).mustfix("MAW backend setup failed -- %s",d.message)}),d}o("EBMainThreadEBDBApiDeferred").startListeningDeviceRegistrations();var C=await o("EBMinosCheckWasmFeatureSupport").checkWasmFeatureSupport();f!=null&&C&&f.initializeMinosDb()}l.useArmadillo=R}),98);
__d("MAWDBUsageMetrics",["FBLogger","WebStorageEstimator","getErrorSafe","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("WebStorageManagerEstimatesFalcoEvent").__setRef("MAWDBUsageMetrics");async function s(){try{var t=await o("WebStorageEstimator").estimateStorage();e.onReady(function(e){r("FBLogger")("messenger_web").debug("Sending storage manager estimates falco event, quota: %s, usage: %s, usage_details: %s",t==null?void 0:t.quota,t==null?void 0:t.usage,JSON.stringify(t==null?void 0:t.usageDetails)),e.log(function(){var e,n,r,o,a,i,l,s;return{quota:String((e=t==null?void 0:t.quota)!=null?e:0),usage:String((n=t==null?void 0:t.usage)!=null?n:0),usage_details:{caches:String((r=t==null||(o=t.usageDetails)==null?void 0:o.caches)!=null?r:0),indexedDB:String((a=t==null||(i=t.usageDetails)==null?void 0:i.indexedDB)!=null?a:0),serviceWorkerRegistrations:String((l=t==null||(s=t.usageDetails)==null?void 0:s.serviceWorkerRegistrations)!=null?l:0)}}})})}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Error while getting the storage manager estimate");return}}l.logMAWDBUsageMetrics=s}),98);
__d("toMsgrUserJid",["MAWJids"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","requireDeferred","toMsgrUserJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");async function c(t){var n=await u.load(),a=await n(),i=new Set(t.map(function(e){return o("WAJids").extractUserId(e)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.contacts).filter(function(t){return i.has((e||(e=o("I64"))).to_string(t.id))})).then(function(t){return new Map(t.map(function(t){return[r("toMsgrUserJid")((e||(e=o("I64"))).to_string(t.id)),t]}))})}function d(e){return c(e).then(function(e){var t=new Map;return e.forEach(function(e,n){t.set(n,o("MAWContactRelationshipType").getContactRelationshipType(e))}),t})}function m(t){return c(t).then(function(t){var n=new Map;return t.forEach(function(t,a){var i=t.contactTypeExact!=null&&(e||(e=o("I64"))).equal(t.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));n.set(a,i)}),n})}l.fetchContacts=c,l.fetchContactsRelationships=d,l.fetchContactsIsMsplit=m}),98);
__d("MWXProgressRing.react",["cr:4145","cr:6783","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),r=e.color,a=e.percentage,i=e.size;if(n("cr:4145")!=null){var l=r!=null?r:"light",u=a!=null?a:0,c=i!=null?i:16,d;return t[0]!==l||t[1]!==u||t[2]!==c?(d=s.jsx(n("cr:4145"),{color:l,percentage:u,size:c}),t[0]=l,t[1]=u,t[2]=c,t[3]=d):d=t[3],d}if(n("cr:6783")!=null){var m;return t[4]!==r||t[5]!==a||t[6]!==i?(m=s.jsx(n("cr:6783"),{color:r,percentage:a,size:i}),t[4]=r,t[5]=a,t[6]=i,t[7]=m):m=t[7],m}return null}l.default=u}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWXToast.react","err","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("BaseToasterStateManager").getInstance();function c(e){var t=e.body,n=e.icon,o=e.startAddOn,a=o===void 0?null:o,i=e.supressCloseButton,l=i===void 0?!1:i,c=e.title,d=e.toastId;if(d==null){r("err")("toastId or toasterStateManager is not provided");return}u.replace(d,s.jsx(r("MWXToast.react"),{body:t,icon:n,onDismiss:function(){return u.expire(d)},startAddOn:a,supressCloseButton:l,title:c}))}l.mwReplaceToast=c}),98);
__d("MAWLoadingSpinner.react",["BaseToasterStateManager","MWXIconCheckmarkCircle","MWXIconStrict.react","MWXProgressRing.react","MWXSpinner.react","mwPushToast","mwReplaceToast","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useRef,p=r("BaseToasterStateManager").getInstance();function _(e,t,n,o){return o===void 0&&(o=0),e==="spinner"?{icon:{comet:s.jsx(r("MWXSpinner.react"),{color:t?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:n}:e==="progressRing"?{icon:{comet:s.jsx(r("MWXProgressRing.react"),{color:t?"light":"dark",size:24})},startAddOn:{source:o,type:"progressRing"},title:n}:{icon:{comet:s.jsx(r("MWXSpinner.react"),{color:t?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:n}}function f(e,t){o("mwReplaceToast").mwReplaceToast({icon:{comet:s.jsx(r("MWXIconStrict.react"),{icon:r("MWXIconCheckmarkCircle"),size:24}),mds:r("MWXIconCheckmarkCircle").component},title:t,toastId:e})}function g(e,t,n,a,i,l){var s=o("react-compiler-runtime").c(10),u=m(),g,h;s[0]!==a||s[1]!==t||s[2]!==l||s[3]!==n||s[4]!==i||s[5]!==e?(g=function(){if(i)u.current==null?u.current=o("mwPushToast").mwPushToast(_(e,t,n,l),Number.MAX_SAFE_INTEGER):o("mwReplaceToast").mwReplaceToast(babelHelpers.extends({},_(e,t,n,l),{toastId:u.current}));else if(u.current!=null){var s=u.current;f(s,a),r("setTimeout")(function(){p.expire(s),u.current=void 0},2750)}},h=[i,t,e,n,l,a],s[0]=a,s[1]=t,s[2]=l,s[3]=n,s[4]=i,s[5]=e,s[6]=g,s[7]=h):(g=s[6],h=s[7]),d(g,h);var y,C;s[8]===Symbol.for("react.memo_cache_sentinel")?(y=function(){return function(){u.current!=null&&p.expire(u.current)}},C=[],s[8]=y,s[9]=C):(y=s[8],C=s[9]),c(y,C)}l.useMAWLoadingSpinner=g}),98);
__d("MAWLoadingStateOutstandingOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return(function(e){var n=e.offlineQueueCount,r=e.offlineQueueSyncState,a=e.offlineQueueThreadStatus;if(t!=null&&Object.keys(a).length>0){var i;return a[t]!=null&&((i=a[t])==null?void 0:i.snippetStatus)!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}return n>0&&r!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete})};l.outstandingOfflineQueueSelector=e}),98);
__d("MAWLoadingStateSpinnerUtils",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(t){return s._(/*BTDS*/"{restoredPercentage}\u0025 of chats loaded...",[s._param("restoredPercentage",t.toFixed(0).toString())])},u=s._(/*BTDS*/"All chats loaded.");function c(e,t,n){if(n===0)return 100;var r=50*(e/n),o=50*(t/n);return Math.min(100,o+r)}l.getProgressMessage=e,l.completedMessage=u,l.getPercentage=c}),226);
__d("MAWLoadingStateToastSelectors",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){return t.offlineQueueCount},l=function(t){return t.offlineQueueProgressDownloaded},s=function(t){return t.offlineQueueProgressProcessed};i.offlineQueueCountSelector=e,i.offlineQueueProgressCountSelector=l,i.offlineQueueConsumerProgressCountSelector=s}),66);
__d("useMAWOfflineQueueLoadingIndicator",["Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","react-compiler-runtime","useCometRouterState","useMAWOfflineQueueLoadingIndicatorThreadJid"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a=o("react-compiler-runtime").c(4),i=e===void 0?!1:e,l=n===void 0?o("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector:n,s=r("useMAWOfflineQueueLoadingIndicatorThreadJid")(t==null?void 0:t.threadKey,t==null?void 0:t.threadType),u=r("useCometRouterState")(),c,d;a[0]!==l||a[1]!==s?(c=function(){return l(s)},d=[l,s],a[0]=l,a[1]=s,a[2]=c,a[3]=d):(c=a[2],d=a[3]);var m=o("Int64Hooks").useMemoInt64(c,d),p=o("MAWStateContext.react").useMAWSelector(m),_=u==null?void 0:u.main.route.tabKey;return p&&(_==="messenger"||!i)}l.default=e}),98);
__d("MAWLoadingStateSpinner.react",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWLoadingStateToastSelectors","MAWStateContext.react","cr:19625","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicator"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.memo,d=u.useContext;function m(){var e=o("react-compiler-runtime").c(5),t=d(r("CometDarkModeContext")).currentSetting==="ENABLED",n=r("useMAWOfflineQueueLoadingIndicator")(!0),a=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueCountSelector),i=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueProgressCountSelector),l=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueConsumerProgressCountSelector),s,u;e[0]!==i||e[1]!==a||e[2]!==l?(s=o("MAWLoadingStateSpinnerUtils").getPercentage(i,l,a),u=o("MAWLoadingStateSpinnerUtils").getProgressMessage(s),e[0]=i,e[1]=a,e[2]=l,e[3]=s,e[4]=u):(s=e[3],u=e[4]);var c=u;return o("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",t,c,o("MAWLoadingStateSpinnerUtils").completedMessage,n,s),null}function p(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=n("cr:19625")!=null?s.jsx(n("cr:19625"),{}):s.jsx(m,{}),e[0]=t):t=e[0],t}var _=c(p);l.default=_}),98);
__d("MAWLoadingStateSpinnerWithQueueState",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWSharedProtocolQueueConst","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicatorShown","useMAWOfflineQueueState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(5),n=e.shouldDisplayLoadingIndicatorOnMessengerRoute,a=u(r("CometDarkModeContext")).currentSetting==="ENABLED",i=o("useMAWOfflineQueueState").useMAWOfflineQueueState(),l=i.offlineQueueCount,s=i.offlineQueueProgressDownloaded,c=i.offlineQueueProgressProcessed,d=l>0&&i.offlineQueueSyncState!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,m=d&&n,p,_;t[0]!==s||t[1]!==l||t[2]!==c?(p=o("MAWLoadingStateSpinnerUtils").getPercentage(s,c,l),_=o("MAWLoadingStateSpinnerUtils").getProgressMessage(p),t[0]=s,t[1]=l,t[2]=c,t[3]=p,t[4]=_):(p=t[3],_=t[4]);var f=_;return o("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",a,f,o("MAWLoadingStateSpinnerUtils").completedMessage,m,p),null}function d(){var e=o("react-compiler-runtime").c(2),t=r("useMAWOfflineQueueLoadingIndicatorShown")(!0),n;return e[0]!==t?(n=t?s.jsx(c,{shouldDisplayLoadingIndicatorOnMessengerRoute:t}):null,e[0]=t,e[1]=n):n=e[1],n}l.default=d}),98);
__d("getMAWIdentityKeys",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("MAWBridgeSendAndReceive").sendAndReceive("waapi","getIdentityKeys",void 0,{timeoutMs:6e4})}l.default=e}),98);
__d("MAWMainThreadEBDeps",["EBDeps","EBMainThreadEBDBApiDeferred","LSDatabaseSingleton","MAWWaitForBackendSetup","getMAWIdentityKeys","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EBSMMainthreadAPI").__setRef("MAWMainThreadEBDeps");function u(){o("EBDeps").setDeps({getEBSMAPI:function(){return s.load()},getLSDB:function(){return(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton},getMAWIdentityKeys:r("getMAWIdentityKeys"),isBackendSetupSuccessful:function(){return o("MAWWaitForBackendSetup").isBackendSetupSuccessful()},trackAddingNewDevice:o("EBMainThreadEBDBApiDeferred").addNewDevice},"MAW MainThread")}l.initEBDeps=u}),98);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=o("LSDefaultSyncGroups").e2eeMetadataSyncGroup;return t!=null?e.sync_groups.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(c||(c=o("LSIntEnum"))).ofNumber(t.groupId)})):(s||(s=n("Promise"))).resolve()}function m(e){return e.network_requests.put({epochId:void 0,failureCount:(u||(u=o("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:u.zero,lastSyncRequestTimestampMs:u.zero,networkTaskIdentifier:void 0,syncDatabaseId:(c||(c=o("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function p(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]))),r("promiseDone")(t.runInTransaction(function(e){return(s||(s=n("Promise"))).all([d(e),m(e)])},"readwrite",void 0,void 0,i.id+":53"))}l.onOccamadilloMutexChange=p}),98);
__d("MAWPostOfflineQueueCompleteActions",["WAMediaWasmWorkerClient"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("mp4RepairMux"),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode")}function s(){e()}l.runPostOfflineQueueCompleteActions=s}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","gkx","qpl","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(25310984,"169");function c(t){var n=t!=null?{instanceKey:t}:void 0,a=!1,i=!1;function l(){i||(i=!0,r("QPLUserFlow").start(u,babelHelpers.extends({cancelOnUnload:!0,onFlowTimeout:function(){a=!0},timeoutInMs:(e||(e=r("ExecutionEnvironment"))).canUseDOM?6e4:0},n)),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){r("QPLUserFlow").addAnnotations(u,e)}),y())}function c(e){!i||a||(y(),r("QPLUserFlow").addPoint(u,e,n))}function d(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{bool:(n={},n[e]=t,n)})}function m(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{string:(n={},n[e]=t,n)})}function p(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{string_array:(n={},n[e]=t,n)})}function _(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{int:(n={},n[e]=t,n)})}function f(e){y(),a=!0,r("QPLUserFlow").addAnnotations(u,{string:{failReason:e}},n),r("QPLUserFlow").endFailure(u,"maw_init_fail",n),h=!1}function g(e){y(),a=!0,h=!1,r("QPLUserFlow").addAnnotations(u,{string:{dropReason:e}},n),(s||(s=r("QuickPerformanceLogger"))).markerDrop(u)}var h=!1;function y(){h||(h=!0,r("QPLUserFlow").addAnnotations(u,{bool:{armadillo_init_sync_api_improvements:r("gkx")("24025"),isArmadilloPublicLaunchUser:r("gkx")("23405"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}}))}function C(e){y(),a=!0,r("QPLUserFlow").addAnnotations(u,{string:{cancelReason:e}},n),r("QPLUserFlow").endCancel(u,n),h=!1}function b(){y(),a=!0,r("QPLUserFlow").endSuccess(u,n),h=!1}async function v(e,t){var n=e+"_start",r=e+"_end";c(n);var o=await t();return c(r),o}return{addBoolAnnotation:d,addIntAnnotation:_,addStringAnnotation:m,addStringArrayAnnotation:p,cancel:C,drop:g,endSuccess:b,fail:f,logPoint:c,measurePerformance:v,start:l}}l.getMAWReinit=c}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.allTablesPersisted,n=e.db,r=e.dispatch,a=e.dispatchClearEphemeralSettings,i=e.instanceKey,l=e.logout,s=e.reregisterDevice,u=e.rotateCryptoAuthToken,c=e.setupBridge,d=e.workerCreateReason,m=o("MAWReinit").getMAWReinit(i);m.start();var p=function(){r({tag:"InitOfflineQueueSyncComplete",value:void 0})};await o("MAWCommonBackendSetup").setupArmadilloBackend(m,function(e){var a=c({dispatch:r,logout:l,reregisterDevice:s,rotateCryptoAuthToken:u,worker:e});return t||o("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(n),a},p,p,d,function(e){}),m.endSuccess(),a()}l.default=e}),98);
__d("MAWSetupBridgeOfflineConsumer",["InteractionTracingMetrics","MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWMIC","MAWOfflineQueueStatus","MAWPostOfflineQueueCompleteActions","MAWSharedProtocolQueueConst","MWChatInteraction","MWFBLogger","interaction-tracing","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["ServerRPC","OfflineConsumer"]),m="has_pending_or_inprogress_oq_threads";async function p(e){return await e,o("MAWPostOfflineQueueCompleteActions").runPostOfflineQueueCompleteActions(),o("MAWBridgeInitOfflineQueueSyncCompleteHandler").call()}function _(e){o("MAWMIC").addIntAnnotation("offlineQueueSize",e);var t=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);t!=null&&r("InteractionTracingMetrics").addAnnotationInt(t,"offlineQueueSize",e)}function f(e,t){var n=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);n!=null&&r("InteractionTracingMetrics").addSubspan(n,"offline_queue","LONGTASK",e,t,{})}function g(){r("justknobx")._("3496")&&r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(e){e.addMarkerPoint("offline_queue_start","AppTiming"),e.addAnnotationBoolean(m,!0)})}function h(){r("justknobx")._("3496")&&r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(e){e.addMarkerPoint("offline_queue_end","AppTiming"),e.addAnnotationBoolean(m,!1)})}function y(t,n){return function(a){var i=a.chatJidStatus,l=a.status,m=a.timestamp,y=a.totalExpectedCount,C=a.totalProcessedCount;switch(l){case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing:g(),d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",""])),y),_(y),n({tag:"InitOfflineQueueSyncStart",value:y}),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing),o("MAWMIC").addPoint("process_offline_queue_start",m),o("MAWOfflineQueueStatus").resetOfflineQueueState();return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing:d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Stats: expected: ",", processed: ",""])),y,C),n({tag:"InitOfflineQueueConsumerSyncProgress",value:{chatJidStatus:i,processed:C}}),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing);return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Stats end: expected: ",", processed: ",""])),y,C),a.startTime!=null&&f(a.startTime,m),h(),n({tag:"InitOfflineQueueSyncComplete",value:i}),r("promiseDone")(p(t)),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete),o("MAWMIC").addPoint("process_offline_queue_end",m),o("MAWOfflineQueueStatus").markOfflineQueueComplete();return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed:d.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Stats failed: expected: ",", processed: ",""])),y,C),o("MAWMIC").addPoint("process_offline_queue_failed",m),n({tag:"InitOfflineQueueSyncComplete",value:void 0}),r("promiseDone")(p(t)),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed),o("MAWOfflineQueueStatus").markOfflineQueueComplete();return}}}l.default=y}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","MWFBLogger","WAOfflineUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["ServerRPC","Offline"]);function m(e){o("MAWMIC").addIntAnnotation("offlineQueueSize",e);var t=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);t!=null&&r("InteractionTracingMetrics").addAnnotationInt(t,"offlineQueueSize",e)}var p=function(n){return async function(t){var r=t.downloaded,a=t.expected,i=t.status,l=t.timestamp;switch(i){case o("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""])),a.count,a.message),m(a.count),n({tag:"InitOfflineQueueSyncStart",value:a.count}),o("MAWMIC").addPoint("download_offline_queue_start",l);return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""])),r.count,a.count,r.message,a.message),n({tag:"InitOfflineQueueSyncProgress",value:r.count});return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""])),r.count,a.count,r.message,a.message),o("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",r.count),n({tag:"InitOfflineQueueSyncProgress",value:a.count}),o("MAWMIC").addPoint("download_offline_queue_end",l);return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:d.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"]))),o("MAWMIC").addPoint("download_offline_queue_failed",l);return}}},_=p;l.default=_}),98);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s={accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION},u=babelHelpers.extends({},s),c="uninitialized",d=o("MWFBLogger").MWLogger().tags(["MWWorkerOwnedDbKeychain"]);function m(){return u}function p(t){d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]))),c="initialized",u=t}function _(){return c==="initialized"}function f(){return u.latestVersion}l.getEARKey=m,l.handleEARKeyChange=p,l.isInitialised=_,l.getLatestVersion=f}),98);
__d("MAWSetupBridge",["DTSG","EBDBMetricsConsistencyOperationEnum","EBMainThreadEBDBApiDeferred","LSDatabaseSingleton","LSGetLatestThreadIds.nop","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","MAWAbPropsClient","MAWBridgeGetMinosEpochDataForUser","MAWBridgeReceivedChatStateHandler","MAWBridgeRunMediaStorageShadowTestHandler","MAWBridgeUIEventHandlerDeferred","MAWBridgeUpdateClientMediaStatusHandler","MAWBridgeWriteMediaStorageHandler","MAWCommonSetupBridge","MAWEBLSInWorkerSwitch","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeOfflineConsumer","MAWSetupBridgeOfflineSnapshot","MAWStateManagerSyncToMainThread","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Run","Visibility","WAExceededStorageQuota","cr:3411","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ArmadilloCutoverClientFalcoEvent").__setRef("MAWSetupBridge"),u=r("requireDeferred")("MAWBridgeUpdateDYIStatusV2").__setRef("MAWSetupBridge"),c=(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(o("LSInitSyncCompleteSubscription").use).then(function(){return(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton}),d=function(t){s.loadImmediately(function(e){var n=e.log;return n(function(){return{armadillo_thread_id:t.armadilloThreadId,domain:t.domain,event:t.event,event_details:t.eventDetails,open_thread_id:t.openThreadId,success:t.success,trace_id:t.traceId}})})};function m(t){var a=t.dispatch,l=t.logout,s=t.reregisterDevice,m=t.rotateCryptoAuthToken,p=t.worker;function _(){p.postMessage({type:"force-flush-data"})}return o("Run").onUnload(_),o("Run").onBeforeUnload(_,!1),r("Visibility").addListener(r("Visibility").HIDDEN,function(){p.postMessage({type:"force-flush-logs-only"})}),o("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(t){o("MAWAbPropsClient").rewrite(t.abProps)},earKeyChange:function(t){o("MWWorkerOwnedDbKeychain").handleEARKeyChange(t)},executeGraphQLLightSpeedRequest:function(t){var e=t.args;return r("LSPlatformGraphQLLightspeedRequest").apply(void 0,e)},getDTSGToken:function(){return Promise.resolve(o("DTSG").getToken())},getLSDBEphemeralSetting:function(t){return o("MAWGetEphemeralSettings").getEphemeralSetting(t.chatJid)},getLSDBLatestThreadIds:async function(n){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return t.runInTransaction(function(e){return r("LSGetLatestThreadIds.nop")(e,0,"",n.numThreads,n.miActMappingFilteredThreads)},"readonly",void 0,void 0,i.id+":122")},getLSDBUsersIsMsplit:function(t){return o("MAWFetchContacts").fetchContactsIsMsplit(t.users)},getLSDBUsersRelationships:function(t){return o("MAWFetchContacts").fetchContactsRelationships(t.users)},getMediaStorageResult:function(t){return o("MAWBridgeRunMediaStorageShadowTestHandler").fetchMediaStorageResults(t)},getMinosEpochDataForUser:function(){return o("MAWBridgeGetMinosEpochDataForUser").getMinosEpochDataForUser()},isDbMigrating:function(t){a({tag:"IsDbMigrating",value:!1})},logCutoverEvent:d,logout:l,offlineConsumerProgress:function(){return r("MAWSetupBridgeOfflineConsumer")(c,a).apply(void 0,arguments)},offlineSnapshot:r("MAWSetupBridgeOfflineSnapshot")(a),receivedChatState:async function(t){var e=await c;await e.runInTransaction(function(e){return o("MAWBridgeReceivedChatStateHandler").call(e,t)},"readwrite",void 0,void 0,i.id+":158")},reregisterDevice:s,resignCdnUrl:function(){return Promise.resolve()},rotateCryptoAuthToken:m,storageQuota:function(t){var e=t.exceededStorageQuota;o("WAExceededStorageQuota").setExceededStorageQuota(e)},trackEbConsistency:function(t){o("EBMainThreadEBDBApiDeferred").trackConsistency(o("EBDBMetricsConsistencyOperationEnum").EBConsistencyOperation.Upload,t.workerDeviceId)},uiUpdate:function(t){var e=t.events;a&&e.forEach(function(e){return a(e)}),n("cr:3411")==null||n("cr:3411").recordBridgeUIEvent(e),o("MAWBridgeUIEventHandlerDeferred").handleEvents(c,e)},unrecoverableDbError:function(t){var e=t.error;o("MAWUnrecoverableDbErrors").setError(e)},updateDYIStatus:function(t){var e=t.qplEvent,n=t.qplInstanceKeyE2E,o=t.status;r("promiseDone")(u.load().then(function(t){return t.call({qplEvent:e,qplInstanceKeyE2E:n,status:o})}))},updateEBLSInWokerStateInMainThread:function(t){r("MAWEBLSInWorkerSwitch").set(t.ebEnabled)},updateMediaStatus:async function(t){var e=await c;return o("MAWBridgeUpdateClientMediaStatusHandler").call(e,t)},updateStateManagerStateInMainThread:function(t){o("MAWStateManagerSyncToMainThread").updateStateManagerInMainThreadFromBridgeCall(t.stateManagerKey,t.value)},uploadOpenMessages:function(){return Promise.reject("this bridge should not be used for msgr")},writeToMediaStorage:function(t){return o("MAWBridgeWriteMediaStorageHandler").writeToMediaStorage(t)}},worker:p})}l.setupBridge=m}),98);
__d("MAWSetupMutex",["LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MWFBLogger","QPLUserFlow","Run","getErrorSafe","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=u.useMemo,p=o("MWFBLogger").MWLogger().tags(["MAWInit"]),_=!1,f=0;async function g(e){if(document.visibilityState!=="visible")return!1;var t=window.indexedDB!=null,n=o("MAWLocalStorage").isLocalStorageAvailable();return e?(p.debug("AppMutex - Shouldn't reinitialize, worker already exists"),!1):!(!t||!n)}function h(t,n){var a=t.logout,i=t.reregisterDevice,l=t.rotateCryptoAuthToken,s=t.setupBridge,u=m(function(){return o("MAWAppMutex").use()},[]),h=(e||(e=r("useReStore")))(),y=h.persistenceTypes.includes("indexeddb"),C=c(async function(e){var t=u.takeoverFilter(e);!t||e.newValue===o("LocalStorageMutex").THIS_TAB||e.newValue===""||(!y&&!r("isInstamadillo")()&&o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]}),await o("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange"),o("MAWWaitForBackendSetup").resetBackendSetup(),o("MAWMIC").cancel("workerMutexLost"),o("MAWInit").MAWInit.cancel("workerMutexLost"),u.onMutexDeath())},[u,y]),b=c(function(){u.onMutexDeath(),r("promiseDone")(o("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[u]),v=c(async function(){var e=await o("MAWWebWorkerSingleton").doesWorkerExist(),t=await g(e);if(!(!t||_)){_=!0,f++;try{await r("MAWReinitWorker")({allTablesPersisted:y,db:h,dispatch:n,dispatchClearEphemeralSettings:function(){},instanceKey:f,logout:a,reregisterDevice:i,rotateCryptoAuthToken:l,setupBridge:s,workerCreateReason:"mawReinitSetupMutex"}),o("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(e){var u=r("getErrorSafe")(e);p.catching(u).mustfix("AppMutex - failed to reinitialize worker"),r("QPLUserFlow").endFailure(r("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:u.message}},error:u,instanceKey:f})}finally{_=!1}}},[y,h,n,a,i,l,s]);d(function(){window.addEventListener("storage",C);var e=o("Run").onBeforeUnload(b,!1),t=o("Run").onUnload(b);return window.addEventListener("visibilitychange",v),function(){window.removeEventListener("storage",C),e.remove(),t.remove(),window.removeEventListener("visibilitychange",v)}},[C,b,v])}l.useMutex=h}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.dispatch,n=e.platformSetupUtils;return o("MAWSetupMutex").useMutex(n,t),null}l.default=e}),98);
__d("MWChatFetchThreadMessageCounts",[],(function(t,n,r,o,a,i){"use strict";async function e(e){return{}}async function l(e,t){return 0}i.fetchArmadilloThreadMessageCounts=e,i.fetchArmadilloThreadMessageCount=l}),66);
__d("globalCryptoSubtle",[],(function(t,n,r,o,a,i){"use strict";var e=t.crypto.subtle,l=e;i.default=l}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(s||(s=o("react"))).useEffect,d="armadillo_msgr_data_loss_stats";function m(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],c(p,t)}function p(){var e;return window.setTimeout(function(){e=r("Visibility").addListener(r("Visibility").HIDDEN,_)},3e4),function(){var t;(t=e)==null||t.remove()}}function _(){r("promiseDone")((u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(f))}function f(e){return o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(e).then(g)}function g(t){(e||(e=r("WebStorage"))).setItemGuarded(e.getLocalStorage(),d,JSON.stringify(t))}l.DATA_LOSS_STATISTICS_STORAGE_KEY=d,l.useDataLossStatisticsStorageListener=m}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","QuickPerformanceLogger","WebStorage","getErrorSafe","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){var t=Array.from(new Uint8Array(e));return t.map(function(e){return e.toString(16).padStart(2,"0")}).join("")}async function d(e){try{var t=new TextEncoder,n=t.encode(e).buffer,o=await r("globalCryptoSubtle").digest("SHA-256",n);return c(o)}catch(e){return r("getErrorSafe")(e).message}}async function m(e){var t=e.currentIDBCnt,n=e.currentMsgCnt,o=e.logThreadId,a=e.prevMsgCnt,i=e.qplEvent,l=e.threadId;if(o!=null&&o){var u=await d(l);t!=null?((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_idb_count:t,current_msg_count:n,prev_msg_count:a},string:{encrypted_threadId:u}}),s.markerEnd(i,2)):((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_msg_count:n,prev_msg_count:a},string:{encrypted_threadId:u}}),s.markerEnd(i,2))}else t!=null?((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_idb_count:t,current_msg_count:n,prev_msg_count:a}}),s.markerEnd(i,2)):((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_msg_count:n,prev_msg_count:a}}),s.markerEnd(i,2))}function p(e){var t=e.currentMsgCnt,n=e.logThreadId,r=e.prevMsgCnt,o=e.qplEvent,a=e.threadId;return m({currentMsgCnt:t,logThreadId:n,prevMsgCnt:r,qplEvent:o,threadId:a})}async function _(t,n){try{var a,i=await o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(t,n),l=(u||(u=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(o("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(l==null)return{isThreadMissingMessages:!1};var s=JSON.parse(l),c=(a=s[(e||(e=o("I64"))).to_string(n)])!=null?a:null;return c==null?{isThreadMissingMessages:!1}:c>0&&i===0?{currCount:i,isThreadMissingMessages:!0,prevCount:c}:{isThreadMissingMessages:!1}}catch(e){return r("FBLogger")("labyrinth").catching(r("getErrorSafe")(e)).warn("Failed to check for data loss"),{isThreadMissingMessages:!1}}}function f(e){var t=o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(e);return t.then(function(e){var t=(u||(u=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(o("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(t==null)return Promise.resolve(null);var n=JSON.parse(t);return Promise.resolve({current:e,previous:n})}).then(function(e){if(e==null)return Promise.resolve();var t=e.current,n=e.previous;return g(n,t)}).catch(function(e){return r("FBLogger")("labyrinth").catching(r("getErrorSafe")(e)).warn("Failed to check for data loss")}),t.then(function(){})}async function g(e,t){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);for(var a=[],i=0;i<n.length;i++){var l=n[i],s={currentMsgCnt:t[l],prevMsgCnt:e[l],threadId:l};e[l]>0&&t[l]===0?(a.push(p(babelHelpers.extends({},s,{qplEvent:r("qpl")._(717553665,"1183")}))),a.push(p(babelHelpers.extends({},s,{logThreadId:!0,qplEvent:r("qpl")._(717562243,"1358")})))):(a.push(p(babelHelpers.extends({},s,{qplEvent:r("qpl")._(717553666,"1184")}))),a.push(p(babelHelpers.extends({},s,{logThreadId:!0,qplEvent:r("qpl")._(717556541,"1361")}))))}await Promise.all(a)}function h(e){var t=function(n){r("promiseDone")(d(n).then(function(t){(s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(r("qpl")._(717567419,"1383")),s.markerAnnotate(r("qpl")._(717567419,"1383"),{string:{encryptedThreadId:t,msg_count:e[n].toString()}}),s.markerEnd(r("qpl")._(717567419,"1383"),2)}))};for(var n in e)t(n)}l.qplLog=p,l.checkIsThreadMissingMessages=_,l.fetchCountsAndLogDataLoss=f,l.logThreadCompleteDataLoss=g,l.logLocalStatistics=h}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){t===void 0&&(t=r("emptyFunction")),s(function(){var n=!1;return r("promiseDone")(o("waitForMAWMIC").promise.then(function(){n||e()}).catch(function(){n||t()})),function(){n=!0}},n)}l.useOnMawSetupComplete=u}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","getErrorSafe","gkx","justknobx","promiseDone","react-compiler-runtime","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var e=o("react-compiler-runtime").c(2);o("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener();var t,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=m(),n=[],e[0]=t,e[1]=n):(t=e[0],n=e[1]),o("useOnMawSetupComplete.react").useOnMawSetupComplete(c,t,n)}function c(){r("promiseDone")(d()),m()}async function d(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;await o("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(t)}function m(){try{var t=r("gkx")("24061"),n=r("justknobx")._("1683");t&&n&&r("promiseDone")((async function(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return t.runInTransaction(function(e){return r("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(r("LSFactory")(e),{delayMs:(s||(s=o("I64"))).of_int32(6e4),maxThreadCount:s.of_int32(20)})},"readonly",void 0,void 0,i.id+":62")})())}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").warn("Error running thread integrity checker",a.message)}}l.default=u}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=1440*60*1e3,c=5*u;function d(){s(m,void 0)}function m(){var e=r("setTimeout")(p,c);return function(){return r("clearTimeout")(e)}}function p(){var e;(e=o("MAWIssueNewUserVisibleErrors")).issueError(e.MAWLegacyUserErrorMsgBody,e.MAWLegacyUserErrorMsgTitle,e.MAWUserVisibleErrorPresentationType.BANNER)}l.default=d}),98);
__d("useMAWReregisterDeviceOnError",["FBLogger","LSPersistedDbGating","MAWEBSwitch","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MWEncryptedBackupsInitializeRestoreDeferred","ODS","WAOdsEnums","WMIWABridgeApi","emptyFunction","getErrorSafe","promiseDone","react","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useCallback,m=c.useContext,p=!1,_=typeof window!="undefined"?window:self;function f(){p=!0,r("promiseDone")(o("MAWSetupWorker").terminateWorkerPermanently(),function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",_.location.hostname),u.bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reregister_fail_logout"),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function g(t){var n=t.rotateCryptoAuthToken,a=t.setupBridge,i=r("useAsyncReStore")(),l=m(o("MAWStateContext.react").MAWDispatchContext);return d(async function(){if(!p){(u||(u=o("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",_.location.hostname),await r("WMIWABridgeApi").removeCurrentDevice(),await o("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError"),o("MAWWaitForBackendSetup").resetBackendSetup();try{var t=await i;(u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker"),await r("MAWReinitWorker")({allTablesPersisted:o("LSPersistedDbGating").allTablesPersisted,db:t,dispatch:l,dispatchClearEphemeralSettings:function(){},logout:f,reregisterDevice:f,rotateCryptoAuthToken:n,setupBridge:a,workerCreateReason:"mawReinitReregDevice"}),r("MAWEBSwitch").isEnabled()&&((u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"eb_initial_restore"),await o("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:t,onFailure:r("emptyFunction"),onSuccess:r("emptyFunction")}))}catch(t){var s,c=r("getErrorSafe")(t);o("MAWWaitForBackendSetup").rejectBackendSetup(c);var d=c.message;r("FBLogger")("wmi_wa").tags([(s=o("MAWLoggerUtils")).Tag.DeviceRegistration,s.Tag.LogoutHandler,s.Tag.WorkerSetup,s.Tag.MAWWorker,s.Tag.MAWInit]).catching(c).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker: ",""])),d),(u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker_fail.${message}"),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}},[i,l,n,a])}l.default=g}),98);
__d("useStorageUsageMetricsLogger",["cr:20551","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],s(c,t)}function c(){n("cr:20551")==null||n("cr:20551").logMAWDBUsageMetrics()}l.default=u}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","react-compiler-runtime","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useMemo;window.XPlatTesting=n("cr:6159"),window.XPlatTestingGroups=n("cr:6160"),window.XPlatMockServer=n("cr:8800");function p(e){var t=o("react-compiler-runtime").c(24),n=e.children,a=e.fbid,i=e.logout,l=e.setupBridge,u=d(o("MAWStateContext.react").MAWDispatchContext),c=o("CometRelay").useRelayEnvironment(),m;t[0]!==c?(m=function(){return o("MAWCryptoAuthToken").fetchFreshCAT(c)},t[0]=c,t[1]=m):m=t[1];var p=m,_;t[2]!==p||t[3]!==l?(_={rotateCryptoAuthToken:p,setupBridge:l},t[2]=p,t[3]=l,t[4]=_):_=t[4];var f=r("useMAWReregisterDeviceOnError")(_),g,h;t[5]!==i||t[6]!==f?(h=i!=null?i:function(){return r("promiseDone")(f())},t[5]=i,t[6]=f,t[7]=h):h=t[7];var y;t[8]!==f?(y=function(){return r("promiseDone")(f())},t[8]=f,t[9]=y):y=t[9];var C;t[10]!==p||t[11]!==l||t[12]!==h||t[13]!==y?(C={logout:h,reregisterDevice:y,rotateCryptoAuthToken:p,setupBridge:l},t[10]=p,t[11]=l,t[12]=h,t[13]=y,t[14]=C):C=t[14],g=C;var b=g;o("MAWCommonSetup").useArmadillo(b),r("useLegacyUserWatchdog")(),r("useDataLossChecker")(),r("useStorageUsageMetricsLogger")();var v=d(r("BaseHeadingContext")),S=!o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),R=v+1,L;t[15]!==u||t[16]!==c||t[17]!==a||t[18]!==b?(L=S?s.jsx(r("MAWSetupMutex.react"),{dispatch:u,environment:c,fbId:a,platformSetupUtils:b}):null,t[15]=u,t[16]=c,t[17]=a,t[18]=b,t[19]=L):L=t[19];var E;return t[20]!==n||t[21]!==R||t[22]!==L?(E=s.jsxs(r("BaseHeadingContext").Provider,{value:R,children:[n,L]}),t[20]=n,t[21]=R,t[22]=L,t[23]=E):E=t[23],E}l.default=p}),98);
__d("MAWSetup.react",["CometPlaceholder.react","CometRelay","CurrentUser","MAWMainThreadEBDeps","MAWOembedIframeContainer.react","MAWSetupBridge","MAWSetupImpl.react","cr:6809","cr:8510","deferredLoadComponent","isGroupInvitesEnabled","promiseDone","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c=n("cr:6809")!=null?n("cr:6809").CometLogoutProvider:function(e){var t=e.children;return s.jsx(s.Fragment,{children:t})},d=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MAWLoadingStateSpinner.react").__setRef("MAWSetup.react"));r("isGroupInvitesEnabled")();function m(e){var t=o("react-compiler-runtime").c(10),a=e.children,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0],u(p,i);var l=o("CometRelay").useRelayEnvironment(),m,_;t[1]!==l?(m=function(){n("cr:8510")&&r("promiseDone")(n("cr:8510").initOhaiWebClient(l))},_=[l],t[1]=l,t[2]=m,t[3]=_):(m=t[2],_=t[3]),u(m,_),o("MAWMainThreadEBDeps").initEBDeps();var f;t[4]===Symbol.for("react.memo_cache_sentinel")?(f=r("CurrentUser").getID(),t[4]=f):f=t[4];var g;t[5]!==a?(g=s.jsx(r("MAWSetupImpl.react"),{fbid:f,logout:void 0,setupBridge:o("MAWSetupBridge").setupBridge,children:a}),t[5]=a,t[6]=g):g=t[6];var h;t[7]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MAWSetup.LoadingState",children:s.jsx(d,{})}),t[7]=h):h=t[7];var y;return t[8]!==g?(y=s.jsxs(c,{children:[g,h]}),t[8]=g,t[9]=y):y=t[9],y}function p(){var e=o("MAWOembedIframeContainer.react").createMAWOembedIframeContainer();return function(){e==null||e.stopListening()}}l.default=m}),98);/*FB_PKG_DELIM*/
__d("LSMessagingThreadAttributionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_INBOX_META_AI_FAB:65552,MESSENGER_INBOX_META_AI_LONG_PRESS_MENU:65553,MESSENGER_INBOX_PINNED_THREAD:65554,MESSENGER_INBOX_PEOPLE_YOU_MAY_MESSAGE:65555,MESSENGER_INBOX_META_AI_INVOCATION:65556,MESSENGER_INBOX_FOLLOWUP_SENDER:65557,MESSENGER_INBOX_FOLLOWUP_RECEIVER:65558,MESSENGER_INBOX_DRAFT_MESSAGE:65559,MESSENGER_INBOX_META_AI_DIGEST:65560,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_SNIPPET:131085,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND_SNIPPET:131086,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET:131087,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET_PILL:131088,MESSENGER_UNIVERSAL_SEARCH_AI_DISCOVERY_MODULE:131089,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED_WITH_SNIPPET:131090,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_META_AI_FAB:262150,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,MESSENGER_NOTIFICATION_JEWEL_NOTIF_PUSH_UPSELL:524292,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_OPTIMISTIC_LTV:589829,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_LEAD_GEN:589830,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PAGE_PAGES_HOME_FRIENDS_DIALOG:786440,FB_PAGE_PAGES_PRIVATE_REPLY:786441,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_PROFILE_MUTUAL_FRIENDS_DIALOG:851974,FB_PROFILE_DIRECTORY_MESSENGER_MESSAGE_BLOKS_URL:851975,FB_PROFILE_PROFILE_DIRECTORY_MESSAGE_BUTTON:851976,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,FB_SEARCH_SERP_PROMPT_SUGGESTIONS:917519,FB_SEARCH_AI_DISCOVERY_MODULE:917520,FB_SEARCH_TYPEAHEAD_AI_SHORTCUT:917521,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,MARKETPLACE_META_AI_FAB:1245195,MARKETPLACE_ASSISTANT:1245196,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,FB_STORY_TRY_META_AI_STICKER:1310733,FB_STORY_CHALLENGES_NOMINATION:1310734,FB_STORY_NOTES_STORY_VIEWER:1310735,FB_STORY_STORIES_PAGE_STORY_ADMIN_CONVERSATIONS:1310736,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_FEED_META_AI_FAB_COMMENTS_SUMMARY:1572889,FB_FEED_META_AI_FAB_CONTEXTUAL:1572890,FB_FEED_FEED_POLL:1572891,FB_FEED_BIZ_VOICE_AGENT:1572892,FB_FEED_MESSAGE_CREATOR_OF_POST:1572893,FB_FEED_HORIZON_WORLD_INVITE_FRIENDS:1572894,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_CHAT_NOTE_POPOVER:1966084,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,JEWEL_META_AI_FAB:2097157,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,MESSENGER_COMMUNITY_MESSAGING_CHANNEL_CREATION_NOTIFICATION:2293763,MESSENGER_COMMUNITY_MESSAGING_FRIEND_JOINED_COMMUNITY_CHAT_NOTIFICATION:2293764,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG:2293765,MESSENGER_COMMUNITY_MESSAGING_META_AI_FAB:2293766,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MESSAGING_INBOX_IN_BLUE_PREVIEW_SHEET:2490389,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,SHARESHEET_BROADCAST_CHANNEL:2883587,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,FB_GROUPS_UGC_INTRO_POST:3211281,FB_GROUPS_UGC_QP:3211282,FB_GROUPS_UGC_DEEP_DIVE_GET_ANSWER_PILL:3211283,FB_GROUPS_UGC_DEEP_DIVE_PILL:3211284,FB_GROUPS_UGC_FAB:3211285,FB_GROUPS_UGC_REMINDER_NOTIF:3211286,FB_GROUPS_UGC_COMMENT_RESPONSE_UPSELL:3211287,FB_GROUPS_UGC_CONTEXTUAL_PROFILE:3211288,FB_GROUPS_UGC_DEEP_DIVE_ASK_SOMETHING_ELSE:3211289,FB_GROUPS_UGC_CONTEXTUAL_CARD_ASK_SOMETHING_ELSE:3211290,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,READ_ONLY_CUTOVER_THREAD_THREAD_DETAIL:3473410,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,FB_SHORTS_REACTIONS_OVERLAY:3604483,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,MESSENGER_GROWTH_MESSAGE_REQUEST_JEWEL:3866626,MESSENGER_GROWTH_FRIENDLY_FEED_ACTIVE_NOW:3866627,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,HIGHLIGHTS_TAB_QUICK_REACT_CONNECTED_CHAT:4587540,HIGHLIGHTS_TAB_QUICK_REACT_LOCAL_EVENT:4587541,HIGHLIGHTS_TAB_QUICK_REACT_FRIENDS_UPDATE:4587542,HIGHLIGHTS_TAB_QUICK_REACT_BIRTHDAY:4587543,HIGHLIGHTS_TAB_QUICK_REACT_STORIES:4587544,HIGHLIGHTS_TAB_QUICK_REACT_NOTE:4587545,HIGHLIGHTS_TAB_QUICK_REACT_LIFE_EVENT:4587546,HIGHLIGHTS_TAB_META_AI_FAB:4587547,HIGHLIGHTS_TAB_FEED_INLINE_CHAT_WITH_FRIENDS:4587548,HIGHLIGHTS_TAB_THREAD_VIEW_CHAT_WITH_FRIENDS:4587549,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_LOCAL_EVENT:4587550,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FRIENDS_UPDATE:4587551,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_NOTE:4587552,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_CHAT_WITH_FRIENDS:4587553,HIGHLIGHTS_TAB_FB_POST_MEMORIES_SHARE_SHEET:4587554,HIGHLIGHTS_TAB_FEED_INLINE_FB_POST_MEMORIES:4587555,HIGHLIGHTS_TAB_THREAD_VIEW_FB_POST_MEMORIES:4587556,HIGHLIGHTS_TAB_QUICK_REACT_FB_POST_MEMORIES:4587557,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FB_POST_MEMORIES:4587558,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_QP:5177359,FBLITE_MESSAGING_META_AI_PROFILE_SHARE:5177360,FBLITE_MESSAGING_IMAGE_VIEWER_REPLY_COMPOSER:5177361,FBLITE_MESSAGING_META_AI_BOOKMARK:5177362,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_MESSAGING_NOTIFICATION_REPLY_REMINDER_NOTIFICATION:5242883,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,FBLITE_INBOX_INBOX_FOLLOWUP:5308421,FBLITE_INBOX_THREAD_WITH_DRAFT_MESSAGE:5308422,FBLITE_INBOX_META_AI_FAB:5308423,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_THREAD_DETAIL:7274497,AI_HOME_FROM_THREAD_HEADER:7274498,AI_HOME_FROM_THREAD_META_AI_THREAD_DETAIL:7274499,AI_HOME_FROM_THREAD_META_AI_THREAD_HEADER:7274500,AI_HOME_FROM_FOLDER_LIST:7340032,AI_HOME_FROM_FB_BOOKMARK:7405568,FB_FANDOM:7471104,AI_HOME_INBOX_RETENTION_QP:7536640,MEMORIES_INBOX_TRAY:7602176,MESSENGER_VOICEMAIL:7667712,AI_UGC_FB_FEED_QP:7733248,MESSENGER_INBOX_IP_QP:7798784,COMMUNITY_GROUP_CHAT_UPGRADES_INVITE:7864320,MESSENGER_SECRET_CONVERSATIONS:7929856,MESSENGER_SECRET_CONVERSATIONS_SECRET_CONVERSATIONS_FOLDER:7929857,CROSS_CUSTOMER_SUPPORT:7995392,CROSS_CUSTOMER_SUPPORT_FB_HELP_CENTER_META_AI_CARD:7995393,AI_LOOKUP:8060928,PINNED_MESSAGES_THREAD_DETAILS:8126464,CM_MEMBER_REPORTS_BLOKS:8192e3,MEMORIES_TEMPLATE:8257536,FB_TREP_UGC_CREATION:8323072,MESSENGER_STORIES_TAB:8388608,MESSENGER_STORIES_TAB_META_AI_FAB:8388609,META_AI_ENTITY_DETECTION:8454144,AI_HOME_FROM_AI_STUDIO_TAB:8519680,QR_CODE_LINK:8585216,META_AI_PROMPT_SHEET:8650752,UGC_BOT_IMMERSIVE_THREAD:8716288,UGC_BOT_IMMERSIVE_THREAD_AI_STUDIO_TAB:8716289,UGC_BOT_IMMERSIVE_THREAD_INBOX:8716290,UGC_BOT_IMMERSIVE_THREAD_AI_HOME:8716291,IGD_WEB_CHAT_TAB:8781824,IGD_WEB_CHAT_TAB_IN_THREAD:8781825,IGD_WEB_CHAT_TAB_NOTIFICATION:8781826,FB_PYMK_FEED_MESSAGE_BUTTON:8847360,MSGR_UGC_IMMERSIVE_THREAD:8912896,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB:8912897,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB:8912898,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB:8912899,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB_AI_HOME:8912900,MSGR_UGC_IMMERSIVE_THREAD_COMPOSER_AI_HOME:8912901,MSGR_UGC_IMMERSIVE_THREAD_INBOX:8912902,MSGR_UGC_IMMERSIVE_THREAD_ACTIVE_NOW:8912903,MSGR_UGC_IMMERSIVE_THREAD_META_AI_HEADER_AI_HOME:8912904,MSGR_UGC_IMMERSIVE_THREAD_UGC_HEADER_AI_HOME:8912905,MSGR_UGC_IMMERSIVE_THREAD_THREAD_DETAIL_AI_HOME:8912906,MSGR_UGC_IMMERSIVE_THREAD_META_AI_THREAD_DETAIL_AI_HOME:8912907,MSGR_UGC_IMMERSIVE_THREAD_DEEPLINK:8912908,MSGR_UGC_IMMERSIVE_THREAD_NOTIFICATION:8912909,MSGR_UGC_IMMERSIVE_THREAD_AI_CREATION:8912910,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB_AI_HOME:8912911,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB_AI_HOME:8912912,AI_THREAD_FROM_FF_THREAD:8978432,AI_THREAD_FROM_FF_THREAD_FF_THREAD_VIEW_META_AI_TASK:8978433,AI_THREAD_FROM_FF_THREAD_META_AI_SIDECHAT:8978434,AI_THREAD_FROM_FF_THREAD_SIDECHAT_RIGHT_SWIPE:8978435,AI_THREAD_FROM_FF_THREAD_SIDECHAT_RIGHT_SWIPE_SUMMARY:8978436,PHONE_NUMBER_MESSAGES:9043968,FUNDRAISER_SUPPORTERS_LIST:9109504,META_AI_SUMMARY:9175040,META_AI_SUMMARY_IN_THREAD:9175041,MESSENGER_NOTES:9240576,MESSENGER_NOTES_SELF_CONSUMPTION_DETAILS_LIST:9240577,MESSENGER_NOTES_NOTE_PROMPT_CONSUMPTION:9240578,MESSENGER_NOTES_NOTE_PROMPT_RESPONSE_CONSUMPTION:9240579,POKES_PLUS:9306112,POKES_PLUS_POKE_PLUS_DASHBOARD:9306113,STORIES_ATTRIBUTION:9371648,STORIES_ATTRIBUTION_STACKED_STORIES:9371649,ARMADILLO_CUTOVER_THREAD_BANNER:9437184,DMA_MSPLIT_FALLBACK_THREAD_NAVIGATION:9502720,MESSENGER_MENU:9568256,MESSENGER_MENU_META_AI_FAB:9568257,MESSENGER_MESSAGE_REQUEST:9633792,MESSENGER_MESSAGE_REQUEST_META_AI_FAB:9633793,MESSENGER_ARCHIVED:9699328,MESSENGER_ARCHIVED_META_AI_FAB:9699329,MESSENGER_FB_GROUPS:9764864,MESSENGER_FB_GROUPS_META_AI_FAB:9764865,MESSENGER_PEOPLE_TAB:9830400,MESSENGER_PEOPLE_TAB_ACTIVE_NOW:9830401,MESSENGER_PEOPLE_TAB_CONTACT_LIST:9830402,MESSENGER_PEOPLE_TAB_CURRENT_CITY:9830403,MESSENGER_PEOPLE_TAB_EDUCATION:9830404,MESSENGER_PEOPLE_TAB_HOMETOWN:9830405,MESSENGER_PEOPLE_TAB_WORK:9830406,MARKETPLACE_TAB_ASSISTANT_BOT:9895936,UGC_PROFILE:9961472,UGC_PROFILE_FB_FEED_BOTTOM_ATTACHMENT:9961473,FB_TOP_OF_FRIENDLY_FEED:10027008,FB_TOP_OF_FRIENDLY_FEED_CONVERSATION_SPARK_REPLY:10027009,FB_TOP_OF_FRIENDLY_FEED_STORIES_VIEWER_CONSUMER_REPLY:10027010,MESSENGER_FB_QUICKSNAP:10092544,MSGR_META_AI_DEP_IN_THREAD:10158080,FB_GAMING_TAB:10223616,FB_GAMING_TAB_INVITE_FRIENDS_WORLD_GAME_LIST_SHARE_BUTTON:10223617,FB_GAMING_TAB_HORIZON_WORLD_INVITE_FRIENDS:10223618,FB_GAMING_TAB_HORIZON_WORLD_INVITE_FRIENDS_WITH_REWARDS:10223619,VOICEMAIL_MESSAGE:10289152,GEMSTONE:10354688,GEMSTONE_MESSAGE_INBOX:10354689,GEMSTONE_MESSAGE_NOTIFICATION:10354690,GLIMPSE_PROFILE_PREVIEW:10420224,CRISIS_RESPONSE:10485760});i.default=e}),66);
__d("MAWThreadLoadingState",["I64","LSAuthorityLevel","LSIntEnum","MAWJids","MAWMiActMappingTableAPI","MAWThreadMappingQPL","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={MISSING:"MISSING",OPTIMISTIC:"OPTIMISTIC",PARTIAL:"PARTIAL",READY:"READY"},c={IN_PROGRESS:"IN_PROGRESS",MISSING:"MISSING",READY:"READY"};async function d(e,t){var n=await o("MAWMiActMappingTableAPI").getMappingRowForChatJid(e,t);if(n==null)return{mappingState:{actState:c.MISSING,miState:u.MISSING},threadKey:null};var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(n.serverThreadKey));return{mappingState:_(r,n),threadKey:n.serverThreadKey}}async function m(e,t){var n=await d(e,t),r=n.mappingState;return r}async function p(e,t){var n=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t)),o("MAWMiActMappingTableAPI").getMappingRowForThreadKey(e,t)]),r=n[0],a=n[1];return _(r,a)}function _(e,t){return{actState:C(t),miState:b(e)}}function f(e){return h(e)&&y(e)}function g(e){return e.miState===u.OPTIMISTIC}function h(e){return e.miState===u.READY}function y(e){return e.actState===c.READY}function C(e){return e==null?c.MISSING:S(e.clientThreadPk)?c.IN_PROGRESS:c.READY}function b(t){if(t==null)return u.MISSING;var n=(e||(e=o("LSIntEnum"))).toNumber(t.authorityLevel);return n===r("LSAuthorityLevel").AUTHORITATIVE?u.READY:n===r("LSAuthorityLevel").OPTIMISTIC?u.OPTIMISTIC:u.PARTIAL}async function v(e,t,n){await e.mi_act_mapping_table.put({clientThreadPk:(s||(s=o("I64"))).neg(t),jid:n,serverThreadKey:t})}function S(e){return(s||(s=o("I64"))).lt(e,s.zero)}async function R(e,t,n){var r=t.jid,a=t.threadKey;n===void 0&&(n=null),await L(e,{intJid:o("MAWJids").convertChatJidToIntJid(r),threadKey:a},n)}async function L(e,t,n){var r=t.intJid,a=t.threadKey;n===void 0&&(n=null),n!=null&&o("MAWThreadMappingQPL").addPoint("insert_mapping_row",n),await e.mi_act_mapping_table.put({clientThreadPk:r,jid:r,serverThreadKey:a})}function E(e,t){return d(e,t).then(function(e){var t=e.mappingState,n=e.threadKey;return t.miState===u.MISSING?null:n})}l.MiState=u,l.ActState=c,l.genThreadLoadingStateAndThreadKeyFromJid=d,l.genLoadingStateFromJid=m,l.genThreadLoadingState=p,l.getThreadLoadingStateForDbRows=_,l.isReady=f,l.isMiOptimistic=g,l.isMiReady=h,l.isActReady=y,l.getActState=C,l.getMiState=b,l.markActThreadLoadingAsInProgress=v,l.markActThreadLoadingAsCompletedForJid=R,l.markActThreadLoadingAsCompleted=L,l.getThreadKeyIfMiThreadNotMissing=E}),98);
__d("URLMatcherConfig",[],(function(t,n,r,o,a,i){a.exports={tlds:"(?:\\.(com|\uD55C\uAD6D|\uC0BC\uC131|\uB2F7\uCEF4|\uB2F7\uB137|\u9999\u6E2F|\u9999\u683C\u91CC\u62C9|\u9910\u5385|\u98DF\u54C1|\u98DE\u5229\u6D66|\u96FB\u8A0A\u76C8\u79D1|\u96C6\u56E2|\u901A\u8CA9|\u8D2D\u7269|\u8C37\u6B4C|\u8BFA\u57FA\u4E9A|\u8054\u901A|\u7F51\u7EDC|\u7F51\u7AD9|\u7F51\u5E97|\u7F51\u5740|\u7EC4\u7EC7\u673A\u6784|\u79FB\u52A8|\u73E0\u5B9D|\u70B9\u770B|\u6FB3\u9580|\u6E38\u620F|\u6DE1\u9A6C\u9521|\u673A\u6784|\u66F8\u7C4D|\u65F6\u5C1A|\u65B0\u95FB|\u65B0\u52A0\u5761|\u653F\u5E9C|\u653F\u52A1|\u624B\u8868|\u624B\u673A|\u6211\u7231\u4F60|\u6148\u5584|\u5FAE\u535A|\u5E7F\u4E1C|\u5DE5\u884C|\u5BB6\u96FB|\u5A31\u4E50|\u5929\u4E3B\u6559|\u5927\u62FF|\u5927\u4F17\u6C7D\u8F66|\u5728\u7EBF|\u5609\u91CC\u5927\u9152\u5E97|\u5609\u91CC|\u5546\u6807|\u5546\u5E97|\u5546\u57CE|\u53F0\u7063|\u53F0\u6E7E|\u516C\u76CA|\u516C\u53F8|\u516B\u5366|\u5065\u5EB7|\u4FE1\u606F|\u4F5B\u5C71|\u4F01\u4E1A|\u4E2D\u6587\u7F51|\u4E2D\u570B|\u4E2D\u56FD|\u4E2D\u4FE1|\u4E16\u754C|\u30DD\u30A4\u30F3\u30C8|\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3|\u30BB\u30FC\u30EB|\u30B9\u30C8\u30A2|\u30B3\u30E0|\u30B0\u30FC\u30B0\u30EB|\u30AF\u30E9\u30A6\u30C9|\u307F\u3093\u306A|\u10D2\u10D4|\u0E44\u0E17\u0E22|\u0E04\u0E2D\u0E21|\u0DBD\u0D82\u0D9A\u0DCF|\u0D2D\u0D3E\u0D30\u0D24\u0D02|\u0CAD\u0CBE\u0CB0\u0CA4|\u0C2D\u0C3E\u0C30\u0C24\u0C4D|\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD|\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8|\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE|\u0B2D\u0B3E\u0B30\u0B24|\u0AAD\u0ABE\u0AB0\u0AA4|\u0A2D\u0A3E\u0A30\u0A24|\u09AD\u09BE\u09F0\u09A4|\u09AD\u09BE\u09B0\u09A4|\u09AC\u09BE\u0982\u09B2\u09BE|\u0938\u0902\u0917\u0920\u0928|\u092D\u093E\u0930\u094B\u0924|\u092D\u093E\u0930\u0924\u092E\u094D|\u092D\u093E\u0930\u0924|\u0928\u0947\u091F|\u0915\u0949\u092E|\u0680\u0627\u0631\u062A|\u067E\u0627\u06A9\u0633\u062A\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064A\u0644\u064A|\u0645\u0644\u064A\u0633\u064A\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062B\u0648\u0644\u064A\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064A\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064A\u0629|\u0633\u0648\u062F\u0627\u0646|\u062A\u0648\u0646\u0633|\u0628\u06BE\u0627\u0631\u062A|\u0628\u064A\u062A\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062A|\u0627\u06CC\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062A|\u0627\u0644\u0645\u063A\u0631\u0628|\u0627\u0644\u0639\u0644\u064A\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629|\u0627\u0644\u062C\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062F\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062A\u0635\u0627\u0644\u0627\u062A|\u0627\u0628\u0648\u0638\u0628\u064A|\u05E7\u05D5\u05DD|\u0570\u0561\u0575|\u049B\u0430\u0437|\u0443\u043A\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043E\u0440\u0433|\u043E\u043D\u043B\u0430\u0439\u043D|\u043C\u043E\u0441\u043A\u0432\u0430|\u043C\u043E\u043D|\u043C\u043A\u0434|\u043A\u043E\u043C|\u043A\u0430\u0442\u043E\u043B\u0438\u043A|\u0435\u044E|\u0434\u0435\u0442\u0438|\u0431\u0435\u043B|\u0431\u0433|\u03B5\u03BB|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(t,n,r,o,a,i){var e="!\"#%&'()*,-./:;<>?@[\\]^_`{|}",l="\u2000-\u206F\xAB\xBB\uFF08\uFF09",s="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",u="(?:https?)://",c="(?:(^|\\s)(?:"+s+"[.]){3}"+s+")",d=c,m="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",p="(?:\\b)www\\d{0,3}[.]",_="[^\\s"+e+l+"]",f="(?:(?:(?:[.:\\-_%@]|"+_+")*"+_+")|"+m+")",g="(?::\\d+){0,1}",h="(?=[/?#])",y=n("URLMatcherConfig").tlds,C="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+h+"))",b="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+"))",v="[/#?]",S="\\([^\\s()<>]+\\)",R="[^\\s()<>?#]+",L=new RegExp(C,"im"),E="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",k=new RegExp(E,"im"),I="(?:(?:"+v+")(?:(?:"+S+"|"+R+")*)*)*",T=new RegExp("((?:"+b+")(?:"+I+"))","im");function D(){T.compile()}var x=new RegExp("((?:"+u+f+g+")|(?:"+p+f+y+g+"))"),$=/[\s\'\";]/,P=new RegExp(v,"im"),N=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xAB\xBB\u2000-\u206F\uFF08\uFF09]","im"),M=new RegExp("[\\s()<>?#]","im"),w=new RegExp("\\s()<>"),A=function(t){return t!=null&&t.indexOf("@")!==-1?x.exec(t)?t:null:t},F=function(t){return new RegExp("((?:"+C+")(?:"+I+"))",t)};function O(){return T.source}var B=function(t){return U(t,F("im"))},W=function(t){return V(t,F("igm"))},q=function(t){return U(t,T)},U=function(t,n){var e=n.exec(t);return e==null||e.length===0?null:A(e[1]||null)},V=function(t,n){var e=t.match(n);return e==null?[]:e.filter(Boolean)||[]},H=function(t){return L.exec(t)},G=function(t){return!$.test(t.charAt(t.length-1))},z=function(t){var e=t,n=!1;do{var r,o=L.exec(e);if(!o)return null;if(((r=o[1])==null?void 0:r.trim())===""&&(o[0]=o[0].trim(),o.index+=o[1].length),n=!1,o[0][0]==="["&&o.index>0&&e[o.index-1]==="@"){var a=k.exec(o[0]);a&&(n=!0,e=e.substr(o.index+a[0].length))}}while(n);if(!o)return null;var i=e.substr(o.index+o[0].length);if(i.length===0||!P.test(i[0]))return A(o[0]);for(var l=0,s=0,u=1,c=["(","["],d=[")","]"],m=0,p=s,_=1;_<i.length;_++){var f=i[_];if(p===s){if(c.includes(f))m+=1,p=u;else if(P.test(f)||!N.test(f))l=_;else if(M.test(f))break}else if(c.includes(f))m+=1;else if(d.includes(f))m-=1,m===0&&(p=s,l=_);else if(w.test(f))break}return A(o[0]+i.substring(0,l+1))},j={compilePermissiveHostPathMatcher:D,permissiveHostPathMatch:q,permissiveMatch:B,permissiveMultiMatch:W,matchToPattern:U,multiMatchToPattern:V,matchHost:H,trigger:G,match:z,getPermissiveHostPathMatcherSource:O};a.exports=j}),null);
__d("MWPreloadableQueries",["I64","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){return o("ReQL").fromTableAscending(t.tables.thread_nullstate).getKeyRange(n)},u=function(t,n){return o("ReQL").fromTableAscending(t.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(n)},c=function(t,n){return o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange(n)},d=function(t,n){return o("ReQL").fromTableAscending(t.tables.community_folders).getKeyRange(n)},m=function(t,n){return o("ReQL").fromTableAscending(t.tables.thread_proactive_warning_settings).getKeyRange(n)},p=function(t,n){return o("ReQL").fromTableAscending(t.tables.in_thread_banner).getKeyRange(n)};function _(t,n){return o("ReQL").fromTableAscending(t.tables.media_staging).filter(function(t){return!t.isSent&&(e||(e=o("I64"))).equal(t.threadKey,n)})}l.threadNullStateQuery=s,l.threadNullStateCtaQuery=u,l.getCutoverThreadByThreadKey=c,l.getCommunityFolderQuery=d,l.getProactiveWarningsForThreadQuery=m,l.getThreadBannerQuery=p,l.getMediaStagingQuery=_}),98);
__d("MAWThreadMappingQPL",["I64","JSResourceForInteraction","LSIntEnum","MAWLoggerUtils","MAWMiActMappingTableAPI","MAWQplProxy","MAWThreadLoadingState","QPLUserFlow","Random","ReQL","WAJids","promiseDone","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=["instanceKey","s2sInstanceKey"],s=["instanceKey","s2sInstanceKey"],u,c,d=new Map,m=new Set;function p(e){m.add(e)}function _(e,t){return m.has(t)?o("MAWThreadLoadingState").isActReady(e)&&o("MAWThreadLoadingState").isMiOptimistic(e):!1}var f=r("JSResourceForInteraction")("MAWWaitForBackendSetup").__setRef("MAWThreadMappingQPL"),g=r("qpl")._(1056836502,"2778"),h=r("qpl")._(25313175,"1551"),y=null;function C(e){return o("MAWLoggerUtils").getInstanceKeyFromId(e)}function b(e){return o("MAWLoggerUtils").getInstanceKeyFromId((u||(u=o("I64"))).to_string(e)+o("Random").random().toString())}function v(e,t,n){var r,a=d.get((u||(u=o("I64"))).to_string(e.jid));if(a!=null)return L("continue_thread_mapping_after_tpq",a),n!=null&&k({bool:babelHelpers.extends({},n)},a),d.delete((u||(u=o("I64"))).to_string(e.jid)),a;var i=(r=e.instanceKey)!=null?r:b(e.fbid),l=n!=null?n:{},s=l.hasMappingRowAlready,c=l.hasPlaceholderRowInserted,m=l.isExistingRowPlaceholder,p=l.isExpectedThreadMissingInLsdb,_=e.jid;return S({hasMappingRowAlready:s,hasPlaceholderRowInserted:c,instanceKey:i,isExistingRowPlaceholder:m,isExpectedThreadMissingInLsdb:p,jid:e.isGroupThread?o("WAJids").toGroupJid((u||(u=o("I64"))).to_string(_)):o("WAJids").toMsgrUserJid((u||(u=o("I64"))).to_string(_)),threadKey:e.fbid,trigger:t}),i}function S(t){var n=t.instanceKey,a=t.s2sInstanceKey,i=babelHelpers.objectWithoutPropertiesLoose(t,e);y=a,o("sendToSentQPLLogger").markSendToSentPoint(a,"thread_mapping_start",void 0,{string:{thread_state:t.threadState}}),r("QPLUserFlow").start(g,{annotations:A(i),instanceKey:n}),r("promiseDone")(f.load(),function(e){var t=e.runAfterBackendSetup;t(function(){return L("maw_backend_available",n)},"bulkMaybeCreateOrUpdateThread")})}function R(e){var t=e.instanceKey,n=e.s2sInstanceKey,r=babelHelpers.objectWithoutPropertiesLoose(e,s);o("MAWQplProxy").startQplUserFlow(g,A(r),{providedInstanceKey:t})}function L(e,t){r("QPLUserFlow").addPoint(g,e,{instanceKey:t}),y!=null&&r("QPLUserFlow").addPoint(h,"thread_mapping_"+e,{instanceKey:y})}function E(e,t){L("handle_existing_thread_fail",e);var n=t==null?"no_thread":"not_authoritative",r=t==null?void 0:(c||(c=o("LSIntEnum"))).toNumber(t.authorityLevel);k({int:{insufficientAuthorityLevel:r},string:{handleExistingThreadFailReason:n}},e)}function k(e,t){r("QPLUserFlow").addAnnotations(g,e,{instanceKey:t})}var I=async function(t,n,o){var e=t+"_start",a=t+"_end";r("QPLUserFlow").addPoint(g,e,{instanceKey:n});var i=await o();return r("QPLUserFlow").addPoint(g,a,{instanceKey:n}),i},T=function(t,n,r){return n==null?r():I(t,n,r)};function D(e,t){k({bool:{isResultVerified:!0},string:{finalActState:t.actState.toString(),finalMiState:t.miState.toString()}},e),o("sendToSentQPLLogger").markSendToSentPoint(y,"thread_mapping_end"),o("MAWThreadLoadingState").isReady(t)||_(t,e)?r("QPLUserFlow").endSuccess(g,{instanceKey:e}):$("thread_state_not_ready",e)}async function x(e){var t,n=e.instanceKey,r=e.intJid,a=e.tables,i=e.threadKey;if(i==null&&r==null){$("no_thread_key_nor_jid",n);return}var l=await F(a,{intJid:r,threadKey:i}),s=(t=l==null?void 0:l.serverThreadKey)!=null?t:i,u=s==null?null:await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.threads).getKeyRange(s));D(n,await o("MAWThreadLoadingState").getThreadLoadingStateForDbRows(u,l))}function $(e,t){o("sendToSentQPLLogger").markSendToSentPoint(y,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:e}}),r("QPLUserFlow").endFailure(g,e,{instanceKey:t})}function P(e,t){o("sendToSentQPLLogger").markSendToSentPoint(y,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:e.message}}),r("QPLUserFlow").endFailure(g,"error_thrown",{annotations:{string:{errorMessage:e.message}},instanceKey:t})}function N(e,t,n){o("MAWQplProxy").sendQPLFailThroughBridge(g,e,n,t)}function M(e,t){L(e,t),r("QPLUserFlow").endCancel(g,{instanceKey:t})}function w(e,t){o("MAWQplProxy").sendQPLCancelThroughBridge(g,void 0,{string:{cancelInWorkerReason:e}},t)}function A(e){var t=e.hasMappingRowAlready,n=e.hasPlaceholderRowInserted,r=e.isExistingRowPlaceholder,a=e.isExpectedThreadMissingInLsdb,i=e.jid,l=e.threadKey,s=e.threadState,c=e.trigger;return{bool:{hasMappingRowAlready:t,hasPlaceholderRowInserted:n,isExistingRowPlaceholder:r,isExpectedThreadMissingInLsdb:a},string:{initJid:i,initThreadKey:l==null?null:(u||(u=o("I64"))).to_string(l),initThreadState:s==null?void 0:s.toString(),trigger:c}}}async function F(e,t){var n=t.intJid,r=t.threadKey,a=await o("MAWMiActMappingTableAPI").getMappingRowForThreadKey(e,r);return a!=null?a:o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,n)}l.pendingThreadCreationOnServer=d,l.allowToSkipUpgradingOptimisticThreadInMI=p,l.getInstanceKeyForJidInWorker=C,l.getInstanceKeyForThreadKey=b,l.startOrContinueForMiActMappingParams=v,l.start=S,l.startInWorker=R,l.addPoint=L,l.handleExistingThreadFail=E,l.addAnnotations=k,l.measurePerformance=I,l.measurePerformanceForNullableInstanceKey=T,l.endForThreadState=D,l.end=x,l.endFailure=$,l.endFailureError=P,l.endFailureInWorker=N,l.endCancel=M,l.endCancelInWorker=w}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("qpl"))._(521476140,"378"),u=e._(521472542,"295"),c=e._(521484256,"3212"),d=e._(521473384,"31"),m=e._(521482085,"409"),p=e._(521485406,"272"),_=e._(521482763,"296"),f=e._(521484295,"1460"),g=e._(521482969,"1519"),h=e._(521479124,"1939"),y=e._(521474385,"263"),C=e._(521476098,"504"),b=e._(521482858,"1290"),v=e._(521473194,"1331"),S=e._(521471024,"2275");l.pinCodeChangeQplEvent=s,l.optOutQplEvent=u,l.resetBackupQplEvent=c,l.ebResetObserverQplEvent=d,l.backupSetupQplEvent=m,l.mobileOnboardingQplEvent=p,l.restoreQplEvent=_,l.restoreDeviceAuthQplEvent=f,l.messageRestoreQplEvent=g,l.restoreWithAutoRestoreConsentQplEvent=h,l.hsmFleetMigrationQplEvent=y,l.virtualDeviceRevocationQplEvent=C,l.onboardingAuthQplEvent=b,l.processBackupIdsQPLEvent=v,l.fetchBackupIdsQPLEvent=S}),98);
__d("MWEncryptedBackupsDeviceRegistrationId",["FBLogger","MessengerWebInitData"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MessengerWebInitData").sessionId;return e==null?(r("FBLogger")("wmi_eb").mustfix("PAKE: Failed to get registration id from MessengerWebInitData"),""):e}l.getDeviceRegistrationId=e}),98);
__d("MWEncryptedBackupsSharedState",["FBLogger","ReQL","ReQLSuspense","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(e){var t=e.db,n=e.stateKey,r=e.stateValue,o=r===void 0?"true":r;return t.runInTransaction(function(e){return e.experiences_shared_state.upsert([n],{stateKey:n,stateValue:o})},"readwrite","background",void 0,i.id+":38")}function m(t){var n,a=t.db,i=t.stateKey;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l=(n=(e||(e=r("WebStorage"))).getLocalStorageForRead())==null?void 0:n.getItem(i);if(l!=null){var s;(s=(e||(e=r("WebStorage"))).getLocalStorage())==null||s.removeItem(i),r("promiseDone")(d({db:a,stateKey:i,stateValue:l}))}return l}}function p(e){var t=e.db,n=e.sharedStateTable,r=e.stateKey,o=n.filter(function(e){return e.stateKey===r});if(o.length===0){var a=m({db:t,stateKey:r});return a!=null}return!0}function _(e){var t=e.db,n=e.sharedStateTable,r=e.stateKey,o=n.filter(function(e){return e.stateKey===r}),a=o[0];return(a==null?void 0:a.stateValue)!=null?a.stateValue:m({db:t,stateKey:r})}function f(e){var t=e.db,n=e.sharedStateRow,r=e.stateKey;return n==null?m({db:t,stateKey:r}):n.stateValue}function g(e){var t=e.db,n=e.stateKey;return t.runInTransaction(function(e){return e.experiences_shared_state.delete(n)},"readwrite","background",void 0,i.id+":132")}function h(e){var t,n=o("react-compiler-runtime").c(6),a=(s||(s=r("useReStore")))(),l=(t=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(a.tables.experiences_shared_state).getKeyRange(e)},[a.tables.experiences_shared_state,e],i.id+":143"))==null?void 0:t.stateValue,u;n[0]!==a||n[1]!==e?(u=function(n){return d({db:a,stateKey:e,stateValue:n})},n[0]=a,n[1]=e,n[2]=u):u=n[2];var c=u,m;return n[3]!==c||n[4]!==l?(m=[l,c],n[3]=c,n[4]=l,n[5]=m):m=n[5],m}function y(e){var t=o("react-compiler-runtime").c(5),n=h(e),r=n[0],a=n[1],i;t[0]!==a?(i=function(){a("true")},t[0]=a,t[1]=i):i=t[1];var l=i,s=r==="true",u;return t[2]!==l||t[3]!==s?(u=[s,l],t[2]=l,t[3]=s,t[4]=u):u=t[4],u}function C(e,t){var n,a=o("react-compiler-runtime").c(10),i=(n=t==null?void 0:t.timestampFormat)!=null?n:"seconds",l=h(e),s=l[0],u=l[1],c=s!=null?parseInt(s,10):void 0,d;a[0]!==c||a[1]!==i?(d=c!=null?i==="seconds"?new Date(c*1e3):i==="milliseconds"?new Date(c):(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i)})():void 0,a[0]=c,a[1]=i,a[2]=d):d=a[2];var m=d,p;a[3]!==u||a[4]!==e||a[5]!==i?(p=function(n){var t=i==="seconds"?Math.round(n.getTime()/1e3):i==="milliseconds"?n.getTime():(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i)})();return u(t.toString()).catch(function(t){r("FBLogger")("messenger_web_trust").catching(t).warn("Failed to set timestamp in shared state for key %s",e)})},a[3]=u,a[4]=e,a[5]=i,a[6]=p):p=a[6];var _=p,f;return a[7]!==m||a[8]!==_?(f=[m,_],a[7]=m,a[8]=_,a[9]=f):f=a[9],f}l.upsertEBSharedStateEntry=d,l.getEntryPresentInLocalStorage=m,l.getIsEntryPresentInSharedState=p,l.getEntryValueFromSharedState=_,l.getEntryValue=f,l.deleteEntry=g,l.useEBSharedStateEntry=h,l.useEBSharedStateEntryBoolean=y,l.useEBSharedStateEntryTimestamp=C}),98);/*FB_PKG_DELIM*/
__d("LSMaxInt32",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_int32(2147483647);l.default=s}),98);
__d("CreateDerivedKeys",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i,l){var u=o("CryptoLogger").CryptoLogger("create_derived_keys");if(l.length<1||l.some(function(e){return(s||(s=o("I64"))).gt(e,r("LSMaxInt32"))}))return u.mustfix("Invalid key lengths for derive keys"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(void 0));var c=l.map((s||(s=o("I64"))).to_int32),d=l.map(s.to_int32).reduce(function(e,t){return e+t},0),m=function(t){for(var e=[],n=0,a=0,i=c.length;a<i;++a){var l=n+c[a];e.push(t.slice(n,l).buffer),n=l}return o("RetUtil").getNullableRetResult(r("LSVec").ofArray(e))};return o("XPlatReactCrypto").subtleImportKey("raw",i,"HKDF",!1,["deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t,name:"HKDF",salt:a!=null?a:new Uint8Array(10).buffer},e,d*8)}).then(function(e){var t=new Uint8Array(e);return m(t)}).catch(function(e){return u.catching(e).mustfix("Failed to create derived keys"),o("RetUtil").getNullableRetResult()})}l.CreateDerivedKeys=u}),98);
__d("EBDBConsistencyApi",["$InternalEnum","EBDB","FBLogger","I64","QPLUserFlow","ReQL","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],u=null;function c(){return u}async function d(t,n){try{var a=await o("EBDB").getEBDB(),l=BigInt((e||(e=o("I64"))).to_string(n));await a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:l,env:t}])},"EBDB - AddDevice",i.id+":54"),u=l}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on EBDB - AddDevice")}}function m(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)).then(function(e){return e==null?void 0:e.deviceId})}async function p(e,t,n){if(n!=null)return d(t,n);try{var o=await m(e);return o==null?void 0:d(t,o)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on fetching secure_encrypted_backups_client_state")}}async function _(e,t){r("QPLUserFlow").addPoint(t,"track_overprompting_start");try{var n=await o("EBDB").getEBDB(),a=!1;await n.runInTransaction(["device_state"],"readwrite",async function(t){var n=await t.stores.device_state.get(e);(n==null?void 0:n.deviceId)!=null&&(a=!0)},"EBDB - AddDevice",i.id+":107"),r("QPLUserFlow").addAnnotations(t,{bool:{overprompting:a}}),r("QPLUserFlow").addPoint(t,"track_overprompting_end")}catch(e){r("QPLUserFlow").addPoint(t,"track_overprompting_fail"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on track overpropting")}}var f=n("$InternalEnum")({Disabled:0,EbsmInconsistent:1,EbdbInconsistent:2,Enabled:3,Inconsistent:4});async function g(t){var n=await m(t),r=n!=null?BigInt((e||(e=o("I64"))).to_string(n)):null;return r==null&&u==null?f.Disabled:r==null&&u!=null?f.EbsmInconsistent:r!=null&&u==null?f.EbdbInconsistent:r===u?f.Enabled:f.Inconsistent}async function h(e,t,n,o){var a=1/r("justknobx")._("3914");if(!(Math.random()>=a)){var i=r("qpl")._(521471316,"2831");try{r("QPLUserFlow").start(i);var l=await g(e);o!=null&&r("QPLUserFlow").addAnnotations(i,o()),r("QPLUserFlow").endSuccess(i,{annotations:{int:{consistency:l,env:t,operation:n}}})}catch(e){r("QPLUserFlow").endFailure(i,"error"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on trackConsistency in %s",t)}}}async function y(){await o("EBDB").clearDeviceState(),u=null}var C;async function b(t,n){C!=null&&C(),await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.encrypted_backups)).then(function(e){e!=null&&((e==null?void 0:e.backupId)==null||(e==null?void 0:e.isUserOptedOut)===!0)&&y()}).catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDBApi: EBLS error on fetching data from encrypted_backups")}),C=t.tables.encrypted_backups.subscribe(function(e,t){t.operation!=="delete"&&(t.value.backupId==null||t.value.isUserOptedOut===!0)&&y()});var a=await o("EBDB").getEBDB(),l=await a.runInTransaction(["device_state"],"readonly",function(e){return e.stores.device_state.get(n)},"EBDB - readDeviceState",i.id+":250").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: fetching device_state")});if(u=v(l==null?void 0:l.deviceId),u==null){var s=await m(t);if(s==null)return;var c=BigInt((e||(e=o("I64"))).to_string(s));u=c,await a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:c,env:n}])},"EBDB - writeDeviceState",i.id+":272").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: write device_state")})}}function v(t){if(t!=null){if(typeof t=="bigint")return t;if(typeof t=="number")return BigInt(t);if(typeof t=="string")try{return BigInt(t)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing string as BigInt"),y();return}if(Array.isArray(t))try{return BigInt((e||(e=o("I64"))).to_string(t))}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing I64 as BigInt"),y();return}r("FBLogger")("wmi_eb").mustfix("EBDBApi: Parsing unknown as BigInt %s",String(t)),y()}}l.EB_STORES=s,l.getDeviceId=c,l.addNewDevice=p,l.trackOverprompting=_,l.EBConsistencyResult=f,l.checkRegistrationConsistency=g,l.trackConsistency=h,l.clearDeviceState=y,l.startListeningDeviceRegistrations=b}),98);
__d("EBEncryptMessageTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}function c(e){return e}function d(e){return e}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}function g(e){return e}function h(e){return e}function y(e){return e}i.unsafeCastToAAD=e,i.unsafeCastToSecretKey=l,i.unsafeCastToPlaintext=s,i.unsafeCastToCiphertext=u,i.unsafeCastToMsgData=c,i.unsafeCastToMacKey=d,i.unsafeCastToHmac=m,i.unsafeCastToEBCreateDerivedKeysIkm=p,i.unsafeCastToEBCreateDerivedKeysInfo=_,i.unsafeCastToEBCreateDerivedKeysSalt=f,i.unsafeCastToEBCreateDerivedKeyLength=g,i.unsafeCastToEBDerivedKey=h,i.castEBDerivedKeyToArrayBuffer=y}),66);
__d("EBMainThreadEBDBApiDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBMainThreadEBDBApi").__setRef("EBMainThreadEBDBApiDeferred");function s(){return e.load().then(function(e){return e.startListeningDeviceRegistrations()})}function u(t){return e.load().then(function(e){return e.trackOverprompting(t)})}function c(t){return e.load().then(function(e){return e.addNewDevice(t)})}function d(){return e.load().then(function(e){return e.getEBDBDump()})}function m(t,n){return e.load().then(function(e){return e.trackConsistency(t,n)})}l.startListeningDeviceRegistrations=s,l.trackOverprompting=u,l.addNewDevice=c,l.getEBDBDump=d,l.trackConsistency=m}),98);
__d("EBSMAPI",["EBDeps"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return e!=null||(e=o("EBDeps").getDeps().getEBSMAPI()),e}var u={addDeviceWithEBKeys:async function(){var e;return(e=await s()).addDeviceWithEBKeys.apply(e,arguments)},addDeviceWithRecoveryCode:async function(){var e;return(e=await s()).addDeviceWithRecoveryCode.apply(e,arguments)},addVirtualDevice:async function(){var e;return(e=await s()).addVirtualDevice.apply(e,arguments)},deleteBackupsOnClient:async function(){var e;return(e=await s()).deleteBackupsOnClient.apply(e,arguments)},deleteEncryptedBackup:async function(){var e;return(e=await s()).deleteEncryptedBackup.apply(e,arguments)},ebOptOut:async function(){var e;return(e=await s()).ebOptOut.apply(e,arguments)},fetchBackupIds:async function(){var e;return(e=await s()).fetchBackupIds.apply(e,arguments)},generateRecoveryCode:async function(){var e;return(e=await s()).generateRecoveryCode.apply(e,arguments)},getEBState:async function(){return(await s()).getEBState()},getLSVirtualDevices:async function(t){return(await s()).getLSVirtualDevices(t)},initializeBackup:async function(){var e;return(e=await s()).initializeBackup.apply(e,arguments)},isEbEnabled:async function(){var e;return(e=await s()).isEbEnabled.apply(e,arguments)},optOutOfBackup:function(){return Promise.resolve()},otcAddDevice:async function(){var e;return(e=await s()).otcAddDevice.apply(e,arguments)},repairEpochs:async function(){return(await s()).repairEpochs()},revokeVirtualDevice:async function(){var e;return(e=await s()).revokeVirtualDevice.apply(e,arguments)},syncEpochs:async function(){return(await s()).syncEpochs()}},c=u;l.default=c}),98);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(t,n,r,o,a,i){"use strict";var e=16,l=28,s=16,u=128;i.hChaCha20SubKeyNonceLengthInBytes=e,i.totalNonceLengthInBytes=l,i.aesGcmTagLengthInBytes=s,i.aesGcmTagLength=u}),66);
__d("HChaCha20",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}e.fromHexString=function(t){var e=t.match(/[A-Fa-f0-9]{1,2}/g);if(t.length===0||t.length%2!==0||e==null)throw r("err")('The string "'+t+'" is not valid hex.');return new Uint8Array(e.map(function(e){return parseInt(e,16)}))},e.bufferToUint32Array=function(t){for(var e=new DataView(t),n=[],r=t.byteLength/4,o=0;o<r;o++)n.push(new DataView(e.buffer.slice(o*4,o*4+4)).getInt32(0));return Uint32Array.from(n)},e.rotate=function(t,n){var e=t&4294967295,r=n&31;return(e<<r|e>>>32-r)>>>0},e.quarterRound=function(n,r,o,a){var t=n,i=r,l=o,s=a;return t=t+i&4294967295,s=e.rotate(s^t,16),l=l+s&4294967295,i=e.rotate(i^l,12),t=t+i&4294967295,s=e.rotate(s^t,8),l=l+s&4294967295,i=e.rotate(i^l,7),[t>>>0,i>>>0,l>>>0,s>>>0]};var t=e.prototype;return t.createHCtx=function(n,o){var t=new Uint32Array(16),a=e.fromHexString("657870616e642033322d62797465206b");if(a.byteLength!==16)throw r("err")("Could not create context. Invalid constant buffer length of "+a.byteLength+". Expected a length of 16");if(n.byteLength!==32)throw r("err")("Could not create context. Invalid key buffer length of "+n.byteLength+". Expected a length of 32");if(o.byteLength!==16)throw r("err")("Could not create context. Invalid nonce buffer length of "+o.byteLength+". Expected a length of 16");var i=e.bufferToUint32Array(a.buffer),l=e.bufferToUint32Array(n),s=e.bufferToUint32Array(o);return t.set(i),t.set(l,i.length),t.set(s,i.length+l.length),t.buffer},t.hChaCha20Bytes=function(n,r){for(var t=new DataView(this.createHCtx(r,n)),o=t.getInt32(0),a=t.getInt32(4),i=t.getInt32(8),l=t.getInt32(12),s=t.getInt32(16),u=t.getInt32(20),c=t.getInt32(24),d=t.getInt32(28),m=t.getInt32(32),p=t.getInt32(36),_=t.getInt32(40),f=t.getInt32(44),g=t.getInt32(48),h=t.getInt32(52),y=t.getInt32(56),C=t.getInt32(60),b=0;b<10;b++){var v=e.quarterRound(o,s,m,g);o=v[0],s=v[1],m=v[2],g=v[3];var S=e.quarterRound(a,u,p,h);a=S[0],u=S[1],p=S[2],h=S[3];var R=e.quarterRound(i,c,_,y);i=R[0],c=R[1],_=R[2],y=R[3];var L=e.quarterRound(l,d,f,C);l=L[0],d=L[1],f=L[2],C=L[3];var E=e.quarterRound(o,u,_,C);o=E[0],u=E[1],_=E[2],C=E[3];var k=e.quarterRound(a,c,f,g);a=k[0],c=k[1],f=k[2],g=k[3];var I=e.quarterRound(i,d,m,h);i=I[0],d=I[1],m=I[2],h=I[3];var T=e.quarterRound(l,s,p,y);l=T[0],s=T[1],p=T[2],y=T[3]}return Uint32Array.from([o,a,i,l,g,h,y,C]).buffer},e})();l.HChaCha20=e}),98);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(o,a,i){var t=Array.from(new Uint8Array(i)),l=t.map(function(e){return e.toString(16).padStart(2,"0")}),s=l.join("").toUpperCase();return(e||(e=n("Promise"))).resolve(r("LSResult")(s))};s.__nop_name__="LSBinaryToHex",l.default=s}),98);
__d("LSCreateDerivedKeys.nop",["CreateDerivedKeys","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l,s){return o("CreateDerivedKeys").CreateDerivedKeys(a,i,l,r("LSVec").toArray(s))};e.__nop_name__="LSCreateDerivedKeys",l.default=e}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new Uint8Array(e)}function s(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder;return t.encode(e)}function u(e){var t=new(o("XPlatReactTextDecoder")).TextDecoder;return t.decode(e)}function c(e){return u(new Uint8Array(e))}function d(e){return s(e).buffer}function m(e,t){var n=e.byteLength,o=t.byteLength;if(n!==o)throw r("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",n,o);var a=new Uint8Array(n);return new Uint8Array(n).reduceRight(function(n,r,o){var i=e[o],l=t[o],s=i+l+n,u=s>255?[s-256,1]:[s,0];return a[o]=u[0],u[1]},0),a}l.bufToUint8=e,l.strToUint8=s,l.uint8ToStr=u,l.bufToStr=c,l.strToBuf=d,l.modAddBytes=m}),98);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","XPlatReactTextEncoder","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){var e=new(o("XPlatReactTextEncoder")).TextEncoder;try{var i=e.encode(a).buffer;return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(i))}catch(e){var l=r("getErrorSafe")(e),s=o("CryptoLogger").CryptoLogger("get_blob_from_string");throw s.catching(l).mustfix(l.message),l}};e.__nop_name__="LSGetBlobFromString",l.default=e}),98);
__d("LSLoadThreadPkFromThreadId",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadThreadPkFromThreadId] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.filter(t.db.table(173).fetch(),function(n){return t.i64.to_string(n.jid)===e[0]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,100])),r[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[13].set("error_message",""),o=[void 0,r[13]],r[2]=o[0],r[3]=o[1]):(n=l.item,a=[n.clientThreadPk,void 0],r[2]=a[0],r[3]=a[1])})},function(e){var o,a,i,l;return t.i64.neq(r[2],void 0)?(o=[r[2],r[3]],r[5]=o[0],r[6]=o[1]):(r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,7])),r[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[13].set("error_message",""),t.i64.neq(void 0,void 0)?(a=[void 0,r[13]],r[14]=a[0],r[15]=a[1]):(r[16]=new t.Map,r[16].set("error_code",t.i64.cast([0,100])),r[16].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[16].set("error_message",""),i=[void 0,r[16]],r[14]=i[0],r[15]=i[1]),l=[r[14],r[15]],r[5]=l[0],r[6]=l[1]),r[7]=t.i64.of_float(Date.now()),r[8]=t.i64.random(),r[10]="Finishing execution. Execution time: ",r[11]=t.i64.to_string(t.i64.sub(r[7],r[0])),r[12]=" ms",r[9]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadThreadPkFromThreadId] ",r[9],r[10],r[9],r[11],r[9],r[12]].join("")),t.i64.eq(t.i64.mod_(r[8],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[13]=",",r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadThreadPkFromThreadId",[r[10],r[13],r[11],r[13],r[12]].join(""),r[14],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[5],r[6]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure",e.__tables__=["mi_act_mapping_table"],a.exports=e}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop"),s=function(n,r,o,a,i,l,s,u){return e.load().then(function(e){return e.call(o,a,i,l,s,u)})};s.__nop_name__="LSLogWebQpl",l.default=s}),98);
__d("LSMEBTaskCreationSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,MEM_RECEIVE_PROTOBUF_ONLY_FBN:16,MEM_SEND_PROTOBUF_ONLY_FBN:17,MEM_PEER_SYNC_PROTOBUF_ONLY_FBN:18,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95,FILE_GALLERY_RESTORE:96});i.default=e}),66);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e<10)return 10-e;var t=Math.floor(Math.log2(e)),n=Math.floor(Math.log2(t))+1,r=t-n,o=(1<<r)-1,a=e+o&(o^-1);return a-e}function s(t){var n=Uint32Array.BYTES_PER_ELEMENT,r=t.byteLength,o=e(r),a=n+r+o,i=new DataView(new ArrayBuffer(a));i.setUint32(0,r);var l=new Uint8Array(i.buffer);return l.set(new Uint8Array(t),n),l.buffer}function u(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder,n=t.encode(e).buffer;return s(n)}function c(e){var t=Uint32Array.BYTES_PER_ELEMENT,n=new DataView(e);if(!(n.byteLength<t)){var r=e.byteLength,o=n.getUint32(0),a=r-t;if(o>=0&&o<=a)return e.slice(t,t+o)}}l.getPaddingLength=e,l.padData=s,l.pad=u,l.stripPadding=c}),98);
__d("SymmetricEncryptionCreateDecryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_data"),u=function(r,a,i){if(i.byteLength<o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes)return s.mustfix("cipher text is invalid"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult());var t=new Uint8Array(i),l=t.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),u=new(o("HChaCha20")).HChaCha20,c=t.slice(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer,d=u.hChaCha20Bytes(l.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",d,"AES-GCM",!1,["decrypt"]).then(function(e){return o("XPlatReactCrypto").subtleDecrypt({additionalData:a,iv:new Uint8Array(l.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,c)}).then(function(e){var t=o("SymmetricEncryptionPaddingUtils").stripPadding(e);return t==null&&s.mustfix("Failed to strip padding for symmetric decryption"),o("RetUtil").getNullableRetResult(t)}).catch(function(t){return o("CryptoLogger").captureError(s,t).mustfix("symmetric data decryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=u}),98);
__d("LSSymmetricEncryptionCreateDecryptedData.nop",["EBEncryptMessageTypes","SymmetricEncryptionCreateDecryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l){return r("SymmetricEncryptionCreateDecryptedData")(o("EBEncryptMessageTypes").unsafeCastToSecretKey(a),o("EBEncryptMessageTypes").unsafeCastToAAD(i),o("EBEncryptMessageTypes").unsafeCastToCiphertext(l))};e.__nop_name__="LSSymmetricEncryptionCreateDecryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateDecryptedString.nop",["Base64Utils","CryptoLogger","LSResult","LSSymmetricEncryptionCreateDecryptedData.nop","XPlatReactTextDecoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSResult")(e)}var s=function(n,a,i,l,s){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_string"),u=o("Base64Utils").toArrayBuffer(s);return r("LSSymmetricEncryptionCreateDecryptedData.nop")(n,a,i,l,u).then(function(e){var t=e[0];return t}).then(function(t){return t==null?e():e(new(o("XPlatReactTextDecoder")).TextDecoder().decode(t))}).catch(function(n){return o("CryptoLogger").captureError(t,n).mustfix("symmetric string decryption failed"),e()})};s.__nop_name__="LSSymmetricEncryptionCreateDecryptedString",l.default=s}),98);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().sendAndReceive("backend",t,a,i==null?void 0:i.isLoggingDisabled):new(e||(e=n("Promise")))(function(e,n){return r("ifRequireable")("MAWBridgeSendAndReceive",function(n){var r=n.sendAndReceive;return e(r("backend",t,a,i))},function(){return n("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function c(e,t,n){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().fireAndForget("backend",e,t,n):r("ifRequireable")("MAWBridgeFireAndForget",function(r){var o=r.fireAndForget;return o("backend",e,t,n)},function(){throw r("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}l.sendAndReceiveBackendWorkerAndUIShared=u,l.fireAndForgetBackendWorkerAndUIShared=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:c(t),tagLength:a*8};return r!=null&&(i.additionalData=c(r)),o("WACryptoDependencies").getCrypto().subtle.encrypt(i,await u(e),n)}async function s(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:c(t),tagLength:a*8};return r!=null&&(i.additionalData=c(r)),o("WACryptoDependencies").getCrypto().subtle.decrypt(i,await u(e),n)}function u(e){return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",e,"AES-GCM",!1,["encrypt","decrypt"])}function c(e){if(e instanceof Uint8Array)return e;if(typeof e=="string"){var t=new(o("WABinary")).Binary;return t.writeString(e),t.readByteArrayView()}return new Uint8Array(e)}l.gcmEncrypt=e,l.gcmDecrypt=s}),98);
__d("WATypedArraysCast",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t instanceof e?t:typeof t=="string"?new e(o("WABase64").decodeB64(t)):new e(t)}l.castTypedArrays=e}),98);
__d("WACryptoHmac",["WACryptoDependencies","WATypedArraysCast"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=new Uint8Array(e),u={name:"HMAC",hash:"SHA-256"},c={name:"HMAC",hash:"SHA-512"},d={name:"HMAC",hash:"SHA-1"};function m(e,t){var n=o("WATypedArraysCast").castTypedArrays(Uint8Array,t);return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",n,e,!1,["sign"]).then(function(t){return{key:t,algo:e}})}function p(e){return m(u,e)}function _(e,t,n){var r=e.key,a=e.algo;return o("WACryptoDependencies").getCrypto().subtle.sign(a,r,t).then(function(e){return n!=null&&n!==0?e.slice(0,n):e})}function f(e,t){return m(u,e!=null?e:s).then(function(e){return _(e,t)})}function g(e,t,n){return m(u,e).then(function(e){return _(e,t,n)})}function h(e,t,n){return m(c,e).then(function(e){return _(e,t,n)})}function y(e,t,n){return m(d,e).then(function(e){return _(e,t,n)})}l.SHA256_BYTE_LENGTH=e,l.DEFAULT_SALT=s,l.encodeKeySha256=p,l.sign=_,l.extractSha256=f,l.hmacSha256=g,l.hmacSha512=h,l.hmacSha1=y}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=255*o("WACryptoHmac").SHA256_BYTE_LENGTH;function u(t,a,i){if(i<0||i>s)return(e||(e=n("Promise"))).reject(r("err")("HKDF::expand given bad length "+i));for(var l,u=Math.ceil(i/o("WACryptoHmac").SHA256_BYTE_LENGTH),c=o("WABinary").Binary.build(a).readByteArrayView(),d=new(o("WABinary")).Binary,m=o("WACryptoHmac").encodeKeySha256(t).then(function(e){return l=e,new Uint8Array(0)}),p=function(t){m=m.then(function(e){return o("WACryptoHmac").sign(l,o("WABinary").Binary.build(e,c,t).readByteArrayView())}).then(function(e){var t=new Uint8Array(e);return d.writeByteArray(t),t})},_=1;_<=u;_++)p(_);return m.then(function(){return d.readBuffer(i)})}function c(e,t,n){return o("WACryptoHmac").extractSha256(null,e).then(function(e){return u(new Uint8Array(e),t,n)})}function d(e,t,n,r){return o("WACryptoHmac").extractSha256(t,e).then(function(e){return u(new Uint8Array(e),n,r)})}l.expand=u,l.extractAndExpand=c,l.extractWithSaltAndExpand=d}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit",MESSAGE_EDIT:"Message Edit"}),s=32;function u(e){var t=e.messageSecret,n=e.stanzaId,r=e.parentMsgOriginalSender,a=e.modificationSender,i=e.modificationType,l=o("WABinary").Binary.build(n,r,a,i).readBuffer();return o("WACryptoHkdf").extractAndExpand(t instanceof ArrayBuffer?new Uint8Array(t):t,l,s)}l.UseCaseSecretModificationType=e,l.createUseCaseSecret=u}),98);
__d("MAWGroupPollsDualEncryptionUtils",["MAWDbPoll","WABase64","WAConsumerApplication.pb","WACryptoAesGcm","WACryptoSha256","WAResultOrError","WAUseCaseSecret","decodeProtobuf","encodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){if(e.encIv==null||e.encPayload==null)return o("WAResultOrError").makeError("invalid_poll_enc_value");var a=e.encIv,i=e.encPayload;try{var l=await o("WACryptoAesGcm").gcmDecrypt(t,a,i,n);return o("WAResultOrError").makeResult(l)}catch(e){return o("WAResultOrError").DEPRECATED_makeError("decryption_error",r("getErrorSafe")(e))}}async function s(e,t,n){try{var a=self.crypto.getRandomValues(new Uint8Array(12)),i=await o("WACryptoAesGcm").gcmEncrypt(t,a,e,n);return o("WAResultOrError").makeResult({encIv:a.buffer,encPayload:i})}catch(e){return o("WAResultOrError").DEPRECATED_makeError("encryption_error",r("getErrorSafe")(e))}}function u(e,t){var n=e+"\0"+t;return new TextEncoder().encode(n).buffer}async function c(e,t){var n=t.pollCreationMessageKey,r=t.pollCreationSenderJid,a=t.pollCreationStanzaId,i=t.pollUpdateSenderJid,l=t.pollUpdateStanzaId,c=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:n,modificationSender:i,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:r,stanzaId:a}),d=u(l,i),m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,e).readBuffer();return s(m,c,d)}async function d(t,n){var a=n.pollCreationMessageKey,i=n.pollCreationSenderJid,l=n.pollCreationStanzaId,s=n.pollUpdateSenderJid,c=n.pollUpdateStanzaId,d=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:a,modificationSender:s,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:i,stanzaId:l}),m=u(c,s),p=await e(t,d,m);if(!p.success)return p;try{return o("WAResultOrError").makeResult(o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,p.value))}catch(e){return o("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",r("getErrorSafe")(e))}}async function m(e,t){var n=t.pollCreationMessageKey,r=t.pollCreationSenderJid,a=t.pollCreationStanzaId,i=t.pollUpdateSenderJid,l=t.pollUpdateStanzaId,c=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:n,modificationSender:i,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:r,stanzaId:a}),d=u(l,i),m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,e).readBuffer();return s(m,c,d)}async function p(t,n){var a=n.pollCreationMessageKey,i=n.pollCreationSenderJid,l=n.pollCreationStanzaId,s=n.pollUpdateSenderJid,c=n.pollUpdateStanzaId,d=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:a,modificationSender:s,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:i,stanzaId:l}),m=u(c,s),p=await e(t,d,m);if(!p.success)return p;try{return o("WAResultOrError").makeResult(o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,p.value))}catch(e){return o("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",r("getErrorSafe")(e))}}async function _(e){var t=await o("WACryptoSha256").sha256(new TextEncoder("utf8").encode(e));return f(t)}function f(e){return o("MAWDbPoll").convertStringToOptionHash(o("WABase64").encodeB64(e))}l.encryptGroupPollVote=c,l.decryptGroupPollVote=d,l.encryptGroupPollAddOption=m,l.decryptGroupPollAddOption=p,l.getHashForOptionName=_,l.getBase64EncodedHash=f}),98);
__d("MAWMainTraceUtils",["LSRequestId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("LSRequestId").generate()}l.createTraceId=e}),98);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("13725")}function s(e){return u(e)!=null}function u(e){return e===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS:e===r("LSThreadMediaGalleryGroup").FILES_ONLY&&o("MAWMpsGating").isFileGalleryEBTaggingEnabled()?r("LSThreadMediaGalleryGroup").FILES_ONLY:void 0}l.isMediaGalleryEBTaggingRestoreEnabled=e,l.isMediaGalleryGroupSupportedForTaggedRestore=s,l.toMediaGalleryGroupForTaggedRestore=u}),98);
__d("MWChatEncryptedBackupsLogging",["MWEBODSCategory","MWEBODSEntityKey.enum","ODS","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.cancelEndPoint,n=e.event,o=e.instanceKey,a=e.source;a!=null&&r("QPLUserFlow").addAnnotations(n,{string:{source:a}},{instanceKey:o}),r("QPLUserFlow").addPoint(n,"cancel",{instanceKey:o}),r("QPLUserFlow").addAnnotations(n,{string:{cancel_end_point:t}},{instanceKey:o}),r("QPLUserFlow").endCancel(n,{instanceKey:o})}function u(e){var t=e.event,n=e.instanceKey,o=e.onClose,a=e.source;a!=null&&r("QPLUserFlow").addAnnotations(t,{string:{source:a}},{instanceKey:n}),s({cancelEndPoint:"dialog_x_button",event:t,instanceKey:n}),o()}function c(t){var n=t.annotations,a=t.event,i=t.instanceKey,l=t.odsEntityName;r("QPLUserFlow").addPoint(a,"success",{instanceKey:i}),r("QPLUserFlow").endSuccess(a,{annotations:n,instanceKey:i}),l&&(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),l,r("MWEBODSEntityKey.enum").SUCCESS)}function d(t){var n=t.annotations,a=t.errorName,i=t.event,l=t.instanceKey,s=t.odsEntityKey,u=t.odsEntityName;r("QPLUserFlow").addPoint(i,"failure",{instanceKey:l}),r("QPLUserFlow").endFailure(i,a,{annotations:n,instanceKey:l}),u&&(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),u,s!=null?s:r("MWEBODSEntityKey.enum").FAIL)}l.cancelFlow=s,l.closeDialogCancelFlow=u,l.endSuccess=c,l.endFailure=d}),98);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CurrentMessengerUser").getAppID(),l=i!=null?i.toString():"unknown",s=t+"."+l;(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),s,n,a!=null?a:1),e.bumpEntityKey(r("MWEBODSCategory"),t,n,a!=null?a:1)}l.markODSForEB=s}),98);
__d("MWEncryptedBackupsInitializeRestoreDeferred",["MWChatEncryptedBackupsQPLEvents","QPLUserFlow","WALogger","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MWEncryptedBackupsInitializeRestore").__setRef("MWEncryptedBackupsInitializeRestoreDeferred");function u(t){var n=t.db,a=t.onFailure,i=t.onSuccess;s.onReady(function(t){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_init_restore_sproc"),r("promiseDone")(t.initializeRestore(n),i,function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error initializing restore: ",""])),t),a==null||a("failed_to_initialize_restore")})})}l.encryptedBackupsInitializeRestoreDeferred=u}),98);
__d("MpsLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("mps",t)};l.MpsLogger=e}),98);
__d("WebMpsReverbWrites",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r,o,a,i){var l=[o,r,n];return i(async function(i){var s,u=await i.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",l);if(!(((s=u==null?void 0:u.timestampMs)!=null?s:0)>=a)){var c={messageId:e,payload:t,supplementalKey:n,threadId:o,timestampMs:a,topLevelMessageId:r};await i.stores.supplemental.bulkUpsert("[threadId+topLevelMessageId+supplementalKey]",[{item:c,selector:l}])}})}function l(e,t,n){var r=e.messageId,o=e.threadId;return n(async function(n){var a,i=await n.stores.message.getByIndex("[threadId+messageId]",[o,r]);if(!(i!=null&&!i.isTransportErrorPlaceholder)&&!(i!=null&&i.isTransportErrorPlaceholder&&t.isTransportErrorPlaceholder)){var l=await n.stores.deleted.getByIndex("[threadId+deletedMessageId]",[e.threadId,e.messageId]),s=babelHelpers.extends({},e,{debugFlags:t.debugFlags,expiryTimestampMs:t.expiryTimestampMs,isLocalOnlyMessage:t.isLocalOnly,isTransportErrorPlaceholder:t.isTransportErrorPlaceholder,timestampMs:(a=i==null?void 0:i.timestampMs)!=null?a:e.timestampMs});if(l)l.payload=s.payload,await n.stores.deleted.bulkPut([l]),i!=null&&(i.timestampMs=e.timestampMs,await n.stores.message.bulkPut([i]));else{var u=await n.stores.message.bulkUpsert("[threadId+messageId]",[{item:s,selector:[o,r]}]),c=u[0],d=await n.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[o,r]});d.length>0&&await n.stores.tags.bulkDelete(d.map(function(e){return e.pk})),t.tags.length>0&&await n.stores.tags.bulkAdd(t.tags.map(function(e){return{messageId:s.messageId,messagePk:c,tag:e,threadId:s.threadId,timestampMs:s.timestampMs}}))}}})}i.upsertSupplementalToReverb=e,i.upsertTopLevelToReverb=l}),66);
__d("WormMemoryDriver",["WAResolvable","WormStoreFunctions","err"],(function(t,n,r,o,a,i,l){"use strict";var e=0;function s(){return e+=1,e}function u(){e=0}var c=(function(){function e(e){this.$2={},this.$3=Promise.resolve(),this.$1=e;for(var t of Object.keys(e))this.$2[t]=new Map}var t=e.prototype;return t.getSchema=function(){return this.$1},t.getDbAlias=function(){},t.runInTransaction=function(t,n,r,a){var e=this,i=new(o("WAResolvable")).Resolvable;return this.$3=this.$3.then(async function(){var o={};for(var a of Object.keys(e.$1))o[a]=new Map(e.$2[a]);var l=t.reduce(function(t,n){var r;return babelHelpers.extends({},t,(r={},r[n]=new d(o[n],e.$1[n]),r))},{}),s={abort:function(){},commit:function(){return i.promise.then(function(){})},stores:l},u=await r(s);n==="readwrite"&&(e.$2=o),i.resolve(u)}).catch(function(e){i.reject(e)}),i.promise},t.close=function(){},t.init=function(t){return Promise.resolve({isNewDb:!0,isUpgraded:!1})},e})(),d=(function(){function e(e,t){var n=this;this.readIndexRange=function(e,t,o){var a=n.$2.indexes;if(a==null)throw r("err")("No indexes found");var i=a[e];if(i==null)throw r("err")("Index not found");var l=Array.from(n.$1.values());if(t!=null){var s,u,c,d;l=p(l,(s=(u=t.lessThan)!=null?u:t.lessThanOrEqual)!=null?s:t.only,t.lessThanOrEqual!=null||t.only!=null,(c=(d=t.greaterThan)!=null?d:t.greaterThanOrEqual)!=null?c:t.only,t.greaterThanOrEqual!=null||t.only!=null,i)}return Promise.resolve(n.$4(l,o,e))},this.$1=e,this.$2=t}var t=e.prototype;return t.bulkAdd=function(t){var e=this;for(var n of t){if(this.$2.autoIncrement===!0&&n[this.$2.primaryKey]===void 0&&(n[this.$2.primaryKey]=s()),this.$1.has(n[this.$2.primaryKey]))throw r("err")("Item with key already exists");this.$3(n),this.$1.set(n[this.$2.primaryKey],n)}return Promise.resolve(t.map(function(t){return t[e.$2.primaryKey]}))},t.bulkPut=function(t){for(var e of t)this.$3(e),this.$1.set(e[this.$2.primaryKey],e);return Promise.resolve()},t.$3=function(t){var e=this,n=this.$2.indexes;if(n!=null){for(var o of Object.values(n))if(!(typeof o!="object"||o==null)){var a=o.fields,i=o.unique;if(i!==!1){var l=a.map(function(e){return t[e]}).join(":"),s=function(o){if(o[e.$2.primaryKey]===t[e.$2.primaryKey])return 1;var n=a.map(function(e){return o[e]}).join(":");if(l===n)throw r("err")("ConstraintError")};for(var u of this.$1.values())s(u)}}}},t.bulkGet=function(t){var e=this;return Promise.resolve(t.map(function(t){return e.$1.get(t)}))},t.get=function(t){return Promise.resolve(this.$1.get(t))},t.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},t.readByKeyRange=function(t,n){var e,r,o=m(Array.from(this.$1.values()),(e=t.lessThan)!=null?e:t.lessThanOrEqual,t.lessThanOrEqual!=null,(r=t.greaterThan)!=null?r:t.greaterThanOrEqual,t.greaterThanOrEqual!=null,this.$2.primaryKey);return Promise.resolve(this.$4(o,n))},t.bulkDelete=function(t){for(var e of t)this.$1.delete(e);return Promise.resolve()},t.delete=function(t){return this.$1.delete(t),Promise.resolve()},t.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$2,t,n)},t.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},t.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$2,t,n,r,a)},t.$4=function(t,n,r){var e=t;return(n==null?void 0:n.filter)!=null&&(e=e.filter(n.filter)),(n==null?void 0:n.order)!=null&&r!=null&&(e=e.sort(function(e,t){var o=e[r],a=t[r];return o===a?0:n.order==="desc"?a>o?1:-1:o>a?1:-1})),(n==null?void 0:n.limit)!=null&&(e=e.slice(0,n.limit)),e},t.readIndex=function(t,n,o){var e=this.$2.indexes;if(e==null)throw r("err")("No indexes found");var a=e[t];if(a==null)throw r("err")("Index not found");var i=Array.from(this.$1.values());return n!=null&&(i=i.filter(function(e){for(var t=0;t<a.fields.length;t++)if(e[a.fields[t]]!==n[t])return!1;return!0})),Promise.resolve(this.$4(i,o,t))},t.readIndexAnyOf=function(t,n,o){var e=this.$2.indexes;if(e==null)throw r("err")("No indexes found");var a=e[t];if(a==null)throw r("err")("Index not found");if(n.length===0)return Promise.resolve([]);var i=Array.from(this.$1.values());return i=i.filter(function(e){return n.some(function(t){for(var n=0;n<a.fields.length;n++)if(t[n]!==void 0&&e[a.fields[n]]!==t[n])return!1;return!0})}),Promise.resolve(this.$4(i,o,t))},t.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},t.readAll=function(t){var e=this,n=Array.from(this.$1.values());return(t==null?void 0:t.filter)!=null&&(n=n.filter(t.filter)),(t==null?void 0:t.order)!=null&&(n=n.sort(function(n,r){var o=n[e.$2.primaryKey],a=r[e.$2.primaryKey];return o===a?0:t.order==="desc"?a>o?1:-1:o>a?1:-1})),(t==null?void 0:t.limit)!=null&&(n=n.slice(0,t.limit)),Promise.resolve(n)},t.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},t.clear=function(){return this.$1.clear(),Promise.resolve()},t.count=function(){return Promise.resolve(this.$1.size)},e})();function m(e,t,n,r,o,a){return e.filter(function(e){return!(r!=null&&r>e[a]||t!=null&&t<e[a]||t!=null&&n===!1&&e[a]===t||r!=null&&o===!1&&e[a]===r)})}function p(e,t,n,r,o,a){return e.filter(function(e){for(var i=0;i<a.fields.length;i++)if(r!=null&&r[i]>e[a.fields[i]]||t!=null&&t[i]<e[a.fields[i]]||i===a.fields.length-1&&(t!=null&&n===!1&&e[a.fields[i]]===t[i]||r!=null&&o===!1&&e[a.fields[i]]===r[i]))return!1;return!0})}l.TEST_ONLY_resetPK=u,l.WormMemoryDriver=c,l.WormMemoryStore=d}),98);
__d("WebReverbSchema",["FBLogger","MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[threadId+messageId]":{fields:["threadId","messageId"],unique:!0},"[threadId+timestampMs+messageId]":{fields:["threadId","timestampMs","messageId"],unique:!1},expiryTimestampMs:{fields:["expiryTimestampMs"],unique:!1},messageId:{fields:["messageId"],unique:!1},timestampMs:{fields:["timestampMs"],unique:!1}},nonEncryptedFields:["timestampMs","expiryTimestampMs","messageId","debugFlags"],primaryKey:"pk",secure:!0},s={autoIncrement:!0,indexes:{"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!0}},nonEncryptedFields:["topLevelMessageId"],primaryKey:"pk",secure:!0},u={autoIncrement:!0,indexes:{"[threadId+deletedMessageId]":{fields:["threadId","deletedMessageId"],unique:!0},"[threadId+timestampMs+deletedMessageId]":{fields:["threadId","timestampMs","deletedMessageId"],unique:!0},"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!1},deletionTimestampMs:{fields:["deletionTimestampMs"],unique:!1}},nonEncryptedFields:["topLevelMessageId","deletionTimestampMs"],primaryKey:"pk",secure:!0},c={autoIncrement:!0,indexes:{"[threadId+messageId+tag]":{fields:["threadId","messageId","tag"],unique:!0},"[threadId+tag+timestampMs]":{fields:["threadId","tag","timestampMs"],unique:!1}},nonEncryptedFields:["messageId","timestampMs","messagePk","tag"],primaryKey:"pk",secure:!0},d={autoIncrement:!1,indexes:{},primaryKey:"pk",secure:!0},m={dbMetadata:d,deleted:u,message:e,supplemental:s,tags:c};function p(e,t,n,a,i){var l=o("WAHex").parseHex(t),s="reverb",u=new(o("WormEAR")).WormEAR(m,s,l),c=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,m,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:a,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;r("FBLogger")("mps").mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),c.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),i);return c}function _(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver(m),e)}l.schema=m,l.makeWebReverbSchema=p,l.makeInMemoryReverbSchema_TEST_ONLY=_}),98);
__d("WebReverbDB",["MpsLogger","WAResolvable","WebReverbSchema","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;async function u(t,n,a,i,l){var u;try{var c=o("WebReverbSchema").makeWebReverbSchema(t,n,a,i,l);return e=c,u=await c.init(),s.resolve(c),u}catch(e){throw o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing WebReverb init"),e}}function c(){if(e==null)throw r("err")("Reverb DB is not initialized");return e}function d(){return s.promise}function m(e){return"WebReverb - "+e}l.makeWebReverb=u,l.getWebReverbDB=c,l.getDbPromise=d,l.mpsOp=m}),98);
__d("WebMpsMigrationReverbTxns",["FBLogger","MpsTypes","WebMpsReverbWrites","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return r("FBLogger")("mps").tags(["mps_migration"])};async function s(e,t){try{await o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(t){var n=function(n){return n(t)};return Promise.all(e.map(function(e){return u(e,n)}))},"mps-persist-messages-migrated-from-maw-db")}catch(e){throw t.endFail("reverb_write_failure"),e}}async function u(t,n){var r=[],a=[];r.push(o("WebMpsReverbWrites").upsertTopLevelToReverb(t.toplevelProtobuf,{actionType:o("MpsTypes").ActionType.UpsertTopLevel,debugFlags:["MAW_Migration"],isLocalOnly:!0,isTransportErrorPlaceholder:!1,tags:[],targetMessageId:t.toplevelProtobuf.messageId},n));for(var i of t.supplementalsToInsert.entries()){var l=i[0],s=i[1];r.push(o("WebMpsReverbWrites").upsertSupplementalToReverb(s.messageId,s.payload,l,t.toplevelProtobuf.messageId,t.toplevelProtobuf.threadId,s.timestampMs,n))}var u=await Promise.allSettled(r),c=u.filter(function(e){return e.status==="rejected"});for(var d of c)e().mustfix("Failed to upsert a row into Reverb: %s",d.reason);if(c.length>0)throw e().mustfixThrow("Reverb upsert failed");var m=async function(){var e=p[0],r=p[1];a.push(n(async function(n){var r=[t.toplevelProtobuf.threadId,t.toplevelProtobuf.messageId,e],o=await n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",r);o!=null&&await n.stores.supplemental.bulkDelete([o.pk])}))};for(var p of t.supplementalsToDelete.entries())await m();var _=await Promise.allSettled(a),f=_.filter(function(e){return e.status==="rejected"});for(var g of f)e().mustfix("Failed to delete a row from Reverb: %s",g.reason);if(f.length>0)throw e().mustfixThrow("Reverb delete failed")}function c(){return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readonly",function(e){return e.stores.dbMetadata.get("db-info")},"mps-get-db-metadata")}function d(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",async function(t){await t.stores.dbMetadata.bulkAdd([babelHelpers.extends({},e,{pk:"db-info"})])},"mps-set-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}function m(t,n){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",async function(n){var r,o,a,i,l=await n.stores.dbMetadata.get("db-info");if(l==null)throw e().mustfixThrow("DB Metadata row does not exist, cannot update the cursor");var s=l,u=babelHelpers.extends({},s,{mawDBMigrationCurrentMessageId:(r=t.mawDBMigrationCurrentMessageId)!=null?r:s.mawDBMigrationCurrentMessageId,mawDBMigrationCurrentThread:(o=t.mawDBMigrationCurrentThread)!=null?o:s.mawDBMigrationCurrentThread,mawDBMigrationStartMs:(a=t.mawDBMigrationStartMs)!=null?a:s.mawDBMigrationStartMs,mawDBMigrationState:(i=t.mawDBMigrationState)!=null?i:s.mawDBMigrationState});await n.stores.dbMetadata.bulkPut([u])},"mps-update-db-metadata")}catch(e){throw n.endFail("migration_state_write_failure"),e}}l.persistMigratedMessagesFromMawDb=s,l.getMawMpsMigrationState=c,l.setInitialMawMpsMigrationState=d,l.setMawMpsMigrationState=m}),98);
__d("MpsReverbInit",["BrowserLockManager","MAWMpsMigrationStatus","MpsTypes","WebMpsMigrationReverbTxns","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";var e="wmi_mps_m4_non_migrated_status_lock",s="wmi_mps_new_db_status_lock",u;async function c(t){var n=await o("WebReverbDB").makeWebReverb(t.name,t.strEncKey,t.blockingErrorThreshold,t.onBlockingError,t.qplEvent),a=n.isNewDb,i;if(a)i=!0;else{var l=await o("WebMpsMigrationReverbTxns").getMawMpsMigrationState();i=(l==null?void 0:l.mawDBMigrationState)===o("MpsTypes").MawDBMigrationState.Completed}if(r("BrowserLockManager")==null){o("MAWMpsMigrationStatus").setStatus(i);return}var c=await r("BrowserLockManager").query(),d=c.held.some(function(e){return e.name===s});if(d){o("MAWMpsMigrationStatus").setStatus(!0);return}if(i===!0){var m=c.held.some(function(t){return t.name===e})||c.pending.some(function(t){return t.name===e});m?i=!1:a===!0&&(u=r("BrowserLockManager").request(s,function(){return new Promise(function(){})}))}i||(u=r("BrowserLockManager").request(e,function(){return new Promise(function(){})})),o("MAWMpsMigrationStatus").setStatus(i)}l.initReverb=c}),98);
__d("PakeCpaceUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function l(e,t){var n=new e.VectorInt;return t.forEach(function(e){n.push_back(e)}),n}i.typedArrayToBuffer=e,i.uint8ArrayToVectorInt=l}),66);
__d("UInt8Array",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.length;if(t>0&&t%2===0&&/^[\da-f]+$/gi.test(e)){for(var n=[],r=0,o=t/2|0;r<o;++r){var a=parseInt(e.substring(r<<1,(r<<1)+2|0),16);n.push(a)}return new Uint8Array(n)}}function s(e){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(e)).buffer}function u(e){var t=e.filter(function(e){return e.byteLength!==0}),n=t.reduce(function(e,t){return e+t.byteLength|0},0),r=new Uint8Array(n);return t.reduce(function(e,t){return r.set(t,e),e+t.byteLength|0},0),r}l.fromHexString=e,l.getBufferWithRandomValuesFromLength=s,l.concatBytes=u}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e,s={scalarbase:(e=o("tweetnacl")).lowlevel.scalarbase,crypto_hash:e.lowlevel.crypto_hash,modL:e.lowlevel.modL,pack25519:e.lowlevel.pack25519,S:e.lowlevel.S,M:e.lowlevel.M,A:e.lowlevel.A,Z:e.lowlevel.Z,D:e.lowlevel.D,unpack25519:e.lowlevel.unpack25519,pow2523:e.lowlevel.pow2523,crypto_verify_32:e.lowlevel.crypto_verify_32,set25519:e.lowlevel.set25519,add:e.lowlevel.add,scalarmult:e.lowlevel.scalarmult};l.hash=e.hash,l.scalarMult=e.scalarMult,l.verify=e.verify,l.secretbox=e.secretbox,l.lowlevel=s,l.keypairFromSecretKey=e.box.keyPair.fromSecretKey,l.keyPair=e.box.keyPair,l.signDetachedVerify=e.sign.detached.verify}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return u(new Uint8Array(e),new Uint8Array(t))}function s(e,t){var n=new TextDecoder;return n.decode(e).toLowerCase()===n.decode(t).toLowerCase()}function u(e,t){return e.length===0&&t.length===0||o("WACryptoPrimitives").verify(e,t)}function c(e,t){return e.length===0&&t.length===0||o("WACryptoPrimitives").verify(e,t)}function d(e,t){return e.length===0&&t.length===0||o("WACryptoPrimitives").verify(e,t)}function m(e){if(e!==(e|0))throw r("err")("bound must be int32");if(e<=0)throw r("err")("bound must not be positive");for(var t=new Int32Array(1),n=-1>>>1,a=e*Math.floor(n/e),i=-1;i===-1;){o("WACryptoDependencies").getCrypto().getRandomValues(t);var l=t[0]>>>1;l<a&&(i=l%e)}return i}l.arrayBuffersEqual=e,l.arrayBuffersEqualCaseInsensitive=s,l.uint8ArraysEqual=u,l.rawKeysEqual=c,l.serializedPubKeysEqual=d,l.randomNumberLessThan=m}),98);
__d("WADeepEquals",[],(function(t,n,r,o,a,i){"use strict";function e(t,n){if(t===n)return!0;if(!t||!n||typeof t!="object"&&typeof n!="object")return!1;var r=Array.isArray(t),o=Array.isArray(n);if(r!==o)return!1;var a=!0;if(r){var i=t.length;if(i!==n.length)return!1;for(var l=0;a&&l<i;l++)a=e(t[l],n[l]);return a}for(var s=Object.keys(t),u=0;a&&u<s.length;u++){var c=s[u];a=n.propertyIsEnumerable(c)&&e(t[c],n[c])}return a&&Object.keys(n).length===s.length}i.deepEqual=e}),66);
__d("WAPREList",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});i.PRE_METRIC=e}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=6e4,d=18e4,m=600*1e3,p=0;function _(){var t=[];function n(e){t.push(e)}function r(){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),t.length=0}function a(e){t.length===0&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),e.name,e.stage),t.forEach(function(t){t(e)})}return{subscribe:n,notify:a,clear:r}}var f=_(),g=f.notify,h=f.clear,y=f.subscribe,C;"FinalizationRegistry"in self&&"WeakRef"in self&&(C=new FinalizationRegistry(function(e){var t=e.event,n=e.eventFlow;if(n.isActive())try{o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),t)}catch(e){}}));var b=new Set([o("WAPREList").PRE_METRIC.SEND_MESSAGE,o("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function v(e,t,n,r){n==null&&p++;var o=n!=null?n:p,a="open";n==null?g({name:e,stage:"START",instanceKey:o,annotations:t,timeoutInMs:r}):g({name:e,stage:"RESUME",instanceKey:o,annotations:t});var i;function l(){if(i!=null){var e=i.deref();if(e!=null){var t;(t=C)==null||t.unregister(e)}}}var s={addPoint:function(n,r){g({name:e,stage:"POINT",reason:n,instanceKey:o,annotations:r})},addAnnotations:function(n){g({name:e,stage:"ANNOTATE",instanceKey:o,annotations:n})},endSuccess:function(n){g({name:e,stage:"SUCCESS",instanceKey:o,annotations:n}),a="closed",l()},endCancel:function(n){g({name:e,stage:"CANCEL",instanceKey:o,annotations:n}),l()},endFail:function(n,r){g({name:e,stage:"FAIL",reason:n,instanceKey:o,annotations:r}),a="closed",l()},getFlowDetails:function(){return{name:e,instanceKey:o}},isActive:function(){return a==="open"}};return C&&!b.has(e)&&n==null&&(C.register(s,{event:e,eventFlow:{endCancel:s.endCancel,isActive:s.isActive}}),i=new WeakRef(s)),s}l.QPL_DEFAULT_TIMEOUT_IN_MS=c,l.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=d,l.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=m,l.clear=h,l.subscribe=y,l.startMetric=v}),98);
__d("WAPromiseBackoffs",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){if(e===0)return 0;for(var n=g(t.algo),r=1;r<e;r++)n();return d(t,n())}function u(e){var t=e.relativeDelay,n=t===void 0?!1:t,r=null,o=g(e.algo);return function(){var t=r;if(t==null)return r=n?Date.now():0,0;var a=d(e,o());if(n){var i=Date.now(),l=i-t;l>0&&(a=Math.max(0,a-l)),r=i}return a}}function c(t){var r=u(t);return function(o){return new(e||(e=n("Promise")))(function(e){var t=r();t>0?setTimeout(e,t,o):e(o)})}}function d(e,t){var n=e.max,r=e.min,o=e.jitter,a=o===void 0?.1:o,i=t;return n!=null&&i>n&&(i=n),r!=null&&i<r&&(i=r),a!==0&&(i=Math.ceil(i*(1+a*Math.random()))),i}function m(e){var t=e.second-e.first,n=e.first-t;return function(){var e=t+n;return n=t,t=e,e}}function p(e){var t=e.base,n=t===void 0?2:t,r=e.first;return function(){var e=r;return r*=n,e}}function _(e){var t=e.delay;return function(){return t}}function f(e){var t=e.toMs,n=e.backoff,r=g(n);return function(){return t(r())}}function g(e){switch(e.type){case"fibonacci":return m(e);case"exponential":return p(e);case"constant":return _(e);case"adjust":return f(e);default:throw r("err")("makeTimeFunc unrecognized backoff "+e.type)}}l.getDelay=s,l.createTimer=u,l.createPromiseTimer=c}),98);
__d("WASortedLists",[],(function(t,n,r,o,a,i){"use strict";function e(){return[]}function l(){return[]}function s(e,t){return e.filter(t)}function u(e,t){return g(e.map(t))}function c(e,t){for(var n=e.length===t.length,r=0;n&&r<e.length;r++)e[r]!==t[r]&&(n=!1);return n}function d(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return e;return e.concat([t]).sort()}function m(e,t){if(e.length<t.length)return!1;for(var n=!0,r=0,o=0;n&&o<t.length;o++)do n=e[r]===t[o];while(!n&&++r<e.length);return n}function p(e,t){for(var n=[],r=0,o=0;r<e.length;r++){for(var a=e[r];o<t.length&&a>t[o];)o++;(o===t.length||a<t[o])&&n.push(a)}return n}function _(e,t){for(var n=[],r=0,o=0;r<e.length&&o<t.length;){var a=e[r],i=t[o];a<i?r++:(a===i&&(n.push(a),r++),o++)}return n}function f(e,t){for(var n=[],r=0,o=0;r<e.length&&o<t.length;)e[r]<t[o]?n.push(e[r++]):e[r]===t[o]?(n.push(e[r++]),o++):n.push(t[o++]);for(;r<e.length;)n.push(e[r++]);for(;o<t.length;)n.push(t[o++]);return n}function g(e){return h(e.slice().sort())}function h(e){for(var t=!1,n=0;n<e.length-1;n++)e[n]===e[n+1]&&(t=!0);if(!t)return e;for(var r=[],o=0;o<e.length-1;o++)e[o]!==e[o+1]&&r.push(e[o]);return r.push(e[e.length-1]),r}function y(e){return Array.from(e).sort()}function C(e){return e.slice().sort()}function b(e,t,n){for(var r=null,o=0;!r&&o<e.length;o++)e[o]===t&&(r=e.slice(),r[o]=n,r=h(r.sort()));return r||e}function v(e){return[e]}function S(e){return e.length<1}function R(e,t,n){return e.slice(t,n)}i.emptySet=e,i.emptyList=l,i.filter=s,i.map=u,i.areEqual=c,i.addToSet=d,i.contains=m,i.subtract=p,i.intersect=_,i.joinUniq=f,i.sortAndDedupe=g,i.asSortedSet=y,i.sort=C,i.swapIn=b,i.singleElement=v,i.isEmpty=S,i.slice=R}),66);
__d("WAWaitForComms",["WACommsConnectionState","WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAResolvable")).Resolvable;function s(){return e.promise}function u(){o("WACommsConnectionState").WACommsConnectionState.set(!1),e.isSettled&&(e=new(o("WAResolvable")).Resolvable)}function c(){o("WACommsConnectionState").WACommsConnectionState.set(!0),e.resolve()}function d(){return!e.resolveWasCalled()}function m(t){return e.reject(t)}l.waitForComms=s,l.commsConnectionLost=u,l.unblockComms=c,l.isStillWaitingForComms=d,l.failComms=m}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=12e4,s=new(o("WAResolvable")).Resolvable,u=o("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxTaskLimit:1,defaultSamplingRate:1e3,timeoutMs:e});function c(){s.resolveWasCalled()&&(s=new(o("WAResolvable")).Resolvable,d())}function d(){u.runTask({name:"offline-queue",fn:function(){return s.promise},priority:o("WorkerScheduler").BLOCKING_PRIORITY})}function m(){return s.promise}function p(){s.resolve()}function _(){return!s.resolveWasCalled()}l.maybeResetWaitForUserUnblocked=c,l.markOfflineQueueAsStarted=d,l.waitForUserUnblocked=m,l.unblockUser=p,l.isStillWaitingForUserUnblocked=_}),98);
__d("groupBy",[],(function(t,n,r,o,a,i){function e(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}i.default=e}),66);
__d("isE2EEConversationSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);
__d("isInstamadilloEB",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("670")===!0}l.default=e}),98);
__d("isMAWUniversalSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);/*FB_PKG_DELIM*/
__d("QPLFlow",["QPLUserFlow","Random"],(function(t,n,r,o,a,i,l){"use strict";var e=0,s="FinalizationRegistry"in self?new FinalizationRegistry(function(e){var t=e.notClosedEvent;t()}):null;function u(e,t){if(s!=null){var n=s,o=e.getQPLAttrs().instanceKey;n.register(e,{notClosedEvent:function(){r("QPLUserFlow").endFailure(t,"event-not-closed",{instanceKey:o})}})}}function c(e,t){var n=m(e,t);return n.start(t==null?void 0:t.annotations),n}function d(e,t){return m(e,t)}function m(t,n){var o,a=(o=n==null?void 0:n.instanceKey)!=null?o:e++,i=n==null?void 0:n.timeoutInMs,l=!1,c={addAnnotations:function(n){r("QPLUserFlow").addAnnotations(t,n,{instanceKey:a})},addPoint:function(n,o){r("QPLUserFlow").addPoint(t,n,{instanceKey:a}),o!=null&&t!=null&&r("QPLUserFlow").addAnnotations(t,o,{instanceKey:a})},endCancel:function(n,o){r("QPLUserFlow").endCancel(t,{annotations:o,cancelReason:n,instanceKey:a}),l=!1,s==null||s.unregister(c)},endFail:function(n,o){r("QPLUserFlow").endFailure(t,n,{annotations:o,instanceKey:a}),l=!1,s==null||s.unregister(c)},endSuccess:function(n){r("QPLUserFlow").endSuccess(t,{annotations:n,instanceKey:a}),l=!1,s==null||s.unregister(c)},getQPLAttrs:function(){return{instanceKey:a}},isActive:function(){return l},start:function(n){l=!0,r("QPLUserFlow").start(t,{annotations:n,instanceKey:a,timeoutInMs:i!=null?i:void 0}),u(c,t)}};return c}function p(){var e=!0;return{addAnnotations:function(t){},addPoint:function(t,n){},endCancel:function(t){},endFail:function(n,r){e=!1},endSuccess:function(n){e=!1},getQPLAttrs:function(){return{instanceKey:0}},isActive:function(){return e},start:function(t){}}}function _(e,t,n){return o("Random").coinflip(t)?c(e,n):p()}var f=(function(){function e(e,t){this.qplFlow=e,this.subspanName=t}var t=e.prototype;return t.start=function(t){this.qplFlow.addPoint(this.subspanName+"_start",t)},t.end=function(t){this.qplFlow.addPoint(this.subspanName+"_end",t)},t.endFail=function(t){var e,n=babelHelpers.extends({},t,{bool:babelHelpers.extends({},t==null?void 0:t.bool,(e={},e[this.subspanName+"_failed"]=!0,e))});this.end(n)},e.start=function(n,r){var t=new e(n,r);return t.start(),t},e.wrapInSubspan=async function(n,r,o){var t=e.start(n,r);try{var a=await o();return t.end(),a}catch(e){throw t.endFail(),e}},e})();l.startQPLFlow=c,l.continueQPLFlow=d,l.makeQplFlow=m,l.startNoopQPLFlow=p,l.startQplFlowWithCoinflip=_,l.QplSubspan=f}),98);
__d("WormDump",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return"redacted:"+String(e).length}async function u(e,t,n){var o=await t.runInTransaction(n,"readonly",function(t){return Promise.all(n.map(async function(n){var o=e[n],a=await t.stores[n].readAll({limit:o==null?void 0:o.limit,order:"desc"});return[n,a.map(function(e){var t={};return Object.keys(e).forEach(function(n){var a,i=o==null||(a=o.customFields)==null?void 0:a[n];if(i)try{t[n]=i(e[n])}catch(e){r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Failed to process special handling for DB dump")}else t[n]=s(e[n])}),t})]}))},"dump"),a={};return o.forEach(function(e){var t=e[0],n=e[1];a[t]=n}),a}l.wormNonSensitiveField=e,l.wormRedact=s,l.dump=u}),98);
__d("Worm",["FBLogger","QPLFlow","WormDump","WormReadOnlyStoreAccessor","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1e4,s=(function(){function t(e,t){this.$2=e,this.$1=t}var n=t.prototype;return n.init=function(t){return this.$2.init(t)},n.close=function(){this.$2.close()},n.store=function(t){return new(o("WormReadOnlyStoreAccessor")).ReadOnlyStoreAccessor(this.$2,t,this.$1)},n.dump=function(t){var e=Object.keys(this.$2.getSchema());return o("WormDump").dump(t,this,e)},n.runInTransaction=async function(n,a,i,l){var t=this.$1!=null?o("QPLFlow").startQPLFlow(this.$1,{annotations:{bool:{isReadonly:a==="readonly"},string:{dbAlias:this.$2.getDbAlias(),operationType:l}},timeoutInMs:e}):void 0;try{var s=await this.$2.runInTransaction(n,a,i,{eventFlow:t});return t==null||t.endSuccess(),s}catch(e){throw t==null||t.endFail("error"),r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Error performing %s",l),e}},t})();l.OP_TIMEOUT_MS=e,l.WormDatabase=s}),98);
__d("WormPromise",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=typeof self=="object"?self.Promise:typeof globalThis=="object"?globalThis.Promise:e||(e=n("Promise"));i.WormPromise=l}),66);
__d("WormRangeIterator",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=t.map(function(t){return e[t]});return n}function l(t,n,r,o){var a=t.at(0),i=t.at(-1);return{endCursor:i&&e(i,n),hasNext:r,hasPrevious:o,startCursor:a&&e(a,n)}}function s(e,t,n,r){var o=e.flatMap(function(e){return e.data}).sort(function(e,r){return u(e,r,t)*(n==="asc"?1:-1)}).slice(0,r+1),a=o.slice(0,r),i=o.length>r,s=e.some(function(e){return e.cursorInfo.hasPrevious}),c=l(a,t,i,s);return{cursorInfo:c,data:a}}function u(t,n,r){for(var o=e(t,r),a=e(n,r),i=0;i<o.length;i++)if(o[i]!==a[i]){var l=o[i]>a[i];return l?1:-1}return 0}i.makeCursor=e,i.makeCursorInfoFromList=l,i.mergeRanges=s}),66);
__d("WormStoreFunctions",["WormPromise","WormRangeIterator","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=[];return o("WormPromise").WormPromise.all(r.map(function(t){var r=t.selector;return e.getByIndex(n,r)})).then(function(n){var i=[],l=[];return n.forEach(function(e,n){var o=r[n].item;if(e){var s=babelHelpers.extends({},o),u=e[t.primaryKey];s[t.primaryKey]=u,i.push(s),a.push(u)}else l.push(o),a.push(null)}),o("WormPromise").WormPromise.all([e.bulkPut(i),e.bulkAdd(l).then(function(e){var t=0;a.forEach(function(n,r){n==null&&(a[r]=e[t++])})})])}).then(function(){return a.filter(Boolean)})}function s(e,t,n,r){return e.readIndex(t,n,babelHelpers.extends({},r,{limit:1})).then(function(e){var t;return(t=e[0])!=null?t:null})}var u=(function(){function e(e,t,n,r,o,a){this.query=e,this.indexName=n,this.storeSchema=t,this.order=r,this.filter=a,this.boundaries=o,(o==null?void 0:o.greaterThan)!=null?this.lowerBoundary={greaterThan:o.greaterThan}:(o==null?void 0:o.greaterThanOrEqual)!=null&&(this.lowerBoundary={greaterThanOrEqual:o.greaterThanOrEqual}),(o==null?void 0:o.lessThan)!=null?this.upperBoundary={lessThan:o.lessThan}:(o==null?void 0:o.lessThanOrEqual)!=null&&(this.upperBoundary={lessThanOrEqual:o.lessThanOrEqual})}var t=e.prototype;return t.read=async function(t,n){var e=this.order==="asc",a;t==null?a=this.boundaries:e?a=babelHelpers.extends({},this.upperBoundary,{greaterThan:t}):a=babelHelpers.extends({},this.lowerBoundary,{lessThan:t});var i=await this.query(a,{filter:this.filter,limit:n+1,order:this.order}),l,s=null;if(i.length<=n)l=i;else if(i.length===n+1)l=i.slice(0,n),s=i[n];else throw r("err")("unreachable");var u=o("WormRangeIterator").makeCursorInfoFromList(l,this.storeSchema.indexes[this.indexName].fields,s!=null,t!=null);return{cursorInfo:u,data:l}},e})();function c(e,t,n,o,a,i){var l=t.indexes;if(l==null)throw r("err")("No indexes found");var s=l[n];if(s==null)throw r("err")("Index not found");return new u(function(t,r){return e(n,t!=null?t:void 0,r)},t,n,o,a,i)}l.bulkUpsert=e,l.getByIndex=s,l.getIndexRangeIterator=c}),98);
__d("WormReadOnlyStoreAccessor",["FBLogger","QPLFlow","Worm","WormStoreFunctions","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.$4=async function(t,n){var e=this.$2+"."+n+"_inline",a=this.$3!=null?o("QPLFlow").startQPLFlow(this.$3,{annotations:{string:{operationType:e}},timeoutInMs:o("Worm").OP_TIMEOUT_MS}):void 0;try{var i=await this.$1.runInTransaction([this.$2],"readonly",t,{eventFlow:a});return a==null||a.endSuccess(),i}catch(t){a==null||a.endFail("error");var l=r("getErrorSafe")(t);throw r("FBLogger")("worm").catching(l).mustfix("Error performing %s",e),l}},t.bulkGet=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].bulkGet(t)},"bulkGet")},t.count=function(){var e=this;return this.$4(function(t){return t.stores[e.$2].count()},"count")},t.get=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].get(t)},"get")},t.getByIndex=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].getByIndex(t,n,r)},"getByIndex")},t.getIndexRangeIterator=function(t,n,r,a){var e=this;return o("WormStoreFunctions").getIndexRangeIterator(function(t,n,r){return e.$4(function(o){return o.stores[e.$2].readIndexRange(t,n,r)},"getIndexRangeIterator")},this.$1.getSchema()[this.$2],t,n,r,a)},t.readAll=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].readAll(t)},"readAll")},t.readByKeyRange=function(t,n){var e=this;return this.$4(function(r){return r.stores[e.$2].readByKeyRange(t,n)},"readByKeyRange")},t.readIndex=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndex(t,n,r)},"readIndex")},t.readIndexAnyOf=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndexAnyOf(t,n,r)},"readIndexAnyOf")},t.readIndexKeys=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndexKeys(t,n,r)},"readIndexKeys")},t.readIndexRange=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndexRange(t,n,r)},"readIndexRange")},t.readKeys=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].readKeys(t)},"readKeys")},t.readKeysByIndexRange=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readKeysByIndexRange(t,n,r)},"readKeysByIndexRange")},e})();l.ReadOnlyStoreAccessor=e}),98);
__d("WACryptoSha256",["WABase64","WACryptoDependencies"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-256"},e)}function s(t){return e(t).then(o("WABase64").encodeB64)}function u(e){return s(c(e))}function c(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t}l.sha256=e,l.sha256Base64=s,l.sha256Str=u}),98);
__d("WACryptoSha256Builder",["WABinary"],(function(t,n,r,o,a,i,l){"use strict";var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=64,u=4,c=(function(){function t(){this.h0=0,this.h1=0,this.h2=0,this.h3=0,this.h4=0,this.h5=0,this.h6=0,this.h7=0,this.tail=new Uint8Array(0),this.size=0,this.reset()}var n=t.prototype;return n.reset=function(){this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.tail=new Uint8Array(0),this.size=0},n.update=function(t){var e=new Uint8Array(this.tail.length+t.length);for(e.set(this.tail),e.set(t,this.tail.length),this.size+=t.length*8;e.length>=s;){var n=e.subarray(0,s);this.$1(n),e=e.slice(s)}return this.tail=e,this},n.$2=function(){var e=new Uint8Array(64);if(e.set(this.tail),e.set(new Uint8Array([128]),this.tail.length),this.tail.length+9>s){this.$1(e);var t=g(new Uint8Array(0),this.size);this.$1(t)}else{var n=g(e,this.size);this.$1(n)}},n.finish=function(){this.$2();var e=new(o("WABinary")).Binary;return e.writeUint32(this.h0),e.writeUint32(this.h1),e.writeUint32(this.h2),e.writeUint32(this.h3),e.writeUint32(this.h4),e.writeUint32(this.h5),e.writeUint32(this.h6),e.writeUint32(this.h7),this.reset(),e.readByteArrayView()},n.$1=function(n){for(var t=[],r=0;r<16;r++){var o=n.subarray(r*u,u*(r+1)),a=o[0]<<24|o[1]<<16|o[2]<<8|o[3];t.push(a)}for(var i=16;i<64;i++){var l=d(t[i-15]),s=m(t[i-2]),c=t[i-16]+(t[i-7]+l+s)>>>0;t.push(c)}for(var _=this.h0,f=this.h1,g=this.h2,h=this.h3,y=this.h4,C=this.h5,b=this.h6,v=this.h7,S=0;S<64;S++){var R=p(y,6)^p(y,11)^p(y,25),L=y&C^~y&b,E=p(_,2)^p(_,13)^p(_,22),k=_&f^_&g^f&g,I=v+R+L+e[S]+t[S],T=E+k;v=b,b=C,C=y,y=h+I>>>0,h=g,g=f,f=_,_=I+T>>>0}this.h0=this.h0+_>>>0,this.h1=this.h1+f>>>0,this.h2=this.h2+g>>>0,this.h3=this.h3+h>>>0,this.h4=this.h4+y>>>0,this.h5=this.h5+C>>>0,this.h6=this.h6+b>>>0,this.h7=this.h7+v>>>0},t})();function d(e){var t=p(e,7),n=p(e,18),r=_(e,3);return t^n^r}function m(e){var t=p(e,17),n=p(e,19),r=_(e,10);return t^n^r}function p(e,t){return e>>>t|e<<32-t}function _(e,t){return e>>>t}function f(e){return new Uint8Array(new Uint32Array([e]).buffer)}function g(e,t){var n=new Uint8Array(s);n.set(e);var r=f(t);return n.set(r.subarray(0,1),n.length-1),n.set(r.subarray(1,2),n.length-2),n.set(r.subarray(2,3),n.length-3),n.set(r.subarray(3,4),n.length-4),n.set(r.subarray(4,5),n.length-5),n.set(r.subarray(5,6),n.length-6),n.set(r.subarray(6,7),n.length-7),n.set(r.subarray(7,8),n.length-8),n}l.Sha256Builder=c,l.sigma0=d,l.sigma1=m,l.rotateRight=p,l.shiftRight=_}),98);
__d("WACryptoSha256HmacBuilder",["WACryptoSha256Builder"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=new(o("WACryptoSha256Builder")).Sha256Builder,this.$2=new Uint8Array(0),this.reset(e)}var t=e.prototype;return t.reset=function(t){this.$2=new Uint8Array(64),t.length>64?this.$2.set(new(o("WACryptoSha256Builder")).Sha256Builder().update(t).finish(),0):this.$2.set(t,0);var e=this.$2.map(function(e){return e^54});this.$1=new(o("WACryptoSha256Builder")).Sha256Builder().update(e)},t.update=function(t){return this.$1.update(t),this},t.finish=function(){var e=this.$2.map(function(e){return e^92}),t=this.$1.finish();return new(o("WACryptoSha256Builder")).Sha256Builder().update(e).update(t).finish()},e})();l.Sha256HMacBuilder=e}),98);
__d("WormEncoding",["msgpack-msgpack"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=new(o("msgpack-msgpack")).ExtensionCodec,t=0;e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)},encode:function(t){if(t instanceof ArrayBuffer)return o("msgpack-msgpack").encode(new Uint8Array(t))},type:t});var n=1;e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset))},encode:function(t){if(t instanceof Uint8Array)return o("msgpack-msgpack").encode(t)},type:n});var r=2;e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return BigInt(e)},encode:function(t){if(typeof t=="bigint")return o("msgpack-msgpack").encode(String(t))},type:r});var a=3;return e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return new Set(e)},encode:function(t){if(t instanceof Set)return o("msgpack-msgpack").encode(Array.from(t))},type:a}),{decode:function(n){return o("msgpack-msgpack").decode(n,{extensionCodec:e})},encode:function(n){return o("msgpack-msgpack").encode(n,{extensionCodec:e,ignoreUndefined:!0})}}}l.createEncoding=e}),98);
__d("WormIDbGetMinMaxKeySelector",[],(function(t,n,r,o,a,i){"use strict";var e=-1/0,l,s=function(){if(l!=null)return l;try{return IDBKeyRange.only([[]]),l=[[]],l}catch(t){var e="\uFFFF";return l=e,e}};i.MIN_KEY=e,i.getMaxSelector=s}),66);
__d("WormEAR",["FBLogger","WABinary","WACryptoDependencies","WACryptoSha256","WACryptoSha256HmacBuilder","WATimeUtils","WormEncoding","WormIDbGetMinMaxKeySelector","getErrorSafe","memoizeStringOnly","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e="_encryptedContent",s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="WormEAREncryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(e){function t(t,n,r){var o;return o=e.call(this,t)||this,o.name="WormEARDecryptionError",o.message=t,o.store=n,o.maybeHashedPk=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function c(e,t,n){if(typeof e=="number")return e;var r=t.encode(e),a=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(n)).update(r).finish();return a.buffer}var d=32,m=2,p=128,_=12,f=256,g=new Uint8Array(0).buffer,h="AES-GCM",y="HKDF",C="SHA-256",b=3600,v=24*b,S=0,R=v*30*6,L=(function(){function t(e,t,n,a){var i=this,l;this.$7=0,this.$9=!1,this.$10=!1,this.$11=r("memoizeStringOnly")(function(e){var t=i.$2[e].nonEncryptedFields;if(t!=null)return new Set(t)}),this.$2=e,this.$1=t,this.$8=(l=a==null?void 0:a.encKeyTtl)!=null?l:R,this.$3=o("WormEncoding").createEncoding(),this.$4=n,this.$6=crypto.subtle.importKey("raw",n,{name:h},!1,["encrypt","decrypt"]),this.$5=new Map}var n=t.prototype;return n.isSecureStore=function(t){return this.$2[t].secure!==!1},n.$12=async function(){return(await o("WACryptoSha256").sha256Base64(this.$4)).substring(0,5)},n.prepareNewKeyVersion=async function(){var e=o("WACryptoDependencies").getCrypto(),t=e.getRandomValues(new Uint8Array(d)).buffer,n=e.getRandomValues(new Uint8Array(d)).buffer,r=e.getRandomValues(new Uint8Array(_)),a=await this.$6,i=await e.subtle.encrypt({iv:r,name:h,tagLength:p},a,n);return{clientKey:t,expiration:o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+this.$8),keyHash:await this.$12(),salt:o("WABinary").Binary.build(r,i).readBuffer()}},n.init=async function(t,n,a){var e=this;this.$5=new Map,this.$7=0,this.$9=n.incorrectVersions,this.$10=n.versionsLoss;var i=o("WACryptoDependencies").getCrypto(),l=await this.$12(),s=!0;try{await Promise.all(t.map(function(t){s=s&&t.keyHash===l;var n=t.salt,r=n.slice(0,_),o=n.slice(_);return e.$6.then(function(e){return Promise.all([i.subtle.importKey("raw",t.clientKey,{name:y},!1,["deriveKey"]),i.subtle.decrypt({iv:new Uint8Array(r),name:h,tagLength:p},e,o)])}).then(function(e){var t=e[0],n=e[1];return i.subtle.deriveKey({hash:{name:C},info:g,name:y,salt:n},t,{length:f,name:h},!0,["encrypt","decrypt"])}).then(function(e){return i.subtle.exportKey("raw",e)}).then(function(n){e.$7=Math.max(e.$7,t.version),e.$5.set(t.version,n)})}))}catch(e){throw r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Error on keychain initialisation keyHashCheck: %s",s),e}finally{var u;a==null||(u=a.eventFlow)==null||u.addAnnotations({bool:{keyHashCheck:s}})}},n.$13=function(t){if(this.$7===0)throw new s("EAR.Encryption. EAR is not initialised ");var e=this.$5.get(this.$7);if(e==null)throw new s("EAR.Encryption.Key does not exist for version");var n=o("tweetnacl").randomBytes(o("tweetnacl").secretbox.nonceLength),r=o("tweetnacl").secretbox(t,n,new Uint8Array(e));return o("WABinary").Binary.build(S,this.$7,n,r).readBuffer()},n.$14=function(t,n,r){var e=t.slice(0,m),a=new DataView(e).getUint8(1),i=this.$5.get(a);if(i==null)throw new u("EAR.Decryption.Key does not exist for version: "+a+"; db: "+this.$1+"; store: "+n+"; incorrectVersions: "+this.$9.toString()+" versionsLoss: "+this.$10.toString(),n,r);var l=t.slice(m,m+o("tweetnacl").secretbox.nonceLength),s=t.slice(m+o("tweetnacl").secretbox.nonceLength),c=o("tweetnacl").secretbox.open(new Uint8Array(s),new Uint8Array(l),new Uint8Array(i));if(c==null)throw new u("EAR.Decryption. Unable to decrypt; db: "+this.$1+"; store: "+n+"; incorrectVersions: "+this.$9.toString()+" versionsLoss: "+this.$10.toString(),n,r);return c},n.encryptEntity=function(n,r){var t,o=this.$2[r],a=new Set;o.autoIncrement!==!0&&a.add(o.primaryKey);var i=o.indexes;if(i!=null)for(var l of Object.keys(i)){var s=i[l];for(var u of s.fields)a.add(u)}var d={};for(var m of a){var p;d[m]=(p=this.$11(r))!=null&&p.has(m)?n[m]:c(n[m],this.$3,this.$4)}return o.autoIncrement===!0&&n[o.primaryKey]!=null&&(d[o.primaryKey]=n[o.primaryKey]),babelHelpers.extends({},d,(t={},t[e]=this.$13(this.$3.encode(n)),t))},n.$15=function(n,o,a){if((n==null||typeof n!="object")&&r("FBLogger")("worm").mustfix("WORM.EAR: dbRecord is null or not object: %s, store: %s, reason %s",n,o,a),(n==null?void 0:n[e])!=null){var t=n[this.$2[o].primaryKey];return{encrypted:!0,encryptedEntity:n,pk:t}}else return{encrypted:!1,entity:n}},n.maybeDecrypt=function(n,r,o,a,i){if(n==null||this.isSecureStore(r)===!1)return n;var t=this.$15(n,r,o);if(!t.encrypted){if(i!=null&&i.shouldNotFailIfEntityIsNotEncrypted)return n;var l=n[this.$2[r].primaryKey];throw new u("EAR.Decryption. Attempt to decrypt malformed encrypted entity in  db: "+this.$1+", store: "+r+". Missing '"+e+"' property. Pk is "+(l==null?"empty":"not empty"),r,l)}a==null||a.addPoint("decrypt_start");var s=this.decryptEntity(t.encryptedEntity,r,t.pk);a==null||a.addPoint("decrypt_end");var c=this.$2[r];if(c.autoIncrement===!0){var d;return babelHelpers.extends({},s,(d={},d[c.primaryKey]=t.pk,d))}return s},n.maybeEncrypt=function(t,n,r){if(this.isSecureStore(n)===!1)return t;r==null||r.addPoint("encrypt_start");var e=this.encryptEntity(t,n);return r==null||r.addPoint("encrypt_end"),e},n.decryptEntity=function(n,r,o){return this.$3.decode(this.$14(n[e],r,o))},n.hashPk=function(t,n,r){var e;return(e=this.$11(t))!=null&&e.has(n)?r:c(r,this.$3,this.$4)},n.hashSelector=function(t,n,r){for(var e,a,i=[].concat(t),l=(e=(a=this.$2[n].indexes)==null||(a=a[r])==null?void 0:a.fields)!=null?e:[],s=0;s<i.length;s++){var u,d=i[s],m=l[s];d!==o("WormIDbGetMinMaxKeySelector").getMaxSelector()&&d!==-1/0&&((u=this.$11(n))!=null&&u.has(m)||(i[s]=c(d,this.$3,this.$4)))}return i},t})();l.ENCRYPTED_COLUMN_NAME=e,l.EncryptionError=s,l.DecryptionError=u,l.WormEAR=L}),98);
__d("WormIDbStore",["Promise","WormIDbGetMinMaxKeySelector","WormPromise","WormStoreFunctions","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){},u=(function(){function t(e,t,n,r,o){var a=this;this.readIndexRange=function(e,t,n){return t==null?a.$11(function(){return a.$1.index(e).openCursor(null,(n==null?void 0:n.order)==="desc"?"prev":"next")},n):a.$11(function(){return a.$1.index(e).openCursor(a.$12(t,e),(n==null?void 0:n.order)==="desc"?"prev":"next")},n)},this.$1=t.objectStore(e),this.$2=e,this.$3=r,this.$4=n,this.$5=o}var a=t.prototype;return a.$6=function(t,n){var e,r=(e=this.$4.eventFlow)!=null&&e.isActive()?this.$4.eventFlow:null;r==null||r.addPoint(n+"_start");var o=t();return r==null||r.addPoint(n+"_end"),o},a.$7=function(){return this.$3.isSecureStore(this.$2)},a.$8=function(t){var e=this;return this.$7()?this.$6(function(){return e.$3.hashPk(e.$2,e.$5.primaryKey,t)},"hashPk"):t},a.$9=function(t,n){var e=this;return!this.$7()||t==null?t:this.$6(function(){return e.$3.hashSelector(t,e.$2,n)},"hashSelector")},a.$10=function(t){var e=this;return new(o("WormPromise")).WormPromise(function(n,r){var o=t();o.onsuccess=function(){try{n(o.result.map(function(t){return e.$3.maybeDecrypt(t,e.$2,"readArray",e.$4.eventFlow)}))}catch(e){r(e)}},o.onerror=function(){return r(o.error)}})},a.$11=function(t,n){var e=this;return new(o("WormPromise")).WormPromise(function(r,o){var a,i=[],l=(n==null?void 0:n.limit)!=null,s=Math.max(0,(a=n==null?void 0:n.limit)!=null?a:0);if(l&&s===0){r(i);return}var u=t();u.onsuccess=function(){var t=u.result;if(t){var a;try{a=e.$3.maybeDecrypt(t.value,e.$2,"readCursor",e.$4.eventFlow)}catch(e){o(e);return}if((!(n!=null&&n.filter)||n.filter(a))&&i.push(a),l&&s===i.length){r(i);return}t.continue()}else r(i)},u.onerror=function(){return o(u.error)}})},a.bulkAdd=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o=t.$1.add(t.$3.maybeEncrypt(e,t.$2,t.$4.eventFlow));o.onsuccess=function(){t.$5.autoIncrement===!0?n(o.result):n(e[t.$5.primaryKey])},o.onerror=function(){return r(o.error)}})}))},a.bulkPut=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o,a=t.$1.put(t.$3.maybeEncrypt(e,t.$2,(o=t.$4.eventFlow)!=null?o:void 0));a.onsuccess=n,a.onerror=function(){return r(a.error)}})})).then(s)},a.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$5,t,n)},a.bulkGet=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o=t.$1.get(t.$8(e));o.onsuccess=function(){try{var e;n(t.$3.maybeDecrypt(o.result,t.$2,"bulkGet",(e=t.$4.eventFlow)!=null?e:void 0))}catch(e){r(e)}},o.onerror=function(){return r(o.error)}})}))},a.get=function(t){return this.bulkGet([t]).then(function(e){return e[0]})},a.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},a.readByKeyRange=function(t,n){var e=this;return t==null?this.$11(function(){return e.$1.openCursor(null,(n==null?void 0:n.order)==="desc"?"prev":"next")},n):this.$11(function(){return e.$1.openCursor(e.$12(t,e.$5.primaryKey),(n==null?void 0:n.order)==="desc"?"prev":"next")},n)},a.$13=function(t,n,a){if(this.$5.indexes==null)throw r("err")("No indexes found for store");var e=this.$5.indexes[t].fields;if(n.length===e.length)return n;var i=e.map(function(e,t){var r;return(r=n[t])!=null?r:a==="max"?o("WormIDbGetMinMaxKeySelector").getMaxSelector():o("WormIDbGetMinMaxKeySelector").MIN_KEY});return i},a.$12=function(t,n){var e,o,a=n===this.$5.primaryKey;if(t.only!=null){if(this.$5.indexes==null)throw r("err")("No indexes found for store");var i=this.$5.indexes[n].fields;return t.only.length===i.length?IDBKeyRange.only(this.$9(t.only,n)):IDBKeyRange.bound(a?this.$8(t.only):this.$9(this.$13(n,t.only,"min"),n),a?this.$8(t.only):this.$9(this.$13(n,t.only,"max"),n),!0,!0)}var l=(e=t.lessThan)!=null?e:t.lessThanOrEqual,s=(o=t.greaterThan)!=null?o:t.greaterThanOrEqual;if(l!=null)return s!=null?IDBKeyRange.bound(a?this.$8(s):this.$9(this.$13(n,s,"min"),n),a?this.$8(l):this.$9(this.$13(n,l,"max"),n),t.greaterThan!=null,t.lessThan!=null):IDBKeyRange.upperBound(a?this.$8(l):this.$9(this.$13(n,l,"max"),n),t.lessThan!=null);if(s!=null)return IDBKeyRange.lowerBound(a?this.$8(s):this.$9(this.$13(n,s,"min"),n),t.greaterThan!=null);throw r("err")("Invalid range")},a.readIndex=function(t,n,r){var e=this;return(r==null?void 0:r.filter)==null&&(r==null?void 0:r.order)!=="desc"?this.$10(function(){var o;return e.$1.index(t).getAll(e.$9(n,t),(o=r==null?void 0:r.limit)!=null?o:void 0)}):this.$11(function(){return e.$1.index(t).openCursor(e.$9(n,t),(r==null?void 0:r.order)==="desc"?"prev":"next")},r)},a.readIndexAnyOf=function(t,n,a){var e=this;return new(o("WormPromise")).WormPromise(function(i,l){var s,u;if(n.length===0){i([]);return}var c=(a==null?void 0:a.limit)!=null,d=Math.max(0,(s=a==null?void 0:a.limit)!=null?s:0);if(c&&d===0){i([]);return}var m=(u=e.$5.indexes)==null||(u=u[t])==null?void 0:u.fields;if(!m){l(r("err")("No index fields found"));return}var p=n.every(function(e){return Array.isArray(e)?e.length===m.length:!0});if(p){var _=n.map(function(n){return e.$10(function(){return e.$1.index(t).getAll(e.$9(n,t),c?d:void 0)})});o("WormPromise").WormPromise.all(_).then(function(e){var t=e.flat();a!=null&&a.filter&&(t=t.filter(a.filter)),i(t)}).catch(l)}else{var f=n.map(function(n){return e.readIndexRange(t,{only:n},a)});o("WormPromise").WormPromise.all(f).then(function(t){var n=t.flat(),r=new Set;n=n.filter(function(t){var n=t[e.$5.primaryKey];return r.has(n)?!1:(r.add(n),!0)}),i(n)}).catch(l)}})},a.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$5.primaryKey]})})},a.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$5.primaryKey]})})},a.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$5,t,n,r,a)},a.readAll=function(t){var e=this;return(t==null?void 0:t.filter)===null&&(t==null?void 0:t.order)!=="desc"?this.$10(function(){var n;return e.$1.getAll((n=t==null?void 0:t.limit)!=null?n:void 0)}):this.$11(function(){return e.$1.openCursor(null,(t==null?void 0:t.order)==="desc"?"prev":"next")},t)},a.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$5.primaryKey]})})},a.bulkDelete=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o=t.$1.delete(t.$8(e));o.onsuccess=n,o.onerror=function(){return r(o.error)}})})).then(s)},a.delete=function(t){var e=this;return new(o("WormPromise")).WormPromise(function(n,r){var o=e.$1.delete(e.$8(t));o.onsuccess=function(){return n()},o.onerror=function(){return r(o.error)}})},a.clear=function(){var e=this;return new(o("WormPromise")).WormPromise(function(t,n){var r=e.$1.clear();r.onsuccess=t,r.onerror=function(){return n(r.error)}}).then(s)},a.count=function(){var e=this;return new(o("WormPromise")).WormPromise(function(t,n){var r=e.$1.count();r.onsuccess=function(){return t(r.result)},r.onerror=function(){return n(r.error)}})},t})();l.WormIDbStore=u}),98);
__d("WormIDbTransaction",["WAResolvable","WormIDbStore"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){var t,n="WormUnknownError";return t=e.call(this,n)||this,t.name=n,t.message=n,t}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),s=(function(e){function t(){var t,n="WormUnknownAbortError";return t=e.call(this,n)||this,t.name=n,t.message=n,t}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(){function t(t,n,r,a,i){var l=this;this.$1=t,this.$2=new(o("WAResolvable")).Resolvable,this.$1.oncomplete=function(){l.$2.resolve()},this.$1.onerror=function(t){var n,r,o,a=(n=(r=(o=t.target)==null?void 0:o.error)!=null?r:l.$1.error)!=null?n:new e;l.$2.reject(a)},this.$1.onabort=function(e){var t,n,r,o=(t=(n=(r=e.target)==null?void 0:r.error)!=null?n:l.$1.error)!=null?t:new s;l.$2.reject(o)},this.$3=a.reduce(function(e,t){var a;return babelHelpers.extends({},e,(a={},a[t]=new(o("WormIDbStore")).WormIDbStore(t,l.$1,n,r,i[t]),a))},{})}var n=t.prototype;return n.commit=function(){var e,t;return(e=(t=this.$1).commit)==null||e.call(t),this.$2.promise},n.abort=function(){this.$2.isSettled||this.$1.abort()},babelHelpers.createClass(t,[{key:"stores",get:function(){return this.$3}}])})();l.WormIDbTransaction=u}),98);
__d("WormIDbTypes",[],(function(t,n,r,o,a,i){"use strict";var e="_worm_db_version_",l="_worm_ear_",s="schema_hash",u="creation_ts",c={indexes:{},primaryKey:"key"},d={indexes:{},primaryKey:"version"},m={_worm_db_version_:c,_worm_ear_:d};i.DB_VERSION_STORE=e,i.EAR_STORE=l,i.SCHEMA_HASH_KEY=s,i.DB_CREATION_TS=u,i.sysSchema=m}),66);
__d("WAIDBTypes",[],(function(t,n,r,o,a,i){"use strict";function e(){return indexedDB}i.idb=e}),66);
__d("WormIDbUtils",["Promise","WAIDBTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return new(e||(e=n("Promise")))(function(e,n){t.onsuccess=function(){return e(t.result)},t.onerror=function(){return n(t.error)}})}function u(t,a,i){var l=a.onBecomeStale,s=a.onClose,u=a.onError,c=a.onUpgrade;return new(e||(e=n("Promise")))(function(e,n){var a=o("WAIDBTypes").idb().open(t,i);c!=null&&(a.onupgradeneeded=function(){if(a.transaction==null)throw r("err")("Transaction is null on upgradeneeded event");c(a.result,a.transaction)}),a.onsuccess=function(){var t=a.result;s!=null&&(t.onclose=s),t.onversionchange=function(){t.close(),l!=null&&l()},e(t)},a.onerror=function(){n(a.error),u!=null&&u(a.error)}})}l.promisifyIDbRequest=s,l.openIDb=u}),98);
__d("WormIDbUpgrade",["WATimeUtils","WormIDbTypes","WormIDbUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=[],o=[],a=new Map,i=Array.from(Object.keys(n)).map(function(e){return e.toString()}),l=new Set(i);for(var s of Object.keys(n))if(!e.objectStoreNames.contains(s))r.push(s);else{var u,c=n[s],d=(u=c.indexes)!=null?u:{},m=t.objectStore(s),p=m.indexNames,_=new Set(Object.keys(d)),f=[],g=[];for(var h of _)p.contains(h)?m.index(h).unique!==d[h].unique&&(f.push(h),g.push(h)):f.push(h);for(var y=0;y<p.length;y++){var C=p[y];_.has(C)||g.push(C)}(f.length>0||g.length>0)&&a.set(s,{indexesToCreate:f,indexesToDelete:g})}for(var b=0;b<e.objectStoreNames.length;b++){var v=e.objectStoreNames[b];l.has(v)||o.push(v)}return{storesToCreate:r,storesToDelete:o,storesToModify:a}}async function s(e,t){if(!e.objectStoreNames.contains(o("WormIDbTypes").DB_VERSION_STORE))return{isNewDb:!0,shouldUpgrade:!0};var n=e.transaction(o("WormIDbTypes").DB_VERSION_STORE,"readonly"),r=await o("WormIDbUtils").promisifyIDbRequest(n.objectStore(o("WormIDbTypes").DB_VERSION_STORE).get(o("WormIDbTypes").SCHEMA_HASH_KEY));return{isNewDb:!1,shouldUpgrade:(r==null?void 0:r.value)!==t}}function u(e,t,n){for(var r of n){var o=t[r],a=e.createObjectStore(r,{autoIncrement:!!o.autoIncrement,keyPath:o.primaryKey}),i=o.indexes;if(i!=null)for(var l of Object.keys(i)){var s=i[l];a.createIndex(l,s.fields.map(function(e){return e.toString()}),{unique:s.unique})}}}function c(t,n,r,a,i){var l=e(t,n,r),s=l.storesToCreate,c=l.storesToDelete,d=l.storesToModify;if(u(t,r,s),!i.onlyCreateNewStores){for(var m of c)i.safeToDeleteStores.has(m)&&t.deleteObjectStore(m);var p=function(){var e=f[0];_=f[1];var t=_.indexesToCreate,o=_.indexesToDelete;for(var a of o)n.objectStore(e).deleteIndex(a);var l=r[e].indexes;if(l==null)return 1;var s=!1;for(var u of t){var c=l[u];n.objectStore(e).createIndex(u,[].concat(c.fields),{unique:c.unique}),s=!0}if(s&&r[e].secure===!0&&i.maybeEar!=null){var d=e,m=i.maybeEar,p=n.objectStore(d).getAll();p.onsuccess=function(){var t=p.result;t.forEach(function(t){t!=null&&n.objectStore(e).put(m.maybeEncrypt(m.maybeDecrypt(t,d,"dbUpgrade",void 0,{shouldNotFailIfEntityIsNotEncrypted:!0}),d,void 0))})}}},_;for(var f of d)p();n.objectStore(o("WormIDbTypes").DB_VERSION_STORE).put({key:o("WormIDbTypes").SCHEMA_HASH_KEY,value:a}),i.isNewDbInstance&&n.objectStore(o("WormIDbTypes").DB_VERSION_STORE).put({key:o("WormIDbTypes").DB_CREATION_TS,value:o("WATimeUtils").performanceAbsoluteNow()})}}l.shouldUpgradeDb=s,l.createNewStores=u,l.upgradeDb=c}),98);
__d("WormIDbDriver",["FBLogger","WACryptoSha256","WAResolvable","WATimeUtils","WormIDbTransaction","WormIDbTypes","WormIDbUpgrade","WormIDbUtils","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o,a,i){var l=this,s,u,c;this.$5=null,this.$8=[],this.$13=function(){l.$12.log(l.$3+".error.db_stale")},this.$14=function(){l.$12.log(l.$3+".error.db_close")},this.$15=function(e){r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Unexpected error  %s",l.$3)},this.$2=e,this.$3=t,this.$4=n,this.$6=(s=i==null?void 0:i.safeToDeleteStores)!=null?s:new Set,this.$9=i==null?void 0:i.blockingErrorThreshold,this.$10=(u=i==null?void 0:i.onBlockingError)!=null?u:function(){},this.$11=(c=i==null?void 0:i.onTransactionError)!=null?c:function(){},this.$7=o,this.$12=a}var t=e.prototype;return t.getDbAlias=function(){return this.$3},t.getSchema=function(){return this.$4},t.$16=async function(t,n,a,i){if(this.$5!=null&&await this.$5.promise,this.$1==null)throw r("err")("IDB is not initialised: "+this.$3);var e=new(o("WormIDbTransaction")).WormIDbTransaction(this.$1.transaction(t.map(function(e){return e.toString()}),n,{durability:"relaxed"}),i,this.$7,t,this.$4),l;try{l=await a(e),await e.commit()}catch(t){throw e.abort(),t}return l},t.$17=function(t){var e,n,o;if(this.$9!=null){var a=this.$9,i=(e=(n=(o=t==null?void 0:t.name)!=null?o:t==null?void 0:t.message)!=null?n:t==null?void 0:t.toString())!=null?e:"unknown";if(this.$8.push(i),!(this.$8.length<Math.max(a,1))){var l=this.$8[this.$8.length-1],s=this.$8.every(function(e){return e===l})?l:"mixed";r("FBLogger")("worm").mustfix("Unrecoverable error (%s): %s",this.$3,s),this.$10(s),this.$8=[]}}},t.$18=async function(t,n,o,a){if(this.$1==null){var e,i;(e=a.eventFlow)==null||e.addPoint("db_reinit_start",{bool:{isDbNull:!0}}),await this.$19(),(i=a.eventFlow)==null||i.addPoint("db_reinit_end")}var l;try{l=await this.$16(t,n,o,a)}catch(e){var s=r("getErrorSafe")(e);if(s.name==="InvalidStateError"||s.name==="NotFoundError"||s.name==="UnknownError"){var u,c;(u=a.eventFlow)==null||u.addPoint("db_reinit_start",{bool:{isDbInvalid:!0}}),await this.$19({forceUpgrade:s.name==="NotFoundError"}),(c=a.eventFlow)==null||c.addPoint("db_reinit_end"),l=await this.$16(t,n,o,a)}else throw e}return l},t.runInTransaction=async function(t,n,o,a){var e;try{e=await this.$18(t,n,o,a),this.$8=[]}catch(e){var i=r("getErrorSafe")(e);throw this.$11(i),this.$17(i),e}return e},t.close=function(){var e;(e=this.$1)==null||e.close()},t.init=async function(t){var e;try{var n;e=await this.$19({eventFlow:(n=t==null?void 0:t.eventFlow)!=null?n:void 0})}catch(t){var o=r("getErrorSafe")(t);if((o==null?void 0:o.name)==="InvalidStateError")e=await this.$19();else throw t}return e},t.$20=function(t,n){var e=t.version;return t.close(),o("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$13,onClose:this.$14,onError:this.$15,onUpgrade:function(t,r){return o("WormIDbUpgrade").upgradeDb(t,r,o("WormIDbTypes").sysSchema,n,{isNewDbInstance:!1,maybeEar:null,onlyCreateNewStores:!0,safeToDeleteStores:new Set})}},e+1)},t.$19=async function(t){var e=this,n=!1;if(this.$5)return n=!0,this.$5.promise;this.$5=new(o("WAResolvable")).Resolvable;var a=!1;this.$1!=null&&(this.$1.close(),this.$1=null,a=!0);var i=!0;try{var l,s,u,c,d=babelHelpers.extends({},this.$4,o("WormIDbTypes").sysSchema),m=JSON.stringify(d);if(m==null)throw r("err")("DB schema cannot be serialized: "+this.$3);var p=await o("WACryptoSha256").sha256Str(m),_=null,f=await o("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$13,onClose:this.$14,onError:this.$15,onUpgrade:function(n,r){return _={isNewDb:!0,shouldUpgrade:!1},o("WormIDbUpgrade").upgradeDb(n,r,d,p,{isNewDbInstance:!0,maybeEar:null,onlyCreateNewStores:!1,safeToDeleteStores:e.$6})}});try{if(Object.keys(o("WormIDbTypes").sysSchema).some(function(e){return f.objectStoreNames.contains(e)===!1})){var g,h;t==null||(g=t.eventFlow)==null||g.addPoint("ear_schema_recovery_start"),f=await this.$20(f,p),t==null||(h=t.eventFlow)==null||h.addPoint("ear_schema_recovery_end")}}catch(e){var y;t==null||(y=t.eventFlow)==null||y.addPoint("ear_schema_recovery_fail"),r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("EAR initialization error")}this.$1=f,t==null||(l=t.eventFlow)==null||l.addPoint("ear_init_start");try{var C,b,v;await this.$21((C=(b=_)==null?void 0:b.isNewDb)!=null?C:!1,{eventFlow:(v=t==null?void 0:t.eventFlow)!=null?v:void 0})}catch(e){var S;throw t==null||(S=t.eventFlow)==null||S.addPoint("ear_init_err"),r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("EAR initialization error"),e}t==null||(s=t.eventFlow)==null||s.addPoint("ear_init_end");var R=_!=null?_:await o("WormIDbUpgrade").shouldUpgradeDb(f,p);if(i=R.shouldUpgrade||((u=t==null?void 0:t.forceUpgrade)!=null?u:!1),i){this.$1=null;var L=f.version;f.close(),this.$1=await o("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$13,onClose:this.$14,onError:this.$15,onUpgrade:function(n,r){return o("WormIDbUpgrade").upgradeDb(n,r,d,p,{isNewDbInstance:R.isNewDb,maybeEar:e.$7,onlyCreateNewStores:!1,safeToDeleteStores:e.$6})}},L+1)}var E={isNewDb:R.isNewDb,isUpgraded:i};return(c=this.$5)==null||c.resolve(E),E}catch(e){var k;throw(k=this.$5)==null||k.reject(e),e}finally{var I;t==null||(I=t.eventFlow)==null||I.addAnnotations({bool:{isClosingDb:a,isCompetingInit:n,shouldUpgrade:i}}),this.$5=null}},t.$21=async function(t,n){var e=this,a=await this.$7.prepareNewKeyVersion(),i=!1,l=!1,u=await new Promise(function(n,u){if(e.$1==null)throw r("err")("IDB is not initialised: "+e.$3);var c=[],d=e.$1.transaction(o("WormIDbTypes").EAR_STORE,"readwrite");d.oncomplete=function(){return n(c)},d.onerror=d.onabort=function(){return u(d.error)};var m=d.objectStore(o("WormIDbTypes").EAR_STORE),p=m.getAll();p.onsuccess=function(){var e,r=(e=p.result)!=null?e:[];c=r.filter(s),i=r.length!==c.length,c.sort(function(e,t){return e.version-t.version});var u=c.length===0||!o("WATimeUtils").isInFuture(c[c.length-1].expiration);if(!u){n(c);return}var d=c.length===0?0:c[c.length-1].version;l=!t&&d===0;var _=babelHelpers.extends({},a,{version:d+1});m.add(_),c.push(_)},p.onerror=function(){return u(p.error)}});await this.$7.init(u,{incorrectVersions:i,versionsLoss:l},{eventFlow:n==null?void 0:n.eventFlow})},e})();function s(e){return!(e==null||e.version==null||e.expiration==null||e.clientKey==null||e.clientKey.byteLength===0||e.salt==null||e.salt.byteLength===0)}l.WormIDbDriver=e}),98);
__d("EBDB",["$InternalEnum","QPLFlow","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum")({UI:0,Worker:1}),u={auto_restore_opt_out:{indexes:{},primaryKey:"optOutKey"},device_metadata:{indexes:{},primaryKey:"pk"},device_state:{indexes:{},primaryKey:"env"},encrypted_backups:{indexes:{},primaryKey:"pk"},encrypted_backups_virtual_devices:{indexes:{},primaryKey:"pk"},experiences_shared_state:{indexes:{},primaryKey:"stateKey"},secure_encrypted_backups_client_state:{indexes:{},primaryKey:"backupId"},secure_encrypted_backups_epochs:{indexes:{},primaryKey:"epochId"},secure_encrypted_backups_recovery_code_status:{indexes:{},primaryKey:"pk"}},c=1e4,d=new(o("WAResolvable")).Resolvable;async function m(t,n,r,a,i){var l=o("QPLFlow").startQPLFlow(n,{annotations:{int:{env:a},string:{operationType:"initEBDB"}},timeoutInMs:c});try{var s="ebdb",m=new(o("WormEAR")).WormEAR(u,s,r),p=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(t,s,u,m,i,{onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;if(e.store==="device_state"){_();return}else f()}},safeToDeleteStores:new Set(["migration"])}),n);await p.init({eventFlow:l}),l.endSuccess(),d.resolve(p)}catch(t){throw l.endFail("error"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error performing makeEBDB: ",""])),t),d.reject(t),t}}function p(){return d.promise}async function _(){var e=await p();return e.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.clear()},"EBDB - clearDeviceState")}async function f(){var e=await p();await e.runInTransaction(["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],"readwrite",function(e){return Promise.all([e.stores.encrypted_backups_virtual_devices.clear(),e.stores.secure_encrypted_backups_recovery_code_status.clear(),e.stores.device_metadata.clear(),e.stores.secure_encrypted_backups_epochs.clear(),e.stores.secure_encrypted_backups_client_state.clear(),e.stores.encrypted_backups.clear(),e.stores.experiences_shared_state.clear(),e.stores.auto_restore_opt_out.clear()])},"EBDB - clearEbStores")}async function g(){var e=await p();await e.runInTransaction(["device_state","encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],"readwrite",function(e){return Promise.all([e.stores.device_state.clear(),e.stores.encrypted_backups_virtual_devices.clear(),e.stores.secure_encrypted_backups_recovery_code_status.clear(),e.stores.device_metadata.clear(),e.stores.secure_encrypted_backups_epochs.clear(),e.stores.secure_encrypted_backups_client_state.clear(),e.stores.encrypted_backups.clear(),e.stores.experiences_shared_state.clear(),e.stores.auto_restore_opt_out.clear()])},"EBDB - clearAll")}l.EBDBEnvironment=s,l.schema=u,l.makeEBDB=m,l.getEBDB=p,l.clearDeviceState=_,l.clearEbStores=f,l.clearAll=g}),98);
__d("EBSMProperties",[],(function(t,n,r,o,a,i){"use strict";var e=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],l=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]),s={dbVersion:5,mandatoryTables:l,persistedTables:new Set(e),persistedTablesArray:e},u=s;i.default=u}),66);
__d("LSE2EEMetadataSyncGroupUtils",["gkx","isArmadillo","isInstamadillo","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=r("isArmadillo")()||r("gkx")("23910")===!0&&!r("isInstamadillo")(),s=r("qex")._("923")===!0&&!r("isInstamadillo")();function u(){return e}function c(){return e?{groupId:95}:null}function d(){return s?{groupId:95}:null}l.shouldAlwaysResetE2EEMetadata=u,l.getE2EEMetadataSyncGroup=c,l.getE2EEMetadataSyncGroupForIGDSyncGroup=d}),98);
__d("LSInternetConnectionState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});i.default=e}),66);
__d("LSPlatformErrorChannel",["FBLogger","ODS","XPlatReactEventEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e,s="onLSError",u=new(r("XPlatReactEventEmitter")),c=0,d=null;function m(t){d===null&&((e||(e=o("ODS"))).bumpEntityKey(3185,"lsplatform_error","first_error_emitted_to_"+c+"listeners"),c===0&&r("FBLogger")("messenger_web").mustfix("No listeners when emitting LS error %s",t.name)),d=t,u.emit(s,t)}function p(e){var t=u.addListener(s,e);return c++,function(){return t.remove()}}function _(){return d}function f(){u.removeAllListeners(s),d=null}var g={TEST_ONLY_clear:f,emit:m,lastError:_,subscribe:p};l.default=g}),98);
__d("MAWAppVersion",["SiteData"],(function(t,n,r,o,a,i,l){"use strict";function e(){return"302.0."+r("SiteData").client_revision}function s(){return{primary:302,secondary:0,tertiary:r("SiteData").client_revision}}l.getVersionNumber=e,l.getAppVersionParts=s}),98);
__d("MAWConsoleLogger",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("2656");function s(t,n,r){if(e){var o=r.map(function(e){return"["+e+"]"}).join("");if(t==="count"){console.count(o+" "+String(n));return}for(var a=arguments.length,i=new Array(a>3?a-3:0),l=3;l<a;l++)i[l-3]=arguments[l];if(o){var s;(s=console)[t].apply(s,[o,n].concat(i))}else{var u;(u=console)[t].apply(u,[n].concat(i))}}}l.logToConsole=s}),98);
__d("MAWDeleteOldLogsFromDisk",["Deferred","MAWLogIndexedDb","MAWSaveLogToDisk","MAWTransactionMode","WALogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("justknobx")._("1400"),m=r("justknobx")._("1401"),p=r("justknobx")._("1402"),_=(u=o("MAWLogIndexedDb")).makeLogMsgrTransactor("logs",(c=o("MAWTransactionMode")).READONLY)(function(e){var t=new(r("Deferred")),n=e(),o=n.count();return o.onsuccess=function(e){var n=e.target.result;t.resolve(n)},o.onerror=function(e){t.reject(e)},t.getPromise()}),f=u.makeLogMsgrTransactor("logs",c.READONLY)(function(e,t){var n=new(r("Deferred")),o=e(),a=[],i=o.index("date"),l=i.openCursor();return l.onsuccess=function(e){var r=e.target.result;if(r==null||!t(r.value,a)){n.resolve(a);return}a.push(r.value.id),r.continue()},l.onerror=function(e){n.reject(e)},n.getPromise()}),g=u.makeLogMsgrTransactor("logs",c.READWRITE)(function(e){var t=new(r("Deferred")),n=e(),a=n.clear();return a.onsuccess=function(){return t.resolve()},a.onerror=function(e){return t.reject(e)},o("MAWSaveLogToDisk").clearLogEntryCache(),t.getPromise()}),h=u.makeLogMsgrTransactor("logs",c.READWRITE)(function(e,t){var n=new(r("Deferred")),o=e();return t.forEach(function(e){return o.delete(e)}),o.transaction.oncomplete=function(){return n.resolve()},o.transaction.onerror=function(e){return n.reject(e)},n.getPromise()});function y(e,t){var n=Date.now()-p;return e!=null&&e.date<=n}function C(e){return function(t,n){return n.length<e}}async function b(){try{var t=await _();if(t===0)return;var n=t-m;if(n>0){var r=await f(C(n));await h(r);return}var a=await f(y);a.length>0&&await h(a)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete old logs: ",""])),t)}}async function v(){try{var e=await _();if(e===0)return;if(e>=d){await g();return}}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete old logs: ",""])),e)}}l.clearLogs=g,l.deleteOldLogs=b,l.deleteOldLogsOnStartup=v}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return indexedDB==null||e==null?Promise.resolve():new Promise(function(n,o){var a=indexedDB.deleteDatabase(e);a.onsuccess=function(){r("FBLogger")("maw_db").warn("%s db was deleted",t),n()},a.onblocked=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",t)},a.onerror=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db",t),o(a.error)}})}async function s(){var t,n=o("CurrentMessengerUser").getID();await Promise.all([e((t=o("MAWIndexedDbMetadata")).dbName(n),"maw_v1"),e(t.restoreDbName2(n),"maw_v3"),e(t.jobsDbName(n),"signal"),e(t.logDbName(n),"logDb")])}l.deleteDB=e,l.deleteMAWPersistence=s}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MAWMainThreadLogger",["CurrentMessengerUser","FBLogger","MAWAppVersion","MAWConsoleLogger","MAWDeleteOldLogsFromDisk","MAWLeakDetection","MAWLoggerUtils","MAWLoggingSwitches","MAWSaveLogToDisk","WAJids","WATagsLogger","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(){e=!1}function u(){e||(e=!0,o("WATagsLogger").initializeWaLogger(C))}var c=function(){return r("FBLogger")("messenger_web")};function d(e,t){var n=m(e);n!=null&&o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function m(e){if(!(!o("CurrentMessengerUser").isEmployee()&&!o("CurrentMessengerUser").isTestUser())){var t=o("WAJids").maybeSanitizeLogLineText(e);return t=o("MAWLeakDetection").maybeReplaceVaultedString(t),t}}function p(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function _(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function f(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),c().tags(t.map(function(e){return String(e)})).warn(n)}function g(e,t,n,o,a,i){var l=r("err")(n);l.stack=o,r("promiseDone")(y(e,t,l,a,i))}async function h(e,t){var n=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(e)),r=o("MAWLoggingSwitches").removeLoggingFromBridge?o("MAWSaveLogToDisk").getLastNEntries(t):Promise.resolve([]),a=t===0?[]:[].concat((await r).map(function(e){return e.args}));return{logs:[].concat(a),sanitizedMessage:n}}async function y(e,t,n,a,i){var l,s,u=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(e)),d=n!=null?n:r("err")(u),m=a!=null?a:n==null?2:0,p=i!=null?i:0,_=await h(d.message,p),f=_.logs,g=_.sanitizedMessage,y=r("getErrorSafe")(d);try{d.message=g}catch(e){y=r("err")(g,d.fileName,d.lineNumber)}m!==0&&(y.framesToPop=m),(l=c())==null||(s=l.addMetadata("MESSENGER_E2EE_WEB","APP_VERSION",o("MAWAppVersion").getVersionNumber()).tags(t.map(function(e){return String(e)})).catching(y)).mustfix.apply(s,[g].concat(f))}var C={count:function(t,n){o("MAWConsoleLogger").logToConsole("count",t,n)},debug:function(t,n){o("MAWConsoleLogger").logToConsole("log",t,n)},devConsole:function(t,n,r){for(var e=arguments.length,a=new Array(e>3?e-3:0),i=3;i<e;i++)a[i-3]=arguments[i];switch(t){case"COUNT":o("MAWConsoleLogger").logToConsole.apply(void 0,["count",n,r].concat(a));break;case"DEV":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r].concat(a));break;case"DEV_XMPP":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r].concat(a));break;case"LOG":o("MAWConsoleLogger").logToConsole.apply(void 0,["info",n,r].concat(a));break;case"WARN":o("MAWConsoleLogger").logToConsole.apply(void 0,["warn",n,r].concat(a));break;case"ERROR":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r].concat(a));break;case"CATCHING":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r].concat(a));break}},error:function(t,n,a){r("promiseDone")(y(t,n,a)),o("MAWConsoleLogger").logToConsole("error",t,n)},info:function(t,n){_(t,n),o("MAWConsoleLogger").logToConsole("info",t,n)},logRestricted:function(t,n){d(t,n),o("MAWConsoleLogger").logToConsole("log",t,n)},warn:function(t,n){f(t,n),o("MAWConsoleLogger").logToConsole("warn",t,n)}};function b(){return o("MAWLoggingSwitches").removeLoggingFromBridge?o("MAWSaveLogToDisk").getEntriesFromDb():Promise.resolve([])}async function v(){o("MAWLoggingSwitches").removeLoggingFromBridge&&await o("MAWDeleteOldLogsFromDisk").clearLogs()}function S(e){return new Date(typeof e=="string"?parseInt(e,10):e).toISOString().replace("T"," ").replace("Z","")}function R(e){return e.map(function(e){try{var t=S(e.date);return[t,e.level,e.category,e.event,e.args].join(" | ")}catch(e){var n=r("getErrorSafe")(e);return[S(Date.now()),"error","LOGGER","Error formatting log: "+((n==null?void 0:n.message)||"")].join(" | ")}}).filter(Boolean).join(`
`)}l.__testClearLoggerSetup=s,l.setupMainWaLogger=u,l.logRestricted=d,l.count=p,l.info=_,l.warn=f,l.logError=g,l.getEntries=b,l.clearEntries=v,l.formatEntries=R}),98);
__d("MAWOneTimeCodeGating",["gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("1910")&&r("justknobx")._("1601")}l.isOneTimeCodeEnabled=e}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_exchange_vm";function u(){var t=o("MAWVaultMaterials").generateNewVaultMaterials(),a="newly-generated";return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getOrSetItem(s,t,function(n,r){if(n!=null){var i=o("MWFBLogger").MWLogger();if(n instanceof Error)throw i.catching(n).mustfixThrow("Failed to store Vaulting Materials. %s",n.toString());i.mustfix("Failed to store Vaulting Materials.")}r!==null&&(t=r,a="storage"),e(o("MAWVaultMaterials").initializeVaultMaterials(t,a))})})}function c(){return o("MAWVaultMaterials").hasVaultBeenSetup()?(e||(e=n("Promise"))).resolve(o("MAWVaultMaterials").getVaultMaterials()):u()}l.setupVaultMaterials=c}),98);
__d("MAWWormOdsLogger",["WABridge","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e={log:function(t){return o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.WORM,key:t})}};l.wormOdsWorkerLogger=e}),98);
__d("MNetRankType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNDEFINED_RANKING_TYPE:-1,INBOX_ACTIVE_NOW:0,MESSENGER_USER_SEARCH:1,MONTAGE_USER:2,BROADCAST_FLOW_TOP_CONTACTS:3,BROADCAST_FLOW_NEEDY_CONTACTS:4,MESSENGER_GROUP_SEARCH:5,RTC_TOP_CONTACTS:6,PSTN_TOP_CONTACTS:7,MESSENGER_NON_CONTACT_SEARCH:8,MESSENGER_SEARCH_BOOTSTRAP:9,ACTIVE_BEEPER:10,MONTAGE_AND_ACTIVE_NOW:11,MESSENGER_PAGE_SEARCH:12,MESSENGER_GAME_SEARCH:13,WWW_NULLSTATE:14,RTC_GROWTH:15,MESSENGER_OMNIPICKER_NULLSTATE:16,RTC_SEQUENTIAL_TOP_CONTACTS:17,MESSENGER_USER_SEARCH_NULLSTATE:18,MLITE_DIODE_PROMOTION:19,MESSENGER_PENDING_REQUEST:20,MESSENGER_CLOSE_CONNECTION:21,MESSENGER_MONTAGE_SEEN_SHEET:22,MESSENGER_OMNIPICKER_KEYPRESS:23,MESSENGER_NOTIF_QP_TARGETING_UPSELL_TYPE:24,CONTACT_TAB_ACTIVE_NOW:26,MESSENGER_UNIV_NULLSTATE_BLEND:27,MESSENGER_INBOX_THREADS:28,INBOX_ACTIVE_NOW_NO_BOOSTING:29,BROADCAST_FLOW_TOP_CONTACTS_FB_SHARE:30,BROADCAST_FLOW_TOP_CONTACTS_MESSENGER_SHARE:31,BROADCAST_FLOW_TOP_CONTACTS_EXTERNAL_SHARE:32,MESSENGER_TRENDING_STICKERS:33,MESSENGER_BROADCAST_FLOW_TOP_THREADS:34,MESSENGER_SENDS_28D:35,MESSENGER_ROOM_INVITE:36,MESSENGER_ROOM_INVITE_SEARCH:37,INBOX_ACTIVE_NOW_PREFETCH:38,MESSENGER_BLENDED_KEYPRESS:39,MESSENGER_BLENDED_NULLSTATE:40,MESSENGER_CARRIER_MESSAGING:41,MESSENGER_ROOM_INVITE_GROUP:42,MESSENGER_INBOX_BIRTHDAY_ITEM:43,INSTAGRAM_DIRECT_SEARCH_NULLSTATE:44,BROADCAST_FLOW_TOP_CONTACTS_AND_TOP_THREAD_FB_SHARE:45,BROADCAST_FLOW_TOP_THREADS_FB_SHARE:46,FB_H_SCROLL_RANKING:47,FB_MESSAGING_USER_SEARCH:48,FB_MESSAGING_USER_SEARCH_NULLSTATE:49,MESSENGER_ACTIVE_NOW_TRAY_ACTIVE_CC:50,MESSENGER_SHARE_SHEET:51,MESSENGER_COMMUNITY_TAB_UNJOINED_COMMUNITIES:52,MESSENGER_BCF_FREQUENTS:53,FB_ORIGINAL_PRIVATE_SHARING:54,MESSENGER_SEARCH_NULLSTATE_FOLLOWER:55,MESSENGER_SEARCH_NULL_STATE_UNBLENDED:56,MESSENGER_SEARCH_QUERY_STATE_BLENDED:57,MESSENGER_INBOX_TRAY_SUPER_MODEL:58,MESSENGER_INBOX_TRAY_SMART_BLENDING:59,MESSENGER_PRESENCE_POLLING_PERSONALIZATION:60});i.default=e}),66);
__d("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="31918369997811363"}),null);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"}),l=e;i.default=l}),66);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=t,i=n!=null?n:"true";if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a),(l=(s||(s=r("WebStorage"))).getLocalStorage())==null||l.setItem(a,i)}}function c(e){var t=e;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n;(n=(s||(s=r("WebStorage"))).getLocalStorage())==null||n.removeItem(t)}}function d(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n)}return null}function m(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return((t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n))!=null}return!0}l.mwEBCreateLocalStorageEntry=u,l.mwEBDeleteLocalStorageEntry=c,l.mwEBGetLocalStorageEntryValue=d,l.mwEBGetIsLocalStorageEntryValuePresent=m}),98);
__d("MWLSDatabaseNames",[],(function(t,n,r,o,a,i){"use strict";var e="LightSpeed",l=e+"V3";i.name=e,i.lightspeedPrefix=l}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return o("MWLSDatabaseNames").lightspeedPrefix+e}l.dbName=e}),98);
__d("ReStoreDecryptionFailure",[],(function(t,n,r,o,a,i){"use strict";var e="ReStoreDecryptionFailure",l=(function(t){function n(n,r){var o,a=n+" - Encrypted Restore was unable to decrypt an entity for table "+r;return o=t.call(this,a)||this,o.message=a,o.name=e,o.tableName=r,o}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.getTableName=function(){return this.tableName},n})(babelHelpers.wrapNativeSuper(Error));i.ERROR_NAME=e,i.ReStoreDecryptionFailure=l}),66);
__d("ReStoreEARSetupFailure",[],(function(t,n,r,o,a,i){"use strict";var e="Encryption keychain could not be setup",l="ReStoreEARSetupFailure",s=(function(t){function n(n){var r,o=e+": "+n;return r=t.call(this,o)||this,r.message=o,r.name=l,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));i.ERROR_MESSAGE=e,i.ERROR_NAME=l,i.ReStoreEARSetupFailure=s}),66);
__d("ReStoreInstrumentation",["JSONStringifyBigIntSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){return e.set(t.uniqueId,{instance:t,persistence:t.persistence,tableNames:t.getTableData().tableNames}),t}function u(){return Array.from(e.entries()).map(function(e){var t=e[0],n=e[1];return{key:t,value:JSON.parse(r("JSONStringifyBigIntSafe")(n.tableNames))}})}l.instrument=s,l.getReStoreTables=u,l.reStoreInstancesMap=e}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("CurrentMessengerUser").getIDorEIMU();function s(t){var n=o("MWBroadcastChannel").MWBroadcastChannel(t==="restore-table-"+e+"-"+o("MWLSIndexedDBName").dbName()?"mwChat-"+e:t);function a(e,t){try{n.postMessage([e,t])}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("Failed to broadcast changes")}}function i(e,t){n.addEventListener("message",function(n){var r=n.data,o=r[0];o===e&&t(r[1])})}return{onEventReceive:i,postMessage:a}}l.default=s}),98);
__d("WAPromiseQueue",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(t){t===void 0&&(t=-1),this.$1=(e||(e=n("Promise"))).resolve(),this.$3=0,this.$2=t}var r=t.prototype;return r.wait=function(){return this.$1},r.enqueueHandlers=function(t,n,r){var e=this;this.$3++;var o=this.$1.then(function(){return t}).then(n,r),a=o.then();return this.$1=u(o,this.$2).finally(function(){e.$3--}),a},r.enqueue=function(t){var e=this;this.$3++;var n=this.$1.then(t),r=n.then();return this.$1=u(n,this.$2).finally(function(){e.$3--}),r},r.size=function(){return this.$3},t})(),s=(function(){function t(e){e===void 0&&(e=-1),this.$1=new Map,this.$2=e}var r=t.prototype;return r.waitIfPending=function(t){return this.$1.get(t)},r.wait=function(r){return this.$1.get(r)||(e||(e=n("Promise"))).resolve()},r.enqueueHandlers=function(t,n,r,o){var e=this.wait(t).then(function(){return n}).then(r,o);return this.$3(t,e)},r.enqueue=function(t,n){var e=this.wait(t).then(n);return this.$3(t,e)},r.$3=function(t,n){var e=this,r=n.then(),o,a=function(){e.$1.get(t)===o&&e.$1.delete(t)};return o=u(n,this.$2).then(a,a),this.$1.set(t,o),r},t})();function u(t,r){return r>=0?new(e||(e=n("Promise")))(function(e){var n=function(){return void e()};t.then(n,n),setTimeout(n,r)}):t.then(c,c)}function c(){}i.PromiseQueue=l,i.PromiseQueueMap=s}),66);/*FB_PKG_DELIM*/
__d("LSGroupPollEventType",[],(function(t,n,r,o,a,i){var e=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7,QUESTION_DELETION_SUCCESS:8,QUESTION_DELETION_FAILURE:9});i.default=e}),66);
__d("LSPollQuestionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHOOSE_MULTIPLE:0,MOST_LIKELY_TO:1,NON_POLL:2});i.default=e}),66);
__d("LsMessageSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4190"),s=o("FalcoLoggerInternal").create("ls_message_search_end",e),u=s;l.default=u}),98);
__d("LsMessageSearchMsgImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4191"),s=o("FalcoLoggerInternal").create("ls_message_search_msg_impression",e),u=s;l.default=u}),98);
__d("LsMessageSearchMsgResultChosenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4231"),s=o("FalcoLoggerInternal").create("ls_message_search_msg_result_chosen",e),u=s;l.default=u}),98);
__d("LsMessageSearchSearchClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4464"),s=o("FalcoLoggerInternal").create("ls_message_search_search_clicked",e),u=s;l.default=u}),98);
__d("LsMessageSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4683"),s=o("FalcoLoggerInternal").create("ls_message_search_start",e),u=s;l.default=u}),98);
__d("LsMessageSearchThreadImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("6727"),s=o("FalcoLoggerInternal").create("ls_message_search_thread_impression",e),u=s;l.default=u}),98);
__d("LsMessageSearchThreadListClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("6293"),s=o("FalcoLoggerInternal").create("ls_message_search_thread_list_click",e),u=s;l.default=u}),98);
__d("MAWBridgeDeleteMessagesHandler",["EntMessageReplyType","FBLogger","I64","LSIntEnum","MAWCurrentUser","MAWDbMsg","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MAWReplyBuilder","MAWTimeUtils","MsgrWebGating","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"MAWBridgeDeleteMessagesHandler",async function(e,n){await Promise.all(t.messages.map(async function(t){if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){var r=await e.messages.index("messageId").get(t.msgId);r!=null&&(await c({callbackTxn:e,messageId:r.messageId,threadKey:r.threadKey,timestampMs:r.timestampMs}),await d(e,r))}else await c({callbackTxn:e,messageId:t.msgId,threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(t.ts)})}))})}async function c(e){var t=e.callbackTxn,n=e.messageId,r=e.threadKey,a=e.timestampMs;if(await t.messages.delete(r,a,n),o("MAWMpsGating").isMpsMessageRendering()){var i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(r,n));await Promise.all(i.map(function(e){var n=[e.defaultCtaId,e.attachmentCta1Id,e.attachmentCta2Id,e.attachmentCta3Id].filter(Boolean),r=n.map(function(e){return t.attachment_ctas.delete(e)});return Promise.all(r).then(function(){return t.attachments.delete(e.threadKey,e.messageId,e.attachmentFbid)})}))}}async function d(t,n){var a=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(n.messageId)),i=o("MAWDbMsg").toMsgId(n.messageId);if(i==null){r("FBLogger")("messenger_e2ee_web").mustfix("[MAWBridgeDeleteMessagesHandler] Error extracting message id from message");return}await Promise.all(a.map(function(a){var l={isBumpMsg:a.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSMessage:babelHelpers.extends({},n,{isUnsent:!0}),replyToMsgId:i,replyType:"MESSAGE"},u=babelHelpers.extends({},a,{replyAttachmentId:void 0,replyAttachmentPlaintextHash:void 0,replyAttachmentType:void 0,replyMediaExpirationTimestampMs:void 0,replyMediaPreviewHeight:void 0,replyMediaPreviewWidth:void 0,replySnippet:o("MAWReplyBuilder").getReplyBuilder(l.replyType).buildReplySnippet(l,(s||(s=o("I64"))).to_string(a.senderId),o("MAWCurrentUser").getID()),replyStatus:o("MAWReplyBuilder").getReplyBuilder(l.replyType).buildReplyStatus(l)});return t.messages.put(u)}))}l.call=u}),98);
__d("MAWBridgeDeleteReactionHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.chatJid,"MAWBridgeDeleteReactionHandler",function(t,r){return t.reactions.delete(r,n.messageId,(e||(e=o("I64"))).of_string(n.actorId))})}l.call=s}),98);
__d("MAWBridgeEditMsgHistoryAddedHandler",["FBLogger","I64","LSMessageSendStatus","MAWChatJid","ReQL","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(t));return n==null?void 0:n.messageId}async function u(t,n,a){var i=await s(t,n.originalMsgExternalId);if(i==null){r("FBLogger")("messenger_web_e2ee").warn("original message for edit msg history is not present in lsdb");return}var l={messageContent:n.msgContent.content,originalMessagePk:i,sendStatus:n.sendStatus!=null?(e||(e=o("I64"))).of_int32(n.sendStatus):(e||(e=o("I64"))).of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(e||(e=o("I64"))).of_int32(n.editTs),threadKey:a};return t.edit_message_history.put(l)}function c(t,n,a,i,l){var s={messageContent:n.msgContent.content,originalMessagePk:l,pk:i,sendStatus:n.sendStatus!=null?(e||(e=o("I64"))).of_int32(n.sendStatus):(e||(e=o("I64"))).of_int32(r("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(e||(e=o("I64"))).of_int32(n.editTs),threadKey:a};return t.edit_message_history.put(s)}async function d(e,t,n){var r=await o("MAWChatJid").toThreadKeyMaybe(e.tables,n.threadJid);if(r!=null){var a=n.editMsgHistoryId,i=n.originalMsgId,l=i==null||a==null?u(t,n,r):c(t,n,r,a,i);return l}}function m(e,t,n){return Promise.all(n.map(function(n){return d(e,t,n)})).then(r("emptyFunction"))}l.call=m}),98);
__d("MAWBridgeHandleReceiverFetchXMA",["FBLogger","I64","LSIntEnum","LSXmaContentType","MAWBridgeXMAUtils","MessagingAttachmentType","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n,a){var i,l,u,c=n.contentRef,d=n.defaultPreviewMediaId,m=n.msgId,p=n.subtitleText,_=n.titleText,f=n.xmaId;if(m!=null){var g=(i=n==null||(l=n.defaultCTA)==null?void 0:l.actionUrl)!=null?i:n==null||(u=n.defaultCTA)==null?void 0:u.nativeUrl,h=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(a,m)),y=String(f),C=(e||(e=o("I64"))).zero,b;if(c!=null)try{var v=JSON.parse(c);v!=null&&(b=JSON.stringify(v))}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Failed to parse msg.contentRef as XmsgMsgrXmaContentRefDataclass")}else r("FBLogger")("messenger_web_sharing").mustfix("contentRef is empty for a MSG_RECEIVER_FETCH XMA");var S=await o("MAWBridgeXMAUtils").addAttachmentCtas(t,n,a,m,y,{}),R=S.attachmentCta1Id,L=S.attachmentCta2Id,E=S.attachmentCta3Id,k=S.defaultCtaId,I={actionUrl:g!=null?g:void 0,attachmentCta1Id:R,attachmentCta2Id:L,attachmentCta3Id:E,attachmentFbid:y,attachmentIndex:e.zero,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),authorityLevel:e.zero,defaultCtaId:k,hasMedia:!1,hasXma:!0,hasXmaPreview:d!=null,isSharable:!0,messageId:m,receiverFetchId:b,subtitleText:p,threadKey:a,timestampMs:C,titleText:_,transportKey:"WhatsApp",xmaContentType:s.ofNumber(r("LSXmaContentType").MSG_RECEIVER_FETCH)};h!=null?await t.attachments.upsert([h.threadKey,h.messageId,h.attachmentFbid],I):await t.attachments.add(I)}}l.call=u}),98);
__d("MAWMessageExpirationStorage",["LSDatabaseSingleton","MAWBridgeDeleteMessagesHandler","ReQL","clearTimeout","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;async function u(e,t,n){await Promise.all(t.map(function(t){var n=t.ts,r=t.msgId,a={msgId:r,ts:n},i=t.threadJid,l=[a],s={messages:l,threadJid:i};return o("MAWBridgeDeleteMessagesHandler").call(e,s)})),s.delete(n)}async function c(e,t,n){await Promise.all(t.map(async function(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId));if(n!=null){var r=babelHelpers.extends({},n,{replyAttachmentPlaintextHash:void 0});await e.messages.put(r)}})),s.delete(n)}async function d(e,t,n){await Promise.all(t.map(async function(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId));if(n!=null){var r=babelHelpers.extends({},n,{replyMessageText:void 0});await e.messages.put(r)}})),s.delete(n)}function m(t,n,a,l){return r("setTimeout")(async function(){var a=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;r("promiseDone")(a.runInTransaction(async function(e){await l(e,t,n)},"readwrite",void 0,void 0,i.id+":127"))},a)}function p(e){var t=e.bridgeMsgStartCountdown,n=e.expirationEvent,o=t.countdownTs,a=t.millisecondsUntilCountdownTs,i=s.get(o),l;if(i==null)l=[t];else{r("clearTimeout")(i.timeoutId);var u=i.msgs.map(function(e){return e.msgId}).indexOf(t.msgId)===-1;u&&i.msgs.push(t),l=i.msgs}var c=m(l,o,a,n);s.set(o,{expirationTs:o,msgs:l,timeoutId:c})}function _(e){var t=e.msgId,n=s.get(e.countdownTs);if(n!=null){var r=n.msgs.map(function(e){return e.msgId}).indexOf(t);if(r>-1){n.msgs.splice(r,1);return}}}l.expirationDeletionEvent=u,l.expirationStoryReplyEvent=c,l.expirationNoteReplyEvent=d,l.setMessageForExpiration=p,l.clearMessageFromExpiration=_}),98);
__d("MAWBridgeMsgsStartCountdownHandler",["I64","MAWMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return n.msgs.reduce(function(n,r){return n.then(function(){return o("MAWMessageExpirationStorage").setMessageForExpiration({bridgeMsgStartCountdown:r,expirationEvent:o("MAWMessageExpirationStorage").expirationDeletionEvent}),(e||(e=o("I64"))).of_int32(r.millisecondsUntilCountdownTs),o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,r.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.messages).getKeyRange(n,o("MAWTimeUtils").toTimestamp(r.ts),r.msgId)).then(async function(n){if(n==null)return Promise.resolve();var a=babelHelpers.extends({},n,{ephemeralExpirationTs:(e||(e=o("I64"))).of_float(r.countdownTs)});await t.messages.put(a)})})})},Promise.resolve())}l.call=s}),98);
__d("MAWBridgePollUtils",["fbt","FBLogger","I64","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t){return t.toSorted(function(t,n){return t.numVotes!==n.numVotes?n.numVotes-t.numVotes:(e||(e=o("I64"))).equal(t.sortKeyVotingTimestamp,n.sortKeyVotingTimestamp)?(e||(e=o("I64"))).compare(t.sortKeyCreationTimestamp,n.sortKeyCreationTimestamp):(e||(e=o("I64"))).compare(n.sortKeyVotingTimestamp,t.sortKeyVotingTimestamp)})}function c(t){if(t===o("WAJids").AUTHOR_SYSTEM)throw r("FBLogger")("messenger_web").mustfixThrow("Not a valid author for poll vote");return t===o("WAJids").AUTHOR_ME?(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())):(e||(e=o("I64"))).of_string(o("WAJids").userIdFromJid(t))}function d(e,t){switch(e.length){case 0:return s._(/*BTDS*/"{option_name}, no votes",[s._param("option_name",t)]);case 1:return s._(/*BTDS*/"{option_name}, Voted for by {voter_name}",[s._param("option_name",t),s._param("voter_name",e[0])]);case 2:return s._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name}",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1])]);case 3:return s._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name} and {third_voter_name}",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1]),s._param("third_voter_name",e[2])]);default:return s._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name} and {remaining_count} others",[s._param("option_name",t),s._param("first_voter_name",e[0]),s._param("second_voter_name",e[1]),s._param("remaining_count",e.length-2)])}}l.sortPollXMAOptions=u,l.getContactIdForAuthor=c,l.getListItemAccessibilityText=d}),226);
__d("MNLSXMATemplateType",[],(function(t,n,r,o,a,i){var e=Object.freeze({GENERIC_SHARE:0,DEFAULT:-1});i.default=e}),66);
__d("QuestionPollStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOMINATING:0,VOTING:1,CLOSED:2});i.default=e}),66);
__d("MAWBridgeNewPollHandler",["fbt","FBLogger","I64","LSAuthorityLevel","LSGroupPollEventType","LSIntEnum","LSPollQuestionType","MAWBridgePollUtils","MAWDbPoll","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MNLSXMALayoutType","MNLSXMATemplateType","MessagingAttachmentType","QuestionPollStage","ReQL","WAJids","nullthrows"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=3;async function d(t,n,r){var a=n.contactIdForCurrentUser,i=n.dbPoll,l=n.latestUpdateMsgId,s=n.latestUpdateTimestampMs,u=n.transportKey,c=i.pollStanzaId,d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments.index("idx_attachments_collapsible_id")).getKeyRange(r,(e||(e=o("I64"))).of_string(c)));d!=null&&await t.attachments.delete(d.threadKey,d.messageId,d.attachmentFbid),await p(t,i,r,l,s,a,u)}function m(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.dbPoll.chatJid,"BridgeNewPollHandler",function(e,n){return d(e,t,n)})}async function p(t,n,a,i,l,s,u){var d=n.latestSenderTimestampsMs,m=n.pollParticipantCount,p=n.pollStanzaId,h=(e||(e=o("I64"))).of_string(p),y=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.polls).getKeyRange(h));y==null&&await f(t,h,i,l,a);var C=await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.poll_options_v2).getKeyRange(h)),b=new Map(n.pollOptions.entries().map(function(e){var t=e[0],n=e[1];return[o("MAWDbPoll").generateStableIdFromOptionHash(t,p).toString(),n]})),v=new Map;C.forEach(function(t){var n=(e||(e=o("I64"))).to_string(t.optionId);v.set(n,babelHelpers.extends({},v.get(n),{lsOption:t}))}),b.entries().forEach(function(e){var t=e[0],n=e[1];n.optionText!=null&&v.set(t,babelHelpers.extends({},v.get(t),{mawDbOption:n}))});var S=v.entries().toArray().sort(function(e,t){var n,o,a=e[0],i=e[1],l=i.lsOption,s=i.mawDbOption,u=t[0],c=t[1],d=c.lsOption,m=c.mawDbOption,p=r("nullthrows")((n=l==null?void 0:l.optionText)!=null?n:s==null?void 0:s.optionText),_=r("nullthrows")((o=d==null?void 0:d.optionText)!=null?o:m==null?void 0:m.optionText);return p.localeCompare(_)}),R=await Promise.all(S.map(async function(n,a){var i=n[0],l=n[1],u=l.lsOption,c=l.mawDbOption,p=(e||(e=o("I64"))).of_int32(a);if(u==null&&c==null)return null;var f=e.of_string(i);if(c==null){var g=r("nullthrows")(u),y=g.optionText;await t.poll_options_v2.upsert([h,f],babelHelpers.extends({},r("nullthrows")(u),{sortKeyCreationTimestamp:p}));var C=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.poll_votes_v2).getKeyRange(h,f,s));return{contactIds:[s],hasVoteFromCurrentUser:!0,numVotes:1,optionId:f,optionText:y,progressBarFilledPercentage:Math.floor(1/m*100),sortKeyCreationTimestamp:p,sortKeyVotingTimestamp:C!=null?C.timestampMs:(e||(e=o("I64"))).zero}}return _(t,h,f,r("nullthrows")(c.optionText),u,c,p,d,s,m)})).then(function(e){return e.filter(Boolean)}),L=R.some(function(e){return e.hasVoteFromCurrentUser}),E=o("MAWBridgePollUtils").sortPollXMAOptions(R).slice(0,c);await g(t,n,a,i,l,E,L,u)}async function _(t,n,a,i,l,s,u,c,d,m){var p=s.voteAuthors,_=Array.from(p).map(function(e){var t=c.get(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Missing latest sender timestamp for poll voter from dbPoll");return{contactId:o("MAWBridgePollUtils").getContactIdForAuthor(e),latestSenderTimestampMs:t}}),f=l!=null?await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.poll_votes_v2).getKeyRange(n,a)):[],g=f.find(function(t){return(e||(e=o("I64"))).equal(t.contactId,d)}),h=c.get(o("WAJids").AUTHOR_ME),y=g!=null&&(h==null||h<(e||(e=o("I64"))).to_float(g.timestampMs));await Promise.all(f.map(async function(r){(e||(e=o("I64"))).equal(r.contactId,d)&&y||await t.poll_votes_v2.delete(n,a,r.contactId)})),await Promise.all(_.map(async function(r){var i=r.contactId,l=r.latestSenderTimestampMs;await t.poll_votes_v2.put({contactId:i,optionId:a,pollId:n,timestampMs:(e||(e=o("I64"))).of_float(l)})}));var C=(e||(e=o("I64"))).of_float(Math.max.apply(Math,_.map(function(e){return e.latestSenderTimestampMs}).concat([0]))),b=y?(e||(e=o("I64"))).max(r("nullthrows")(g==null?void 0:g.timestampMs),C):C,v=_.length+(y?1:0),S={optionId:a,optionText:i,pollId:n,sortKeyCreationTimestamp:u,sortKeyVotingTimestamp:b,voteCount:e.of_int32(v)};l!=null?await t.poll_options_v2.upsert([n,a],S):await t.poll_options_v2.add(S);var R=_.map(function(e){return e.contactId});return y&&R.push(d),{contactIds:R,hasVoteFromCurrentUser:y||_.find(function(t){return(e||(e=o("I64"))).equal(t.contactId,d)})!=null,numVotes:v,optionId:a,optionText:i,progressBarFilledPercentage:Math.floor(v/m*100),sortKeyCreationTimestamp:u,sortKeyVotingTimestamp:b}}async function f(t,n,a,i,l){var s={authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),lastUpdateMessageEventType:u.ofNumber(r("LSGroupPollEventType").QUESTION_CREATION),lastUpdateMessageId:a,lastUpdateMessageTimestampMs:(e||(e=o("I64"))).of_float(i),pollId:n,pollStage:u.ofNumber(r("QuestionPollStage").VOTING),pollType:u.ofNumber(r("LSPollQuestionType").CHOOSE_MULTIPLE),threadKey:l};await t.polls.put(s)}async function g(t,n,a,i,l,d,m,p){var _=n.pollStanzaId,f=n.title;if(d.length===0){r("FBLogger")("messenger_web").mustfix("Items length for poll XMA should be greater than 0");return}var g=await o("ReQL").toArrayAsync(o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants,[]).getKeyRange(a),o("ReQL").fromTableAscending(t.contacts,["name","id","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"])).map(function(e){var t=e[0],n=e[1];return n}).filter(Boolean)),h=new Map(g.map(function(t){return[(e||(e=o("I64"))).to_string(t.id),t]})),y=d.map(function(t){var n=t.contactIds,r=t.optionId,a=t.optionText,i=t.progressBarFilledPercentage,l=n.reduce(function(t,n){var r,a,i=h.get((e||(e=o("I64"))).to_string(n));return t.contactUrlExpirations.push((i==null?void 0:i.profilePictureUrlExpirationTimestampMs)!=null?(e||(e=o("I64"))).to_string(i.profilePictureUrlExpirationTimestampMs):""),t.contactUrlFallbacks.push((r=i==null?void 0:i.profilePictureFallbackUrl)!=null?r:""),t.contactUrls.push((a=i==null?void 0:i.profilePictureUrl)!=null?a:""),(i==null?void 0:i.name)!=null&&t.contactNames.push(i.name),t},{contactNames:[],contactUrlExpirations:[],contactUrlFallbacks:[],contactUrls:[]}),s=l.contactNames,u=l.contactUrlExpirations,c=l.contactUrlFallbacks,d=l.contactUrls;return{listItemAccessibilityText:o("MAWBridgePollUtils").getListItemAccessibilityText(s,a).toString(),listItemContactUrlExpirationTimestampList:u.length>0?u.join(", "):void 0,listItemContactUrlFallbackList:c.length>0?c.join(", "):void 0,listItemContactUrlList:d.length>0?d.join(", "):void 0,listItemId:r,listItemProgressBarFilledPercentage:(e||(e=o("I64"))).of_int32(i),listItemTitleText:a,listItemTotalCount:e.of_int32(n.length)}}),C=(e||(e=o("I64"))).of_string(_),b=m?s._(/*BTDS*/"Change vote").toString():s._(/*BTDS*/"Vote").toString(),v={actionContentBlob:f,attachmentFbid:_,attachmentIndex:e.zero,ctaId:C,messageId:i,targetId:e.of_string(_),threadKey:a,title:b,type_:"xma_poll_details_card"},S={attachmentCta1Id:C,attachmentFbid:_,attachmentIndex:e.zero,cta1Title:b,cta1Type:"xma_poll_details_card",defaultActionEnableExtensions:!1,defaultCtaId:C,defaultCtaTitle:b,defaultCtaType:"xma_poll_details_card",faviconUrlExpirationTimestampMs:e.zero,messageId:i,threadKey:a},R={attachmentCta1Id:C,attachmentFbid:_,attachmentIndex:e.zero,attachmentType:(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),authorityLevel:u.ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),collapsibleId:e.of_string(_),cta1Title:b,cta1Type:"xma_poll_details_card",defaultCtaId:C,defaultCtaTitle:b,defaultCtaType:"xma_poll_details_card",hasMedia:!1,hasXma:!0,isSharable:!1,listItemsDescriptionText:f,listItemsId:e.of_string(_),messageId:i,threadKey:a,timestampMs:e.of_float(l),transportKey:p!=null?p:"WhatsApp",xmaLayoutType:u.ofNumber(r("MNLSXMALayoutType").XCENTER),xmasTemplateType:u.ofNumber(r("MNLSXMATemplateType").GENERIC_SHARE)},L=n.pollOptions.values().filter(function(e){return e.optionText!=null}).toArray().length,E=L>c?s._(/*BTDS*/"_j{\"*\":\"{additional_option_count} more options\",\"_1\":\"{additional_option_count} more option\"}",[s._plural(L-c),s._param("additional_option_count",L-c)]).toString():void 0,k=babelHelpers.extends({},R,{listItemAccessibilityText1:y[0].listItemAccessibilityText,listItemAccessibilityText2:y.length>1?y[1].listItemAccessibilityText:void 0,listItemAccessibilityText3:y.length>2?y[2].listItemAccessibilityText:void 0,listItemContactUrlExpirationTimestampList1:y[0].listItemContactUrlExpirationTimestampList,listItemContactUrlExpirationTimestampList2:y.length>1?y[1].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlExpirationTimestampList3:y.length>2?y[2].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlFallbackList1:y[0].listItemContactUrlFallbackList,listItemContactUrlFallbackList2:y.length>1?y[1].listItemContactUrlFallbackList:void 0,listItemContactUrlFallbackList3:y.length>2?y[2].listItemContactUrlFallbackList:void 0,listItemContactUrlList1:y[0].listItemContactUrlList,listItemContactUrlList2:y.length>1?y[1].listItemContactUrlList:void 0,listItemContactUrlList3:y.length>2?y[2].listItemContactUrlList:void 0,listItemId1:y[0].listItemId,listItemId2:y.length>1?y[1].listItemId:void 0,listItemId3:y.length>2?y[2].listItemId:void 0,listItemProgressBarFilledPercentage1:y[0].listItemProgressBarFilledPercentage,listItemProgressBarFilledPercentage2:y.length>1?y[1].listItemProgressBarFilledPercentage:void 0,listItemProgressBarFilledPercentage3:y.length>2?y[2].listItemProgressBarFilledPercentage:void 0,listItemsSecondaryDescriptionText:E,listItemTitleText1:d[0].optionText,listItemTitleText2:d.length>1?d[1].optionText:void 0,listItemTitleText3:d.length>2?d[2].optionText:void 0,listItemTotalCount1:y[0].listItemTotalCount,listItemTotalCount2:y.length>1?y[1].listItemTotalCount:void 0,listItemTotalCount3:y.length>2?y[2].listItemTotalCount:void 0});await Promise.all([t.attachments.upsert([a,i,_],k),t.attachment_ctas.upsert([C],v),t.attachment_items.upsert([_,e.zero],S)])}l.POLL_OPTIONS_THRESHOLD=c,l.call=m}),226);
__d("MAWBridgeNewReceiverFetchInfoHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlUtils","MAWBridgeSendAndReceive","MAWImageUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MessagingAttachmentType","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e){if(!o("MAWMpsGating").isMpsMessageRendering())return e;var t=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","getReceiverFetchInfo",{receiverFetchId:e.receiverFetchId});return babelHelpers.extends({},e,t)}async function c(e,t,n){var r=await u(t),a=r.msgId,i=r.receiverFetchId,l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(n,a)),s=m(r,n,l);await e.attachments.upsert([n,a,i],s)}function d(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.threadJid,"BridgeNewReceiverFetchInfoHandler",function(e,n){return c(e,t,n)})}function m(t,n,a){var i=t.accessibilitySummaryText,l=t.mimetype,u=t.msgId,c=t.previewHeight,d=t.previewUrl,m=t.previewUrlExpirationTimestampMs,_=t.previewWidth,f=t.ravenSettings,g=t.receiverFetchId,h=t.sortOrderMs,y=t.transportKey,C=t.type,b=p(C),v=o("MAWImageUtils").boundHeightWidth(c,_,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),S=v.height,R=v.width,L=d!=null?d:a==null?void 0:a.previewUrl,E=m!=null?(e||(e=o("I64"))).of_float(m):a==null?void 0:a.previewUrlExpirationTimestampMs,k=o("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(L,E);return{accessibilitySummaryText:i,attachmentFbid:g,attachmentIndex:(e||(e=o("I64"))).zero,attachmentType:b,authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:(f==null?void 0:f.ephemeralMediaState)!=null?(e||(e=o("I64"))).of_int32(f.ephemeralMediaState):void 0,ephemeralMediaViewMode:(f==null?void 0:f.ephemeralMediaViewMode)!=null?(e||(e=o("I64"))).of_int32(f.ephemeralMediaViewMode):void 0,hasMedia:k,hasXma:!1,isSharable:!1,messageId:u,previewHeight:e.of_int32(S),previewUrl:d!=null?d:a==null?void 0:a.previewUrl,previewUrlExpirationTimestampMs:m!=null?(e||(e=o("I64"))).of_float(m):a==null?void 0:a.previewUrlExpirationTimestampMs,previewUrlMimeType:l,previewWidth:e.of_int32(R),receiverFetchId:g,threadKey:n,timestampMs:e.of_float(h),transportKey:y!=null?y:"WhatsApp"}}function p(e){switch(e){case"sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER);default:throw r("FBLogger")("messenger_web_media").mustfixThrow("Unsupported type for MAWBridgeNewReceiverFetchInfoHandler")}}l.call=d,l.composeAttachment=m}),98);
__d("MAWBridgeNewXMAHandler",["MAWBridgeHandleReceiverFetchXMA","MAWBridgeXMAUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){var r=String(t.xmaId),a=t.msgId;if(a!=null){var i=t.targetType===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH;if(i)return o("MAWBridgeHandleReceiverFetchXMA").call(e,t,n);var l=await o("MAWBridgeXMAUtils").getExistingAttachmentAndAttachmentCtas(e,n,a),s=l[0],u=l[1],c=await o("MAWBridgeXMAUtils").addAttachmentCtas(e,t,n,a,r,u),d=c.attachmentCta1Id,m=c.attachmentCta2Id,p=c.attachmentCta3Id,_=c.defaultCtaId,f=o("MAWBridgeXMAUtils").composeAttachmentXMA(t,n,r,a,d,m,p,_,"MAWBridgeNewXMAHandler");s!=null?await e.attachments.upsert([s.threadKey,s.messageId,s.attachmentFbid],f):await e.attachments.add(f)}}function s(t,n){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(t,n.threadJid,"MAWBridgeNewXMAHandler",function(t,r){return e(t,n,r)})}function u(e,t){return s(e,t)}l.callWithoutWaitingForAnything=e,l.call=u}),98);
__d("MAWBridgeReactionUpsertHandler",["I64","LSAuthorityLevel","LSIntEnum","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l){return{actorId:(e||(e=o("I64"))).of_string(t),authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),messageId:a,reaction:l,reactionCreationTimestampMs:o("MAWTimeUtils").toTimestamp(i),threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(i),transportKey:"WhatsApp"}}function c(t,n,r,a,i,l){return t.reactions.upsert([r,a,(e||(e=o("I64"))).of_string(n)],u(n,r,a,i,l))}function d(e,t,n,r,o,a){return c(e,t,n,r,o,a)}function m(e,t){return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,t.chatJid,"MAWBridgeReactionUpsertHandler",function(e,n){return c(e,t.actorId,n,t.messageId,t.ts,t.reaction)})}l.composeReaction=u,l.attachmentMutationsOptimisticHandler=d,l.call=m}),98);
__d("MAWQPLLogger",["QPLUserFlow","Random","cr:10049"],(function(t,n,r,o,a,i,l){"use strict";n("cr:10049")==null||n("cr:10049").overwriteSamplingRate();function e(e){return{addQPLAnnotations:function(n,o){r("QPLUserFlow").addAnnotations(e,o,{instanceKey:n})},markQPLCancel:function(n){r("QPLUserFlow").endCancel(e,{instanceKey:n})},markQPLFailure:function(n,o){var t;r("QPLUserFlow").endFailure(e,(t=o==null?void 0:o.name)!=null?t:"fail",{error:o,instanceKey:n})},markQPLFailureWithMsg:function(n,o){r("QPLUserFlow").endFailure(e,o,{instanceKey:n})},markQPLPoint:function(n,o,a){r("QPLUserFlow").addPoint(e,o,{debugInfo:a,instanceKey:n})},markQPLStart:function(){var t=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);return r("QPLUserFlow").start(e,{instanceKey:t}),t},markQPLSuccess:function(n){r("QPLUserFlow").endSuccess(e,{instanceKey:n})}}}l.default=e}),98);
__d("MAWDataSourceLogger",["I64","MAWQPLLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return s==null&&(s=r("MAWQPLLogger")(r("qpl")._(25303796,"1974"))),s}function c(t){var n=u().markQPLStart();return u().addQPLAnnotations(n,{string:{threadType:(e||(e=o("I64"))).to_string(t)}}),n}function d(t,n,r){u().markQPLPoint(t,"wait_act_thread_start","before fetching messages range from table"),u().addQPLAnnotations(t,{int:{version:1},string:{direction:n,thread_id:(e||(e=o("I64"))).to_string(r)}})}function m(e,t){u().markQPLFailureWithMsg(e,t)}function p(e){u().markQPLCancel(e)}function _(e){u().markQPLPoint(e,"wait_act_thread_end","before fetching messages range from table"),u().markQPLPoint(e,"load_more_msgs_start","load more messages from MAW DB")}function f(e){u().markQPLPoint(e,"load_messages_from_eb_start","load more messages from EB")}function g(e){u().markQPLPoint(e,"load_messages_from_eb_end","load more messages from EB")}function h(e){u().markQPLPoint(e,"load_messages_from_local_db_start")}function y(e){u().markQPLPoint(e,"load_messages_from_local_db_end")}function C(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_start")}function b(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_end")}function v(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_dispatch_download_state_updates_start")}function S(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_dispatch_download_state_updates_end")}function R(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_call_bridge_handlers_start")}function L(e){u().markQPLPoint(e,"insert_msgs_to_lsdb_call_bridge_handlers_end")}function E(e,t){u().markQPLPoint(e,"load_more_msgs_end","Note: OLD SOLUTION DOES NOT FETCH messages. they are fetched in afterTransaction that we cannot control"),u().addQPLAnnotations(e,{bool:{hasMoreBefore:t}})}function k(e){u().markQPLSuccess(e)}function I(e,t){u().markQPLPoint(e,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+t)}function T(e,t){u().markQPLFailure(e,t)}l.logLoadMoreMsgsStart=c,l.logLoadMoreMsgsThreadWaiting=d,l.logLoadMoreMsgsFailure=m,l.logLoadMoreMsgsCancel=p,l.logLoadMoreMsgsThreadReadyFetchMsgs=_,l.logLoadMessagesFromEBStart=f,l.logLoadMessagesFromEBEnd=g,l.logLoadMessagesFromLocalDBStart=h,l.logLoadMessagesFromLocalDBEnd=y,l.logInsertMessageResponseToLSDBStart=C,l.logInsertMessageResponseToLSDBEnd=b,l.logDispatchDownloadStateUpdatesStart=v,l.logDispatchDownloadStateUpdatesEnd=S,l.logCallBridgeHandlersStart=R,l.logCallBridgeHandlersEnd=L,l.logLoadMoreMsgsFetched=E,l.logLoadMoreMsgsSuccess=k,l.logLoadMoreMsgsRangeQuery=I,l.logLoadMoreMsgsRuntimeError=T}),98);
__d("MAWMessageIntegrityTruncateStatus",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadKey"],s,u=0,c=new Map;function d(t,n,r){var a,i=(a=c.get((s||(s=o("I64"))).to_float(t)))!=null?a:{},l=n.threadKey,u=babelHelpers.objectWithoutPropertiesLoose(n,e),d=babelHelpers.extends({},i,{lastUpsertedRange:babelHelpers.extends({},u,r,{maxTimestampMs:(s||(s=o("I64"))).to_float(n.maxTimestampMs),minTimestampMs:s.to_float(n.minTimestampMs)}),updateRangeTimestamp:Date.now()});c.set(s.to_float(t),d)}function m(e){var t,n=(t=c.get((s||(s=o("I64"))).to_float(e)))!=null?t:{},r=babelHelpers.extends({},n,{truncateTimestamp:n.truncateTimestamp==null?u:Date.now()});c.set((s||(s=o("I64"))).to_float(e),r)}function p(e){var t=c.get((s||(s=o("I64"))).to_float(e));return(t==null?void 0:t.truncateTimestamp)==null?null:t}l.setThreadLastUpsertedRange=d,l.setThreadThuncated=m,l.getThreadThuncateState=p}),98);
__d("MAWPutMessagesToDB",["MAWBridgeDeleteReactionHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeReactionUpsertHandler","MAWDataSourceLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,a){var i=n.editMsgHistory,l=n.expiringCountdown,s=n.medias,u=n.msgs,c=n.polls,d=n.quotedMsgs,m=n.reactions,p=n.receiverFetchInfoPayloads,_=n.xmas;a!=null&&o("MAWDataSourceLogger").logDispatchDownloadStateUpdatesStart(a),a!=null&&(o("MAWDataSourceLogger").logDispatchDownloadStateUpdatesEnd(a),o("MAWDataSourceLogger").logCallBridgeHandlersStart(a));var f=r("gkx")("17154");f&&await Promise.all(s.map(function(e){return o("MAWBridgeNewMediaHandler").call(t,e)})),d!=null&&d.length>0&&await o("MAWBridgeNewMsgHandler").bulkCall(t,d),await o("MAWBridgeNewMsgHandler").bulkCall(t,u),f||await Promise.all(s.map(function(e){return o("MAWBridgeNewMediaHandler").call(t,e)})),await Promise.all(_.map(function(e){return o("MAWBridgeNewXMAHandler").call(t,e)})),await Promise.all(p.map(function(e){return o("MAWBridgeNewReceiverFetchInfoHandler").call(t,e)})),await Promise.all(c.map(function(e){return o("MAWBridgeNewPollHandler").call(t,e)})),await o("MAWBridgeMsgsStartCountdownHandler").call(t,{msgs:l}),await Promise.all(m.map(function(e){return e.type==="delete"?o("MAWBridgeDeleteReactionHandler").call(t,e.reaction):o("MAWBridgeReactionUpsertHandler").call(t,e.reaction)})),await o("MAWBridgeEditMsgHistoryAddedHandler").call(e,t,i),a!=null&&o("MAWDataSourceLogger").logCallBridgeHandlersEnd(a)}function s(t,n,r){return t.runInTransaction(function(o){return e(t,o,n,r)},"readwrite","ui",void 0,i.id+":112")}function u(t,n){return t.runInTransaction(function(r){return e(t,r,babelHelpers.extends({},n,{expiringCountdown:[],hasMoreAfter:!1,hasMoreBefore:!1,noteReplyCountdown:[],xmaCountdown:[]}))},"readwrite","ui",void 0,i.id+":130")}l.insertMessageResponseToDBInExistingTransaction=e,l.insertMessageResponseIntoDatabase=s,l.insertMessageResponseIntoDatabaseByExternalId=u}),98);
__d("MAWSecureLocalDBFetch",["CometLruCache","FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","WAResultOrError","deepEquals","getErrorSafe","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=["count"],s,u=o("CometLruCache").create(20,2e3);async function c(t,n){var a=t.chatJid,i=t.config,l=t.count,s=t.direction,c=t.offsetMsg,p=t.timestampMs,_=u.get(a);if(_!=null){var f=_&&_.options,g=f.count,h=babelHelpers.objectWithoutPropertiesLoose(f,e);if(r("deepEquals")(h,{config:i,direction:s,offsetMsg:c,timestampMs:p})&&l<=g)try{return o("WAResultOrError").makeResult(babelHelpers.extends({},await _.result))}catch(e){}}return r("qex")._("18")?m(t,n):d(t,n)}async function d(e,t){var n=e.actionType,a=e.chatJid,i=e.config,l=e.count,c=e.direction,d=e.offsetMsg,m=e.timestampMs;try{var p,_=o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs",{actionType:n,chatJid:a,config:i,direction:c,externalId:d==null?void 0:d.externalId,includeOriginalMsg:(p=d==null?void 0:d.includeOriginalMsg)!=null?p:!1,msgId:(d==null?void 0:d.messageId)==null?null:o("MAWDbMsg").toMsgId(d.messageId),numMsgs:l,sortOrderMs:m!=null?(s||(s=o("I64"))).to_float(m):null},{timeoutMs:t==null?void 0:t.timeoutMs});u.set(a,{options:{config:i,count:l,direction:c,offsetMsg:d,timestampMs:m},result:_});var f=babelHelpers.extends({},await _);return o("WAResultOrError").makeResult(f)}catch(e){var g=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(g).mustfix("[MAWSecureLocalDBFetch] maw_load_msgs bridge call failed"),o("WAResultOrError").DEPRECATED_makeError("bridge_call_failed",g)}}async function m(e,t){var n=e.actionType,a=e.chatJid,i=e.config,l=e.count,c=e.direction,d=e.offsetMsg,m=e.timestampMs;try{var p,_=o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs_range",{actionType:n,chatJid:a,config:i,direction:c,range:{includeLowerBoundMsg:(p=d==null?void 0:d.includeOriginalMsg)!=null?p:!1,lowerBoundExternalId:(d==null?void 0:d.externalId)==null?void 0:d.externalId,lowerBoundSortOrderMs:m!=null?(s||(s=o("I64"))).to_float(m):void 0,numMsgs:l}},{timeoutMs:t==null?void 0:t.timeoutMs});u.set(a,{options:{config:i,count:l,direction:c,offsetMsg:d,timestampMs:m},result:_});var f=babelHelpers.extends({},await _);return o("WAResultOrError").makeResult(f)}catch(e){var g=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(g).mustfix("[MAWSecureLocalDBFetch] maw_load_msgs bridge call failed"),o("WAResultOrError").DEPRECATED_makeError("bridge_call_failed",g)}}l.default=c}),98);
__d("MAWWasmFeatureSupport",["Promise","react","react-compiler-runtime","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useState,m=null;function p(){var t=o("react-compiler-runtime").c(2),r=d(m),a=r[0],i=r[1],l,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){(e||(e=n("Promise"))).all([o("wasm-feature-detect").bulkMemory(),o("wasm-feature-detect").bigInt(),o("wasm-feature-detect").referenceTypes()]).then(function(e){var t=e[0],n=e[1],r=e[2];i({bigInt:n,bulkMemory:t,referenceTypes:r}),m={bigInt:n,bulkMemory:t,referenceTypes:r}})},s=[i],t[0]=l,t[1]=s):(l=t[0],s=t[1]),c(l,s),a}l.useWasmFeatureSupport=p}),98);
__d("MDBCClientEvent",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({THREAD_OPEN:1,CHAT_JOIN_SHEET_RENDERED:2,THREAD_JOIN:3,BROADCAST_BUTTON_RENDERED:4,RENDER_PUBLIC_BROADCAST_CHAT_NUX_QP:5,RENDER_PUBLIC_BROADCAST_CHAT_CREATION_SHEET:6,PUBLIC_BROADCAST_CHAT_CREATION_SHEET_RENDERED:7,THREAD_CREATE:8,SHARE_SHEET_RENDERED:9,COPY_LINK:10,EDIT_CHAT:11,SHARE_LINK:12,RENDER_THREAD_DETAIL:13,MUTE_CHAT:14,RENDER_CHAT_MEMBERS:15,SEEN_COUNT_RENDERED:16,SHARE_LINK_SENT:17,THREAD_SETTINGS_RENDERED:18,REPORT_MESSAGE_TO_META:19,REMOVE_MESSAGE:20,ADMIN_REMOVE_MESSAGE:21,CHAT_RENDERED_IN_MIB_INBOX:22,BLOCK_FROM_CHAT:23,DEMOTE_ADMIN_BUTTON_TAPPED:24,PROMOTE_ADMIN_FAIL_IMPRESSION:25,REMOVE_FROM_CHAT:26,MESSAGE_USER:27,VIEW_USER_PROFILE:28,ADMIN_LIMIT_REACHED_IMPRESSION:29,PROMOTE_ADMIN_BUTTON_TAPPED:30,USER_PROFILE_BOTTOMSHEET:31,BAN_FROM_CHAT_SUCCESS:32,BAN_FROM_CHAT_FAILURE:33,BAN_FROM_CHAT_INITIATION:34,NOTIFICATION_CONTROL_MUTE_SELECTED:35,NOTIFICATION_CONTROL_UNMUTE_SELECTED:36,JOIN_CHAT_CONFIRM:37,SHOW_ON_PROFILE_TOGGLE:38,SHOW_ON_PROFILE_TAPPED:39,LEAVE_CHAT:40,DELETE_CHAT:41,UNMUTE_CHAT:42,REPORTED_CONTENTS_RENDERED:43,INVITE_BUTTON_TAPPED:44,VIEW_ALL_MEMBERS:45,OPEN_INVITE_LINK_VIEW:46,REPORT_CHAT_TO_FACEBOOK:47,DISMISS_BUTTON_TAPPED:48,JOIN_CHAT_SHEET_RENDERED:49,MESSAGE_SEND:50,PUSH_NOTIFICATION_MESSAGE_RECEIVED_TAPPED:51,CREATE_CHANNEL_SCREEN_RENDERED:52,CHANGE_IMAGE_TAPPED:53,JOIN_APPROVAL_TOGGLE:54,COPY_LINK_TAPPED:55,SEARCH_BAR_INPUT_FOCUS:56,INVITE_SCREEN_RENDERED:57,DONE_BUTTON_TAPPED:58,SEND_BUTTON_TAPPED:59,SHARE_TO_FEED_SKIPPED:60,SHARE_TO_FEED_SCREEN_RENDERED:61,POST_TEXT_INPUT:62,SHARE_TO_FEED_BUTTON_TAPPED:63,NAME_TEXT_INPUT:64,EDIT_CHAT_SUCCESS:65,EDIT_CHAT_FAILURE:66,REQUIRE_APPROVAL_TO_JOIN_DISABLED:67,REQUIRE_APPROVAL_TO_JOIN_ENABLED:68,MEMBER_REQUEST_JOIN_APPROVED:69,MEMBER_REQUEST_JOIN_DENIED:70,VIEW_MEMBER_REQUESTS:71,SHARE_TO_FACEBOOK_BOTTOMSHEET_VIEWED:72,CHAT_SHARED_TO_FACEBOOK:73,EDIT_CHAT_DESCRIPTION:74,CHANGE_THREAD_PHOTO:75,INSTALL_MESSENGER_UPSELL_VIEWED:76,DOWNLOAD_MESSENGER_BUTTON_CLICKED:77,BLOCKED_USER_WARNING_RENDERED:78,BLOCKED_USER_WARNING_CONFIRM:79,NOTIF_IMPRESSION:80,NOTIF_CLICKED:81,FIRST_CREATE_BOTTOMSHEET_RENDERED:82,THREAD_CREATE_ATTEMPT:83,PUBLIC_CHAT_LINK_ATTACHMENT_RENDERED:84,PUBLIC_CHAT_LINK_ATTACHMENT_TAPPED:85,NOTIFICATION_CONTROL_ALL_SELECTED:86,NOTIFICATION_CONTROL_MENTIONS_AND_REPLIES_SELECTED:87,NOTIFICATION_CONTROL_NONE_SELECTED:88,NOTIFICATION_CONTROL_RENDERED:89,UNDO_BUTTON_TAPPED:90,INVITE_SENT_SUCCESS:91,INVITE_SENT_FAILED:92,PRIMARY_PROFILE_QP_RENDERED:93,NOT_NOW_TAPPED:94,CREATE_CHANNEL_TAPPED:95,VIEW_PINNED_CHANNELS:96,PROFILE_ABOUT_CHANNEL_SECTION_RENDERED:97,DIRECT_INVITE_SENT_SUCCESS:98,DIRECT_INVITE_SENT_FAIL:99,DIRECT_INVITE_BULK_SENT_SUCCESS:100,DIRECT_INVITE_BULK_SENT_FAIL:101,DIRECT_INVITE_NOTIFICATION_RENDERED:102,DIRECT_INVITE_SHEET_RENDERED:103,INVITE_ACCEPT:104,INVITE_DECLINE:105,CHAT_INVITE_SHEET_RENDERED:106,PAUSE_CHANNEL:107,RESUME_CHANNEL:108,THREAD_CREATE_SUCCESS:109,THREAD_CREATE_ERROR:110,NOTIFICATION_RENDERING_REQUEST_SUCCESS:111,NOTIFICATION_RECALLED:112,NOTIFICATION_DISMISS:113,NOTIFICATION_CLICK:114,FEATURED_UNIT_PROFILE_QP_RENDERED:115,PIN_CARD_TAPPED:116,PIN_FEATURED_CARD_SUCCESS:117,PIN_FEATURED_CARD_FAILURE:118,CHANNELS_FEATURED_UNIT_RENDERED:119,CHANNELS_FEATURED_UNIT_SEE_ALL_TAPPED:120,RENDER_CHAT_INVITE_SHEET:121,RENDER_INVITE_PRESET_LIST:122,INVITE_PRESET_LIST_RENDERED:123,CREATE_POST_BUTTON_TAPPED:124,RENDER_CHANNEL_PAUSE_CONFIRMATION_DIALOG:125,RENDER_CHANNEL_RESUME_CONFIRMATION_DIALOG:126,DISMISS_PAUSE_CHANNEL_DIALOG:127,DISMISS_RESUME_CHANNEL_DIALOG:128,CANCEL_RESUME_CHANNEL:129,CANCEL_PAUSE_CHANNEL:130,DEEPLINK_LANDING_PAGE_RENDERED:131,DIRECT_INVITE_SHEET_SKIPPED:132,CREATE_POST_BUTTON:133,CYSC_QP_CARD_IMPRESSION:134,SHOW_ON_PROFILE_RENDERED:135,THREAD_PREVIEW_OPEN:136,NON_MEMBER_COMPOSER_SHOWN:137,REACTIONS_UNEXPECTED_DROP:138,REACTIONS_MUTATION_SUCCESS:139,REACTIONS_MUTATION_FAILURE:140,REACTIONS_TRAY_EMPTY_ERROR:141,SET_CHAT_CREATION_PHOTO:142,SHARE_LINK_TO_FB_CONFIRM:143,BIIM_INBOX_BROADCAST_CREATE_BUTTON_RENDERED:144,BIIM_INBOX_BROADCAST_CREATE_BUTTON_TAPPED:145,PUBLIC_BROADCAST_CHAT_NUX_QP_RENDERED:146,PUBLIC_BROADCAST_CHAT_NUX_QP_TAPPED:147,PIN_FEATURED_CARD_TOGGLE:148,PIN_TO_INBOX_SUCCESS:149,PIN_TO_INBOX_FAILURE:150,UNPIN_FROM_INBOX_SUCCESS:151,UNPIN_FROM_INBOX_FAILURE:152,PINNED_THREAD_RENDERED:153,CHANNELS_TAB_ITEM_RENDERED:154,CHANNELS_TAB_ITEM_TAPPED:155,PROFILE_CHANNELS_TAB_RENDERED:156,PROMPT_ACCOUNT_SWITCH_QP_RENDERED:157,PROMPT_ACCOUNT_SWITCH_QP_CREATE_CHANNEL_TAPPED:158,PROMPT_ACCOUNT_SWITCH_QP_DISMISSED:159,CYSC_NEWSFEED_QP_RENDERED:160,CREATE_CHANNEL_OPTION_RENDERED:161,CHANNELS_LIST_RENDERED:162,CHANNELS_LIST_NULL_STATE_RENDERED:163,PUBLIC_BROADCAST_CHANNEL_APPLUS_QP:164,BROADCAST_CHANNEL_TAPPED:165,MESSENGER_SEARCH_PUBLIC_CHANNEL_RENDERED:166,PROFILE_INTRO_CARD_CHANNEL_RENDERED:167,DIRECT_INVITE_JEWEL_NOTIFICATION_CHANNEL_RENDERED:168,PERSISTENT_INVITE_CHANNEL_RENDERED:169,KEEP_EDITING_BUTTON_TAPPED:170,THREAD_TOMBSTONE_IMPRESSION:171,VIEW_PAGE_STATUS_PRESSED:172,FIRST_CREATE_FULLSCREEN_NUX_RENDERED:173,FIRST_CREATE_FULLSCREEN_NUX_TAPPED:174,DIRECTORY_SEARCH_NULLSTATE_IMPRESSION:175,DIRECTORY_PEOPLE_TAB_IMPRESSION:176,DIRECTORY_OPEN:177,DIRECTORY_FEED_QP_IMPRESSION:178,DIRECTORY_RECOMMENDATION_LIST_IMPRESSION:179,SHARE_BUTTON_ON_THREAD_HEADER:180,DIRECTORY_FEED_SEE_ALL_TAPPED:181,CHANNELS_WAITLIST_RENDERED:182,REQUEST_ACCESS_ATTEMPT:183,LEARN_MORE_TAPPED:184,REQUEST_ACCESS_SUCCESS:185,CHANNELS_SURVERY_RENDERED:186,SUBMIT_SURVEY_ATTEMPT:187,SUBMIT_SURVEY_SUCCESS:188,ALREADY_REGISTERED_VIEW_RENDERED:189,NOT_ELIGIBLE_VIEW_RENDERED:190,LOGGED_OUT_VIEW_RENDERED:191,DISCOVER_CHANNELS_TAPPED:192,CHANNELS_WAITLIST_ACCOUNT_SWITCH_RENDERED:193,WAITLIST_ACCOUNT_SWITCH_ATTEMPT:194,ALREADY_HAS_ACCESS_VIEW_RENDERED:195,MBS_CHANNELS_TAB_IMPRESSION:196,MBS_CHANNELS_TAB_TAPPED:197,MBS_CHANNELS_ENTRYPOINT_BUTTON_IMPRESSION:198,MBS_CHANNELS_ENTRYPOINT_BUTTON_TAPPED:199,WEB_SUBSCRIBE_TO_THREAD_CREATION_STATUS_TABLE:200,WEB_THREAD_CREATION_STATUS_PENDING:201,WEB_SUBSCRIBE_TO_THREADS_TABLE_DURING_CREATE:202,WEB_THREAD_CREATED_WAITING_FOR_THREAD_LINK:203,JOIN_CHAT_NUX_CONFIRM:204,JOIN_CHAT_NUX_CANCEL:205,JOIN_CHAT_NUX_RENDERED:206,MUTE_ON_LEAVE_DIALOG_RENDERED:207,DIRECTORY_FEED_QP_PREVIEW_TAPPED:208,INVITED_AND_DIRECTORY_SCREEN_IMPRESSION:209,INVITED_CHANNELS_SCREEN_IMPRESSION:210,INVITED_AND_DIRECTORY_SCREEN_TAP_SEE_ALL:211,PROMPT_ACCOUNT_SWITCH_QP_ACCOUNT_SWITCH_STARTED:212,PROMPT_ACCOUNT_SWITCH_QP_ACCOUNT_SWITCH_COMPLETED:213,PROMPT_ACCOUNT_SWITCH_QP_CREATION_FLOW_STARTED:214,SHARE_TO_STORY_TAPPED:215,CHANNEL_STICKER_RENDERED:216,BUMP_THREAD_TO_INBOX_TAPPED:217,UNBUMP_THREAD_FROM_INBOX_TAPPED:218,DIRECTORY_FEED_QP_DISMISS_BUTTON_TAPPED:219,MBS_CHANNELS_TAB_WITH_BADGE_IMPRESSION:220,MBS_CHANNELS_TAB_WITH_BADGE_TAPPED:221,EARLY_ACCESS_AWARENESS_SCREEN_IMPRESSION:222,EARLY_ACCESS_AWARENESS_BUTTON_CLICK:223,SHARE_MESSAGE_TO_STORY_TAPPED:224,CHANNEL_MESSAGE_STICKER_RENDERED:225,SHARE_CHANNEL_TO_STORY_BOTTOMSHEET_RENDERED:226,EARLY_ACCESS_BROADCAST_CHANNEL_TOGGLE_RENDERED:227,EARLY_ACCESS_BROADCAST_CHANNEL_TOGGLE_CLICKED:228,EARLY_ACCESS_BROADCAST_CHANNEL_TIME_SETTING_CLICKED:229,EARLY_ACCESS_BROADCAST_CHANNEL_MESSAGE_EDITED:230,EARLY_ACCESS_BROADCAST_CHANNEL_LEARN_MORE_CLICKED:231,FORWARDED_MESSAGE_CHANNEL_CLICK:232,MESSAGE_FORWARD_CLICK:233,VIEW_PINNED_MESSAGES:234,PIN_MESSAGE:235,UNPIN_MESSAGE:236,HIGHLIGHTS_TAB_REACTION_CONTAINER:237,HIGHLIGHTS_TAB_REACTION_PILL:238,SHARE_TO_CHANNELS_ENTRY_POINT_RENDERED:239,SHARE_TO_CHANNELS_ENTRY_POINT_TAPPED:240,SHARE_TO_CHANNELS_PAGE_IMPRESSION:241,SHARE_TO_CHANNELS_CHANNEL_TAPPTED:242,SHARE_TO_CHANNELS_DEFAULT_TOGGLE_CLICKED:243,SHARE_TO_CHANNELS_SHARING_UNAVAILABLE:244,JOIN_TOAST_UNDO_TAPPED:245,MEMBERSHIP_MILESTONE_SCREEN_IMPRESSION:246,MEMBERSHIP_MILESTONE_IMAGE_CARD_TAPPED:247,MEMBERSHIP_MILESTONE_SEND_BUTTON_TAPPED:248,DM_VIEW_CHANNEL_BUTTON:249,MBS_CONTENT_CHANNELS_NULL_STATE_BUTTON_TAPPED:250,MBS_CONTENT_CHANNELS_NULL_STATE_BUTTON_IMPRESSION:251,MBS_CONTENT_CHANNELS_LIST_CHANNEL_TAPPED:252,CHANNELS_GUTTER_UNIT_RENDERED:253,SHARE_POST_TO_BC_EDUCATION_BOTTOMSHEET_IMPRESSION:254,TURN_ON_TAPPED:255,SHARE_POST_TO_BC_SCREEN_IMPRESSION:256,MBS_CONTENT_CHANNELS_NULL_STATE_COMPONENT_IMPRESSION:257,ENGAGEMENT_REMINDER_SCREEN_IMPRESSION:258,ENGAGEMENT_REMINDER_ADD_ATTACHMENT_TAPPED:259,ENGAGEMENT_REMINDER_SEND_BUTTON_TAPPED:260,PUBLIC_BROADCAST_CHANNEL_NUX_CAROUSEL_SLIDE_RENDERED:261,ABOUT_CHANNEL_TAP:262,ABOUT_CHANNEL_VIEW_PAGE_TAP:263,ABOUT_CHANNEL_CLOSE:264,TOP_FAN_PERKS_SETTINGS_BROADCAST_CHANNEL_VIEW_IMPRESSION:265,TOP_FAN_PERKS_SETTINGS_BROADCAST_CHANNEL_VIEW_BUTTON_CLICK:266,BROADCAST_CHANNELS_LEARN_MORE_IMPRESSION:267,BROADCAST_CHANNELS_LEARN_MORE_CONFIRM_BUTTON_CLICK:268,SHARE_TO_STORY_MSGR_TO_FB_DEEPLINK_HANDLED:269,UNJOINED_THREAD_ITEM_TAPPED:270,CONTENT_CHAINING_BUTTON_IMPRESSION:271,CONTENT_CHAINING_BUTTON_CLICKED:272,PIN_POST_TOGGLED_ON:273,PIN_POST_TOGGLED_OFF:274,CREATE_OR_MESSAGE_BOTTOMSHEET_IMPRESSION:275,BIIM_PERSONAL_INBOX_TOGGLE:276,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_DIALOG_IMPRESSION:277,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_DECLINED:278,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_APPROVED_ALWAYS:279,PERSONAL_INBOX_VOICE_SWITCH_CONSENT_APPROVED_ONCE:280,UNJOINED_THREAD_HEADER_TAP:281,CONTENT_CHAINING_SCREEN_IMPRESSION:282,CONTENT_CHAINING_POST_CELL_IMPRESSION:283,CONTENT_CHAINING_POST_CELL_CLICKED:284,CONTENT_CHAINING_BUTTON_CELL_IMPRESSION:285,CONTENT_CHAINING_BUTTON_CELL_CLICKED:286,SHARE_TO_CHANNELS_SHARESHEET_ENTRY_POINT_IMPRESSION:287,SHARE_TO_CHANNELS_SHARESHEET_ENTRY_POINT_TAPPED:288,SHARE_TO_CHANNELS_SHARESHEET_CHANNEL_TAPPED:289,SHARE_TO_CHANNELS_SHARESHEET_SEND_BUTTON_TAPPED:290,CREATE_OR_MESSAGE_BOTTOMSHEET_LOADING_SCREEN_IMPRESSION:291,PIN_CHANNEL_TO_MESSENGER_TOGGLE_TAPPED:292,SHARE_TO_CHANNELS_SHARESHEET_SEND_SUCCESS:293,SHARE_TO_CHANNELS_SHARESHEET_SEND_FAILURE:294,SHARE_TO_CHANNELS_SHARESHEET_CONFIRMATION_TOAST_IMPRESSION:295,CONTENT_CHAINING_LAUNCH_FAILURE:296,RENDER_PROMPT_CREATION_PILL:297,RENDER_DAILY_PROMPT_CREATOR_NUX_SHEET:298,DAILY_PROMPT_CREATOR_NUX_SHEET_RENDERED:299,DISMISS_DAILY_PROMPT_CREATOR_NUX_SHEET:300,DAILY_PROMPT_CREATION_SHEET_RENDERED:301,RENDER_DAILY_PROMPT_CREATION_SHEET:302,CANCEL_DAILY_PROMPT_CREATION_SHEET:303,START_DAILY_PROMPT:304,RENDER_DAILY_PROMPT_RESPONSES_SHEET:305,DAILY_PROMPT_RESPONSES_SHEET_RENDERED:306,RENDER_DAILY_PROMPT_RESPONSE_REPLY_SHEET:307,REPLY_DAILY_PROMPT_RESPONSE:308,RENDER_DELETE_DAILY_PROMPT_RESPONSE_DIALOG:309,DELETE_DAILY_PROMPT_RESPONSE:310,DISMISS_DELETE_DAILY_PROMPT_RESPONSE:311,REPORT_DAILY_PROMPT_RESPONSE:312,DAILY_PROMPT_RESPONSE_REACT:313,DAILY_PROMPT_RESPONSE_CREATION_SHEET_RENDERED:314,CREATE_DAILY_PROMPT_RESPONSE:315,DELETE_DAILY_PROMPT_DIALOG_RENDERED:316,DELETE_DAILY_PROMPT:317,CANCEL_DELETE_DAILY_PROMPT:318,DAILY_PROMPT_SHARE_SHEET_RENDERED:319,COLLECT_FEEDBACK_SCREEN_IMPRESSION:320,COLLECT_FEEDBACK_POST_CARD_TAPPED:321,COLLECT_FEEDBACK_NEW_QUESTION_BUTTON_TAPPED:322,COLLECT_FEEDBACK_SEND_BUTTON_TAPPED:323,REPORT_DAILY_PROMPT_DIALOG_RENDERED:324,SHARE_TO_CHANNELS_PAGE_SAVE_TAPPED:325,COLLECT_FEEDBACK_SECTION_TOGGLED:326,SEND_A_MESSAGE_SECTION_TOGGLED:327,PERSONAL_INBOX_OPT_IN_ENTRY_POINT_RENDERED:328,PERSONAL_INBOX_OPT_IN:329,PERSONAL_INBOX_OPT_IN_ENTRY_POINT_DISMISSED:330,PERSONAL_INBOX_OPT_OUT_AND_VIEW_AS_MEMBER:331,CHANNEL_INSIGHTS:332,FIRST_MESSAGE_SCREEN_IMPRESSION:333,FIRST_MESSAGE_SCREEN_SKIP_BUTTON_TAPPED:334,FIRST_MESSAGE_SCREEN_SEND_BUTTON_TAPPED:335,FIRST_MESSAGE_SCREEN_SUGGESTION_HSCROLL:336,FIRST_MESSAGE_SCREEN_SUGGESTION_TAPPED:337,FIRST_MESSAGE_SCREEN_MESSAGE_EDITED:338,CHANNEL_INSIGHTS_HOME_IMPRESSION:339,CHANNEL_INSIGHTS_INTERACTION_HEADER:340,CHANNEL_INSIGHTS_INTERACTION_BREAKDOWN:341,PROMPT_CREATION_COMPOSER_TOOLTIP_IMPRESSION:342,MILESTONE_NOTIFICATION_BOTTOMSHEET_RENDERED:343,MILESTONE_NOTIFICATION_BOTTOMSHEET_BUTTON_TAPPED:344,INBOX_SNIPPET_RENDERED:345,INBOX_SNIPPET_ROW_TAPPED:346,NOTIFICATION_SETTING_BOTTOM_SHEET_SHOWN:347,NOTIFICATION_SETTING_BOTTOM_SHEET_NOTIFICATION_SETTING_TAPPED:348,NOTIFICATION_SETTING_BOTTOM_SHEET_DISMISSED:349,NOTIFICATION_SETTING_BOTTOM_SHEET_NOTIFICATION_TOGGLE_CHANGED:350,BEST_PRACTICES_PAGE_ACTION_TAPPED:351,BEST_PRACTICES_PAGE_RENDERED:352,PAID_PARTNERHIP_DRAWER_OPTION_TAPPED:353,PAID_PARTNERHIP_TOGGLE_UPDATED:354,FANDOM_CHANNEL_ENTRYPOINT_CLICKED:355,PRODASH_NEXT_STEP_TIP_TAPPED:356,FANDOM_INTEGRATION_PILLS_RENDERED:357,FANDOM_INTEGRATION_PILLS_CLICKED:358,CONVERSATION_STARTER_PILLS_CLICKED:359,CONVERSATION_STARTER_PILLS_RENDERED:362,CHANNEL_POLLS_RENDERED:363,CHANNEL_POLLS_OPTION_SELECTED:365,DAILY_PROMPT_CREATION_SUGGESTION_TAPPED:366,FANDOM_CHANNEL_ENTRYPOINT_IMPRESSION:367,ATS_SHORTCUT_ICON_RENDERED:368}),l=e;i.default=l}),66);
__d("MWBroadcastChannelLoggingShapes",[],(function(t,n,r,o,a,i){"use strict";var e={action:2,event:191,parentSurface:11,source:105,surface:73},l={action:1,clientExtras:{entry_point:"public_chats:comet_www_inbox"},event:95,parentSurface:7,source:8,surface:4},s={action:2,clientExtras:{entry_point:"public_chats:comet_www_inbox"},event:161,parentSurface:7,source:8,surface:4},u={action:1,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:95,parentSurface:11,source:8,surface:58},c=babelHelpers.extends({},u,{clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"}}),d=babelHelpers.extends({},u,{clientExtras:{entry_point:"public_chats:profile_from_mbs"}}),m=babelHelpers.extends({},u,{clientExtras:{entry_point:"public_chats:fandom_create_channel_email"}}),p={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:162,parentSurface:21,source:90,surface:59},_={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"},event:163,parentSurface:21,source:90,surface:59},f={action:2,clientExtras:{entry_point:"public_chats:profile_channels_tab_item"},event:161,parentSurface:21,source:90,surface:59},g=babelHelpers.extends({},f,{clientExtras:{entry_point:"public_chats:profile_channels_tab_null_state"}}),h={action:2,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:164,parentSurface:11,source:92,surface:65},y={action:2,clientExtras:{entry_point:"public_chats:profile_qp"},event:164,parentSurface:21,source:92,surface:66},C={action:2,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:161,parentSurface:11,source:92,surface:65},b={action:2,clientExtras:{entry_point:"public_chats:profile_qp"},event:161,parentSurface:21,source:92,surface:66},v={action:1,clientExtras:{entry_point:"public_chats:newsfeed_qp"},event:95,parentSurface:11,source:8,surface:65},S={action:1,clientExtras:{entry_point:"public_chats:profile_qp"},event:95,parentSurface:21,source:8,surface:66},R={action:1,clientExtras:{entry_point:"public_chats:profile_creation_bar"},event:95,parentSurface:11,source:88,surface:64},L={action:1,clientExtras:{entry_point:"public_chats:channel_creation_qp"},event:95,parentSurface:11,source:67,surface:27},E={action:1,clientExtras:{entry_point:"public_chats:newsfeed_composer"},event:95,parentSurface:11,source:88,surface:69},k={action:1,clientExtras:{entry_point:"public_chats:channels_gutter"},event:95,parentSurface:11,source:8,surface:91},I={action:2,clientExtras:{entry_point:"public_chats:profile_creation_bar"},event:161,parentSurface:11,source:88,surface:64},T={action:2,clientExtras:{entry_point:"public_chats:newsfeed_composer"},event:161,parentSurface:11,source:88,surface:69},D={action:1,event:147,parentSurface:4,source:81,surface:51},x={action:1,event:165,parentSurface:21,source:93,surface:58},$={action:1,event:148,parentSurface:11,source:89,surface:21},P={action:2,event:7,parentSurface:17,source:82,surface:41},N={action:2,event:146,parentSurface:4,source:81,surface:51},M={action:2,event:261,parentSurface:4,source:81,surface:51},w={action:1,event:53,parentSurface:4,source:81,surface:51},A={action:1,event:8,parentSurface:17,source:8,surface:41},F={action:1,event:234,parentSurface:8,source:27,surface:16},O={action:1,event:234,parentSurface:7,source:62,surface:7},B={action:1,event:235,parentSurface:7,source:62,surface:7},W={action:1,event:236,parentSurface:7,source:62,surface:7},q={action:2,event:239,parentSurface:11,source:147,surface:87},U={action:1,event:240,parentSurface:11,source:147,surface:87},V={action:2,event:241,parentSurface:11,source:147,surface:87},H={action:1,event:242,parentSurface:11,source:147,surface:87},G={action:1,event:243,parentSurface:11,source:147,surface:87};i.CREATOR_WAITLIST_LOGGED_OUT_VIEW_RENDERED=e,i.CREATE_CHANNEL_TAPPED_FULL_PAGE_SHAPE=l,i.CREATE_CHANNEL_OPTION_RENDERED_FULL_PAGE_SHAPE=s,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_SHAPE=u,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_NULL_STATE_SHAPE=c,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_MBS_SHAPE=d,i.CREATE_CHANNEL_TAPPED_CHANNELS_TAB_FCC_EMAIL_SHAPE=m,i.CHANNELS_LIST_RENDERED_SHAPE=p,i.CHANNELS_LIST_NULL_STATE_RENDERED_SHAPE=_,i.CREATE_CHANNEL_OPTION_CHANNELS_TAB_RENDERED_SHAPE=f,i.CREATE_CHANNEL_OPTION_CHANNELS_TAB_NULL_STATE_RENDERED_SHAPE=g,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_RENDERED_SHAPE=h,i.CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_RENDERED_SHAPE=y,i.CREATE_CHANNEL_OPTION_NEWSFEED_QP_RENDERED_SHAPE=C,i.CREATE_CHANNEL_OPTION_PROFILE_PAGE_QP_RENDERED_SHAPE=b,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_TAP_SHAPE=v,i.CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_TAP_SHAPE=S,i.CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_TAP_SHAPE=R,i.CREATE_BROADCAST_CHANNEL_JEWEL_QP_TAP_SHAPE=L,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_TAP_SHAPE=E,i.CREATE_BROADCAST_CHANNEL_FROM_GUTTER_TAP_SHAPE=k,i.CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_RENDERED_SHAPE=I,i.CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_RENDERED_SHAPE=T,i.APPLUS_BROADCAST_CHANNEL_EDUCATION_NUX_BUTTON_TAP_SHAPE=D,i.APPLUS_TAP_BROADCAST_CHANNEL_IN_CHANNELS_TAB_SHAPE=x,i.APPLUS_TAP_PIN_TO_FEATURE_IN_CREATION_FORM=$,i.PUBLIC_BROADCAST_CHAT_CREATION_SHEET_RENDERED_SHAPE=P,i.APPLUS_BROADCAST_CHANNEL_EDUCATION_NUX_RENDERED_SHAPE=N,i.PUBLIC_BROADCAST_CHANNEL_NUX_CAROUSEL_SLIDE_RENDERED=M,i.BROADCAST_CHANNEL_CHANGE_IMAGE_TAP_SHAPE=w,i.THREAD_CREATE_TAP_SHAPE=A,i.VIEW_PINNED_MESSAGES_FROM_THREAD_DETAIL=F,i.VIEW_PINNED_MESSAGES_FROM_THREAD_VIEW_BANNER=O,i.PIN_MESSAGE=B,i.UNPIN_MESSAGE=W,i.SHARE_TO_CHANNELS_ENTRY_POINT_RENDERED=q,i.SHARE_TO_CHANNELS_ENTRY_POINT_TAPPED=U,i.SHARE_TO_CHANNELS_PAGE_IMPRESSION=V,i.SHARE_TO_CHANNELS_CHANNEL_TAPPED=H,i.SHARE_TO_CHANNELS_DEFAULT_TOGGLE_CLICKED=G}),66);
__d("MWLogBroadcastChannelFalcoEvent",["I64","emptyFunction","requireDeferred","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").__setRef("MWLogBroadcastChannelFalcoEvent"),u=new Set([161,119]),c=300*1e3,d=null,m=null;function p(e){return e.current?r("emptyFunction"):(e.current=!0,function(e){return _(e)})}function _(t){var n=t.action,a=n===void 0?1:n,i=t.clientExtras,l=t.event,p=t.parentSurface,_=p===void 0?3:p,f=t.source,g=t.surface,h=t.threadFbid,y=t.recipientId;s.onReady(function(t){var n=Date.now();(d==null||m!=null&&n-m>c||u.has(l))&&(d=r("uuidv4")()),m=n,t.log(function(){return{action:a,action_name:a,event:l,event_name:l,extra:i,parent_surface:_,parent_surface_name:_,recipient_id:y,session_id:d,source:f,source_name:f,surface:g,surface_name:g,thread_id:h!=null?(e||(e=o("I64"))).to_string(h):void 0}})})}l.useLogBroadcastChannelFalcoEventWithRef=p,l.logBroadcastChannelFalcoEvent=_}),98);
__d("MWPConversationSearchLogger",["I64","LSMessagingThreadTypeUtil","LsMessageSearchEndFalcoEvent","LsMessageSearchMsgImpressionFalcoEvent","LsMessageSearchMsgResultChosenFalcoEvent","LsMessageSearchSearchClickedFalcoEvent","LsMessageSearchStartFalcoEvent","LsMessageSearchThreadImpressionFalcoEvent","LsMessageSearchThreadListClickFalcoEvent","coerceMessagingThreadTypeToLSThreadType","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=void 0;function c(e,t,n){var o=e?u!=null?u:d():r("uuidv4")(),a={instanceId:o,threadKey:t,threadType:n,universalSearchInstanceId:e?o:void 0};return s=a,a}function d(){var e=r("uuidv4")();return u=e,e}function m(){var e=d();r("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:2,message_search:{instance_id:e,surface_name:0,universal_search_instance_id:e}}})}function p(t,n){var a=u;if(a!=null){var i=t.threadKey,l=t.threadType;c(!0,i,l),r("LsMessageSearchThreadListClickFalcoEvent").log(function(){var i;return{message_search:{instance_id:a,msg_match_cnt:(e||(e=o("I64"))).to_string((i=t.matchCount)!=null?i:(e||(e=o("I64"))).zero),secure_msg_match_cnt:n!=null?n.toString():null,universal_search_instance_id:a},thread:{type:r("coerceMessagingThreadTypeToLSThreadType")(l)}}})}}function _(t,n){var a=u;if(a!=null){var i=t.threadType;r("LsMessageSearchThreadImpressionFalcoEvent").log(function(){var l;return{message_search:{instance_id:a,msg_match_cnt:(e||(e=o("I64"))).to_string((l=t.matchCount)!=null?l:(e||(e=o("I64"))).zero),secure_msg_match_cnt:n!=null?n.toString():null,surface_name:0,universal_search_instance_id:a},thread:{type:r("coerceMessagingThreadTypeToLSThreadType")(i)}}})}}function f(){var e=s;e!=null&&(r("LsMessageSearchEndFalcoEvent").log(function(){return{end_action:0,message_search:{instance_id:e.instanceId,universal_search_instance_id:e.universalSearchInstanceId}}}),s=void 0)}function g(e,t){f();var n=c(!1,e,t),a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);r("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:0,is_fts:a,message_search:{instance_id:n.instanceId,surface_name:1},thread:{type:r("coerceMessagingThreadTypeToLSThreadType")(t)}}})}function h(){var e=s;e!=null&&r("LsMessageSearchSearchClickedFalcoEvent").log(function(){return{message_search:{instance_id:e.instanceId,universal_search_instance_id:e.universalSearchInstanceId},thread:{type:e.threadType!=null?r("coerceMessagingThreadTypeToLSThreadType")(e.threadType):void 0}}})}function y(e){if((e==null?void 0:e.threadType)!=null)return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)?1:0}function C(t,n,a){var i=s;i!=null&&r("LsMessageSearchMsgResultChosenFalcoEvent").log(function(){return{click_surface_name:1,message:{message_type:y(a),sent_time:(a==null?void 0:a.messageTimestampMs)!=null?(e||(e=o("I64"))).to_float(a.messageTimestampMs):void 0},message_search:{instance_id:i.instanceId,universal_search_instance_id:i.universalSearchInstanceId},position:n.toString(),prev_or_next:t,thread:{type:i.threadType!=null?r("coerceMessagingThreadTypeToLSThreadType")(i.threadType):void 0}}})}function b(t){var n=s;n!=null&&r("LsMessageSearchMsgImpressionFalcoEvent").log(function(){return{message:{message_type:y(t),sent_time:(t==null?void 0:t.messageTimestampMs)!=null?(e||(e=o("I64"))).to_float(t.messageTimestampMs):void 0},message_search:{instance_id:n.instanceId,surface_name:5,universal_search_instance_id:n.universalSearchInstanceId},thread:{type:n.threadType!=null?r("coerceMessagingThreadTypeToLSThreadType")(n.threadType):void 0}}})}var v={logMessageSearchEnd:f,logMessageSearchMsgImpression:b,logMessageSearchMsgResultChosen:C,logMessageSearchSearchClicked:h,logMessageSearchStart:g,logUniversalMessageSearch:m,logUniversalMessageSearchThreadClicked:p,logUniversalMessageSearchThreadImpression:_};l.default=v}),98);
__d("MpsMessageToLoadResponse",["FBLogger","MpsMessageToBridge","MpsMessageToBridgeWrapper","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=[],i=[],l=[],u=[],c=[],d=[],m=[],p=[],_=[],f=0,g=new Set,h=function(){var t,n=(t=o("MpsMessageToBridge").mpsFullMessagetoBridge(y))!=null?t:{},h=n.supplementals,C=n.topLevel;h==null||h.forEach(function(e){e.kind==="bridgeEditHistoryMsg"?a.push(e.value):e.kind==="bridgeReactionAction"?i.push(e.value):e.kind==="bridgeMsgsStartCountdown"?c.push.apply(c,e.value.msgs):e.kind==="bridgeXMAStartCountdown"?d.push.apply(d,e.value.msgs):e.kind==="bridgeNoteReplyStartCountdown"?m.push.apply(m,e.value.msgs):e.kind==="bridgeMedia"?_.push(e.value):e.kind==="bridgeReceiverFetchInfo"?p.push(e.value):e.kind==="bridgeXMA"&&u.push(e.value)}),(C==null?void 0:C.kind)==="bridgeMsg"&&l.push(C.value);var b=C!=null&&C.kind==="bridgeMsg"&&C.value.type_===o("WAMsgType").MSG_TYPE.FUTUREPROOF;if(C==null||b){f++,r("FBLogger")("mps").tags(["MpsMessageToLoadResponse"]).INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Could not convert MPS msg to Bridge msg, id: ",", isFutureProof: ",""])),y.toplevelProtobuf.messageId,b);var v=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(y.toplevelProtobuf),S=v.deserialize(),R=S.encryptedTransportMessage(),L="unknownFieldCount",E=R==null?void 0:R.subProtocol(),k=S.adminMessage();if(E!=null)e:{if((typeof E=="object"&&E!==null||typeof E=="function")&&E.kind==="consumerApplication"){var I,T;Object.keys((I=R==null||(T=R.consumerMessage())==null||(T=T.payload)==null?void 0:T.content)!=null?I:{}).forEach(function(e){e!==L&&g.add("consumer:"+e)});break e}if((typeof E=="object"&&E!==null||typeof E=="function")&&E.kind==="armadillo"){var D,x;Object.keys((D=R==null||(x=R.armadillo())==null||(x=x.payload)==null?void 0:x.content)!=null?D:{}).forEach(function(e){e!==L&&g.add("armadillo:"+e)});break e}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+E)}else if(k!=null){var $;Object.keys(($=k.proto)!=null?$:{}).forEach(function(e){e!==L&&g.add("admin:"+e)})}else S.encryptedTransportEvent()!=null?g.add("transportEvent"):S.locallyTransformedMessage()!=null?g.add("locallyTransformed"):(g.add("unknown"),r("FBLogger")("mps").tags(["MpsMessageToLoadResponse"]).mustfix("Unrecognised message"));r("FBLogger")("mps").tags(["MpsMessageToLoadResponse"]).INFO(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unrendered msg type, id: ",", type: ",""])),y.toplevelProtobuf.messageId,Array.from(g).join(","))}};for(var y of t)h();var C={editMsgHistory:a,expiringCountdown:c,medias:_,msgs:l,noteReplyCountdown:m,polls:[],reactions:i,receiverFetchInfoPayloads:p,xmaCountdown:d,xmas:u};return f>0&&(n==null||n.addQPLAnnotations({int:{mpsUnrenderedCount:f},string_array:{mpsUnkownMsgTypes:Array.from(g)}})),C}l.messageToLoadMsgsResponse=u}),98);
__d("useMAWHasUserVisibleErrors",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.user_visible_errors?(a=function(){return o("ReQL").fromTableDescending(n.tables.user_visible_errors).filter(u)},t[0]=n.tables.user_visible_errors,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useFirst(a,l,i.id+":24");return s!=null}function u(e){var t=e.presentationStyle;return t==="banner"}l.default=s}),98);
__d("useMAWUnsupportedBrowserNUX",["MAWIsIDBOperational","MAWWasmFeatureSupport","WebStorage","gkx","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(3),n=o("MAWIsIDBOperational").useIsIDBOperational(),a=o("MAWWasmFeatureSupport").useWasmFeatureSupport(),i=a==null||a.bigInt&&a.bulkMemory&&a.referenceTypes,l=!n||!i||(e||(e=r("WebStorage"))).getLocalStorage()==null,s=r("gkx")("1778")||l,u;return t[0]!==l||t[1]!==s?(u={shouldHideEBFlow:l,shouldShowQP:s},t[0]=l,t[1]=s,t[2]=u):u=t[2],u}l.useMAWUnsupportedBrowserNUX=s}),98);/*FB_PKG_DELIM*/
__d("BaseTypeaheadLayoutContextualStrategyStateContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("useBaseTypeaheadLayoutContextualStrategyStateContext",["BaseTypeaheadLayoutContextualStrategyStateContext","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(r("BaseTypeaheadLayoutContextualStrategyStateContext"));if(e==null)throw r("FBLogger")("typeahead_framework").mustfixThrow("Contextual Layout Strategy State is not found");return e}l.default=u}),98);
__d("useCometInternalTypeaheadFetchHandler",["react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect;function d(e){var t=e.loggingProvider,n=e.queryString,o=e.traceProvider,a=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),i=a.isOpened,l=r("useCometInternalTypeaheadState")(),s=l.activeEntries,d=r("useCometInternalTypeaheadFetch")(),m=d.fetch,p=u(function(){function e(e,n){var r=null;t!=null&&(r=t.addEvent({action:"keystroke",entries:s,queryString:e},"useCometInternalTypeaheadFetchHandler"));var o=r!=null?{loggingEventTrace:r,perfTraceAPI:n,query:e}:{perfTraceAPI:n,query:e};m(o)}var r=n.trimLeft().replace(/\s+/g," ");i&&(o?o.trace(function(t){return e(r,t)},r):e(r))},[s,m,i,t,n,o]);c(p,[i,n])}l.default=d}),98);
__d("BaseTypeaheadDataFetchTrigger.react",["react-compiler-runtime","useCometInternalTypeaheadFetchHandler"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(4),n=e.loggingProvider,a=e.queryString,i=e.traceProvider,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l={loggingProvider:n,queryString:a,traceProvider:i},t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],r("useCometInternalTypeaheadFetchHandler")(l),null}l.default=e}),98);
__d("cometTypeaheadMouseUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e!=null&&(e.ctrlKey||e.metaKey||e.shiftKey)}i.hasModifierKeyPressed=e}),66);
__d("useCometInternalTypeaheadOnAbandonLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(5),n=e.callback,a=e.loggingProvider,i=e.queryString,l=r("useCometInternalTypeaheadState")(),s=l.activeEntries,u;return t[0]!==s||t[1]!==n||t[2]!==a||t[3]!==i?(u=function(){a!=null&&a.isSessionActive()&&(a.addEvent({action:"abandon",entries:s,queryString:i},"useCometInternalTypeaheadOnAbandonLoggingHandler"),a.endSession()),n&&n()},t[0]=s,t[1]=n,t[2]=a,t[3]=i,t[4]=u):u=t[4],u}l.default=u}),98);
__d("useCometInternalTypeaheadOnEnterLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(6),n=e.loggingProvider,a=e.onEnter,i=e.queryString,l=r("useCometInternalTypeaheadState")(),s=l.activeEntries,u=l.highlightedEntry,c;return t[0]!==s||t[1]!==u||t[2]!==n||t[3]!==a||t[4]!==i?(c=function(){u!=null&&n&&n.addEvent({action:"click",entries:s,entry:u,queryString:i},"useCometInternalTypeaheadOnEnterLoggingHandler:without_highlightedEntry"),u==null&&n&&n.addEvent({action:"enter",entries:s,queryString:i},"useCometInternalTypeaheadOnEnterLoggingHandler:with_highlightedEntry"),n&&n.endSession(),a&&a()},t[0]=s,t[1]=u,t[2]=n,t[3]=a,t[4]=i,t[5]=c):c=t[5],c}l.default=u}),98);
__d("useCometInternalTypeaheadOnFocusLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(5),n=e.loggingProvider,a=e.onFocus,i=e.queryString,l=r("useCometInternalTypeaheadState")(),s=l.activeEntries,u;return t[0]!==s||t[1]!==n||t[2]!==a||t[3]!==i?(u=function(){n!=null&&(n.startSession(),n.addEvent({action:"typeahead_appeared",entries:s,queryString:i},"useCometInternalTypeaheadOnFocusLoggingHandler")),a&&a()},t[0]=s,t[1]=n,t[2]=a,t[3]=i,t[4]=u):u=t[4],u}l.default=u}),98);
__d("useCometInternalTypeaheadOnPressEntryLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(5),n=e.loggingProvider,a=e.onPressEntry,i=e.queryString,l=r("useCometInternalTypeaheadState")(),s=l.activeEntries,u;return t[0]!==s||t[1]!==n||t[2]!==a||t[3]!==i?(u=function(t,r){n!=null&&(n.addEvent({action:"click",entries:s,entry:t,queryString:i},"useCometInternalTypeaheadOnPressEntryLoggingHandler"),n.endSession()),a&&a(t,r)},t[0]=s,t[1]=n,t[2]=a,t[3]=i,t[4]=u):u=t[4],u}l.default=u}),98);
__d("useCometTypeaheadInputRefs",["mergeRefs","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useMemo,c=s.useRef;function d(e){var t=c(null),n=u(function(){return r("mergeRefs")(t,e)},[t,e]);return{composedRef:n,inputRef:t}}l.default=d}),98);
__d("CometInternalTypeahead.react",["BaseTypeaheadDataFetchTrigger.react","cometTypeaheadMouseUtils","emptyFunction","react","react-compiler-runtime","useCometInternalTypeaheadOnAbandonLoggingHandler","useCometInternalTypeaheadOnEnterLoggingHandler","useCometInternalTypeaheadOnFocusLoggingHandler","useCometInternalTypeaheadOnPressEntryLoggingHandler","useCometInternalTypeaheadState","useCometTypeaheadInputRefs"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","layoutStrategyRenderer","loggingProvider","onEnter","onFocus","onPressEntry","onSelectFreeformQuery","onShiftTab","onTab","queryString","traceProvider"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(69),a,i,l,s,c,d,m,p,_,f,g,h;n[0]!==t?(i=t.inputRef,a=t.layoutStrategyRenderer,l=t.loggingProvider,s=t.onEnter,c=t.onFocus,d=t.onPressEntry,m=t.onSelectFreeformQuery,p=t.onShiftTab,_=t.onTab,g=t.queryString,h=t.traceProvider,f=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g,n[12]=h):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11],h=n[12]);var y=r("useCometTypeaheadInputRefs")(i),C=y.composedRef,b=y.inputRef,v=r("useCometInternalTypeaheadState")(),S=v.highlightedEntry,R=v.secondaryActionHighlighted,L;n[13]!==S||n[14]!==s||n[15]!==d||n[16]!==m||n[17]!==g||n[18]!==R?(L=function(){S!=null?d==null||d(S,R):m==null||m(g),s()},n[13]=S,n[14]=s,n[15]=d,n[16]=m,n[17]=g,n[18]=R,n[19]=L):L=n[19];var E=L,k;n[20]!==l||n[21]!==g||n[22]!==E?(k={loggingProvider:l,onEnter:E,queryString:g},n[20]=l,n[21]=g,n[22]=E,n[23]=k):k=n[23];var I=r("useCometInternalTypeaheadOnEnterLoggingHandler")(k),T;n[24]!==l||n[25]!==c||n[26]!==g?(T={loggingProvider:l,onFocus:c,queryString:g},n[24]=l,n[25]=c,n[26]=g,n[27]=T):T=n[27];var D=r("useCometInternalTypeaheadOnFocusLoggingHandler")(T),x;n[28]!==b||n[29]!==d?(x=function(t,n){if(o("cometTypeaheadMouseUtils").hasModifierKeyPressed(n)){b.current&&b.current.focus();return}d(t)},n[28]=b,n[29]=d,n[30]=x):x=n[30];var $=x,P;n[31]!==l||n[32]!==g||n[33]!==$?(P={loggingProvider:l,onPressEntry:$,queryString:g},n[31]=l,n[32]=g,n[33]=$,n[34]=P):P=n[34];var N=r("useCometInternalTypeaheadOnPressEntryLoggingHandler")(P),M;n[35]!==l||n[36]!==p||n[37]!==g?(M={callback:p,loggingProvider:l,queryString:g},n[35]=l,n[36]=p,n[37]=g,n[38]=M):M=n[38];var w=r("useCometInternalTypeaheadOnAbandonLoggingHandler")(M),A;n[39]!==l||n[40]!==_||n[41]!==g?(A={callback:_,loggingProvider:l,queryString:g},n[39]=l,n[40]=_,n[41]=g,n[42]=A):A=n[42];var F=r("useCometInternalTypeaheadOnAbandonLoggingHandler")(A),O;n[43]!==l||n[44]!==g?(O={callback:r("emptyFunction"),loggingProvider:l,queryString:g},n[43]=l,n[44]=g,n[45]=O):O=n[45];var B=r("useCometInternalTypeaheadOnAbandonLoggingHandler")(O),W;n[46]!==l||n[47]!==g?(W={callback:r("emptyFunction"),loggingProvider:l,queryString:g},n[46]=l,n[47]=g,n[48]=W):W=n[48];var q=r("useCometInternalTypeaheadOnAbandonLoggingHandler")(W),U;n[49]!==l||n[50]!==g||n[51]!==h?(U=u.jsx(r("BaseTypeaheadDataFetchTrigger.react"),{loggingProvider:l,queryString:g,traceProvider:h}),n[49]=l,n[50]=g,n[51]=h,n[52]=U):U=n[52];var V;n[53]!==a||n[54]!==C||n[55]!==q||n[56]!==I||n[57]!==D||n[58]!==B||n[59]!==N||n[60]!==w||n[61]!==F||n[62]!==f||n[63]!==g||n[64]!==h?(V=u.jsx(a,babelHelpers.extends({},f,{inputRef:C,onAbandonTypeahead_DO_NOT_USE:q,onClick:r("emptyFunction"),onEnter:I,onFocus:D,onHighlightEntry:f.onHighlightEntry,onOutsideClick:B,onPressEntry:N,onShiftTab:w,onTab:F,queryString:g,traceProvider:h,xstyles:f.xstyles})),n[53]=a,n[54]=C,n[55]=q,n[56]=I,n[57]=D,n[58]=B,n[59]=N,n[60]=w,n[61]=F,n[62]=f,n[63]=g,n[64]=h,n[65]=V):V=n[65];var H;return n[66]!==U||n[67]!==V?(H=u.jsxs(u.Fragment,{children:[U,V]}),n[66]=U,n[67]=V,n[68]=H):H=n[68],H}l.default=d}),98);
__d("CometInternalTypeaheadEmptyFetchContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("CometInternalTypeaheadEmptyFetchProvider",["CometInternalTypeaheadEmptyFetchContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useLayoutEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.isLoading,i=e.source,l=d(!0),u=l[0],m=l[1],p,_;t[0]!==a?(p=function(){a&&m(!1)},_=[a],t[0]=a,t[1]=p,t[2]=_):(p=t[1],_=t[2]),c(p,_);var f=["all","network"].includes(i),g=!(f&&u||a),h;return t[3]!==n||t[4]!==g?(h=s.jsx(r("CometInternalTypeaheadEmptyFetchContext").Provider,{value:g,children:n}),t[3]=n,t[4]=g,t[5]=h):h=t[5],h}l.default=m}),98);
__d("CometInternalTypeaheadStateDispatcherContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext();l.default=u}),98);
__d("useCometInternalTypeaheadStateDispatcher",["CometInternalTypeaheadStateDispatcherContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("CometInternalTypeaheadStateDispatcherContext"))}l.default=u}),98);
__d("CometInternalTypeaheadFetchProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","react-compiler-runtime","useBaseTypeaheadDataSourceFetch","useCometInternalTypeaheadStateDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo;function m(e){var t=o("react-compiler-runtime").c(20),n=e.children,a=e.dataSource,i=e.dataSourceFetchConfigParams,l=e.onFetchEntries_DO_NOT_USE,u=e.traceProvider,c=r("useCometInternalTypeaheadStateDispatcher")(),d=c.dispatchActiveEntries,m;t[0]!==d||t[1]!==l||t[2]!==u?(m=function(t,n){var e=t.entries,r=n.isTraceComplete,o=n.source;d(e!=null?e:[]),l&&l(e),u&&!u.isResolved()&&r&&(o==="cache"&&e.length>=u.getEntriesCountForVisualComplete()?u.setEndReason("max_suggestions_reached"):o==="network"?u.setEndReason("all_queries_completed"):o==="network-no-results"&&u.setEndReason("all_queries_completed_no_network_results"),u.resolve())},t[0]=d,t[1]=l,t[2]=u,t[3]=m):m=t[3];var p=m,_;t[4]!==a||t[5]!==i||t[6]!==p?(_={dataSource:a,dataSourceFetchConfigParams:i,onResolvePayload:p},t[4]=a,t[5]=i,t[6]=p,t[7]=_):_=t[7];var f=r("useBaseTypeaheadDataSourceFetch")(_),g=f[0],h=f[1],y=f[2],C=g.isLoading,b=g.source,v,S;t[8]!==h||t[9]!==C||t[10]!==y||t[11]!==b?(S={fetch:h,isLoading:C,refetch:y,source:b},t[8]=h,t[9]=C,t[10]=y,t[11]=b,t[12]=S):S=t[12],v=S;var R=v,L;t[13]!==n||t[14]!==C||t[15]!==b?(L=s.jsx(r("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:C,source:b,children:n}),t[13]=n,t[14]=C,t[15]=b,t[16]=L):L=t[16];var E;return t[17]!==L||t[18]!==R?(E=s.jsx(r("CometInternalTypeaheadFetchContext").Provider,{value:R,children:L}),t[17]=L,t[18]=R,t[19]=E):E=t[19],E}l.default=m}),98);
__d("BaseTypeaheadLayoutContextualStrategyStateContextProvider.react",["BaseTypeaheadLayoutContextualStrategyStateContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo,m=u.useState;function p(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.autoOpen,i=e.onClose,l=e.onOpen,u=m(a),c=u[0],d=u[1],p;t[0]!==c||t[1]!==i||t[2]!==l?(p=function(t){t!==c&&(d(t),t?l():i())},t[0]=c,t[1]=i,t[2]=l,t[3]=p):p=t[3];var _=p,f,g;t[4]!==_||t[5]!==c?(g={dispatchIsOpened:_,isOpened:c},t[4]=_,t[5]=c,t[6]=g):g=t[6],f=g;var h=f,y;return t[7]!==n||t[8]!==h?(y=s.jsx(r("BaseTypeaheadLayoutContextualStrategyStateContext").Provider,{value:h,children:n}),t[7]=n,t[8]=h,t[9]=y):y=t[9],y}l.default=p}),98);
__d("CometInternalTypeaheadStateProvider",["BaseTypeaheadLayoutContextualStrategyStateContextProvider.react","CometInternalTypeaheadStateContext","CometInternalTypeaheadStateDispatcherContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef,_=u.useState,f=[];function g(e){var t=o("react-compiler-runtime").c(19),n=e.autoOpen,a=e.children,i=e.emptyEntries_DO_NOT_USE,l=e.onClose,u=e.onOpen,c=i===void 0?f:i,m=_(null),g=m[0],h=m[1],y=_(null),C=y[0],b=y[1],v=_(null),S=v[0],R=v[1],L=_(c),E=L[0],k=L[1],I=p(c),T,D;t[0]!==c?(T=function(){I.current!==c&&(I.current=c,k(function(e){return e.length?e:c}))},D=[k,I,c],t[0]=c,t[1]=T,t[2]=D):(T=t[1],D=t[2]),d(T,D);var x;t[3]===Symbol.for("react.memo_cache_sentinel")?(x=function(t){k(function(e){var n=Array.isArray(t)?t:t(e);return n.length>0?n:I.current})},t[3]=x):x=t[3];var $=x,P;t[4]===Symbol.for("react.memo_cache_sentinel")?(P=function(t){var e=t.entry,n=t.secondaryActionHighlighted,r=t.source;h(e),R(r),b(n)},t[4]=P):P=t[4];var N=P,M,w;t[5]===Symbol.for("react.memo_cache_sentinel")?(w={dispatchActiveEntries:$,dispatchHighlightedEntry:N},t[5]=w):w=t[5],M=w;var A=M,F,O;t[6]!==E||t[7]!==g||t[8]!==S||t[9]!==C?(O={activeEntries:E,highlightedEntry:g,highlightedEntrySource:S,secondaryActionHighlighted:C},t[6]=E,t[7]=g,t[8]=S,t[9]=C,t[10]=O):O=t[10],F=O;var B=F,W;t[11]!==n||t[12]!==a||t[13]!==l||t[14]!==u?(W=s.jsx(r("BaseTypeaheadLayoutContextualStrategyStateContextProvider.react"),{autoOpen:n,onClose:l,onOpen:u,children:a}),t[11]=n,t[12]=a,t[13]=l,t[14]=u,t[15]=W):W=t[15];var q;return t[16]!==B||t[17]!==W?(q=s.jsx(r("CometInternalTypeaheadStateDispatcherContext").Provider,{value:A,children:s.jsx(r("CometInternalTypeaheadStateContext").Provider,{value:B,children:W})}),t[16]=B,t[17]=W,t[18]=q):q=t[18],q}l.default=g}),98);
__d("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","queryString"],s,u=s||(s=o("react"));function c(t,n){var a=n.shouldQueryStringFollowHighlightedEntry;function i(n){var i=o("react-compiler-runtime").c(8),l,s,c;i[0]!==n?(l=n.ref,s=n.queryString,c=babelHelpers.objectWithoutPropertiesLoose(n,e),i[0]=n,i[1]=l,i[2]=s,i[3]=c):(l=i[1],s=i[2],c=i[3]);var d=r("useCometInternalTypeaheadState")(),m=d.highlightedEntry,p=d.highlightedEntrySource,_=a&&p==="keyboard"&&m!=null?m.label:s,f;return i[4]!==l||i[5]!==_||i[6]!==c?(f=u.jsx(t,babelHelpers.extends({},c,{queryString:_,ref:l})),i[4]=l,i[5]=_,i[6]=c,i[7]=f):f=i[7],f}return i}l.default=c}),98);
__d("BaseTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadFetchProvider","CometInternalTypeaheadStateProvider","emptyFunction","react","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(t,n,r,o,a,i,l){"use strict";var e=["autoOpen","autoFocus","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","isDisabled","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","viewRole","viewStrategyRenderer","inputRef"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useId,p=c.useMemo;function _(t){var n=t.autoOpen,o=n===void 0?!1:n,a=t.autoFocus,i=a===void 0?!1:a,l=t.inputStrategyRenderer,s=t.dataSource,c=t.dataSourceFetchConfigParams,_=t.decorators,f=_===void 0?[]:_,g=t.emptyEntries_DO_NOT_USE,h=t.id,y=t.isDisabled,C=y===void 0?!1:y,b=t.label,v=b===void 0?"":b,S=t.loggingContext,R=t.onBackspace,L=R===void 0?r("emptyFunction"):R,E=t.onBlur,k=E===void 0?r("emptyFunction"):E,I=t.onChange,T=t.onClose,D=T===void 0?r("emptyFunction"):T,x=t.onEnter,$=x===void 0?r("emptyFunction"):x,P=t.onEscape,N=P===void 0?r("emptyFunction"):P,M=t.onFetchEntries_DO_NOT_USE,w=t.onFocus,A=w===void 0?r("emptyFunction"):w,F=t.onOpen,O=F===void 0?r("emptyFunction"):F,B=t.onPressEntry,W=t.placeholder,q=W===void 0?"":W,U=t.shouldQueryStringFollowHighlightedEntry,V=U===void 0?!0:U,H=t.shouldQueryStringUpdateFromSelectedEntryOnClick,G=H===void 0?!0:H,z=t.testid,j=z===void 0?"":z,K=t.traceProvider,Q=t.viewRole,X=Q===void 0?"listbox":Q,Y=t.viewStrategyRenderer,J=t.inputRef,Z=babelHelpers.objectWithoutPropertiesLoose(t,e),ee=m(),te=p(function(){var e=r("CometInternalTypeahead.react");return f.forEach(function(t){var n=t.decorate,r=t.params;e=n(e,r)}),e},[f]),ne=d(function(e,t){G&&I(e.label),B==null||B(e,t)},[I,B,G]),re=p(function(){return r("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(l,{shouldQueryStringFollowHighlightedEntry:V})},[l,V]),oe=v||q;return u.jsx(r("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:u.jsx(r("CometInternalTypeaheadStateProvider"),{autoOpen:o,emptyEntries_DO_NOT_USE:g,onClose:D,onOpen:O,children:u.jsx(r("CometInternalTypeaheadFetchProvider"),{dataSource:s,dataSourceFetchConfigParams:c,loggingContext:S,onFetchEntries_DO_NOT_USE:M,traceProvider:K,children:u.jsx(te,babelHelpers.extends({},Z,{autoFocus:i,id:h!=null?h:ee,inputRef:J,inputStrategyRenderer:re,isDisabled:C,label:oe,onBackspace:L,onBlur:k,onChange:I,onDownArrow:r("emptyFunction"),onEnter:$,onEscape:N,onFocus:A,onHighlightEntry:r("emptyFunction"),onPressEntry:ne,onShiftTab:r("emptyFunction"),onTab:r("emptyFunction"),onUpArrow:r("emptyFunction"),placeholder:q,testid:void 0,traceProvider:K,viewRole:X,viewStrategyRenderer:Y}))})})})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("CometTypeaheadHelperText.react",["FDSTextPairing.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.text,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x1xmf6yo"},t[0]=a):a=t[0];var i;return t[1]!==n?(i=s.jsx("div",babelHelpers.extends({},a,{children:s.jsx(r("FDSTextPairing.react"),{level:4,meta:n,metaColor:"secondary"})})),t[1]=n,t[2]=i):i=t[2],i}l.default=u}),98);
__d("cometTypeaheadInputWebkitStyles",[],(function(t,n,r,o,a,i,l){"use strict";var e={default:{appearance:"xtilpmw","::-webkit-search-cancel-button_appearance":"x1ad04t7","::-webkit-search-decoration_appearance":"x1glnyev","::-webkit-search-results-button_appearance":"x1ix68h3","::-webkit-search-results-decoration_appearance":"x19gujb8",$$css:!0}},s=e;l.default=s}),98);
__d("useCometTypeaheadInputStrategyOnChangeHandler",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(2),n=e.onChange,r;return t[0]!==n?(r=function(t){var e=t.target.value;n&&n(e,t)},t[0]=n,t[1]=r):r=t[1],r}l.default=u}),98);
__d("CometTypeaheadInputRoundedStrategy.react",["fbt","FDSIcon.react","FDSRoundedTextInput.react","MagnifyingGlassFilled16IconSvg.react","UNTRANSLATED_STRING_FIXME","cometTypeaheadInputWebkitStyles","react","useCometTextDirection","useCometTypeaheadInputStrategyOnChangeHandler"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["ref","ariaProps","description","errorMessage","id","inputEndContent","inputStartContent","inputExtraProps","isDisabled","onChange","label","queryString","testid","autoFocus","placeholder"],u,c=u||(u=o("react"));function d(t){var n=t.ref,o=t.ariaProps,a=t.description,i=t.errorMessage,l=t.id,u=t.inputEndContent,d=t.inputStartContent,m=t.inputExtraProps,p=m===void 0?{}:m,_=p.hideIconOnFocus,f=_===void 0?!1:_,g=p.hideIconAnimation,h=g===void 0?!1:g,y=p.icon,C=y===void 0?c.jsx(r("FDSIcon.react"),{color:"secondary",icon:r("MagnifyingGlassFilled16IconSvg.react"),size:16}):y,b=p.size,v=p.xstyle,S=v===void 0?null:v,R=t.isDisabled,L=t.onChange,E=t.label,k=E===void 0?"":E,I=t.queryString,T=t.testid,D=t.autoFocus,x=t.placeholder,$=babelHelpers.objectWithoutPropertiesLoose(t,e),P=r("useCometTextDirection")(I),N=r("useCometTypeaheadInputStrategyOnChangeHandler")({onChange:L});return c.jsxs("div",{className:"x6s0dn4 x78zum5 xh8yej3",children:[d,c.jsx(r("FDSRoundedTextInput.react"),babelHelpers.extends({},o,$,{"aria-label":r("UNTRANSLATED_STRING_FIXME")(k.toString()),autoComplete:"off",autoFocus_PLEASE_USE_FOCUS_REGION_INSTEAD:D,"data-testid":void 0,dir:P,disabled:R,hideIconAnimation:h,hideIconOnFocus:f,icon:C,onChange:N,placeholder:x!=null?x:s._(/*BTDS*/"Search"),ref:n,size:b,spellCheck:!1,suppressHydrationWarning:!0,type:"search",value:I,xstyle:[S,r("cometTypeaheadInputWebkitStyles").default]})),u]})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("useCometTypeaheadInputStrategyOnBlurHandler",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(2),n=e.onBlur,r;return t[0]!==n?(r=function(){n&&n()},t[0]=n,t[1]=r):r=t[1],r}l.default=u}),98);
__d("useCometTypeaheadInputStrategyOnFocusHandler",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=e.inputRef,n=e.onFocus;return s(function(){t.current!=null&&t.current.select(),n&&n()},[t,n])}l.default=u}),98);
__d("useCometTypeaheadInputHandlers",["react-compiler-runtime","useCometTypeaheadInputStrategyOnBlurHandler","useCometTypeaheadInputStrategyOnFocusHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onBlur","onFocus"];function s(t){var n=o("react-compiler-runtime").c(14),a,i,l,s;n[0]!==t?(a=t.inputRef,i=t.onBlur,l=t.onFocus,s=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var u;n[5]!==a||n[6]!==l?(u={inputRef:a,onFocus:l},n[5]=a,n[6]=l,n[7]=u):u=n[7];var c=r("useCometTypeaheadInputStrategyOnFocusHandler")(u),d;n[8]!==i?(d={onBlur:i},n[8]=i,n[9]=d):d=n[9];var m=r("useCometTypeaheadInputStrategyOnBlurHandler")(d),p;return n[10]!==m||n[11]!==c||n[12]!==s?(p=babelHelpers.extends({},s,{onBlur:m,onFocus:c}),n[10]=m,n[11]=c,n[12]=s,n[13]=p):p=n[13],p}l.default=s}),98);
__d("useCometTypeaheadInputRefsWebOnly",["react-compiler-runtime","useCometTypeaheadInputRefs","xplatToDOMRef"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=e!=null?o("xplatToDOMRef").xplatToInputRef(e):null,t[0]=e,t[1]=n):n=t[1],r("useCometTypeaheadInputRefs")(n)}l.default=e}),98);
__d("CometTypeaheadInputStrategyEventListener.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","react","react-compiler-runtime","useCometTypeaheadInputHandlers","useCometTypeaheadInputRefsWebOnly"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["children","isInline","omitEscape","ref","onBackspace","onDownArrow","onEnter","onEscape","onLeftArrow","onRightArrow","onShiftTab","onTab","onUpArrow"],u,c=u||(u=o("react")),d=u.useMemo,m={root:{width:"xh8yej3",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(69),a,i,l,u,d,p,_,f,g,h,y,C,b,v;n[0]!==t?(a=t.children,l=t.isInline,v=t.omitEscape,b=t.ref,u=t.onBackspace,d=t.onDownArrow,p=t.onEnter,_=t.onEscape,f=t.onLeftArrow,g=t.onRightArrow,h=t.onShiftTab,y=t.onTab,C=t.onUpArrow,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=p,n[7]=_,n[8]=f,n[9]=g,n[10]=h,n[11]=y,n[12]=C,n[13]=b,n[14]=v):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],p=n[6],_=n[7],f=n[8],g=n[9],h=n[10],y=n[11],C=n[12],b=n[13],v=n[14]);var S=v===void 0?!1:v,R,L,E;n[15]===Symbol.for("react.memo_cache_sentinel")?(L={key:r("CometKeys").DELETE},E=s._(/*BTDS*/"Remove last character from input query."),n[15]=L,n[16]=E):(L=n[15],E=n[16]);var k;n[17]!==u?(k={command:L,description:E,handler:function(){return u&&u()},isHiddenCommand:!0,shouldPreventDefault:!1,triggerFromInputs:!0},n[17]=u,n[18]=k):k=n[18];var I,T;n[19]===Symbol.for("react.memo_cache_sentinel")?(I={key:r("CometKeys").DOWN},T=s._(/*BTDS*/"Next suggestion"),n[19]=I,n[20]=T):(I=n[19],T=n[20]);var D;n[21]!==d?(D={command:I,description:T,handler:function(){return d&&d()},triggerFromInputs:!0},n[21]=d,n[22]=D):D=n[22];var x,$;n[23]===Symbol.for("react.memo_cache_sentinel")?($={key:r("CometKeys").UP},x=s._(/*BTDS*/"Previous suggestion"),n[23]=x,n[24]=$):(x=n[23],$=n[24]);var P;n[25]!==C?(P={command:$,description:x,handler:function(){return C&&C()},triggerFromInputs:!0},n[25]=C,n[26]=P):P=n[26];var N;n[27]!==S||n[28]!==_?(N=S?null:{command:{key:r("CometKeys").ESCAPE},description:s._(/*BTDS*/"Close suggestions"),handler:function(){return _&&_()},triggerFromInputs:!0},n[27]=S,n[28]=_,n[29]=N):N=n[29];var M,w;n[30]===Symbol.for("react.memo_cache_sentinel")?(M={key:r("CometKeys").ENTER},w=s._(/*BTDS*/"Select suggestion"),n[30]=M,n[31]=w):(M=n[30],w=n[31]);var A;n[32]!==p?(A={command:M,description:w,handler:function(){return p&&p()},triggerFromInputs:!0},n[32]=p,n[33]=A):A=n[33];var F,O;n[34]===Symbol.for("react.memo_cache_sentinel")?(F={key:r("CometKeys").TAB},O=s._(/*BTDS*/"Leave input"),n[34]=F,n[35]=O):(F=n[34],O=n[35]);var B;n[36]!==y?(B={command:F,description:O,handler:function(){return y&&y()},isHiddenCommand:!0,shouldPreventDefault:!1,shouldStopPropagation:!1,triggerFromInputs:!0},n[36]=y,n[37]=B):B=n[37];var W,q;n[38]===Symbol.for("react.memo_cache_sentinel")?(W={key:r("CometKeys").TAB,shift:!0},q=s._(/*BTDS*/"Leave input"),n[38]=W,n[39]=q):(W=n[38],q=n[39]);var U;n[40]!==h?(U={command:W,description:q,handler:function(){return h&&h()},isHiddenCommand:!0,shouldPreventDefault:!1,shouldStopPropagation:!1,triggerFromInputs:!0},n[40]=h,n[41]=U):U=n[41];var V;n[42]!==f?(V=f!=null?{command:{key:r("CometKeys").LEFT},description:s._(/*BTDS*/"Move focus to the previous cell"),handler:f,triggerFromInputs:!0}:null,n[42]=f,n[43]=V):V=n[43];var H;n[44]!==g?(H=g!=null?{command:{key:r("CometKeys").RIGHT},description:s._(/*BTDS*/"Move focus to the next cell"),handler:g,triggerFromInputs:!0}:null,n[44]=g,n[45]=H):H=n[45];var G;n[46]!==P||n[47]!==N||n[48]!==A||n[49]!==B||n[50]!==U||n[51]!==V||n[52]!==H||n[53]!==k||n[54]!==D?(G=[k,D,P,N,A,B,U,V,H],n[46]=P,n[47]=N,n[48]=A,n[49]=B,n[50]=U,n[51]=V,n[52]=H,n[53]=k,n[54]=D,n[55]=G):G=n[55];var z=G,j;n[56]!==z?(j=z.filter(Boolean),n[56]=z,n[57]=j):j=n[57],R=j;var K=R,Q=r("useCometTypeaheadInputRefsWebOnly")(b),X=Q.composedRef,Y=Q.inputRef,J;n[58]!==i||n[59]!==Y?(J=babelHelpers.extends({inputRef:Y},i),n[58]=i,n[59]=Y,n[60]=J):J=n[60];var Z=r("useCometTypeaheadInputHandlers")(J),ee=l===!0?"span":"div",te;n[61]!==a||n[62]!==X||n[63]!==Z?(te=a(X,Z),n[61]=a,n[62]=X,n[63]=Z,n[64]=te):te=n[64];var ne;return n[65]!==K||n[66]!==ee||n[67]!==te?(ne=c.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:K,elementType:ee,xstyle:m.root,children:te}),n[65]=K,n[66]=ee,n[67]=te,n[68]=ne):ne=n[68],ne}l.default=p}),226);
__d("useCometTypeaheadViewStrategyOutsideClickListener",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(6),r;n[0]!==t||n[1]!==e?(r=function(r){var n=e.current,o=r.target;n!=null&&o instanceof Node&&!n.contains(o)&&t()},n[0]=t,n[1]=e,n[2]=r):r=n[2];var a=r,i,l;n[3]!==a?(i=function(){return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}},l=[a],n[3]=a,n[4]=i,n[5]=l):(i=n[4],l=n[5]),c(i,l)}l.default=d}),98);
__d("CometTypeaheadViewStrategyEventListener.react",["react","useCometTypeaheadViewStrategyOutsideClickListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useRef;function c(e){var t=e.children,n=e.onOutsideClick,o=u(null);return r("useCometTypeaheadViewStrategyOutsideClickListener")(o,n),t(o)}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("cometHandleHighlightDropOnMouseLeave",[],(function(t,n,r,o,a,i){"use strict";function e(e){return function(){e(null,"mouse",!1)}}i.default=e}),66);
__d("CometTypeaheadInternalLayoutContextualStrategy.react",["CometContextualLayer.react","CometTypeaheadInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","react","react-compiler-runtime","stylex","useCometInternalTypeaheadState","xplatToDOMRef"],(function(t,n,r,o,a,i,l){"use strict";var e=["contextualProps","description","errorMessage","extraLayoutProps","inputStrategyRenderer","label","onBackspace","onBlur","onFocus","onClick","onDownArrow","onLeftArrow","onRightArrow","onEnter","onEscape","onShiftTab","onTab","onUpArrow","queryString","inputRef","viewStrategyRenderer","xstyles"],s=["align","position"],u,c,d=c||(c=o("react")),m=c.useRef;function p(t){var n,a,i,l=o("react-compiler-runtime").c(99),c,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M;l[0]!==t?(P=t.contextualProps,_=t.description,f=t.errorMessage,N=t.extraLayoutProps,c=t.inputStrategyRenderer,h=t.label,y=t.onBackspace,C=t.onBlur,L=t.onFocus,b=t.onClick,v=t.onDownArrow,E=t.onLeftArrow,k=t.onRightArrow,S=t.onEnter,R=t.onEscape,I=t.onShiftTab,T=t.onTab,D=t.onUpArrow,$=t.queryString,g=t.inputRef,p=t.viewStrategyRenderer,M=t.xstyles,x=babelHelpers.objectWithoutPropertiesLoose(t,e),l[0]=t,l[1]=c,l[2]=p,l[3]=_,l[4]=f,l[5]=g,l[6]=h,l[7]=y,l[8]=C,l[9]=b,l[10]=v,l[11]=S,l[12]=R,l[13]=L,l[14]=E,l[15]=k,l[16]=I,l[17]=T,l[18]=D,l[19]=x,l[20]=$,l[21]=P,l[22]=N,l[23]=M):(c=l[1],p=l[2],_=l[3],f=l[4],g=l[5],h=l[6],y=l[7],C=l[8],b=l[9],v=l[10],S=l[11],R=l[12],L=l[13],E=l[14],k=l[15],I=l[16],T=l[17],D=l[18],x=l[19],$=l[20],P=l[21],N=l[22],M=l[23]);var w;l[24]!==P?(w=P===void 0?{}:P,l[24]=P,l[25]=w):w=l[25];var A,F,O;if(l[26]!==w){var B=w;F=B.align,O=B.position,A=babelHelpers.objectWithoutPropertiesLoose(B,s),l[26]=w,l[27]=A,l[28]=F,l[29]=O}else A=l[27],F=l[28],O=l[29];var W=F===void 0?"stretch":F,q=O===void 0?"below":O,U=N,V=U.ariaProps,H=U.helperTextComponent,G=U.isAlwaysOpened,z=U.isLoading,j=U.isOpened,K=V.ariaDescribedByProps,Q=V.ariaInputProps,X=V.ariaViewProps,Y=m(null),J=m(null),Z=r("useCometInternalTypeaheadState")(),ee=Z.activeEntries,te=Z.highlightedEntry,ne;l[30]!==x.onHighlightEntry?(ne=r("cometHandleHighlightDropOnMouseLeave")(x.onHighlightEntry),l[30]=x.onHighlightEntry,l[31]=ne):ne=l[31];var re=ne,oe;if(l[32]!==((n=M)==null?void 0:n.layoutXStyle)){var ae,ie;oe=(u||(u=r("stylex"))).props((ae=M)==null?void 0:ae.layoutXStyle),l[32]=(ie=M)==null?void 0:ie.layoutXStyle,l[33]=oe}else oe=l[33];var le;if(l[34]!==((a=M)==null?void 0:a.inputXStyle)){var se,ue;le=(u||(u=r("stylex"))).props((se=M)==null?void 0:se.inputXStyle),l[34]=(ue=M)==null?void 0:ue.inputXStyle,l[35]=le}else le=l[35];var ce=j===!1&&$==="",de;l[36]!==c||l[37]!==Q||l[38]!==_||l[39]!==f||l[40]!==h||l[41]!==x.autoFocus||l[42]!==x.id||l[43]!==x.inputEndContent||l[44]!==x.inputExtraProps||l[45]!==x.inputStartContent||l[46]!==x.isDisabled||l[47]!==x.placeholder||l[48]!==x.testid||l[49]!==$?(de=function(t,n){return d.jsx(c,babelHelpers.extends({},n,{ariaProps:Q,autoFocus:x.autoFocus,description:_,errorMessage:f,id:x.id,inputEndContent:x.inputEndContent,inputExtraProps:x.inputExtraProps,inputStartContent:x.inputStartContent,isDisabled:x.isDisabled,label:h,placeholder:x.placeholder,queryString:$,ref:o("xplatToDOMRef").xplatToInputRef(t),testid:void 0}))},l[36]=c,l[37]=Q,l[38]=_,l[39]=f,l[40]=h,l[41]=x.autoFocus,l[42]=x.id,l[43]=x.inputEndContent,l[44]=x.inputExtraProps,l[45]=x.inputStartContent,l[46]=x.isDisabled,l[47]=x.placeholder,l[48]=x.testid,l[49]=$,l[50]=de):de=l[50];var me;l[51]!==g||l[52]!==y||l[53]!==C||l[54]!==b||l[55]!==v||l[56]!==S||l[57]!==R||l[58]!==L||l[59]!==E||l[60]!==k||l[61]!==I||l[62]!==T||l[63]!==D||l[64]!==x.onChange||l[65]!==ce||l[66]!==de?(me=d.jsx(r("CometTypeaheadInputStrategyEventListener.react"),{omitEscape:ce,onBackspace:y,onBlur:C,onChange:x.onChange,onClick:b,onDownArrow:v,onEnter:S,onEscape:R,onFocus:L,onLeftArrow:E,onRightArrow:k,onShiftTab:I,onTab:T,onUpArrow:D,ref:g,children:de}),l[51]=g,l[52]=y,l[53]=C,l[54]=b,l[55]=v,l[56]=S,l[57]=R,l[58]=L,l[59]=E,l[60]=k,l[61]=I,l[62]=T,l[63]=D,l[64]=x.onChange,l[65]=ce,l[66]=de,l[67]=me):me=l[67];var pe;l[68]!==me||l[69]!==le?(pe=d.jsx("div",babelHelpers.extends({},le,{children:me})),l[68]=me,l[69]=le,l[70]=pe):pe=l[70];var _e;l[71]!==pe||l[72]!==oe?(_e=d.jsx("div",babelHelpers.extends({},oe,{ref:J,children:pe})),l[71]=pe,l[72]=oe,l[73]=_e):_e=l[73];var fe;l[74]!==K||l[75]!==H?(fe=H!=null&&d.jsx("div",babelHelpers.extends({className:"x1xmf6yo"},K,{children:H})),l[74]=K,l[75]=H,l[76]=fe):fe=l[76];var ge;if(l[77]!==p||l[78]!==ee||l[79]!==W||l[80]!==X||l[81]!==A||l[82]!==te||l[83]!==G||l[84]!==z||l[85]!==j||l[86]!==re||l[87]!==q||l[88]!==x.onAbandonTypeahead_DO_NOT_USE||l[89]!==x.onHighlightEntry||l[90]!==x.onOutsideClick||l[91]!==x.onPressEntry||l[92]!==$||l[93]!==((i=M)==null?void 0:i.viewXStyle_DO_NOT_USE)){var he;ge=(j===!0||G===!0)&&d.jsx(r("CometContextualLayer.react"),babelHelpers.extends({},A,{align:W,contextRef:J,position:q,ref:Y,children:d.jsx(r("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:x.onOutsideClick,children:function(t){var e;return d.jsx("div",babelHelpers.extends({},(u||(u=r("stylex"))).props((e=M)==null?void 0:e.viewXStyle_DO_NOT_USE),{onMouseLeave:re,ref:t,children:d.jsx(p,{ariaProps:X,entries:ee,highlightedEntry:te,isLoading:z,onAbandonTypeahead_DO_NOT_USE:x.onAbandonTypeahead_DO_NOT_USE,onHighlightEntry:x.onHighlightEntry,onPressEntry:x.onPressEntry,queryString:$})}))}})})),l[77]=p,l[78]=ee,l[79]=W,l[80]=X,l[81]=A,l[82]=te,l[83]=G,l[84]=z,l[85]=j,l[86]=re,l[87]=q,l[88]=x.onAbandonTypeahead_DO_NOT_USE,l[89]=x.onHighlightEntry,l[90]=x.onOutsideClick,l[91]=x.onPressEntry,l[92]=$,l[93]=(he=M)==null?void 0:he.viewXStyle_DO_NOT_USE,l[94]=ge}else ge=l[94];var ye;return l[95]!==_e||l[96]!==fe||l[97]!==ge?(ye=d.jsxs(d.Fragment,{children:[_e,fe,ge]}),l[95]=_e,l[96]=fe,l[97]=ge,l[98]=ye):ye=l[98],ye}l.default=p}),98);
__d("useCometTypeaheadLayoutStrategyStyles",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u={defaultLayout:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",$$css:!0},stateDisabled:{$$css:!0},stateError:{$$css:!0},stateOpened:{$$css:!0},stateWarning:{$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(13),n=e.isDisabled,r=e.isError,a=e.isOpened,i=e.isWarning,l=e.xstyles,s=n===void 0?!1:n,c=r===void 0?!1:r,d=a===void 0?!1:a,m=i===void 0?!1:i,p=l.inputXStyle,_=l.layoutOpenedXStyle,f=l.layoutXStyle,g=l.viewXStyle_DO_NOT_USE,h,y=d&&_,C=s&&u.stateDisabled,b=d&&u.stateOpened,v=c&&u.stateError,S=m&&u.stateWarning,R;t[0]!==f||t[1]!==v||t[2]!==S||t[3]!==y||t[4]!==C||t[5]!==b?(R=[u.defaultLayout,f,y,C,b,v,S],t[0]=f,t[1]=v,t[2]=S,t[3]=y,t[4]=C,t[5]=b,t[6]=R):R=t[6];var L;t[7]!==g?(L=[g],t[7]=g,t[8]=L):L=t[8];var E;return t[9]!==p||t[10]!==R||t[11]!==L?(E={inputXStyle:p,layoutXStyle:R,viewXStyle_DO_NOT_USE:L},t[9]=p,t[10]=R,t[11]=L,t[12]=E):E=t[12],h=E,h}l.default=c}),98);
__d("CometTypeaheadInternalLayoutInlineStrategy.react",["CometTypeaheadInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","react","react-compiler-runtime","react-strict-dom","useCometInternalTypeaheadState","useCometTypeaheadLayoutStrategyStyles"],(function(t,n,r,o,a,i,l){"use strict";var e=["extraLayoutProps","description","errorMessage","extraViewProps","id","inputStrategyRenderer","label","onBackspace","onBlur","onChange","onClick","onDownArrow","onLeftArrow","onRightArrow","onEnter","onEscape","onFocus","onShiftTab","onTab","onUpArrow","queryString","inputRef","viewStrategyRenderer","xstyles"],s,u=s||(s=o("react")),c={helperText:{marginTop:"x1xmf6yo",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(92),a,i,l,s,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$;n[0]!==t?(x=t.extraLayoutProps,l=t.description,s=t.errorMessage,d=t.extraViewProps,p=t.id,a=t.inputStrategyRenderer,_=t.label,f=t.onBackspace,g=t.onBlur,h=t.onChange,y=t.onClick,C=t.onDownArrow,R=t.onLeftArrow,L=t.onRightArrow,b=t.onEnter,v=t.onEscape,S=t.onFocus,E=t.onShiftTab,k=t.onTab,I=t.onUpArrow,D=t.queryString,m=t.inputRef,i=t.viewStrategyRenderer,$=t.xstyles,T=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=d,n[6]=m,n[7]=p,n[8]=_,n[9]=f,n[10]=g,n[11]=h,n[12]=y,n[13]=C,n[14]=b,n[15]=v,n[16]=S,n[17]=R,n[18]=L,n[19]=E,n[20]=k,n[21]=I,n[22]=T,n[23]=D,n[24]=x,n[25]=$):(a=n[1],i=n[2],l=n[3],s=n[4],d=n[5],m=n[6],p=n[7],_=n[8],f=n[9],g=n[10],h=n[11],y=n[12],C=n[13],b=n[14],v=n[15],S=n[16],R=n[17],L=n[18],E=n[19],k=n[20],I=n[21],T=n[22],D=n[23],x=n[24],$=n[25]);var P=x,N=P.ariaProps,M=P.helperTextComponent,w=P.isAlwaysOpened,A=P.isLoading,F=P.isOpened,O=N.ariaDescribedByProps,B=N.ariaInputProps,W=N.ariaViewProps,q;n[26]!==$?(q=$===void 0?{}:$,n[26]=$,n[27]=q):q=n[27];var U=q,V=r("useCometInternalTypeaheadState")(),H=V.activeEntries,G=V.highlightedEntry,z;n[28]!==F||n[29]!==U?(z={isOpened:F,xstyles:U},n[28]=F,n[29]=U,n[30]=z):z=n[30];var j=r("useCometTypeaheadLayoutStrategyStyles")(z),K=j.inputXStyle,Q=j.layoutXStyle,X=j.viewXStyle_DO_NOT_USE,Y;n[31]!==T.onHighlightEntry?(Y=r("cometHandleHighlightDropOnMouseLeave")(T.onHighlightEntry),n[31]=T.onHighlightEntry,n[32]=Y):Y=n[32];var J=Y,Z=(w===!0||F===!1)&&D==="",ee;n[33]!==a||n[34]!==B||n[35]!==l||n[36]!==s||n[37]!==p||n[38]!==_||n[39]!==T.autoFocus||n[40]!==T.inputEndContent||n[41]!==T.inputExtraProps||n[42]!==T.inputStartContent||n[43]!==T.isDisabled||n[44]!==T.placeholder||n[45]!==T.testid||n[46]!==D?(ee=function(t,n){return u.jsx(a,babelHelpers.extends({},n,{ariaProps:B,autoFocus:T.autoFocus,description:l,errorMessage:s,id:p,inputEndContent:T.inputEndContent,inputExtraProps:T.inputExtraProps,inputStartContent:T.inputStartContent,isDisabled:T.isDisabled,label:_,placeholder:T.placeholder,queryString:D,ref:t,testid:void 0}))},n[33]=a,n[34]=B,n[35]=l,n[36]=s,n[37]=p,n[38]=_,n[39]=T.autoFocus,n[40]=T.inputEndContent,n[41]=T.inputExtraProps,n[42]=T.inputStartContent,n[43]=T.isDisabled,n[44]=T.placeholder,n[45]=T.testid,n[46]=D,n[47]=ee):ee=n[47];var te;n[48]!==m||n[49]!==f||n[50]!==g||n[51]!==h||n[52]!==y||n[53]!==C||n[54]!==b||n[55]!==v||n[56]!==S||n[57]!==R||n[58]!==L||n[59]!==E||n[60]!==k||n[61]!==I||n[62]!==Z||n[63]!==ee?(te=u.jsx(r("CometTypeaheadInputStrategyEventListener.react"),{omitEscape:Z,onBackspace:f,onBlur:g,onChange:h,onClick:y,onDownArrow:C,onEnter:b,onEscape:v,onFocus:S,onLeftArrow:R,onRightArrow:L,onShiftTab:E,onTab:k,onUpArrow:I,ref:m,children:ee}),n[48]=m,n[49]=f,n[50]=g,n[51]=h,n[52]=y,n[53]=C,n[54]=b,n[55]=v,n[56]=S,n[57]=R,n[58]=L,n[59]=E,n[60]=k,n[61]=I,n[62]=Z,n[63]=ee,n[64]=te):te=n[64];var ne;n[65]!==K||n[66]!==te?(ne=u.jsx(o("react-strict-dom").html.div,{style:K,children:te}),n[65]=K,n[66]=te,n[67]=ne):ne=n[67];var re;n[68]!==O||n[69]!==M?(re=M!=null&&u.jsx(o("react-strict-dom").html.div,babelHelpers.extends({style:c.helperText},O,{children:M})),n[68]=O,n[69]=M,n[70]=re):re=n[70];var oe;n[71]!==i||n[72]!==H||n[73]!==W||n[74]!==d||n[75]!==G||n[76]!==w||n[77]!==A||n[78]!==F||n[79]!==J||n[80]!==T.onAbandonTypeahead_DO_NOT_USE||n[81]!==T.onHighlightEntry||n[82]!==T.onOutsideClick||n[83]!==T.onPressEntry||n[84]!==D||n[85]!==X?(oe=(F===!0||w===!0)&&u.jsx(r("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:T.onOutsideClick,children:function(t){return u.jsx(o("react-strict-dom").html.div,{onMouseLeave:J,ref:t,style:X,children:u.jsx(i,{ariaProps:W,entries:H,extraViewProps:d,highlightedEntry:G,isLoading:A,onAbandonTypeahead_DO_NOT_USE:T.onAbandonTypeahead_DO_NOT_USE,onHighlightEntry:T.onHighlightEntry,onPressEntry:T.onPressEntry,queryString:D})})}}),n[71]=i,n[72]=H,n[73]=W,n[74]=d,n[75]=G,n[76]=w,n[77]=A,n[78]=F,n[79]=J,n[80]=T.onAbandonTypeahead_DO_NOT_USE,n[81]=T.onHighlightEntry,n[82]=T.onOutsideClick,n[83]=T.onPressEntry,n[84]=D,n[85]=X,n[86]=oe):oe=n[86];var ae;return n[87]!==Q||n[88]!==ne||n[89]!==re||n[90]!==oe?(ae=u.jsxs(o("react-strict-dom").html.div,{style:Q,children:[ne,re,oe]}),n[87]=Q,n[88]=ne,n[89]=re,n[90]=oe,n[91]=ae):ae=n[91],ae}l.default=d}),98);
__d("useCometTypeaheadLayoutStrategyOnBlurHandler",["react","react-compiler-runtime","useCometInternalTypeaheadStateDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(3),n=e.onBlur,a=r("useCometInternalTypeaheadStateDispatcher")(),i=a.dispatchHighlightedEntry,l;return t[0]!==i||t[1]!==n?(l=function(){i({entry:null,secondaryActionHighlighted:!1,source:null}),n&&n()},t[0]=i,t[1]=n,t[2]=l):l=t[2],l}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnChangeHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(4),n=e.onChange,a=e.onHighlightEntry,i=r("useCometInternalTypeaheadState")(),l=i.highlightedEntry,s;return t[0]!==l||t[1]!==n||t[2]!==a?(s=function(t,r){l!=null&&a(null,"keyboard",!1),n&&n(t,r)},t[0]=l,t[1]=n,t[2]=a,t[3]=s):s=t[3],s}l.default=u}),98);
__d("useCometInternalTypeaheadKeyboardNavigation",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useMemo;function d(){var e=o("react-compiler-runtime").c(26),t=r("useCometInternalTypeaheadState")(),n=t.activeEntries,a=t.highlightedEntry,i=t.secondaryActionHighlighted,l,s;e[0]!==n?(l=r("baseTypeaheadFlattenEntries")(n),s=l.length>0&&l.every(m),e[0]=n,e[1]=l,e[2]=s):(l=e[1],s=e[2]);var u=s,c=a!=null?a.key:null,d;e[3]!==c||e[4]!==i||e[5]!==l?(d=function(t){return o("cometTypeaheadKeyboardNavigationUtils").moveDown(l,c,function(e,n){t(e,"keyboard",n)},i)},e[3]=c,e[4]=i,e[5]=l,e[6]=d):d=e[6];var p=d,_;e[7]!==c||e[8]!==i||e[9]!==l?(_=function(t){return o("cometTypeaheadKeyboardNavigationUtils").moveUp(l,c,function(e,n){t(e,"keyboard",n)},i)},e[7]=c,e[8]=i,e[9]=l,e[10]=_):_=e[10];var f=_,g,h;e[11]!==c||e[12]!==i||e[13]!==l||e[14]!==u?(h=u?function(e){return o("cometTypeaheadKeyboardNavigationUtils").moveLeft(l,c,function(t,n){e(t,"keyboard",n)},i)}:void 0,e[11]=c,e[12]=i,e[13]=l,e[14]=u,e[15]=h):h=e[15],g=h;var y=g,C,b;e[16]!==c||e[17]!==i||e[18]!==l||e[19]!==u?(b=u?function(e){o("cometTypeaheadKeyboardNavigationUtils").moveRight(l,c,function(t,n){e(t,"keyboard",n)},i)}:void 0,e[16]=c,e[17]=i,e[18]=l,e[19]=u,e[20]=b):b=e[20],C=b;var v=C,S;return e[21]!==p||e[22]!==y||e[23]!==v||e[24]!==f?(S={onKeyboardDownArrow:p,onKeyboardLeftArrow:y,onKeyboardRightArrow:v,onKeyboardUpArrow:f},e[21]=p,e[22]=y,e[23]=v,e[24]=f,e[25]=S):S=e[25],S}function m(e){return e.hasSecondaryAction===!0}l.default=d}),98);
__d("useCometTypeaheadLayoutStrategyOnDownArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(4),n=e.onDownArrow,a=e.onHighlightEntry,i=r("useCometInternalTypeaheadKeyboardNavigation")(),l=i.onKeyboardDownArrow,s;return t[0]!==n||t[1]!==a||t[2]!==l?(s=function(){l(a),n&&n()},t[0]=n,t[1]=a,t[2]=l,t[3]=s):s=t[3],s}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnEnterHandler",["react","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=e.inputRef,n=e.onEnter,o=r("useCometInternalTypeaheadState")(),a=o.highlightedEntry,i=o.highlightedEntrySource,l=t.current;return s(function(){var e,t=(e=l==null?void 0:l.value)!=null?e:"",r=a!=null&&i==="keyboard";t.trim().length===0&&!r||n&&n()},[l,a,i,n])}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnHighlightEntryHandler",["react","react-compiler-runtime","useCometInternalTypeaheadStateDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(3),n=e.onHighlightEntry,a=r("useCometInternalTypeaheadStateDispatcher")(),i=a.dispatchHighlightedEntry,l;return t[0]!==i||t[1]!==n?(l=function(t,r,o){i({entry:t,secondaryActionHighlighted:o,source:r}),n&&n(t,r,o)},t[0]=i,t[1]=n,t[2]=l):l=t[2],l}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnLeftArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(4),n=e.onHighlightEntry,a=e.onLeftArrow,i=r("useCometInternalTypeaheadKeyboardNavigation")(),l=i.onKeyboardLeftArrow,s,u;return t[0]!==n||t[1]!==l||t[2]!==a?(u=l!=null||a!=null?function(){l==null||l(n),a==null||a()}:void 0,t[0]=n,t[1]=l,t[2]=a,t[3]=u):u=t[3],s=u,s}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnOutsideClickHandler",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=e.inputRef,n=e.onOutsideClick;return s(function(){t.current!==document.activeElement&&n&&n()},[t,n])}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnPressEntryHandler",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(2),n=e.onPressEntry,r;return t[0]!==n?(r=function(t,r){n(t,r)},t[0]=n,t[1]=r):r=t[1],r}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnRightArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(4),n=e.onHighlightEntry,a=e.onRightArrow,i=r("useCometInternalTypeaheadKeyboardNavigation")(),l=i.onKeyboardRightArrow,s,u;return t[0]!==n||t[1]!==l||t[2]!==a?(u=l!=null||a!=null?function(){l==null||l(n),a==null||a()}:void 0,t[0]=n,t[1]=l,t[2]=a,t[3]=u):u=t[3],s=u,s}l.default=u}),98);
__d("useCometTypeaheadLayoutStrategyOnUpArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(4),n=e.onHighlightEntry,a=e.onUpArrow,i=r("useCometInternalTypeaheadKeyboardNavigation")(),l=i.onKeyboardUpArrow,s;return t[0]!==n||t[1]!==l||t[2]!==a?(s=function(){l(n),a&&a()},t[0]=n,t[1]=l,t[2]=a,t[3]=s):s=t[3],s}l.default=u}),98);
__d("useCometTypeaheadInternalLayoutInlineStrategyHandlers",["react","react-compiler-runtime","useCometTypeaheadLayoutStrategyOnBlurHandler","useCometTypeaheadLayoutStrategyOnChangeHandler","useCometTypeaheadLayoutStrategyOnDownArrowHandler","useCometTypeaheadLayoutStrategyOnEnterHandler","useCometTypeaheadLayoutStrategyOnHighlightEntryHandler","useCometTypeaheadLayoutStrategyOnLeftArrowHandler","useCometTypeaheadLayoutStrategyOnOutsideClickHandler","useCometTypeaheadLayoutStrategyOnPressEntryHandler","useCometTypeaheadLayoutStrategyOnRightArrowHandler","useCometTypeaheadLayoutStrategyOnUpArrowHandler"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(42),n=e.inputRef,a=e.onBlur,i=e.onChange,l=e.onDownArrow,s=e.onEnter,u=e.onEscape,c=e.onHighlightEntry,d=e.onLeftArrow,m=e.onOutsideClick,p=e.onPressEntry,_=e.onRightArrow,f=e.onUpArrow,g;t[0]!==c?(g={onHighlightEntry:c},t[0]=c,t[1]=g):g=t[1];var h=r("useCometTypeaheadLayoutStrategyOnHighlightEntryHandler")(g),y;t[2]!==a?(y={onBlur:a},t[2]=a,t[3]=y):y=t[3];var C=r("useCometTypeaheadLayoutStrategyOnBlurHandler")(y),b;t[4]!==h||t[5]!==i?(b={onChange:i,onHighlightEntry:h},t[4]=h,t[5]=i,t[6]=b):b=t[6];var v=r("useCometTypeaheadLayoutStrategyOnChangeHandler")(b),S;t[7]!==n||t[8]!==s?(S={inputRef:n,onEnter:s},t[7]=n,t[8]=s,t[9]=S):S=t[9];var R=r("useCometTypeaheadLayoutStrategyOnEnterHandler")(S),L;t[10]!==v||t[11]!==u?(L=function(){v(""),u&&u()},t[10]=v,t[11]=u,t[12]=L):L=t[12];var E=L,k;t[13]!==h||t[14]!==l?(k={onDownArrow:l,onHighlightEntry:h},t[13]=h,t[14]=l,t[15]=k):k=t[15];var I=r("useCometTypeaheadLayoutStrategyOnDownArrowHandler")(k),T;t[16]!==h||t[17]!==f?(T={onHighlightEntry:h,onUpArrow:f},t[16]=h,t[17]=f,t[18]=T):T=t[18];var D=r("useCometTypeaheadLayoutStrategyOnUpArrowHandler")(T),x;t[19]!==p?(x={onPressEntry:p},t[19]=p,t[20]=x):x=t[20];var $=r("useCometTypeaheadLayoutStrategyOnPressEntryHandler")(x),P;t[21]!==n||t[22]!==m?(P={inputRef:n,onOutsideClick:m},t[21]=n,t[22]=m,t[23]=P):P=t[23];var N=r("useCometTypeaheadLayoutStrategyOnOutsideClickHandler")(P),M;t[24]!==h||t[25]!==d?(M={onHighlightEntry:h,onLeftArrow:d},t[24]=h,t[25]=d,t[26]=M):M=t[26];var w=r("useCometTypeaheadLayoutStrategyOnLeftArrowHandler")(M),A;t[27]!==h||t[28]!==_?(A={onHighlightEntry:h,onRightArrow:_},t[27]=h,t[28]=_,t[29]=A):A=t[29];var F=r("useCometTypeaheadLayoutStrategyOnRightArrowHandler")(A),O;return t[30]!==C||t[31]!==v||t[32]!==I||t[33]!==R||t[34]!==E||t[35]!==h||t[36]!==w||t[37]!==N||t[38]!==$||t[39]!==F||t[40]!==D?(O={onBlur:C,onChange:v,onDownArrow:I,onEnter:R,onEscape:E,onHighlightEntry:h,onLeftArrow:w,onOutsideClick:N,onPressEntry:$,onRightArrow:F,onUpArrow:D},t[30]=C,t[31]=v,t[32]=I,t[33]=R,t[34]=E,t[35]=h,t[36]=w,t[37]=N,t[38]=$,t[39]=F,t[40]=D,t[41]=O):O=t[41],O}l.default=u}),98);
__d("useCometTypeaheadInternalLayoutContextualStrategyHandlers",["react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadState","useCometTypeaheadInternalLayoutInlineStrategyHandlers"],(function(t,n,r,o,a,i,l){"use strict";var e=["onAbandonTypeahead_DO_NOT_USE","onClick","onOutsideClick","onShiftTab","onTab"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useMemo;function m(t){var n=o("react-compiler-runtime").c(76),a=t.handlers,i=t.inputRef,l=t.shouldCloseOnEnter,s=t.shouldHandleCloseAfterHandlePressEntry,u,c,d,m,p,_;n[0]!==a?(c=a.onAbandonTypeahead_DO_NOT_USE,d=a.onClick,m=a.onOutsideClick,p=a.onShiftTab,_=a.onTab,u=babelHelpers.objectWithoutPropertiesLoose(a,e),n[0]=a,n[1]=u,n[2]=c,n[3]=d,n[4]=m,n[5]=p,n[6]=_):(u=n[1],c=n[2],d=n[3],m=n[4],p=n[5],_=n[6]);var f=l===void 0?!0:l,g=s===void 0?!1:s,h=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),y=h.dispatchIsOpened,C=h.isOpened,b=r("useCometInternalTypeaheadState")(),v=b.highlightedEntry,S=b.secondaryActionHighlighted,R;n[7]!==y||n[8]!==m?(R=function(){y(!1),m!=null&&m()},n[7]=y,n[8]=m,n[9]=R):R=n[9];var L=R,E;n[10]!==L||n[11]!==u||n[12]!==i?(E=babelHelpers.extends({inputRef:i,onOutsideClick:L},u),n[10]=L,n[11]=u,n[12]=i,n[13]=E):E=n[13];var k=r("useCometTypeaheadInternalLayoutInlineStrategyHandlers")(E),I=k.onBlur,T=k.onChange,D=k.onDownArrow,x=k.onEnter,$=k.onEscape,P=k.onHighlightEntry,N=k.onLeftArrow,M=k.onOutsideClick,w=k.onPressEntry,A=k.onRightArrow,F=k.onUpArrow,O;n[14]!==y||n[15]!==c?(O=function(){y(!1),c!=null&&c()},n[14]=y,n[15]=c,n[16]=O):O=n[16];var B=O,W;n[17]!==y||n[18]!==d?(W=function(){y(!0),d!=null&&d()},n[17]=y,n[18]=d,n[19]=W):W=n[19];var q=W,U;n[20]!==y||n[21]!==T?(U=function(t,n){y(!0),T!=null&&T(t,n)},n[20]=y,n[21]=T,n[22]=U):U=n[22];var V=U,H;n[23]!==y||n[24]!==C||n[25]!==D?(H=function(){C?D!=null&&D():y(!0)},n[23]=y,n[24]=C,n[25]=D,n[26]=H):H=n[26];var G=H,z,j;n[27]!==y||n[28]!==C||n[29]!==N?(j=N!=null?function(){N!=null&&(C?N():y(!0))}:void 0,n[27]=y,n[28]=C,n[29]=N,n[30]=j):j=n[30],z=j;var K=z,Q,X;n[31]!==y||n[32]!==C||n[33]!==A?(X=A!=null?function(){A!=null&&(C?A():y(!0))}:void 0,n[31]=y,n[32]=C,n[33]=A,n[34]=X):X=n[34],Q=X;var Y=Q,J;n[35]!==y||n[36]!==v||n[37]!==x||n[38]!==S||n[39]!==f?(J=function(){S!==!0&&(f||v!=null&&!f)&&y(!1),x!=null&&x()},n[35]=y,n[36]=v,n[37]=x,n[38]=S,n[39]=f,n[40]=J):J=n[40];var Z=J,ee;n[41]!==y||n[42]!==u||n[43]!==C||n[44]!==$?(ee=function(){C?(y(!1),u.onEscape!=null&&u.onEscape()):$!=null&&$()},n[41]=y,n[42]=u,n[43]=C,n[44]=$,n[45]=ee):ee=n[45];var te=ee,ne;n[46]!==y||n[47]!==w||n[48]!==g?(ne=function(t,n){g||y(!1),w!=null&&w(t,n),g&&y(!1)},n[46]=y,n[47]=w,n[48]=g,n[49]=ne):ne=n[49];var re=ne,oe;n[50]!==y||n[51]!==p?(oe=function(){y(!1),p!=null&&p()},n[50]=y,n[51]=p,n[52]=oe):oe=n[52];var ae=oe,ie;n[53]!==y||n[54]!==_?(ie=function(){y(!1),_!=null&&_()},n[53]=y,n[54]=_,n[55]=ie):ie=n[55];var le=ie,se;n[56]!==y||n[57]!==C||n[58]!==F?(se=function(){C?F!=null&&F():y(!0)},n[56]=y,n[57]=C,n[58]=F,n[59]=se):se=n[59];var ue=se,ce;return n[60]!==B||n[61]!==V||n[62]!==q||n[63]!==G||n[64]!==Z||n[65]!==te||n[66]!==K||n[67]!==re||n[68]!==Y||n[69]!==ae||n[70]!==le||n[71]!==ue||n[72]!==I||n[73]!==P||n[74]!==M?(ce={onAbandonTypeahead_DO_NOT_USE:B,onBlur:I,onChange:V,onClick:q,onDownArrow:G,onEnter:Z,onEscape:te,onHighlightEntry:P,onLeftArrow:K,onOutsideClick:M,onPressEntry:re,onRightArrow:Y,onShiftTab:ae,onTab:le,onUpArrow:ue},n[60]=B,n[61]=V,n[62]=q,n[63]=G,n[64]=Z,n[65]=te,n[66]=K,n[67]=re,n[68]=Y,n[69]=ae,n[70]=le,n[71]=ue,n[72]=I,n[73]=P,n[74]=M,n[75]=ce):ce=n[75],ce}l.default=m}),98);
__d("CometTypeaheadLayoutContextualStrategy.react",["CometTypeaheadHelperText.react","CometTypeaheadInternalLayoutContextualStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useCometTypeaheadLayoutStrategyStyles"],(function(t,n,r,o,a,i,l){"use strict";var e=["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","viewRole","inputRef","shouldHandleCloseAfterHandlePressEntry","shouldCloseOnEnter","useAdjustedView","xstyles"],s=["viewXStyle_DO_NOT_USE"],u,c=u||(u=o("react")),d={backgroundColor:"var(--card-background)",borderRadius:8,boxShadow:"0 12px 12px var(--shadow-2), inset 0 0 0 1px var(--shadow-inset)",boxSizing:"border-box",display:"flex",flexDirection:"column",flexGrow:1,marginTop:2},m={adjustedView:{backgroundColor:"x1jx94hy",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxShadow:"xbsqzb3",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",marginTop:"xr9ek0c",marginInlineStart:"xal13hj",width:"x5ox5g8",$$css:!0},view:{backgroundColor:"x1jx94hy",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxShadow:"xbsqzb3",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",marginTop:"xr9ek0c",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(84),a,i,l,u,d,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x;n[0]!==t?(E=t.extraLayoutProps,i=t.helperText,l=t.label,u=t.onAbandonTypeahead_DO_NOT_USE,d=t.onBlur,p=t.onChange,_=t.onClick,f=t.onDownArrow,g=t.onEnter,h=t.onEscape,y=t.onHighlightEntry,C=t.onOutsideClick,b=t.onPressEntry,v=t.onShiftTab,S=t.onTab,R=t.onUpArrow,x=t.viewRole,a=t.inputRef,k=t.shouldHandleCloseAfterHandlePressEntry,I=t.shouldCloseOnEnter,T=t.useAdjustedView,D=t.xstyles,L=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=p,n[7]=_,n[8]=f,n[9]=g,n[10]=h,n[11]=y,n[12]=C,n[13]=b,n[14]=v,n[15]=S,n[16]=R,n[17]=L,n[18]=E,n[19]=k,n[20]=I,n[21]=T,n[22]=D,n[23]=x):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],p=n[6],_=n[7],f=n[8],g=n[9],h=n[10],y=n[11],C=n[12],b=n[13],v=n[14],S=n[15],R=n[16],L=n[17],E=n[18],k=n[19],I=n[20],T=n[21],D=n[22],x=n[23]);var $;n[24]!==E?($=E===void 0?{}:E,n[24]=E,n[25]=$):$=n[25];var P=$,N=P.afterViewContent,M=P.beforeViewContent,w=k===void 0?!1:k,A=I===void 0?!0:I,F=T===void 0?!1:T,O;n[26]!==D?(O=D===void 0?{}:D,n[26]=D,n[27]=O):O=n[27];var B,W;if(n[28]!==O){var q=O;B=q.viewXStyle_DO_NOT_USE,W=babelHelpers.objectWithoutPropertiesLoose(q,s),n[28]=O,n[29]=B,n[30]=W}else B=n[29],W=n[30];var U=r("useCometInternalTypeaheadFetch")(),V=U.isLoading,H=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),G=H.isOpened,z=r("useCometInternalTypeaheadState")(),j=z.activeEntries,K=z.highlightedEntry,Q=r("useCometTypeaheadInputRefs")(a),X=Q.composedRef,Y=Q.inputRef,J;n[31]!==u||n[32]!==d||n[33]!==p||n[34]!==_||n[35]!==f||n[36]!==g||n[37]!==h||n[38]!==y||n[39]!==C||n[40]!==b||n[41]!==v||n[42]!==S||n[43]!==R?(J={onAbandonTypeahead_DO_NOT_USE:u,onBlur:d,onChange:p,onClick:_,onDownArrow:f,onEnter:g,onEscape:h,onHighlightEntry:y,onOutsideClick:C,onPressEntry:b,onShiftTab:v,onTab:S,onUpArrow:R},n[31]=u,n[32]=d,n[33]=p,n[34]=_,n[35]=f,n[36]=g,n[37]=h,n[38]=y,n[39]=C,n[40]=b,n[41]=v,n[42]=S,n[43]=R,n[44]=J):J=n[44];var Z;n[45]!==Y||n[46]!==A||n[47]!==w||n[48]!==J?(Z={handlers:J,inputRef:Y,shouldCloseOnEnter:A,shouldHandleCloseAfterHandlePressEntry:w},n[45]=Y,n[46]=A,n[47]=w,n[48]=J,n[49]=Z):Z=n[49];var ee=r("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(Z),te;n[50]!==j||n[51]!==i||n[52]!==K||n[53]!==G||n[54]!==l||n[55]!==x?(te={activeEntries:j,helperText:i,highlightedEntry:K,inputLabel:l,isOpened:G,viewRole:x},n[50]=j,n[51]=i,n[52]=K,n[53]=G,n[54]=l,n[55]=x,n[56]=te):te=n[56];var ne=r("useCometTypeaheadLayoutContextualStrategyARIAProps")(te),re=F?m.adjustedView:m.view,oe;n[57]!==re||n[58]!==B?(oe=[re,B],n[57]=re,n[58]=B,n[59]=oe):oe=n[59];var ae;n[60]!==oe||n[61]!==W?(ae=babelHelpers.extends({viewXStyle_DO_NOT_USE:oe},W),n[60]=oe,n[61]=W,n[62]=ae):ae=n[62];var ie;n[63]!==G||n[64]!==ae?(ie={isOpened:G,xstyles:ae},n[63]=G,n[64]=ae,n[65]=ie):ie=n[65];var le=r("useCometTypeaheadLayoutStrategyStyles")(ie),se;n[66]!==i?(se=i!=null?c.jsx(r("CometTypeaheadHelperText.react"),{text:i}):null,n[66]=i,n[67]=se):se=n[67];var ue;n[68]!==N||n[69]!==ne||n[70]!==M||n[71]!==V||n[72]!==G||n[73]!==se?(ue={afterViewContent:N,ariaProps:ne,beforeViewContent:M,helperTextComponent:se,isLoading:V,isOpened:G},n[68]=N,n[69]=ne,n[70]=M,n[71]=V,n[72]=G,n[73]=se,n[74]=ue):ue=n[74];var ce;return n[75]!==X||n[76]!==ee||n[77]!==i||n[78]!==l||n[79]!==L||n[80]!==le||n[81]!==ue||n[82]!==x?(ce=c.jsx(r("CometTypeaheadInternalLayoutContextualStrategy.react"),babelHelpers.extends({},L,ee,{extraLayoutProps:ue,helperText:i,inputRef:X,label:l,viewRole:x,xstyles:le})),n[75]=X,n[76]=ee,n[77]=i,n[78]=l,n[79]=L,n[80]=le,n[81]=ue,n[82]=x,n[83]=ce):ce=n[83],ce}l.default=p}),98);
__d("useCometTypeaheadEmptyState",["CometInternalTypeaheadEmptyFetchContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("CometInternalTypeaheadEmptyFetchContext"))}l.default=u}),98);
__d("CometTypeaheadViewEmptyState.react",["FDSText.react","react","react-compiler-runtime","react-strict-dom","useCometTypeaheadEmptyState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={root:{alignItems:"x6s0dn4",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.color,i=e.xstyle,l=a===void 0?"tertiary":a,c=r("useCometTypeaheadEmptyState")(),d;return t[0]!==n||t[1]!==l||t[2]!==c||t[3]!==i?(d=c?s.jsx(o("react-strict-dom").html.div,{"aria-live":"polite","aria-selected":!1,"data-testid":void 0,role:"option",style:[u.root,i],children:s.jsx(r("FDSText.react"),{color:l,numberOfLines:1,type:"body3",children:n})}):null,t[0]=n,t[1]=l,t[2]=c,t[3]=i,t[4]=d):d=t[4],d}l.default=c}),98);
__d("findCometScrollableLayoutActiveNode",[],(function(t,n,r,o,a,i){"use strict";function e(t){return t==null?null:t.tagName==="LI"?t.getAttribute("aria-selected")==="true"?t:null:t.children==null?null:Array.from(t.children).reduce(function(t,n){return t!=null?t:e(n)},null)}i.default=e}),66);
__d("useCometTypeaheadKeyboardForScrollableArea",["findCometScrollableLayoutActiveNode","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(3),n=c(null),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(){var e,t;(e=r("findCometScrollableLayoutActiveNode")((t=n.current)==null?void 0:t.getDOMNode()))==null||e.scrollIntoView({behavior:"smooth",block:"nearest"})},t[0]=a):a=t[0];var i;return t[1]!==e?(i=[e],t[1]=e,t[2]=i):i=t[2],u(a,i),n}l.default=d}),98);
__d("useCometTypeaheadNavigate",["CometProductAttributionContext","goForceFullPageRedirectTo","isCometRouterUrl","react","react-compiler-runtime","useCometRouterDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext;function d(e){var t=o("react-compiler-runtime").c(5),n=r("useCometRouterDispatcher")(),a=c(r("CometProductAttributionContext")),i;return t[0]!==n||t[1]!==a||t[2]!==(e==null?void 0:e.openNewTabForExternalLink)||t[3]!==(e==null?void 0:e.tapPoint)?(i=function(o,i){if(o!=null)if(n!=null){var t,l={fromLink:{tap_point:(t=e==null?void 0:e.tapPoint)!=null?t:"tap_scoped_search_bar"},linkContext:a};r("isCometRouterUrl")(o)?n.go(o,{productAttributionUpdateProps:l}):(e==null?void 0:e.openNewTabForExternalLink)===!0?n.go(o,{}):r("goForceFullPageRedirectTo")(o)}else i&&i(o)},t[0]=n,t[1]=a,t[2]=e==null?void 0:e.openNewTabForExternalLink,t[3]=e==null?void 0:e.tapPoint,t[4]=i):i=t[4],e==null||e.openNewTabForExternalLink,e==null||e.tapPoint,i}l.default=d}),98);/*FB_PKG_DELIM*/
__d("CentralImpressionRecord",["getStyleProperty","intersectionObserverEntryIsIntersecting"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{impressedAt:0,invisibleReason:null,status:null,target:e,visible:!1,visiblePercentage:0}}function s(e,t){var n=e.target,o=e.boundingClientRect,a=null,i=!1;r("intersectionObserverEntryIsIntersecting")(e)?o==null?a="UNDEFINED_BOUNDING_RECT":o.height===0||o.width===0?a="TARGET_SIZE_0":r("getStyleProperty")(n,"opacity")==="0"?a="TARGET_TRANSPARENT":r("getStyleProperty")(n,"visibility")==="hidden"?a="TARGET_HIDDEN":i=!0:a="NOT_IN_VIEWPORT";var l=i===!1?0:e.intersectionRatio,s=t.visible,u=t.impressedAt,c=null;return s&&!i?c="EXIT":!s&&i?(c="ENTER",u=Date.now()):t.visiblePercentage!==l&&(c="UPDATE"),{boundingClientRect:e.boundingClientRect,impressedAt:u,intersectionRect:e.intersectionRect,invisibleReason:a,rootBounds:e.rootBounds,status:c,target:n,visible:i,visiblePercentage:l}}function u(e,t){return e.visible?babelHelpers.extends({},e,{invisibleReason:t,status:"EXIT",visible:!1,visiblePercentage:0}):null}function c(e){return u(e,"PUSH_VIEW_HIDDEN")}function d(e){return u(e,"COMPONENT_UNMOUNTED")}function m(e){return u(e,"PAGE_VISIBILITY_HIDDEN")}l.initImpressionRecord=e,l.calcNextObservedRecord=s,l.calcExitRecordOnPushViewHidden=c,l.calcExitRecordOnUnmount=d,l.calcExitRecordOnViewportHidden=m}),98);
__d("calculateImpressionViewablePercentage",[],(function(t,n,r,o,a,i){"use strict";var e={height:0,width:0,x:0,y:0};function l(t,n){var r=Math.max(t.y,n.y),o=Math.min(t.y+t.height,n.y+n.height);if(r>=o)return e;var a=Math.max(t.x,n.x),i=Math.min(t.x+t.width,n.x+n.width);return a>=i?e:{height:o-r,width:i-a,x:a,y:r}}function s(e,t,n){var r={height:t.height-n.top-n.bottom,width:t.width-n.left-n.right,x:t.x+n.left,y:t.y+n.top};if(e.height===0||e.width===0)return{boundingClientRect:e,rootBounds:r,visiblePercentage:1};if(r.height<=0||r.width<=0)return{boundingClientRect:e,rootBounds:r,visiblePercentage:0};var o=l(r,e);return{boundingClientRect:e,intersectionRect:o,rootBounds:r,visiblePercentage:o.height*o.width/(e.height*e.width)}}i.default=s}),66);
__d("isImpressionTargetOccluded",["containsNode","getViewportDimensions"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){n===void 0&&(n={bottom:0,left:0,right:0,top:0});try{if(!e||!t||!document.elementFromPoint)return!1;var o=r("getViewportDimensions")();if(o.height===0||o.width===0)return!1;var a=t.x,i=t.y,l=t.width,s=t.height,u=Math.min(a+l,o.width-1),c=Math.min(i+s,o.height-1),d=[{x:a,y:i},{x:a,y:c},{x:u,y:i},{x:u,y:c},{x:(a+u)/2,y:(i+c)/2}];return n.top!==0&&n.top>i&&n.top<c&&d.push({x:(a+u)/2,y:(n.top+c)/2}),d.every(function(t){var n=document.elementFromPoint(t.x,t.y),o=!!n&&!r("containsNode")(n,e)&&!r("containsNode")(e,n);return o})}catch(e){return!1}}l.default=e}),98);
__d("calcNextImpressionSnapshotRecord",["Visibility","calculateImpressionViewablePercentage","getElementPosition","getStyleProperty","getViewportDimensions","isImpressionTargetOccluded"],(function(t,n,r,o,a,i,l){"use strict";var e=["visiblePercentage"],s={bottom:0,left:0,right:0,top:0};function u(e){if(e==null||document.documentElement==null)return null;for(var t=e.parentElement;t!=null;){if(t===document.documentElement||t.nodeType!==1)return null;if(r("getStyleProperty")(t,"position")==="absolute"&&r("getStyleProperty")(t,"overflow")!=="visible")return t;t=t.parentElement}return null}function c(t,n,o){if(o===void 0&&(o={}),o.isCometHiddenSubtree)return{impressedAt:n.impressedAt,invisibleReason:"PUSH_VIEW_HIDDEN",status:n.visible?"EXIT":null,target:t,visible:!1,visiblePercentage:0};var a=r("getElementPosition")(t),i=babelHelpers.extends({x:0,y:0},r("getViewportDimensions")()),l=r("calculateImpressionViewablePercentage")(a,i,s),c=!1;if(l.visiblePercentage>0){var d=u(t);d!=null&&l.intersectionRect!=null&&(c=!0,l=r("calculateImpressionViewablePercentage")(l.intersectionRect,r("getElementPosition")(d),s))}var m=o,p=m.viewportMargin,_=p&&!c?r("calculateImpressionViewablePercentage")(a,i,p):l,f=_.visiblePercentage,g=babelHelpers.objectWithoutPropertiesLoose(_,e),h=l,y=h.intersectionRect,C=h.visiblePercentage,b=null,v=!1;C<=0?b="NOT_IN_VIEWPORT":y&&r("isImpressionTargetOccluded")(t,y,p||s)?b=_.visiblePercentage===0?"OCCLUDED_BY_MARGIN":o.isCometHiddenSubtree===!0?"PUSH_VIEW_HIDDEN":"OCCLUSION_DETECTED":r("Visibility").isHidden()?b="PAGE_VISIBILITY_HIDDEN":a.height===0||a.width===0?b="TARGET_SIZE_0":r("getStyleProperty")(t,"opacity")==="0"?b="TARGET_TRANSPARENT":r("getStyleProperty")(t,"visibility")==="hidden"?b="TARGET_HIDDEN":v=!0;var S=v===!1?0:_.visiblePercentage,R=n.visible,L=n.impressedAt,E=null;return R&&!v?E="EXIT":!R&&v?(E="ENTER",L=Date.now()):n.visiblePercentage!==S&&(E="UPDATE"),babelHelpers.extends({impressedAt:L,invisibleReason:b,status:E,target:t,visible:v,visiblePercentage:S},g)}l.default=c}),98);
__d("CentralImpressionScrollBasedTracker",["CentralImpressionRecord","CometThrottle","ImpressionLoggingTimerThreshold","Visibility","calcNextImpressionSnapshotRecord","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,a){var i=this;n===void 0&&(n=null),a===void 0&&(a={}),this.THROTTLE_TIMEOUT=r("ImpressionLoggingTimerThreshold").THROTTLE_TIMEOUT,this.takeSnapshot=r("CometThrottle")(function(){if(!(i.$3==null||i.$8===!0)){var e=r("calcNextImpressionSnapshotRecord")(i.$3,i.$2,i.$7);i.$9(e)}},this.THROTTLE_TIMEOUT),this.takeSnapshotWithDoubleRaf=r("CometThrottle")(function(){if(!(i.$3==null||i.$8===!0)){var e=r("calcNextImpressionSnapshotRecord")(i.$3,i.$2,i.$7);i.$9(e)}},this.THROTTLE_TIMEOUT),this.$5=n,this.$2=o("CentralImpressionRecord").initImpressionRecord(e),this.$1=t,this.$3=e,this.$7=a,this.$8=!1,r("setTimeout")(this.takeSnapshotWithDoubleRaf,0),document.addEventListener("scroll",this.takeSnapshotWithDoubleRaf,{capture:!0,passive:!0}),window.addEventListener("resize",this.takeSnapshotWithDoubleRaf,{capture:!0,passive:!0}),"MutationObserver"in window&&(this.$6=new MutationObserver(this.takeSnapshotWithDoubleRaf),this.$6.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0})),this.$4=[r("Visibility").addListener(r("Visibility").HIDDEN,this.takeSnapshot),r("Visibility").addListener(r("Visibility").VISIBLE,this.takeSnapshot)]}var t=e.prototype;return t.getOptionalUniqueID=function(){return this.$5},t.peek=function(){return this.$2},t.setIsCometHiddenInSubtree=function(t){this.$7.isCometHiddenSubtree=t},t.remove=function(){document.removeEventListener("scroll",this.takeSnapshotWithDoubleRaf,{capture:!0}),window.removeEventListener("resize",this.takeSnapshotWithDoubleRaf,{capture:!0}),this.$6&&this.$6.disconnect(),this.$4.forEach(function(e){return e.remove()}),this.$8=!0},t.unmount=function(){var e=o("CentralImpressionRecord").calcExitRecordOnUnmount(this.$2);e!=null&&this.$9(e),this.remove()},t.update=function(t,n,r){r===void 0&&(r={}),this.$1=n,this.$3=t,this.$7=babelHelpers.extends({},this.$7,r)},t.$9=function(t){var e=this.$2;this.$2=t,t.status!=null&&this.$1(t,this,e,this.$7.isAdRefresh||!1)},e})();l.default=e}),98);
__d("CometAdsRenderingValidationReducer",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return{logs:[].concat(e.logs,[t.log])}}i.reducer=e}),66);
__d("CometAdsRenderingValidationContextProvider",["CometAdsRenderingValidationContext","CometAdsRenderingValidationReducer","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useReducer,m={logs:[]};function p(e){var t=o("react-compiler-runtime").c(10),n=e.adClientToken,a=e.adId,i=e.children,l=e.postRenderingLoggers,u=d(o("CometAdsRenderingValidationReducer").reducer,m),c=u[0],p=u[1],_,f;t[0]!==n||t[1]!==a||t[2]!==l?(f={adClientToken:n,adId:a,postRenderingLoggers:l},t[0]=n,t[1]=a,t[2]=l,t[3]=f):f=t[3];var g;t[4]!==c||t[5]!==f?(g={dispatcher:p,sponsoredData:f,state:c},t[4]=c,t[5]=f,t[6]=g):g=t[6],_=g;var h=_,y;return t[7]!==i||t[8]!==h?(y=s.jsx(r("CometAdsRenderingValidationContext").Provider,{value:h,children:i}),t[7]=i,t[8]=h,t[9]=y):y=t[9],y}l.default=p}),98);
__d("CometFeedAutoFocusedStoryContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("CometFeedUnitCard_feedUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUnitCard_feedUnit",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Story",abstractKey:null}],type:"FeedUnit",abstractKey:"__isFeedUnit"};a.exports=e}),null);
__d("useAdsRenderingValidationDataLogger",["CometAdsRenderingValidationContext","FBLogger","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useRef,m="[data-ad-rendering-role]";function p(){var e=o("react-compiler-runtime").c(6),t=d(null),n=c(r("CometAdsRenderingValidationContext")),a=n.dispatcher,i=n.sponsoredData,l;if(e[0]!==(i==null?void 0:i.adClientToken)||e[1]!==(i==null?void 0:i.postRenderingLoggers)){var s;l=r("gkx")("5837")&&(i==null?void 0:i.adClientToken)!==null&&(i==null||(s=i.postRenderingLoggers)==null?void 0:s.includes("post_rendering_logger"))===!0,e[0]=i==null?void 0:i.adClientToken,e[1]=i==null?void 0:i.postRenderingLoggers,e[2]=l}else l=e[2];var u=l,p;e[3]!==a||e[4]!==u?(p=function(n){if(!(!u||n===null||t.current===n)){r("FBLogger")("comet_ads","useAdsRenderingValidationDataLogger").debug("Comet component %s added to DOM",JSON.stringify(n==null?void 0:n.tagName)),t.current=n;var e=n==null?void 0:n.querySelectorAll(m);e==null||e.forEach(function(e){var t;a({log:{componentName:e.getAttribute("data-testid"),debug:JSON.stringify({boundingRect:e.getBoundingClientRect(),tag:e.tagName}),htmlElement:e,role:(t=e.getAttribute("data-ad-rendering-role"))!=null?t:"unknown"}})})}},e[3]=a,e[4]=u,e[5]=p):p=e[5];var _=p;return u?_:null}l.default=p}),98);
__d("RenderingValidationDataFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("314"),s=o("FalcoLoggerInternal").create("rendering_validation_data",e),u=s;l.default=u}),98);
__d("useAdsRenderingValidationImpressionLogger",["CometAdsRenderingValidationContext","FBLogger","RenderingValidationDataFalcoEvent","gkx","react","react-compiler-runtime","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d="unknown";function m(e){if(e==null)return"";var t="";function n(e){if(e.nodeType===Node.TEXT_NODE){var r;t+=(r=e.textContent)!=null?r:""}else if(e.nodeType===Node.ELEMENT_NODE&&e instanceof Element)if(e.tagName==="IMG"){var o=e.getAttribute("alt");o!=null&&(t+=o)}else for(var a=e.childNodes,i=0;i<a.length;i++)n(a[i])}return n(e),t}function p(e,t,n){var r,o,a=n.htmlElement.getBoundingClientRect();if(e==="image"){var i=n.htmlElement.querySelector("img");if(i!==null){var l={content_rendered_size:{height:i.naturalHeight,width:i.naturalWidth},content_type:"image",content_url:i.src,is_visible:i.complete&&i.naturalHeight>0&&i.naturalWidth>0,role:"media",size:{height:a.height,width:a.width}};return isNaN(parseInt(t,10))?l:babelHelpers.extends({},l,{index:t})}}else if(e==="video"){var s,u,c,d,m,p;return{content_id:n.videoId,content_original_size:{height:(s=(u=n.mediaSize)==null?void 0:u.height)!=null?s:0,width:(c=(d=n.mediaSize)==null?void 0:d.width)!=null?c:0},content_rendered_size:{height:(m=a.height)!=null?m:0,width:(p=a.width)!=null?p:0},content_type:"video",is_visible:!0,role:"media"}}return{is_visible:!0,role:e,size:{height:(r=a==null?void 0:a.height)!=null?r:0,width:(o=a==null?void 0:a.width)!=null?o:0}}}function _(e){var t=o("react-compiler-runtime").c(18),n=c(r("CometAdsRenderingValidationContext")),a=n.sponsoredData,i=n.state,l=a==null?void 0:a.adClientToken,s=a==null?void 0:a.adId,u;if(t[0]!==l||t[1]!==(a==null?void 0:a.postRenderingLoggers)){var _;u=r("gkx")("5837")&&l!==null&&(a==null||(_=a.postRenderingLoggers)==null?void 0:_.includes("post_rendering_logger"))===!0,t[0]=l,t[1]=a==null?void 0:a.postRenderingLoggers,t[2]=u}else u=t[2];var g=u,h=r("gkx")("10852"),y;t[3]!==l||t[4]!==s||t[5]!==e||t[6]!==g||t[7]!==(i==null?void 0:i.logs)?(y=function(n){var t;if(g){var o=(t=i==null?void 0:i.logs)!=null?t:[];r("FBLogger")("comet_ads","useAdsRenderingValidationImpressionLogger").debug("onImpressionStart for %s: %s",s!=null?s:""),o.length!==0&&r("RenderingValidationDataFalcoEvent").log(function(){return{event_sub_type:"feed_unit_initial_impression",log_source:e!=null?e:d,log_source_type:"comet",sponsored_data:{ad_client_token:l,ad_id:s},view_data:o.map(f)}})}},t[3]=l,t[4]=s,t[5]=e,t[6]=g,t[7]=i==null?void 0:i.logs,t[8]=y):y=t[8],i==null||i.logs;var C=y,b;t[9]!==l||t[10]!==s||t[11]!==e||t[12]!==g||t[13]!==(i==null?void 0:i.logs)?(b=function(n){var t;if(g){var o=(t=i==null?void 0:i.logs)!=null?t:[];if(o.length!==0){r("FBLogger")("comet_ads","useAdsRenderingValidationImpressionLogger").debug("onImpressionEnd for %s: %s",s!=null?s:"");var a=o.map(function(e){var t=e.htmlElement,n=e.role.split("-"),r=n[0],o=n[1],a={debug:e.debug,is_visible:!0,log_source:e.componentName,log_source_type:"comet",role:r};if(r==="media_container"||r==="image"||r==="video"){var i=p(r,o,e);if(i!==null)return babelHelpers.extends({},a,i)}return h&&r==="story_message"?babelHelpers.extends({},a,{text:m(t)}):isNaN(parseInt(o,10))?babelHelpers.extends({},a,{text:t==null?void 0:t.innerText}):babelHelpers.extends({},a,{index:o,text:t==null?void 0:t.innerText})});r("RenderingValidationDataFalcoEvent").log(function(){return{event_sub_type:"feed_unit_full_impression",log_source:e!=null?e:d,log_source_type:"comet",sponsored_data:{ad_client_token:l,ad_id:s},view_data:a}})}}},t[9]=l,t[10]=s,t[11]=e,t[12]=g,t[13]=i==null?void 0:i.logs,t[14]=b):b=t[14],i==null||i.logs;var v=b,S;return t[15]!==v||t[16]!==C?(S={onImpressionEnd:v,onImpressionStart:C},t[15]=v,t[16]=C,t[17]=S):S=t[17],r("useSinglePartialViewImpression")(S)}function f(e){return{is_visible:null,log_source:e.componentName,log_source_type:"comet",role:e.role}}l.default=_}),98);
__d("useMergeCometAriaProps",["react-compiler-runtime","useSetAttributeRef"],(function(t,n,r,o,a,i,l){"use strict";function e(e){for(var t=o("react-compiler-runtime").c(11),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var l=a,s;if(t[0]!==l||t[1]!==e){var u;t[3]!==e?(u=function(n,r){return Object.prototype.hasOwnProperty.call(r,e)&&typeof r[e]=="string"&&n.push(r[e]),n},t[3]=e,t[4]=u):u=t[4],s=l.reduce(u,[]).join(" "),t[0]=l,t[1]=e,t[2]=s}else s=t[2];var c=s,d=r("useSetAttributeRef")(e,c),m;if(t[5]!==e||t[6]!==c){var p;m=(p={},p[e]=c,p.suppressHydrationWarning=!0,p),t[5]=e,t[6]=c,t[7]=m}else m=t[7];var _;return t[8]!==d||t[9]!==m?(_=[m,d],t[8]=d,t[9]=m,t[10]=_):_=t[10],_}l.default=e}),98);
__d("CometFeedUnitCard.react",["CometFeedARIAProperties.react","CometFeedAutoFocusedStoryContext","CometFeedHighlightedStoriesContext","CometFeedStoryAttachmentCommandWidget","CometFeedUnitBorderContext","CometFeedUnitCard_feedUnit.graphql","CometFeedUnitDropShadowContext","CometGHLScrambledLabelScreenReaderContext","CometHideableComponentExperiment.react","CometKeyCommandSettingsContext","CometKeyCommandWrapper.react","CometRelay","FDSCard.react","FocusWithinHandler.react","GHLMitigationsGating","UserAgent","cr:430","gkx","react","react-compiler-runtime","useAdsRenderingValidationDataLogger","useAdsRenderingValidationImpressionLogger","useCometScrollAnchor","useEmptyFunction","useMergeCometAriaProps","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useId,_=d.useMemo,f=d.useRef,g=d.useState,h=(s=n("cr:430"))!=null?s:{useCometFocusHighlightedContent:r("useEmptyFunction")},y=h.useCometFocusHighlightedContent,C=r("gkx")("22786");function b(t){var a=o("react-compiler-runtime").c(54),i=t.children,l=t.position,s=o("CometRelay").useFragment(e!==void 0?e:e=n("CometFeedUnitCard_feedUnit.graphql"),t.feedUnit),u=s.id,d=p(),_;a[0]!==d?(_={"aria-labelledby":d,suppressHydrationWarning:!0},a[0]=d,a[1]=_):_=a[1];var h=_,b=p(),v;a[2]!==b?(v={"aria-describedby":b,suppressHydrationWarning:!0},a[2]=b,a[3]=v):v=a[3];var S=v,R=p(),L;a[4]!==R?(L={"aria-describedby":R,suppressHydrationWarning:!0},a[4]=R,a[5]=L):L=a[5];var E=L,k=p(),I;a[6]!==k?(I={"aria-describedby":k,suppressHydrationWarning:!0},a[6]=k,a[7]=I):I=a[7];var T=I,D=p(),x;a[8]!==D?(x={"aria-describedby":D,suppressHydrationWarning:!0},a[8]=D,a[9]=x):x=a[9];var $=x,P=p(),N;a[10]!==P?(N={"aria-describedby":P,suppressHydrationWarning:!0},a[10]=P,a[11]=N):N=a[11];var M=N,w=r("useMergeCometAriaProps")("aria-describedby",S,E,T,M,$),A=w[0],F=w[1],O,B;a[12]!==d?(B={id:d,suppressHydrationWarning:!0},a[12]=d,a[13]=B):B=a[13];var W=B,q;a[14]!==b?(q={id:b,suppressHydrationWarning:!0},a[14]=b,a[15]=q):q=a[15];var U=q,V;a[16]!==R?(V={id:R,suppressHydrationWarning:!0},a[16]=R,a[17]=V):V=a[17];var H=V,G;a[18]!==k?(G={id:k,suppressHydrationWarning:!0},a[18]=k,a[19]=G):G=a[19];var z=G,j;a[20]!==D?(j={id:D,suppressHydrationWarning:!0},a[20]=D,a[21]=j):j=a[21];var K=j,Q;a[22]!==P?(Q={id:P,suppressHydrationWarning:!0},a[22]=P,a[23]=Q):Q=a[23];var X=Q,Y;a[24]!==z||a[25]!==K||a[26]!==H||a[27]!==U||a[28]!==X||a[29]!==W?(Y={attachmentTargetProps:z,commentCountTargetProps:K,contentTargetProps:H,metaTargetProps:U,reactionTargetProps:X,titleTargetProps:W},a[24]=z,a[25]=K,a[26]=H,a[27]=U,a[28]=X,a[29]=W,a[30]=Y):Y=a[30],O=Y;var J=O,Z=m(r("CometFeedHighlightedStoriesContext")),ee;a[31]!==Z||a[32]!==u?(ee=u!=null&&Z!=null&&Z.has(u),a[31]=Z,a[32]=u,a[33]=ee):ee=a[33];var te=ee,ne=m(r("CometKeyCommandSettingsContext")),re=ne.getAreSingleKeysDisabled,oe;a[34]!==re?(oe=re()==null?!0:!!re(),a[34]=re,a[35]=oe):oe=a[35];var ae=oe,ie=g(te),le=ie[0],se=ie[1],ue;a[36]===Symbol.for("react.memo_cache_sentinel")?(ue={onScrollComplete:function(){return se(!0)}},a[36]=ue):ue=a[36];var ce=o("useCometScrollAnchor").useCometScrollAnchor("feed-story",u,ue),de=f(null),me=r("useMergeRefs")(de,ce,F,t.loggingRef),pe=m(r("CometFeedAutoFocusedStoryContext"));y(pe===u?de:null);var _e=g(!1),fe=_e[0],ge=_e[1],he=m(r("CometFeedUnitBorderContext")),ye=m(r("CometFeedUnitDropShadowContext")),Ce;a[37]===Symbol.for("react.memo_cache_sentinel")?(Ce=r("UserAgent").isBrowser("Chrome")&&r("UserAgent").isPlatform("Mac OS X"),a[37]=Ce):Ce=a[37];var be=Ce,ve=r("useAdsRenderingValidationImpressionLogger")("CometFeedUnitCard"),Se=r("useAdsRenderingValidationDataLogger")(),Re=r("useMergeRefs")(ve,Se),Le;a[38]===Symbol.for("react.memo_cache_sentinel")?(Le={className:"x1n2onr6 x1ja2u2z"},a[38]=Le):Le=a[38];var Ee;a[39]!==he||a[40]!==i||a[41]!==me||a[42]!==ye||a[43]!==J||a[44]!==le||a[45]!==fe||a[46]!==ae||a[47]!==l||a[48]!==A||a[49]!==h?(Ee=c.jsx(r("FocusWithinHandler.react"),{children:function(t,n){var e;if(C){var a=n&&t&&!fe;a?e="static":le&&(e="animated")}else(le||n)&&(e="animated");var s=r("gkx")("23000"),u=s?null:{role:"article"},d=t&&o("GHLMitigationsGating").getIsGHLOverrideDelayLabelPlacementEnabled();return c.jsx(r("CometKeyCommandWrapper.react"),{debugName:"feed_story",children:c.jsx(r("CometFeedStoryAttachmentCommandWidget").Wrapper,{children:c.jsx(r("CometGHLScrambledLabelScreenReaderContext").Provider,{value:d,children:c.jsx("div",babelHelpers.extends({"aria-posinset":be?void 0:l+1},A,h,{className:"x1a2a7pz","data-focus":!ae&&s&&r("gkx")("1048")?"feed_story":null,"data-testid":void 0,ref:me},u,{children:c.jsx(r("FocusWithinHandler.react"),{onFocusChange:ge,children:c.jsx(r("CometHideableComponentExperiment.react"),{callingSurface:"comet_feed_unit_card",children:c.jsx(r("FDSCard.react"),{background:"white",border:he,borderHighlight:e,dropShadow:ye,children:c.jsx(r("CometFeedARIAProperties.react").Provider,{value:J,children:i})})})})}))})})})}}),a[39]=he,a[40]=i,a[41]=me,a[42]=ye,a[43]=J,a[44]=le,a[45]=fe,a[46]=ae,a[47]=l,a[48]=A,a[49]=h,a[50]=Ee):Ee=a[50];var ke;return a[51]!==Re||a[52]!==Ee?(ke=c.jsx("div",babelHelpers.extends({},Le,{ref:Re,children:Ee})),a[51]=Re,a[52]=Ee,a[53]=ke):ke=a[53],ke}l.default=b}),98);
__d("CometFeedUnitContainerSection_feedUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUnitContainerSection_feedUnit",selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitGoodwillMemoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GoodwillCometStory",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMKQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedPeopleYouMayKnowFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometReelsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"ShowcaseFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFriendRequestsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"FriendRequestsFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitQuickPromotionStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GroupsCometGYSJFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupsYouShouldJoinFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometEndOfFeedUpsellStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"EndOfFeedUpsellFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometGroupRelatedGroupsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupRelatedGroupsFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometStoriesSingleBucketFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"StoriesSingleBucketInlineViewerFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedCustomizedStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"CustomizedStory",abstractKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedUnitUnknownFeedUnitStrategy_feedUnit"}],type:"FeedUnit",abstractKey:"__isFeedUnit"};a.exports=e}),null);
__d("CometFeedUnitContainerSection.react",["CometFeedMatchRenderer.react","CometFeedUnitContainerSection_feedUnit.graphql","RelayHooks","cr:1448849","react","react-compiler-runtime","usePageletMatchMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e=["onUnsupported","position","variables"],s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useState,_=s!==void 0?s:s=n("CometFeedUnitContainerSection_feedUnit.graphql");function f(t){var a=o("react-compiler-runtime").c(12),i=t.onUnsupported,l=t.position,s=t.variables,u=babelHelpers.objectWithoutPropertiesLoose(t,e),d=o("RelayHooks").useFragment(_,u.feedUnit),m=p(!1),f=m[0],g=m[1],h;a[0]!==i?(h=function(){g(!0),i()},a[0]=i,a[1]=h):h=a[1];var y=h;if(r("usePageletMatchMetadata")("feed_unit",d),!f){var C;a[2]!==l||a[3]!==s?(C={position:l,variables:s},a[2]=l,a[3]=s,a[4]=C):C=a[4];var b;return a[5]!==d||a[6]!==y||a[7]!==C?(b=c.jsx(r("CometFeedMatchRenderer.react"),{match:d,matchRequired:!0,onUnsupported:y,props:C,section:"feed_unit",trackingData:null}),a[5]=d,a[6]=y,a[7]=C,a[8]=b):b=a[8],b}if(n("cr:1448849")!=null){var v;return a[9]!==d||a[10]!==l?(v=c.jsx(n("cr:1448849"),{feedUnit:d,position:l}),a[9]=d,a[10]=l,a[11]=v):v=a[11],v}return null}var g=c.memo(f);l.default=g}),98);
__d("CometFeedUnitErrorBoundary_feedUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUnitErrorBoundary_feedUnit",selections:[{args:null,kind:"FragmentSpread",name:"useCometFeedUnitEventLogger_feedUnit"},{args:null,kind:"FragmentSpread",name:"useShouldPreventFeedSectionErrorsFromKillingFeedUnit_story"}],type:"FeedUnit",abstractKey:"__isFeedUnit"};a.exports=e}),null);
__d("CometFeedUnitErrorMessageOrNull",["cr:1448848"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1448848")}),98);
__d("GHLSharedMitigationsGating",["gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return r("justknobx")._("3711")&&r("gkx")("18759")},s=function(){return r("justknobx")._("5306")&&r("gkx")("19809")},u=function(){return r("justknobx")._("2745")&&r("gkx")("11353")};l.getIsGHLContextScramblerNewsFeedEnabled=e,l.getIsGHLMinGapTypeAliasEnabled=s,l.getIsGHLNewsFeedCategoryAliasEnabled=u}),98);
__d("CometFeedUnitSetStatusContext",["CometGHLReactPropsScrambler.react","FBLogger","GHLSharedMitigationsGating","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=s.createContext(function(){});function d(e){var t=o("react-compiler-runtime").c(16),n=e.brsContentLabel,a=e.brsFilterSetting,i=e.category,l=e.categoryAlias,u=e.children,d=e.deduplicationKey,m=e.minGapType,p=e.minGapTypeAlias,_=e.setFeedUnitRecord,f=o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?p:m,g=o("GHLSharedMitigationsGating").getIsGHLNewsFeedCategoryAliasEnabled()?l:i,h=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("category"),y=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("minGapEnumType"),C;t[0]!==g||t[1]!==h?(C=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?h:g,t[0]=g,t[1]=h,t[2]=C):C=t[2];var b=C,v;t[3]!==f||t[4]!==y?(v=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?y:f,t[3]=f,t[4]=y,t[5]=v):v=t[5];var S=v,R;t[6]!==n||t[7]!==a||t[8]!==d||t[9]!==_||t[10]!==b||t[11]!==S?(R=function(t){d!=null&&S!=null?_(d,{category:b!=null?b:"UNKNOWN",edgeData:{brsContentLabel:n,brsFilterSetting:a},minGapType:S,status:t}):r("FBLogger")("CometFeedUnitStatusTracking").mustfix("Category or deduplication_key cannot be null in CometFeedUnitSetStatusContextProvider; Feed unit status not set.")},t[6]=n,t[7]=a,t[8]=d,t[9]=_,t[10]=b,t[11]=S,t[12]=R):R=t[12];var L=R,E;return t[13]!==u||t[14]!==L?(E=s.jsx(c.Provider,{value:L,children:u}),t[13]=u,t[14]=L,t[15]=E):E=t[15],E}l.CometFeedUnitSetStatusContext=c,l.CometFeedUnitSetStatusContextProvider=d}),98);
__d("CometFeedUnitsTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:CometFeedUnitsLoggerConfig")}),null);
__d("useCometFeedUnitEventLogger_feedUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometFeedUnitEventLogger_feedUnit",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:e,type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:e,type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null}],type:"FeedUnit",abstractKey:"__isFeedUnit"}})();a.exports=e}),null);
__d("useCometFeedUnitEventLogger",["CometFeedUnitsTypedLoggerLite","CometRelay","react","react-compiler-runtime","useCometFeedUnitEventLogger_feedUnit.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(t){var a=o("react-compiler-runtime").c(3),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useCometFeedUnitEventLogger_feedUnit.graphql"),t),l;return a[0]!==i.__typename||a[1]!==i.quick_promotion_items?(l=function(t){var e=t.category,n=t.errorName,o=t.event,a=t.minGapType,l=t.numCommitsBeforeError,s=t.position,u=t.renderLocation,c=[];i.quick_promotion_items!=null&&(c=i.quick_promotion_items.map(d).filter(Boolean)),r("CometFeedUnitsTypedLoggerLite").log({category:e,error_name:n,event:o,min_gap_type:a,num_commits_before_error:l,position:s,related_ids:c,render_location:u,unit_name:i.__typename})},a[0]=i.__typename,a[1]=i.quick_promotion_items,a[2]=l):l=a[2],l}function d(e){var t;return(t=e.quick_promotion)==null?void 0:t.id}l.default=c}),98);
__d("useShouldPreventFeedSectionErrorsFromKillingFeedUnit_story.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider"}],kind:"Fragment",metadata:null,name:"useShouldPreventFeedSectionErrorsFromKillingFeedUnit_story",selections:[{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:e,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:e,storageKey:null}]}],type:"Story",abstractKey:null}})();a.exports=e}),null);
__d("useShouldPreventFeedSectionErrorsFromKillingFeedUnit",["CometRelay","gkx","useShouldPreventFeedSectionErrorsFromKillingFeedUnit_story.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=o("CometRelay").useFragment(e!==void 0?e:e=n("useShouldPreventFeedSectionErrorsFromKillingFeedUnit_story.graphql"),t),i=a.sponsored_data,l=i!=null,s=l?r("gkx")("23001"):!1;return s}l.default=s}),98);
__d("CometFeedUnitErrorBoundary.react",["CometErrorBoundary.react","CometFeedUnitErrorBoundary_feedUnit.graphql","CometFeedUnitErrorMessageOrNull","CometFeedUnitOnFeedUnitErrorContext","CometFeedUnitSetStatusContext","CometFeedUnitShouldPropagateErrorContext","CometGHLReactPropsScrambler.react","CometRelay","GHLSharedMitigationsGating","InteractionTracing.xplat","emptyFunction","react","useCometFeedUnitEventLogger","useCommitCountRef","useShouldPreventFeedSectionErrorsFromKillingFeedUnit"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useState;function _(t){var a=t.category,i=t.categoryAlias,l=t.children,s=t.feedUnit,c=t.minGapType,_=t.minGapTypeAlias,f=t.onError,g=t.position,h=t.renderLocation,y=t.unitTypename,C=p(null),b=C[0],v=C[1],S=r("useCommitCountRef")(),R=o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?_:c,L=o("GHLSharedMitigationsGating").getIsGHLNewsFeedCategoryAliasEnabled()?i:a,E=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("category"),k=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("minGapStringType"),I=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?E:L,T=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?k:R,D=o("CometRelay").useFragment(e!==void 0?e:e=n("CometFeedUnitErrorBoundary_feedUnit.graphql"),s),x=m(o("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContext),$=r("useCometFeedUnitEventLogger")(D),P=d(function(e){v(e),x("error"),$({category:I,errorName:e.message,event:"js_error",minGapType:T,numCommitsBeforeError:S.current,position:g,renderLocation:h!=="%future added value"?h:void 0}),r("InteractionTracing.xplat").getPendingInteractions().forEach(function(e){e.addAnnotationInt("feedUnitError",1)}),f!=null&&f(e)},[x,$,I,T,S,g,h,f]),N=r("useShouldPreventFeedSectionErrorsFromKillingFeedUnit")(D);return b!=null?r("CometFeedUnitErrorMessageOrNull")!=null?u.jsx(r("CometFeedUnitErrorMessageOrNull"),{error:b}):null:u.jsx(r("CometErrorBoundary.react"),{context:{project:"CometFeedUnitErrorBoundary"},onError:P,children:u.jsx(r("CometFeedUnitShouldPropagateErrorContext").Provider,{value:!0,children:u.jsx(r("CometFeedUnitOnFeedUnitErrorContext").Provider,{value:N?r("emptyFunction"):P,children:l})})})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("CometFeedUnitLoadingContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({onFinishLoading:r("emptyFunction"),onStartLoading:r("emptyFunction")});l.default=u}),98);
__d("CometFeedUnitOnUnsupportedLoggerContext",["CometFeedUnitsTypedLoggerLite","CometGHLReactPropsScrambler.react","GHLSharedMitigationsGating","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useRef,m=s.createContext(function(){});function p(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.minGapType,i=e.minGapTypeAlias,l=e.position,u=e.postID,c=e.renderLocation,p=e.unitName,_=d(!1),f=o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?i:a,g=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("minGapStringType"),h;t[0]!==f||t[1]!==g?(h=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?g:f,t[0]=f,t[1]=g,t[2]=h):h=t[2];var y=h,C;t[3]!==l||t[4]!==u||t[5]!==c||t[6]!==p||t[7]!==y?(C=function(t){_.current||(_.current=!0,r("CometFeedUnitsTypedLoggerLite").log({event:"unsupported",min_gap_type:y,position:l,post_id:u,related_ids:t!=null?t:null,render_location:c,unit_name:p}))},t[3]=l,t[4]=u,t[5]=c,t[6]=p,t[7]=y,t[8]=C):C=t[8];var b=C,v;return t[9]!==n||t[10]!==b?(v=s.jsx(m.Provider,{value:b,children:n}),t[9]=n,t[10]=b,t[11]=v):v=t[11],v}l.CometFeedUnitOnUnsupportedLoggerContext=m,l.CometFeedUnitOnUnsupportedLoggerContextProvider=p}),98);
__d("CometFeedUnitSetDebugInfoContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(r("emptyFunction"));l.default=u}),98);
__d("CometFeedUnit_feedUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"lbl_adv_iden",args:null,kind:"ScalarField",name:"ad_id",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_rendering_loggers",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider"},{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider"}],kind:"Fragment",metadata:null,name:"CometFeedUnit_feedUnit",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"debug_info",storageKey:null},e,{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:t,storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"th_dat_spo",args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:t,storageKey:null}]},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"context_actor_hovercard",storageKey:null},e],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_story_civic",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[e,{condition:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedUnit_feedUnit_dubbing",fragmentName:"FBReelsDubbingInfoLink_dubbing",fragmentPropName:"dubbing",kind:"ModuleImport"}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"dubbing"}]}],type:"Video",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedUnitCard_feedUnit"},{args:null,kind:"FragmentSpread",name:"CometFeedUnitContainerSection_feedUnit"},{args:null,kind:"FragmentSpread",name:"CometFeedUnitErrorBoundary_feedUnit"},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_trackableFeedUnit"}],type:"FeedUnit",abstractKey:"__isFeedUnit"}})();a.exports=e}),null);
__d("CometFeedUnit_newsFeedEdge.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUnit_newsFeedEdge",selections:[{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null}],type:"NewsFeedEdge",abstractKey:null};a.exports=e}),null);
__d("CometFeedUnit_trackableFeedUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUnit_trackableFeedUnit",selections:[{alias:null,args:null,concreteType:"TrackingData",kind:"LinkedField",name:"trackingdata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}],type:"TrackableFeedUnit",abstractKey:"__isTrackableFeedUnit"};a.exports=e}),null);
__d("CometOffscreenScrollCompensator.react",["cr:10000","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=(e=n("cr:10000"))!=null?e:u.Fragment;l.default=c}),98);
__d("memory.react",["cr:1227"],(function(t,n,r,o,a,i,l){"use strict";var e;l.useEffect=(e=n("cr:1227")).useEffect,l.useState=e.useState,l.useCallback=e.useCallback,l.useMemo=e.useMemo,l.useLayoutEffect=e.useLayoutEffect}),98);
__d("useScrollBasedImpressionTracker",["BaseViewportMarginsContext","CentralImpressionScrollBasedTracker","HiddenSubtreePassiveContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useEffect,m=s.useRef;function p(e,t){var n=o("react-compiler-runtime").c(13),a=m(null),i=m(null),l=c(r("BaseViewportMarginsContext")),s=m(null),u=c(r("HiddenSubtreePassiveContext")),p;n[0]!==u||n[1]!==e||n[2]!==l?(p=function(n){if(a.current!=null)if(i.current==null||n!=null&&i.current.getOptionalUniqueID()!==n){var t=!1;i.current!=null&&(i.current.unmount(),i.current=null,t=!0),i.current=new(r("CentralImpressionScrollBasedTracker"))(a.current,e,n,{isAdRefresh:t,isCometHiddenSubtree:u.getCurrentState().hiddenOrBackgrounded_FIXME,viewportMargin:l}),s.current!=null&&(s.current.remove(),s.current=null),s.current=u.subscribeToChanges(function(e){i.current!=null&&i.current.setIsCometHiddenInSubtree(e.hiddenOrBackgrounded_FIXME)})}else i.current.update(a.current,e,{isCometHiddenSubtree:u.getCurrentState().hiddenOrBackgrounded_FIXME,viewportMargin:l})},n[0]=u,n[1]=e,n[2]=l,n[3]=p):p=n[3];var _=p,f;n[4]!==_||n[5]!==t?(f=function(n){a.current!==n&&n!=null&&(a.current=n,_(t))},n[4]=_,n[5]=t,n[6]=f):f=n[6];var g=f,h,y;n[7]===Symbol.for("react.memo_cache_sentinel")?(h=function(){return function(){i.current!=null&&(i.current.unmount(),i.current=null),s.current!=null&&(s.current.remove(),s.current=null)}},y=[],n[7]=h,n[8]=y):(h=n[7],y=n[8]),d(h,y);var C,b;return n[9]!==_||n[10]!==t?(C=function(){_(t)},b=[_,t],n[9]=_,n[10]=t,n[11]=C,n[12]=b):(C=n[11],b=n[12]),d(C,b),g}l.default=p}),98);
__d("useCometFeedScrollBasedImpression2ndChannel",["Comet2ndChannelContext","CometImpressionLoggingUtil","react","react-compiler-runtime","useScrollBasedImpressionTracker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext;function d(e,t){var n=o("react-compiler-runtime").c(4),a=c(r("Comet2ndChannelContext")),i;n[0]!==e||n[1]!==a||n[2]!==t?(i=function(r){if(e&&r.status==="ENTER"){var n=e.sponsored_data||e.th_dat_spo;if(n!==null){var i,l=(i=n==null?void 0:n.ad_id)!=null?i:n==null?void 0:n.lbl_adv_iden,s=null;a&&(s=a()),o("CometImpressionLoggingUtil").logChannelData(l,t,r,s,o("CometImpressionLoggingUtil").TwoMSecondChannel)}}},n[0]=e,n[1]=a,n[2]=t,n[3]=i):i=n[3];var l=i;return r("useScrollBasedImpressionTracker")(l)}l.default=d}),98);
__d("CometFeedUnit.react",["ActorHovercardContext","CometAdsRenderingValidationContextProvider","CometErrorProjectContext","CometFeedBrandSafetyContext","CometFeedUnitCard.react","CometFeedUnitContainerSection.react","CometFeedUnitDialogTrackingDataContext","CometFeedUnitErrorBoundary.react","CometFeedUnitLoadingContext","CometFeedUnitLoggingContext","CometFeedUnitOnUnsupportedLoggerContext","CometFeedUnitPostRenderingLoggersContext","CometFeedUnitQueryVariablesContext","CometFeedUnitSetDebugInfoContext","CometFeedUnitSetStatusContext","CometFeedUnitTranslationLabelContext","CometFeedUnit_feedUnit.graphql","CometFeedUnit_newsFeedEdge.graphql","CometFeedUnit_trackableFeedUnit.graphql","CometGHLReactPropsScrambler.react","CometGHLScrambledLabelMitigationLoggerContext","CometOffscreenScrollCompensator.react","CometPlaceholder.react","CometProfiler.react","CometRelay","FBLogger","FDSHovercardGroupContext","FocusRegion.react","GHLSharedMitigationsGating","HiddenSubtreePassiveContext","InteractionTracing","RecoverableViolationWithComponentStack.react","cr:12345","cr:1326","cr:1720","cr:1829844","deferredLoadComponent","focusScopeQueries","gkx","joinClasses","memory.react","react","react-compiler-runtime","requireDeferred","stylex","useActorHovercardContext","useCometFeedScrollBasedImpression2ndChannel","useEmptyFunction","useMergeRefs","usePostRenderingLogger","useStoryViewabilityLogger","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","debuggingInfoLoggers","feedUnit","loggingRef","visibilityObserverRef"],s=["category","interactionSourceOverride","minGapType","minGapTypeAlias","onError","position","variables"],u,c,d,m,p,_,f=_||(_=o("react")),g=_,h=g.useContext,y=g.useRef,C=(m=n("cr:1720"))!=null?m:r("useEmptyFunction"),b=r("deferredLoadComponent")(r("requireDeferred")("CometFeedUnitLoadingIndicatorMask.react").__setRef("CometFeedUnit.react")),v={reduceSitewidePostSpacing:{marginBottom:"xod5an3",$$css:!0},wrapper:{marginBottom:"x1yztbdb",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1ja2u2z",$$css:!0}},S=window.atob&&window.atob("c3BvbnNvcmVkX2Fk"),R=u!==void 0?u:u=n("CometFeedUnit_feedUnit.graphql"),L=c!==void 0?c:c=n("CometFeedUnit_trackableFeedUnit.graphql"),E=d!==void 0?d:d=n("CometFeedUnit_newsFeedEdge.graphql"),k={event_name:"ad_validate_image",event_sub_type:"feed_unit_full_impression",is_cta_shown:null},I=[5,8],T=r("gkx")("22998")?[o("focusScopeQueries").focusableScopeQuery,o("focusScopeQueries").headerAndSpinnerFocusScopeQuery]:null;function D(t){var n,a=o("react-compiler-runtime").c(14),i,l,s,u,c,d;a[0]!==t?(i=t.children,l=t.debuggingInfoLoggers,s=t.feedUnit,u=t.loggingRef,d=t.visibilityObserverRef,c=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=u,a[5]=c,a[6]=d):(i=a[1],l=a[2],s=a[3],u=a[4],c=a[5],d=a[6]);var m=o("CometRelay").useFragment(L,s),p=m.trackingdata,_;a[7]!==p?(_=p!=null?p:{},a[7]=p,a[8]=_):_=a[8];var g=_,y=g.id,C=h(r("CometFeedUnitDialogTrackingDataContext")),b=(n=C.trackingDataID)!=null?n:y,v=r("useCometFeedScrollBasedImpression2ndChannel")(s,b),S=r("useMergeRefs")(d,u,v),R;return a[9]!==i||a[10]!==l||a[11]!==c||a[12]!==S?(R=f.jsxs("div",babelHelpers.extends({},c,{ref:S,children:[l,i]})),a[9]=i,a[10]=l,a[11]=c,a[12]=S,a[13]=R):R=a[13],R}function x(e){var t,a,l,u,c,d,m,_,g,x,N,M,w,A=o("react-compiler-runtime").c(186),F,O,B,W,q,U,V,H;A[0]!==e?(F=e.category,O=e.interactionSourceOverride,B=e.minGapType,W=e.minGapTypeAlias,q=e.onError,U=e.position,H=e.variables,V=babelHelpers.objectWithoutPropertiesLoose(e,s),A[0]=e,A[1]=F,A[2]=O,A[3]=B,A[4]=W,A[5]=q,A[6]=U,A[7]=V,A[8]=H):(F=A[1],O=A[2],B=A[3],W=A[4],q=A[5],U=A[6],V=A[7],H=A[8]);var G=o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?W:B,z=o("CometGHLReactPropsScrambler.react").useUnwrapPropFromProvider("minGapStringType"),j;A[9]!==G||A[10]!==z?(j=o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?z:G,A[9]=G,A[10]=z,A[11]=j):j=A[11];var K=j,Q=o("CometRelay").useFragment(R,V.feedUnit);if(Q==null)throw r("FBLogger")("comet_feed").mustfixThrow("Relay fragment feedUnit cannot be null/undefined in CometFeedUnit");var X=o("CometRelay").useFragment(L,Q),Y=X.client_view_config,J=X.trackingdata,Z=X.viewability_config,ee=o("CometRelay").useFragment(E,V.newsFeedEdge),te=h(r("CometFeedUnitDialogTrackingDataContext")),ne;A[12]!==J?(ne=J!=null?J:{},A[12]=J,A[13]=ne):ne=A[13];var re=ne,oe=re.id,ae=(t=te.trackingDataID)!=null?t:oe,ie=(a=te.viewabilityConfig)!=null?a:Z,le=H.renderLocation,se=o("memory.react").useState(!1),ue=se[0],ce=se[1],de;A[14]!==ce?(de=function(){return{onFinishLoading:function(){return ce(!1)},onStartLoading:function(){return ce(!0)}}},A[14]=ce,A[15]=de):de=A[15];var me;A[16]===Symbol.for("react.memo_cache_sentinel")?(me=[],A[16]=me):me=A[16];var pe=o("memory.react").useMemo(de,me),_e=(l=Q.feedback)==null?void 0:l.associated_group,fe=_e==null?void 0:_e.context_actor_hovercard,ge=r("useActorHovercardContext")(),he=(Q==null?void 0:Q.is_story_civic)===!0?"CIVIC_POST":fe!=null?fe:ge,ye;A[17]!==(_e==null?void 0:_e.id)?(ye=function(){var e;return{groupID:(e=_e==null?void 0:_e.id)!=null?e:void 0}},A[17]=_e==null?void 0:_e.id,A[18]=ye):ye=A[18];var Ce=_e==null?void 0:_e.id,be;A[19]!==Ce?(be=[Ce],A[19]=Ce,A[20]=be):be=A[20];var ve=o("memory.react").useMemo(ye,be),Se=h(o("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContext),Re=(u=Q==null?void 0:Q.sponsored_data)!=null?u:Q==null?void 0:Q.th_dat_spo,Le=h(r("CometFeedBrandSafetyContext"));if(Le){var Ee=Le(),ke=Ee.feedUnitRegistry,Ie=ee==null?void 0:ee.deduplication_key;Ie!=null?ke[Ie]={brsContentLabel:ee==null?void 0:ee.brs_content_label,brsFilterSetting:Re==null?void 0:Re.brs_filter_setting,tracking:ae,unitType:Q.__typename}:V.newsFeedEdge!=null&&r("FBLogger")("comet_feed_unit").mustfix("NewsFeedEdge deduplicationKey %s is nullish, even though newsFeedEdge prop was provided. FeedUnit id: %s",Ie,Q.id)}var Te=y(!1),De=h(o("CometFeedUnitOnUnsupportedLoggerContext").CometFeedUnitOnUnsupportedLoggerContext),xe,$e;A[21]!==U?(xe=function(){U===0&&Te.current===!1&&r("InteractionTracing").getPendingInteractions().forEach(P),Te.current=!0},$e=[U],A[21]=U,A[22]=xe,A[23]=$e):(xe=A[22],$e=A[23]),o("memory.react").useLayoutEffect(xe,$e);var Pe,Ne;A[24]!==Se?(Pe=function(){return Se("rendered")},Ne=[Se],A[24]=Se,A[25]=Pe,A[26]=Ne):(Pe=A[25],Ne=A[26]),o("memory.react").useEffect(Pe,Ne);var Me,we;A[27]!==De||A[28]!==Se?(Me=function(){r("InteractionTracing").getPendingInteractions().forEach($),De(),Se("error")},we=[De,Se],A[27]=De,A[28]=Se,A[29]=Me,A[30]=we):(Me=A[29],we=A[30]);var Ae=o("memory.react").useCallback(Me,we),Fe=h(r("CometFeedUnitSetDebugInfoContext")),Oe=Q.debug_info,Be=Q.id,We=y(!1),qe=h(r("HiddenSubtreePassiveContext")),Ue,Ve;A[31]!==Oe||A[32]!==qe||A[33]!==Be||A[34]!==U||A[35]!==Fe?(Ue=function(){qe.getCurrentState().hiddenOrBackgrounded_FIXME||Fe(U,{debugInfo:Oe!=null?Oe:null,storyId:Be!=null?Be:null,visible:We.current})},Ve=[Oe,qe,Be,U,Fe],A[31]=Oe,A[32]=qe,A[33]=Be,A[34]=U,A[35]=Fe,A[36]=Ue,A[37]=Ve):(Ue=A[36],Ve=A[37]);var He=o("memory.react").useCallback(Ue,Ve),Ge,ze;A[38]!==He?(Ge=function(){We.current=!1,He()},ze=[He],A[38]=He,A[39]=Ge,A[40]=ze):(Ge=A[39],ze=A[40]);var je=o("memory.react").useCallback(Ge,ze),Ke,Qe;A[41]!==He?(Ke=function(){We.current=!0,He()},Qe=[He],A[41]=He,A[42]=Ke,A[43]=Qe):(Ke=A[42],Qe=A[43]);var Xe=o("memory.react").useCallback(Ke,Qe),Ye;A[44]!==je||A[45]!==Xe?(Ye={onHidden:je,onVisible:Xe},A[44]=je,A[45]=Xe,A[46]=Ye):Ye=A[46];var Je=r("useVisibilityObserver")(Ye),Ze;if(A[47]!==(Y==null?void 0:Y.can_delay_log_impression)||A[48]!==(Y==null?void 0:Y.use_banzai_signal_imp)||A[49]!==(Y==null?void 0:Y.use_banzai_vital_imp)||A[50]!==((c=te.clientViewConfig)==null?void 0:c.can_delay_log_impression)||A[51]!==((d=te.clientViewConfig)==null?void 0:d.use_banzai_signal_imp)||A[52]!==((m=te.clientViewConfig)==null?void 0:m.use_banzai_vital_imp)){var et,tt,nt;Ze=function(){var e,t,n,r,o,a;return{can_delay_log_impression:(e=(t=te.clientViewConfig)==null?void 0:t.can_delay_log_impression)!=null?e:Y==null?void 0:Y.can_delay_log_impression,use_banzai_signal_imp:(n=(r=te.clientViewConfig)==null?void 0:r.use_banzai_signal_imp)!=null?n:Y==null?void 0:Y.use_banzai_signal_imp,use_banzai_vital_imp:(o=(a=te.clientViewConfig)==null?void 0:a.use_banzai_vital_imp)!=null?o:Y==null?void 0:Y.use_banzai_vital_imp}},A[47]=Y==null?void 0:Y.can_delay_log_impression,A[48]=Y==null?void 0:Y.use_banzai_signal_imp,A[49]=Y==null?void 0:Y.use_banzai_vital_imp,A[50]=(et=te.clientViewConfig)==null?void 0:et.can_delay_log_impression,A[51]=(tt=te.clientViewConfig)==null?void 0:tt.use_banzai_signal_imp,A[52]=(nt=te.clientViewConfig)==null?void 0:nt.use_banzai_vital_imp,A[53]=Ze}else Ze=A[53];var rt=Y==null?void 0:Y.can_delay_log_impression,ot=Y==null?void 0:Y.use_banzai_signal_imp,at=Y==null?void 0:Y.use_banzai_vital_imp,it=(_=te.clientViewConfig)==null?void 0:_.can_delay_log_impression,lt=(g=te.clientViewConfig)==null?void 0:g.use_banzai_signal_imp,st=(x=te.clientViewConfig)==null?void 0:x.use_banzai_vital_imp,ut;A[54]!==rt||A[55]!==ot||A[56]!==at||A[57]!==it||A[58]!==lt||A[59]!==st?(ut=[rt,ot,at,it,lt,st],A[54]=rt,A[55]=ot,A[56]=at,A[57]=it,A[58]=lt,A[59]=st,A[60]=ut):ut=A[60];var ct=o("memory.react").useMemo(Ze,ut),dt=Re==null?void 0:Re.client_token,mt=(N=Re==null?void 0:Re.ad_id)!=null?N:Re==null?void 0:Re.lbl_adv_iden,pt=mt!=null?mt:Q.id,_t=mt!=null?"AD":"ORGANIC",ft;A[61]!==ct||A[62]!==ae||A[63]!==U||A[64]!==pt||A[65]!==_t?(ft={clientViewConfig:ct,encryptedToken:ae,id:pt,position:U,type:_t},A[61]=ct,A[62]=ae,A[63]=U,A[64]=pt,A[65]=_t,A[66]=ft):ft=A[66];var gt=C(ft),ht=gt!==null,yt=ie!=null?ie:I,Ct;A[67]!==dt||A[68]!==ct||A[69]!==ae||A[70]!==O||A[71]!==U||A[72]!==ht||A[73]!==yt?(Ct={clientToken:dt,clientViewConfig:ct,encryptedTracking:ae,interactionSourceOverride:O,position:U,shouldDisableGHLSurvey:ht,viewabilityConfig:yt},A[67]=dt,A[68]=ct,A[69]=ae,A[70]=O,A[71]=U,A[72]=ht,A[73]=yt,A[74]=Ct):Ct=A[74];var bt=r("useStoryViewabilityLogger")(Ct),vt=bt.debuggingInfoLoggers,St=bt.ref,Rt,Lt;A[75]!==He?(Rt=function(){return He()},Lt=[He],A[75]=He,A[76]=Rt,A[77]=Lt):(Rt=A[76],Lt=A[77]),o("memory.react").useEffect(Rt,Lt);var Et=V["data-testid"],kt=r("gkx")("20998")&&((Re==null?void 0:Re.ad_id)!=null||(Re==null?void 0:Re.lbl_adv_iden)!=null),It,Tt;A[78]!==U||A[79]!==le?(It=function(){return{position:U,renderLocation:le!=null?le:null}},Tt=[U,le],A[78]=U,A[79]=le,A[80]=It,A[81]=Tt):(It=A[80],Tt=A[81]);var Dt=o("memory.react").useMemo(It,Tt),xt=Re==null?void 0:Re.post_rendering_loggers,$t,Pt;A[82]!==Q.sponsored_data||A[83]!==Q.th_dat_spo||A[84]!==xt?($t=function(){var e,t,n,r,o,a,i;return{ad_id:(e=(t=(n=Q.sponsored_data)!=null?n:Q.th_dat_spo)==null?void 0:t.ad_id)!=null?e:(r=(o=Q.sponsored_data)!=null?o:Q.th_dat_spo)==null?void 0:r.lbl_adv_iden,client_token:(a=(i=Q.sponsored_data)!=null?i:Q.th_dat_spo)==null?void 0:a.client_token,post_rendering_logger_from_context:xt}},Pt=[Q.sponsored_data,Q.th_dat_spo,xt],A[82]=Q.sponsored_data,A[83]=Q.th_dat_spo,A[84]=xt,A[85]=$t,A[86]=Pt):($t=A[85],Pt=A[86]);var Nt=o("memory.react").useMemo($t,Pt),Mt,wt;A[87]!==Q.sponsored_data||A[88]!==Q.th_dat_spo?(Mt=function(){var e,t,n,r,o,a,i;return{ad_client_token:(e=(t=Q.sponsored_data)!=null?t:Q.th_dat_spo)==null?void 0:e.client_token,ad_id:(n=(r=(o=Q.sponsored_data)!=null?o:Q.th_dat_spo)==null?void 0:r.ad_id)!=null?n:(a=(i=Q.sponsored_data)!=null?i:Q.th_dat_spo)==null?void 0:a.lbl_adv_iden,event_name:k.event_name,event_sub_type:k.event_sub_type}},wt=[Q.sponsored_data,Q.th_dat_spo],A[87]=Q.sponsored_data,A[88]=Q.th_dat_spo,A[89]=Mt,A[90]=wt):(Mt=A[89],wt=A[90]);var At=o("memory.react").useCallback(Mt,wt);r("usePostRenderingLogger")(At,xt);var Ft=(M=Q==null||(w=Q.attachments)==null||(w=w[0])==null?void 0:w.media)!=null?M:null,Ot,Bt;A[91]!==Ft?(Ot=function(){return Ft!=null&&(Ft==null?void 0:Ft.dubbing)!=null?f.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:f.jsx(o("CometRelay").MatchContainer,{match:Ft==null?void 0:Ft.dubbing,props:{iconColor:"secondary",textColor:"secondary",video$key:Ft==null?void 0:Ft.dubbing,withDot:!0}})}):null},Bt=[Ft],A[91]=Ft,A[92]=Ot,A[93]=Bt):(Ot=A[92],Bt=A[93]);var Wt=o("memory.react").useMemo(Ot,Bt),qt;A[94]!==U||A[95]!==K?(qt=U==null?f.jsx(r("RecoverableViolationWithComponentStack.react"),{errorMessage:"position is null or undefined for min gap type = "+(K!=null?K:"UNKNOWN"),projectName:"comet_feed"}):null,A[94]=U,A[95]=K,A[96]=qt):qt=A[96];var Ut=qt,Vt=Re?"comet-feed-sponsored-story":null,Ht;A[97]!==Q||A[98]!==Ae||A[99]!==U||A[100]!==H?(Ht=n("cr:1326")?f.jsx(n("cr:1326"),{children:f.jsx(r("CometFeedUnitContainerSection.react"),{feedUnit:Q,onUnsupported:Ae,position:U,variables:H})}):f.jsx(r("CometFeedUnitContainerSection.react"),{feedUnit:Q,onUnsupported:Ae,position:U,variables:H}),A[97]=Q,A[98]=Ae,A[99]=U,A[100]=H,A[101]=Ht):Ht=A[101];var Gt=Ht,zt,jt;A[102]!==ae?(zt=function(){return{trackingData:ae}},jt=[ae],A[102]=ae,A[103]=zt,A[104]=jt):(zt=A[103],jt=A[104]);var Kt=o("memory.react").useMemo(zt,jt),Qt=le==="homepage_stream"||le==="group",Xt=r("gkx")("19871"),Yt,Jt;A[105]!==ct||A[106]!==ae||A[107]!==Z?(Yt=function(){return{clientViewConfig:ct,trackingDataID:ae,viewabilityConfig:Z!=null?Z:I}},Jt=[ct,ae,Z],A[105]=ct,A[106]=ae,A[107]=Z,A[108]=Yt,A[109]=Jt):(Yt=A[108],Jt=A[109]);var Zt=o("memory.react").useMemo(Yt,Jt),en="CometFeedUnit_"+U,tn="CometFeedUnit_"+U,nn=Qt&&Xt&&v.reduceSitewidePostSpacing,rn;A[110]!==kt||A[111]!==nn?(rn=r("joinClasses")((p||(p=r("stylex")))(v.wrapper,nn),kt?S:""),A[110]=kt,A[111]=nn,A[112]=rn):rn=A[112];var on;A[113]!==kt||A[114]!==Gt?(on=kt?f.jsx("article",{"data-ft":'{"ei":"sponsored_ad"',children:Gt}):Gt,A[113]=kt,A[114]=Gt,A[115]=on):on=A[115];var an;A[116]!==Wt||A[117]!==on?(an=f.jsx(r("CometFeedUnitTranslationLabelContext").Provider,{value:Wt,children:on}),A[116]=Wt,A[117]=on,A[118]=an):an=A[118];var ln;A[119]!==ue?(ln=ue?f.jsx(b,{}):null,A[119]=ue,A[120]=ln):ln=A[120];var sn;A[121]!==Et||A[122]!==vt||A[123]!==Q||A[124]!==St||A[125]!==an||A[126]!==ln||A[127]!==Je?(sn=f.jsxs(D,{"data-testid":void 0,debuggingInfoLoggers:vt,feedUnit:Q,loggingRef:St,visibilityObserverRef:Je,children:[an,ln]}),A[121]=Et,A[122]=vt,A[123]=Q,A[124]=St,A[125]=an,A[126]=ln,A[127]=Je,A[128]=sn):sn=A[128];var un;A[129]!==Q||A[130]!==gt||A[131]!==U||A[132]!==sn?(un=f.jsx(r("CometFeedUnitCard.react"),{feedUnit:Q,loggingRef:gt,position:U,children:sn}),A[129]=Q,A[130]=gt,A[131]=U,A[132]=sn,A[133]=un):un=A[133];var cn;A[134]!==Vt||A[135]!==rn||A[136]!==un?(cn=f.jsx("div",{className:rn,"data-testid":void 0,children:un}),A[134]=Vt,A[135]=rn,A[136]=un,A[137]=cn):cn=A[137];var dn;A[138]!==tn||A[139]!==cn?(dn=f.jsx(o("FocusRegion.react").FocusRegion,{id:tn,recoverFocusQuery:T,children:cn}),A[138]=tn,A[139]=cn,A[140]=dn):dn=A[140];var mn;A[141]!==en||A[142]!==dn?(mn=f.jsx(r("CometOffscreenScrollCompensator.react"),{children:f.jsx(r("CometProfiler.react"),{id:en,children:dn})}),A[141]=en,A[142]=dn,A[143]=mn):mn=A[143];var pn;A[144]!==mt||A[145]!==dt||A[146]!==xt||A[147]!==mn?(pn=f.jsx(r("CometAdsRenderingValidationContextProvider"),{adClientToken:dt,adId:mt,postRenderingLoggers:xt,children:mn}),A[144]=mt,A[145]=dt,A[146]=xt,A[147]=mn,A[148]=pn):pn=A[148];var _n;A[149]!==Nt||A[150]!==pn?(_n=f.jsx(r("CometFeedUnitPostRenderingLoggersContext").Provider,{value:Nt,children:pn}),A[149]=Nt,A[150]=pn,A[151]=_n):_n=A[151];var fn;A[152]!==Kt||A[153]!==_n?(fn=f.jsx(r("CometGHLScrambledLabelMitigationLoggerContext").Provider,{value:Kt,children:_n}),A[152]=Kt,A[153]=_n,A[154]=fn):fn=A[154];var gn;A[155]!==pe||A[156]!==fn?(gn=f.jsx(r("CometFeedUnitLoadingContext").Provider,{value:pe,children:fn}),A[155]=pe,A[156]=fn,A[157]=gn):gn=A[157];var hn;A[158]!==Zt||A[159]!==gn?(hn=f.jsx(r("CometFeedUnitDialogTrackingDataContext").Provider,{value:Zt,children:gn}),A[158]=Zt,A[159]=gn,A[160]=hn):hn=A[160];var yn;A[161]!==hn||A[162]!==H?(yn=f.jsx(r("CometFeedUnitQueryVariablesContext").Provider,{value:H,children:hn}),A[161]=hn,A[162]=H,A[163]=yn):yn=A[163];var Cn;A[164]!==Dt||A[165]!==yn?(Cn=f.jsx(r("CometErrorProjectContext").Provider,{value:"comet_feed",children:f.jsx(r("CometFeedUnitLoggingContext").Provider,{value:Dt,children:yn})}),A[164]=Dt,A[165]=yn,A[166]=Cn):Cn=A[166];var bn;A[167]!==Ut||A[168]!==Cn?(bn=f.jsxs(f.Fragment,{children:[Ut,Cn]}),A[167]=Ut,A[168]=Cn,A[169]=bn):bn=A[169];var vn=bn;if(n("cr:1829844")!=null&&n("cr:12345")!=null){var Sn=Be!=null?Be:"",Rn;A[170]!==Sn?(Rn={type:n("cr:12345").FEED_OBJECT_ID,value:Sn},A[170]=Sn,A[171]=Rn):Rn=A[171];var Ln;A[172]!==vn||A[173]!==Rn?(Ln=f.jsx(n("cr:1829844"),{metadata:Rn,name:"feed_unit",children:vn}),A[172]=vn,A[173]=Rn,A[174]=Ln):Ln=A[174],vn=Ln}var En;return A[175]!==_e||A[176]!==F||A[177]!==Q||A[178]!==ve||A[179]!==he||A[180]!==q||A[181]!==U||A[182]!==le||A[183]!==vn||A[184]!==K?(En=f.jsx(f.Fragment,{children:o("GHLSharedMitigationsGating").getIsGHLContextScramblerNewsFeedEnabled()?f.jsx(r("CometFeedUnitErrorBoundary.react"),{feedUnit:Q,onError:q,position:U,renderLocation:le,unitTypename:Q.__typename,children:f.jsx(r("ActorHovercardContext").Provider,{value:he,children:_e!=null?f.jsx(r("FDSHovercardGroupContext").Provider,{value:ve,children:vn}):vn})}):f.jsx(r("CometFeedUnitErrorBoundary.react"),babelHelpers.extends({},o("GHLSharedMitigationsGating").getIsGHLNewsFeedCategoryAliasEnabled()?{categoryAlias:F}:{category:F},{feedUnit:Q},o("GHLSharedMitigationsGating").getIsGHLMinGapTypeAliasEnabled()?{minGapTypeAlias:K}:{minGapType:K},{onError:q,position:U,renderLocation:le,unitTypename:Q.__typename,children:f.jsx(r("ActorHovercardContext").Provider,{value:he,children:_e!=null?f.jsx(r("FDSHovercardGroupContext").Provider,{value:ve,children:vn}):vn})}))}),A[175]=_e,A[176]=F,A[177]=Q,A[178]=ve,A[179]=he,A[180]=q,A[181]=U,A[182]=le,A[183]=vn,A[184]=K,A[185]=En):En=A[185],En}function $(e){e.addAnnotationInt("unsupportedFeedUnit",1)}function P(e){e.addMarkerPoint("FirstFeedUnitMount","AppTiming")}var N=f.memo(x);l.default=N}),98);/*FB_PKG_DELIM*/
__d("MAWAbPropsClient",["WAAbPropsToUI"],(function(t,n,r,o,a,i,l){"use strict";var e={contents:o("WAAbPropsToUI").prepareAbPropsForUI()};function s(t){e.contents=t}function u(){return e.contents}l.rewrite=s,l.getAbProps=u}),98);
__d("MAWExternalLinkUtil",["FBLogger","MAWOembedHelper","MAWOembedIframeContainer.react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=[],s=["image/png","image/jpeg","image/jpg"],u=2e3;function c(e){return new Promise(function(t){return r("setTimeout")(t,e)})}function d(e){return Promise.race([e,c(u)])}function m(e){if(e==null)return null;var t=null,n=e.find(function(e){return Object.values(C).some(function(n){var r=n.schemes,o=n.url,a=r.some(function(t){return t.test(e.entity.url)});return a&&(t=o),a})});return n==null||t==null?null:{oEmbedRequest:t+"?url="+encodeURIComponent(n.entity.url)+"&format=json",oEmbedUrl:n.entity.url}}async function p(e){var t,n=e.fallbackUrl,a=e.qplEvent,i=e.request,l=(t=window.frames["maw-intermediate-iframe"])!=null?t:null;if(l==null&&(o("MAWOembedIframeContainer.react").createMAWOembedIframeContainer(),window.frames["maw-intermediate-iframe"]==null)){a==null||a.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_return:"iframe cannot be found."}}),r("FBLogger")("messenger_web_sharing").warn("[external link] Cannot find the iframe to request oembed url response.");return}try{var s=await d(o("MAWOembedIframeContainer.react").requestUrl(i,o("MAWOembedHelper").MAWOembedIFrameMessageType.OEMBED_REQUEST_URL,l));if(s==null||s instanceof Blob){a==null||a.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"oembedResponse is null or an instance of Blob."}}),r("FBLogger")("messenger_web").warn("[external link] Failed to fetch oEmbed response: expected json response but got blob.");return}return f({fallbackUrl:n,rawResponse:s})}catch(e){a==null||a.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"Error thrown when trying to fetch oembed response in iframe."}}),r("FBLogger")("messenger_web").warn("[External link] Error thrown when trying to fetch oembed response in iframe.");return}}async function _(t){var n,a=t.qplEvent,i=t.xmaData;if(i==null)return Promise.resolve();var l=b(i.url),s=e.includes(l);if(s)return Promise.resolve();var u=i==null?void 0:i.thumbnail_url;if(u==null||!u)return a==null||a.addPoint("get_image_blob_response_returned_null",{string:{get_image_blob_response_returned_null:"url was null or undefined"}}),Promise.resolve();var c=(n=window.frames["maw-intermediate-iframe"])!=null?n:null;if(c==null&&(o("MAWOembedIframeContainer.react").createMAWOembedIframeContainer(),window.frames["maw-intermediate-iframe"]==null)){a==null||a.addPoint("get_image_blob_response_returned_null",{string:{get_image_blob_response_returned_null:"iframe cannot be found."}}),r("FBLogger")("messenger_web").warn("[external link] Cannot find the iframe to request image blob response.");return}var m=await d(o("MAWOembedIframeContainer.react").requestUrl(u,o("MAWOembedHelper").MAWOembedIFrameMessageType.THUMBNAIL_URL,c));return m instanceof Blob?m:(a==null||a.addPoint("get_image_blob_response_returned_null",{string:{get_image_blob_response_returned_null:"imageBlobResponse is not instance of Blob"}}),r("FBLogger")("messenger_web").warn("[external link] Failed to fetch image blob response. "),Promise.resolve())}function f(e){var t,n=e.fallbackUrl,o=e.rawResponse;if(o.version!=="1.0")throw r("FBLogger")("messenger_web").mustfixThrow("Unsupported response version from oEmbed API");if(o.type==="photo"&&o.url==null)throw r("FBLogger")("messenger_web").mustfixThrow("Unsupported response from oEmbed API: photo does not have url field");return{author_name:o.author_name!=null?decodeURIComponent(o.author_name):void 0,height:o.height,thumbnail_height:o.thumbnail_height,thumbnail_url:o.thumbnail_url,thumbnail_width:o.thumbnail_width,title:o.title!=null?decodeURIComponent(o.title):void 0,type:o.type,url:(t=o.url)!=null?t:n,width:o.width}}function g(e){var t=y.some(function(t){return t.test(e)});return t?!0:Object.values(C).some(function(t){var n=t.url;return e.startsWith(n)})}var h=new RegExp("^http(?:s)?:\\/\\/i\\.ytimg\\.com.+$"),y=[new RegExp("^http(?:s)?:\\/\\/i1\\.sndcdn\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/i\\.scdn\\.co.+$"),new RegExp("^http(?:s)?:\\/\\/(?:#!)?[^#?\\/]+\\.cloudfront\\.net.+$"),new RegExp("^http(?:s)?:\\/\\/pi\\.tedcdn\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/static01\\.nyt\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/i\\.vimeocdn\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/(?:#!)?[^#?\\/]+\\.tiktokcdn\\.com.+$"),h],C={NYTimes:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/www\\.nytimes\\.com\\/svc\\/oembed$"),new RegExp("^http(?:s)?:\\/\\/nytimes\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?nytimes\\.com\\/.+$")],url:"https://www.nytimes.com/svc/oembed/json/"},SoundCloud:{schemes:[new RegExp("^http(?:s)?:\\/\\/soundcloud\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/on\\.soundcloud\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/soundcloud\\.app\\.goog\\.gl\\/.+$")],url:"https://soundcloud.com/oembed"},Spotify:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/open\\.spotify\\.com\\/.+$")],url:"https://open.spotify.com/oembed"},Spreaker:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?spreaker\\.com\\/.+$")],url:"https://api.spreaker.com/oembed"},TED:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/ted\\.com\\/talks\\/.+$"),new RegExp("^http(?:s)?:\\/\\/www\\.ted\\.com\\/talks\\/.+$")],url:"https://www.ted.com/services/v1/oembed.json"},TikTok:{schemes:[new RegExp("^http(?:s)?:\\/\\/www\\.tiktok\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/www\\.tiktok\\.com\\/(?:#!)?[^#?\\/]+\\/video\\/.+$")],url:"https://www.tiktok.com/oembed"},Vimeo:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/album\\/(?:#!)?[^#?\\/]+\\/video\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/channels\\/(?:#!)?[^#?\\/]+\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/groups\\/(?:#!)?[^#?\\/]+\\/video\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/ondemand\\/(?:#!)?[^#?\\/]+\\/.+$"),new RegExp("^http(?:s)?:\\/\\/player\\.vimeo\\.com\\/video\\/.+$")],url:"https://vimeo.com/api/oembed.json"},youtube:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/watch.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/v\\/.+$"),new RegExp("^http(?:s)?:\\/\\/youtu\\.be\\/.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/playlist\\?list\\=.+$"),new RegExp("^http(?:s)?:\\/\\/youtube\\.com\\/playlist\\?list\\=.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/shorts.+$")],url:"https://www.youtube.com/oembed"}};function b(e){return Object.keys(C).find(function(t){return C[t].schemes.some(function(t){return t.test(e)})})}l.allowedPreviewTypes=s,l.findFirstAvailableOembedUrlAndRequestPair=m,l.getOembedResponse=p,l.getImageBlobResponse=_,l.isAllowedRequestForFbsbx=g}),98);
__d("SecureMessageListener",["SecurePostMessage","URI","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){var t=this;this.$3=null,this.$4=!1,this.$1=e,this.$5=function(e){t.run(e)}}var n=t.prototype;return n.setEventHandler=function(t){return this.$2=t,this},n.setSupportedOrigins=function(t){return this.$3=t,this},n.skipOriginCheck_UNSAFE=function(){return this.$4=!0,this},n.beginListening=function(){return this.$1.addEventListener("message",this.$5),this},n.stopListening=function(){try{this.$1.removeEventListener("message",this.$5)}catch(t){var e=r("getErrorSafe")(t);if(!(e instanceof TypeError))throw e}return this},n.run=function(t){if(this.$3==null||this.$3.length===0){if(!this.$4&&t.origin!==this.$1.location.origin)return}else if(!this.isSupportedOrigin(this.$3,t.origin))return;if(this.$2){var e=function(n){o("SecurePostMessage").sendMessageToSpecificOrigin(t.source,n,t.origin)};this.$2(t,e)}},n.isSupportedOrigin=function(n,o){if(!new RegExp("^https://").test(o))return!1;var t=new(e||(e=r("URI")))(o);return n.some(function(e){return t.isSubdomainOfDomain(e)})},t})();l.default=s}),98);
__d("MAWOembedHelper",["$InternalEnum","ConstUriUtils","FBLogger","MAWExternalLinkUtil","SecureMessageListener","SecurePostMessage","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=["facebook.com","messenger.com","instagram.com","internalfb.com"];function s(e){if(e==null||typeof e!="object")return null;var t=e.requestURL,n=e.requestMessageType;if(typeof n!="string"||typeof t!="string"||!o("ConstUriUtils").isValidUri(t))return null;var r=c.cast(n);return r==null||r!==c.OEMBED_REQUEST_URL&&r!==c.THUMBNAIL_URL?null:[r,t]}function u(){var t=null,n=new(r("SecureMessageListener"))(window);function a(e){t=e.origin;var n=e.data,a=s(n);if(a!=null){var l=a[0],u=a[1];o("MAWExternalLinkUtil").isAllowedRequestForFbsbx(u)&&r("promiseDone")(window.fetch(u).then(function(e){switch(e.status!==200&&r("FBLogger")("messenger_web").mustfix("[external link] fbsbx page fetching for the response is not successful."),l){case c.OEMBED_REQUEST_URL:return e.json();case c.THUMBNAIL_URL:return e.blob()}}).then(function(e){i({type:l,url:u,value:e})}).catch(function(){r("FBLogger")("messenger_web").warn("[external link] Failed to fetch response in helper js.")}))}}n.setEventHandler(a).setSupportedOrigins(e),n.beginListening();function i(e,n){var o=n!=null?n:1;if(t==null){o<=3&&window.setTimeout(function(){i(e,o+1)},250*Math.pow(2,o*o));return}r("SecurePostMessage").sendMessageToSpecificOrigin(window.parent,e,t)}}var c=n("$InternalEnum").Mirrored(["OEMBED_REQUEST_URL","THUMBNAIL_URL"]);l.init=u,l.MAWOembedIFrameMessageType=c}),98);
__d("XFBSbxMAWProxyPageControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/maw_proxy_page/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("MAWOembedIframeContainer.react",["CookieConsentIFrameConfig","FBLogger","MAWOembedHelper","Promise","SecureMessageListener","SecurePostMessage","WAResolvable","XFBSbxMAWProxyPageControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return"www.fbsbx.com"}var u=new Map,c=null;function d(t,a,i){var l=u.get(t);if(l!=null)return l.promise;var c=f(s());if(c==null)return(e||(e=n("Promise"))).resolve();r("SecurePostMessage").sendMessageToSpecificOrigin(i.contentWindow,{requestMessageType:a,requestURL:t},c);var d=new(o("WAResolvable")).Resolvable;return u.set(t,d),d.promise}function m(e){if(e==null||typeof e!="object")return null;var t=e.url,n=e.value,a=e.type;if(t==null||n==null||a==null||typeof a!="string")return null;var i=o("MAWOembedHelper").MAWOembedIFrameMessageType.cast(a);if(typeof t=="string"&&i!=null){if(i===o("MAWOembedHelper").MAWOembedIFrameMessageType.THUMBNAIL_URL&&n instanceof Blob)return{type:o("MAWOembedHelper").MAWOembedIFrameMessageType.THUMBNAIL_URL,url:t,value:n};if(i===o("MAWOembedHelper").MAWOembedIFrameMessageType.OEMBED_REQUEST_URL&&typeof n=="object"&&n.title!=null&&n.thumbnail_url!=null){var l={author_name:typeof n.author_name=="string"?n.author_name:void 0,height:typeof n.height=="number"?n==null?void 0:n.height:150,thumbnail_height:typeof n.thumbnail_height=="number"?n.thumbnail_height:void 0,thumbnail_url:typeof n.thumbnail_url=="string"?n.thumbnail_url:void 0,thumbnail_width:typeof n.thumbnail_width=="number"?n.thumbnail_width:void 0,title:typeof n.title=="string"?n.title:void 0,type:typeof n.type=="string"?n.type:"photo",version:typeof n.version=="string"?n.version:"1.0",width:typeof n.width=="number"?n.width:200};return{type:o("MAWOembedHelper").MAWOembedIFrameMessageType.OEMBED_REQUEST_URL,url:t,value:l}}}return r("FBLogger")("messenger_web").warn("Failed to handle message %s from fbsbx: cannot process event message in the correct format",a),null}var p=function(t){var e=m(t.data);if(e!=null){var n=e.url,o=e.value,a=u.get(n);if(a==null){r("FBLogger")("messenger_web").warn("Failed to handle message from fbsbx: cannot find the resolvable promise for the url");return}a.resolve(o)}};function _(){var e,t,n=(e=window.frames["maw-intermediate-iframe"])!=null?e:null,o=f(s());if(n!=null){var a;return(a=c)==null||a.beginListening(),c}if(o==null){r("FBLogger")("messenger_web").warn("Failed to create maw-intermediate-iframe iFrame: cannot find the fbsbxUri");return}var i=document.createElement("iframe");return i.style.display="none",i.className="MAWOembedIframe",i.id="maw-intermediate-iframe",i.src=o,(t=document.body)==null||t.appendChild(i),c=new(r("SecureMessageListener"))(window).setEventHandler(p).setSupportedOrigins(["fbsbx.com"]),c.beginListening(),c}function f(e){var t,n;return(t=r("XFBSbxMAWProxyPageControllerRouteBuilder").buildUri({__cci:(n=r("CookieConsentIFrameConfig").consent_param)!=null?n:""}).setProtocol("https"))==null||(t=t.setDomain(e))==null?void 0:t.toString()}l.requestUrl=d,l.createMAWOembedIframeContainer=_}),98);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","mixin"],(function(t,n,r,o,a,i,l){var e="scraperLastPermissiveMatch",s=(function(t){function n(e,n){var r;return r=t.call(this)||this,r.input=e,r.enable(),r.getValueFn=n,r}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.reset=function(){o("DataStore").set(this.input,e,null)},a.enable=function(){if(!this.events){var e=function(t){window.setTimeout(this.check.bind(this,t),30)};this.events=r("Event").listen(this.input,{paste:e.bind(this,!1),keydown:e.bind(this,!0)})}},a.disable=function(){if(this.events){for(var e in this.events)this.events[e].remove();this.events=null}},a.check=function(r){var t=this.getValueFn?this.getValueFn():this.input.value;if(!(r&&n.trigger(t))){var a=n.match(t),i=o("URLMatcher").permissiveMatch(t);i&&i!=o("DataStore").get(this.input,e)&&(o("DataStore").set(this.input,e,i),this.inform("match",{url:a||i,alt_url:i}))}},n})(r("mixin")(r("ArbiterMixin")));Object.assign(s,o("URLMatcher")),l.default=s}),98);
__d("getURLRanges",["URI","URLScraper","UnicodeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){for(var n=[],a=0;;){var i=(s||(s=o("UnicodeUtils"))).substr(t,a),l=r("URLScraper").match(i);if(!l||!(e||(e=r("URI"))).isValidURI(l))break;var u=l;/^[a-z][a-z0-9\-+.]+:\/\//i.test(l)||(u="http://"+l);var c=i.indexOf(l),d=s.strlen(i.substr(0,c));a+=d;var m=l.length;n.push({offset:a,length:l.length,entity:{url:u}}),a+=m}return n}l.default=u}),98);
__d("MAWFindFirstUrl",["getURLRanges"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("getURLRanges")(e);return t.length===0?[]:t}l.findFirstUrl=e}),98);
__d("MAWOfflineQueueState-resolver",["MAWOfflineQueueState"],(function(t,n,r,o,a,i,l){"use strict";function e(){return{read:function(){return o("MAWOfflineQueueState").offlineQueueState.getSnapshot()},subscribe:function(t){return o("MAWOfflineQueueState").offlineQueueState.subscribe(t)}}}l.offlineQueueStats=e}),98);
__d("MDSColumnContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("MDSColumnItemContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isFirst:!1,isLast:!1});l.default=u}),98);
__d("isIE11OrGreater",["UserAgent"],(function(t,n,r,o,a,i,l){"use strict";var e=r("UserAgent").isBrowser("IE >= 11"),s=e;l.default=s}),98);
__d("MDSColumnItem.react",["BaseView.react","CometErrorBoundary.react","CometPlaceholder.react","MDSColumnContext","MDSColumnItemContext","isIE11OrGreater","react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["align","children","expanding","fallback","paddingHorizontal","paddingTop","paddingVertical","placeholder","verticalAlign"],u=["fallback"],c=["placeholder"],d,m,p=m||(m=o("react")),_=m.useContext,f={divider:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",$$css:!0},expandingIE11:{flexBasis:"xdl72j9",$$css:!0},firstChildDisplay:{display:"x1s85apg",$$css:!0},firstChildMargin:{marginTop:"xdj266r",$$css:!0},lastChildMargin:{marginBottom:"xat24cr",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0}},g={center:{alignItems:"x6s0dn4",$$css:!0},end:{alignItems:"xuk3077",$$css:!0},start:{alignItems:"x1cy8zhl",$$css:!0}},h={4:{paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,$$css:!0},8:{paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,$$css:!0},12:{paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},16:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},20:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0}},y={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0},24:{paddingTop:"x1p5oq8j",$$css:!0},40:{paddingTop:"x13zrc24",$$css:!0}},C={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0},24:{paddingTop:"x1p5oq8j",paddingBottom:"xwxc41k",$$css:!0},40:{paddingTop:"x13zrc24",paddingBottom:"x1t1ogtf",$$css:!0}},b={4:{marginTop:"xr9ek0c",marginBottom:"xjpr12u",$$css:!0},8:{marginTop:"x1gslohp",marginBottom:"x12nagc",$$css:!0},12:{marginTop:"x1k70j0n",marginBottom:"xzueoph",$$css:!0},16:{marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",$$css:!0},20:{marginTop:"x1anpbxc",marginBottom:"xyorhqc",$$css:!0},24:{marginTop:"x14vqqas",marginBottom:"xod5an3",$$css:!0},32:{marginTop:"xw7yly9",marginBottom:"x1yztbdb",$$css:!0},40:{marginTop:"x1sy10c2",marginBottom:"xieb3on",$$css:!0}},v={bottom:{justifyContent:"x13a6bvl",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},"space-between":{justifyContent:"x1qughib",$$css:!0}},S={4:{marginInlineStart:"xdwrcjd",marginInlineEnd:"x2fvf9",marginLeft:null,marginRight:null,$$css:!0},8:{marginInlineStart:"x13fj5qh",marginInlineEnd:"x1xegmmw",marginLeft:null,marginRight:null,$$css:!0},12:{marginInlineStart:"x1diwwjn",marginInlineEnd:"xbmvrgn",marginLeft:null,marginRight:null,$$css:!0},16:{marginInlineStart:"xyqm7xq",marginInlineEnd:"x1ys307a",marginLeft:null,marginRight:null,$$css:!0},20:{marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,$$css:!0}};function R(t){var n,o,a,l,m=t.ref,L=babelHelpers.objectWithoutPropertiesLoose(t,e),E=(n=_(r("MDSColumnContext")))!=null?n:{},k=L.align,I=k===void 0?(o=E.align)!=null?o:"stretch":k,T=L.children,D=L.expanding,x=D===void 0?!1:D,$=L.fallback,P=L.paddingHorizontal,N=P===void 0?(a=E.paddingHorizontal)!=null?a:0:P,M=L.paddingTop,w=L.paddingVertical,A=w===void 0?0:w,F=L.placeholder,O=L.verticalAlign,B=O===void 0?"top":O,W=babelHelpers.objectWithoutPropertiesLoose(L,s),q=_(r("MDSColumnItemContext")),U=q.isFirst,V=q.isLast,H=(d||(d=r("stylex"))).compose(L.xstyle),G=p.jsxs(p.Fragment,{children:[E.hasDividers===!0&&p.jsx(r("BaseView.react"),{role:"separator",xstyle:[f.divider,S[(l=E.paddingHorizontal)!=null?l:0],U&&f.firstChildDisplay]}),p.jsx(r("BaseView.react"),babelHelpers.extends({},W,{ref:m,xstyle:[f.root,x&&[f.expanding,r("isIE11OrGreater")&&f.expandingIE11],I!=="stretch"&&g[I],B!=="top"&&v[B],h[N],C[A],M!=null&&y[M],E.spacing!=null&&[b[E.spacing],H.marginTop==null&&U&&f.firstChildMargin,H.marginBottom==null&&V&&f.lastChildMargin],L.xstyle],children:p.jsx(r("MDSColumnContext").Provider,{value:null,children:T})}))]});if($!==void 0){var z=L.fallback,j=babelHelpers.objectWithoutPropertiesLoose(L,u);$===null?G=p.jsx(r("CometErrorBoundary.react"),{children:G}):G=p.jsx(r("CometErrorBoundary.react"),{fallback:function(t,n){return p.jsx(R,babelHelpers.extends({},j,{ref:m,children:typeof $=="function"?$(t,n):$}))},children:G})}if(F!==void 0){var K=L.placeholder,Q=babelHelpers.objectWithoutPropertiesLoose(L,c);G=p.jsx(r("CometPlaceholder.react"),{fallback:F!=null?p.jsx(R,babelHelpers.extends({},Q,{ref:m,children:F})):null,name:i.id,children:G})}return G}R.displayName=R.name+" [from "+i.id+"]";var L=R;l.default=L}),98);
__d("MDSRowContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("MDSRowItem.react",["BaseRowItem.react","CometErrorBoundary.react","CometPlaceholder.react","MDSRowContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["fallback","placeholder"],u=["children","placeholder"],c=["fallback"],d,m=d||(d=o("react")),p=d.useContext,_={4:{paddingInlineEnd:"x14vy60q",paddingInlineStart:"xyiysdx",$$css:!0},8:{paddingInlineEnd:"x11lfxj5",paddingInlineStart:"x135b78x",$$css:!0},12:{paddingInlineEnd:"x1icxu4v",paddingInlineStart:"x25sj25",$$css:!0},16:{paddingInlineEnd:"xf159sx",paddingInlineStart:"xmzvs34",$$css:!0},24:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},32:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0}},f={4:{paddingBottom:"x1120s5i",paddingTop:"x1nn3v0j",$$css:!0},8:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},12:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},16:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},24:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",$$css:!0},32:{paddingBottom:"x1l90r2v",paddingTop:"xyamay9",$$css:!0}};function g(t){var n,a=o("react-compiler-runtime").c(43),l,d;a[0]!==t?(d=t.ref,l=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=l,a[2]=d):(l=a[1],d=a[2]);var h=(n=p(r("MDSRowContext")))!=null?n:{},y=h.spacingHorizontal,C=h.spacingVertical,b,v,S;if(a[3]!==l){var R=l;b=R.fallback,S=R.placeholder,v=babelHelpers.objectWithoutPropertiesLoose(R,s),a[3]=l,a[4]=b,a[5]=v,a[6]=S}else b=a[4],v=a[5],S=a[6];if(S!==void 0){var L,E;if(a[7]!==l){var k=l,I=k.children,T=k.placeholder,D=babelHelpers.objectWithoutPropertiesLoose(k,u);L=I,E=D,a[7]=l,a[8]=L,a[9]=E}else L=a[8],E=a[9];var x=S!=null?S:null,$;a[10]!==L||a[11]!==x?($=m.jsx(r("CometPlaceholder.react"),{fallback:x,name:i.id,children:L}),a[10]=L,a[11]=x,a[12]=$):$=a[12];var P;return a[13]!==E||a[14]!==d||a[15]!==$?(P=m.jsx(g,babelHelpers.extends({},E,{ref:d,role:"status",children:$})),a[13]=E,a[14]=d,a[15]=$,a[16]=P):P=a[16],P}if(b!==void 0){var N;if(a[17]!==l){var M=l,w=M.fallback,A=babelHelpers.objectWithoutPropertiesLoose(M,c);N=A,a[17]=l,a[18]=N}else N=a[18];if(b===null){var F;return a[19]!==N||a[20]!==d?(F=m.jsx(r("CometErrorBoundary.react"),{children:m.jsx(g,babelHelpers.extends({},N,{ref:d}))}),a[19]=N,a[20]=d,a[21]=F):F=a[21],F}var O;a[22]!==b||a[23]!==N||a[24]!==d?(O=function(t,n){return m.jsx(g,babelHelpers.extends({},N,{ref:d,children:typeof b=="function"?b(t,n):b}))},a[22]=b,a[23]=N,a[24]=d,a[25]=O):O=a[25];var B;a[26]!==N||a[27]!==d?(B=m.jsx(g,babelHelpers.extends({},N,{ref:d})),a[26]=N,a[27]=d,a[28]=B):B=a[28];var W;return a[29]!==O||a[30]!==B?(W=m.jsx(r("CometErrorBoundary.react"),{fallback:O,children:B}),a[29]=O,a[30]=B,a[31]=W):W=a[31],W}var q=_[y],U=f[C],V;a[32]!==v.xstyle||a[33]!==q||a[34]!==U?(V=[q,U,v.xstyle],a[32]=v.xstyle,a[33]=q,a[34]=U,a[35]=V):V=a[35];var H;a[36]!==v.children?(H=m.jsx(r("MDSRowContext").Provider,{value:null,children:v.children}),a[36]=v.children,a[37]=H):H=a[37];var G;return a[38]!==v||a[39]!==d||a[40]!==V||a[41]!==H?(G=m.jsx(r("BaseRowItem.react"),babelHelpers.extends({},v,{ref:d,useDeprecatedStyles:v.useDeprecatedStyles,xstyle:V,children:H})),a[38]=v,a[39]=d,a[40]=V,a[41]=H,a[42]=G):G=a[42],G}var h=g;l.default=h}),98);
__d("MDSRow.react",["BaseRow.react","MDSColumnContext","MDSColumnItem.react","MDSRowContext","MDSRowItem.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["children","paddingHorizontal","paddingVertical","paddingTop","spacing","spacingHorizontal","spacingVertical","xstyle"],u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useMemo,_={0:{$$css:!0},4:{paddingInlineEnd:"x11lfxj5",paddingInlineStart:"x135b78x",$$css:!0},8:{paddingInlineEnd:"xf159sx",paddingInlineStart:"xmzvs34",$$css:!0},10:{paddingInlineEnd:"x2vl965",paddingInlineStart:"xe2zdcy",$$css:!0},12:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},16:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0}},f={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},10:{paddingTop:"x889kno",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}},g={0:{$$css:!0},4:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},8:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},10:{paddingBottom:"x1a8lsjc",paddingTop:"x889kno",$$css:!0},12:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",$$css:!0},16:{paddingBottom:"x1l90r2v",paddingTop:"xyamay9",$$css:!0},20:{paddingBottom:"xx6bls6",paddingTop:"x1cnzs8",$$css:!0}},h={0:{$$css:!0},4:{marginInlineEnd:"x11lt19s",marginInlineStart:"xe9ewy2",$$css:!0},8:{marginInlineEnd:"x1lxpwgx",marginInlineStart:"x165d6jo",$$css:!0},10:{marginInlineEnd:"xv9t0rm",marginInlineStart:"x137kccz",$$css:!0},12:{marginInlineEnd:"x1ws5yxj",marginInlineStart:"xw01apr",$$css:!0},16:{marginInlineEnd:"x1w5wx5t",marginInlineStart:"x1qfufaz",$$css:!0},24:{marginInlineEnd:"xbcz3fp",marginInlineStart:"x18xomjl",$$css:!0},32:{marginInlineEnd:"xd9ej83",marginInlineStart:"x162z183",$$css:!0}},y={0:{$$css:!0},4:{marginBottom:"xmgb6t1",marginTop:"x1kgmq87",$$css:!0},8:{marginBottom:"x4vbgl9",marginTop:"x1rdy4ex",$$css:!0},10:{marginBottom:"xz62fqu",marginTop:"x16ldp7u",$$css:!0},12:{marginBottom:"x4cne27",marginTop:"xifccgj",$$css:!0},16:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0},24:{marginBottom:"xh3wvx0",marginTop:"x7wgvq7",$$css:!0},32:{marginBottom:"x1oo3vh0",marginTop:"xwya9rg",$$css:!0}};function C(t){var n,o=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=m(r("MDSColumnContext")),l=m(r("MDSRowContext")),u=(i==null?void 0:i.paddingHorizontal)!=null?0:12,d=(i==null?void 0:i.spacing)!=null?0:16,C=a.children,b=a.paddingHorizontal,v=b===void 0?u:b,S=a.paddingVertical,R=S===void 0?0:S,L=a.paddingTop,E=L===void 0?(n=a.paddingVertical)!=null?n:d:L,k=a.spacing,I=k===void 0?12:k,T=a.spacingHorizontal,D=T===void 0?I:T,x=a.spacingVertical,$=x===void 0?I:x,P=a.xstyle,N=babelHelpers.objectWithoutPropertiesLoose(a,s),M=p(function(){return{spacingHorizontal:D,spacingVertical:$}},[D,$]),w=c.jsx(r("BaseRow.react"),babelHelpers.extends({},N,{ref:o,xstyle:[_[v],g[R],E!=null&&f[E],h[D],y[$],P],children:c.jsx(r("MDSRowContext").Provider,{value:M,children:C})}));return l!=null?c.jsx(r("MDSRowItem.react"),{expanding:N.expanding,children:w}):i!=null?c.jsx(r("MDSColumnItem.react"),{expanding:N.expanding,children:w}):w}C.displayName=C.name+" [from "+i.id+"]";var b=C;l.default=b}),98);
__d("MWChatFocusComposerContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=u.useRef,_=c({focusComposer:void 0,setFocusComposer:function(){}});function f(e){var t=e.children,n=p(),r=n.current,o=m(function(){return{focusComposer:r,setFocusComposer:function(t){n.current=t}}},[r]);return s.jsx(_.Provider,{value:o,children:t})}f.displayName=f.name+" [from "+i.id+"]";function g(){return d(_)}l.MWChatFocusComposerContextProvider=f,l.useMWChatFocusComposer=g}),98);
__d("MWChatHeaderActionButton.react",["MWXCircleButton.react","MWXTooltip.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["aria-label","loggingEvent","ref","size","tooltipLabel","tooltipPosition","color","onPress"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(25),a,i,l,s,c,d,m,p,_;n[0]!==t?(a=t["aria-label"],l=t.loggingEvent,c=t.ref,m=t.size,p=t.tooltipLabel,_=t.tooltipPosition,i=t.color,s=t.onPress,d=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9]);var f=r("MessengerWebUXLogger").useLogOnPressInteraction(),g;n[10]!==f||n[11]!==l||n[12]!==s?(g=f(s,l),n[10]=f,n[11]=l,n[12]=s,n[13]=g):g=n[13];var h=g,y=p!=null?p:a,C=m!=null?m:28,b;n[14]!==i||n[15]!==h||n[16]!==c||n[17]!==d||n[18]!==y||n[19]!==C?(b=u.jsx(r("MWXCircleButton.react"),babelHelpers.extends({"aria-label":y,color:i,onPress:h,ref:c,size:C,type:"deemphasized"},d)),n[14]=i,n[15]=h,n[16]=c,n[17]=d,n[18]=y,n[19]=C,n[20]=b):b=n[20];var v=b;if(p==null)return v;var S=_!=null?_:"above",R;return n[21]!==v||n[22]!==S||n[23]!==p?(R=u.jsx(r("MWXTooltip.react"),{align:"middle",position:S,tooltip:p,children:v}),n[21]=v,n[22]=S,n[23]=p,n[24]=R):R=n[24],R}l.default=c}),98);
__d("MWChatTabFocusHandler",["CometHideLayerOnEscape.react","FocusWithinHandler.react","MWChatFocusComposerContext","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useRef,p={root:{height:"x5yr21d",":focus_outline":"x1uvtmcs",$$css:!0}};function _(){try{var e;return((e=document.activeElement)==null?void 0:e.getAttribute("data-release-focus-from"))==="CLICK"}catch(e){return!1}}function f(t){var n=o("react-compiler-runtime").c(25),a=t.children,i=t.disableAutoFocus,l=t.onBlur,s=t.onEscape,c=t.onFocus,d=t.xstyle,f=m(null),g=o("MWChatFocusComposerContext").useMWChatFocusComposer(),h;if(n[0]!==i||n[1]!==g){var y=g.focusComposer;h=y,i===!0&&(h=void 0),n[0]=i,n[1]=g,n[2]=h}else h=n[2];var C;n[3]!==h?(C=function(){if(f.current!=null&&h!=null&&window.getSelection().toString()===""&&(f.current===document.activeElement||_()))return h()},n[3]=h,n[4]=C):C=n[4];var b=C,v;n[5]!==l?(v=function(){return l==null?void 0:l()},n[5]=l,n[6]=v):v=n[6];var S;n[7]!==h||n[8]!==c?(S=function(t){t.target instanceof HTMLElement&&t.target.getAttribute("data-prevent_chattab_focus")==null&&(c==null||c()),f.current!=null&&h!=null&&f.current===t.target&&h()},n[7]=h,n[8]=c,n[9]=S):S=n[9];var R;n[10]!==s?(R=function(){return s==null?void 0:s()},n[10]=s,n[11]=R):R=n[11];var L;n[12]!==d?(L=(e||(e=r("stylex"))).props(p.root,d),n[12]=d,n[13]=L):L=n[13];var E;n[14]!==a||n[15]!==b||n[16]!==L?(E=u.jsx("div",babelHelpers.extends({},L,{onClick:b,ref:f,role:"none",tabIndex:-1,children:a})),n[14]=a,n[15]=b,n[16]=L,n[17]=E):E=n[17];var k;n[18]!==R||n[19]!==E?(k=u.jsx(r("CometHideLayerOnEscape.react"),{onHide:R,children:E}),n[18]=R,n[19]=E,n[20]=k):k=n[20];var I;return n[21]!==v||n[22]!==S||n[23]!==k?(I=u.jsx(r("FocusWithinHandler.react"),{onBlurWithin:v,onFocusWithin:S,children:k}),n[21]=v,n[22]=S,n[23]=k,n[24]=I):I=n[24],I}l.default=f}),98);
__d("MWPComposerDraftMessages",["FBLogger","I64","LSMessagingThreadTypeUtil","MAWFindFirstUrl","MWHasLinksUtil","cr:5710","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map,u=void 0;function c(){return Array.from(s.values()).some(function(e){return e.messageText.trim()!==""})}function d(e,t){return s.get(y(e,t))}function m(){n("cr:5710")==null||u!=null||(u=n("cr:5710").onBeforeUnload(function(){if(c())return"You have pending messages. Please wait for them to be sent before closing the window."}))}function p(e){var t=e.deleteLinkPreviewXMATableData,n=e.fetchAndWriteLinkPreviewXMA,a=e.message,i=e.subthreadParentMessageId,l=e.threadKey,c=e.threadType;if(a==null){if(s.delete(y(l,i)),s.size===0){var d;(d=u)==null||d.remove(),u=void 0}return}if(s.has(y(l,i)))_(l,a,i);else{var p=r("uuidv4")();s.set(y(l,i),{id:p,linkPreviewAbortToken:null,linkPreviewURL:null,messageText:a})}var g=c!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(c);g&&f(l,a,n,t,i),m()}function _(e,t,n){var o=d(e,n);if(o==null){r("FBLogger")("messenger_web").mustfix("currentDraft was null in updateDraftMessageText");return}s.set(y(e,n),babelHelpers.extends({},o,{messageText:t}))}function f(e,t,n,a,i){var l,s,u,c=d(e,i);if(c==null){r("FBLogger")("messenger_web_sharing").mustfix("currentDraft was null in updateDraftMessageURL");return}var m=c==null?void 0:c.linkPreviewURL,p=c==null?void 0:c.linkPreviewAbortToken,_=(l=o("MAWFindFirstUrl").findFirstUrl(t))!=null?l:[],f=o("MWHasLinksUtil").getHasLinks(t),y=f&&(s=(u=_[0])==null?void 0:u.entity.url)!=null?s:null;if(m!==y){if(y==null){a&&a({draftId:c.id}),p==null||p.abort(),g({linkPreviewURL:null,subthreadParentMessageId:i,threadKey:e}),h({linkPreviewAbortToken:null,subthreadParentMessageId:i,threadKey:e});return}g({linkPreviewURL:y,subthreadParentMessageId:i,threadKey:e});var C=n&&n({draftId:c.id,urls:_})||null;h({linkPreviewAbortToken:C,subthreadParentMessageId:i,threadKey:e})}}function g(e){var t=e.linkPreviewURL,n=e.subthreadParentMessageId,o=e.threadKey,a=d(o,n);if(a==null){r("FBLogger")("messenger_web").mustfix("currentDraft was null in setDraftMessageURL");return}s.set(y(o,n),babelHelpers.extends({},a,{linkPreviewURL:t}))}function h(e){var t=e.linkPreviewAbortToken,n=e.subthreadParentMessageId,o=e.threadKey,a=d(o,n);if(a==null){r("FBLogger")("messenger_web").mustfix("currentDraft was null in setDraftMessageURL");return}s.set(y(o,n),babelHelpers.extends({},a,{linkPreviewAbortToken:t}))}function y(t,n){return n!=null&&n!==""?n:(e||(e=o("I64"))).to_string(t)}l.getDraftMessage=d,l.updateDraftMessage=p,l.getNonEmptyDraftMessageKey=y}),98);
__d("MWDraftMessages.react",["MWPComposerDraftMessages","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useCallback,m=u.useContext,p=u.useState,_=c(),f=c();function g(e){var t=o("react-compiler-runtime").c(9),n=e.children,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,t[0]=r):r=t[0];var a=p(r),i=a[0],l=a[1],u;t[1]!==i?(u=function(t,n){var e=o("MWPComposerDraftMessages").getNonEmptyDraftMessageKey(t,n);return i.has(e)?i.get(e):null},t[1]=i,t[2]=u):u=t[2];var c=u,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=function(t,n,r){var e=o("MWPComposerDraftMessages").getNonEmptyDraftMessageKey(t,r);l(function(t){var r=new Map(t);return n==null||n===""?r.delete(e):r.set(e,n),r})},t[3]=d):d=t[3];var m=d,g=_.Provider,h=f.Provider,y;t[4]!==n?(y=s.jsx(h,{value:m,children:n}),t[4]=n,t[5]=y):y=t[5];var C;return t[6]!==c||t[7]!==y?(C=s.jsx(g,{value:c,children:y}),t[6]=c,t[7]=y,t[8]=C):C=t[8],C}function h(){return m(_)}function y(){return m(f)}l.MWDraftProvider=g,l.useMWGetDraft=h,l.useMWUpdateDraft=y}),98);
__d("useMAWEditMessageData",["MAWEditMessageContext.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("MAWEditMessageContext.react").Context),t=e.editMessageData;return t}l.default=u}),98);
__d("MWEditMessageOverlay.react",["react","react-compiler-runtime","useMAWEditMessageData"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(1),n=e.messageId,a=r("useMAWEditMessageData")(),i=a!=null,l=n!=null&&n===(a==null?void 0:a.messageId);if(!i||l)return null;var u;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx("div",{className:"xyl4keb x5yr21d x1o0tod x1ks1olk x10l6tqk x13vifvy xh8yej3 x1vjfegm"}),t[0]=u):u=t[0],u}l.default=u}),98);
__d("MWFDSCheckmarkCircle.svg.react",["cr:21597"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21597")}),98);
__d("MWInboxFollowUps",["$InternalEnum","DateConsts","I64","LSMessagingThreadTypeUtil","MAWCurrentUser","MWPIsThreadUnread","ReQL","ReStoreTabNotifier","WebAsyncStorage","promiseDone","react","react-compiler-runtime","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useState,m=15,p="inbox_follow_ups_"+o("MAWCurrentUser").getID(),_=(s||(s=o("I64"))).of_string(o("MAWCurrentUser").getID()),f="cached_reminders",g=[],h=null,y=function(){g=[],h=null},C=r("ReStoreTabNotifier")("tabs_"+p),b=function(t){if(t==null)g=[],h=null;else{var e,n;h=t,g=(e=t==null||(n=t._priv)==null?void 0:n[f])!=null?e:[]}},v=function(t){r("promiseDone")(S({action:1,metadata:{lastAccessedThread:(s||(s=o("I64"))).of_float(Date.now())},threadKey:t}))},S=function(t){return new Promise(function(e,n){return r("WebAsyncStorage").upsertAndSaveAtomic(p,function(e){if(t.action===1){var n=(s||(s=o("I64"))).to_string(t.threadKey),r=babelHelpers.extends({},e,{_priv:babelHelpers.extends({},e==null?void 0:e._priv)});return r[n]=t.metadata,r}else if(t.action===2){var a;return babelHelpers.extends({},e,{_priv:(a={},a[f]=t.threadKeys,a)})}},function(t,r){if(t!=null)return n(t);C.postMessage("invalidateReminderMetadata"),b(r),e()})})},R=function(){return new Promise(function(e,t){if(h!=null)return e(h);r("WebAsyncStorage").getItem(p,function(n,r){if(n!=null)return t(n);b(r),e(r)})})},L=n("$InternalEnum").Mirrored(["None","Sender","Receiver"]),E=function(t,n){if(!o("LSMessagingThreadTypeUtil").isOneToOne(n.threadType)||o("MWPIsThreadUnread").isThreadUnread(n))return Promise.resolve(L.None);var e=n.snippetSenderContactId;return e==null||n.lastMessageCtaType!=="messenger_reply_reminder"?Promise.resolve(L.None):o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.participants,["contactId"]).getKeyRange(n.threadKey)).then(function(t){if(t.length===1&&(s||(s=o("I64"))).equal(t[0].contactId,_))return L.None;var r=Date.now()-(s||(s=o("I64"))).to_float(n.lastActivityTimestampMs);if(r>=o("DateConsts").MS_PER_DAY*7)return L.None;if((s||(s=o("I64"))).equal(e,_)){if(r>=o("DateConsts").MS_PER_DAY)return L.Sender}else if(r>=o("DateConsts").MS_PER_HOUR*6)return L.Receiver;return L.None})},k=function(t){return g.find(function(e){return(s||(s=o("I64"))).equal(e,t.threadKey)})!=null},I=function(){r("promiseDone")(R()),C.onEventReceive("invalidateReminderMetadata",function(){b(null),r("promiseDone")(R())})};function T(e){var t=o("react-compiler-runtime").c(9),n=d(g),a=n[0],i=n[1],l;t[0]!==e?(l=async function(n){var t=null,a=null;return R().then(async function(l){for(var u=0;u<n.length&&u<m;u++){var c=n[u],d=c[1],p=await E(e,d);if(p!==L.None){var _=l==null?void 0:l[(s||(s=o("I64"))).to_string(d.threadKey)];if(!(_!=null&&(s||(s=o("I64"))).gt(_.lastAccessedThread,d.lastActivityTimestampMs))){if(p===L.Sender){if(a!=null)continue;a=d.threadKey}else{if(t!=null)continue;t=d.threadKey}if(a!=null&&t!=null)break}}}var f=[t,a].filter(Boolean);g=f,i(f),r("promiseDone")(S({action:2,threadKeys:f}))})},t[0]=e,t[1]=l):l=t[1];var u=l,c;t[2]!==u?(c=function(t){r("promiseDone")(u(t))},t[2]=u,t[3]=c):c=t[3];var p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p={leading:!1,wait:200},t[4]=p):p=t[4];var _=r("useDebouncedComet")(c,p),f;return t[5]!==_||t[6]!==u||t[7]!==a?(f={computeInboxFollowUps:_,computeInboxFollowUpsAsync:u,reminders:a},t[5]=_,t[6]=u,t[7]=a,t[8]=f):f=t[8],f}l.clearCache_FOR_TESTING_ONLY=y,l.touchThreadMetadata=v,l.setMetadata=S,l.getMetadata=R,l.EligibilityCheck=L,l.isFollowUpTagDisplayed=k,l.setupTabsListener=I,l.useInboxFollowUps=T}),98);
__d("useDebouncedState",["clearTimeout","react","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef,d=s.useState,m=100;function p(e,t){var n,o=(n=t==null?void 0:t.debounceMS)!=null?n:m,a=(t==null?void 0:t.doNotDebounce)!==!0,i=d(e),l=i[0],s=i[1],p=u(h,[]),_=u(g,[p,o]),f=c(null);return[l,a?_:s,p];function g(e){p(),f.current=r("setTimeoutAcrossTransitions")(function(){return s(e)},o)}function h(){r("clearTimeout")(f.current),f.current=null}}l.default=p}),98);
__d("MWInboxThreadMessagesSpinner.react",["CometVisualCompletionAttributes","MWXSpinner.react","react","react-compiler-runtime","useDebouncedState","useIsMountedRef","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(15),n=e.delayMs,a=e.vcIgnore,i=r("useIsMountedRef")(),l=!n,u;t[0]!==n||t[1]!==l?(u={debounceMS:n,doNotDebounce:l},t[0]=n,t[1]=l,t[2]=u):u=t[2];var c=r("useDebouncedState")(d,u),m=c[0],p=c[1],_,f;t[3]!==i||t[4]!==p?(f={onHidden:function(){i.current&&p(!1)},onVisible:function(){i.current&&p(!0)}},t[3]=i,t[4]=p,t[5]=f):f=t[5],_=f;var g=_,h=r("useVisibilityObserver")(g),y;t[6]===Symbol.for("react.memo_cache_sentinel")?(y="x6s0dn4 x78zum5 x1t1x2f9 x1iyjqo2 x2lah0s xxk0z11 xl56j7k xsag5q8 xz9dl7a x1eb86dx",t[6]=y):y=t[6];var C;t[7]!==a?(C=a===!0?r("CometVisualCompletionAttributes").IGNORE:{},t[7]=a,t[8]=C):C=t[8];var b;t[9]!==m?(b=s.jsx("div",{role:"cell",children:m?s.jsx(r("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24}):s.jsx("div",{className:"x1eb86dx xxk0z11 xh8yej3"})}),t[9]=m,t[10]=b):b=t[10];var v;return t[11]!==C||t[12]!==b||t[13]!==h?(v=s.jsx("div",babelHelpers.extends({className:y,ref:h,role:"row"},C,{children:b})),t[11]=C,t[12]=b,t[13]=h,t[14]=v):v=t[14],v}function d(){return!0}l.default=c}),98);
__d("MWV2HeaderCloseButton.react",["fbt","MWChatHeaderActionButton.react","MWXIconCross","MWXThreadThemeColor","react","react-compiler-runtime","useSetAttributeRef"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Close chat");function d(e){var t=o("react-compiler-runtime").c(7),n=e.label,a=e.onPress,i=e.testid,l=r("useSetAttributeRef")("data-prevent_chattab_focus","1"),s=n!=null?n:c,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),t[0]=d):d=t[0];var m=n!=null?n:c,p;return t[1]!==a||t[2]!==l||t[3]!==s||t[4]!==m||t[5]!==i?(p=u.jsx(r("MWChatHeaderActionButton.react"),{"aria-label":s,color:d,icon:r("MWXIconCross"),iconRatio:"large",loggingEvent:"close_chat_tab",onPress:a,ref:l,testid:void 0,tooltipLabel:m}),t[1]=a,t[2]=l,t[3]=s,t[4]=m,t[5]=i,t[6]=p):p=t[6],p}l.default=d}),226);
__d("MWV2HeaderContainer.react",["MDSRow.react","MWEditMessageOverlay.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={divider:{boxShadow:"x7m3og9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"xfpmyvw",borderStartEndRadius:"x5a5i1n",borderStartStartRadius:"x1obq294",display:"x78zum5",flexShrink:"x2lah0s",height:"x10w6t97",justifyContent:"x1qughib",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",position:"x1n2onr6",zIndex:"xhtitgo",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(9),a=t.divider,i=t.endContent,l=t.startContent,s=a===void 0?!0:a,d=i===void 0?null:i,m=l===void 0?null:l,p;n[0]!==s?(p=(e||(e=r("stylex"))).props(c.root,s?c.divider:!1),n[0]=s,n[1]=p):p=n[1];var _;n[2]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("MWEditMessageOverlay.react"),{}),n[2]=_):_=n[2];var f;n[3]!==m?(f=u.jsx(r("MDSRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:m}),n[3]=m,n[4]=f):f=n[4];var g;return n[5]!==d||n[6]!==p||n[7]!==f?(g=u.jsxs("div",babelHelpers.extends({},p,{children:[_,f,d]})),n[5]=d,n[6]=p,n[7]=f,n[8]=g):g=n[8],g}l.default=d}),98);
__d("MWV2ComposerHasContentContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=u.useRef,_=c({hasContentRef:void 0});function f(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=p(!1),a,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={hasContentRef:r},t[0]=i):i=t[0],a=i;var l=a,u;return t[1]!==n?(u=s.jsx(_.Provider,{value:l,children:n}),t[1]=n,t[2]=u):u=t[2],u}function g(){return d(_)}l.MWV2ComposerHasContentContextProvider=f,l.useComposerHasContext=g}),98);
__d("useMWV2CloseTab",["fbt","LSContactListConversionAttributionStore","MWChatStateActions","MWChatStateV2.react","MWGetChatTabOpenQPLEventTrace","MWV2ComposerHasContentContext.react","MessengerClickImpressionEventsLoggerUtils","emptyFunction","react","useCometConfirmationDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useCallback;function c(e,t){var n,a=o("MWChatStateV2.react").useDispatch(),i=r("useCometConfirmationDialog")(),l=o("MWV2ComposerHasContentContext.react").useComposerHasContext(),c=l.hasContentRef,d=o("MessengerClickImpressionEventsLoggerUtils").useGetUniqueThreadID(e,(n=t.tabType.threadKeyDescriptor)==null?void 0:n.threadType);return u(function(){var n=function(){e!=null&&r("MWGetChatTabOpenQPLEventTrace")(e,function(e){e.cancelTrace("close_tab",!0)}),d!=null&&o("LSContactListConversionAttributionStore").resetAttribution(d),a(o("MWChatStateActions").closeTab(Date.now(),t.tabId))};if(e!=null&&(c==null?void 0:c.current)===!0)return i({body:s._(/*BTDS*/"Are you sure you want to close this chat window?"),confirm:s._(/*BTDS*/"OK"),title:s._(/*BTDS*/"You haven't sent your message.")},function(){n()},r("emptyFunction"));n()},[d,e,t,a,i,c])}l.default=c}),226);
__d("MWV2ChatTabHeaderLoadingWithGlimmers.react",["MDSGlimmer.react","MWChatStateV2Types","MWV2HeaderCloseButton.react","MWV2HeaderContainer.react","react","react-compiler-runtime","useMWV2CloseTab"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={headerGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",marginInlineStart:"x1hm9lzh",width:"x1vz4e29",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(5),n=e.tab,a=r("useMWV2CloseTab")(n.tabType.type===o("MWChatStateV2Types").MWChatStateActionsType.UpdateTab?n.tabType.threadKeyDescriptor.threadKey:void 0,n),i;t[0]!==a?(i=s.jsx(r("MWV2HeaderCloseButton.react"),{onPress:a}),t[0]=a,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:u.headerGlimmer}),t[2]=l):l=t[2];var c;return t[3]!==i?(c=s.jsx(r("MWV2HeaderContainer.react"),{endContent:i,startContent:l}),t[3]=i,t[4]=c):c=t[4],c}l.default=c}),98);
__d("MWV2IsTabFocusedContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=c(!1);function p(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.isFocused,a;return t[0]!==n||t[1]!==r?(a=s.jsx(m.Provider,{value:r,children:n}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}function _(){return d(m)}l.MWV2IsTabFocusedContextProvider=p,l.useIsTabFocused=_}),98);
__d("useMWPEditMessageExit",["MAWEditMessageContext.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=o("react-compiler-runtime").c(5),t=s(o("MAWEditMessageContext.react").Context),n=t.editMessageData,r=t.setEditMessageData,a;e[0]!==r?(a=function(){r(null)},e[0]=r,e[1]=a):a=e[1];var i=a,l=n!=null,u;return e[2]!==i||e[3]!==l?(u={exitEditMessageMode:i,isEditMessageModeActive:l},e[2]=i,e[3]=l,e[4]=u):u=e[4],u}l.default=u}),98);
__d("MWV2TabContainer",["MWChatFocusComposerContext","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatTabFocusHandler","MWChatTabStyles","react","react-compiler-runtime","stylex","useMWPEditMessageExit","useMWV2CloseTab"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={defaultHeight:{height:"x1rgmuzj",maxHeight:"x85a59c","@media (min-height: 1280px)_height":"xbbk1sx",$$css:!0},tabContainer:{backgroundColor:"xcrg951",borderStartEndRadius:"x5a5i1n",borderStartStartRadius:"x1obq294",display:"x78zum5",flexDirection:"xdt5ytf",fontSize:"x6prxxf",lineHeight:"xvq8zen",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},tabContainerFocused:{boxShadow:"x1eqhsl0",$$css:!0},tabContainerUnfocused:{boxShadow:"x6l8u58",$$css:!0}},d={marginInlineStart:o("MWChatTabStyles").CHAT_TAB_MARGIN_START,width:o("MWChatTabStyles").CHAT_TAB_WIDTH};function m(t){var n=o("react-compiler-runtime").c(24),a=t.ariaBusy,i=t.ariaLabel,l=t.children,s=t.domRef,m=t.style,p=t.tab,_=t.tabIndex,f=t.threadKey,g=o("MWChatStateV2.react").useDispatch(),h=r("useMWV2CloseTab")(f,p),y;n[0]!==p.tabId?(y=function(t){return t.focusedTabId===p.tabId},n[0]=p.tabId,n[1]=y):y=n[1];var C=o("MWChatStateContext").useChatState(y),b=r("useMWPEditMessageExit")(),v=b.exitEditMessageMode,S=b.isEditMessageModeActive,R;n[2]!==g?(R=function(){return g(o("MWChatStateActions").blurTab())},n[2]=g,n[3]=R):R=n[3];var L=S?v:h,E;n[4]!==g||n[5]!==p.tabId?(E=function(){return g(o("MWChatStateActions").focusTab(p.tabId))},n[4]=g,n[5]=p.tabId,n[6]=E):E=n[6];var k=C?c.tabContainerFocused:c.tabContainerUnfocused,I;n[7]!==k?(I=(e||(e=r("stylex")))(c.tabContainer,c.defaultHeight,k),n[7]=k,n[8]=I):I=n[8];var T;n[9]!==m?(T=babelHelpers.extends({},d,m),n[9]=m,n[10]=T):T=n[10];var D;n[11]!==a||n[12]!==i||n[13]!==l||n[14]!==s||n[15]!==I||n[16]!==T||n[17]!==_?(D=u.jsx("div",{"aria-busy":a,"aria-label":i,className:I,"data-testid":void 0,ref:s,style:T,tabIndex:_,children:l}),n[11]=a,n[12]=i,n[13]=l,n[14]=s,n[15]=I,n[16]=T,n[17]=_,n[18]=D):D=n[18];var x;return n[19]!==R||n[20]!==L||n[21]!==E||n[22]!==D?(x=u.jsx(o("MWChatFocusComposerContext").MWChatFocusComposerContextProvider,{children:u.jsx(r("MWChatTabFocusHandler"),{onBlur:R,onEscape:L,onFocus:E,children:D})}),n[19]=R,n[20]=L,n[21]=E,n[22]=D,n[23]=x):x=n[23],x}l.MWV2TabContainer=m}),98);
__d("MWV2ChatTabLoadingWithGlimmers.react",["fbt","MWInboxThreadMessagesSpinner.react","MWV2ChatTabHeaderLoadingWithGlimmers.react","MWV2IsTabFocusedContext.react","MWV2TabContainer","react","react-compiler-runtime","useCometLoadingStateTracker","useMergeRefs"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useRef;function p(e){var t=o("react-compiler-runtime").c(13),n=e.tab,a=r("useCometLoadingStateTracker")(),i=a[1],l=m(null),c=o("MWV2IsTabFocusedContext.react").useIsTabFocused(),p;t[0]!==c?(p=function(){if(c){var e=l.current;e!=null&&e.focus()}},t[0]=c,t[1]=p):p=t[1];var _;t[2]!==c||t[3]!==i?(_=[c,i],t[2]=c,t[3]=i,t[4]=_):_=t[4],d(p,_);var f=r("useMergeRefs")(i,l),g;t[5]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Loading...").toString(),t[5]=g):g=t[5];var h;t[6]!==n?(h=u.jsx(r("MWV2ChatTabHeaderLoadingWithGlimmers.react"),{tab:n}),t[6]=n,t[7]=h):h=t[7];var y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y=u.jsx(r("MWInboxThreadMessagesSpinner.react"),{}),t[8]=y):y=t[8];var C;return t[9]!==f||t[10]!==h||t[11]!==n?(C=u.jsxs(o("MWV2TabContainer").MWV2TabContainer,{ariaBusy:!0,ariaLabel:g,domRef:f,tab:n,tabIndex:0,children:[h,y]}),t[9]=f,t[10]=h,t[11]=n,t[12]=C):C=t[12],C}l.default=p}),226);
__d("MWXDeferredPopoverTrigger.react",["cr:4346","cr:7154","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4);if(n("cr:4346")!=null){var r;return t[0]!==e?(r=s.jsx(n("cr:4346"),babelHelpers.extends({},e)),t[0]=e,t[1]=r):r=t[1],r}if(n("cr:7154")!=null){var a;return t[2]!==e?(a=s.jsx(n("cr:7154"),babelHelpers.extends({},e)),t[2]=e,t[3]=a):a=t[3],a}return null}l.default=u}),98);
__d("MWXIconCheckmarkCircle",["MWXSvgIcon","SVGIcon","cr:22261","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22261")),r("gkx")("23219"));l.default=e}),98);
__d("WAChatState",[],(function(t,n,r,o,a,i){"use strict";var e="typing",l="recording_audio",s="idle",u={TYPING:e,RECORDING_AUDIO:l},c={IDLE:s};i.TYPING=e,i.RECORDING_AUDIO=l,i.IDLE=s,i.ACTIVE_CHAT_STATE_TYPE=u,i.IDLE_CHAT_STATE_TYPE=c}),66);
__d("useMAWOfflineQueueLoadingIndicatorShown",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===void 0?!1:e,n=r("useCometRouterState")(),o=n==null?void 0:n.main.route.tabKey;return o==="messenger"||!t}l.default=e}),98);
__d("useMAWOfflineQueueLoadingIndicatorThreadJid",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWJids","ReQL","WAJids","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useState;function d(t,n){var a=o("react-compiler-runtime").c(7),i=(e||(e=r("useReStore")))(),l=c(null),u=l[0],d=l[1],m;a[0]!==n?(m=n!=null?o("LSMessagingThreadTypeUtil").isGroup(n):!1,a[0]=n,a[1]=m):m=a[1];var p=m,_,f;return a[2]!==i||a[3]!==p||a[4]!==t?(_=function(){t!=null&&r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.mi_act_mapping_table).getKeyRange(t)),function(e){if(e!=null){var t=(s||(s=o("I64"))).to_string(e.jid),n=p===!0?o("WAJids").toGroupJid(t):o("MAWJids").toUserJid(t);d(n)}})},f=[i,d,t,p],a[2]=i,a[3]=p,a[4]=t,a[5]=_,a[6]=f):(_=a[5],f=a[6]),o("Int64Hooks").useEffectInt64(_,f),u}l.default=d}),98);
__d("useMAWOfflineQueueStateQuery.graphql",["MAWOfflineQueueState-resolver"],(function(t,n,r,o,a,i){"use strict";var e={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMAWOfflineQueueStateQuery",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,fragment:null,kind:"RelayLiveResolver",name:"offlineQueueStats",resolverModule:n("MAWOfflineQueueState-resolver").offlineQueueStats,path:"offlineQueueStats"}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMAWOfflineQueueStateQuery",selections:[{kind:"ClientExtension",selections:[{name:"offlineQueueStats",args:null,fragment:null,kind:"RelayResolver",storageKey:null,isOutputType:!0}]}]},params:{cacheID:"84004270b2ffca123b6b78124755ac6f",id:null,metadata:{},name:"useMAWOfflineQueueStateQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("useMAWOfflineQueueState",["CometRelay","MAWOfflineQueueState","gkx","react","react-compiler-runtime","useMAWOfflineQueueStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useSyncExternalStore;function c(){return u(o("MAWOfflineQueueState").offlineQueueState.subscribe,o("MAWOfflineQueueState").offlineQueueState.getSnapshot)}function d(){var t,r=o("react-compiler-runtime").c(2),a,i;r[0]===Symbol.for("react.memo_cache_sentinel")?(a=e!==void 0?e:e=n("useMAWOfflineQueueStateQuery.graphql"),i={},r[0]=a,r[1]=i):(a=r[0],i=r[1]);var l=o("CometRelay").useClientQuery(a,i);return(t=l.offlineQueueStats)!=null?t:o("MAWOfflineQueueState").EMPTY_STATE}var m=r("gkx")("12254")?d:c;l.useMAWOfflineQueueState=m}),98);/*FB_PKG_DELIM*/
__d("d3-axis",["d3-axis-1.0.8"],(function(t,n,r,o,a,i){a.exports=n("d3-axis-1.0.8")()}),null);
/**
 * License: https://www.facebook.com/legal/license/9cisb7Fe7ih/
 */
__d("immutable-3.7.3",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(t,n){typeof e=="object"&&typeof l!="undefined"?l.exports=n():t.Immutable=n()})(this,function(){var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}var n="delete",r=5,o=1<<r,a=o-1,i={},l={value:!1},s={value:!1};function u(e){return e.value=!1,e}function c(e){e&&(e.value=!0)}function d(){}function m(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function p(e){return e.size===void 0&&(e.size=e.__iterate(f)),e.size}function _(e,t){return t>=0?+t:p(e)+ +t}function f(){return!0}function g(e,t,n){return(e===0||n!==void 0&&e<=-n)&&(t===void 0||n!==void 0&&t>=n)}function h(e,t){return C(e,t,0)}function y(e,t){return C(e,t,t)}function C(e,t,n){return e===void 0?n:e<0?Math.max(0,t+e):t===void 0?e:Math.min(t,e)}function b(e){return L(e)?e:j(e)}t(v,b);function v(e){return E(e)?e:K(e)}t(S,b);function S(e){return k(e)?e:Q(e)}t(R,b);function R(e){return L(e)&&!I(e)?e:X(e)}function L(e){return!!(e&&e[D])}function E(e){return!!(e&&e[x])}function k(e){return!!(e&&e[$])}function I(e){return E(e)||k(e)}function T(e){return!!(e&&e[P])}b.isIterable=L,b.isKeyed=E,b.isIndexed=k,b.isAssociative=I,b.isOrdered=T,b.Keyed=v,b.Indexed=S,b.Set=R;var D="@@__IMMUTABLE_ITERABLE__@@",x="@@__IMMUTABLE_KEYED__@@",$="@@__IMMUTABLE_INDEXED__@@",P="@@__IMMUTABLE_ORDERED__@@",N=0,M=1,w=2,A=typeof Symbol=="function"&&Symbol.iterator,F="@@iterator",O=A||F;function B(e){this.next=e}B.prototype.toString=function(){return"[Iterator]"},B.KEYS=N,B.VALUES=M,B.ENTRIES=w,B.prototype.inspect=B.prototype.toSource=function(){return this.toString()},B.prototype[O]=function(){return this};function W(e,t,n,r){var o=e===0?t:e===1?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function q(){return{value:void 0,done:!0}}function U(e){return!!G(e)}function V(e){return e&&typeof e.next=="function"}function H(e){var t=G(e);return t&&t.call(e)}function G(e){var t=e&&(A&&e[A]||e[F]);if(typeof t=="function")return t}function z(e){return e&&typeof e.length=="number"}t(j,b);function j(e){return e==null?oe():L(e)?e.toSeq():le(e)}j.of=function(){return j(arguments)},j.prototype.toSeq=function(){return this},j.prototype.toString=function(){return this.__toString("Seq {","}")},j.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},j.prototype.__iterate=function(e,t){return ue(this,e,t,!0)},j.prototype.__iterator=function(e,t){return ce(this,e,t,!0)},t(K,j);function K(e){return e==null?oe().toKeyedSeq():L(e)?E(e)?e.toSeq():e.fromEntrySeq():ae(e)}K.prototype.toKeyedSeq=function(){return this},t(Q,j);function Q(e){return e==null?oe():L(e)?E(e)?e.entrySeq():e.toIndexedSeq():ie(e)}Q.of=function(){return Q(arguments)},Q.prototype.toIndexedSeq=function(){return this},Q.prototype.toString=function(){return this.__toString("Seq [","]")},Q.prototype.__iterate=function(e,t){return ue(this,e,t,!1)},Q.prototype.__iterator=function(e,t){return ce(this,e,t,!1)},t(X,j);function X(e){return(e==null?oe():L(e)?E(e)?e.entrySeq():e:ie(e)).toSetSeq()}X.of=function(){return X(arguments)},X.prototype.toSetSeq=function(){return this},j.isSeq=ne,j.Keyed=K,j.Set=X,j.Indexed=Q;var Y="@@__IMMUTABLE_SEQ__@@";j.prototype[Y]=!0,t(J,Q);function J(e){this._array=e,this.size=e.length}J.prototype.get=function(e,t){return this.has(e)?this._array[_(this,e)]:t},J.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(e(n[t?r-o:o],o,this)===!1)return o+1;return o},J.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,o=0;return new B(function(){return o>r?q():W(e,o,n[t?r-o++:o++])})},t(Z,K);function Z(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}Z.prototype.get=function(e,t){return t!==void 0&&!this.has(e)?t:this._object[e]},Z.prototype.has=function(e){return this._object.hasOwnProperty(e)},Z.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length-1,a=0;a<=o;a++){var i=r[t?o-a:a];if(e(n[i],i,this)===!1)return a+1}return a},Z.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length-1,a=0;return new B(function(){var i=r[t?o-a:a];return a++>o?q():W(e,i,n[i])})},Z.prototype[P]=!0,t(ee,Q);function ee(e){this._iterable=e,this.size=e.length||e.size}ee.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=H(n),o=0;if(V(r))for(var a;!(a=r.next()).done&&e(a.value,o++,this)!==!1;);return o},ee.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=H(n);if(!V(r))return new B(q);var o=0;return new B(function(){var t=r.next();return t.done?t:W(e,o++,t.value)})},t(te,Q);function te(e){this._iterator=e,this._iteratorCache=[]}te.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,o=0;o<r.length;)if(e(r[o],o++,this)===!1)return o;for(var a;!(a=n.next()).done;){var i=a.value;if(r[o]=i,e(i,o++,this)===!1)break}return o},te.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,o=0;return new B(function(){if(o>=r.length){var t=n.next();if(t.done)return t;r[o]=t.value}return W(e,o,r[o++])})};function ne(e){return!!(e&&e[Y])}var re;function oe(){return re||(re=new J([]))}function ae(e){var t=Array.isArray(e)?new J(e).fromEntrySeq():V(e)?new te(e).fromEntrySeq():U(e)?new ee(e).fromEntrySeq():typeof e=="object"?new Z(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function ie(e){var t=se(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function le(e){var t=se(e)||typeof e=="object"&&new Z(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function se(e){return z(e)?new J(e):V(e)?new te(e):U(e)?new ee(e):void 0}function ue(e,t,n,r){var o=e._cache;if(o){for(var a=o.length-1,i=0;i<=a;i++){var l=o[n?a-i:i];if(t(l[1],r?l[0]:i,e)===!1)return i+1}return i}return e.__iterateUncached(t,n)}function ce(e,t,n,r){var o=e._cache;if(o){var a=o.length-1,i=0;return new B(function(){var e=o[n?a-i:i];return i++>a?q():W(t,r?e[0]:i-1,e[1])})}return e.__iteratorUncached(t,n)}t(de,b);function de(){throw TypeError("Abstract")}t(me,de);function me(){}t(pe,de);function pe(){}t(_e,de);function _e(){}de.Keyed=me,de.Indexed=pe,de.Set=_e;function fe(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if(typeof e.valueOf=="function"&&typeof t.valueOf=="function"){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(typeof e.equals=="function"&&typeof t.equals=="function"&&e.equals(t))}function ge(e,t){return t?he(t,e,"",{"":e}):ye(e)}function he(e,t,n,r){return Array.isArray(t)?e.call(r,n,Q(t).map(function(n,r){return he(e,n,r,t)})):Ce(t)?e.call(r,n,K(t).map(function(n,r){return he(e,n,r,t)})):t}function ye(e){return Array.isArray(e)?Q(e).map(ye).toList():Ce(e)?K(e).map(ye).toMap():e}function Ce(e){return e&&(e.constructor===Object||e.constructor===void 0)}var be=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,n){t=t|0,n=n|0;var e=t&65535,r=n&65535;return e*r+((t>>>16)*r+e*(n>>>16)<<16>>>0)|0};function ve(e){return e>>>1&1073741824|e&3221225471}function Se(e){if(e===!1||e===null||e===void 0||typeof e.valueOf=="function"&&(e=e.valueOf(),e===!1||e===null||e===void 0))return 0;if(e===!0)return 1;var t=typeof e;if(t==="number"){var n=e|0;for(n!==e&&(n^=e*4294967295);e>4294967295;)e/=4294967295,n^=e;return ve(n)}return t==="string"?e.length>Ne?Re(e):Le(e):typeof e.hashCode=="function"?e.hashCode():Ee(e)}function Re(e){var t=Ae[e];return t===void 0&&(t=Le(e),we===Me&&(we=0,Ae={}),we++,Ae[e]=t),t}function Le(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ve(t)}function Ee(e){var t;if(De&&(t=xe.get(e),t!==void 0)||(t=e[Pe],t!==void 0)||!Ie&&(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Pe],t!==void 0||(t=Te(e),t!==void 0)))return t;if(t=++$e,$e&1073741824&&($e=0),De)xe.set(e,t);else{if(ke!==void 0&&ke(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Ie)Object.defineProperty(e,Pe,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable!==void 0&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Pe]=t;else if(e.nodeType!==void 0)e[Pe]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var ke=Object.isExtensible,Ie=(function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}})();function Te(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}var De=typeof WeakMap=="function",xe;De&&(xe=new WeakMap);var $e=0,Pe="__immutablehash__";typeof Symbol=="function"&&(Pe=Symbol(Pe));var Ne=16,Me=255,we=0,Ae={};function Fe(e,t){if(!e)throw new Error(t)}function Oe(e){Fe(e!==1/0,"Cannot perform this action with an infinite size.")}t(Be,K);function Be(e,t){this._iter=e,this._useKeys=t,this.size=e.size}Be.prototype.get=function(e,t){return this._iter.get(e,t)},Be.prototype.has=function(e){return this._iter.has(e)},Be.prototype.valueSeq=function(){return this._iter.valueSeq()},Be.prototype.reverse=function(){var e=this,t=Ge(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Be.prototype.map=function(e,t){var n=this,r=He(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},Be.prototype.__iterate=function(e,t){var n=this,r;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?st(this):0,function(o){return e(o,t?--r:r++,n)}),t)},Be.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(M,t),r=t?st(this):0;return new B(function(){var o=n.next();return o.done?o:W(e,t?--r:r++,o.value,o)})},Be.prototype[P]=!0,t(We,Q);function We(e){this._iter=e,this.size=e.size}We.prototype.includes=function(e){return this._iter.includes(e)},We.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},We.prototype.__iterator=function(e,t){var n=this._iter.__iterator(M,t),r=0;return new B(function(){var t=n.next();return t.done?t:W(e,r++,t.value,t)})},t(qe,X);function qe(e){this._iter=e,this.size=e.size}qe.prototype.has=function(e){return this._iter.includes(e)},qe.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},qe.prototype.__iterator=function(e,t){var n=this._iter.__iterator(M,t);return new B(function(){var t=n.next();return t.done?t:W(e,t.value,t.value,t)})},t(Ue,K);function Ue(e){this._iter=e,this.size=e.size}Ue.prototype.entrySeq=function(){return this._iter.toSeq()},Ue.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){lt(t);var r=L(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},Ue.prototype.__iterator=function(e,t){var n=this._iter.__iterator(M,t);return new B(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){lt(r);var o=L(r);return W(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}})},We.prototype.cacheResult=Be.prototype.cacheResult=qe.prototype.cacheResult=Ue.prototype.cacheResult=dt;function Ve(e){var t=ct(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=dt,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return t(n,e,r)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===w){var r=e.__iterator(t,n);return new B(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===M?N:M,n)},t}function He(e,t,n){var r=ct(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var a=e.get(r,i);return a===i?o:t.call(n,a,r,e)},r.__iterateUncached=function(r,o){var a=this;return e.__iterate(function(e,o,i){return r(t.call(n,e,o,i),o,a)!==!1},o)},r.__iteratorUncached=function(r,o){var a=e.__iterator(w,o);return new B(function(){var o=a.next();if(o.done)return o;var i=o.value,l=i[0];return W(r,l,t.call(n,i[1],l,e),o)})},r}function Ge(e,t){var n=ct(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Ve(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=dt,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function ze(e,t,n,r){var o=ct(e);return r&&(o.has=function(r){var o=e.get(r,i);return o!==i&&!!t.call(n,o,r,e)},o.get=function(r,o){var a=e.get(r,i);return a!==i&&t.call(n,a,r,e)?a:o}),o.__iterateUncached=function(o,a){var i=this,l=0;return e.__iterate(function(e,a,s){if(t.call(n,e,a,s))return l++,o(e,r?a:l-1,i)},a),l},o.__iteratorUncached=function(o,a){var i=e.__iterator(w,a),l=0;return new B(function(){for(;;){var a=i.next();if(a.done)return a;var s=a.value,u=s[0],c=s[1];if(t.call(n,c,u,e))return W(o,r?u:l++,c,a)}})},o}function je(e,t,n){var r=_t().asMutable();return e.__iterate(function(o,a){r.update(t.call(n,o,a,e),0,function(e){return e+1})}),r.asImmutable()}function Ke(e,t,n){var r=E(e),o=(T(e)?dn():_t()).asMutable();e.__iterate(function(a,i){o.update(t.call(n,a,i,e),function(e){return e=e||[],e.push(r?[i,a]:a),e})});var a=ut(e);return o.map(function(t){return it(e,a(t))})}function Qe(e,t,n,r){var o=e.size;if(g(t,n,o))return e;var a=h(t,o),i=y(n,o);if(a!==a||i!==i)return Qe(e.toSeq().cacheResult(),t,n,r);var l=i-a,s;l===l&&(s=l<0?0:l);var u=ct(e);return u.size=s,!r&&ne(e)&&s>=0&&(u.get=function(t,n){return t=_(this,t),t>=0&&t<s?e.get(t+a,n):n}),u.__iterateUncached=function(t,n){var o=this;if(s===0)return 0;if(n)return this.cacheResult().__iterate(t,n);var i=0,l=!0,u=0;return e.__iterate(function(e,n){if(!(l&&(l=i++<a)))return u++,t(e,r?n:u-1,o)!==!1&&u!==s}),u},u.__iteratorUncached=function(t,n){if(s!==0&&n)return this.cacheResult().__iterator(t,n);var o=s!==0&&e.__iterator(t,n),i=0,l=0;return new B(function(){for(;i++<a;)o.next();if(++l>s)return q();var e=o.next();return r||t===M?e:t===N?W(t,l-1,void 0,e):W(t,l-1,e.value[1],e)})},u}function Xe(e,t,n){var r=ct(e);return r.__iterateUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterate(r,o);var i=0;return e.__iterate(function(e,o,l){return t.call(n,e,o,l)&&++i&&r(e,o,a)}),i},r.__iteratorUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(w,o),l=!0;return new B(function(){if(!l)return q();var e=i.next();if(e.done)return e;var o=e.value,s=o[0],u=o[1];return t.call(n,u,s,a)?r===w?e:W(r,s,u,e):(l=!1,q())})},r}function Ye(e,t,n,r){var o=ct(e);return o.__iterateUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterate(o,a);var l=!0,s=0;return e.__iterate(function(e,a,u){if(!(l&&(l=t.call(n,e,a,u))))return s++,o(e,r?a:s-1,i)}),s},o.__iteratorUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterator(o,a);var l=e.__iterator(w,a),s=!0,u=0;return new B(function(){var e,a,c;do{if(e=l.next(),e.done)return r||o===M?e:o===N?W(o,u++,void 0,e):W(o,u++,e.value[1],e);var d=e.value;a=d[0],c=d[1],s&&(s=t.call(n,c,a,i))}while(s);return o===w?e:W(o,a,c,e)})},o}function Je(e,t){var n=E(e),r=[e].concat(t).map(function(e){return L(e)?n&&(e=v(e)):e=n?ae(e):ie(Array.isArray(e)?e:[e]),e}).filter(function(e){return e.size!==0});if(r.length===0)return e;if(r.length===1){var o=r[0];if(o===e||n&&E(o)||k(e)&&k(o))return o}var a=new J(r);return n?a=a.toKeyedSeq():k(e)||(a=a.toSetSeq()),a=a.flatten(!0),a.size=r.reduce(function(e,t){if(e!==void 0){var n=t.size;if(n!==void 0)return e+n}},0),a}function Ze(e,t,n){var r=ct(e);return r.__iterateUncached=function(r,o){var a=0,i=!1;function l(e,s){var u=this;e.__iterate(function(e,o){return(!t||s<t)&&L(e)?l(e,s+1):r(e,n?o:a++,u)===!1&&(i=!0),!i},o)}return l(e,0),a},r.__iteratorUncached=function(r,o){var a=e.__iterator(r,o),i=[],l=0;return new B(function(){for(;a;){var e=a.next();if(e.done!==!1){a=i.pop();continue}var s=e.value;if(r===w&&(s=s[1]),(!t||i.length<t)&&L(s))i.push(a),a=s.__iterator(r,o);else return n?e:W(r,l++,s,e)}return q()})},r}function et(e,t,n){var r=ut(e);return e.toSeq().map(function(o,a){return r(t.call(n,o,a,e))}).flatten(!0)}function tt(e,t){var n=ct(e);return n.size=e.size&&e.size*2-1,n.__iterateUncached=function(n,r){var o=this,a=0;return e.__iterate(function(e,r){return(!a||n(t,a++,o)!==!1)&&n(e,a++,o)!==!1},r),a},n.__iteratorUncached=function(n,r){var o=e.__iterator(M,r),a=0,i;return new B(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?W(n,a++,t):W(n,a++,i.value,i)})},n}function nt(e,t,n){t||(t=mt);var r=E(e),o=0,a=e.toSeq().map(function(t,r){return[r,t,o++,n?n(t,r,e):t]}).toArray();return a.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),r?K(a):k(e)?Q(a):X(a)}function rt(e,t,n){if(t||(t=mt),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return ot(t,e[1],n[1])?n:e});return r&&r[0]}else return e.reduce(function(e,n){return ot(t,e,n)?n:e})}function ot(e,t,n){var r=e(n,t);return r===0&&n!==t&&(n==null||n!==n)||r>0}function at(e,t,n){var r=ct(e);return r.size=new J(n).map(function(e){return e.size}).min(),r.__iterate=function(e,t){for(var n=this.__iterator(M,t),r,o=0;!(r=n.next()).done&&e(r.value,o++,this)!==!1;);return o},r.__iteratorUncached=function(e,r){var o=n.map(function(e){return e=b(e),H(r?e.reverse():e)}),a=0,i=!1;return new B(function(){var n;return i||(n=o.map(function(e){return e.next()}),i=n.some(function(e){return e.done})),i?q():W(e,a++,t.apply(null,n.map(function(e){return e.value})))})},r}function it(e,t){return ne(e)?t:e.constructor(t)}function lt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function st(e){return Oe(e.size),p(e)}function ut(e){return E(e)?v:k(e)?S:R}function ct(e){return Object.create((E(e)?K:k(e)?Q:X).prototype)}function dt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):j.prototype.cacheResult.call(this)}function mt(e,t){return e>t?1:e<t?-1:0}function pt(e){var t=H(e);if(!t){if(!z(e))throw new TypeError("Expected iterable or array-like: "+e);t=H(b(e))}return t}t(_t,me);function _t(e){return e==null?Tt():ft(e)?e:Tt().withMutations(function(t){var n=v(e);Oe(n.size),n.forEach(function(e,n){return t.set(n,e)})})}_t.prototype.toString=function(){return this.__toString("Map {","}")},_t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},_t.prototype.set=function(e,t){return Dt(this,e,t)},_t.prototype.setIn=function(e,t){return this.updateIn(e,i,function(){return t})},_t.prototype.remove=function(e){return Dt(this,e,i)},_t.prototype.deleteIn=function(e){return this.updateIn(e,function(){return i})},_t.prototype.update=function(e,t,n){return arguments.length===1?e(this):this.updateIn([e],t,n)},_t.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=Bt(this,pt(e),t,n);return r===i?void 0:r},_t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Tt()},_t.prototype.merge=function(){return At(this,void 0,arguments)},_t.prototype.mergeWith=function(t){var n=e.call(arguments,1);return At(this,t,n)},_t.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Tt(),function(e){return typeof e.merge=="function"?e.merge.apply(e,n):n[n.length-1]})},_t.prototype.mergeDeep=function(){return At(this,Ft(void 0),arguments)},_t.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return At(this,Ft(t),n)},_t.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Tt(),function(e){return typeof e.mergeDeep=="function"?e.mergeDeep.apply(e,n):n[n.length-1]})},_t.prototype.sort=function(e){return dn(nt(this,e))},_t.prototype.sortBy=function(e,t){return dn(nt(this,t,e))},_t.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},_t.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},_t.prototype.asImmutable=function(){return this.__ensureOwner()},_t.prototype.wasAltered=function(){return this.__altered},_t.prototype.__iterator=function(e,t){return new Rt(this,e,t)},_t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},_t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?kt(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)};function ft(e){return!!(e&&e[gt])}_t.isMap=ft;var gt="@@__IMMUTABLE_MAP__@@",ht=_t.prototype;ht[gt]=!0,ht[n]=ht.remove,ht.removeIn=ht.deleteIn;function yt(e,t){this.ownerID=e,this.entries=t}yt.prototype.get=function(e,t,n,r){for(var o=this.entries,a=0,i=o.length;a<i;a++)if(fe(n,o[a][0]))return o[a][1];return r},yt.prototype.update=function(e,t,n,r,o,a,l){for(var s=o===i,u=this.entries,d=0,p=u.length;d<p&&!fe(r,u[d][0]);d++);var _=d<p;if(_?u[d][1]===o:s)return this;if(c(l),(s||!_)&&c(a),!(s&&u.length===1)){if(!_&&!s&&u.length>=Ht)return Nt(e,u,r,o);var f=e&&e===this.ownerID,g=f?u:m(u);return _?s?d===p-1?g.pop():g[d]=g.pop():g[d]=[r,o]:g.push([r,o]),f?(this.entries=g,this):new yt(e,g)}};function Ct(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}Ct.prototype.get=function(e,t,n,o){t===void 0&&(t=Se(n));var i=1<<((e===0?t:t>>>e)&a),l=this.bitmap;return(l&i)===0?o:this.nodes[Wt(l&i-1)].get(e+r,t,n,o)},Ct.prototype.update=function(e,t,n,o,l,s,u){n===void 0&&(n=Se(o));var c=(t===0?n:n>>>t)&a,d=1<<c,m=this.bitmap,p=(m&d)!==0;if(!p&&l===i)return this;var _=Wt(m&d-1),f=this.nodes,g=p?f[_]:void 0,h=xt(g,e,t+r,n,o,l,s,u);if(h===g)return this;if(!p&&h&&f.length>=Gt)return wt(e,f,m,c,h);if(p&&!h&&f.length===2&&$t(f[_^1]))return f[_^1];if(p&&h&&f.length===1&&$t(h))return h;var y=e&&e===this.ownerID,C=p?h?m:m^d:m|d,b=p?h?qt(f,_,h,y):Vt(f,_,y):Ut(f,_,h,y);return y?(this.bitmap=C,this.nodes=b,this):new Ct(e,C,b)};function bt(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}bt.prototype.get=function(e,t,n,o){t===void 0&&(t=Se(n));var i=(e===0?t:t>>>e)&a,l=this.nodes[i];return l?l.get(e+r,t,n,o):o},bt.prototype.update=function(e,t,n,o,l,s,u){n===void 0&&(n=Se(o));var c=(t===0?n:n>>>t)&a,d=l===i,m=this.nodes,p=m[c];if(d&&!p)return this;var _=xt(p,e,t+r,n,o,l,s,u);if(_===p)return this;var f=this.count;if(!p)f++;else if(!_&&(f--,f<zt))return Mt(e,m,f,c);var g=e&&e===this.ownerID,h=qt(m,c,_,g);return g?(this.count=f,this.nodes=h,this):new bt(e,f,h)};function vt(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}vt.prototype.get=function(e,t,n,r){for(var o=this.entries,a=0,i=o.length;a<i;a++)if(fe(n,o[a][0]))return o[a][1];return r},vt.prototype.update=function(e,t,n,r,o,a,l){n===void 0&&(n=Se(r));var s=o===i;if(n!==this.keyHash)return s?this:(c(l),c(a),Pt(this,e,t,n,[r,o]));for(var u=this.entries,d=0,p=u.length;d<p&&!fe(r,u[d][0]);d++);var _=d<p;if(_?u[d][1]===o:s)return this;if(c(l),(s||!_)&&c(a),s&&p===2)return new St(e,this.keyHash,u[d^1]);var f=e&&e===this.ownerID,g=f?u:m(u);return _?s?d===p-1?g.pop():g[d]=g.pop():g[d]=[r,o]:g.push([r,o]),f?(this.entries=g,this):new vt(e,this.keyHash,g)};function St(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}St.prototype.get=function(e,t,n,r){return fe(n,this.entry[0])?this.entry[1]:r},St.prototype.update=function(e,t,n,r,o,a,l){var s=o===i,u=fe(r,this.entry[0]);if(u?o===this.entry[1]:s)return this;if(c(l),s){c(a);return}return u?e&&e===this.ownerID?(this.entry[1]=o,this):new St(e,this.keyHash,[r,o]):(c(a),Pt(this,e,t,Se(r),[r,o]))},yt.prototype.iterate=vt.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(e(n[t?o-r:r])===!1)return!1},Ct.prototype.iterate=bt.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var a=n[t?o-r:r];if(a&&a.iterate(e,t)===!1)return!1}},St.prototype.iterate=function(e,t){return e(this.entry)},t(Rt,B);function Rt(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Et(e._root)}Rt.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,o;if(n.entry){if(r===0)return Lt(e,n.entry)}else if(n.entries){if(o=n.entries.length-1,r<=o)return Lt(e,n.entries[this._reverse?o-r:r])}else if(o=n.nodes.length-1,r<=o){var a=n.nodes[this._reverse?o-r:r];if(a){if(a.entry)return Lt(e,a.entry);t=this._stack=Et(a,t)}continue}t=this._stack=this._stack.__prev}return q()};function Lt(e,t){return W(e,t[0],t[1])}function Et(e,t){return{node:e,index:0,__prev:t}}function kt(e,t,n,r){var o=Object.create(ht);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}var It;function Tt(){return It||(It=kt(0))}function Dt(e,t,n){var r,o;if(e._root){var a=u(l),c=u(s);if(r=xt(e._root,e.__ownerID,0,void 0,t,n,a,c),!c.value)return e;o=e.size+(a.value?n===i?-1:1:0)}else{if(n===i)return e;o=1,r=new yt(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?kt(o,r):Tt()}function xt(e,t,n,r,o,a,l,s){return e?e.update(t,n,r,o,a,l,s):a===i?e:(c(s),c(l),new St(t,r,[o,a]))}function $t(e){return e.constructor===St||e.constructor===vt}function Pt(e,t,n,o,i){if(e.keyHash===o)return new vt(t,o,[e.entry,i]);var l=(n===0?e.keyHash:e.keyHash>>>n)&a,s=(n===0?o:o>>>n)&a,u,c=l===s?[Pt(e,t,n+r,o,i)]:(u=new St(t,o,i),l<s?[e,u]:[u,e]);return new Ct(t,1<<l|1<<s,c)}function Nt(e,t,n,r){e||(e=new d);for(var o=new St(e,Se(n),[n,r]),a=0;a<t.length;a++){var i=t[a];o=o.update(e,0,void 0,i[0],i[1])}return o}function Mt(e,t,n,r){for(var o=0,a=0,i=new Array(n),l=0,s=1,u=t.length;l<u;l++,s<<=1){var c=t[l];c!==void 0&&l!==r&&(o|=s,i[a++]=c)}return new Ct(e,o,i)}function wt(e,t,n,r,a){for(var i=0,l=new Array(o),s=0;n!==0;s++,n>>>=1)l[s]=n&1?t[i++]:void 0;return l[r]=a,new bt(e,i+1,l)}function At(e,t,n){for(var r=[],o=0;o<n.length;o++){var a=n[o],i=v(a);L(a)||(i=i.map(function(e){return ge(e)})),r.push(i)}return Ot(e,t,r)}function Ft(e){return function(t,n,r){return t&&t.mergeDeepWith&&L(n)?t.mergeDeepWith(e,n):e?e(t,n,r):n}}function Ot(e,t,n){return n=n.filter(function(e){return e.size!==0}),n.length===0?e:e.size===0&&!e.__ownerID&&n.length===1?e.constructor(n[0]):e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,i,function(e){return e===i?n:t(e,n,r)})}:function(t,n){e.set(n,t)},o=0;o<n.length;o++)n[o].forEach(r)})}function Bt(e,t,n,r){var o=e===i,a=t.next();if(a.done){var l=o?n:e,s=r(l);return s===l?e:s}Fe(o||e&&e.set,"invalid keyPath");var u=a.value,c=o?i:e.get(u,i),d=Bt(c,t,n,r);return d===c?e:d===i?e.remove(u):(o?Tt():e).set(u,d)}function Wt(e){return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e=e+(e>>8),e=e+(e>>16),e&127}function qt(e,t,n,r){var o=r?e:m(e);return o[t]=n,o}function Ut(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var a=new Array(o),i=0,l=0;l<o;l++)l===t?(a[l]=n,i=-1):a[l]=e[l+i];return a}function Vt(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),a=0,i=0;i<r;i++)i===t&&(a=1),o[i]=e[i+a];return o}var Ht=o/4,Gt=o/2,zt=o/4;t(jt,pe);function jt(e){var t=nn();if(e==null)return t;if(Kt(e))return e;var n=S(e),a=n.size;return a===0?t:(Oe(a),a>0&&a<o?en(0,a,r,null,new Yt(n.toArray())):t.withMutations(function(e){e.setSize(a),n.forEach(function(t,n){return e.set(n,t)})}))}jt.of=function(){return this(arguments)},jt.prototype.toString=function(){return this.__toString("List [","]")},jt.prototype.get=function(e,t){if(e=_(this,e),e<0||e>=this.size)return t;e+=this._origin;var n=ln(this,e);return n&&n.array[e&a]},jt.prototype.set=function(e,t){return rn(this,e,t)},jt.prototype.remove=function(e){return this.has(e)?e===0?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},jt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=r,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):nn()},jt.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){sn(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},jt.prototype.pop=function(){return sn(this,0,-1)},jt.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){sn(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},jt.prototype.shift=function(){return sn(this,1)},jt.prototype.merge=function(){return un(this,void 0,arguments)},jt.prototype.mergeWith=function(t){var n=e.call(arguments,1);return un(this,t,n)},jt.prototype.mergeDeep=function(){return un(this,Ft(void 0),arguments)},jt.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return un(this,Ft(t),n)},jt.prototype.setSize=function(e){return sn(this,0,e)},jt.prototype.slice=function(e,t){var n=this.size;return g(e,t,n)?this:sn(this,h(e,n),y(t,n))},jt.prototype.__iterator=function(e,t){var n=0,r=Zt(this,t);return new B(function(){var t=r();return t===Jt?q():W(e,n++,t)})},jt.prototype.__iterate=function(e,t){for(var n=0,r=Zt(this,t),o;(o=r())!==Jt&&e(o,n++,this)!==!1;);return n},jt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?en(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)};function Kt(e){return!!(e&&e[Qt])}jt.isList=Kt;var Qt="@@__IMMUTABLE_LIST__@@",Xt=jt.prototype;Xt[Qt]=!0,Xt[n]=Xt.remove,Xt.setIn=ht.setIn,Xt.deleteIn=Xt.removeIn=ht.removeIn,Xt.update=ht.update,Xt.updateIn=ht.updateIn,Xt.mergeIn=ht.mergeIn,Xt.mergeDeepIn=ht.mergeDeepIn,Xt.withMutations=ht.withMutations,Xt.asMutable=ht.asMutable,Xt.asImmutable=ht.asImmutable,Xt.wasAltered=ht.wasAltered;function Yt(e,t){this.array=e,this.ownerID=t}Yt.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:this.array.length===0)return this;var o=n>>>t&a;if(o>=this.array.length)return new Yt([],e);var i=o===0,l;if(t>0){var s=this.array[o];if(l=s&&s.removeBefore(e,t-r,n),l===s&&i)return this}if(i&&!l)return this;var u=an(this,e);if(!i)for(var c=0;c<o;c++)u.array[c]=void 0;return l&&(u.array[o]=l),u},Yt.prototype.removeAfter=function(e,t,n){if(n===t?1<<t:this.array.length===0)return this;var o=n-1>>>t&a;if(o>=this.array.length)return this;var i=o===this.array.length-1,l;if(t>0){var s=this.array[o];if(l=s&&s.removeAfter(e,t-r,n),l===s&&i)return this}if(i&&!l)return this;var u=an(this,e);return i||u.array.pop(),l&&(u.array[o]=l),u};var Jt={};function Zt(e,t){var n=e._origin,a=e._capacity,i=cn(a),l=e._tail;return s(e._root,e._level,0);function s(e,t,n){return t===0?u(e,n):c(e,t,n)}function u(e,r){var s=r===i?l&&l.array:e&&e.array,u=r>n?0:n-r,c=a-r;return c>o&&(c=o),function(){if(u===c)return Jt;var e=t?--c:u++;return s&&s[e]}}function c(e,i,l){var u,c=e&&e.array,d=l>n?0:n-l>>i,m=(a-l>>i)+1;return m>o&&(m=o),function(){do{if(u){var e=u();if(e!==Jt)return e;u=null}if(d===m)return Jt;var n=t?--m:d++;u=s(c&&c[n],i-r,l+(n<<i))}while(!0)}}}function en(e,t,n,r,o,a,i){var l=Object.create(Xt);return l.size=t-e,l._origin=e,l._capacity=t,l._level=n,l._root=r,l._tail=o,l.__ownerID=a,l.__hash=i,l.__altered=!1,l}var tn;function nn(){return tn||(tn=en(0,0,r))}function rn(e,t,n){if(t=_(e,t),t>=e.size||t<0)return e.withMutations(function(e){t<0?sn(e,t).set(0,n):sn(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,o=e._root,a=u(s);return t>=cn(e._capacity)?r=on(r,e.__ownerID,0,t,n,a):o=on(o,e.__ownerID,e._level,t,n,a),a.value?e.__ownerID?(e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e):en(e._origin,e._capacity,e._level,o,r):e}function on(e,t,n,o,i,l){var s=o>>>n&a,u=e&&s<e.array.length;if(!u&&i===void 0)return e;var d;if(n>0){var m=e&&e.array[s],p=on(m,t,n-r,o,i,l);return p===m?e:(d=an(e,t),d.array[s]=p,d)}return u&&e.array[s]===i?e:(c(l),d=an(e,t),i===void 0&&s===d.array.length-1?d.array.pop():d.array[s]=i,d)}function an(e,t){return t&&e&&t===e.ownerID?e:new Yt(e?e.array.slice():[],t)}function ln(e,t){if(t>=cn(e._capacity))return e._tail;if(t<1<<e._level+r){for(var n=e._root,o=e._level;n&&o>0;)n=n.array[t>>>o&a],o-=r;return n}}function sn(e,t,n){var o=e.__ownerID||new d,i=e._origin,l=e._capacity,s=i+t,u=n===void 0?l:n<0?l+n:i+n;if(s===i&&u===l)return e;if(s>=u)return e.clear();for(var c=e._level,m=e._root,p=0;s+p<0;)m=new Yt(m&&m.array.length?[void 0,m]:[],o),c+=r,p+=1<<c;p&&(s+=p,i+=p,u+=p,l+=p);for(var _=cn(l),f=cn(u);f>=1<<c+r;)m=new Yt(m&&m.array.length?[m]:[],o),c+=r;var g=e._tail,h=f<_?ln(e,u-1):f>_?new Yt([],o):g;if(g&&f>_&&s<l&&g.array.length){m=an(m,o);for(var y=m,C=c;C>r;C-=r){var b=_>>>C&a;y=y.array[b]=an(y.array[b],o)}y.array[_>>>r&a]=g}if(u<l&&(h=h&&h.removeAfter(o,0,u)),s>=f)s-=f,u-=f,c=r,m=null,h=h&&h.removeBefore(o,0,s);else if(s>i||f<_){for(p=0;m;){var v=s>>>c&a;if(v!==f>>>c&a)break;v&&(p+=(1<<c)*v),c-=r,m=m.array[v]}m&&s>i&&(m=m.removeBefore(o,c,s-p)),m&&f<_&&(m=m.removeAfter(o,c,f-p)),p&&(s-=p,u-=p)}return e.__ownerID?(e.size=u-s,e._origin=s,e._capacity=u,e._level=c,e._root=m,e._tail=h,e.__hash=void 0,e.__altered=!0,e):en(s,u,c,m,h)}function un(e,t,n){for(var r=[],o=0,a=0;a<n.length;a++){var i=n[a],l=S(i);l.size>o&&(o=l.size),L(i)||(l=l.map(function(e){return ge(e)})),r.push(l)}return o>e.size&&(e=e.setSize(o)),Ot(e,t,r)}function cn(e){return e<o?0:e-1>>>r<<r}t(dn,_t);function dn(e){return e==null?fn():mn(e)?e:fn().withMutations(function(t){var n=v(e);Oe(n.size),n.forEach(function(e,n){return t.set(n,e)})})}dn.of=function(){return this(arguments)},dn.prototype.toString=function(){return this.__toString("OrderedMap {","}")},dn.prototype.get=function(e,t){var n=this._map.get(e);return n!==void 0?this._list.get(n)[1]:t},dn.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):fn()},dn.prototype.set=function(e,t){return gn(this,e,t)},dn.prototype.remove=function(e){return gn(this,e,i)},dn.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},dn.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},dn.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},dn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?pn(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)};function mn(e){return ft(e)&&T(e)}dn.isOrderedMap=mn,dn.prototype[P]=!0,dn.prototype[n]=dn.prototype.remove;function pn(e,t,n,r){var o=Object.create(dn.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o}var _n;function fn(){return _n||(_n=pn(Tt(),nn()))}function gn(e,t,n){var r=e._map,a=e._list,l=r.get(t),s=l!==void 0,u,c;if(n===i){if(!s)return e;a.size>=o&&a.size>=r.size*2?(c=a.filter(function(e,t){return e!==void 0&&l!==t}),u=c.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(u.__ownerID=c.__ownerID=e.__ownerID)):(u=r.remove(t),c=l===a.size-1?a.pop():a.set(l,void 0))}else if(s){if(n===a.get(l)[1])return e;u=r,c=a.set(l,[t,n])}else u=r.set(t,a.size),c=a.set(a.size,[t,n]);return e.__ownerID?(e.size=u.size,e._map=u,e._list=c,e.__hash=void 0,e):pn(u,c)}t(hn,pe);function hn(e){return e==null?Rn():yn(e)?e:Rn().unshiftAll(e)}hn.of=function(){return this(arguments)},hn.prototype.toString=function(){return this.__toString("Stack [","]")},hn.prototype.get=function(e,t){var n=this._head;for(e=_(this,e);n&&e--;)n=n.next;return n?n.value:t},hn.prototype.peek=function(){return this._head&&this._head.value},hn.prototype.push=function(){if(arguments.length===0)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):vn(e,t)},hn.prototype.pushAll=function(e){if(e=S(e),e.size===0)return this;Oe(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):vn(t,n)},hn.prototype.pop=function(){return this.slice(1)},hn.prototype.unshift=function(){return this.push.apply(this,arguments)},hn.prototype.unshiftAll=function(e){return this.pushAll(e)},hn.prototype.shift=function(){return this.pop.apply(this,arguments)},hn.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Rn()},hn.prototype.slice=function(e,t){if(g(e,t,this.size))return this;var n=h(e,this.size),r=y(t,this.size);if(r!==this.size)return pe.prototype.slice.call(this,e,t);for(var o=this.size-n,a=this._head;n--;)a=a.next;return this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):vn(o,a)},hn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?vn(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},hn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&e(r.value,n++,this)!==!1;)r=r.next;return n},hn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new B(function(){if(r){var t=r.value;return r=r.next,W(e,n++,t)}return q()})};function yn(e){return!!(e&&e[Cn])}hn.isStack=yn;var Cn="@@__IMMUTABLE_STACK__@@",bn=hn.prototype;bn[Cn]=!0,bn.withMutations=ht.withMutations,bn.asMutable=ht.asMutable,bn.asImmutable=ht.asImmutable,bn.wasAltered=ht.wasAltered;function vn(e,t,n,r){var o=Object.create(bn);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}var Sn;function Rn(){return Sn||(Sn=vn(0))}t(Ln,_e);function Ln(e){return e==null?$n():En(e)?e:$n().withMutations(function(t){var n=R(e);Oe(n.size),n.forEach(function(e){return t.add(e)})})}Ln.of=function(){return this(arguments)},Ln.fromKeys=function(e){return this(v(e).keySeq())},Ln.prototype.toString=function(){return this.__toString("Set {","}")},Ln.prototype.has=function(e){return this._map.has(e)},Ln.prototype.add=function(e){return Tn(this,this._map.set(e,!0))},Ln.prototype.remove=function(e){return Tn(this,this._map.remove(e))},Ln.prototype.clear=function(){return Tn(this,this._map.clear())},Ln.prototype.union=function(){var t=e.call(arguments,0);return t=t.filter(function(e){return e.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(e){for(var n=0;n<t.length;n++)R(t[n]).forEach(function(t){return e.add(t)})})},Ln.prototype.intersect=function(){var t=e.call(arguments,0);if(t.length===0)return this;t=t.map(function(e){return R(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.every(function(e){return e.includes(n)})||e.remove(n)})})},Ln.prototype.subtract=function(){var t=e.call(arguments,0);if(t.length===0)return this;t=t.map(function(e){return R(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.some(function(e){return e.includes(n)})&&e.remove(n)})})},Ln.prototype.merge=function(){return this.union.apply(this,arguments)},Ln.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},Ln.prototype.sort=function(e){return Pn(nt(this,e))},Ln.prototype.sortBy=function(e,t){return Pn(nt(this,t,e))},Ln.prototype.wasAltered=function(){return this._map.wasAltered()},Ln.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},Ln.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Ln.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)};function En(e){return!!(e&&e[kn])}Ln.isSet=En;var kn="@@__IMMUTABLE_SET__@@",In=Ln.prototype;In[kn]=!0,In[n]=In.remove,In.mergeDeep=In.merge,In.mergeDeepWith=In.mergeWith,In.withMutations=ht.withMutations,In.asMutable=ht.asMutable,In.asImmutable=ht.asImmutable,In.__empty=$n,In.__make=Dn;function Tn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:t.size===0?e.__empty():e.__make(t)}function Dn(e,t){var n=Object.create(In);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var xn;function $n(){return xn||(xn=Dn(Tt()))}t(Pn,Ln);function Pn(e){return e==null?Fn():Nn(e)?e:Fn().withMutations(function(t){var n=R(e);Oe(n.size),n.forEach(function(e){return t.add(e)})})}Pn.of=function(){return this(arguments)},Pn.fromKeys=function(e){return this(v(e).keySeq())},Pn.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Nn(e){return En(e)&&T(e)}Pn.isOrderedSet=Nn;var Mn=Pn.prototype;Mn[P]=!0,Mn.__empty=Fn,Mn.__make=wn;function wn(e,t){var n=Object.create(Mn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var An;function Fn(){return An||(An=wn(fn()))}t(On,me);function On(e,t){var n,r=function(i){if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var a=Object.keys(e);Un(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=_t(i)},o=r.prototype=Object.create(Bn);return o.constructor=r,r}On.prototype.toString=function(){return this.__toString(qn(this)+" {","}")},On.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},On.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},On.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Wn(this,Tt()))},On.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+qn(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:Wn(this,n)},On.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Wn(this,t)},On.prototype.wasAltered=function(){return this._map.wasAltered()},On.prototype.__iterator=function(e,t){var n=this;return v(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},On.prototype.__iterate=function(e,t){var n=this;return v(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},On.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Wn(this,t,e):(this.__ownerID=e,this._map=t,this)};var Bn=On.prototype;Bn[n]=Bn.remove,Bn.deleteIn=Bn.removeIn=ht.removeIn,Bn.merge=ht.merge,Bn.mergeWith=ht.mergeWith,Bn.mergeIn=ht.mergeIn,Bn.mergeDeep=ht.mergeDeep,Bn.mergeDeepWith=ht.mergeDeepWith,Bn.mergeDeepIn=ht.mergeDeepIn,Bn.setIn=ht.setIn,Bn.update=ht.update,Bn.updateIn=ht.updateIn,Bn.withMutations=ht.withMutations,Bn.asMutable=ht.asMutable,Bn.asImmutable=ht.asImmutable;function Wn(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function qn(e){return e._name||e.constructor.name||"Record"}function Un(e,t){try{t.forEach(Vn.bind(void 0,e))}catch(e){}}function Vn(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Fe(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Hn(e,t){if(e===t)return!0;if(!L(t)||e.size!==void 0&&t.size!==void 0&&e.size!==t.size||e.__hash!==void 0&&t.__hash!==void 0&&e.__hash!==t.__hash||E(e)!==E(t)||k(e)!==k(t)||T(e)!==T(t))return!1;if(e.size===0&&t.size===0)return!0;var n=!I(e);if(T(e)){var r=e.entries();return t.every(function(e,t){var o=r.next().value;return o&&fe(o[1],e)&&(n||fe(o[0],t))})&&r.next().done}var o=!1;if(e.size===void 0)if(t.size===void 0)typeof e.cacheResult=="function"&&e.cacheResult();else{o=!0;var a=e;e=t,t=a}var l=!0,s=t.__iterate(function(t,r){if(n?!e.has(t):o?!fe(t,e.get(r,i)):!fe(e.get(r,i),t))return l=!1,!1});return l&&e.size===s}t(Gn,Q);function Gn(e,t,n){if(!(this instanceof Gn))return new Gn(e,t,n);if(Fe(n!==0,"Cannot step a Range by 0"),e=e||0,t===void 0&&(t=1/0),n=n===void 0?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),this.size===0){if(zn)return zn;zn=this}}Gn.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Gn.prototype.get=function(e,t){return this.has(e)?this._start+_(this,e)*this._step:t},Gn.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Gn.prototype.slice=function(e,t){return g(e,t,this.size)?this:(e=h(e,this.size),t=y(t,this.size),t<=e?new Gn(0,0):new Gn(this.get(e,this._end),this.get(t,this._end),this._step))},Gn.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Gn.prototype.lastIndexOf=function(e){return this.indexOf(e)},Gn.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,a=0;a<=n;a++){if(e(o,a,this)===!1)return a+1;o+=t?-r:r}return a},Gn.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,a=0;return new B(function(){var i=o;return o+=t?-r:r,a>n?q():W(e,a++,i)})},Gn.prototype.equals=function(e){return e instanceof Gn?this._start===e._start&&this._end===e._end&&this._step===e._step:Hn(this,e)};var zn;t(jn,Q);function jn(e,t){if(!(this instanceof jn))return new jn(e,t);if(this._value=e,this.size=t===void 0?1/0:Math.max(0,t),this.size===0){if(Kn)return Kn;Kn=this}}jn.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},jn.prototype.get=function(e,t){return this.has(e)?this._value:t},jn.prototype.includes=function(e){return fe(this._value,e)},jn.prototype.slice=function(e,t){var n=this.size;return g(e,t,n)?this:new jn(this._value,y(t,n)-h(e,n))},jn.prototype.reverse=function(){return this},jn.prototype.indexOf=function(e){return fe(this._value,e)?0:-1},jn.prototype.lastIndexOf=function(e){return fe(this._value,e)?this.size:-1},jn.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(e(this._value,n,this)===!1)return n+1;return n},jn.prototype.__iterator=function(e,t){var n=this,r=0;return new B(function(){return r<n.size?W(e,r++,n._value):q()})},jn.prototype.equals=function(e){return e instanceof jn?fe(this._value,e._value):Hn(e)};var Kn;function Qn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}b.Iterator=B,Qn(b,{toArray:function(){Oe(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new We(this)},toJS:function(){return this.toSeq().map(function(e){return e&&typeof e.toJS=="function"?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&typeof e.toJSON=="function"?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new Be(this,!0)},toMap:function(){return _t(this.toKeyedSeq())},toObject:function(){Oe(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return dn(this.toKeyedSeq())},toOrderedSet:function(){return Pn(E(this)?this.valueSeq():this)},toSet:function(){return Ln(E(this)?this.valueSeq():this)},toSetSeq:function(){return new qe(this)},toSeq:function(){return k(this)?this.toIndexedSeq():E(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return hn(E(this)?this.valueSeq():this)},toList:function(){return jt(E(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return this.size===0?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var t=e.call(arguments,0);return it(this,Je(this,t))},contains:function(e){return this.includes(e)},includes:function(e){return this.some(function(t){return fe(t,e)})},entries:function(){return this.__iterator(w)},every:function(e,t){Oe(this.size);var n=!0;return this.__iterate(function(r,o,a){if(!e.call(t,r,o,a))return n=!1,!1}),n},filter:function(e,t){return it(this,ze(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(r,o,a){if(e.call(t,r,o,a))return n=[o,r],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return Oe(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Oe(this.size),e=e!==void 0?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=r!=null?r.toString():""}),t},keys:function(){return this.__iterator(N)},map:function(e,t){return it(this,He(this,e,t))},reduce:function(e,t,n){Oe(this.size);var r,o;return arguments.length<2?o=!0:r=t,this.__iterate(function(t,a,i){o?(o=!1,r=t):r=e.call(n,r,t,a,i)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return it(this,Ge(this,!0))},slice:function(e,t){return it(this,Qe(this,e,t,!0))},some:function(e,t){return!this.every(er(e),t)},sort:function(e){return it(this,nt(this,e))},values:function(){return this.__iterator(M)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,t){return p(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return je(this,e,t)},equals:function(e){return Hn(this,e)},entrySeq:function(){var e=this;if(e._cache)return new J(e._cache);var t=e.toSeq().map(Zn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(er(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(f)},flatMap:function(e,t){return it(this,et(this,e,t))},flatten:function(e){return it(this,Ze(this,e,!0))},fromEntrySeq:function(){return new Ue(this)},get:function(e,t){return this.find(function(t,n){return fe(n,e)},void 0,t)},getIn:function(e,t){for(var n=this,r=pt(e),o;!(o=r.next()).done;){var a=o.value;if(n=n&&n.get?n.get(a,i):i,n===i)return t}return n},groupBy:function(e,t){return Ke(this,e,t)},has:function(e){return this.get(e,i)!==i},hasIn:function(e){return this.getIn(e,i)!==i},isSubset:function(e){return e=typeof e.includes=="function"?e:b(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e.isSubset(this)},keySeq:function(){return this.toSeq().map(Jn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return rt(this,e)},maxBy:function(e,t){return rt(this,t,e)},min:function(e){return rt(this,e?tr(e):or)},minBy:function(e,t){return rt(this,t?tr(t):or,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return it(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return it(this,Ye(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(er(e),t)},sortBy:function(e,t){return it(this,nt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return it(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return it(this,Xe(this,e,t))},takeUntil:function(e,t){return this.takeWhile(er(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ar(this))}});var Xn=b.prototype;Xn[D]=!0,Xn[O]=Xn.values,Xn.__toJS=Xn.toArray,Xn.__toStringMapper=nr,Xn.inspect=Xn.toSource=function(){return this.toString()},Xn.chain=Xn.flatMap,(function(){try{Object.defineProperty(Xn,"length",{get:function(){if(!b.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(e.indexOf("_wrapObject")===-1)return console&&console.warn&&""+e,this.size}}})}catch(e){}})(),Qn(v,{flip:function(){return it(this,Ve(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return fe(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return fe(t,e)})},mapEntries:function(e,t){var n=this,r=0;return it(this,this.toSeq().map(function(o,a){return e.call(t,[a,o],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return it(this,this.toSeq().flip().map(function(r,o){return e.call(t,r,o,n)}).flip())}});var Yn=v.prototype;Yn[x]=!0,Yn[O]=Xn.entries,Yn.__toJS=Xn.toObject,Yn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+nr(e)},Qn(S,{toKeyedSeq:function(){return new Be(this,!1)},filter:function(e,t){return it(this,ze(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return t===void 0?-1:t},lastIndexOf:function(e){return this.toSeq().reverse().indexOf(e)},reverse:function(){return it(this,Ge(this,!1))},slice:function(e,t){return it(this,Qe(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t|0,0),n===0||n===2&&!t)return this;e=h(e,this.size);var r=this.slice(0,e);return it(this,n===1?r:r.concat(m(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return n===void 0?-1:n},first:function(){return this.get(0)},flatten:function(e){return it(this,Ze(this,e,!1))},get:function(e,t){return e=_(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=_(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return it(this,tt(this,e))},interleave:function(){var e=[this].concat(m(arguments)),t=at(this.toSeq(),Q.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),it(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return it(this,Ye(this,e,t,!1))},zip:function(){var e=[this].concat(m(arguments));return it(this,at(this,rr,e))},zipWith:function(e){var t=m(arguments);return t[0]=this,it(this,at(this,e,t))}}),S.prototype[$]=!0,S.prototype[P]=!0,Qn(R,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),R.prototype.has=Xn.includes,Qn(K,v.prototype),Qn(Q,S.prototype),Qn(X,R.prototype),Qn(me,v.prototype),Qn(pe,S.prototype),Qn(_e,R.prototype);function Jn(e,t){return t}function Zn(e,t){return[t,e]}function er(e){return function(){return!e.apply(this,arguments)}}function tr(e){return function(){return-e.apply(this,arguments)}}function nr(e){return typeof e=="string"?JSON.stringify(e):e}function rr(){return m(arguments)}function or(e,t){return e<t?1:e>t?-1:0}function ar(e){if(e.size===1/0)return 0;var t=T(e),n=E(e),r=t?1:0,o=e.__iterate(n?t?function(e,t){r=31*r+lr(Se(e),Se(t))|0}:function(e,t){r=r+lr(Se(e),Se(t))|0}:t?function(e){r=31*r+Se(e)|0}:function(e){r=r+Se(e)|0});return ir(o,r)}function ir(e,t){return t=be(t,3432918353),t=be(t<<15|t>>>-15,461845907),t=be(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=be(t^t>>>16,2246822507),t=be(t^t>>>13,3266489909),t=ve(t^t>>>16),t}function lr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var sr={Iterable:b,Seq:j,Collection:de,Map:_t,OrderedMap:dn,List:jt,Stack:hn,Set:Ln,OrderedSet:Pn,Record:On,Range:Gn,Repeat:jn,is:fe,fromJS:ge};return sr})}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("immutable",["immutable-3.7.3"],(function(t,n,r,o,a,i){a.exports=n("immutable-3.7.3")()}),null);/*FB_PKG_DELIM*/
__d("AutoDubbingConsumptionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3742"),s=o("FalcoLoggerInternal").create("auto_dubbing_consumption",e),u=s;l.default=u}),98);
__d("AutoDubbingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3504"),s=o("FalcoLoggerInternal").create("auto_dubbing",e),u=s;l.default=u}),98);
__d("CastingStateHooks",["CastingContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("CastingContext").CastingStateContext);return(e==null?void 0:e.receiverIsConnected)||!1}function c(){var e=L();return e==null?null:e.currentVideoID}function d(){var e=c();return e!=null}function m(){var e=L();return e==null?0:e.currentPosition||0}function p(){var e=L();return e==null?0:e.currentDuration||0}function _(){var e=L();if(e==null)return!1;var t=e.currentPlaybackState;return t==="play"||t==="seeking"}function f(){var e=L();if(e==null)return!1;var t=e.currentPlaybackState;return t==="paused"}function g(){var e=L();if(e==null)return!1;var t=e.currentPlaybackState;return t==="ended"}function h(){var e=s(o("CastingContext").CastingStateContext);return e==null||!e.receiverIsConnected?!1:e.receiverIsMuted===!0}function y(){var e=s(o("CastingContext").CastingStateContext);return e==null||!e.receiverIsConnected?0:e.receiverVolume||0}function C(){var e=s(o("CastingContext").CastingStateContext);return e==null||!e.receiverIsConnected?null:e.receiverFriendlyName}function b(){var e=E();return e!=null}function v(){var e=k();return e==null?!1:e.currentPlaybackState==="paused"}function S(){var e=k();return e==null?!1:e.currentPlaybackState==="play"}function R(){var e=k();return e==null?null:e.currentAssetID}function L(){var e=s(o("CastingContext").CastingStateContext),t=s(o("CastingContext").CastingExperienceStateContext);return e==null||!e.receiverIsConnected||(t==null?void 0:t.type)!=="video_channel"?null:t}function E(){var e=s(o("CastingContext").CastingStateContext),t=s(o("CastingContext").CastingExperienceStateContext);return e==null||!e.receiverIsConnected||(t==null?void 0:t.type)!=="photo"?null:t}function k(){var e=s(o("CastingContext").CastingStateContext),t=s(o("CastingContext").CastingExperienceStateContext);return e==null||!e.receiverIsConnected||(t==null?void 0:t.type)!=="photo_album"?null:t}l.useIsCastingConnected=u,l.useCastingVideoID=c,l.useIsCastingAnyVideo=d,l.useCastingCurrentTime=m,l.useCastingDuration=p,l.useCastingIsPlaying=_,l.useCastingIsPaused=f,l.useCastingIsEnded=g,l.useCastingIsMuted=h,l.useCastingVolume=y,l.useCastingReceiverFriendlyName=C,l.useIsCastingPhotoExperience=b,l.useCastingIsAlbumPaused=v,l.useCastingIsAlbumPlaying=S,l.useCastingAlbumAssetID=R}),98);
__d("CometAudioLanguageMenuItemsMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29971685009145446"}),null);
__d("CometAudioLanguageMenuItemsMutation.graphql",["CometAudioLanguageMenuItemsMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetUserPreferredAudioLanguageResponsePayload",kind:"LinkedField",name:"set_user_preferred_audio_language",plural:!1,selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preferred_language_string",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometAudioLanguageMenuItemsMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometAudioLanguageMenuItemsMutation",selections:t},params:{id:n("CometAudioLanguageMenuItemsMutation_facebookRelayOperation"),metadata:{},name:"CometAudioLanguageMenuItemsMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24192497507078198"}),null);
__d("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation.graphql",["CometAudioLanguageMenuItemsMutation_doNotTranslateMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetUserDoNotTranslateAudioLanguagesResponsePayload",kind:"LinkedField",name:"set_user_do_not_translate_audio_languages",plural:!1,selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometAudioLanguageMenuItemsMutation_doNotTranslateMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometAudioLanguageMenuItemsMutation_doNotTranslateMutation",selections:t},params:{id:n("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation_facebookRelayOperation"),metadata:{},name:"CometAudioLanguageMenuItemsMutation_doNotTranslateMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometAudioLanguageMenuItemsMutation",["CometAudioLanguageMenuItemsMutation.graphql","CometAudioLanguageMenuItemsMutation_doNotTranslateMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("CometAudioLanguageMenuItemsMutation.graphql"),c=s!==void 0?s:s=n("CometAudioLanguageMenuItemsMutation_doNotTranslateMutation.graphql");l.setUserPreferredAudioLanguageDataMutation=u,l.setDoNotTranslateLanguageDataMutation=c}),98);
__d("CometAudioLanguageSupportedLanguagesEnum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EN","VI","ZH","HI","AR","PT","ES","DE","IT","FR","BN","ID","JA","KO","RU","TH","TR"]),l=e;i.default=l}),66);
__d("CometAudioLanguageUtils_doNotTranslate.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_doNotTranslate",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("CometAudioLanguageUtils_dubbingInfo.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_dubbingInfo",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_best_language_prediction_for_dubbing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null},{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preferred_language_string",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBDubbedTrackMap",kind:"LinkedField",name:"dubbed_track_mapping",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_lang",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dubbing_type",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("CometAudioLanguageUtils_dubtrackMapping.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_dubtrackMapping",selections:[{alias:null,args:null,concreteType:"XFBDubbedTrackMap",kind:"LinkedField",name:"dubbed_track_mapping",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_lang",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dubbing_type",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("CometVideoPlayerAutoDubbingWWWStrings",["fbt","FDSLink.react","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Meta AI translation"),d=s._(/*BTDS*/"This reel is translated into your default language using Meta AI to simulate the speaker\u2019s voice and, if the creator chooses, sync their lips to match."),m=s._(/*BTDS*/"AI translations may be inaccurate."),p=s._(/*BTDS*/"{=m0}",[s._implicitParam("=m0",u.jsx(r("FDSLink.react"),{href:"https://www.facebook.com/help/576364395068889",target:"_blank",children:s._(/*BTDS*/"Learn more")}))]),_=s._(/*BTDS*/"{warning} {learnMore}",[s._param("warning",m),s._param("learnMore",p)]),f=s._(/*BTDS*/"Learn more"),g=s._(/*BTDS*/"Close"),h=s._(/*BTDS*/"Translated audio"),y=s._(/*BTDS*/"This video has been translated and re-recorded into your default language by the creator. Some translations may be inaccurate."),C=s._(/*BTDS*/"Audio and language options on modal"),b=s._(/*BTDS*/"Audio translations rating options"),v=s._(/*BTDS*/"Audio and language"),S=s._(/*BTDS*/"Audio description"),R=s._(/*BTDS*/"Rate this voice translation"),L=s._(/*BTDS*/"Additional details (optional)"),E=s._(/*BTDS*/"Why did you give this rating? (optional)"),k=s._(/*BTDS*/"Thanks for your rating, your feedback helps improve Facebook."),I=s._(/*BTDS*/"Voice translation is inaccurate"),T=s._(/*BTDS*/"Voice translation is accurate"),D=s._(/*BTDS*/"Voice translation is robotic"),x=s._(/*BTDS*/"Voice translation is natural"),$=s._(/*BTDS*/"Poor sound quality"),P=s._(/*BTDS*/"Good sound quality"),N=s._(/*BTDS*/"Audio is unclear"),M=s._(/*BTDS*/"Audio is clear"),w=s._(/*BTDS*/"Audio is too fast or slow"),A=s._(/*BTDS*/"Audio is the right speed"),F=s._(/*BTDS*/"Very good"),O=s._(/*BTDS*/"Good"),B=s._(/*BTDS*/"OK"),W=s._(/*BTDS*/"Very bad"),q=s._(/*BTDS*/"Bad"),U=s._(/*BTDS*/"More menu options"),V=s._(/*BTDS*/"Submit"),H=function(t){return s._(/*BTDS*/"{language}",[s._param("language",t.charAt(0).toUpperCase()+t.slice(1))])},G=s._(/*BTDS*/"Don't translate"),z=s._(/*BTDS*/"Choose languages you prefer to keep untranslated."),j=s._(/*BTDS*/"Original audio"),K=s._(/*BTDS*/"Audio description"),Q=s._(/*BTDS*/"Save"),X=s._(/*BTDS*/"Next"),Y=s._(/*BTDS*/"Translations and language"),J=s._(/*BTDS*/"Off"),Z=s._(/*BTDS*/"Hear audio translated into your default language in the speaker\u2019s voice when available."),ee=s._(/*BTDS*/"Review voice translation"),te=s._(/*BTDS*/"Manage voice translation"),ne=s._(/*BTDS*/"This video does not have voice translations available at the moment."),re=s._(/*BTDS*/"Voice translations not available"),oe=s._(/*BTDS*/"View Reel"),ae=s._(/*BTDS*/"Speak in English, Spanish, Hindi or Portuguese"),ie=s._(/*BTDS*/"We currently support voice translations between English, Spanish, Hindi or Portuguese with more languages coming in the future."),le=s._(/*BTDS*/"Say it loud and clear"),se=s._(/*BTDS*/"Try to speak clearly and limit background noise in the video you upload."),ue=s._(/*BTDS*/"Add music later"),ce=s._(/*BTDS*/"Music or audio from the audio library can be added, but it will not be translated."),de=s._(/*BTDS*/"Film with your mouth visible"),me=s._(/*BTDS*/"To sync your lips to the translation, make sure your mouth is uncovered and in the frame."),pe=s._(/*BTDS*/"Failed AI translations image"),_e=s._(/*BTDS*/"About translating your voice with Meta AI"),fe=s._(/*BTDS*/"Sometimes we\u2019re not able to translate certain content. Try following these best practices next time you post."),ge=s._(/*BTDS*/"Review voice translations"),he=function(t){var e=H(t);return s._(/*BTDS*/"{ originalLabel} ({language})",[s._param(" originalLabel",j),s._param("language",e)])},ye=s._(/*BTDS*/"Shared"),Ce=s._(/*BTDS*/"Not shared"),be=s._(/*BTDS*/"Approve your translation to share your reel in those languages. Your original reel has already been shared."),ve=function(t,n){var e=n==="approve"?s._(/*BTDS*/"Approve"):s._(/*BTDS*/"Delete");return t===0?s._(/*BTDS*/"{action} translations",[s._param("action",e)]):s._(/*BTDS*/"_j{\"*\":\"{action} {numTranslations} translations\",\"_1\":\"{action} {numTranslations} translation\"}",[s._plural(t),s._param("action",e),s._param("numTranslations",t)])},Se=s._(/*BTDS*/"Your translation has been shared. You can remove it anytime from the reel."),Re=s._(/*BTDS*/"Translations deleted"),Le=s._(/*BTDS*/"Pending voice translations"),Ee=s._(/*BTDS*/"Translation in progress"),ke=s._(/*BTDS*/"You won't be able to translate this reel again."),Ie=function(t){return s._(/*BTDS*/"_j{\"*\":\"Delete {numTranslations} voice translations ?\",\"_1\":\"Delete {numTranslations} voice translation ?\"}",[s._plural(t),s._param("numTranslations",t)])},Te=s._(/*BTDS*/"Delete"),De=s._(/*BTDS*/"Go back");l.AI_TRANSLATION_LABEL=c,l.AI_TRANSLATION_BODY=d,l.AI_TRANSLATION_WARNING=m,l.AI_TRANSLATION_LEARN_MORE=p,l.AI_TRANSLATION_WARNING_LEARN_MORE_BODY=_,l.AI_TRANSLATION_LEARN_MORE_LABEL=f,l.AI_TRANSLATION_MODAL_CLOSE=g,l.BYOA_TRANSLATION_LABEL=h,l.BYOA_TRANSLATION_BODY=y,l.AUDIO_LANGUAGE_OPTIONS_TITLE=C,l.AUDIO_LANGUAGE_RATINGS_OPTIONS=b,l.AUDIO_LANGUAGE_MODAL_TITLE=v,l.AUDIO_DESCRIPTION_MENU_ITEM_TITLE=S,l.AUDIO_LANGUAGE_RATE_TITLE=R,l.AUDIO_LANGUAGE_RATE_ADDITIONAL_INFO=L,l.AUDIO_LANGUAGE_RATE_REASON_TITLE=E,l.AUDIO_LANGUAGE_RATE_TOAST=k,l.AUDIO_LANGUAGE_RATE_REASON_INACCURATE=I,l.AUDIO_LANGUAGE_RATE_REASON_ACCURATE=T,l.AUDIO_LANGUAGE_RATE_REASON_ROBOTIC=D,l.AUDIO_LANGUAGE_RATE_REASON_NATURAL=x,l.AUDIO_LANGUAGE_RATE_REASON_BAD_SOUND_QUALITY=$,l.AUDIO_LANGUAGE_RATE_REASON_GOOD_SOUND_QUALITY=P,l.AUDIO_LANGUAGE_RATE_REASON_AUDIO_UNCLEAR=N,l.AUDIO_LANGUAGE_RATE_REASON_AUDIO_CLEAR=M,l.AUDIO_LANGUAGE_RATE_REASON_AUDIO_WRONG_SPEED=w,l.AUDIO_LANGUAGE_RATE_REASON_AUDIO_RIGHT_SPEED=A,l.AUDIO_LANGUAGE_RATE_OPTION_VERY_GOOD=F,l.AUDIO_LANGUAGE_RATE_OPTION_GOOD=O,l.AUDIO_LANGUAGE_RATE_OPTION_OK=B,l.AUDIO_LANGUAGE_RATE_OPTION_VERY_BAD=W,l.AUDIO_LANGUAGE_RATE_OPTION_BAD=q,l.REELS_MENU_MORE_OPTIONS=U,l.AUDIO_LANGUAGE_RATE_SUBMIT=V,l.getLanguageLabel=H,l.DO_NOT_TRANSLATE_TITLE=G,l.DO_NOT_TRANSLATE_EXPLANATION=z,l.ORIGINAL_AUDIO_LABEL=j,l.AUDIO_DESCRIPTION_LABEL=K,l.SAVE_USER_LANGUAGE_PREFERENCE=Q,l.GO_TO_NEXT_MODAL=X,l.VOD_TRANSLATIONS_MENU_ITEM=Y,l.VOD_TRANSLATIONS_OFF=J,l.VOD_TRANSLATIONS_DESCRIPTION=Z,l.REVIEW_TRANSLATION_MODAL_HEADER=ee,l.MANAGE_TRANSLATION_MODAL_HEADER=te,l.DUBBING_NULL_STATE_BODY=ne,l.DUBBING_NULL_STATE_HEADER=re,l.DUBBING_MANAGEMENT_REROUTE_TO_REEL=oe,l.BEST_PRACTICES_ELLIGIBLE_LANGUAGES_HEADER=ae,l.BEST_PRACTICES_ELLIGIBLE_LANGUAGES_BODY=ie,l.BEST_PRACTICES_CLEAR_SPEECH_HEADER=le,l.BEST_PRACTICES_CLEAR_SPEECH_BODY=se,l.BEST_PRACTICES_NO_MUSIC_HEADER=ue,l.BEST_PRACTICES_NO_MUSIC_BODY=ce,l.BEST_PRACTICES_VISIBLE_MOUTH_HEADER=de,l.BEST_PRACTICES_VISIBLE_MOUTH_BODY=me,l.FAILED_TRANSLATION_IMG_ALT=pe,l.BEST_PRACTICES_PAGE_HEADER=_e,l.GENERIC_TRANSLATIONS_ERROR=fe,l.REVIEW_TRANSLATION_SECTION_HEADER=ge,l.getOriginalLanguageLabel=he,l.TRANSLATION_SHARED_DESCRIPTION=ye,l.TRANSLATION_NOT_SHARED_DESCRIPTION=Ce,l.COMET_TRANSLATION_APPROVAL_META=be,l.COMET_APPROVE_DELETE_TRANSLATION_LABEL=ve,l.COMET_TRANSLATION_APPROVED_SUCCESS=Se,l.COMET_TRANSLATION_DELETED_SUCCESS=Re,l.PENDING_VOICE_TRANSLATIONS_HEADER=Le,l.TRANSLATION_IN_PROGRESS_DESCRIPTION=Ee,l.COMET_DELETE_MODAL_BODY=ke,l.COMET_DELETE_MODAL_TITLE_MULTI_LANG=Ie,l.COMET_DELETE_MODAL_CONFIRMATION=Te,l.COMET_DELETE_MODAL_CANCEL=De}),226);
__d("VideoPlayerAudioTrackUtils",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(t,n){if(n!=null){var e=String(t).substring(0,2);try{return new Intl.DisplayNames([e],{type:"language"}).of(n)}catch(e){return}}},u=function(n,r){if(n==null)return s._(/*BTDS*/"Default");var t=e(r,n.lang),o=t!=null?t:s._(/*BTDS*/"Default"),a=null;return n.role==="dub"?a=s._(/*BTDS*/"Dubbed"):(n==null?void 0:n.role)==="description"&&(a=s._(/*BTDS*/"Description")),a!=null?o.toString()+" - "+a.toString():o};l.getIntlDisplayName=e,l.getAudioTrackLabelLocalized=u}),226);
__d("XFBDubbingTypeEnum.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["AUDIODESCRIPTION","AUTODUB","BYOA","MANUALDUB","NONE"]),l=e;i.default=l}),66);
__d("useVideoPlayerControllerSubscriptionProvidingNullableController",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e,t){var n=o("react-compiler-runtime").c(9),r;n[0]!==e||n[1]!==t?(r=function(){return t(e,null)},n[0]=e,n[1]=t,n[2]=r):r=n[2];var a=d(r),i=a[0],l=a[1],s=c(t),m,p;n[3]!==t?(m=function(){s.current=t},p=[t],n[3]=t,n[4]=m,n[5]=p):(m=n[4],p=n[5]),u(m,p);var _,f;return n[6]!==e?(_=function(){l(function(t){return s.current(e,t)});var t=e==null?void 0:e.subscribe(function(){l(function(t){return s.current(e,t)})});return function(){t==null||t.remove()}},f=[e],n[6]=e,n[7]=_,n[8]=f):(_=n[7],f=n[8]),u(_,f),i}l.default=m}),98);
__d("CometAudioLanguageUtils",["AutoDubbingConsumptionFalcoEvent","AutoDubbingFalcoEvent","CometAudioLanguageMenuItemsMutation","CometAudioLanguageSupportedLanguagesEnum","CometAudioLanguageUtils_doNotTranslate.graphql","CometAudioLanguageUtils_dubbingInfo.graphql","CometAudioLanguageUtils_dubtrackMapping.graphql","CometRelay","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","VideoPlayerAudioTrackUtils","cometPushToast","gkx","intlList","react","react-compiler-runtime","useVideoPlayerControllerSubscriptionProvidingNullableController"],(function(t,n,r,o,a,i,l){"use strict";var e=["label"],s,u,c,d,m=d||(d=o("react")),p=m.useEffect,_=m.useMemo,f=m.useRef,g=null,h=function(t,n,o,a,i,l){var e={client_extra_data:{dubbing_type_from:o==null?"original":o,dubbing_type_to:a==null?"original":a,lang_from:t!=null?t:"original",lang_to:n!=null?n:"original",player_type:"Reel"},event:i,video_id:l!=null?l:""};r("AutoDubbingConsumptionFalcoEvent").log(function(){return e})},y=function(t,n){var e,r=(e=t==null?void 0:t.lang)!=null?e:null;return(t==null?void 0:t.lang)===null&&t.role==null&&(r=n!=null?n:null),r},C=function(t,n,o){var e={client_extra_data:{lang:t!=null?t:""},event:o,video_id:n!=null?n:""};r("AutoDubbingConsumptionFalcoEvent").log(function(){return e})};function b(e){var t,r=o("CometRelay").useFragment(s!==void 0?s:s=n("CometAudioLanguageUtils_dubtrackMapping.graphql"),e);return(t=r==null?void 0:r.dubbed_track_mapping)!=null?t:null}var v=function(t){var e=null;if(t!=null){var n;e=(n=t.find(function(e){return e.dubbing_type==="NONE"&&e.audio_lang!=null}))==null?void 0:n.audio_lang}return e};function S(e,t){var n=o("react-compiler-runtime").c(7),a,i,l;if(n[0]!==e||n[1]!==t){var s={};if(i=null,e!=null&&t!=null){var u={};t.forEach(function(e){var t;e.dubbing_type==="NONE"&&e.audio_lang!=null?(t="Default",i=e.audio_lang):t=e.audio_lang;var n=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),e.audio_lang);n!=null&&t!=null&&(u[t]=n.charAt(0).toUpperCase()+n.slice(1))}),e.forEach(function(e){if(e.lang!==null&&!(e.id in s)&&e.lang in u){var t=u[e.lang];e.role==="description"&&(t=t+" \xB7 "+o("CometVideoPlayerAutoDubbingWWWStrings").AUDIO_DESCRIPTION_LABEL.toString()),s[e.id]=babelHelpers.extends({},e,{label:t})}else if(e.displayLabel==="Default"){var n,r=o("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL.toString();if(u[(n=e.lang)!=null?n:"Default"]){var a;r=u[(a=e.lang)!=null?a:"Default"]+" \xB7 "+r}s[e.id]=babelHelpers.extends({},e,{label:r})}})}l=Object.values(s).sort(R),n[0]=e,n[1]=t,n[2]=i,n[3]=l}else i=n[2],l=n[3];var c=l,d;return n[4]!==i||n[5]!==c?(d={allAvailableTracks:c,originalLanguage:i},n[4]=i,n[5]=c,n[6]=d):d=n[6],a=d,a}function R(e,t){return e.role===null?-1:t.role===null?1:e.label.localeCompare(t.label)}function L(e){var t,r=o("CometRelay").useFragment(u!==void 0?u:u=n("CometAudioLanguageUtils_doNotTranslate.graphql"),e);return r==null||(t=r.audio_settings)==null?void 0:t.do_not_translate_languages_string}function E(e){var t=o("react-compiler-runtime").c(2),n;if(e==null||e.length===0)n=null;else{var a;if(t[0]!==e){var i=[];e.forEach(function(e){var t=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),e);t!=null&&(t=t.charAt(0).toUpperCase()+t.slice(1),i.push(t))}),i.sort(),a=r("intlList")(i),t[0]=e,t[1]=a}else a=t[1];n=a}return n}var k=function(n){var t=n.controller,r=n.originalLanguage,o=n.saveAndLogPreferredLanguage,a=n.selectedTrack,i=n.setPause,l=n.setUpdatedTargetAudioTrack,s=n.updatedTargetAudioTrack,u=n.videoId;if((t==null?void 0:t.selectVideoVariant)!=null&&a){var c=a.label,d=babelHelpers.objectWithoutPropertiesLoose(a,e);t.selectVideoVariant({lang:d.lang,role:d.role}),i(!1,"AUDIO_LANGUAGE_SELECTOR");var m=y(d,r),p=y(s!=null?s:null,r);o(p,m,s==null?void 0:s.role,a.role,u),l(d)}};function I(){var e=o("react-compiler-runtime").c(2),t=o("CometRelay").useMutation(o("CometAudioLanguageMenuItemsMutation").setUserPreferredAudioLanguageDataMutation),n=t[0],r;return e[0]!==n?(r=function(t,r,o,a,i){r!=null&&n({onCompleted:D,onError:T,variables:{input:{language_code:r}}}),h(t!=null?t:null,r!=null?r:null,o!=null?o:null,a!=null?a:null,"fb_reel_auto_dub_consumption_preferred_language_changed",i!=null?i:null)},e[0]=n,e[1]=r):r=e[1],r}function T(){}function D(e,t){}function x(e,t){var a=o("react-compiler-runtime").c(4),i=r("gkx")("17327"),l=r("gkx")("19163"),s=o("CometRelay").useFragment(c!==void 0?c:c=n("CometAudioLanguageUtils_dubbingInfo.graphql"),e),u=null,d=g,m=null;if(!t&&s!=null&&(s==null?void 0:s.dubbed_track_mapping)!=null&&(s==null?void 0:s.dubbed_track_mapping.length)>0&&i){var p,_,f,h,y=(p=(_=s.dubbed_track_mapping.find($))==null?void 0:_.audio_lang)!=null?p:null,C=!1;y!=null&&(C=s.dubbed_track_mapping.filter(function(e){return e.audio_lang===y}).length>1);var b=(f=s.audio_settings)==null?void 0:f.do_not_translate_languages_string,v=s==null||(h=s.audio_settings)==null?void 0:h.preferred_language_string,S=s==null?void 0:s.viewer_best_language_prediction_for_dubbing,R=s.audio_user_preferred_language;y!=null&&b!=null&&b.includes(y)?(d=y,u="fb_reel_auto_dub_consumption_do_not_translate_languages_match"):v!=null&&s.dubbed_track_mapping.find(function(e){return e.audio_lang===v})!=null?(d=v,u="fb_reel_auto_dub_consumption_preferred_language_match"):l&&S!=null&&S!==y&&s.dubbed_track_mapping.find(function(e){return e.audio_lang===S})!=null?(d=S,u="fb_reel_auto_dub_consumption_blp_match"):l&&R!=null&&R!==y&&s.dubbed_track_mapping.find(function(e){return e.audio_lang===R})!=null&&(d=R,u="fb_reel_auto_dub_consumption_fallback_to_app_lang"),m=d,C&&d===y&&(d=g)}var L;return a[0]!==u||a[1]!==m||a[2]!==d?(L={event:u,lang:d,loggingLang:m},a[0]=u,a[1]=m,a[2]=d,a[3]=L):L=a[3],L}function $(e){return e.dubbing_type==="NONE"}function P(){var e=o("react-compiler-runtime").c(1),t,n;if(e[0]===Symbol.for("react.memo_cache_sentinel")){var a=Array.from(r("CometAudioLanguageSupportedLanguagesEnum").members(),w),i=r("CurrentLocale").get();n=a.map(function(e){var t=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(i,e);return t!=null?[e,t]:null}).filter(M),n.sort(N),e[0]=n}else n=e[0];t=n;var l=t;return l}function N(e,t){return(e[1]||"").localeCompare(t[1]||"")}function M(e){return e!==null&&e[1]!=null}function w(e){return e.valueOf().toLowerCase()}var A=function(t){var e=t.availableAudioTracks,n=t.controller,r=t.currentValue,o=t.originalVideoLanguage,a=t.selectedLanguages,i=t.setSelectedLanguages,l;return a.includes(r)?l=a.filter(function(e){return e!==r}):(l=[].concat(a,[r]),o!=null&&r===o&&F({availableAudioTracks:e,controller:n,originalVideoLanguage:o})),i(l),l},F=function(t){var e=t.availableAudioTracks,n=t.controller,r=t.originalVideoLanguage;if(r!=null&&n!=null&&e!=null){var o=e.find(function(e){return e.role==null});o!=null&&(n==null||n.selectVideoVariant({lang:o.lang,role:o.role}))}},O=function(t){var e=t.onClose,n=t.rating,a=t.ratingDetails,i=t.selectedReasons,l=t.targetAudioLang,s=t.video_id,u={event:"fb_reel_auto_dub_feedback",extra_data:{feedback:a!=null?a:"",player_type:"Reel",rating_reasons:JSON.stringify(i),selected_language:l!=null?l:"unknown",selected_rating:n!=null?n:"unknown"},video_id:s!=null?String(s):""};r("AutoDubbingFalcoEvent").log(function(){return u}),e(),o("cometPushToast").cometPushToast({message:o("CometVideoPlayerAutoDubbingWWWStrings").AUDIO_LANGUAGE_RATE_TOAST,withoutCloseButton:!0},2e3)},B=function(t,n){var e={client_extra_data:{languages:t.join(",")},event:"fb_reel_auto_dub_consumption_do_not_translate_languages_changed",video_id:n!=null?String(n):""};r("AutoDubbingConsumptionFalcoEvent").log(function(){return e})};function W(){var e=o("react-compiler-runtime").c(2),t=o("CometRelay").useMutation(o("CometAudioLanguageMenuItemsMutation").setDoNotTranslateLanguageDataMutation),n=t[0],r;return e[0]!==n?(r=function(t,r){n({onCompleted:function(){B(t,r)},onError:q,optimisticResponse:{audio_settings:{do_not_translate_languages_string:t,id:r}},variables:{input:{language_codes:t}}})},e[0]=n,e[1]=r):r=e[1],r}function q(){}function U(e,t){return r("useVideoPlayerControllerSubscriptionProvidingNullableController")(e,t)}var V=function(t,n,o,a){var e={client_extra_data:{fromTrackId:o!=null?o:"",reason:t,toTrackId:a!=null?a:""},event:"fb_reel_auto_dub_consumption_logger_error",video_id:n!=null?n:""};r("AutoDubbingConsumptionFalcoEvent").log(function(){return e})},H=function(t,n,r,o){var e=n==null&&(r==null?void 0:r.role)==="dub"||(n==null?void 0:n.id)!=null&&(r==null?void 0:r.id)!==(n==null?void 0:n.id),a=null;return e&&(t==null?(e=!1,a="availableAudioTracks is null"):r==null?e=!1:t!=null&&n!=null&&t.find(function(e){return e.id===n.id})==null?(e=!1,a="fromTrack is not in availableAudioTracks"):t!=null&&r!=null&&t.find(function(e){return e.id===r.id})==null?(e=!1,a="toTrack is not in availableAudioTracks"):(n==null?void 0:n.id)!=null&&(n==null?void 0:n.id)===(r==null?void 0:r.id)?(e=!1,a="fromTrack and toTrack are the same"):n==null&&(r==null?void 0:r.role)!=="dub"&&(e=!1,a="toTrack is not dubbed")),!e&&a!=null&&V(a,o,n==null?void 0:n.id,r==null?void 0:r.id),e};function G(e,t,n,r){var a=o("react-compiler-runtime").c(6),i=f(null),l,s;a[0]!==r||a[1]!==n||a[2]!==t||a[3]!==e?(l=function(){var o=H(r,i.current,e,n);if(o){var a,l,s,u,c=y((a=i.current)!=null?a:null,t);i.current==null&&c==null&&(c=t);var d=y(e,t);h(c,d,(l=(s=i.current)==null?void 0:s.role)!=null?l:null,(u=e==null?void 0:e.role)!=null?u:null,"fb_reel_auto_dub_consumption",n!=null?n:"")}i.current=e},s=[e,t,n,r],a[0]=r,a[1]=n,a[2]=t,a[3]=e,a[4]=l,a[5]=s):(l=a[4],s=a[5]),p(l,s)}l.logConsumptionLanguageChange=h,l.getSelectedLanguage=y,l.logInitialDubbingConsumption=C,l.useGetDubTrackMapping=b,l.getOriginalLanguage=v,l.useGetAllAvailableTracks=S,l.useGetUserSelectedDoNotTranslateLanguageList=L,l.useGetCurrentDoNotTranslateLanguages=E,l.changePreferredLanguage=k,l.useSaveAndLogPreferredLanguage=I,l.useUserPreferredLanguage=x,l.useAllTransalateableLanguages=P,l.changeUserPreferredDoNotTranslateLanguages=A,l.changeAudioToOriginalLanguage=F,l.logTransalationRating=O,l.logDoNotTranslateLanguageSave=B,l.useSaveAndLogDoNotTranslateLanguages=W,l.useProvidedControllerSubscription=U,l.useLogTargetAudioChange=G}),98);
__d("CometTrackingCodeProvider.react",["CometTrackingCodeContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo;function m(e,t){return e&&e!==""?t.concat(e):t}function p(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=e.trackingCode,i=a.click_tracking_linkshim_cb,l=a.encrypted_click_tracking,u=a.encrypted_tracking,d=c(r("CometTrackingCodeContext")),p,_;t[0]!==i||t[1]!==d.click_tracking_linkshim_cb?(_=m(i,d.click_tracking_linkshim_cb),t[0]=i,t[1]=d.click_tracking_linkshim_cb,t[2]=_):_=t[2];var f;t[3]!==l||t[4]!==d.encrypted_click_tracking?(f=m(l,d.encrypted_click_tracking),t[3]=l,t[4]=d.encrypted_click_tracking,t[5]=f):f=t[5];var g;t[6]!==u||t[7]!==d.encrypted_tracking?(g=m(u,d.encrypted_tracking),t[6]=u,t[7]=d.encrypted_tracking,t[8]=g):g=t[8];var h;t[9]!==_||t[10]!==f||t[11]!==g?(h={click_tracking_linkshim_cb:_,encrypted_click_tracking:f,encrypted_tracking:g},t[9]=_,t[10]=f,t[11]=g,t[12]=h):h=t[12],p=h;var y=p,C;return t[13]!==n||t[14]!==y?(C=s.jsx(r("CometTrackingCodeContext").Provider,{value:y,children:n}),t[13]=n,t[14]=y,t[15]=C):C=t[15],C}var _=s.memo(p);l.default=_}),98);
__d("VideoBroadcastStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({PREVIEW:"PREVIEW",LIVE:"LIVE",LIVE_STOPPED:"LIVE_STOPPED",VOD_READY:"VOD_READY",SEAL_STARTED:"SEAL_STARTED",SCHEDULED_PREVIEW:"SCHEDULED_PREVIEW",SCHEDULED_LIVE:"SCHEDULED_LIVE",SCHEDULED_EXPIRED:"SCHEDULED_EXPIRED",SCHEDULED_CANCELED:"SCHEDULED_CANCELED",PRE_LIVE:"PRE_LIVE",SEAL_FAILED:"SEAL_FAILED"});i.default=e}),66);
__d("VideoHomeTypedLiteLogger",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:VideoHomeLoggerConfig")}),null);
__d("VideoPlayerControlsHiddenContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("VideoPlayerControlIcon.react",["BaseFocusRing.react","BaseTooltip.react","CometPressable.react","CometTooltipImpl.react","FDSIcon.react","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["tooltipOffsetY","children"],s=["color","disabled","icon","label","tooltip","tooltipAlign","tooltipImpl","tooltipOffsetY"],u,c=u||(u=o("react")),d=u.useContext,m={default:{backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderInlineEnd:"xtmcdsl",borderBottom:"x112ta8",borderInlineStart:"x4gj9lk",cursor:"x1ypdohk",display:"x1rg5ohu",height:"x1qx5ct2",marginTop:"x1k70j0n",marginInlineEnd:"xbelrpt",marginBottom:"xzueoph",marginInlineStart:"xdzw4kq",opacity:"x1iy03kw",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",":hover_opacity":"x1o7uuvo",$$css:!0},disabled:{cursor:"xt0e3qv",opacity:"xbyyjgo",":hover_opacity":"xj34u2y",$$css:!0},dropShadow:{filter:"x1qo4wvw",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(21),a,i,l;n[0]!==t?(l=t.tooltipOffsetY,a=t.children,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s=Math.min(0,l!=null?l:0),u;n[4]===Symbol.for("react.memo_cache_sentinel")?(u="xuk3077 x78zum5 x14atkfc",n[4]=u):u=n[4];var d;n[5]!==s?(d={marginTop:s},n[5]=s,n[6]=d):d=n[6];var m;n[7]===Symbol.for("react.memo_cache_sentinel")?(m="xuk3077 x78zum5 x14atkfc",n[7]=m):m=n[7];var p=-s,_;n[8]!==p?(_={paddingTop:p},n[8]=p,n[9]=_):_=n[9];var f;n[10]!==a?(f=typeof a=="function"?a(void 0):a,n[10]=a,n[11]=f):f=n[11];var g;n[12]!==_||n[13]!==f?(g=c.jsx("span",{className:m,style:_,children:f}),n[12]=_,n[13]=f,n[14]=g):g=n[14];var h;n[15]!==i||n[16]!==g?(h=c.jsx(r("BaseTooltip.react"),babelHelpers.extends({},i,{children:g})),n[15]=i,n[16]=g,n[17]=h):h=n[17];var y;return n[18]!==d||n[19]!==h?(y=c.jsx("span",{className:u,style:d,children:h}),n[18]=d,n[19]=h,n[20]=y):y=n[20],y}function _(e){var t=o("react-compiler-runtime").c(23),n,a,i,l,u,_,f,g,h;t[0]!==e?(u=e.color,a=e.disabled,i=e.icon,l=e.label,_=e.tooltip,f=e.tooltipAlign,g=e.tooltipImpl,h=e.tooltipOffsetY,n=babelHelpers.objectWithoutPropertiesLoose(e,s),t[0]=e,t[1]=n,t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=_,t[7]=f,t[8]=g,t[9]=h):(n=t[1],a=t[2],i=t[3],l=t[4],u=t[5],_=t[6],f=t[7],g=t[8],h=t[9]);var y=u===void 0?"white":u,C=_===void 0?null:_,b=f===void 0?"start":f,v=d(r("VideoPlayerControlsHiddenContext")),S=g!=null?g:r("CometTooltipImpl.react"),R;t[10]!==n||t[11]!==y||t[12]!==a||t[13]!==i||t[14]!==v||t[15]!==l?(R=c.jsx(r("BaseFocusRing.react"),{children:function(t){return c.jsx(r("CometPressable.react"),babelHelpers.extends({},n,{disabled:a,display:"inline",label:l,overlayDisabled:!0,testid:void 0,xstyle:[m.default,a===!0&&m.disabled,t,v===!0&&m.dropShadow],children:c.jsx(r("FDSIcon.react"),{color:y,icon:i,size:20})}))}}),t[10]=n,t[11]=y,t[12]=a,t[13]=i,t[14]=v,t[15]=l,t[16]=R):R=t[16];var L;return t[17]!==S||t[18]!==R||t[19]!==C||t[20]!==b||t[21]!==h?(L=c.jsx(p,{align:b,position:"above",tooltip:C,tooltipImpl:S,tooltipOffsetY:h,children:R}),t[17]=S,t[18]=R,t[19]=C,t[20]=b,t[21]=h,t[22]=L):L=t[22],L}l.default=_}),98);
__d("VideoPlayerControlsBottomRowAddOnContext",["react","react-compiler-runtime","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useState,p=s.createContext(null);function _(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=r("useStable")(f),i;return t[0]!==n||t[1]!==a?(i=s.jsx(p.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}function f(){var e=null,t=null,n=null;return{getBottomRowAddOn:function(){return t},initialize:function(o){n=function(n){t=n,o(n)},e!=null&&(n(e),e=null)},setBottomRowAddOn:function(r){if(n==null){e=r;return}n(r)}}}function g(e){var t=o("react-compiler-runtime").c(3),n=c(p),r=m(e),a=r[0],i=r[1],l,s;return t[0]!==n?(l=function(){n!=null&&n.initialize(i)},s=[n],t[0]=n,t[1]=l,t[2]=s):(l=t[1],s=t[2]),d(l,s),a}function h(e){var t=o("react-compiler-runtime").c(4),n=c(p),r,a;t[0]!==e||t[1]!==n?(r=function(){n!=null&&n.setBottomRowAddOn(e)},a=[e,n],t[0]=e,t[1]=n,t[2]=r,t[3]=a):(r=t[2],a=t[3]),d(r,a)}l.VideoPlayerControlsBottomRowAddOnContext=p,l.VideoPlayerControlsBottomRowAddOnContextProvider=_,l.useVideoPlayerControlsBottomRowAddOn=g,l.useSetVideoPlayerControlsBottomRowAddOn=h}),98);
__d("VideoPlayerDefaultControlsProperties",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SAME_AS_OTHER_CONTROLS","SEPARATE_FROM_OTHER_CONTROLS"]),l=n("$InternalEnum")({VIDEO_CAPTIONS_MENU:"video_captions_menu",VIDEO_SETTINGS_MENU:"video_settings_menu"});i.MutedButtonVisibility=e,i.VideoMenuType=l}),66);
__d("createVideoStateHook",["VideoPlayerHooks","emptyFunction","gkx","react","react-compiler-runtime","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useMemo,m=u.useSyncExternalStore,p=new Set,_=function(t){var e=new Map;p.add(e);var n=r("emptyFunction");function a(t,n){var r=e.get(t);return r||(r={consumers:new Set,key:t,lastValue:n},e.set(t,r)),r}function i(t,n){return{getSnapshot:function(){var r=e.get(t);return r==null?n:r.lastValue},setValue:function(r){var e=a(t,n),o;typeof r=="function"?o=r(e.lastValue):o=r,e.lastValue=o,e.consumers.forEach(function(e){e(o)})},subscribe:function(r){var e=a(t,n);return e.consumers.add(r),function(){e.consumers.delete(r)}}}}function l(e){var t=o("react-compiler-runtime").c(10),n;t[0]!==e?(n=function(){return e},t[0]=e,t[1]=n):n=t[1];var a=r("useStable")(n),l=(s||(s=o("VideoPlayerHooks"))).useInstanceKey(),u,c;t[2]!==a||t[3]!==l?(c=i(l,a),t[2]=a,t[3]=l,t[4]=c):c=t[4],u=c;var d=u,p=d.getSnapshot,_=d.setValue,f=d.subscribe,g;t[5]!==a?(g=function(){return a},t[5]=a,t[6]=g):g=t[6];var h=m(f,p,g),y;return t[7]!==_||t[8]!==h?(y=[h,_],t[7]=_,t[8]=h,t[9]=y):y=t[9],y}function u(e){var t=o("react-compiler-runtime").c(5),n;t[0]!==e?(n=function(){return e},t[0]=e,t[1]=n):n=t[1];var a=r("useStable")(n),l=(s||(s=o("VideoPlayerHooks"))).useInstanceKey(),u,c;t[2]!==a||t[3]!==l?(c=i(l,a),t[2]=a,t[3]=l,t[4]=c):c=t[4],u=c;var d=u,m=d.setValue;return m}function c(e){var t=o("react-compiler-runtime").c(7),n;t[0]!==e?(n=function(){return e},t[0]=e,t[1]=n):n=t[1];var a=r("useStable")(n),l=(s||(s=o("VideoPlayerHooks"))).useInstanceKey(),u,c;t[2]!==a||t[3]!==l?(c=i(l,a),t[2]=a,t[3]=l,t[4]=c):c=t[4],u=c;var d=u,p=d.getSnapshot,_=d.subscribe,f;return t[5]!==a?(f=function(){return a},t[5]=a,t[6]=f):f=t[6],m(_,p,f)}return{setterHook:u,stateHook:l,valueHook:c}};function f(e){var t=o("react-compiler-runtime").c(3),n,r;t[0]!==e?(n=function(){return function(){p.forEach(function(t){t.delete(e)})}},r=[e],t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]),c(n,r)}var g=_,h=f;l.createVideoStateHookImpl_SafeForConcurrentRendering=_,l.createVideoStateHook=g,l.useCleanupVideoStateHooks_INTERNAL=h}),98);
__d("VideoPlayerInstreamAdsStateHooks",["createVideoStateHook"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=o("createVideoStateHook")).createVideoStateHook(),u=s.stateHook,c=s.valueHook,d=[];function m(){return u(d)}function p(){return c(d)}var _=e.createVideoStateHook(),f=_.stateHook,g=_.valueHook,h=null;function y(){return f(h)}function C(){return g(h)}var b=e.createVideoStateHook(),v=b.setterHook,S=b.valueHook,R=!0;function L(){return v(R)}function E(){return S(R)}var k=e.createVideoStateHook(),I=k.stateHook,T=k.valueHook,D="INIT";function x(){return I(D)}function $(){return T(D)}var P=e.createVideoStateHook(),N=P.stateHook,M=P.valueHook,w=!0;function A(){return N(w)}function F(){return M(w)}var O=e.createVideoStateHook(),B=O.stateHook,W=O.valueHook,q=null;function U(){return B(q)}function V(){return W(q)}var H=e.createVideoStateHook(),G=H.stateHook,z=null;function j(){return G(z)}var K=e.createVideoStateHook(),Q=K.stateHook,X=null;function Y(){return Q(X)}var J=e.createVideoStateHook(),Z=J.stateHook,ee=null;function te(){return Z(ee)}var ne=e.createVideoStateHook(),re=ne.stateHook,oe=null;function ae(){return re(oe)}var ie=e.createVideoStateHook(),le=ie.stateHook,se=0;function ue(){return le(se)}var ce=e.createVideoStateHook(),de=ce.stateHook,me=!1;function pe(){return de(me)}var _e=e.createVideoStateHook(),fe=_e.stateHook,ge=_e.valueHook,he=null;function ye(){return fe(he)}function Ce(){return ge(he)}var be=e.createVideoStateHook(),ve=be.stateHook,Se=be.valueHook,Re=null;function Le(){return ve(Re)}function Ee(){return Se(Re)}function ke(){var e=$();return e==="STARTING_INDICATOR"||e==="START"||e==="START_AD"||e==="PLAY_NI_VIDEO"}l.useInstreamAdsMidRollsState=m,l.useInstreamAdsMidRollsValue=p,l.useInstreamAdsPostRollState=y,l.useInstreamAdsPostRollValue=C,l.useInstreamAdsPostRollEndedOrSkippedStateSetter=L,l.useInstreamAdsPostRollEndedOrSkippedStateValue=E,l.useInstreamAdsState=x,l.useInstreamAdsStateValue=$,l.useInstreamAdsIsEmptyState=A,l.useInstreamAdsIsEmptyStateValue=F,l.useInstreamAdsCurrentInsertionState=U,l.useInstreamAdsCurrentInsertionStateValue=V,l.useStartIndicatorBeginningTimeState=j,l.useAdBreaksTimeOffsetBeginningState=Y,l.useInstreamAdsExtraFieldsState=te,l.useInstreamAdsHideAdBehaviorState=ae,l.useUnifiedSchedulerLastFetchTimeState=ue,l.useWaitingForAdFetchState=pe,l.useInstreamAdsFeedContextCardState=ye,l.useInstreamAdsFeedContextCardStateValue=Ce,l.useInstreamAdsFullScreenContextCardState=Le,l.useInstreamAdsFullScreenContextCardStateValue=Ee,l.useInstreamAdsIsStart=ke}),98);
__d("VideoPlayerInteractionOverlay.react",["VideoPlayerHooks","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d={hiddenCursor:{cursor:"xjfk50j",$$css:!0},pointer:{cursor:"x1ypdohk",$$css:!0},root:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(13),a=t.children,i=t.pressInteraction,l=t.ref,s=t.style,m=t.xstyle,p=i==null?void 0:i.handler,_=i==null?void 0:i.onPressStart,f=i==null?void 0:i.onMouseEnter,g=i==null?void 0:i.onMouseLeave,h=(u||(u=o("VideoPlayerHooks"))).useIsFullscreen(),y=u.useIsMouseIdle(),C=!!p&&d.pointer,b=h&&y&&d.hiddenCursor,v;n[0]!==C||n[1]!==b||n[2]!==m?(v=(e||(e=r("stylex")))(d.root,C,b,m),n[0]=C,n[1]=b,n[2]=m,n[3]=v):v=n[3];var S;return n[4]!==a||n[5]!==f||n[6]!==g||n[7]!==p||n[8]!==_||n[9]!==l||n[10]!==s||n[11]!==v?(S=c.jsx("div",{className:v,onClick:p,onMouseEnter:f,onMouseLeave:g,onPointerDown:_,ref:l,role:"presentation",style:s,children:a}),n[4]=a,n[5]=f,n[6]=g,n[7]=p,n[8]=_,n[9]=l,n[10]=s,n[11]=v,n[12]=S):S=n[12],S}var p=m;l.VideoPlayerInteractionOverlay=p}),98);
__d("VideoPlayerPlayButton.react",["fbt","ix","CometImage.react","CometPressable.react","CometTrackingNodeProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){switch(e){case"LARGE":return u("352839");case"MEDIUM":return u("101640");case"SMALL":return u("354763")}}function m(e){var t=o("react-compiler-runtime").c(13),n=e.iconSize,a=e.isVisible,i=e.onClick,l=n===void 0?"LARGE":n,u;t[0]!==l?(u=d(l),t[0]=l,t[1]=u):u=t[1];var m;t[2]!==u?(m=c.jsx(r("CometImage.react"),{src:u}),t[2]=u,t[3]=m):m=t[3];var p=m,_;t[4]!==p||t[5]!==i?(_=i!=null?c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:592,children:c.jsx(r("CometPressable.react"),{display:"inline",label:s._(/*BTDS*/"Play video"),onPress:i,overlayDisabled:!0,testid:void 0,children:p})}):p,t[4]=p,t[5]=i,t[6]=_):_=t[6];var f=_,g;t[7]!==l||t[8]!==a?(g={0:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},8:{className:"xy75621 xafmxuu x14z9mp xat24cr x1ob4rv2 xni59qk x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},4:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},12:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},2:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},10:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},6:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},14:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},1:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},9:{className:"xy75621 xafmxuu x14z9mp xat24cr x1ob4rv2 xni59qk x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},5:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},13:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},3:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},11:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},7:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},15:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"}}[(l==="LARGE")<<3|(l==="MEDIUM")<<2|(l==="SMALL")<<1|!a<<0],t[7]=l,t[8]=a,t[9]=g):g=t[9];var h;return t[10]!==f||t[11]!==g?(h=c.jsx("i",babelHelpers.extends({},g,{children:f})),t[10]=f,t[11]=g,t[12]=h):h=t[12],h}l.default=m}),226);
__d("VideoPlayerSmallPlayButton.react",["fbt","CometImage.react","CometPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.isVisible,a=e.onClick,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=u.jsx(r("CometImage.react"),{src:"/images/video/play_48dp.png"}),t[0]=i):i=t[0];var l=i,c;t[1]!==a?(c=a!=null?u.jsx(r("CometPressable.react"),{display:"inline",label:s._(/*BTDS*/"Play video"),onPress:a,overlayDisabled:!0,children:l}):l,t[1]=a,t[2]=c):c=t[2];var d=c,m;t[3]!==n?(m={0:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xsdox4t xbudbmw xs9mwh0 x14z9mp xat24cr xwqyzqf x1hc1fzr x10l6tqk xwa60dl x1useyqa"},1:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xsdox4t xbudbmw xs9mwh0 x14z9mp xat24cr xwqyzqf x10l6tqk xwa60dl x1useyqa xg01cxk xlshs6z"}}[!n<<0],t[3]=n,t[4]=m):m=t[4];var p;return t[5]!==d||t[6]!==m?(p=u.jsx("i",babelHelpers.extends({},m,{children:d})),t[5]=d,t[6]=m,t[7]=p):p=t[7],p}l.default=c}),226);
__d("formatDurationSeconds",["fbt","padNumber"],(function(t,n,r,o,a,i,l,s){function e(e){var t=Math.floor(e/3600),n=Math.floor(e/60%60),o=Math.floor(e%60);return t?s._(/*BTDS*/"{hours}:{minutes}:{seconds}",[s._param("hours",t),s._param("minutes",r("padNumber")(n,2)),s._param("seconds",r("padNumber")(o,2))]):s._(/*BTDS*/"{minutes}:{seconds}",[s._param("minutes",n),s._param("seconds",r("padNumber")(o,2))])}l.default=e}),226);
__d("VideoPlayerTimeIndicator.react",["FDSText.react","formatDurationSeconds","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.shouldCenterSelf,a=e.timestampSec,i=n===!0?"var(--always-black)":"var(--always-dark-overlay)",l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l="x18l40ae xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1wa3icf x123j3cw x1gabggj xs9asl8 xaso8d8 x10l6tqk xuxw1ft",t[0]=l):l=t[0];var u;t[1]!==i?(u={backgroundColor:i},t[1]=i,t[2]=u):u=t[2];var c;t[3]!==a?(c=r("formatDurationSeconds")(Math.round(a)),t[3]=a,t[4]=c):c=t[4];var d;t[5]!==c?(d=s.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"body4",children:c}),t[5]=c,t[6]=d):d=t[6];var m;t[7]!==u||t[8]!==d?(m=s.jsx("div",{className:l,style:u,children:d}),t[7]=u,t[8]=d,t[9]=m):m=t[9];var p=m,_;return t[10]!==n||t[11]!==p?(_=n===!0?s.jsx("div",{className:"x78zum5 xl56j7k x1n2onr6",children:p}):p,t[10]=n,t[11]=p,t[12]=_):_=t[12],_}l.default=u}),98);
__d("VideoPlayerUserInteractionCounter",["FBLogger","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t,n){var a=o("react-compiler-runtime").c(12),i=d(e),l,s;a[0]!==e?(l=function(){if(e!==i.current)throw r("FBLogger")("comet_video_player").mustfixThrow("User interaction name should not change between renders ('%s' -> '%s').",i.current,e)},s=[e],a[0]=e,a[1]=l,a[2]=s):(l=a[1],s=a[2]),c(l,s);var u=d(n),m,p;a[3]!==n?(m=function(){u.current=n},p=[n],a[3]=n,a[4]=m,a[5]=p):(m=a[4],p=a[5]),c(m,p);var _=r("usePrevious")(t),f=d(!1),g,h;a[6]!==t||a[7]!==_?(g=function(){var e=i.current,n=u.current;n&&(_===null||t!==_)&&(t?(f.current=!0,n({name:e,type:"started"})):_!==null&&(f.current=!1,n({name:e,type:"ended"})))},h=[t,_],a[6]=t,a[7]=_,a[8]=g,a[9]=h):(g=a[8],h=a[9]),c(g,h);var y,C;a[10]===Symbol.for("react.memo_cache_sentinel")?(y=function(){var e=i.current,t=u.current;return function(){t&&f.current&&t({name:e,type:"ended"})}},C=[],a[10]=y,a[11]=C):(y=a[10],C=a[11]),c(y,C)}function _(){var e=o("react-compiler-runtime").c(4),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Set,e[0]=t):t=e[0];var n=d(t),r=m(0),a=r[0],i=r[1],l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=function(t){var e=n.current;t.type==="started"||t.type==="happening"?(e.add(t.name),i(e.size)):t.type==="ended"&&(e.delete(t.name),i(e.size))},e[1]=l):l=e[1];var s=l,u;return e[2]!==a?(u={ongoingInteractionsCount:a,onUserInteraction:s},e[2]=a,e[3]=u):u=e[3],u}l.useVideoPlayerUserInteraction=p,l.useVideoPlayerUserInteractionCounter=_}),98);
__d("VideoPlayerWithLiveVideoInterruptedOverlay.react",["fbt","FDSLoadingAnimation.react","FDSTextPairing.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(){var e=o("react-compiler-runtime").c(3),t=(u||(u=o("VideoPlayerHooks"))).useStreamInterrupted(),n=u.useIsLiveRewindActive();if(!t||n)return null;var a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy"},e[0]=a):a=e[0];var i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=s._(/*BTDS*/"The broadcast is waiting for a signal. It should resume shortly."),e[1]=i):i=e[1];var l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:c.jsxs("div",babelHelpers.extends({},a,{children:[c.jsx("div",{children:c.jsx(r("FDSTextPairing.react"),{body:i,bodyColor:"white",headline:s._(/*BTDS*/"Waiting for Live Video Signal"),headlineColor:"white",level:2,textAlign:"center"})}),c.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:c.jsx(r("FDSLoadingAnimation.react"),{size:36})})]}))}),e[2]=l):l=e[2],l}l.default=d}),226);
__d("useFeedClickEventHandler",["react","react-compiler-runtime","useStoryClickEventLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e,t){var n=o("react-compiler-runtime").c(4),a=r("useStoryClickEventLogger")(),i;return n[0]!==t||n[1]!==a||n[2]!==e?(i=function(r){e&&e(r);var n=r.type;if(n==="click"||n==="contextmenu"||n==="mousedown"&&typeof r.button=="number"&&(r.button===1||r.button===2)||n==="keydown"&&(r.key==="Enter"||r.key===" ")){var o=typeof r.button=="number"?r.button:0;a(r.timeStamp,o,t)}},n[0]=t,n[1]=a,n[2]=e,n[3]=i):i=n[3],i}l.default=u}),98);
__d("usePlayerOriginRouteTracePolicy",["CometNotificationsRootContext","CometRouteRenderType","react","useCometRouteTracePolicy","useCometRouterState","useParentRoute","useRoutePassthroughProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e,t=s(r("CometNotificationsRootContext")),n=t.isNotificationsRoute,a=r("useCometRouteTracePolicy")(),i=o("CometRouteRenderType").useIsPushView(),l=r("useParentRoute")(),u=r("useCometRouterState")(),c=r("useRoutePassthroughProps")();if((c==null?void 0:c.isARLTW)===!0)return"comet.watch.arltw";var d=a==="comet.videos.tahoe",m=a==="comet.stories.viewer",p=a==="comet.reels.home"||a==="comet.reels.unified.player";if(i){if(d)return"unknown";if(m)return a;if(p&&(l==null?void 0:l.tracePolicy)==null&&u!=null){var _,f=u.main,g=u.pushViewStack,h=g&&g.length>1?g[g.length-2]:f,y=h.route;return(_=y.tracePolicy)!=null?_:a}}return n&&!d?a:(e=l==null?void 0:l.tracePolicy)!=null?e:a}l.default=u}),98);
__d("useRelayClientStateWithLocalStorage",["CometRelay","FBLogger","WebStorage","react","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=new Set;function p(t,n,a,i){var l=m.has(n),s=o("CometRelay").useRelayEnvironment(),u=r("useStable")((e||(e=r("WebStorage"))).getLocalStorage),p=r("useStable")(function(){if(l||u==null)return i;var e=u.getItem(n);try{return e==null||e===""?i:JSON.parse(e)}catch(e){return i}}),_=c(function(e){o("CometRelay").commitLocalUpdate(s,function(r){var o=r.get(t);o!=null&&o.getValue(a)!==e&&(o.setValue(e,a),m.add(n))})},[s,a,t,n]);return d(function(){if(u!=null&&l){var e=JSON.stringify(i);if(e!=null)try{u.setItem(n,e)}catch(e){e!=null&&typeof e=="object"&&e.code===22&&u.clear();var t=r("FBLogger")("use_local_storage");e instanceof Error&&(t=t.catching(e)),t.mustfix("Cannot save to local storage.")}}},[n,l,u,i]),[l?i:p,_]}l.useRelayClientStateWithLocalStorage=p}),98);
__d("useSelectedLatencySetting",["react-compiler-runtime","useRelayClientStateWithLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e="_video_LiveVideoLatencyMenuContextProvider_selected_latency_setting";function s(e){if(e==null)return null;switch(e){case"low":case"normal":return e;default:return null}}function u(t,n){var r=o("react-compiler-runtime").c(5),a;if(r[0]!==n){var i;a=(i=s(n))!=null?i:"normal",r[0]=n,r[1]=a}else a=r[1];var l=o("useRelayClientStateWithLocalStorage").useRelayClientStateWithLocalStorage(t,e,"selected_latency_setting",a),u=l[0],c=l[1],d;return r[2]!==u||r[3]!==c?(d=[u,c],r[2]=u,r[3]=c,r[4]=d):d=r[4],d}l.default=u}),98);
__d("useVideoPlayerAvailableCaptionsLocalesFromRelay_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video",selections:[{alias:null,args:null,concreteType:"VideoCaptionLocale",kind:"LinkedField",name:"video_available_captions_locales",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"localized_creation_method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"locale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"localized_language",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"localized_country",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerAvailableCaptionsLocalesFromRelay",["CometRelay","react","react-compiler-runtime","useVideoPlayerAvailableCaptionsLocalesFromRelay_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var r=o("react-compiler-runtime").c(2),a=o("CometRelay").useFragment(e!==void 0?e:e=n("useVideoPlayerAvailableCaptionsLocalesFromRelay_video.graphql"),t);a==null||a.video_available_captions_locales;var i,l;if(r[0]!==(a==null?void 0:a.video_available_captions_locales)){var s;l=a==null||(s=a.video_available_captions_locales)==null?void 0:s.map(d),r[0]=a==null?void 0:a.video_available_captions_locales,r[1]=l}else l=r[1];i=l;var u=i;return u}function d(e){return{captionsUrl:e.captions_url,locale:e.locale,localizedCountry:e.localized_country,localizedCreationMethod:e.localized_creation_method,localizedLanguage:e.localized_language}}l.default=c}),98);
__d("useVideoPlayerHasStartedPlayingAtLeastOnce",["VideoPlayerHooks","createVideoStateHook","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.stateHook;function m(){var e=o("react-compiler-runtime").c(4),t=d(!1),n=t[0],r=t[1],a=(s||(s=o("VideoPlayerHooks"))).usePlaying(),i,l;return e[0]!==a||e[1]!==r?(i=function(){a&&r(!0)},l=[a,r],e[0]=a,e[1]=r,e[2]=i,e[3]=l):(i=e[2],l=e[3]),u(i,l),n}l.default=m}),98);
__d("useVideoPlayerBigPlayButtonOverlay",["VideoPlayerHooks","VideoPlayerPlayButton.react","VideoPlayerSmallPlayButton.react","react","react-compiler-runtime","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(13),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.buttonSize,l=a.forceVisible,c=a.overrideInteraction,d=a.shouldUnmute,m=i===void 0?"large":i,p=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),_=(s||(s=o("VideoPlayerHooks"))).usePaused(),f=s.useLastMuteReason(),g=s.useController(),h;t[2]!==g||t[3]!==f||t[4]!==d?(h=function(){g.play("user_initiated"),d===!0&&f!=="user_initiated"&&g.setMuted(!1,"product_initiated")},t[2]=g,t[3]=f,t[4]=d,t[5]=h):h=t[5];var y=h,C=c!=null?c.handler:y,b=l===!0||l===!1?l:!p&&_,v;t[6]!==b||t[7]!==m||t[8]!==C?(v=m==="small"?u.jsx(r("VideoPlayerSmallPlayButton.react"),{isVisible:b,onClick:C}):u.jsx(r("VideoPlayerPlayButton.react"),{isVisible:b,onClick:C}),t[6]=b,t[7]=m,t[8]=C,t[9]=v):v=t[9];var S=v,R;return t[10]!==S||t[11]!==b?(R={bigPlayButtonElement:S,bigPlayButtonIsVisible:b},t[10]=S,t[11]=b,t[12]=R):R=t[12],R}l.default=d}),98);
__d("useVideoPlayerControllerSubscriptionHavingController",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e,t){var n=o("react-compiler-runtime").c(9),r;n[0]!==e||n[1]!==t?(r=function(){return t(e,null)},n[0]=e,n[1]=t,n[2]=r):r=n[2];var a=d(r),i=a[0],l=a[1],s=c(t),m,p;n[3]!==t?(m=function(){s.current=t},p=[t],n[3]=t,n[4]=m,n[5]=p):(m=n[4],p=n[5]),u(m,p);var _,f;return n[6]!==e?(_=function(){l(function(t){return s.current(e,t)});var t=e.subscribe(function(){l(function(t){return s.current(e,t)})});return function(){t.remove()}},f=[e],n[6]=e,n[7]=_,n[8]=f):(_=n[7],f=n[8]),u(_,f),i}l.default=m}),98);
__d("useVideoPlayerControllerSubscription",["VideoPlayerHooks","useVideoPlayerControllerSubscriptionHavingController"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return r("useVideoPlayerControllerSubscriptionHavingController")((e||(e=o("VideoPlayerHooks"))).useController(),t)}l.default=s}),98);/*FB_PKG_DELIM*/
__d("BaseTypeaheadInMemoryListDataCache",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=[]}var t=e.prototype;return t.clear=function(){this.$1=[]},t.get=function(t){var e=this.$1.find(function(e){return e.key===t});return e?e.value:null},t.has=function(t){return this.$1.some(function(e){return e.key===t})},t.set=function(t,n){var e=this.$1.findIndex(function(e){return e.key===t});if(e===-1){this.$1.push({key:t,value:n});return}this.$1[e]={key:t,value:n}},t.remove=function(t){var e=this.$1.findIndex(function(e){return e.key===t});this.$1.splice(e,1)},t.values=function(){return this.$1.map(function(e){return e.value})},e})();i.default=e}),66);
__d("CometAddTypeaheadRecentSearchMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9990530167705749"}),null);
__d("CometAddTypeaheadRecentSearchMutation.graphql",["CometAddTypeaheadRecentSearchMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SearchTypeaheadAddRecentSearchResponsePayload",kind:"LinkedField",name:"search_typeahead_add_recent_search",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometAddTypeaheadRecentSearchMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometAddTypeaheadRecentSearchMutation",selections:t},params:{id:n("CometAddTypeaheadRecentSearchMutation_facebookRelayOperation"),metadata:{},name:"CometAddTypeaheadRecentSearchMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("RelayModernOrCometRelay",["cr:1012418"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1012418")}),98);
__d("CometAddTypeaheadRecentSearchMutation",["CometAddTypeaheadRecentSearchMutation.graphql","RelayModernOrCometRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometAddTypeaheadRecentSearchMutation.graphql");function u(e){var t=e.onBeforeCommitMutation,n=e.onError,o=e.onSuccess,a=e.relayEnvironment,i=e.searchScopeEntityID,l=e.selectedID,u=e.selectedText,c=e.selectedType,d=e.source,m=e.stsDirectNavType,p=e.stsDisambiguationType,_=e.stsHighConfidenceSource,f=e.userID,g=e.userInput;t&&t(),r("RelayModernOrCometRelay").commitMutation(a,{mutation:s,onCompleted:function(t,r){r&&r.length?n&&n(new Error("Payload errors while executing `addTypeaheadRecentSearchMutation`.")):o&&o(t)},onError:n,variables:{input:babelHelpers.extends({},f!=null?{actor_id:f}:null,{search_scope_entity_id:i,selected_id:l,selected_text:u,selected_type:c,source:d,sts_direct_nav_type_for_graphql:m,sts_disambiguation_type_for_graphql:p,sts_high_confidence_source_for_graphql:_,user_input:g})}})}l.commit=u}),98);
__d("CometDeleteRecentSearchMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9360833174026215"}),null);
__d("CometDeleteRecentSearchMutation.graphql",["CometDeleteRecentSearchMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SearchTypeaheadDeleteRecentResponsePayload",kind:"LinkedField",name:"search_typeahead_delete_recent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometDeleteRecentSearchMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometDeleteRecentSearchMutation",selections:t},params:{id:n("CometDeleteRecentSearchMutation_facebookRelayOperation"),metadata:{},name:"CometDeleteRecentSearchMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometDeleteRecentSearchMutation",["CometDeleteRecentSearchMutation.graphql","RelayModernOrCometRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometDeleteRecentSearchMutation.graphql");function u(e){var t=e.onBeforeCommitMutation,n=e.onError,o=e.onSuccess,a=e.relayEnvironment,i=e.searchEntityType,l=e.searchText,u=e.userID;t&&t(),r("RelayModernOrCometRelay").commitMutation(a,{mutation:s,onCompleted:function(t,r){r&&r.length?n&&n(new Error("Payloads error while executing `deleteSearchMutation`.")):o&&o(t)},onError:n,variables:{input:babelHelpers.extends({},u!=null?{actor_id:u}:null,{search_entity_type:i,search_text:l})}})}l.commit=u}),98);
__d("CometSearchBootstrapKeywordsDataSourceQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"first"}],t=[{kind:"Variable",name:"first",variableName:"first"}],n={alias:null,args:null,kind:"ScalarField",name:"keyword_text",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"item_logging_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"item_logging_info",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},u=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},i,l,s],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[l,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},a,s],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TypeaheadBadgeInfo",kind:"LinkedField",name:"badge_info",plural:!1,selections:[{alias:"badge_text",args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],c={alias:null,args:null,concreteType:"SearchTypeaheadSuggestionKeys",kind:"LinkedField",name:"suggestion_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keys",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_key",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometSearchBootstrapKeywordsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:t,concreteType:"BootstrapKeywordsConnection",kind:"LinkedField",name:"bootstrap_keywords",plural:!1,selections:[{alias:null,args:null,concreteType:"BootstrapKeywordsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BootstrapResult",kind:"LinkedField",name:"node",plural:!1,selections:[n,r,o,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:u,args:null,argumentDefinitions:[]}],storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometSearchBootstrapKeywordsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:t,concreteType:"BootstrapKeywordsConnection",kind:"LinkedField",name:"bootstrap_keywords",plural:!1,selections:[{alias:null,args:null,concreteType:"BootstrapKeywordsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BootstrapResult",kind:"LinkedField",name:"node",plural:!1,selections:[n,r,o,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:u,storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"29156638353980166",metadata:{},name:"CometSearchBootstrapKeywordsDataSourceQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"InlineDataFragment",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo"};a.exports=e}),null);
__d("getSearchCometKeywordDataSourceStructuredSuggestionKey",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o;if(((t=e.direct_nav_result)==null?void 0:t.ent_id)!=null){var a;return"dir_nav_sts:"+((a=e.direct_nav_result)==null?void 0:a.ent_id)}if(((n=e.high_confidence_result)==null?void 0:n.hcm_id)!=null){var i;return"hc_sts:"+((i=e.high_confidence_result)==null?void 0:i.hcm_id)}return((r=e.disambiguation_result)==null?void 0:r.title)!=null&&((o=e.disambiguation_result)==null||(o=o.disambiguation_info_list[0])==null?void 0:o.type)!=null?e.disambiguation_result.disambiguation_info_list[0].type+":"+e.disambiguation_result.title:null}i.default=e}),66);
__d("getSearchCometKeywordDataSourceStructuredInfoForEntry",["CometRelay","getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql","getSearchCometKeywordDataSourceStructuredSuggestionKey"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a,i=t.structuredTypeaheadInfo;if(i==null)return{entryKey:null,extraLoggingInfo:null,label:null,markers:[],structuredInfo:null};var l=o("CometRelay").readInlineData(e!==void 0?e:e=n("getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql"),i),s=l.badge_info,u=l.direct_nav_result,c=l.disambiguation_result,d=l.high_confidence_result,m=[],p,_,f;if(u!=null){m=["direct_nav"];var g=u.ent_id,h=u.entity_type,y=u.img_url,C=u.link_url,b=u.snippet,v=u.title,S=u.type;f=v,p={direct_nav_result:{ent_id:g,entity_type:h,img_url:y,link_url:C,snippet:b,title:v,type:S}},_={stsDirectNavEntityID:g,stsDirectNavEntityType:h,stsDirectNavType:S}}if(d!=null){m=["high_confidence"];var R=d.hcm_id,L=d.picture_url,E=d.snippet,k=d.source_as_enum,I=d.text;f=I,p={high_confidence_result:{hcm_id:R,picture_url:L,snippet:E,source_as_enum:k,text:I}},_={stsHighConfidenceID:R,stsHighConfidenceSource:k}}if(c!=null){m=["disambiguation"];var T=c.disambiguation_info_list,D=c.title;f=D,p={disambiguation_result:{disambiguation_info_list:T,title:D}},_={stsDisambiguationType:T[0].type}}return{badgeSnippet:(a=s==null?void 0:s.badge_text)!=null?a:void 0,entryKey:p!=null?r("getSearchCometKeywordDataSourceStructuredSuggestionKey")(p):null,extraLoggingInfo:_,label:f,markers:m,structuredInfo:p}}l.default=s}),98);
__d("CometSearchBootstrapKeywordsDataSource.query",["CometSearchBootstrapKeywordsDataSourceQuery.graphql","FBLogger","filterNulls","getSearchCometKeywordDataSourceStructuredInfoForEntry"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometSearchBootstrapKeywordsDataSourceQuery.graphql");function u(e){var t,n;if(!e)return[];var o=e.viewer,a=((t=o==null||(n=o.bootstrap_keywords)==null?void 0:n.edges)!=null?t:[]).map(function(e){return e.node}).filter(Boolean);return r("filterNulls")(a.map(function(e){var t,n=e.item_logging_id,o=e.item_logging_info,a=e.keyword_text,i=e.sts_info,l=e.suggestion_keys;if(a==null)return r("FBLogger")("search").mustfix("Cannot have TA bootstrap entry without keyword_text"),null;var s=r("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:i}),u=s.badgeSnippet,c=s.entryKey,d=s.extraLoggingInfo,m=s.label,p=s.markers,_=s.structuredInfo,f=l!=null?l:{},g=f.default_key,h=f.keys,y=f.tier;return{key:(t=c!=null?c:_&&(l==null?void 0:l.default_key))!=null?t:a,label:m!=null?m:a,metaData:{logging:babelHelpers.extends({},d,{loggingID:n!=null?n:"",loggingInfo:o}),markers:new Set(["bootstrap","keyword"].concat(p))},rawData:{badgeSnippet:u,structuredInfo:_,suggestion_keys:y!=null?{default_key:g,keys:h,tier:y}:null},subtype:"bootstrap",type:"entry"}}))}l.query=s,l.normalize=u}),98);
__d("CometSearchBootstrapKeywordsDataSource",["BaseTypeaheadDataCacheProvider","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadInMemoryMapDataCache","BaseTypeaheadPayloadDecoratorAddLimit","CometSearchBootstrapKeywordsDataSource.query","baseTypeaheadStartsWithMatchBuilder","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.limit,n=e.queryVariables,a=e.relayEnvironment;this.$2=new(r("BaseTypeaheadDataCacheProvider"))({cache:new(r("BaseTypeaheadInMemoryMapDataCache")),matchBuilder:r("baseTypeaheadStartsWithMatchBuilder")}),this.$3=t;var i=new(r("BaseTypeaheadDataProviderQueryVariablesBuilder"))(function(){return function(){return n}});this.$1=new(r("BaseTypeaheadDataProvider"))({query:o("CometSearchBootstrapKeywordsDataSource.query").query,queryVariablesBuilder:i,relayEnvironment:a})}var t=e.prototype;return t.bootstrap=function(){var e=this;r("promiseDone")(this.$1.fetch({query:""}).then(function(e){var t=e.response;return o("CometSearchBootstrapKeywordsDataSource.query").normalize(t)}).then(function(t){e.$2.clear(),e.$2.add(t,null)}))},t.fetchCache=function(t){var e=t.query,n=this.$2.match(e),o=r("BaseTypeaheadPayloadDecoratorAddLimit")(this.$3);return o({entries:n,params:t})},t.clear=function(){this.$2.clear()},t.removeEntriesByEntID=function(t){var e=this.$2.values();for(var n of e){var r;t===((r=n.rawData.structuredInfo)==null||(r=r.direct_nav_result)==null?void 0:r.ent_id)&&this.$2.remove(n)}},e})();l.default=e}),98);
__d("CometSearchKeywordDataSourceQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24756542223987990"}),null);
__d("CometSearchKeywordDataSourceQuery.graphql",["CometSearchKeywordDataSourceQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"query"}],t=[{kind:"Variable",name:"query",variableName:"query"}],r={alias:"name",args:null,kind:"ScalarField",name:"text",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"logging_id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"logging_info",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},c=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},l,s,u],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[s,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},i,u],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TypeaheadBadgeInfo",kind:"LinkedField",name:"badge_info",plural:!1,selections:[{alias:"badge_text",args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],d={alias:null,args:null,concreteType:"SearchTypeaheadSuggestionKeys",kind:"LinkedField",name:"suggestion_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keys",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_key",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometSearchKeywordDataSourceQuery",selections:[{alias:null,args:t,concreteType:"KeywordsSearchSuggestionSet",kind:"LinkedField",name:"search_keywords_suggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsConnection",kind:"LinkedField",name:"suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KeywordSuggestionUnit",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,a,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"structured_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:c,args:null,argumentDefinitions:[]}],storageKey:null},d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometSearchKeywordDataSourceQuery",selections:[{alias:null,args:t,concreteType:"KeywordsSearchSuggestionSet",kind:"LinkedField",name:"search_keywords_suggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsConnection",kind:"LinkedField",name:"suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KeywordSuggestionUnit",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,a,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"structured_info",plural:!1,selections:c,storageKey:null},d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("CometSearchKeywordDataSourceQuery_facebookRelayOperation"),metadata:{},name:"CometSearchKeywordDataSourceQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("CometSearchKeywordDataSource.query",["CometSearchKeywordDataSourceQuery.graphql","cometUniqueID","getSearchCometKeywordDataSourceStructuredInfoForEntry"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("CometSearchKeywordDataSourceQuery.graphql");function u(e,t){var n,o;if(!e)return[];var a=e.search_keywords_suggestion,i=t.query.request_id,l=((n=a==null||(o=a.suggestions)==null?void 0:o.edges)!=null?n:[]).map(function(e){return e.node}).filter(Boolean),s;try{var u=JSON.parse(t.query.query_text);s=u!=null?u[0]:null}catch(e){}return l.map(function(e){var t,n,o,a=e.logging_id,l=e.logging_info,u=e.name,c=e.structured_info,d=e.suggestion_keys,m=r("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:c}),p=m.badgeSnippet,_=m.entryKey,f=m.extraLoggingInfo,g=m.label,h=m.markers,y=m.structuredInfo,C=d!=null?d:{},b=C.default_key,v=C.keys,S=C.tier;return{key:(t=(n=_!=null?_:y&&(d==null?void 0:d.default_key))!=null?n:u)!=null?t:r("cometUniqueID")(),label:(o=g!=null?g:u)!=null?o:"",metaData:{logging:babelHelpers.extends({},f,{loggingID:a,loggingInfo:l,query:s,sequenceID:i}),markers:new Set(["keyword"].concat(h))},rawData:{badgeSnippet:p,structuredInfo:y,suggestion_keys:S!=null?{default_key:b,keys:v,tier:S}:null},subtype:"keyword",type:"entry"}})}l.query=s,l.normalize=u}),98);
__d("cometSearchKeywordDataSourceQueryVariablesBuilder",[],(function(t,n,r,o,a,i){"use strict";var e=10,l="blended";function s(t){return function(n){var r,o=n.loggingEventTrace,a=n.query,i=t!=null?t:{},s=i.fetch_count,u=i.fetch_mode,c=i.group_id,d=JSON.stringify(c!=null?[{text:"",type:"group",uid:c},a]:[a]);return{query:{fetch_count:s!=null?s:e,fetch_mode:u!=null?u:l,query_text:d,request_id:o==null?void 0:o.sequenceID,session_id:(r=o==null?void 0:o.sessionID)!=null?r:""}}}}i.default=s}),66);
__d("CometSearchKeywordDataSource",["BaseCacheEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadNetworkCacheDataSource","BaseTypeaheadQueryDataCacheProvider","CometSearchKeywordDataSource.query","baseTypeaheadDedupEntriesBuilder","baseTypeaheadLabelSuffixBuilder","cometSearchKeywordDataSourceQueryVariablesBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.dedupe,n=e.onError,a=e.queryVariables,i=e.relayEnvironment,l=new(r("BaseTypeaheadDataProviderQueryVariablesBuilder"))(r("cometSearchKeywordDataSourceQueryVariablesBuilder")).setDefaultVariables(a),s=new(r("BaseTypeaheadDataProvider"))({onError:n,query:o("CometSearchKeywordDataSource.query").query,queryVariablesBuilder:l,relayEnvironment:i});this.$1=new(r("BaseTypeaheadQueryDataCacheProvider"))({dedupe:t!=null?t:r("baseTypeaheadDedupEntriesBuilder")(r("BaseCacheEntryKeyBuilder")),suffixBuilder:function(){return r("baseTypeaheadLabelSuffixBuilder").apply(void 0,arguments)}}),this.$2=new(r("BaseTypeaheadNetworkCacheDataSource"))(s,this.$1,{normalizeFunc:o("CometSearchKeywordDataSource.query").normalize})}var t=e.prototype;return t.fetchCache=function(t){return this.$2.fetchCache(t)},t.fetchNetwork=function(t){return this.$2.fetchNetwork(t)},t.clearQueryCache=function(){this.$1.clear()},e})();l.default=e}),98);
__d("searchCometTypeaheadSubtractSections",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=new Set(e.entries.map(function(e){return e.key}));t.entries=t.entries.filter(function(e){return!n.has(e.key)})}i.default=e}),66);
__d("searchCometTypeaheadMergeSections",["searchCometTypeaheadSubtractSections"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){r("searchCometTypeaheadSubtractSections")(e,t),t.entries=e.entries.concat(t.entries)}l.default=e}),98);
__d("CometSearchRecentDataCacheProvider",["BaseDataEntryLabelKeyBuilder","searchCometTypeaheadMergeSections","searchCometTypeaheadSubtractSections"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.cache,n=e.matchBuilder,o=e.keyBuilder,a=o===void 0?r("BaseDataEntryLabelKeyBuilder"):o;this.$1=t,this.$2=n,this.$3=a}var t=e.prototype;return t.add=function(t,n,o){var e=this;if(o==="network"){this.$1.clear(),[].concat(t).reverse().forEach(function(t){var n=e.$3(t);e.$1.set(n,t)});return}t.forEach(function(t){var n=e.$3(t),o=e.$1.get(n);if(o)if(o.type==="section"&&t.type==="section"){r("searchCometTypeaheadMergeSections")(t,o);return}else e.$1.remove(n);e.$1.set(n,t)})},t.clear=function(){this.$1.clear()},t.remove=function(t){var e=this.$3(t),n=this.$1.get(e);n&&n.type==="section"&&t.type==="section"&&n.entries.length!==0?r("searchCometTypeaheadSubtractSections")(t,n):this.$1.remove(e)},t.match=function(t){var e=this.$2({query:t});return this.$1.values().map(function(e){return babelHelpers.extends({},e)}).reverse().filter(function(t){return t.type==="section"?(t.entries=t.entries.filter(e),!0):e(t)})},t.values=function(){return this.$1.values()},e})();l.default=e}),98);
__d("cometSearchNullStateMatchBuilder",[],(function(t,n,r,o,a,i){"use strict";function e(){return function(e){var t=e.metaData.markers;return t.has("recent")||t.has("nullstate_explore")||t.has("keyword")}}i.default=e}),66);
__d("CometSearchRecentDataSource",["fbt","BaseDataEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadInMemoryListDataCache","BaseTypeaheadNetworkDataSource","CometAddTypeaheadRecentSearchMutation","CometDeleteRecentSearchMutation","CometSearchRecentDataCacheProvider","Promise","cometSearchNullStateMatchBuilder","filterNulls","qex"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(function(){function t(e){var t=e.activityLogURL,n=e.gqlQuery,o=e.limit,a=e.normalize,i=e.options,l=e.queryVariablesBuilderFunction,s=e.relayEnvironment;this.$4=s,this.$5=o,this.$6=l({query:""}).filter,this.$7=t;var u=function(){return l},c=new(r("BaseTypeaheadDataProviderQueryVariablesBuilder"))(u),d=new(r("BaseTypeaheadDataProvider"))({options:i,query:n,queryVariablesBuilder:c,relayEnvironment:this.$4});this.$2=new(r("CometSearchRecentDataCacheProvider"))({cache:new(r("BaseTypeaheadInMemoryListDataCache")),keyBuilder:r("BaseDataEntryKeyBuilder"),matchBuilder:r("cometSearchNullStateMatchBuilder")}),this.$1=new(r("BaseTypeaheadNetworkDataSource"))(d,a)}var a=t.prototype;return a.$8=function(){var e=r("filterNulls")(this.$2.values().map(function(e){return e.type==="section"&&e.subtype==="recent_searches"?e:null}));return e.length!==0?e[0]:null},a.add=function(t,n,r){var e,a,i=r===void 0?{}:r,l=i.onBeforeCommitMutation,s=i.onError,u=i.onSuccess,c=t.metaData,d=this.$8();d!=null?this.$2.add([babelHelpers.extends({},d,{entries:[t]})],""):this.$2.add([t],"");var m=(e=c==null?void 0:c.logging)!=null?e:{},p=m.entityID,_=m.entityType,f=m.searchScopeEntityID,g=m.stsDirectNavEntityID,h=m.stsDirectNavType,y=m.stsDisambiguationType,C=m.stsHighConfidenceID,b=m.stsHighConfidenceSource;o("CometAddTypeaheadRecentSearchMutation").commit({onBeforeCommitMutation:l,onError:s,onSuccess:u,relayEnvironment:this.$4,searchScopeEntityID:f,selectedID:(a=p!=null?p:g)!=null?a:C,selectedText:t.label.toLowerCase(),selectedType:_!=null?_:"keyword",source:n,stsDirectNavType:h,stsDisambiguationType:y,stsHighConfidenceSource:b,userInput:t.label.toLowerCase()})},a.bootstrap=function(){var e,t=(e=r("qex")._("1300"))!=null?e:!1;t&&this.$6==="all"||this.fetchNetwork({query:""})},a.fetchCache=function(t){var e=t.query,n=this.$2.match(e);return{entries:n,params:t}},a.fetchNetwork=function(r){var t=this;return this.$3!=null&&this.$3<this.$5?(e||(e=n("Promise"))).resolve({entries:this.$2.match(r.query),params:r}):this.$1.fetchNetwork(r).then(function(e){var n=e.entries,o=e.params.query;return n!=null&&(n.forEach(function(e){var n=t.$7;["all","group_scoped_search"].includes(t.$6)&&n!=null&&e.type==="section"&&e.subtype==="recent_searches"&&(e.action={label:s._(/*BTDS*/"Edit"),type:"link",url:n})}),t.$3=n.length,t.$2.add(n,o,"network")),{entries:t.$2.match(o),params:r}})},a.remove=function(t,n){var e=n===void 0?{}:n,r=e.onBeforeCommitMutation,a=e.onError,i=e.onSuccess,l=this.$8();l!=null?this.$2.remove(babelHelpers.extends({},l,{entries:[t]})):this.$2.remove(t),o("CometDeleteRecentSearchMutation").commit({onBeforeCommitMutation:r,onError:a,onSuccess:i,relayEnvironment:this.$4,searchText:t.label})},a.clear=function(){this.$3=null;var e=this.$8();if(e==null){this.$2.clear();return}e.entries.length!==0&&this.$2.remove(e)},a.refresh=function(){this.clear(),this.fetchNetwork({query:""})},t})();l.default=u}),226);
__d("CometSearchRecentDataSourceQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"fetch_nullstate"},t={defaultValue:null,kind:"LocalArgument",name:"fetch_recent_searches"},n={defaultValue:null,kind:"LocalArgument",name:"fetch_search_badge"},r={defaultValue:null,kind:"LocalArgument",name:"filter"},o={defaultValue:null,kind:"LocalArgument",name:"first"},a={defaultValue:null,kind:"LocalArgument",name:"scale"},i={defaultValue:null,kind:"LocalArgument",name:"search_null_state_argument"},l={defaultValue:null,kind:"LocalArgument",name:"search_scope_entity_id"},s=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"search_scope_entity_id",variableName:"search_scope_entity_id"}],u={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Profile",abstractKey:"__isProfile"},m=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],p={kind:"InlineFragment",selections:m,type:"Application",abstractKey:null},_={kind:"InlineFragment",selections:m,type:"Event",abstractKey:null},f={kind:"InlineFragment",selections:m,type:"Group",abstractKey:null},g={kind:"InlineFragment",selections:m,type:"Page",abstractKey:null},h={kind:"InlineFragment",selections:m,type:"User",abstractKey:null},y={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},R=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},C,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},b,v,S],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[v,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},C,S],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TypeaheadBadgeInfo",kind:"LinkedField",name:"badge_info",plural:!1,selections:[{alias:"badge_text",args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],L={alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:R,args:null,argumentDefinitions:[]}],storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"item_logging_info",storageKey:null},k={condition:"fetch_search_badge",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBSearchEntityBadge",kind:"LinkedField",name:"search_badge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},b],storageKey:null}]},I=[{kind:"Variable",name:"input",variableName:"search_null_state_argument"}],T={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},D=[T,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"header_text",storageKey:null}],storageKey:null}],x={kind:"InlineFragment",selections:D,type:"XFBSearchNullStateSearchHistoryHeaderRenderingStrategy",abstractKey:null},$={kind:"InlineFragment",selections:D,type:"XFBSearchNullStateGeneralHeaderRenderingStrategy",abstractKey:null},P={alias:null,args:null,kind:"ScalarField",name:"display_text",storageKey:null},N={alias:"suggestion_logging_info",args:null,concreteType:"XFBSearchSuggestionLoggingSuggestion",kind:"LinkedField",name:"logging_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fetch_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logging_info",storageKey:null}],storageKey:null},M={alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:R,storageKey:null};return{fragment:{argumentDefinitions:[e,t,n,r,o,a,i,l],kind:"Fragment",metadata:null,name:"CometSearchRecentDataSourceQuery",selections:[{condition:"fetch_recent_searches",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:s,concreteType:"RecentSearchConnection",kind:"LinkedField",name:"recent_searches",plural:!1,selections:[{alias:null,args:null,concreteType:"RecentSearchEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[u,c],type:"Node",abstractKey:"__isNode"},d,p,_,f,g,h,y,{kind:"InlineFragment",selections:[L,E],type:"GraphSearchQuery",abstractKey:null}],storageKey:null},k],storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"fetch_nullstate",kind:"Condition",passingValue:!0,selections:[{alias:null,args:I,concreteType:"SearchNullStatePage",kind:"LinkedField",name:"search_null_state",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsConnection",kind:"LinkedField",name:"results",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"rendering_strategy",plural:!1,selections:[u,x,$,{kind:"InlineFragment",selections:[T,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"suggestions",plural:!0,selections:[u,{kind:"InlineFragment",selections:[T,P,L,N],type:"XFBSearchNullStateQuerySuggestion",abstractKey:null}],storageKey:null}],storageKey:null}],type:"XFBSearchNullStateListRenderingStrategy",abstractKey:null}],storageKey:null}],type:"XFBSearchNullStateRenderingStrategyResult",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,o,a,l,n,i,e,t],kind:"Operation",name:"CometSearchRecentDataSourceQuery",selections:[{condition:"fetch_recent_searches",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:s,concreteType:"RecentSearchConnection",kind:"LinkedField",name:"recent_searches",plural:!1,selections:[{alias:null,args:null,concreteType:"RecentSearchEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,y,{kind:"InlineFragment",selections:[c],type:"Node",abstractKey:"__isNode"},d,p,_,f,g,h,{kind:"InlineFragment",selections:[M,E],type:"GraphSearchQuery",abstractKey:null}],storageKey:null},k],storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"fetch_nullstate",kind:"Condition",passingValue:!0,selections:[{alias:null,args:I,concreteType:"SearchNullStatePage",kind:"LinkedField",name:"search_null_state",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsConnection",kind:"LinkedField",name:"results",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"rendering_strategy",plural:!1,selections:[u,x,$,{kind:"InlineFragment",selections:[T,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"suggestions",plural:!0,selections:[u,{kind:"InlineFragment",selections:[T,P,M,N],type:"XFBSearchNullStateQuerySuggestion",abstractKey:null}],storageKey:null}],storageKey:null}],type:"XFBSearchNullStateListRenderingStrategy",abstractKey:null}],storageKey:null}],type:"XFBSearchNullStateRenderingStrategyResult",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}]},params:{id:"9481428298650330",metadata:{},name:"CometSearchRecentDataSourceQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("searchCometIsValidRecentSearchEntityType",[],(function(t,n,r,o,a,i){"use strict";var e=["app","application","event","group","page","user"];function l(t){return e.includes(t==null?void 0:t.toLowerCase())}i.default=l}),66);
__d("CometSearchRecentDataSource.query",["fbt","CometSearchRecentDataSourceQuery.graphql","FBLogger","filterNulls","getSearchCometKeywordDataSourceStructuredInfoForEntry","searchCometIsValidRecentSearchEntityType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u={__typename:"XFBSearchNullStateSearchHistoryHeaderRenderingStrategy",key:"recent-searches",result:{header_text:String(s._(/*BTDS*/"Recent searches"))}},c=e!==void 0?e:e=n("CometSearchRecentDataSourceQuery.graphql");function d(e){var t,n;if(!e)return[];var o=r("filterNulls")(((t=(n=e.search_null_state)==null||(n=n.results)==null?void 0:n.edges)!=null?t:[{node:{rendering_strategy:u}}]).map(function(e){var t;return(t=e.node)==null?void 0:t.rendering_strategy})),a=[],i=null;for(var l of o)if(l.__typename!=="%other"){var s=l.key,c=l.result;if(!(c==null||s==null)){var d=c.header_text;if(l.__typename==="XFBSearchNullStateSearchHistoryHeaderRenderingStrategy"&&d!=null){var _,f;a.push({entries:m((_=(f=e.viewer)==null||(f=f.recent_searches)==null?void 0:f.edges)!=null?_:[]),key:s,label:d,subtype:"recent_searches",type:"section"})}else if(l.__typename==="XFBSearchNullStateGeneralHeaderRenderingStrategy"&&d!=null)i={header_text:d,key:s};else if(l.__typename==="XFBSearchNullStateListRenderingStrategy"&&i!=null){var g=i,h=g.header_text,y=g.key;a.push({entries:p(l),key:y,label:h,subtype:"other",type:"section"}),i=null}}}return a}function m(e){return r("filterNulls")(e.map(function(e){var t=e.node,n=e.search_badge;if(t==null)return null;var o=t.__typename,a=t.id,i=t.item_logging_info,l=t.name,s=t.profile_picture,u=t.sts_info,c=t.url,d=r("searchCometIsValidRecentSearchEntityType")(o),m=r("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:u}),p=m.extraLoggingInfo,_=m.label,f=m.markers,g=m.structuredInfo;if(l==null)return r("FBLogger")("search").mustfix("Missing name for recent search data with __typename: %s",o),null;var h=l.toLocaleLowerCase();return{hasSecondaryAction:!0,key:h,label:_!=null?_:l,metaData:{logging:babelHelpers.extends({},p,{entityID:d?a:null,entityType:d&&o!=null?o.toLowerCase():null,loggingInfo:i}),markers:new Set(r("filterNulls")(["recent",d?"entity":null].concat(f)))},rawData:{badgeSnippet:(n==null?void 0:n.enabled)===!0?n.snippet:null,profile:d&&a!=null&&(s==null?void 0:s.uri)!=null&&c!=null?{id:a,profilePictureURL:s.uri,url:c}:void 0,structuredInfo:g},subtype:"recent",type:"entry"}}))}function p(e){var t;if(e.__typename!=="XFBSearchNullStateListRenderingStrategy")return[];var n=(t=e.result)!=null?t:{},o=n.suggestions;return r("filterNulls")((o!=null?o:[]).map(function(e){if(e.__typename!=="XFBSearchNullStateQuerySuggestion")return null;var t=e.display_text,n=e.key,o=e.sts_info,a=e.suggestion_logging_info;if(t==null)return r("FBLogger")("search").mustfix("Missing name for nullstate suggestion search data with __typename: %s",e.__typename),null;if(n==null)return r("FBLogger")("search").mustfix("Missing key for nullstate suggestion search data with __typename: %s",e.__typename),null;var i=r("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:o}),l=i.extraLoggingInfo,s=i.markers,u=i.structuredInfo,c=a!=null?a:{},d=c.fetch_source,m=c.logging_info;return{key:n,label:t,metaData:{logging:babelHelpers.extends({fetchSource:d,loggingInfo:(m!=null?m:[])[0]},l),markers:new Set(new Set(["keyword","nullstate_explore"].concat(s)))},rawData:{structuredInfo:u},subtype:"keyword",type:"entry"}}))}l.query=c,l.normalize=d}),226);
__d("CometSearchRecentDataSourceDispatcherContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext();l.default=u}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react",["fbt","CometPressable.react","CometSearchRecentDataSourceDispatcherContext","FBNucleusCrossFilled20Icon.react","FDSIcon.react","XPlatReactEnvironment","react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext,p=c.useState,_={buttonContainer:{alignItems:"x6s0dn4",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"x1fgtraw",justifyContent:"xl56j7k",width:"xgd8bvy",$$css:!0},buttonContainerActive:{boxShadow:"xpud6h4",outline:"x1a2a7pz xvetz19",$$css:!0}};function f(e){var t=o("react-compiler-runtime").c(15),n=e.entry,a=e.testid,i=m(r("CometSearchRecentDataSourceDispatcherContext")),l=p(!1),c=l[0],d=l[1],f=r("useCometInternalTypeaheadState")(),g=f.highlightedEntry,h=f.secondaryActionHighlighted,y;t[0]!==n||t[1]!==i?(y=function(t){t&&t.type!=="press"&&t.stopPropagation(),d(!0),i==null||i.dispatchRemoveRecentEntry(n)},t[0]=n,t[1]=i,t[2]=y):y=t[2];var C=y,b;t[3]!==n.label?(b=s._(/*BTDS*/"{search_term}, Delete",[s._param("search_term",n.label)]),t[3]=n.label,t[4]=b):b=t[4];var v=b,S=g===n&&h===!0&&_.buttonContainerActive,R;t[5]!==S?(R=[_.buttonContainer,S],t[5]=S,t[6]=R):R=t[6];var L;t[7]!==v||t[8]!==c?(L=u.jsx(r("FDSIcon.react"),{"aria-label":v,color:"secondary",disabled:c,focusable:!1,icon:r("FBNucleusCrossFilled20Icon.react"),size:o("XPlatReactEnvironment").isWeb()?12:20}),t[7]=v,t[8]=c,t[9]=L):L=t[9];var E;return t[10]!==C||t[11]!==R||t[12]!==L||t[13]!==a?(E=u.jsx(r("CometPressable.react"),{dynamicHoverTiltAngle:15,dynamicHoverTranslationPercent:.15,onPress:C,overlayRadius:999,showDynamicHover:!0,testid:void 0,xstyle:R,children:L}),t[10]=C,t[11]=R,t[12]=L,t[13]=a,t[14]=E):E=t[14],E}l.default=f}),226);
__d("CometSearchTypeaheadBaseSurfaceRecentViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadRecentViewItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(9),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==a?(l=u.jsx(r("CometTypeaheadFocusLockRegion.react"),{children:u.jsx(r("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:a,testid:void 0})}),n[3]=a,n[4]=l):l=n[4];var s;return n[5]!==a||n[6]!==i||n[7]!==l?(s=u.jsx(r("CometTypeaheadRecentViewItem.react"),babelHelpers.extends({},i,{entry:a,itemEndContent:l,itemEndContentKeyboardFocusable:!0,testid:void 0})),n[5]=a,n[6]=i,n[7]=l,n[8]=s):s=n[8],s}l.default=c}),98);
__d("getCometSearchTypeaheadStructuredInfoKey",["getSearchCometKeywordDataSourceStructuredSuggestionKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.rawData.structuredInfo;return t==null?null:r("getSearchCometKeywordDataSourceStructuredSuggestionKey")(t)}l.default=e}),98);
__d("CometSearchTypeaheadDefaultEntryComparator",["BaseDataEntryLabelKeyBuilder","FBLogger","getCometSearchTypeaheadStructuredInfoKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("getCometSearchTypeaheadStructuredInfoKey")(e),o=r("getCometSearchTypeaheadStructuredInfoKey")(t);return n!=null&&o!=null?n===o:r("BaseDataEntryLabelKeyBuilder")(e)===r("BaseDataEntryLabelKeyBuilder")(t)}function s(t,n){if(!e(t,n))return r("FBLogger")("search").mustfix("The suggestions are not dupes: %s compared to %s",t.key,n.key),t;var o=r("getCometSearchTypeaheadStructuredInfoKey")(t),a=r("getCometSearchTypeaheadStructuredInfoKey")(n);return o!=null&&a!=null||a!=null?n:t}l.areEntriesDupes=e,l.pickEntryToKeep=s}),98);
__d("CometSearchTypeaheadServerDrivenEntryComparator",["FBLogger","getCometSearchTypeaheadStructuredInfoKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=(t=e.rawData)!=null?t:{},o=n.suggestion_keys;if(o==null)throw r("FBLogger")("search").mustfixThrow("Unexpected missing keys");return o}function s(t,n){var o=e(t),a=o.default_key,i=o.keys,l=e(n),s=l.default_key,u=l.keys;if(i.some(function(e){return u.includes(e)}))return!0;var c=r("getCometSearchTypeaheadStructuredInfoKey")(t),m=r("getCometSearchTypeaheadStructuredInfoKey")(n);return c!=null&&c===m&&d("STS dupe: same STS UI key but no keys overlap",t,n),i.length>0&&u.length>0||a==null||s==null?!1:(a===s&&t.label.toLowerCase()!==n.label.toLowerCase()&&d("STS dupe: same default key but different label",t,n),a.toLowerCase()===s.toLowerCase())}function u(t,n){var r=e(t),o=r.tier,a=e(n),i=a.tier;return o<=i?n:t}function c(t){var n=e(t),r=n.default_key,o=n.keys;return"ui key: "+t.key+", keys: "+(o.join(",")||"empty")+", default key: "+(r!=null?r:"null")+", label: "+t.label}function d(e,t,n){r("FBLogger")("search").warn(e+": ("+c(t)+") vs ("+c(n)+")")}l.areEntriesDupes=s,l.pickEntryToKeep=u}),98);
__d("CometTypeaheadEchoViewItem.react",["CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","FDSText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry","isActive","queryString"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(18),a,i,l,s;n[0]!==t?(a=t.entry,i=t.isActive,s=t.queryString,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var c;n[5]!==a.label||n[6]!==i?(c=u.jsx(o("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:i,label:a.label}),n[5]=a.label,n[6]=i,n[7]=c):c=n[7];var d=String(s),m;n[8]!==d?(m=d.toLowerCase(),n[8]=d,n[9]=m):m=n[9];var p;n[10]!==m?(p=u.jsx(r("FDSText.react"),{numberOfLines:1,type:"body3",children:m}),n[10]=m,n[11]=p):p=n[11];var _;return n[12]!==a||n[13]!==i||n[14]!==l||n[15]!==c||n[16]!==p?(_=u.jsx(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},l,{entry:a,isActive:i,itemStartContent:c,children:p})),n[12]=a,n[13]=i,n[14]=l,n[15]=c,n[16]=p,n[17]=_):_=n[17],_}l.default=c}),98);
__d("CometTypeaheadErrorFallback.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xl56j7k"}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("CometTypeaheadSeeAllViewItem.react",["fbt","CometTypeaheadViewItem.react","FDSIcon.react","FDSMagnifyingGlassFilled16Icon","FDSText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["entry","extraViewItemProps","queryString"],u,c=u||(u=o("react")),d=u.useMemo;function m(t){var n,a,i,l=o("react-compiler-runtime").c(15),s,u,d,m;l[0]!==t?(s=t.entry,u=t.extraViewItemProps,m=t.queryString,d=babelHelpers.objectWithoutPropertiesLoose(t,e),l[0]=t,l[1]=s,l[2]=u,l[3]=d,l[4]=m):(s=l[1],u=l[2],d=l[3],m=l[4]),(n=u)==null||n.placeholderBuilder;var _;_=(a=(i=u)==null?void 0:i.placeholderBuilder)!=null?a:p;var f=_,g;l[5]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("div",{className:"x6s0dn4 xwnonoy x1fmog5m xu25z0z x140muxe xo1y3bh x78zum5 xc9qbxq xl56j7k x14qfxbe",children:c.jsx(r("FDSIcon.react"),{color:"white",icon:r("FDSMagnifyingGlassFilled16Icon"),size:16})}),l[5]=g):g=l[5];var h;l[6]!==f||l[7]!==m?(h=f(m),l[6]=f,l[7]=m,l[8]=h):h=l[8];var y;l[9]!==h?(y=c.jsx(r("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"body3",children:h}),l[9]=h,l[10]=y):y=l[10];var C;return l[11]!==s||l[12]!==d||l[13]!==y?(C=c.jsx(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},d,{entry:s,itemStartContent:g,children:y})),l[11]=s,l[12]=d,l[13]=y,l[14]=C):C=l[14],C}function p(e){return s._(/*BTDS*/"Search for {=m1}",[s._implicitParam("=m1",c.jsx("strong",{children:s._(/*BTDS*/"{query}",[s._param("query",e.toLowerCase())])}))])}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("cometSearchTypeaheadEchoViewItem.resolver",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.metaData.markers;return t.has("echo")?e:null}i.default=e}),66);
__d("cometSearchTypeaheadKeywordViewItem.resolver",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.metaData.markers;return t.has("keyword")?e:null}i.default=e}),66);
__d("cometSearchTypeaheadRecentViewItem.resolver",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.subtype==="recent"?e:null}i.default=e}),66);
__d("cometSearchTypeaheadSeeAllViewItem.resolver",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.metaData.markers;return t.has("see_all")?e:null}i.default=e}),66);
__d("SearchCometTypeaheadViewItemResolver.react",["CometSearchTypeaheadBaseSurfaceRecentViewItem.react","CometTypeaheadEchoViewItem.react","CometTypeaheadKeywordViewItem.react","CometTypeaheadSeeAllViewItem.react","cometSearchTypeaheadEchoViewItem.resolver","cometSearchTypeaheadKeywordViewItem.resolver","cometSearchTypeaheadRecentViewItem.resolver","cometSearchTypeaheadSeeAllViewItem.resolver","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=e.additionalEntryMappings,n=e.seeAllLabelBuilder,o=e.children,a=e.entry,i=e.fallbackViewItem,l=i===void 0?r("CometTypeaheadKeywordViewItem.react"):i,u=s(function(){return[].concat(t!=null?t:[],c({seeAllLabelBuilder:n}))},[t,n]),d=u.find(function(e){var t=e.resolver;return t(a)});if(d){var m=d.viewItem,p=d.viewItemProps;return o(m,p)}return o(l)}function c(e){var t=e.seeAllLabelBuilder;return[{resolver:r("cometSearchTypeaheadEchoViewItem.resolver"),viewItem:r("CometTypeaheadEchoViewItem.react")},{resolver:r("cometSearchTypeaheadSeeAllViewItem.resolver"),viewItem:r("CometTypeaheadSeeAllViewItem.react"),viewItemProps:{placeholderBuilder:t}},{resolver:r("cometSearchTypeaheadRecentViewItem.resolver"),viewItem:r("CometSearchTypeaheadBaseSurfaceRecentViewItem.react")},{resolver:r("cometSearchTypeaheadKeywordViewItem.resolver"),viewItem:r("CometTypeaheadKeywordViewItem.react")}].filter(Boolean)}l.default=u}),98);
__d("XCometGamingVideoControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/gaming/video/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("cometTypeaheadMemoizeEntryKey",["cometUniqueID","memoizeStringOnly"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoizeStringOnly")(function(e){return r("cometUniqueID")()});function s(t){return e(t)}l.default=s}),98);
__d("cometSearchTypeaheadPayloadDecoratorAddEcho",["BaseDataEntryKeyBuilder","cometTypeaheadMemoizeEntryKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.keyBuilder,n=t===void 0?r("BaseDataEntryKeyBuilder"):t,o=e.limit;return function(e){var t=e.entries,a=e.params.query,i=t!=null?t:[],l=i.find(function(e){return n(e).trim().toLowerCase()===a.trim().toLowerCase()})!=null,s=[];if(!l&&i.length<o){var u=r("cometTypeaheadMemoizeEntryKey")(a+"-echo"),c={key:u,label:a,metaData:{markers:new Set(["echo"])},rawData:{type:"echo"}};s.push(c)}return babelHelpers.extends({},e,{entries:[].concat(i,s)})}}l.default=e}),98);
__d("cometSearchTypeaheadPayloadDecoratorAddSeeAll",["cometTypeaheadMemoizeEntryKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.position;return function(e){var n=e.entries,o=e.params.query,a=n!=null?n:[],i=r("cometTypeaheadMemoizeEntryKey")(o+"-see_all"),l={key:i,label:o,metaData:{markers:new Set(["see_all"])},rawData:{type:"see_all"}},s=[];switch(t){case"bottom":s=[].concat(a,[l]);break;case"top":s=[l].concat(a);break}return babelHelpers.extends({},e,{entries:s})}}l.default=e}),98);
__d("cometSearchTypeaheadDecorateMixedPayload",["BaseTypeaheadPayloadDecoratorAddLimit","baseTypeaheadFetchPayloadDecorate","cometSearchTypeaheadPayloadDecoratorAddEcho","cometSearchTypeaheadPayloadDecoratorAddSeeAll"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.excludeSeeAllAndEcho,o=n===void 0?!1:n,a=t.keyBuilder,i=t.limit,l=t.seeAllPosition,s=l===void 0?"bottom":l;return r("baseTypeaheadFetchPayloadDecorate")(e,[r("BaseTypeaheadPayloadDecoratorAddLimit")(i),o?null:r("cometSearchTypeaheadPayloadDecoratorAddEcho")({keyBuilder:a,limit:i}),o?null:r("cometSearchTypeaheadPayloadDecoratorAddSeeAll")({position:s})].filter(Boolean))}l.default=e}),98);
__d("cometSearchTypeaheadPayloadDecoratorApplySectionLimits",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return function(n){for(var r of n.entries){var o=t(r),a=o!=null?e.get(o):null;a!=null&&r.type==="section"&&(r.entries=r.entries.slice(0,a))}return n}}i.default=e}),66);
__d("cometSearchTypeaheadDecorateRecentPayload",["BaseTypeaheadPayloadDecoratorAddLimit","baseTypeaheadFetchPayloadDecorate","cometSearchTypeaheadPayloadDecoratorApplySectionLimits"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.getSectionLimitKey,o=t.limit,a=t.sectionLimits,i=e.entries.every(function(e){return e.type==="section"});return r("baseTypeaheadFetchPayloadDecorate")(e,[i&&a!=null?r("cometSearchTypeaheadPayloadDecoratorApplySectionLimits")(a,n):r("BaseTypeaheadPayloadDecoratorAddLimit")(o)])}l.default=e}),98);
__d("cometSearchTypeaheadDedupeAndLog",["FBLogger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ODS").__setRef("cometSearchTypeaheadDedupeAndLog");function s(e,t,n){var r=new Map,o=[];for(var a of t){var i=r.get(a.key);i!=null?u({caller:n,dupeEntry:a,existingEntry:i,strategy:e}):(r.set(a.key,a),o.push(a))}return o}function u(t){var n=t.caller,o=t.dupeEntry,a=t.existingEntry,i=t.strategy,l=a.metaData.markers,s=o.metaData.markers;r("FBLogger")("search").warn("STS Dupe encountered: "+a.key+" ("+Array.from(l).join("_")+", label: "+a.label+") compared to "+o.key+"\n    ("+Array.from(s).join("_")+", label: "+o.label+")");var u="comet_ta_sts_dupe_v4."+i,c=["react_key_"+(Array.from(l).join("_")||"plain_keyword"),n,"existing_kind_"+Array.from(l).join("_"),"dupe_kind_"+Array.from(s).join("_")].join(".");e.onReady(function(e){e.bumpEntityKey(354,u,c,1)})}l.default=s}),98);
__d("cometSearchTypeaheadSTSDedupeEntries",["CometSearchTypeaheadDefaultEntryComparator","CometSearchTypeaheadServerDrivenEntryComparator","cometSearchTypeaheadDedupeAndLog","filterNulls"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){n===void 0&&(n="bootstrap_and_backend_merge");var r=e.concat(t).every(function(e){return e.rawData.suggestion_keys!=null});return s.apply(void 0,[e,t,n].concat(r?[o("CometSearchTypeaheadServerDrivenEntryComparator").areEntriesDupes,o("CometSearchTypeaheadServerDrivenEntryComparator").pickEntryToKeep]:[o("CometSearchTypeaheadDefaultEntryComparator").areEntriesDupes,o("CometSearchTypeaheadDefaultEntryComparator").pickEntryToKeep]))}function s(e,t,n,a,i){var l=o("CometSearchTypeaheadServerDrivenEntryComparator").areEntriesDupes,s=[],u=new Set(t);for(var c of e)s.push(c);for(var d of t){for(var m=[],p=0;p<s.length;p++){var _=s[p];_!=null&&a(_,d)&&m.push(p)}var f=m[0],g=f!=null?s[f]:null;if(g!=null&&!u.has(g)){var h=i(g,d);s[f]=h;for(var y of m){var C=s[y];C!=null&&C!==h&&C!==i(C,d)&&(s[y]=null)}}else s.push(d)}return r("cometSearchTypeaheadDedupeAndLog")(l?"with_keys":"without_keys",r("filterNulls")(s),n)}l.default=e}),98);
__d("cometSearchTypeaheadSTSDedupeCachedEntries",["cometSearchTypeaheadSTSDedupeEntries","filterNulls"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("cometSearchTypeaheadSTSDedupeEntries")(e.map(function(e){return e.entry}),t.map(function(e){return e.entry}),"query_cache"),o=[].concat(e,t);return r("filterNulls")(n.map(function(e){return o.find(function(t){return t.entry===e})}))}l.default=e}),98);
__d("searchCometTypeaheadGetHighConfidenceResult",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.metaData,n=e.rawData,r=t.markers;if((e.subtype==="keyword"||e.subtype==="recent")&&r.has("high_confidence")){var o,a,i=(o=(a=n.structuredInfo)==null?void 0:a.high_confidence_result)!=null?o:{},l=i.hcm_id,s=i.source_as_enum;if(l!=null&&s!=null)return{id:l,source:s}}}i.default=e}),66);
__d("searchCometTypeaheadGetStsDisambiguation",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.metaData,n=e.rawData,r=t.markers;if(e.subtype==="keyword"&&r.has("disambiguation")){var o,a,i=(o=(a=n.structuredInfo)==null||(a=a.disambiguation_result)==null?void 0:a.disambiguation_info_list[0])!=null?o:{},l=i.type;if(l!=null)return{primary:{type:l}}}}i.default=e}),66);
__d("searchCometTypeaheadPushErrorToast",["fbt","cometPushToast"],(function(t,n,r,o,a,i,l,s){"use strict";function e(){o("cometPushToast").cometPushErrorToast({message:s._(/*BTDS*/"Sorry, something went wrong. Please try again at a later time.")})}l.default=e}),226);
__d("useSearchCometEventEmitterContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(e){var t=s(e);return t==null&&r("FBLogger")("search").mustfix("Missing event emitter context"),t}l.default=u}),98);
__d("searchCometTypeaheadWithRecentDataSourceContext",["CometSearchRecentDataSourceDispatcherContext","SearchCometTypeaheadEventEmitterContext","react","react-compiler-runtime","useCometInternalTypeaheadFetch","useCometInternalTypeaheadStateDispatcher","useSearchCometEventEmitterContext"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onChange","onPressEntry","onSelectFreeformQuery"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useMemo;function _(t,n){var a=n.dataSource,i=n.shouldSubscribeToRecentSearches;function l(n){var l,c=o("react-compiler-runtime").c(28),d,p,_,f,g;c[0]!==n?(d=n.inputRef,p=n.onChange,_=n.onPressEntry,f=n.onSelectFreeformQuery,g=babelHelpers.objectWithoutPropertiesLoose(n,e),c[0]=n,c[1]=d,c[2]=p,c[3]=_,c[4]=f,c[5]=g):(d=c[1],p=c[2],_=c[3],f=c[4],g=c[5]);var h=r("useCometInternalTypeaheadFetch")(),y=h.refetch,C=r("useCometInternalTypeaheadStateDispatcher")(),b=C.dispatchHighlightedEntry,v=(l=r("useSearchCometEventEmitterContext")(r("SearchCometTypeaheadEventEmitterContext")))!=null?l:{},S=v.subscribeToRecentSearchEntryAdded,R,L;c[6]!==S?(R=function(){if(i)return S==null?void 0:S(s)},L=[S],c[6]=S,c[7]=R,c[8]=L):(R=c[7],L=c[8]),m(R,L);var E;c[9]!==f?(E=function(t){var e={hasSecondaryAction:!0,key:t,label:t,metaData:{markers:new Set(["recent"])},rawData:{},subtype:"recent",type:"entry"};a.addRecentEntry(e),f&&f(t)},c[9]=f,c[10]=E):E=c[10];var k=E,I;c[11]!==y?(I=function(t){a.removeRecentEntry(t,{onBeforeCommitMutation:function(){y({source:"cache"})}})},c[11]=y,c[12]=I):I=c[12];var T=I,D;c[13]!==b||c[14]!==_||c[15]!==T?(D=function(t,n){var e,r,o=t.label,i=t.metaData,l=(e=i==null?void 0:i.markers)!=null?e:new Set;if(n===!0&&t.subtype==="recent"){T(t),b({entry:null,secondaryActionHighlighted:null,source:null});return}if(l.has("nullstate_explore")){_&&_(t);return}var s=new Set(["recent"]);l.has("entity")&&s.add("entity"),l.has("direct_nav")&&s.add("direct_nav"),l.has("high_confidence")&&s.add("high_confidence");var u;t.subtype==="recent"||t.subtype==="bootstrap"||t.subtype==="keyword"?u=babelHelpers.extends({},t.rawData,{badgeSnippet:null}):u={};var c=(r=i==null?void 0:i.logging)!=null?r:{},d=c.entityID,m=c.entityType,p=c.loggingInfo,f=c.stsDirectNavEntityID,g=c.stsDirectNavType,h=c.stsDisambiguationType,y=c.stsHighConfidenceID,C=c.stsHighConfidenceSource;a.addRecentEntry({hasSecondaryAction:!0,key:o.toLocaleLowerCase(),label:o,metaData:{logging:{entityID:d,entityType:m,loggingInfo:p,stsDirectNavEntityID:f,stsDirectNavType:g,stsDisambiguationType:h,stsHighConfidenceID:y,stsHighConfidenceSource:C},markers:s},rawData:u,subtype:"recent",type:"entry"}),_==null||_(t,n)},c[13]=b,c[14]=_,c[15]=T,c[16]=D):D=c[16];var x=D,$,P;c[17]!==T?(P={dispatchRemoveRecentEntry:T},c[17]=T,c[18]=P):P=c[18],$=P;var N=$,M;c[19]!==d||c[20]!==k||c[21]!==x||c[22]!==p||c[23]!==g?(M=u.jsx(t,babelHelpers.extends({},g,{inputRef:d,onChange:p,onPressEntry:x,onSelectFreeformQuery:k})),c[19]=d,c[20]=k,c[21]=x,c[22]=p,c[23]=g,c[24]=M):M=c[24];var w;return c[25]!==N||c[26]!==M?(w=u.jsx(r("CometSearchRecentDataSourceDispatcherContext").Provider,{value:N,children:M}),c[25]=N,c[26]=M,c[27]=w):w=c[27],w}function s(e){a.addRecentEntry(e)}return l}l.default=_}),98);
__d("useCometTypeaheadStateQueryString",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=o("react-compiler-runtime").c(5),n=c(e),r=n[0],a=n[1],i,l;t[0]!==e?(i=function(){return a(e)},l=[e],t[0]=e,t[1]=i,t[2]=l):(i=t[1],l=t[2]),u(i,l);var s;return t[3]!==r?(s=[r,a],t[3]=r,t[4]=s):s=t[4],s}l.default=d}),98);
__d("useSearchCometRecentSearchDataSource",["Actor","CometRelay","CometSearchRecentDataSource","CometSearchRecentDataSource.query","WebPixelRatio","XCometActivityLogControllerRouteBuilder","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u=16;function c(e){var t=e.fetchSearchBadge,n=t===void 0?!1:t,a=e.filter,i=e.nullStateSurface,l=e.searchScopeEntityID,c=o("CometRelay").useRelayEnvironment(),d=o("Actor").useActor(),m=d[0],p=r("XCometActivityLogControllerRouteBuilder").buildURL({category_key:"SEARCH",entry_point:"edit_search_history",log_filter:"search",vanity:m});return s(function(){return new(r("CometSearchRecentDataSource"))({activityLogURL:p,gqlQuery:o("CometSearchRecentDataSource.query").query,limit:u,normalize:o("CometSearchRecentDataSource.query").normalize,queryVariablesBuilderFunction:function(){return{fetch_nullstate:i!=null,fetch_recent_searches:a!=null,fetch_search_badge:n,filter:a,first:u,scale:o("WebPixelRatio").get(),search_null_state_argument:i!=null?{surface:{name:i}}:{surface:{name:"GLOBAL"}},search_scope_entity_id:l}},relayEnvironment:c})},[p,n,a,i,c,l])}l.default=c}),98);
__d("useSearchCometTypeaheadCompositeDataSource",["BaseDataEntryLabelKeyBuilder","CometRelay","CometSearchBootstrapKeywordsDataSource","CometSearchKeywordDataSource","Promise","cometSearchTypeaheadDecorateMixedPayload","cometSearchTypeaheadDecorateRecentPayload","cometSearchTypeaheadSTSDedupeCachedEntries","cometSearchTypeaheadSTSDedupeEntries","justknobx","react","react-compiler-runtime","searchCometTypeaheadPushErrorToast"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useMemo;function m(t){var a=o("react-compiler-runtime").c(51),i=t.config,l=t.recentDataSource,s=t.searchScopeEntityID,u=i.dataSources,c=i.logging,d=i.view,m=u.bootstrapKeywordsDataSourceParams,h=u.keywordDataSourceParams,y=c.sessionContext,C=d.renderLimit,b=d.sectionLimits,v=o("CometRelay").useRelayEnvironment(),S,R;a[0]!==m||a[1]!==C||a[2]!==v?(R=m!=null?new(r("CometSearchBootstrapKeywordsDataSource"))(babelHelpers.extends({},m,{limit:C,relayEnvironment:v})):null,a[0]=m,a[1]=C,a[2]=v,a[3]=R):R=a[3],S=R;var L=S,E,k;a[4]!==h||a[5]!==C||a[6]!==v?(k=new(r("CometSearchKeywordDataSource"))(babelHelpers.extends({},h,{dedupe:r("cometSearchTypeaheadSTSDedupeCachedEntries"),limit:C,onError:g,relayEnvironment:v})),a[4]=h,a[5]=C,a[6]=v,a[7]=k):k=a[7],E=k;var I=E,T;a[8]!==C?(T=function(t){var e,n=t.entries,o=t.params;return r("cometSearchTypeaheadDecorateMixedPayload")({entries:n,params:o},{excludeSeeAllAndEcho:(e=r("justknobx")._("1509"))!=null?e:!1,keyBuilder:r("BaseDataEntryLabelKeyBuilder"),limit:C})},a[8]=C,a[9]=T):T=a[9];var D=T,x=f,$;a[10]!==L||a[11]!==l?($=function(){L==null||L.bootstrap(),l==null||l.bootstrap()},a[10]=L,a[11]=l,a[12]=$):$=a[12];var P=$,N;a[13]!==y||a[14]!==l||a[15]!==s?(N=function(t,n){if(l!=null){if(s==null){l.add(t,y,n);return}var e=t.key,r=t.label,o=t.metaData,a=t.rawData,i={logging:{searchScopeEntityID:s},markers:o.markers},u={hasSecondaryAction:!0,key:e,label:r,metaData:i,rawData:a,subtype:"recent",type:"entry"};l.add(u,y,n)}},a[13]=y,a[14]=l,a[15]=s,a[16]=N):N=a[16];var M=N,w;a[17]!==L||a[18]!==D||a[19]!==I||a[20]!==C||a[21]!==l||a[22]!==b?(w=function(t){var e=t.query;if(e===""&&l!=null){var n=l.fetchCache(t),o=n.entries,a=n.params;return r("cometSearchTypeaheadDecorateRecentPayload")({entries:o,params:a},{getSectionLimitKey:_,limit:C,sectionLimits:b})}if(e==="")return{entries:[],params:t};if(L==null){var i=I.fetchCache(t);return D(babelHelpers.extends({},i))}var s=L.fetchCache(t),u=s.entries,c=s.params;if(u.length>=C)return D({entries:u,params:c});var d=I.fetchCache(t),m=d.entries,p=d.params,f=x(u,m);return D({entries:f,params:p})},a[17]=L,a[18]=D,a[19]=I,a[20]=C,a[21]=l,a[22]=b,a[23]=w):w=a[23];var A=w,F;a[24]!==L||a[25]!==D||a[26]!==I||a[27]!==C||a[28]!==l||a[29]!==b?(F=function(o){var t=o.query;return t===""&&l!=null?l.fetchNetwork(o).then(function(e){return r("cometSearchTypeaheadDecorateRecentPayload")({entries:e.entries,params:e.params},{getSectionLimitKey:p,limit:C,sectionLimits:b})}):t===""?(e||(e=n("Promise"))).resolve({entries:[],params:o}):L==null?I.fetchNetwork(o).then(function(e){return D(babelHelpers.extends({},e))}):I.fetchNetwork(o).then(function(e){var t=L.fetchCache(o),n=t.entries,r=e.entries,a=e.params,i=x(n,r);return D({entries:i,params:a})})},a[24]=L,a[25]=D,a[26]=I,a[27]=C,a[28]=l,a[29]=b,a[30]=F):F=a[30];var O=F,B;a[31]!==l?(B=function(t,n){l!=null&&l.remove(t,n)},a[31]=l,a[32]=B):B=a[32];var W=B,q,U;a[33]!==I?(U=function(){return I.clearQueryCache()},a[33]=I,a[34]=U):U=a[34];var V;a[35]!==l?(V=function(){return l==null?void 0:l.clear()},a[35]=l,a[36]=V):V=a[36];var H;a[37]!==L?(H=function(){return L},a[37]=L,a[38]=H):H=a[38];var G;a[39]!==l?(G=function(){return l==null?void 0:l.refresh()},a[39]=l,a[40]=G):G=a[40];var z;return a[41]!==M||a[42]!==P||a[43]!==A||a[44]!==O||a[45]!==W||a[46]!==U||a[47]!==V||a[48]!==H||a[49]!==G?(z={addRecentEntry:M,bootstrap:P,clearQueryCache:U,clearRecentSearches:V,fetchCache:A,fetchNetwork:O,getBootstrapKeywordsDataSource:H,refreshRecentSearches:G,removeRecentEntry:W},a[41]=M,a[42]=P,a[43]=A,a[44]=O,a[45]=W,a[46]=U,a[47]=V,a[48]=H,a[49]=G,a[50]=z):z=a[50],q=z,q}function p(e){return e.type==="section"?e.subtype:null}function _(e){return e.type==="section"?e.subtype:null}function f(e,t){return r("cometSearchTypeaheadSTSDedupeEntries")(e,t,"bootstrap_and_backend_merge")}function g(){return r("searchCometTypeaheadPushErrorToast")()}l.default=m}),98);
__d("useSearchCometTypeaheadRecentDataSourceContextDecorator",["react","searchCometTypeaheadWithRecentDataSourceContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e,t){return t===void 0&&(t=!0),s(function(){return{decorate:function(){return r("searchCometTypeaheadWithRecentDataSourceContext").apply(void 0,arguments)},params:{dataSource:e,shouldSubscribeToRecentSearches:t}}},[e,t])}l.default=u}),98);
__d("useSearchCometTypeaheadViewItem",["SearchCometTypeaheadViewItemResolver.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry","queryString"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(4),a=t.additionalEntryMappings,i=t.getLinkProps,l=t.seeAllLabelBuilder,s;return n[0]!==a||n[1]!==i||n[2]!==l?(s=function(n){var t=n.entry,o=n.queryString,s=babelHelpers.objectWithoutPropertiesLoose(n,e);return u.jsx(r("SearchCometTypeaheadViewItemResolver.react"),{additionalEntryMappings:a,entry:t,seeAllLabelBuilder:l,children:function(n,r){return u.jsx(n,babelHelpers.extends({},s,{entry:t,extraViewItemProps:r,linkProps:i==null?void 0:i({entry:t,queryString:o}),queryString:o}))}})},n[0]=a,n[1]=i,n[2]=l,n[3]=s):s=n[3],s}l.default=d}),98);
__d("useSearchCometTypeaheadViewListStrategy",["CometScrollableArea.react","FocusInertRegion.react","focusScopeQueries","react","react-compiler-runtime","react-strict-dom","useCometTypeaheadSectionedViewListStrategy","useSearchCometTypeaheadViewItem"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","highlightedEntry","isLoading","queryString"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(15),a=t.additionalEntryMappings,i=t.afterNullstateContent,l=t.emptyStateContent,s=t.getLinkProps,c=t.isScrollable,d=t.nullstateContent,m=t.onHeaderActionPress,p=t.scrollableXStyle,_=t.seeAllLabelBuilder,f=t.xstyle,g;n[0]!==a||n[1]!==s||n[2]!==_?(g={additionalEntryMappings:a,getLinkProps:s,seeAllLabelBuilder:_},n[0]=a,n[1]=s,n[2]=_,n[3]=g):g=n[3];var h=r("useSearchCometTypeaheadViewItem")(g),y;n[4]!==l||n[5]!==d||n[6]!==m||n[7]!==h?(y={emptyStateContent:l,nullstateContent:d,onHeaderActionPress:m,viewItemStrategyRenderer:h},n[4]=l,n[5]=d,n[6]=m,n[7]=h,n[8]=y):y=n[8];var C=r("useCometTypeaheadSectionedViewListStrategy")(y),b;return n[9]!==C||n[10]!==i||n[11]!==c||n[12]!==p||n[13]!==f?(b=function(n){var t=n.ariaProps,a=n.entries,l=n.highlightedEntry,s=n.isLoading,d=n.queryString,m=babelHelpers.objectWithoutPropertiesLoose(n,e),_=u.jsxs(u.Fragment,{children:[u.jsx(C,babelHelpers.extends({ariaProps:t,entries:a,highlightedEntry:l,isLoading:s,queryString:d},m)),i!=null&&d.length===0&&a.length>0?i:null]}),g=d==="";return u.jsx(r("FocusInertRegion.react"),{focusQuery:o("focusScopeQueries").tabbableScopeQuery,children:u.jsx(o("react-strict-dom").html.div,{style:f,"data-testid":void 0,children:c?u.jsx(r("CometScrollableArea.react"),{horizontal:!1,xstyle:p,children:_}):_})})},n[9]=C,n[10]=i,n[11]=c,n[12]=p,n[13]=f,n[14]=b):b=n[14],b}l.default=d}),98);/*FB_PKG_DELIM*/
__d("BrowserSupportCore",["getVendorPrefixedName"],(function(t,n,r,o,a,i){"use strict";var e={hasCSSAnimations:function(){return!!n("getVendorPrefixedName")("animationName")},hasCSSTransforms:function(){return!!n("getVendorPrefixedName")("transform")},hasCSS3DTransforms:function(){return!!n("getVendorPrefixedName")("perspective")},hasCSSTransitions:function(){return!!n("getVendorPrefixedName")("transition")}},l=e;i.default=l}),66);
__d("BrowserSupport",["BrowserSupportCore","ExecutionEnvironment","UserAgent_DEPRECATED","getVendorPrefixedName","memoize"],(function(t,n,r,o,a,i,l){var e,s,u,c=null;function d(){return(u||(u=r("ExecutionEnvironment"))).canUseDOM?(c||(c=document.createElement("div")),c):null}var m=function(t){return r("memoize")(function(){var e=d();return e?t(e):!1})},p=m(function(e){return e.style.cssText="position:-moz-sticky;position:-webkit-sticky;position:-o-sticky;position:-ms-sticky;position:sticky;",/sticky/.test(e.style.position)}),_=m(function(e){return"scrollSnapType"in e.style||"webkitScrollSnapType"in e.style||"msScrollSnapType"in e.style}),f=m(function(e){return"scrollBehavior"in e.style}),g=m(function(e){return"pointerEvents"in e.style?(e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"):!1}),h=(e=r("memoize"))(function(){return!(o("UserAgent_DEPRECATED").webkit()&&!o("UserAgent_DEPRECATED").chrome()&&o("UserAgent_DEPRECATED").windows())&&"FileList"in window&&"FormData"in window}),y=e(function(){return!!t.blob}),C=e(function(){return(u||(u=r("ExecutionEnvironment"))).canUseDOM&&document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString().includes("SVGForeignObject")}),b=e(function(){return!!window.MutationObserver}),v=e(function(){var e={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd"},t=r("getVendorPrefixedName")("transition");return e[t]||null}),S=function(){return!!window.CanvasRenderingContext2D};l.hasCSSAnimations=(s=r("BrowserSupportCore")).hasCSSAnimations,l.hasCSSTransforms=s.hasCSSTransforms,l.hasCSS3DTransforms=s.hasCSS3DTransforms,l.hasCSSTransitions=s.hasCSSTransitions,l.hasPositionSticky=p,l.hasScrollSnapPoints=_,l.hasScrollBehavior=f,l.hasPointerEvents=g,l.hasFileAPI=h,l.hasBlobFactory=y,l.hasSVGForeignObject=C,l.hasMutationObserver=b,l.getTransitionEndEvent=v,l.hasCanvasRenderingContext2D=S}),98);
__d("DOMControl",["$","DataStore"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this.root=n("$").fromIDOrElement(e),this.updating=!1,n("DataStore").set(e,"DOMControl",this)}var t=e.prototype;return t.getRoot=function(){return this.root},t.beginUpdate=function(){return this.updating?!1:(this.updating=!0,!0)},t.endUpdate=function(){this.updating=!1},t.update=function(t){if(!this.beginUpdate())return this;this.onupdate(t),this.endUpdate()},t.onupdate=function(t){},e.getInstance=function(t){return n("DataStore").get(t,"DOMControl")},e})();a.exports=e}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(t,n,r,o,a,i,l){function e(e){return!/\S/.test(e||"")}function s(t){return e(t.value)}function u(e){return s(e)?"":e.value}function c(e){return e.value}function d(e,t){e.value=t||"";var n=r("DOMControl").getInstance(e);n&&n.resetHeight&&n.resetHeight()}function m(e,t){t||(t=""),e.setAttribute("aria-label",t),e.setAttribute("placeholder",t)}function p(e){e.value="",e.style.height=""}function _(e,t){o("CSS").conditionClass(e,"enter_submit",t)}function f(e){return o("CSS").hasClass(e,"enter_submit")}function g(e,t){t>0?e.setAttribute("maxlength",t.toString()):e.removeAttribute("maxlength")}l.isWhiteSpaceOnly=e,l.isEmpty=s,l.getValue=u,l.getValueRaw=c,l.setValue=d,l.setPlaceholder=m,l.reset=p,l.setSubmitOnEnter=_,l.getSubmitOnEnter=f,l.setMaxLength=g}),98);
__d("Form",["DOM","DOMQuery","DTSG","DTSGUtils","DataStore","FBLogger","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(t,n,r,o,a,i,l){var e,s,u="FileList"in window,c="FormData"in window;function d(t){var n={};return(e||(e=r("PHPQuerySerializer"))).serialize(t).split("&").forEach(function(e){if(e){var t=/^([^=]*)(?:=(.*))?$/.exec(e),o=(s||(s=r("URI"))).decodeComponent(t[1]),a=t[2]!==void 0,i=a?(s||(s=r("URI"))).decodeComponent(t[2]):null;n[o]=i}}),n}var m={getInputs:function(t){return t===void 0&&(t=document),[].concat(o("DOMQuery").scry(t,"input"),o("DOMQuery").scry(t,"select"),o("DOMQuery").scry(t,"textarea"),o("DOMQuery").scry(t,"button"))},getInputsByName:function(t){var e={};return m.getInputs(t).forEach(function(t){var n=e[t.name];e[t.name]=n===void 0?t:[t].concat(n)}),e},getSelectValue:function(t){return t.options[t.selectedIndex].value},setSelectValue:function(t,n){for(var e=0;e<t.options.length;++e)if(t.options[e].value===n){t.selectedIndex=e;break}},getRadioValue:function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e].value;return null},getElements:function(t){return t.tagName==="FORM"&&t.elements!==t?Array.from(t.elements):m.getInputs(t)},getAttribute:function(t,n){return(t.getAttributeNode(n)||{}).value||null},setDisabled:function(t,n){m.getElements(t).forEach(function(e){if(e.disabled!==void 0){var t=r("DataStore").get(e,"origDisabledState");n?(t===void 0&&r("DataStore").set(e,"origDisabledState",e.disabled),e.disabled=n):t===!1&&(e.disabled=!1)}})},forEachValue:function(t,n,r){m.getElements(t).forEach(function(e){if(!(!e.name||e.disabled)&&e.type!=="submit"&&!(e.type==="reset"||e.type==="button"||e.type==="image")&&!((e.type==="radio"||e.type==="checkbox")&&!e.checked)){if(e.nodeName==="SELECT"){for(var t=0,n=e.options.length;t<n;t++){var a=e.options[t];a.selected&&r("select",e.name,a.value)}return}if(e.type==="file"){if(u)for(var i=e.files,l=0;l<i.length;l++)r("file",e.name,i.item(l));return}r(e.type,e.name,o("Input").getValue(e))}}),n&&n.name&&n.type==="submit"&&o("DOMQuery").contains(t,n)&&o("DOMQuery").isNodeOfType(n,["input","button"])&&r("submit",n.name,n.value)},createFormData:function(t,n){if(!c)return null;var e=new FormData;if(t)if(r("isNode")(t))m.forEachValue(t,n,function(t,n,r){e.append(n,r)});else{var o=d(t);for(var a in o)o[a]==null?e.append(a,""):e.append(a,o[a])}return e},serialize:function(t,n){var e={};return m.forEachValue(t,n,function(t,n,r){t!=="file"&&m._serializeHelper(e,n,r)}),m._serializeFix(e)},_serializeHelper:function(t,n,r){var e=Object.prototype.hasOwnProperty,o=/([^\]]+)\[([^\]]*)\](.*)/.exec(n);if(o){if(!t[o[1]]||!e.call(t,o[1])){var a;if(t[o[1]]=a={},t[o[1]]!==a)return}var i=0;if(o[2]==="")for(;t[o[1]][i]!==void 0;)i++;else i=o[2];o[3]===""?t[o[1]][i]=r:m._serializeHelper(t[o[1]],i.concat(o[3]),r)}else t[n]=r},_serializeFix:function(t){for(var e in t)t[e]instanceof Object&&(t[e]=m._serializeFix(t[e]));var n=Object.keys(t);if(n.length===0||n.some(isNaN))return t;n.sort(function(e,t){return e-t});var r=0,o=n.every(function(e){return+e===r++});return o?n.map(function(e){return t[e]}):t},post:function(t,n,a,i){i===void 0&&(i=!0);var e=new(s||(s=r("URI")))(t),l=document.createElement("form");l.action=e.toString(),l.method="POST",l.style.display="none";var u=!r("isFacebookURI")(e);if(a){if(u&&(l.rel="noreferrer",a==="_blank")){a=btoa(r("Random").uint32());var c=window.open("about:blank",a);c!==void 0&&(c.opener=null)}l.target=a}if(i&&!u&&e.getSubdomain()!=="apps"){var d=o("DTSG").getToken();d&&(n.fb_dtsg=d,r("SprinkleConfig").param_name&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(d))),r("LSD").token&&(n.lsd=r("LSD").token,r("SprinkleConfig").param_name&&!d&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(r("LSD").token)))}return m.createHiddenInputs(n,l),o("DOMQuery").getRootElement().appendChild(l),l.submit(),!1},post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES:function(t,n,r){m.post(t,n,r)},createHiddenInputs:function(t,n,o,a){a===void 0&&(a=!1),o=o||{};var e=d(t);for(var i in e)if(e[i]!==null)if(o[i]&&a)o[i].value=e[i];else{var l=r("DOM").create("input",{type:"hidden",name:i,value:e[i]});o[i]=l,n.appendChild(l)}return o},getFirstElement:function(t,n){n===void 0&&(n=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);for(var e=[],a=0;a<n.length;a++){e=o("DOMQuery").scry(t,n[a]);for(var i=0;i<e.length;i++){var l=e[i];try{var s=r("getElementPosition")(l);if(s.y>0&&s.x>0)return l}catch(e){}}}return null},focusFirst:function(t){var e=m.getFirstElement(t);return e?(e.focus(),!0):!1}};i.exports=m}),34);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this)||this,n._allowCrossOrigin=!1,n._allowCrossPageTransition=!1,n._customHeader={},n._inFlight=!1,n._limit=10,n._option={},n._preventDefaultErrorHandler=!1,n._suspended=!1,t&&n.setURI(t),n.setNetworkErrorRetryLimit(0),n}babelHelpers.inheritsLoose(t,e),t.parseFiles=function(t){var e={};return r("forEachObject")(t,function(t,n){if(Array.isArray(t))e[n]=t;else if(e[n]=[],t instanceof window.FileList)for(var r=0;r<t.length;r++)e[n].push(t.item(r));else(t instanceof window.File||t instanceof window.Blob)&&e[n].push(t)}),e};var n=t.prototype;return n.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},n.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},n.setCustomHttpHeader=function(t,n){return this._customHeader[t]=n,this},n.setData=function(t){return this._data=t,this},n.setOption=function(t,n){return this._option[t]=n,this},n.setPreventDefaultErrorHandler=function(t){return this._preventDefaultErrorHandler=t,this},n.setLimit=function(t){return this._limit=t,this},n.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},n.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},n.setRelativeTo=function(t){return this._relativeTo=t,this},n.setStatusElement=function(t){return this._statusElement=t,this},n.setURI=function(t){return this._uri=t,this},n.suspend=function(){return this._suspended=!0,this},n.resume=function(){return this._suspended=!1,this._processQueue(),this},n.isUploading=function(){return this._inFlight},n._createFileUpload=function(t,n,r){return new s(t,n,r)},n._processQueue=function(){if(!this._suspended)for(;this._pending.length<this._limit&&this._waiting.length;){var e=this._waiting.shift(),t=this._preprocessHandler;t?t(e,this._processUpload.bind(this)):this._processUpload(e),this._pending.push(e)}},n._processUpload=function(t){var e=o("Form").createFormData(t.getData()||this._data);if(t.getFile()){e.append(t.getName(),t.getFile());var n=t.getFile().uploadID;n&&e.append("upload_id",n),t.getAdditionalData().forEach(function(t,n){return e.append(n,t)})}var a=new(r("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(e).setStatusElement(this._statusElement).setHandler(this._success.bind(this,t)).setErrorHandler(this._failure.bind(this,t)).setUploadProgressHandler(this._progress.bind(this,t)).setInitialHandler(this._initial.bind(this,t));for(var i in this._option)a.setOption(i,this._option[i]);for(var l in this._customHeader)a.setRequestHeader(l,this._customHeader[l]);this._relativeTo&&a.setRelativeTo(this._relativeTo),a.send(),t.setAsyncRequest(a),this._inFlight=!0,t.getRetryCount()||this.inform("start",t)},n._abort=function(t){this._pending.indexOf(t)!==-1&&(r("removeFromArray")(this._pending,t),this._processQueue()),r("removeFromArray")(this._waiting,t),t.abort()},n._initial=function(t){t.isAborted()||this.inform("initial",t)},n._success=function(t,n){if(t.isAborted()){this.inform("success_after_abort",n);return}this._complete(t),this.inform("success",t.handleSuccess(n)),this._processQueue()},n._retryUpload=function(t){t.increaseRetryCount(),this._processUpload(t)},n._failure=function(t,n){if(!t.isAborted()){if(n.error===1004&&t.getRetryCount()<(this._retryLimit||0))return this._retryUpload(t);this._complete(t),this.inform("failure",t.handleFailure(n))!==!1&&(this._preventDefaultErrorHandler||r("AsyncResponse").defaultErrorHandler(n)),this._processQueue()}},n._progress=function(t,n){t.isAborted()||this.inform("progress",t.handleProgress(n))},n._complete=function(t){r("removeFromArray")(this._pending,t),this._pending.length||(this._inFlight=!1)},t.isSupported=function(){return o("BrowserSupport").hasFileAPI()},t})(r("mixin")(r("ArbiterMixin"))),s=(function(){function e(e,t,n){this._additionalData=new Map,this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=e,this._file=t,this._data=n}var t=e.prototype;return t.getName=function(){return this._name},t.getFile=function(){return this._file},t.setFile=function(t){this._file=t},t.getData=function(){return this._data},t.getAdditionalData=function(){return this._additionalData},t.isComplete=function(){return this._success!==null},t.isSuccess=function(){return this._success===!0},t.getResponse=function(){return this._response},t.getProgressEvent=function(){return this._progressEvent},t.setAsyncRequest=function(t){return this._request=t,this},t.increaseRetryCount=function(){return this._numRetries++,this},t.getRetryCount=function(){return this._numRetries},t.isWaiting=function(){return!this._request},t.isAborted=function(){return this._aborted},t.abort=function(){this._request=null,this._aborted=!0},t.handleSuccess=function(t){return this._success=!0,this._response=t,this._progressEvent=null,this},t.handleFailure=function(t){return this._success=!1,this._response=t,this._progressEvent=null,this},t.handleProgress=function(t){return this._progressEvent=t,this},e})();l.default=e}),98);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t._files=null,t._uploads=[],t._fileLessUpload=null,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setFiles=function(t){return this._files=r("AsyncUploadBase").parseFiles(t),this},n.setAlwaysReturnResponse=function(t){this._shouldAlwaysReturnResponse=t},n.abort=function(){var e=this;this._uploads.forEach(function(t){return e._abort(t)})},n.send=function(){var e=this;if(!this._inFlight){this._inFlight=!0,this._uploads=[];for(var t in this._files)this._files[t].forEach(function(n){e._uploads.push(e._createFileUpload(t,n))});this._waiting=this._uploads.slice(0),this._pending=[],this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))}},n._processQueue=function(){if(e.prototype._processQueue.call(this),!this._pending.length&&!this._waiting.length){var t=this._uploads,n=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:t}:{response:t[0].getResponse(),uploads:t}:t;this.inform("complete",n)}},t.isSupported=function(){return r("AsyncUploadBase").isSupported()},t})(r("AsyncUploadBase"));l.default=e}),98);
__d("shield",[],(function(t,n,r,o,a,i){function e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(typeof e!="function")throw new TypeError("shield expects a function as the first argument");return function(){return e.apply(t,r)}}i.default=e}),66);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","DOMQuery","DataStore","Event","FBLogger","Form","Parent","isElementNode","mixin","setTimeout","shield"],(function(t,n,r,o,a,i,l){function e(e){var t={},n=o("DOMQuery").scry(e,'input[type="file"]');return n.forEach(function(e){t[e.name]=e.files}),t}function s(e){var t=o("DOMQuery").scry(e,'input[type="file"]');t.forEach(function(e){e.files=null})}var u=(function(t){function n(e,n,a){var i;if(i=t.call(this)||this,i._allowCrossOrigin=!1,i._allowCrossPageTransition=!1,i._uploadInParallel=!1,i._handleSubmit=function(e){if(!(e.isDefaultPrevented()||e.getTarget()!==i._form)){if(i.inform("submit")===!1){e.prevent();return}i.submit(e)}},i._click=function(e){for(var t=e.getTarget();r("isElementNode")(t);){if(t.type==="submit"){i._clickTarget=t,r("setTimeout")(i._unclick,0);break}t=t.parentNode}},i._unclick=function(){i._clickTarget=null},i.initial=function(e){return i.inform("initial",{upload:e})},e.getAttribute("rel")==="async")throw r("FBLogger")("FileForm","primer-only").mustfixThrow("FileForm cannot be used with Primer forms.");if((e.getAttribute("method")||"").toUpperCase()!=="POST")throw r("FBLogger")("FileForm","post-only").mustfixThrow("FileForm must be used with POST forms.");return i._form=e,i._previousEncoding=i._form.enctype,i._form.enctype=i._form.encoding="multipart/form-data",i._files=null,i._customHeader={},n&&i.enableBehaviors(n),i._options=a||{},i.setAllowCrossOrigin(i._options.allowCrossOrigin),i.setAllowCrossPageTransition(i._options.allowCrossPageTransition),i.setUploadInParallel(i._options.uploadInParallel),i.setConcurrentLimit(i._options.concurrentLimit),i.setPreprocessHandler(i._options.preprocessHandler),i.setNetworkErrorRetryLimit(i._options.networkErrorRetryLimit),i._listeners=[r("Event").listen(document.documentElement,"submit",i._handleSubmit),r("Event").listen(i._form,"click",i._click)],o("DataStore").set(i._form,"FileForm",i),i}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getRoot=function(){return this._form},a.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},a.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},a.setUploadInParallel=function(t){return this._uploadInParallel=!!t,this},a.setConcurrentLimit=function(t){return this._concurrentLimit=t,this},a.setCustomHttpHeader=function(t,n){return this._customHeader[t]=n,this},a.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},a.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},a.setFiles=function(t){return this._files=t,this},a.submit=function(n){var t=this,a;if(this._uploadInParallel&&r("AsyncUploadRequest").isSupported()){a=new(r("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(o("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var i in this._customHeader)a.setCustomHttpHeader(i,this._customHeader[i]);this._concurrentLimit&&a.setLimit(this._concurrentLimit),this._files?a.setFiles(this._files):a.setFiles(e(this._form));var l=[a.subscribe("progress",function(e,n){t.progress(n,n.getProgressEvent())}),a.subscribe("initial",function(e,n){t.initial(n)}),a.subscribe("success",function(e,n){t.success(n,n.getResponse())}),a.subscribe("start",function(e,n){t.inform("start",{upload:n})}),a.subscribe("failure",function(e,n){return t.failure(n,n.getResponse()),!1}),a.subscribe("complete",function(){for(;l.length;)l.pop().unsubscribe()})]}else{var s,u=this._files;if(u){s=o("Form").createFormData(o("Form").serialize(this._form,this._clickTarget));var c=r("AsyncUploadRequest").parseFiles(u),d=function(t){var e=c[t];e.length===1?s.append(t,e[0]):(t+="[]",e.forEach(function(e){s.append(t,e)}))};for(var m in c)d(m)}else s=o("Form").createFormData(this._form,this._clickTarget);a=new(r("AsyncRequest"))().setRawData(s).setHandler(function(e){return t.success(null,e)}).setErrorHandler(function(e){return t.failure(null,e)}).setUploadProgressHandler(function(e){return t.progress(null,e)}).setInitialHandler(r("shield")(this.initial,this,null)),this.inform("start",{upload:null})}a.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send(),this._request=a,n&&n.prevent()},a.success=function(t,n){var e={response:n,upload:t};this.inform("success",e)!==!1&&r("Event").fire(this._form,"success",e),this._cleanup()},a.failure=function(t,n){var e={response:n,upload:t};this.inform("failure",e)!==!1&&r("Event").fire(this._form,"error",e)!==!1&&r("AsyncResponse").defaultErrorHandler(n),this._cleanup()},a.progress=function(t,n){this.inform("progress",{event:n,upload:t})},a.abort=function(){this._request&&(this._request.abort(),this._cleanup())},a.clear=function(){s(this._form)},a.destroy=function(){for(this._cleanup();this._listeners&&this._listeners.length;)this._listeners.pop().remove();this._listeners=null,this._form.enctype=this._form.encoding=this._previousEncoding,o("DataStore").remove(this._form,"FileForm")},a._cleanup=function(){this._request=null},a._getStatusElement=function(){return o("Parent").byClass(this._form,"stat_elem")||this._form},n.getInstance=function(t){return o("DataStore").get(t,"FileForm")},n})(r("mixin")(r("ArbiterMixin"),r("BehaviorsMixin")));Object.assign(u,{EVENTS:["start","submit","initial","progress","success","failure"]}),l.default=u}),98);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(t){var n;return n=e.call(this)||this,n._inputElem=t,n._data={},n}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.setInput=function(t){return this._inputElem=t,this},r.setURI=function(t){return this._uri=t,this},r.setData=function(t){return this._data=t,this},r.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},r.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},r.setFiles=function(t){return this._files=t,this},r.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},r.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},r.setUploadInParallel=function(t){return this._uploadInParallel=!!t,this},r.setConcurrentLimit=function(t){return this._concurrentLimit=t,this},r.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())},r.send=function(){this._createForm();var e=this._inputElem&&!this._inputElem.parentElement;if(!e&&this._inputElem){var t=this._inputElem.cloneNode(!1);n("DOM").replace(this._inputElem,t)}this._inputElem&&n("DOM").appendContent(this._formElem,this._inputElem),n("DOM").appendContent(document.body,this._formElem),this._fileForm.submit(),!e&&this._inputElem&&n("DOM").replace(t,this._inputElem),this._removeFormEl()},r._onFileFormEvent=function(t,n){return(t==="success"||t==="failure")&&this._destroyFileForm(),this.inform(t,n)},r._createForm=function(){var e,t,r;this._destroyFileForm(),this._formElem=n("DOM").create("form",{action:this._uri,method:"post"}),this._fileForm=new(n("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(e=this._concurrentLimit)!=null?e:0,preprocessHandler:(t=this._preprocessHandler)!=null?t:null,networkErrorRetryLimit:(r=this._retryLimit)!=null?r:0}),this._files&&this._fileForm.setFiles(this._files),this._fileForm.subscribe(n("FileForm").EVENTS,this._onFileFormEvent.bind(this)),n("Form").createHiddenInputs(babelHelpers.extends({fb_dtsg:n("DTSG").getToken()},this._data),this._formElem)},r._removeFormEl=function(){n("DOM").remove(this._formElem),this._formElem=null},r._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)},t})(n("mixin")(n("ArbiterMixin")));a.exports=e}),null);
__d("ImageExif",["exif-js","vulture"],(function(t,n,r,o,a,i){n("exif-js").enableXmp();function e(e){n("vulture")("jfJj0OxtaQS23dtNAa6Ux_EwezA=");var t=function(r){return n("vulture")("8F4iLDRkom8J18_Npp9oMWLeDL0="),e.charCodeAt(r)&255};this.getByteAt=t,this.getShortAt=function(e,t){n("vulture")("TeU6NItY5ANxAZydB6TwOqiL6bY=");var r=this.getSShortAt(e,t);return r>0?r:r+65536},this.getSShortAt=function(e,r){n("vulture")("S4t94uk7tzwYl5k8oJz00fs8vl0=");var o=t(e),a=t(e+1);return r?(o<<8)+a:(a<<8)+o},this.getLongAt=function(e,t){n("vulture")("2Q-5gBtdRhPNNCFecrVNr8DZJMk=");var r=this.getSLongAt(e,t);return r>0?r:r+4294967296},this.getSLongAt=function(e,r){n("vulture")("EoPgIRKY39sdRScK6YFgkDLj7Sw=");var o=t(e),a=t(e+1),i=t(e+2),l=t(e+3);return r?(((o<<8)+a<<8)+i<<8)+l:(((l<<8)+i<<8)+a<<8)+o},this.getStringAt=function(t,r){return n("vulture")("woG_qxb_3fmLzMCtRNbGb-1tmBw="),e.substr(t,r)},this.getLength=function(){return n("vulture")("5DiADBCRPZk7Ra8zshGxcjYCbzU="),e.length}}var l={readFromFile:function(t,n){var e=this,r=new FileReader;r.addEventListener("load",function(t){var r=t.target.result,o=r instanceof ArrayBuffer?e.readFromArrayBuffer(r):e.readFromBinaryString(r);n(o)},!1),window.DataView?r.readAsArrayBuffer(t):r.readAsBinaryString(t)},readFromBinaryString:function(r){return n("vulture")("b8G7o959xanJZN7AwUHW_lILvuo="),n("exif-js").readFromBinaryFile(new e(r))},readFromArrayBuffer:function(t){return n("exif-js").readFromBinaryFile(t)}};a.exports=l}),null);
__d("StringEncoding",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Uint8Array(e),r=0,o=[];r<n.length;){var a=n[r],i=void 0;if(a>>7===0)i=1;else if(a>>5===6)a&=31,i=2;else if(a>>4===14)a&=15,i=3;else if(a>>3===30)a&=7,i=4;else if(a>>2===62)a&=3,i=5;else if(a>>1===126)a&=1,i=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(r+i>n.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var l=1;l<i;l++){var s=n[r+l];if(s>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");s&=63,a<<=6,a|=s}if(a>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!a)switch(t){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(a),r+=i}return String.fromCodePoint.apply(String,o)}function l(e){return(e&255)<<8|e>>8}function s(e,t){if(e.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");var n=new Uint16Array(e),r=0,o=[],a=!1;for(n[0]===65279?++r:n[0]==65534&&(++r,a=!0);r<n.length;){var i=n[r];a&&(i=l(i));var s=i;if(i>55295&&i<57344){if((i&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(r+1>=n.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++r;var u=n[r];if(a&&(u=l(u)),(u&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");s=((i&1023)<<10|u&1023)+65536}if(!s)switch(t){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(s),++r}return String.fromCodePoint.apply(String,o)}function u(e){return(e&255)<<24|(e&65280)<<8|(e&255<<16)>>8|e>>>24}function c(e,t){if(e.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");var n=new Uint32Array(e),r=0,o=[],a=!1;for(n[0]===65279?++r:n[0]==4294836224&&(++r,a=!0);r<n.length;){var i=n[r];if(a&&(i=u(i)),i&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(i>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!i)switch(t){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(i),++r}return String.fromCodePoint.apply(String,o)}var d={"utf-8":e,"utf-16":s,"utf-32":c},m=(function(){function e(e,t){e?this.$1=e:this.$1=["utf-8","utf-16","utf-32"],t||(t="error"),this.$2=t;for(var n of this.$1)this.$3(n)}var t=e.prototype;return t.getPrecedence=function(){return this.$1},t.decode=function(t){var e=[];for(var n of this.$1){var r=this.$3(n);try{return r(t,this.$2)}catch(t){e.push(t)}}throw new Error(e.join(", "))},t.$3=function(t){var e=d[t];if(!e)throw new Error("Unknown encoding "+t);return e},e})();i.Decoder=m}),66);
__d("ImageMetadata",["ImageExif","StringEncoding","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$4="",this.$6=e,this.$7=new Uint8Array(e),this.$8()}var n=e.prototype;return n.$8=function(){for(var e=0;e<this.$7.length;){if(e=this.$9(e),e===-1)return;var t=this.$7[e+1],n=s[t];if(!n)return;var r=n.length;if(r===void 0&&(r=this.$7[e+2]*256+this.$7[e+3]),this.$10(e,r,n),n.name==="SOS")return;e+=2+r}},n.$10=function(t,n,r){switch(r.name){case"APP1":this.$11(t+4,u)?(this.$1||(this.$1=t,this.$2=n),this.$12(t+4+u.length,n-2-u.length)):this.$11(t+4,c)?(this.$1=t,this.$2=n,this.$13(t+4+c.length,n-2-c.length)):this.$11(t+4,d)&&this.$14(t+4+d.length,n-2-d.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(t+4,n-2);break}},n.$15=function(t,n){var e=this.$7[t+3]*256+this.$7[t+4],r=this.$7[t+1]*256+this.$7[t+2];e>0&&r>0&&(this.$5={x:e,y:r})},n.$12=function(t,n){var e=console.log;try{console.log=r("emptyFunction");var a=o("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{console.log=e}var i={};for(var l in a){var s=a[l];typeof s=="string"&&(s=s.trim()),i[l.trim()]=s}this.$3=i},n.$13=function(t,n){var e=new(o("StringEncoding")).Decoder(null,"truncate");try{var r=e.decode(this.$6.slice(t,t+n));this.$4=r}catch(e){return}},n.$14=function(t){},n.$11=function(t,n){var e=this;return n.split("").every(function(n){return e.$7[t++]===n.charCodeAt(0)})},n.$9=function(t){for(var e=t;e+1<this.$7.length;++e)if(this.$7[e]===255&&this.$7[e+1]!==0&&this.$7[e+1]!==255)return e;return-1},n.hasAPP1=function(){return!!this.$1},n.hasExif=function(){return!!this.$3},n.hasXMP=function(){return!!this.$4},n.hasSize=function(){return!!this.$5},n.getAPP1Location=function(){return this.hasAPP1()?this.$1:null},n.getAPP1Length=function(){return this.hasAPP1()?this.$2:null},n.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3},n.getXMPString=function(){return this.$4},n.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5},n.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength},e.genMetadataFromBlob=async function(n){return new e(await e.$16(n))},e.$16=function(n){return new Promise(function(e,r){var o=new t.FileReader;o.onabort=r,o.onerror=r,o.onload=e,o.readAsArrayBuffer(n)})},e})(),s=[];s[216]={name:"SOI",length:0},s[192]={name:"SOF0"},s[193]={name:"SOF1"},s[194]={name:"SOF2"},s[195]={name:"SOF3"},s[197]={name:"SOF5"},s[198]={name:"SOF6"},s[199]={name:"SOF7"},s[200]={name:"JPG"},s[201]={name:"SOF9"},s[202]={name:"SOF10"},s[203]={name:"SOF11"},s[205]={name:"SOF13"},s[206]={name:"SOF14"},s[207]={name:"SOF15"},s[196]={name:"DHT"},s[219]={name:"DQT"},s[221]={name:"DRI",length:2},s[218]={name:"SOS"},s[208]={name:"RST0",length:0},s[209]={name:"RST1",length:0},s[210]={name:"RST2",length:0},s[211]={name:"RST3",length:0},s[212]={name:"RST4",length:0},s[213]={name:"RST5",length:0},s[214]={name:"RST6",length:0},s[215]={name:"RST7",length:0},s[224]={name:"APP0"},s[225]={name:"APP1"},s[226]={name:"APP2"},s[227]={name:"APP3"},s[228]={name:"APP4"},s[229]={name:"APP5"},s[230]={name:"APP6"},s[231]={name:"APP7"},s[232]={name:"APP8"},s[233]={name:"APP9"},s[234]={name:"APP10"},s[235]={name:"APP11"},s[236]={name:"APP12"},s[237]={name:"APP13"},s[238]={name:"APP14"},s[239]={name:"APP15"},s[254]={name:"COM"},s[217]={name:"EOI",length:0};var u="Exif\0\0",c="http://ns.adobe.com/xap/1.0/\0",d="http://ns.adobe.com/xmp/extension/\0";l.default=e}),98);
__d("PhotosUploadID",[],(function(t,n,r,o,a,i){var e=1024;function l(){return(e++).toString()}i.getNewID=l}),66);
__d("ReactComposerMediaFilterUtils",["ComposerXNativeAudioUploadsConfig","VideoUploadConfig"],(function(t,n,r,o,a,i,l){function e(e){var t=c(e).length,n=d(e).length;return t>n}function s(e){return c(e).length>0}function u(e){return m(e).length>0}function c(e){return p(e,r("VideoUploadConfig").videoExtensions)}function d(e){var t={gif:!0};return p(e,t)}function m(e){var t={};return Object.keys(r("ComposerXNativeAudioUploadsConfig").audioExtensions).forEach(function(e){t[e]=r("ComposerXNativeAudioUploadsConfig").audioExtensions[e]!==0}),p(e,t)}function p(e,t){return e.filter(function(e){var n,r,o=e.indexOf(".")!==-1&&(n=(r=e.split(".").pop())==null?void 0:r.toLowerCase())!=null?n:"";return t[o]})}l.hasEditableVideos=e,l.hasVideos=s,l.hasAudioFiles=u,l.filterVideos=c,l.filterNonEditableVideos=d,l.filterAudioFiles=m,l.filterFileOfSupportedType=p}),98);
__d("ResumableUploadServiceState.enum",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({CANCEL:"upload-cancel",FAIL:"upload-fail",FILE_TOO_LARGE:"upload-too-large",NOT_STARTED:"upload-not-started",PROGRESS:"upload-progress",START:"upload-start",SUCCESS:"upload-success",TRANSPORT_FAILURE:"upload-transport-fail"});i.default=e}),66);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["ImageMetadata","Promise","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=2048,u=(function(){function o(){}return o.genArrayBufferFromBlob=function(o){return new(e||(e=n("Promise")))(function(e,n){if(t.FileReader){var r=new t.FileReader;r.onabort=n,r.onerror=n,r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(o)}else n(new Error("global.FileReader doesn't exit"))})},o.shouldCheckInServer=function(t){if(!t.hasExif()&&!t.hasXMP()||!t.hasSize())return!1;var e=t.getXMPString();if(this.getMayContainSphericalMetadata(e))return!0;var n=t.getSize(),r=n.x,o=n.y;if(Math.max(r,o)<s||r/o<2&&o/r<2)return!1;var a=t.hasExif()?t.getExif():{};return!(e===""&&(!a.Make||!a.Model))},o.genPhotosphereMetadata=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){r("promiseDone")(t.genArrayBufferFromBlob(o),function(o){try{var a=new(r("ImageMetadata"))(o);t.shouldCheckInServer(a)?r("promiseDone")(t.genPhotosphereMetadataFromServer(a.hasSize()?a.getSize():{x:0,y:0},a.getXMPString(),a.hasExif()?a.getExif():{}),function(t){var n=t.payload;e({photoSphereMetadata:n,imageMetadata:a})},n):e({})}catch(e){e.__manual=!0,n(e)}},n)})},o.genPhotosphereMetadataFromServer=function(o,a,i){var t=this;return new(e||(e=n("Promise")))(function(e,n){new(r("XAsyncRequest"))(r("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:t.getExifString(i),height:o.y,width:o.x,xmp:a}).setHandler(e).setErrorHandler(n).send()})},o.getExifString=function(t){return JSON.stringify(t,function(e,t){return e==="FocalLength"&&t.numerator&&t.denominator?t.numerator+"/"+t.denominator:t})},o.getMayContainSphericalMetadata=function(t){return t!==""&&t.indexOf("GPano:")>-1},o})();l.default=u}),98);
__d("SphericalImage",["SphericalImageUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="ProjectionType",s=(function(){function t(e){this.props=e}t.createFromBlob=async function(t){var e=await r("SphericalImageUtils").genPhotosphereMetadata(t);return new this(e)};var n=t.prototype;return n.isSpherical=function(){return!!this.props.photoSphereMetadata},n.getImageMetadata=function(){return this.props.imageMetadata},n.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata},n.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null},n.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null},n.getProjectionType=function(){var t="";return this.props.photoSphereMetadata&&this.props.photoSphereMetadata[e]&&(t=this.props.photoSphereMetadata[e]),t},t})();l.default=s}),98);
__d("SphericalPhotoUploadHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return!(t&&Math.max(t.x,t.y)<=n||e==="cubestrip")}function l(e,t,n){return!(t==null||t<=n||e==="cubestrip")}i.shouldResize360=e,i.shouldRecompress360=l}),66);
__d("WebWorker",["invariant","BlobFactory","Bootloader","EventListener","FBLogger","SubscriptionsHandler","TrustedTypesWebWorkerScriptURLPolicy","URI","WebWorkerConfig","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","XHRRequest","cr:951783","emptyFunction","err","filterObject","getCrossOriginTransport","getWorkerInitScriptSPINParams","gkx","isSameOrigin","justknobx","memoize","nullthrows","performanceNow"],(function(t,n,r,o,a,i,l){var e,s,u=t.URL||t.webkitURL,c={remove:n("emptyFunction")},d=(function(){"use strict";function r(e){var t=this;this.$2=!1,this.$3=null,this.$4=e,this.__worker=null,this.$5=n("emptyFunction"),this.$6=n("emptyFunction"),this.$7=[],this.$8=[],this.$9=!1,this.$10=new(n("SubscriptionsHandler")),this.$1=n("cr:951783")!==null?n("cr:951783")(function(){t.$9||t.terminate()}):c,n("gkx")("20935")&&setTimeout(function(){!t.$9&&!t.isCurrentState("terminated")&&n("FBLogger")("comet_infra").mustfix("WebWorker (resource: %s) allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.",e.name)},1e3),this.$11("constructed")}var o=r.prototype;return o.setMessageHandler=function(t){return this.$5=t||n("emptyFunction"),this},o.setErrorHandler=function(t){return this.$6=t||n("emptyFunction"),this},o.postMessage=function(t,n){if(!this.isCurrentState("constructed")||l(0,5977),!this.isCurrentState("terminated")||l(0,5978),this.isCurrentState("preparing"))return this.$7.push(this.postMessage.bind(this,t,n)),this;var e={type:"message",message:t};return n?this.getInterfaceableWorker().postMessage(e,n):this.getInterfaceableWorker().postMessage(e),this},o.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())},o.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate(),this.$12()},o.execute=function(){var e=this;!this.isCurrentState("terminated")||l(0,5979);var t=["preparing","executing"];return t.some(function(t){return e.isCurrentState(t)})?this:(this.$11("preparing"),r.prepareResource(this.$4,this.$14.bind(this)),this)},o.setAllowCrossPageTransition=function(t){return n("gkx")("20935")&&!t&&n("FBLogger")("comet_infra").mustfix("allowAcrossPageTransitions must be true because we dont kill these in Comet."),this.$9=t,this},o.isCurrentState=function(t){return r.states.includes(t)||l(0,5980,t),t===this.$3},o.$14=function(){if(!this.isCurrentState("executing")||l(0,5981),!this.isCurrentState("terminated")){if(this.$4.useInitScript&&n("gkx")("21112")||this.$4.sameOriginURL||this.$4.source||l(0,19837,this.$4.name),this.$4.useInitScript&&n("gkx")("21112")){var e,t=n("nullthrows")((e=n("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(n("getWorkerInitScriptSPINParams")()))==null?void 0:e.toString()),o=new window.URL(this.$4.url,window.location.href).href;if(o==null)throw n("err")("Can't start up worker without a resource url.");this.__worker=this.constructWorker(t,this.$4.name),this.__worker.postMessage({bundleUrl:o,doNotStartBundle:!0,isDev:!1,resource:this.$4,type:"sr-init"})}else this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(r.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));if(this.$15("ping",Date.now()),this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(e){throw this.terminate(),this.$16("define_error",{message:e.message}),e}this.$17(),this.$11("executing"),this.$7.forEach(function(e){return e()}),this.$7=[],this.$8.forEach(function(e){return e()}),this.$8=[]}},o.$13=function(){this.$10.release()},o.$15=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.getInterfaceableWorker().postMessage({type:t,args:n})},o.$16=function(t,o){var e=!(this.$4.useInitScript&&n("gkx")("21112"));r.$16(t,this.$4.name,babelHelpers.extends({},o,{cross_page_transition:!!this.$9,state:this.$3}),e)},r.$18=function(t){return Object.keys(n("filterObject")({object_url:t&&r.$19(),data_url:t&&r.$20(),worker:r.isSupported()},function(e){return!!e}))},o.$17=function(){this.$10.addSubscriptions(n("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),n("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))},o.$22=function(t){var e=this.$6(t);!e&&!t.defaultPrevented&&this.$16("exception",{message:t.message})},o.$21=function(n){var e=n.data;switch(e.type){case"message":this.$5(e.message);break;case"pong":this.$2=!0,this.$16("executed",{dt:Math.floor(e.args[1]-e.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate(),this.$16("haste_error",{message:e.message});break;case"console":var r=e.args.shift();["log","error","info","debug","warn"].includes(r)||l(0,5983,r),t.console[r].apply(t.console,e.args);break}},o.$11=function(t){r.states.includes(t)||l(0,5984,t),this.$16("transition",{next_state:t}),this.$3=t},r.prepareResource=function(a,i){if(i===void 0&&(i=n("emptyFunction")),a.sameOriginURL||a.url||a.source||l(0,5985),r.isSupported()||l(0,5986),a.sameOriginURL)i();else if(a.url&&n("isSameOrigin")(new(e||(e=n("URI")))(a.url),new(e||(e=n("URI")))(t.location.href)))a.sameOriginURL=a.url,i();else if(a.source)n("justknobx")._("819")&&n("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",a.name,a.url),r.$23()&&(a.sameOriginURL=r.$24(a.source)),i();else if(n("gkx")("21112")&&a.useInitScript===!0)i();else if(n("justknobx")._("819")&&n("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",a.name,a.url),a.loading)a.loading.push(i);else{var o=(s||(s=n("performanceNow")))();a.loading=[i],r.$25(a.url,function(e){e?(a.source=e,r.$23()&&(a.sameOriginURL=r.$24(e)),r.$16("prepared",a.name,{dt:Math.floor((s||(s=n("performanceNow")))()-o),bytes:e.length},!1)):r.$16("failed",a.name,{dt:Math.floor((s||(s=n("performanceNow")))()-o),bytes:0},!1),a.loading.forEach(function(e){return e()}),a.loading=!1})}return a},r.releaseResource=function(t){return t.sameOriginURL.indexOf("blob:")===0&&(u.revokeObjectURL&&u.revokeObjectURL(t.sameOriginURL),t.sameOriginURL=null),t},r.isSupported=function(){return f},r.isMessageChannelSupported=function(){return r.areTransferablesSupported()&&!!t.MessageChannel},r.areTransferablesSupported=function(){return r.isSupported()&&g()},r.$25=function(t,r){new(n("XHRRequest"))(t).setTransportBuilder(n("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(e){r(e)}).setErrorHandler(r.bind(null,null)).send()},r.$24=function(t){if(r.$23()||l(0,5987),r.$19()){var e=n("BlobFactory").getBlob([t],{type:"application/javascript"});return u.createObjectURL(e)}if(r.$20())return"data:application/javascript,"+encodeURIComponent(t)},r.$19=function(){return n("BlobFactory").isSupported()&&p()},r.$20=function(){return _()},r.$23=function(){return r.$19()||r.$20()},r.$16=function(t,o,a,i){n("WebWorkerConfig").logging.enabled&&n("Bootloader").loadModules(["BanzaiLogger"],function(e){e.log(n("WebWorkerConfig").logging.config,babelHelpers.extends({},a,{features_array:r.$18(i),event:t,resource:o}))},"WebWorker")},o.constructWorker=function(t,n){return m(t,n)},o.$26=function(t,n){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,t,n));return}this.getInterfaceableWorker().postMessage({type:"port",message:t},n)},o.createMessageChannel=function(t,n){var e=new MessageChannel;return this.$26(t,[e.port2].concat(n||[])),e.port1.start(),e.port1},o.getInterfaceableWorker=function(){return this.__worker},r})();d.states=["constructed","preparing","executing","terminated"],d.evalWorkerURL=n("WebWorkerConfig").evalWorkerURL;function m(e,r){return new t.Worker(n("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),r!=null?{name:r}:{})}var p=n("memoize")(function(){var e,t;if(!u||!u.createObjectURL)return!1;try{e=u.createObjectURL(n("BlobFactory").getBlob([""],{type:"application/javascript"}));var r=m(e);r.terminate(),t=!0}catch(e){t=!1}finally{u.revokeObjectURL&&u.revokeObjectURL(e)}return t}),_=n("memoize")(function(){var e;try{var t=m("data:application/javascript,");t.terminate(),e=!0}catch(t){e=!1}return e}),f=!!t.Worker,g=n("memoize")(function(){var e;try{var t=m(d.evalWorkerURL),n=new ArrayBuffer(0);t.postMessage({buffer:n},[n]),t.terminate(),e=!0}catch(t){e=!1}return e});a.exports=d}),null);
__d("curry",["bind"],(function(t,n,r,o,a,i,l){var e=r("bind")(null,r("bind"),null),s=e;l.default=s}),98);
__d("loadImageFromBlob",["Promise"],(function(t,n,r,o,a,i){var e;function l(t){return new(e||(e=n("Promise")))(function(e,n){var r=new Image;r.onload=function(){URL.revokeObjectURL(r.src),e(r)},r.onerror=function(e){URL.revokeObjectURL(r.src),n(e)},r.src=URL.createObjectURL(t)})}i.default=l}),66);
__d("XComposerPhotoUploader",["AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","getErrorSafe","loadImageFromBlob","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=t.URL||t.webkitURL||{},u=(function(){function t(e){this.$6=!1,this.$21={},this.$2=e.uploadData||{},this.$1=e.uploadEndpoint,this.$3=e.retryLimit,this.$4=e.concurrentLimit,this.$5=e.resizer,this.$7=e.onUploadEnqueued||r("emptyFunction"),this.$8=e.onUploadsEnqueued||r("emptyFunction"),this.$9=e.onResizeStart||r("emptyFunction"),this.$12=e.onResizeProgress||r("emptyFunction"),this.$10=e.onResizeSuccess||r("emptyFunction"),this.$11=e.onResizeFailure||r("emptyFunction"),this.$13=e.onSphericalCheckFailure||r("emptyFunction"),this.$14=e.onSphericalCheckSuccess||r("emptyFunction"),this.$15=e.onUploadIsSpherical||r("emptyFunction"),this.$16=e.onUploadSent||r("emptyFunction"),this.$17=e.onUploadStart||r("emptyFunction"),this.$18=e.onUploadProgress||r("emptyFunction"),this.$19=e.onUploadSuccess||r("emptyFunction"),this.$20=e.onUploadFailure||r("emptyFunction"),this.$6=e.preventDefaultErrorHandler}var n=t.prototype;return n.setUploadEndpoint=function(t){this.$1=t},n.setOption=function(t,n){return this.$21[t]=n,this},n.getUploadData=function(){return this.$2},n.setUploadData=function(t){this.$2=t},n.upload=function(t,n){var e=this;n=n||0;var a=babelHelpers.extends({},this.$2),i=null;if(this.$22(t)){if(i=Array.from(t.files),i=i.filter(function(e){return!o("ReactComposerMediaFilterUtils").hasVideos([e.name])}),i.length===0)return;i.forEach(function(t){t.uploadID||(t.uploadID=o("PhotosUploadID").getNewID()),e.$7({uploadID:t.uploadID,fileName:t.name,isSpherical:!1,fileURL:s.createObjectURL?s.createObjectURL(t):null})})}else{var l=o("PhotosUploadID").getNewID();t.uploadID=l,a.upload_id=l,this.$7({uploadID:l,fileName:t.value.split("/").pop().split("\\").pop(),fileURL:s.createObjectURL?s.createObjectURL(t):null})}this.$8();var u=new(r("FileInputUploader"))(t).setURI(this.$1).setData(a).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);i&&i.length>0&&(u.setFiles({farr:i}),this.$5?u.setPreprocessHandler(this.$23.bind(this)):u.setPreprocessHandler(this.$24.bind(this)),this.$4&&u.setConcurrentLimit(this.$4)),u.subscribe("progress",function(n,r){return e.$18(e.$25(r,t),r)}),u.subscribe("failure",function(n,r){return e.$20(e.$25(r,t),r,i)}),u.subscribe("start",function(n,r){return e.$17(e.$25(r,t),r)}),u.subscribe("success",function(n,r){return e.$19(e.$25(r,t),r)});try{u.send(),this.$16(t)}catch(e){throw e}},n.uploadFiles=function(t){var e=this,n=Array.from(t),r=[];n.forEach(function(t){var n=o("PhotosUploadID").getNewID();t.uploadID||(t.uploadID=n),e.$7({fileName:t.name,fileURL:s.createObjectURL?s.createObjectURL(t):null,isSpherical:!1,uploadID:n}),r.push(n)});var a=this.getAsyncFileUploadRequest(n,r,this.$6===!0?{preventDefaultErrorHandler:this.$6}:void 0);a.send()},n.getAsyncFileUploadRequest=function(t,n,r){var e=this,o=this.$26(t,r);return o.subscribe("start",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$17(i,{upload:o})}),o.subscribe("progress",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$18(i,{upload:o,event:o.getProgressEvent()})}),o.subscribe("success",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$19(i,{upload:o,response:o.getResponse()})}),o.subscribe("failure",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);return e.$20(i,{upload:o,response:o.getResponse()},t)}),o},n.getAsyncUploadRequest=function(t,n){var e=this,r=this.$26(t,n);return r.subscribe("start",function(t,n){return e.$17(n.getFile().uploadID,{upload:n})}),r.subscribe("progress",function(t,n){return e.$18(n.getFile().uploadID,{upload:n,event:n.getProgressEvent()})}),r.subscribe("success",function(t,n){return e.$19(n.getFile().uploadID,{upload:n,response:n.getResponse()})}),r.subscribe("failure",function(n,r){return e.$20(r.getFile().uploadID,{upload:r,response:r.getResponse()},t)}),r},n.$26=function(t,n){var e=new(r("AsyncUploadRequest"))().setData(babelHelpers.extends({},n&&n.data,this.$2)).setFiles({farr:t}).setAllowCrossOrigin(!0).setURI(this.$1);n!=null&&n.preventDefaultErrorHandler&&e.setPreventDefaultErrorHandler(!0),this.$4&&e.setLimit(this.$4),this.$5?e.setPreprocessHandler(this.$23.bind(this)):e.setPreprocessHandler(this.$24.bind(this));for(var o in this.$21)e.setOption(o,this.$21[o]);return e},n.$27=function(t,n,r){var e=r.getFile(),o=t.indexOf(e);return n[o]},n.$25=function(t,n){return t.upload?t.upload.getFile().uploadID:n.uploadID},n.$24=function(t,n){var e=this;r("promiseDone")((async function(){return await e.$28(t,n)})())},n.$28=async function(t,n){var e=t.getFile(),r=await this.$29(e),o=t.getFile().uploadID;r&&r.isSpherical()?this.$15(r.isSpherical(),r,o):this.$15(!1,null,""),n(t)},n.$23=function(t,n){var e=this;r("promiseDone")((async function(){return await e.$30(t,n)})())},n.$29=async function(n){var t=(e||(e=r("performanceNow")))();try{var o=await r("SphericalImage").createFromBlob(n);return this.$14(n,(e||(e=r("performanceNow")))()-t,o),o}catch(o){return this.$13(n,(e||(e=r("performanceNow")))()-t),null}},n.$31=function(t){return this.$32(this.$5.resizeBlob.bind(this.$5),t)},n.$33=function(t,n){return n===void 0&&(n=r("SphericalPhotoTypedConfig").upload_size_limit),this.$32(this.$5.resize360Blob.bind(this.$5),t,n)},n.$34=function(t){return r("loadImageFromBlob")(t).then(function(e){return{width:e.width,height:e.height}})},n.$32=function(t,n,o){var e=this,a=r("curry")(this.$12,n.uploadID),i=r("curry")(this.$9,n),l=function(){return e.$34(n).then(i)};return new Promise(function(e,r){l(),t(n,function(t,n,o,a,i,l,s){t?r(t):e(o?{originalWidth:a,originalHeight:i}:{blob:n,originalWidth:a,originalHeight:i,outputWidth:l,outputHeight:s})},a,o)})},n.$30=async function(n,a){var t=n.getFile(),i=this.$5.isEligible(t==null?void 0:t.size,t==null?void 0:t.type);if(!t||!o("PhotosMimeType").isJpeg(t.type)||!i){this.$15(!1,null,""),t&&r("promiseDone")(this.$34(t).then(function(e){n.getAdditionalData().set("js_resized",!1).set("original_file_size",t.size).set("original_width",e==null?void 0:e.width).set("original_height",e==null?void 0:e.height).set("upload_width",e==null?void 0:e.width).set("upload_height",e==null?void 0:e.height)},r("emptyFunction"))),a(n);return}var l=(e||(e=r("performanceNow")))(),s,u;try{var c=null;if(c=await this.$29(t),c&&c.isSpherical()){this.$15(!0,c,t.uploadID);var d=c.getSize(),m=r("SphericalPhotoTypedConfig").upload_size_limit,p=c.getProjectionType(),_=!1;_=o("SphericalPhotoUploadHelper").shouldRecompress360(p,c.getBufferLength(),r("SphericalPhotoTypedConfig").upload_bytes_limit);var f=o("SphericalPhotoUploadHelper").shouldResize360(p,d,m);d&&(f||_)&&(f?s=await this.$33(t):s=await this.$33(t,Math.max(d.x,d.y)-1))}else this.$15(!1,null,""),s=await this.$31(t);s&&(s.blob!=null&&(u=s.blob,u.uploadID=t.uploadID,u.name=t.name,n.setFile(u)),n.getAdditionalData().set("js_resized",!0).set("original_file_size",t.size).set("original_width",s.originalWidth).set("original_height",s.originalHeight).set("upload_width",s.outputWidth).set("upload_height",s.outputHeight));var g=u===null;n.getFile().filename=t.name,this.$10(t,u||t,g,(e||(e=r("performanceNow")))()-l,n.getAdditionalData().get("original_width"),n.getAdditionalData().get("original_height"),n.getAdditionalData().get("upload_width"),n.getAdditionalData().get("upload_height"))}catch(n){var h=r("getErrorSafe")(n),y=(e||(e=r("performanceNow")))()-l;this.$11(t,u||t,h,y)}a(n)},n.$22=function(t){return!!t.files&&r("AsyncUploadRequest").isSupported()},t})();l.default=u}),98);/*FB_PKG_DELIM*/
__d("CAAPasskeyCreationEntryPoint",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ACCOUNT_SPLIT:"account_split",ACCOUNTS_CENTER_PASSKEY_MANAGEMENT:"accounts_center_passkey_management",ACCOUNTS_CENTER_PASSWORD_AND_SECURITY:"accounts_center_password_and_security",ACCOUNTS_CENTER_PASSWORD_AND_SECURITY_MOBILE:"accounts_center_password_and_security_mobile",ACCOUNTS_CENTER_PASSWORD_AND_SECURITY_MOBILE_BADGE:"accounts_center_password_and_security_mobile_badge",ADVANCED_PROTECTION:"advanced_protection",ADVANCED_PROTECTION_BOTTOM_SHEET:"advanced_protection_bottom_sheet",ADVANCED_PROTECTION_WITH_SKIP:"advanced_protection_with_skip",BLOKS_SHELL_TEST:"bloks_shell_test",BUSINESS_SETTINGS:"business_settings",ENCRYPTED_BACKUPS:"encrypted_backups",LOGIN_FLOW:"login_flow",MEGAPHONE:"megaphone",MIGRATION_MOMENT_NUX:"migration_moment_nux",NFX_COMPROMISED_ACCOUNT:"nfx_compromised_account",PAYMENTS_AUTOFILL:"payments_autofill",POST_AFAD_MOBILE:"post_afad_mobile",POST_AFAD_WEB:"post_afad_web",POST_EPSILON:"post_epsilon",POST_EPSILON_MOBILE:"post_epsilon_mobile",POST_EPSILON_WEB:"post_epsilon_web",POST_LOGIN_CHALLENGE:"post_login_challenge",POST_LOGIN_UPSELL:"post_login_upsell",POST_LRR:"post_lrr",POST_LRR_WEB:"post_lrr_web",POST_REAUTH:"post_reauth",POST_SENSITIVE_ACTION_REVIEW_CHALLENGE:"post_sensitive_action_review_challenge",POST_SESSION_VERIFICATION:"post_session_verification",POST_TWO_FACTOR_LOGIN:"post_two_factor_login",SECURITY_CHECKUP:"security_checkup"}),l=e;i.default=l}),66);
__d("CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25769508135984533"}),null);
__d("CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters",["CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation"),metadata:{},name:"CometIXTFacebookCDSXfacUniversalTriggerRootQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("CometIXTFacebookCDSXfacUniversalTriggerEntryPoint.entrypoint",["CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","react","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u={getPreloadProps:function(t){return{queries:{reference:{parameters:r("CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters"),variables:{input:babelHelpers.extends({},t,{nt_context:null,trigger_session_id:r("uuidv4")()}),scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("CometIXTFacebookCDSXfacUniversalTriggerRoot.react").__setRef("CometIXTFacebookCDSXfacUniversalTriggerEntryPoint.entrypoint")},c=u;l.default=c}),98);
__d("EBSMDBAPI",["EBDB","EBSMProperties","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.hasUserGivenAutoRestoreConsent,n=t?["secure_encrypted_backups_epochs","secure_encrypted_backups_client_state"]:[];n.push("auto_restore_opt_out");var a=Array.from(r("EBSMProperties").persistedTables).filter(function(e){return!n.includes(e)});try{var i=t?[]:["device_state"];if(i=i.concat(a),i.length>0){var l=await o("EBDB").getEBDB();await l.runInTransaction(i,"readwrite",function(e){return Promise.all(i.map(function(t){return e.stores[t].clear()}))},"EBDB - clear on logout")}}catch(e){r("FBLogger")("wmi_eb").mustfix(e)}}l.clearEBIDBNonPersistedRows=e}),98);
__d("EBSMWorkerThreadAPI",["EBAPIQPLPoints","EBDeps","I64","LSIntEnum","MAWQplProxy","MAWWaitForBackendSetup","MWEncryptedBackupsFirstRestoreUpsellTime","Promise","QPLFlow","WAResultOrError","WebSession","justknobx","qpl","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c=r("requireDeferred"))("EBAddDeviceWithKeys").__setRef("EBSMWorkerThreadAPI"),m=c("EBAddDeviceWithRecoveryCode").__setRef("EBSMWorkerThreadAPI"),p=c("EBAddVirtualDevice").__setRef("EBSMWorkerThreadAPI"),_=c("EBDeleteBackupsOnClient").__setRef("EBSMWorkerThreadAPI"),f=c("EBDeleteEncryptedBackup").__setRef("EBSMWorkerThreadAPI"),g=c("EBFetchBackupIds").__setRef("EBSMWorkerThreadAPI"),h=c("EBGenerateRecoveryCode").__setRef("EBSMWorkerThreadAPI"),y=c("EBGetEBState").__setRef("EBSMWorkerThreadAPI"),C=c("EBGetLSVirtualDevices").__setRef("EBSMWorkerThreadAPI"),b=c("EBInitializeBackup").__setRef("EBSMWorkerThreadAPI"),v=c("EBIsEbEnabled").__setRef("EBSMWorkerThreadAPI"),S=c("EBOptOut").__setRef("EBSMWorkerThreadAPI"),R=c("EBOtcAddDevice").__setRef("EBSMWorkerThreadAPI"),L=c("EBRepairEpochs").__setRef("EBSMWorkerThreadAPI"),E=c("EBRevokeVirtualDevice").__setRef("EBSMWorkerThreadAPI"),k=c("EBSyncEpochs").__setRef("EBSMWorkerThreadAPI"),I={addDeviceWithEBKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return e.addDeviceWithEBKeys.apply(e,t)})},addDeviceWithRecoveryCode:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(t.length===0||t[0]==null)return(u||(u=n("Promise"))).reject("Missing args");var i=o("QPLFlow").startQPLFlow(r("qpl")._(521473756,"2768"),{annotations:{bool:{isBackendSetupOnStart:o("EBDeps").getDeps().isBackendSetupSuccessful(),isEBAddDeviceWithKeys:!1}},timeoutInMs:r("justknobx")._("2444")});return m.load().then(function(e){return e.addDeviceWithRecoveryCode(babelHelpers.extends({},t[0],{qplFlow:i}))})},addVirtualDevice:function(t){var e=t.actionType,a=t.qplInstanceKeyMainthread,i=t.recoveryCodeData,l=a!=null?o("MAWQplProxy").continueQplAsCrossBridgeQplFlow(r("qpl")._(521483240,"615"),{instanceKey:a}):o("QPLFlow").startQPLFlow(r("qpl")._(521483240,"615"),{annotations:{int:{actionType:e}},timeoutInMs:r("justknobx")._("4211")});return l.addPoint("add_virtual_device_worker_start"),i==null?(l.endFail("add_virtual_device_fail_no_recovery_code_worker"),(u||(u=n("Promise"))).resolve(o("WAResultOrError").makeError("ADD_VIRTUAL_DEVICE_NULL_RECOVERY_CODE_DATA"))):p.load().then(function(t){return t.addVirtualDevice({actionType:e,qplFlow:l,recoveryCodeData:i})})},deleteBackupsOnClient:function(t){var e=t.reason;return _.load().then(function(t){return t.deleteBackupsOnClient({reason:e})})},deleteEncryptedBackup:function(t){var e=t.qplInstanceKeyMainthread,n=t.reason,a=e!=null?o("MAWQplProxy").continueQplAsCrossBridgeQplFlow(r("qpl")._(521484370,"2995"),{instanceKey:e}):o("QPLFlow").startQPLFlow(r("qpl")._(521484370,"2995"),{timeoutInMs:r("justknobx")._("4553")});return a.addPoint(o("EBAPIQPLPoints").EBDeleteEBQPLPoints.DELETE_EB_WORKER_START),f.load().then(function(e){return e.deleteEncryptedBackup({qplFlow:a,reason:n})})},ebOptOut:function(t){var e=t!=null?o("MAWQplProxy").continueQplAsCrossBridgeQplFlow(r("qpl")._(521482558,"2558"),{instanceKey:t}):o("QPLFlow").startQPLFlow(r("qpl")._(521482558,"2558"),{annotations:{string:{ebSessionIdentifier:o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),fetchBackupIdsVersion:"msys",sessionTabId:o("WebSession").getId()}}});return e.addPoint(o("EBAPIQPLPoints").EBOptOutQPLPoints.OPT_OUT_BACKUP_WORKER_START),S.load().then(function(t){return t.ebOptOut({qplFlow:e})})},fetchBackupIds:function(t){var e=o("QPLFlow").startQPLFlow(r("qpl")._(521471024,"2275"),{annotations:{string:{ebSessionIdentifier:o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),fetchBackupIdsVersion:"msys",sessionTabId:o("WebSession").getId()}}});return e.addPoint("eb_fetch_backup_ids_worker_start"),g.load().then(function(n){return n.fetchBackupIds(t,e)})},generateRecoveryCode:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.load().then(function(e){return e.generateRecoveryCode.apply(e,t)})},getEBState:function(){return y.load().then(function(e){return e.GetEbState()})},getLSVirtualDevices:function(t){return C.load().then(function(e){return e.getLSVirtualDevices(t)})},initializeBackup:function(a){var t=a.recoveryCodeData,i=a.virtualDeviceType,l=o("QPLFlow").startQPLFlow(r("qpl")._(521478750,"2850"),{annotations:{int:{virtualDeviceType:(e||(e=o("I64"))).to_int32(i)}},timeoutInMs:r("justknobx")._("4211")});l.addPoint(o("EBAPIQPLPoints").EBBackupInitQPLPoints.INITIALIZE_BACKUP_WORKER_START);var c=e.equal(i,(s||(s=o("LSIntEnum"))).ofNumber(16));return t==null&&!c?(l.endFail("recoveryCodeData null for non-Automatic EB"),(u||(u=n("Promise"))).resolve(o("WAResultOrError").makeError("recoveryCodeData null for non-Automatic EB"))):b.load().then(function(e){return e.initializeBackup(l,i,t)})},isEbEnabled:function(){return v.load().then(function(e){return e.isEbEnabledEbSwitch()})},optOutOfBackup:function(){return(u||(u=n("Promise"))).resolve()},otcAddDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0].qplInstanceKeyMainthread!=null?o("MAWQplProxy").continueQplAsCrossBridgeQplFlow(r("qpl")._(521473756,"2768"),{instanceKey:t[0].qplInstanceKeyMainthread}):o("QPLFlow").startQPLFlow(r("qpl")._(521473756,"2768"),{annotations:{bool:{isBackendSetupOnStart:o("MAWWaitForBackendSetup").isBackendSetupSuccessful(),isEBAddDeviceWithKeys:!1,isInWorker:!1,isOTC:!0}},timeoutInMs:r("justknobx")._("2444")});return R.load().then(function(e){return e.otcAddDevice(babelHelpers.extends({},t[0],{qplFlow:a}))})},repairEpochs:function(){return L.load().then(function(e){return e.EBRepairEpochs()})},revokeVirtualDevice:function(t){var e=t.qplInstanceKeyMainthread,n=t.virtualDeviceId,a=e!=null?o("MAWQplProxy").continueQplAsCrossBridgeQplFlow(r("qpl")._(521473995,"3294"),{instanceKey:e}):o("QPLFlow").startQPLFlow(r("qpl")._(521473995,"3294"));return a.addPoint("revoke_virtual_device_worker_start"),E.load().then(function(e){return e.revokeVirtualDevice(n,a)})},syncEpochs:function(){return k.load().then(function(e){return e.EBSyncEpochs()})}},T=I;l.default=T}),98);
__d("EBWorkerODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EB_AUTO_RESTORE_MAIN_THREAD:"mw_eb_auto_restore_main_thread",MW_EB_AUTO_RESTORE_WORKER:"mw_eb_auto_restore_worker",MW_EB_DEVICE_MIGRATION_WORKER:"mw_eb_device_migration_worker",MW_EB_OTC_MAIN_THREAD:"mw_eb_otc_main_thread",EB_WORKER_ADD_DEVICE_WITH_KEYS:"eb_worker_add_device_with_keys",EB_WORKER_ADD_DEVICE_WITH_RC:"eb_worker_add_device_with_rc",EB_WORKER_OPT_OUT:"eb_worker_opt_out"}),l=e;i.default=l}),66);
__d("FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters",["cr:8979"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:8979")}),34);
__d("XFBCAAPasskeyCreationEntryPointUtils.facebook",["$InternalEnumUtils","CAAPasskeyCreationEntryPoint"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("CAAPasskeyCreationEntryPoint")),s=o("$InternalEnumUtils").createFromJSEnum(r("CAAPasskeyCreationEntryPoint"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint",["FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters","JSResourceForInteraction","XFBCAAPasskeyCreationEntryPointUtils.facebook","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e,a,i,l,s=r("nullthrows")(o("XFBCAAPasskeyCreationEntryPointUtils.facebook").fromJSEnum((e=t.entrypoint)!=null?e:(a=t.routeProps)==null?void 0:a.entrypoint),"passkey entrypoint cannot be null in FXAccountsCenterPasskeyCreationUpsellRoot entrypoint"),u={entrypoint:s};return{extraProps:{entrypoint:(i=t.entrypoint)!=null?i:(l=t.routeProps)==null?void 0:l.entrypoint,showSuccessDialog:t.showSuccessDialog,variant:t.variant},queries:{query:{parameters:n("FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters"),variables:u}}}},root:r("JSResourceForInteraction")("FXAccountsCenterPasskeyCreationUpsellRoot.react").__setRef("FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint")};l.default=e}),98);
__d("FXAccountsCenterPasskeyCreationUpsellRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25197454896514486"}),null);
__d("FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters.facebook",["FXAccountsCenterPasskeyCreationUpsellRootQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("FXAccountsCenterPasskeyCreationUpsellRootQuery_facebookRelayOperation"),metadata:{},name:"FXAccountsCenterPasskeyCreationUpsellRootQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("FalcoAppUniverse",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3}),l=e;i.default=l}),66);
__d("Queue",[],(function(t,n,r,o,a,i){var e={},l=(function(){function t(e){this._timeout=null,this._interval=(e==null?void 0:e.interval)||0,this._processor=e==null?void 0:e.processor,this._queue=[],this._stopped=!0}var n=t.prototype;return n._dispatch=function(t){var e=this;if(t===void 0&&(t=!1),!(this._stopped||this._queue.length===0)){var n=this._processor;if(n==null)throw this._stopped=!0,new Error("No processor available");var r=this._interval;if(r!=null)n.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return e._dispatch()},r);else for(;this._queue.length;)n.call(this,this._queue.shift())}},n.enqueue=function(t){return this._processor&&!this._stopped?this._processor(t):this._queue.push(t),this},n.start=function(t){return t&&(this._processor=t),this._stopped=!1,this._dispatch(),this},n.isStarted=function(){return!this._stopped},n.dispatch=function(){this._dispatch(!0)},n.stop=function(t){return this._stopped=!0,t&&this._timeout!=null&&clearTimeout(this._timeout),this},n.merge=function(t,n){if(n){var e;(e=this._queue).unshift.apply(e,t._queue)}else{var r;(r=this._queue).push.apply(r,t._queue)}return t._queue=[],this._dispatch(),this},n.getLength=function(){return this._queue.length},t.get=function(r,o){var n;return r in e?n=e[r]:n=e[r]=new t(o),n},t.exists=function(n){return n in e},t.remove=function(n){return delete e[n]},t})();i.default=l}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),g=5*1024,h=(e=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue)!=null?e:60*1e3,y=(s=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?s:1e3,C=(u=(m||(m=r("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?u:1e3,b="falco:",v=new(r("Queue")),S=5e3,R=6e4,L=r("uuidv4")(),E="ods_web_batch",k=new Map,I=new Set,T=new Set,D=o("FalcoUtils").getTaggedBitmap(38),x=(c=r("FalcoAppUniverse").cast((m||(m=r("AnalyticsCoreData"))).app_universe))!=null?c:1,$=[],P=0,N=null,M=!1,w=!1,A=!1,F=!0,O=!1,B=!1,W=Date.now()-R,q=1,U=C>h?C:h,V=C;de();for(var H of(G=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?G:[]){var G;I.add(H)}for(var z of(j=(m||(m=r("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?j:[]){var j;T.add(z)}function K(){return(m||(m=r("AnalyticsCoreData"))).enable_bladerunner&&!(_||(_=r("ExecutionEnvironment"))).isInWorker}function Q(e,t){o("FalcoUtils").bumpODSMetrics(t.item.name,"event.info.streaming.batched",1);var n=t.item.extra.length;P+n>g&&(clearTimeout(N),X()),$.push([e,t]),P+=n}function X(){N=null,M=!1;var e=$;re("event.info.streaming.batch_processing",e.map(function(e){return e[1].item})),B?v.enqueue(function(t){return t.log(e.map(function(e){return e[1].item}),function(t){if(!t){Y(e,"event.info.banzai_fallback");return}J(e,t,"event.info.streaming.enqueued")})}):Y(e,"event.non_critical_failure.streaming_init_not_complete"),$=[],P=0}function Y(e,t){var n=function(){var e,n=a[0],i=a[1],l=i.item;if(o("FalcoUtils").bumpODSMetrics(l.name,t,1),l.identity||(l.identity=(m||(m=r("AnalyticsCoreData"))).identity),(e=l.logCritical)!=null&&e)ae.logCritical([l],function(e){return n.markItem(i,e)});else{var s;(s=l.logImmediate)!=null&&s?ae.logImmediately([l],function(e){return n.markItem(i,e)}):ae.log([l],function(e){return n.markItem(i,e)})}};for(var a of e)n()}function J(e,t,n){for(var r of e){var a=r[0],i=r[1];o("FalcoUtils").bumpODSMetrics(i.item.name,n,1),a.markItem(i,t)}}function Z(e){return{events:e.map(function(e){return{name:e.name,extra:e.extra,rate:e.policy.r,time:e.time/1e3,tag:0,tags:e.tags,shouldAddState:e.shouldAddState,identity:te(e.identity),expTags:e.exptTags,sessionID:e.sessionId,deviceID:e.deviceId}})}}function ee(e){var t,n,o,a={deviceId:(m||(m=r("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:e,appId:m.app_id,appVersion:(t=(m||(m=r("AnalyticsCoreData"))).app_version)!=null?t:null,bundleId:null,consentState:null,identity:null,pushPhase:m.push_phase};return((n=(o=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:o.length)!=null?n:0)>0&&(a.ambientState=(m||(m=r("AnalyticsCoreData"))).state_for_br),a.identity=te(m.identity),Object.freeze(a)}function te(e){var t=e==null?void 0:e.claim,n=t!=null?[t]:[];if(x===2||x===3){var r=e==null?void 0:e.appScopedIdentity;if(r!==void 0)return{appScopedIdentity:{uid:r,identifier:r,claims:n}}}else{var o=e==null?void 0:e.fbIdentity;if(o!==void 0)return{facebookIdentity:{actorId:o.actorId,accountId:o.accountId,claims:n}}}return null}function ne(e,t){for(var n of e){var a,i,l,s=(l={},l.e=n.extra,l.r=n.policy.r,l.d=(a=n.deviceId)!=null?a:(m||(m=r("AnalyticsCoreData"))).device_id,l.s=(i=n.sessionId)!=null?i:o("WebSession").getId(),l.t=n.time,l.a=n.appVersion,l);n.privacyContext&&(s.p=n.privacyContext),n.tags!=null&&(s.b=n.tags);var u=n.identity;u&&(s.id=u),r("Banzai").post(b+n.name,s,t)}re("event.uploaded",e)}function re(e,t){for(var n of t)n.name!==E&&o("FalcoUtils").bumpODSMetrics(n.name,e,1)}function oe(e,t){var n="falco.fabric.www."+(m||(m=r("AnalyticsCoreData"))).push_phase;(d||(d=o("ODS"))).bumpEntityKey(1344,n,e,t)}var ae={log:function(t,n){re("event.info.banzai.log.upload_processing",t),ne(t,r("Banzai").BASIC),n(!0)},logImmediately:function(t,n){re("event.info.banzai.log_immediately.upload_processing",t),ne(t,r("Banzai").VITAL),n(!0)},logCritical:function(t,n){re("event.info.banzai.log_critical.upload_processing",t),ne(t,{signal:!0,retry:!0}),n(!0)}};function ie(e){de();var t=le(e,"banzai_data_loss","log"),n=le(e,"banzai_data_loss","logImmediately"),o=le(e,"banzai_data_loss","logCritical"),a=le(e,"bladerunner_data_loss",""),i=le(e,"bladerunner_data_loss","logCritical");if(oe("js.br_data_loss.posted."+e,1),B&&F)try{v.enqueue(function(t){return t.log([a],function(t){if(!t){oe("js.br.transport_failure."+e,1),ae.logCritical([i],function(t){oe("js.br.failure_fallback_success_callback."+e,1)});return}oe("js.br.success_callback."+e,1)})})}catch(t){oe("js.br.error_enqueueing."+e,1),ae.logCritical([i],function(t){oe("js.br.enqueuing_fallback_success_callback."+e,1)})}else F||oe("js.br.failed."+e,1),B||oe("js.br.init_not_complete."+e,1),ae.logCritical([i],function(t){oe("js.br.init_fallback_success_callback."+e,1)});ne([t],r("Banzai").BASIC),ne([n],r("Banzai").VITAL),ne([o],{signal:!0,retry:!0})}function le(e,t,n){return{name:t,time:(p||(p=r("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:e,falco_js_connection_id:L,logging_mode:n,logging_flow_flag:"original_flow"}),appVersion:(m||(m=r("AnalyticsCoreData"))).app_version}}function se(){W+S<Date.now()&&(ie(q),W=Date.now(),q++)}function ue(){window.setTimeout(function(){se(),q<=40&&ue()},R)}function ce(e){v.start(function(t){return t({log:function(n,o){re("event.info.streaming.queue_processing",n);var t=JSON.stringify(Z(n));e?(m||(m=r("AnalyticsCoreData"))).enable_ack?r("promiseDone")(e.amendWithAck(t),function(e){e?(re("event.streamed.with_ack",n),re("event.uploaded",n)):re("event.non_critical_failure.streaming.ack_failed",n),o(e)},function(){re("event.non_critical_failure.streaming.ack_rejected",n),o(!1)}):(e.amendWithoutAck(t),re("event.streamed.without_ack",n),re("event.uploaded",n)):(re("event.non_critical_error.streaming.stream_not_available",n),o(!1))},logImmediately:function(t,n){this.log(t,n)},logCritical:function(t,n){this.log(t,n)}})})}function de(){w||(B=!1,K()&&(f.onReady(function(e){if(!e){F=!1,O=!0,v.start(function(e){return e(ae)});return}var t=e,n,a={onTermination:function(t){t.message==="Stream closed"?(v.stop(!0),w=!1):(o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,v.start(function(e){return e(ae)}))},onFlowStatus:function(){}};r("promiseDone")(t.requestStream({method:"Falco"},JSON.stringify(ee(o("WebSession").getId())),a,{requestId:""}).then(function(e){n=e,ce(n),B=!0,U=h,V=y}).catch(function(e){o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),v.stop(!0),w=!1}))}),w=!0))}function me(e){var t,n=e.name;if(!K()||!F)return!1;if(I.has(n)||e.policy.s!==1&&((t=(m||(m=r("AnalyticsCoreData"))).br_stateful_migration_on)!=null&&t)){var a;return e.shouldAddState=!0,e.tags=o("FalcoUtils").xorBitmap((a=e.tags)!=null?a:[0,0],D),!0}if(x!==1&&(m||(m=r("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!T.has(n))return!1;if(e.policy.s===1){var i;return e.tags=o("FalcoUtils").xorBitmap((i=e.tags)!=null?i:[0,0],D),!0}return!1}function pe(e){if(e==="")return null;if(k.has(e))return k.get(e);var t={claim:""},n=e.split("^#");if(n.length>=4){var r=n[0],o=n[1],a=n[2],i=n[3];a!==""?t={appScopedIdentity:a,claim:i}:r!==""&&(t={fbIdentity:{accountId:r,actorId:o},claim:i}),k.set(e,t)}return t}function _e(){if(A)return;A=!0,r("PersistedQueue").setHandler("falco_queue_log",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log",1),de(),N==null&&(N=setTimeout(X,U)),i&&!e(a)&&(n.item.identity=i),Q(t,n)):(i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.log([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_immediately",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_immediately",1),de(),(N==null||!M)&&(clearTimeout(N),N=setTimeout(X,V),M=!0),n.item.logImmediate=!0,i&&!e(a)&&(n.item.identity=i),Q(t,n),r("PersistedQueue").isPersistenceAllowed()||(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.streaming_no_persistence.log_immediately",1),X())):(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_immediately",1),i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.logImmediately([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_critical",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){var l=n.item;me(l)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_critical",1),de(),l.logCritical=!0,B?(i&&!e(a)&&(l.identity=i),v.enqueue(function(e){return e.logCritical([l],function(e){if(!e){l.identity||(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity),Y([[t,n]],"event.info.banzai_fallback.log_critical");return}J([[t,n]],e,"event.uploaded")})})):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,Y([[t,n]],"event.non_critical_failure.streaming_init_not_complete.log_critical"))):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_critical",1),ae.logCritical([l],function(e){return t.markItem(n,e)}))})(n)}),(m||(m=r("AnalyticsCoreData"))).enable_dataloss_timer&&(de(),se(),ue());function e(e){try{var t=o("FalcoUtils").identityToString((m||(m=r("AnalyticsCoreData"))).identity);return e===t}catch(e){return(d||(d=o("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1),!0}}}l.attach=_e}),98);
__d("MAWDropCutoverThreadsTable",["Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=o("ReQL").fromTableAscending(t.cutover_threads);return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.cutover_threads.delete(n.openThreadId)})},(e||(e=n("Promise"))).resolve())})}l.call=s}),98);
__d("ReStoreEvent",[],(function(t,n,r,o,a,i){"use strict";var e=function(){};i.default=e}),66);
__d("ReStoreIndexedDbClosedEvent",["ReStoreEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.idb=t,r.error=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getError=function(){return this.error},t})(r("ReStoreEvent"));l.default=e}),98);
__d("ReStoreIndexedDbFailToOpenEvent",["ReStoreEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(r("ReStoreEvent"));l.default=e}),98);
__d("ReStoreIndexedDbUpgradedEvent",["ReStoreEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(r("ReStoreEvent"));l.default=e}),98);
__d("ReStoreUnexpectedlyClosed",[],(function(t,n,r,o,a,i){"use strict";var e="ReStoreUnexpectedlyClosed",l=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.ERROR_NAME=e,i.ReStoreUnexpectedlyClosed=l}),66);
__d("GetLsDatabase",["ExecutionEnvironment","LSDefaultSyncGroups","LSPlatformErrorChannel","LSPlatformLsInitLog","MAWDropCutoverThreadsTable","MessengerLogHistory","MultipleTabsLogger","ReStoreDecryptionFailure","ReStoreEARSetupFailure","ReStoreIndexedDbClosedEvent","ReStoreIndexedDbFailToOpenEvent","ReStoreIndexedDbUpgradedEvent","ReStoreUnexpectedlyClosed","UserTimingUtils","cr:10099","cr:10200","cr:10755","cr:4489","cr:6218","cr:665","cr:7000","cr:7351","cr:8915","justknobx","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e=n("cr:6218"))!=null?e:n("cr:10755"),d=(s=n("cr:7000"))!=null?s:n("cr:7351");function m(e){if(e instanceof r("ReStoreIndexedDbUpgradedEvent")&&c!=null&&r("justknobx")._("1410"))r("promiseDone")(c.killSharedWorker(!0,"ls_upgrade"));else if(e instanceof r("ReStoreIndexedDbClosedEvent")){var t=e.getError();n("cr:8915")!=null&&t instanceof(n("cr:8915")==null?void 0:n("cr:8915").ReStoreDbVersionChange)||t instanceof o("ReStoreDecryptionFailure").ReStoreDecryptionFailure||t instanceof o("ReStoreEARSetupFailure").ReStoreEARSetupFailure?r("LSPlatformErrorChannel").emit(t):t instanceof o("ReStoreUnexpectedlyClosed").ReStoreUnexpectedlyClosed&&n("cr:10099")!=null?(n("cr:10099")==null||n("cr:10099").releaseIfExist(),r("LSPlatformErrorChannel").emit(t)):t instanceof r("ReStoreIndexedDbFailToOpenEvent")&&n("cr:10099")!=null&&(n("cr:10099")==null||n("cr:10099").releaseIfExist())}}var p=async function(){var e=o("MessengerLogHistory").getInstance("db_init");r("promiseDone")(o("MultipleTabsLogger").getMultipleTabsAnnotation().then(function(t){e.debug("Has multiple tabs: "+t),o("MultipleTabsLogger").addAnnotationToQPLEvent(r("qpl")._(25305590,"1127"))})),e.debug("====Creating DB===="),o("LSPlatformLsInitLog").addPoint("vaulting_setup_start"),n("cr:4489")!=null&&n("cr:665")!=null&&(u||(u=r("ExecutionEnvironment"))).isInBrowser&&(e.debug("Vaulting setup started"),n("cr:665").setupMainWaLogger(),await o("UserTimingUtils").asyncMeasure("Setup Vaulting Materials",async function(){await n("cr:4489").setupVaultMaterials()}),e.debug("Vaulting setup finished")),o("LSPlatformLsInitLog").addPoint("vaulting_setup_end"),e.debug("Connecting to DB");var t=await n("cr:10200").createDB(m);return e.debug("Connection established"),await t.runInTransaction(async function(t){var n=d==null?[Promise.resolve(),Promise.resolve()]:[d.call(t),o("MAWDropCutoverThreadsTable").call(t)],r=n[0],a=n[1];await Promise.all([r,a]),o("LSPlatformLsInitLog").addPoint("success_maw_data_deletion"),e.debug("Seeding DB"),await o("LSDefaultSyncGroups").seedDb(t,void 0),e.debug("DB seeded")},"readwrite","ui",void 0,i.id+":113"),e.debug("====DB created===="),t},_;function f(){return _==null&&(_=(u||(u=r("ExecutionEnvironment"))).isInBrowser?p():new Promise(function(){})),_}l.get=f}),98);
__d("LSMqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvInitializer","MqttLogger","Random","clearTimeout","qex","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e={initialize:function(t,n,a,i){var e=r("qex")._("2071"),l=e!=null&&e!=="default"?e:null;o("MqttEnv").Env.initialize(r("Random").random,t!=null?t:o("CurrentMessengerUser").isLoggedInNow,r("clearTimeout"),r("setTimeoutAcrossTransitions"),function(){return r("MqttLogger").getInstance(l)},function(e){return n!=null&&n[e]!=null?n[e]:r("MqttEnvInitializer").genGk(e)},null,null,null,a!=null?a:o("MqttEnvConfigStorage").configRead,i!=null?i:o("MqttEnvConfigStorage").configWrite)}},s=e;l.default=s}),98);
__d("LSMqttChannel",["FBLogger","LSMqttEnvInitializer","MqttChannel","MqttConfig","WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o,a,i,l){return r("LSMqttEnvInitializer").initialize(t,n,o,a),(i==null||i===r("MqttConfig").appID)&&r("FBLogger")("S521050_debug_logging").warn("Constructing an MQTT client without a specified App ID."),new(r("MqttChannel"))({appId:i!=null?i:r("MqttConfig").appID,capabilities:r("MqttConfig").capabilities,chatVisibility:r("MqttConfig").chatVisibility,clientCapabilities:r("MqttConfig").clientCapabilities,deviceId:e,endpoint:r("MqttConfig").endpoint,guestAuthString:l,initialSubscribedTopics:r("MqttConfig").subscribedTopics,phpOverride:r("MqttConfig").hostNameOverride,pollingEndpoint:r("MqttConfig").pollingEndpoint,userFbid:r("MqttConfig").fbid})}var s=null,u=new(o("WAResolvable")).Resolvable;function c(t,n,r,o,a,i,l){if(s==null){var c=e(t,n,r,o,a,i,l);return s=c,u.resolve(c),c}else return s}function d(){s!=null&&(s.shutdown(),s=null,u=new(o("WAResolvable")).Resolvable)}function m(){return u.promise}var p={getInstance:c,getMqttChannelPromise:m,shutdownAndClear:d};l.default=p}),98);
__d("MAWCatQuery.graphql",["cr:11203"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:11203")}),34);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MAWCatQuery.graphql"),u=s;l.default=u}),98);
__d("MAWCatQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29559957360285299"}),null);
__d("MAWCatQuery.facebook.graphql",["MAWCatQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:e},params:{id:n("MAWCatQuery_facebookRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MAWCryptoAuthToken",["FBLogger","MAWCatQuery","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null||e.secure_message_over_wa_cat_query==null||e.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||e.secure_message_over_wa_cat_query.expiration_time_in_seconds==null){var t,n;return r("FBLogger")("maw_device_reg").warn("Crypto Auth Token was null or incomplete %s:%s:%s:%s",e==null,(e==null?void 0:e.secure_message_over_wa_cat_query)==null,(e==null||(t=e.secure_message_over_wa_cat_query)==null?void 0:t.encrypted_serialized_cat)==null,e==null||(n=e.secure_message_over_wa_cat_query)==null?void 0:n.expiration_time_in_seconds),{error:"Crypto Auth Token was null or incomplete"}}return{success:{encrypted_serialized_cat:e.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:e.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function s(t){return o("relay-runtime").fetchQuery(t,r("MAWCatQuery"),{}).toPromise().then(e).then(function(e){if(e.error!==null&&e.error!==void 0)throw r("FBLogger")("maw_device_reg").mustfixThrow("[MAWCryptoAuthToken] Error while fetching CAT from GraphQL: %s",e.error);return e.success})}l.processCatResponse=e,l.fetchFreshCAT=s}),98);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case 1:return;case 3:r("MAWEBSwitch").set(!0);return;case 2:case 4:default:r("MAWEBSwitch").set(!1);return}}function s(e){return e===4||e===3}l.setEncryptedBackupsState=e,l.eligibleForEBUX=s}),98);
__d("MAWStateManagerSyncToMainThread",["FBLogger","MAWBridge","WACommsConnectionState"],(function(t,n,r,o,a,i,l){"use strict";var e={WACommsConnectionState:o("WACommsConnectionState").WACommsConnectionState};function s(){var t=function(n){var t=e[n];d(n,t.get()),t.onSet(function(e){d(n,e)})};for(var n of Object.keys(e))t(n)}function u(t,n){var o=e[t];if(o==null){r("FBLogger")("messenger_e2ee_web").warn("Unable to find GenericStateManager for key %s",t);return}o.set(n)}function c(){for(var t of Object.keys(e)){var n=e[t];d(t,n.get())}}function d(e,t){o("MAWBridge").getBridge().fireAndForget("event","updateStateManagerStateInMainThread",{stateManagerKey:e,value:t})}l.subscribeAndSyncStateManagerValuesToMainThread=s,l.updateStateManagerInMainThreadFromBridgeCall=u,l.resendCurrentValuesToMainThread=c}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1;i.upsertClientRestoreStatus=e,i.markCompleteClientRestoreStatus=l}),66);
__d("WormGlobalConfig",[],(function(t,n,r,o,a,i){"use strict";var e={};function l(){return e}function s(t){e=t}i.getWormGlobalConfig=l,i.setWormGlobalConfig=s}),66);
__d("MWConditionallySetupEBStateDB",["EBDB","EBReadyNotifier","ExecutionEnvironment","MAWCurrentUser","MAWIndexedDbMetadata","MessengerWebInitData","ODS","WAHex","WAOdsEnums","WormGlobalConfig","cr:23151","cr:8233","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){if(n("cr:23151")!=null&&(s||(s=r("ExecutionEnvironment"))).isInBrowser){o("WormGlobalConfig").setWormGlobalConfig({}),n("cr:8233")==null||n("cr:8233").setupMainWaLogger(),o("EBDB").makeEBDB(o("MAWIndexedDbMetadata").ebdbName(o("MAWCurrentUser").getID()),r("qpl")._(1056840657,"2716"),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),o("EBDB").EBDBEnvironment.UI,{log:function(n){return(e||(e=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WORM,n)}});var a=await n("cr:23151").makeReStorePersistence(t);return o("EBReadyNotifier").markEBReady(),a}}l.conditionallyMakeEBStateDB=u}),98);
__d("MWLSSchemaEphemeral",["EBDB","EBDBEbsmApi","FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MessengerLogHistory").getInstance("db_init");async function s(t){o("LSPlatformLsInitLog").addPoint("init_start");var n,a={clearEbStores:o("EBDB").clearEbStores,flushEBSMtoEBDB:o("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:o("EBDBEbsmApi").rehydrateEBSMFromEBDB};try{var i=await o("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB(a);i!=null&&(e.debug("Creating EB State DB"),n=o("LSReStoreWrapper").createLSReStore(i,o("LSMetadata").schema,[r("MAWLSVaultingHooks")],void 0,o("LSPlatformLsInitLog").lsInitLogger),a.updateEBSM=o("EBDBEbsmApi").updateEBSM(n),e.debug("EB State DB inited"))}catch(e){r("FBLogger")("messenger_web_clients").catching(r("getErrorSafe")(e)).mustfix("EBSM failed")}return n==null&&(e.debug("Creating EDB"),n=r("LSJSInMemoryStorage")(o("LSMetadata").schema),e.debug("EDB inited")),o("LSPlatformLsInitLog").addPoint("init_end"),n}l.createDB=s}),98);
__d("MWPExecuteTaskBridge",["FBLogger","QuickPerformanceLogger","cr:6551"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o,a){var i=o.event,l=o.taskID;if((e||(e=r("QuickPerformanceLogger"))).markerPoint(i,"execute_task_through_bridge",{instanceKey:l}),n("cr:6551")==null||n("cr:6551")[a]==null)throw(e||(e=r("QuickPerformanceLogger"))).markerPoint(i,"handler_not_found",{instanceKey:l}),r("FBLogger")("messenger_web").mustfixThrow("[LS] No bridge task handler found for %s",a);return e.markerPoint(i,"bridge_api_call",{instanceKey:l}),n("cr:6551")[a](t,o)}l.executeTask=s}),98);
__d("MWPHandleNativeTask",["FBLogger","I64","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSJson","MWPExecuteTaskBridge","QuickPerformanceLogger","ReQL","getErrorSafe","isNativeTask","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n,a){var l=n.queue_name,u=r("qpl")._(164763515,"1216"),d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.pending_tasks.index("queueNameTaskId")).getKeyRange(l).filter(r("isNativeTask")));if(d==null){(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,"fetch_pending_task_failed"),r("FBLogger")("messenger_web").warn("[LS] MWPHandleNativeTask: Error cannot find a pending task for queue: %s",l);return}if(!r("isNativeTask")(d)){(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,"non_native_task_found"),r("FBLogger")("messenger_web").warn("[LS] MWPHandleNativeTask: Non-Native tasks should not be handled by MWPHandleNativeTask.",l);return}var m=(e||(e=o("I64"))).to_float(d==null?void 0:d.taskId);(s||(s=r("QuickPerformanceLogger"))).markerStart(u,m),s.markerAnnotate(u,{string:{source:"MWPHandleNativeTask_handleTask"}},{instanceKey:m}),s.markerPoint(u,"fetch_pending_task",{instanceKey:m});var p;try{(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,"parse_task",{instanceKey:m}),p=c(d)}catch(t){(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,"parse_task_failed",{instanceKey:m}),r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).warn("Error parsing native task payload with pluginType %s and transportKey %s for queue: %s",(e||(e=o("I64"))).to_string(d.pluginType),d.transportKey,l);return}var _=d.context;try{(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,"task_execute",{instanceKey:m}),s.markerAnnotate(u,{string:{source:"MWPHandleNativeTask_handleTask",task:JSON.stringify(d),taskName:_}},{instanceKey:m}),await o("MWPExecuteTaskBridge").executeTask(p,{actorID:a,event:u,source:"MWPHandleNativeTask_handleTask",taskID:(e||(e=o("I64"))).to_float(d.taskId)},_),s.markerPoint(u,"task_execute_success",{instanceKey:m}),await t.runInTransaction(async function(e){return await r("LSHandleTaskSendSuccessForQueue2")(e,l),e.pending_tasks.delete(d.taskId)},"readwrite","background",void 0,i.id+":126"),s.markerEnd(u,2,m)}catch(e){(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,"task_execute_failed",{instanceKey:m}),s.markerEnd(u,3,m),r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Error handling native task for %s.",d==null?void 0:d.context);try{await t.runInTransaction(function(e){return r("LSHandleTaskSendFailureForQueue2")(e,l)},"readwrite",void 0,void 0,i.id+":152")}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Error bumping failure cound for task")}}}function c(e){if(e.taskValue==null)throw r("FBLogger")("messenger_web").warn("[LS] MWPHandleNativeTask: task value is null, nothing to parse");try{var t=e.taskValue!==""?o("LSJson").parse(e.taskValue):"";return t}catch(t){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("[LS] Error parsing native task payload for queue: %s, falling back to null payload",e.queueName)}}var d={handleLSWork:u};l.default=d}),98);
__d("SecuredActionTriggerWithAccountID.react",["CometRouteURL","react","react-compiler-runtime","useCometEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(19),n=e.accountID,a=e.accountType,i=e.categoryName,l=e.entrypoint,s=e.onCancel,d=e.onExit,m=e.onFailure,p=e.onSuccess,_=e.reauthContentType,f=e.sensitiveAction,g=o("CometRouteURL").useRouteURL(),h;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==_||t[4]!==g||t[5]!==f?(h={account_id:n,account_type:a,category_name:i,reauth_content_type:_,return_uri:g,sensitive_action:f},t[0]=n,t[1]=a,t[2]=i,t[3]=_,t[4]=g,t[5]=f,t[6]=h):h=t[6];var y=r("useCometEntryPointDialog")(l,h),C=y[0],b=c(!0),v,S;t[7]!==n||t[8]!==a||t[9]!==i||t[10]!==s||t[11]!==d||t[12]!==m||t[13]!==p||t[14]!==_||t[15]!==f||t[16]!==C?(v=function(){b.current&&C({accountID:n,accountType:a,categoryName:i,onCancel:s,onExit:d,onFailure:m,onSuccess:p,reauthContentType:_,sensitiveAction:f}),b.current=!1},S=[C,n,a,i,d,p,s,m,_,f],t[7]=n,t[8]=a,t[9]=i,t[10]=s,t[11]=d,t[12]=m,t[13]=p,t[14]=_,t[15]=f,t[16]=C,t[17]=v,t[18]=S):(v=t[17],S=t[18]),u(v,S)}l.default=d}),98);
__d("Xfac_XFACAppealType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADS_ABUSE:0,ACTA_SANCTION_PROPAGATION:1,SOAP_PI_UNPUBLISH:2,SPAM:3,USER_DATA_SCRAPING:4,IDES_APPEAL:5,LEGAL_VERIFICATION:6,CHECKPOINT_EPSILON:7,DEV_PLATFORM_ABUSE:8,FB_UFAC:9,IG_UFAC:10,FRL_UFAC:11,BUSINESS_VERIFICATION_STANDALONE_EMAIL:12,BUSINESS_VERIFICATION_CLASSIC:13,SIGNAL_GATHERING:14,IG_MEMORIALIZATION_APPEAL:15,MARKETPLACE_IDV_APPEAL:16,BUSINESS_VERIFICATION_PAYOUTS:17,AUTHENTICITY_REGULATION:18,AUTHENTICITY_REGULATION_SG:19,WA_BIZ_ACCOUNT_CREATION:20,BUSINESS_VERIFICATION_FOX_CBD:21,BUSINESS_VERIFICATION_FOX_CRYPTO:22,BUSINESS_VERIFICATION_FOX_DATING:23,BUSINESS_VERIFICATION_FOX_REHAB:24,BUSINESS_VERIFICATION_FOX_RMG:25,BUSINESS_VERIFICATION_FOX_RXDRUGS:26,BUSINESS_VERIFICATION_MANDATORY_SELLERS:27,THREADS_UFAC:28,BUSINESS_VERIFICATION_MV4B:29,BUSINESS_VERIFICATION_CHINA_AGENCY:30,FINANCIAL_INTEGRITY:31,BUSINESS_VERIFICATION_ADVERTISER_VETTING:32,BUSINESS_VERIFICATION_CLASSIC_GENERIC:33,AUTHENTICITY_COMPROMISE:34,AUTHENTICITY_REGULATION_AU_FINSERV:35,AUTHENTICITY_REGULATION_TW_ANTI_SCAMS:36,ORGANIC_SENSITIVE_ACTIONS:37,WA_U13:38,BUSINESS_VERIFICATION_PAID_ACTOR_ONBOARDING:39,BUSINESS_VERIFICATION_TAIWAN_FINANCIAL_SERVICES:40,MARKETPLACE_XFAC_SELFIE_APPEAL:41,MARKETPLACE_XFAC_IDV_APPEAL:42,AUTHENTICITY_REGULATION_CN:43,BUSINESS_VERIFICATION_WABA:44,BUSINESS_VERIFICATION_APP_REVIEW:45,BUSINESS_VERIFICATION_PAGE_RELATIONSHIP_TRANSPARENCY:46,BUSINESS_VERIFICATION_VR_DEVELOPER_ORGANIZATION:47,BUSINESS_VERIFICATION_BILLING_HUB:48,BUSINESS_VERIFICATION_LOW_TRUST_TIER:49,BUSINESS_VERIFICATION_NEWS_PUBLISHER:50,BUSINESS_VERIFICATION_ADS_BANHAMMERED:51,BUSINESS_VERIFICATION_MARKETING_PARTNER_PROGRAM:52,BUSINESS_VERIFICATION_AUDIENCE_NETWORK_APP:53,BUSINESS_VERIFICATION_DOMAIN_DISPUTE:54,BUSINESS_VERIFICATION_ASP_AGENCY:55,BUSINESS_VERIFICATION_SIGNAL_CONSUMPTION_WITHOUT_ONBOARD:56,BUSINESS_VERIFICATION_UNIVERSAL_PARTNER_PLATFORM:57,OCULUS_FINANCIAL_INTEGRITY:58,ADS_ACTOR_ABUSE_SCRIPTED_FOR_BUSINESS_WITH_BUSINESS_VERIFICATION:59,AUTHENTICITY_COMPROMISE_SIGNALS_BASED_VERIFICATION:60,AUTHENTICITY_REGULATION_VN_UNIVERSAL:61,AUTHENTICITY_REGULATION_TH_UNIVERSAL:62,AUTHENTICITY_REGULATION_JP_UNIVERSAL:63,AUTHENTICITY_REGULATION_KR_FINSERV:64,AUTHENTICITY_REGULATION_AU_UNIVERSAL:65,AUTHENTICITY_REGULATION_IN_FINSERV:66,AUTHENTICITY_REGULATION_SG_UNIVERSAL:67,BUSINESS_VERIFICATION_WABA_IDV:68,AUTHENTICITY_REGULATION_GENERIC_UNIVERSAL:69,ID_VERIFICATION_BILLING_HUB:70,FB_GENERIC_LIGHTWEIGHT:71,AUTHENTICITY_REGULATION_SG_FOR_PAGES:72,BUSINESS_VERIFICATION_CHINA_ADVERTISER:73,DATING_INTEGRITY_SMS:74,IG_KYX_PAY_IN:75,MESSENGER_LWE_SCAM:76,FINANCIAL_INTEGRITY_KYX:77,INDIVIDUAL_VERIFICATION_ACCOUNT_RECOVERY:78,FRLM_YOUTH:79,FB_FINANCIAL_INTEGRITY_SANCTIONS_SCREENING:80,MARKETPLACE_XFAC_FACE_REC_SELFIE_APPEAL:81,YOUTH_NON_BLOCKING:82,OC_UFAC:83,MARKETPLACE_PERKS_APPEAL:84,META_BUSINESS_ACCOUNT_CREATION:85,WA_USER_BAN_APPEAL:86,FB_SCAM_SMS:87,BUSINESS_VERIFICATION_CREATOR_MARKETPLACE:88,ADDITIONAL_PROFILE_PLUS_IMPERSONATION_NON_REC_LWE_APPEAL:89,PARTNERSHIP_HOME:90,FB_FINANCIAL_INTEGRITY_FINANCIAL_CRIMES:91,BUSINESS_VERIFICATION_CLASSIC_BM_ALLOWLIST:92,IG_FINANCIAL_INTEGRITY_SANCTIONS_SCREENING:93,XFAC_DEMO:1e4});i.default=e}),66);
__d("useIXTXfacUniversalTriggerCDSDialog",["cr:10257","useCDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){return r("useCDSEntryPointDialog")(n("cr:10257"),e,void 0,a,{baseModalProps:t,carryOverRelayEnvironment_EXPERIMENTAL:o})}l.default=e}),98);
__d("usePasskeyUpsellEligibilityCheckMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24998666569801021"}),null);
__d("usePasskeyUpsellEligibilityCheckMutation.graphql",["usePasskeyUpsellEligibilityCheckMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"encryptedContext"}],t=[{alias:null,args:[{kind:"Variable",name:"encrypted_context",variableName:"encryptedContext"}],kind:"ScalarField",name:"xfb_upsell_passkey_post_reauth",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"usePasskeyUpsellEligibilityCheckMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"usePasskeyUpsellEligibilityCheckMutation",selections:t},params:{id:n("usePasskeyUpsellEligibilityCheckMutation_facebookRelayOperation"),metadata:{},name:"usePasskeyUpsellEligibilityCheckMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("usePasskeyUpsellEligibilityCheck",["FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint","RelayHooks","react-compiler-runtime","useCDSEntryPointDialog","usePasskeyUpsellEligibilityCheckMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("usePasskeyUpsellEligibilityCheckMutation.graphql");function u(){var e=o("react-compiler-runtime").c(4),t=o("RelayHooks").useMutation(s),n=t[0],a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={entrypoint:"post_reauth"},e[0]=a):a=e[0];var i=r("useCDSEntryPointDialog")(r("FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint"),a),l=i[0],u;return e[1]!==n||e[2]!==l?(u=function(t,r){n({onCompleted:function(t){t.xfb_upsell_passkey_post_reauth===!0?l({next:null,onSuccess:r,variant:"dialog"},r):r()},onError:function(t){r()},variables:{encryptedContext:t}})},e[1]=n,e[2]=l,e[3]=u):u=e[3],u}l.default=u}),98);
__d("SecuredActionTriggerWithEncryptedContext.react",["XMDSDialogLoadingState.react","Xfac_XFACAppealType","getGraphQLEnumSafe","nullthrows","react","react-compiler-runtime","useCometEntryPointDialog","useIXTXfacUniversalTriggerCDSDialog","usePasskeyUpsellEligibilityCheck"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=function(t){return s.jsx(r("XMDSDialogLoadingState.react"),{onClose:t,withCloseButton:!1})};function p(e,t){var n=o("react-compiler-runtime").c(4),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("nullthrows")(r("getGraphQLEnumSafe")(r("Xfac_XFACAppealType"),37)),n[0]=a):a=n[0];var i;n[1]!==t||n[2]!==e?(i={security_token:e,trigger_event_type:"XFAC_UNIVERSAL_ENTRY_ORGANIC_SENSITIVE_ACTIONS",xfac_appeal_type:a,xfac_config:t},n[1]=t,n[2]=e,n[3]=i):i=n[3];var l=r("useIXTXfacUniversalTriggerCDSDialog")(i,void 0,void 0,m),s=l[0];return s}function _(e){var t=o("react-compiler-runtime").c(13),n=e.encryptedContext,a=e.entrypoint,i=e.flow,l=e.onExit,s=e.onSuccess,u=e.useXFAC,m=e.xfacConfig,_=u===void 0?!1:u,f=p(n,m),g=r("usePasskeyUpsellEligibilityCheck")(),h;t[0]!==n||t[1]!==i?(h={encryptedContext:n,flow:i},t[0]=n,t[1]=i,t[2]=h):h=t[2];var y=r("useCometEntryPointDialog")(a,h),C=y[0],b=d(!0),v,S;t[3]!==n||t[4]!==i||t[5]!==l||t[6]!==s||t[7]!==C||t[8]!==g||t[9]!==f||t[10]!==_?(v=function(){b.current&&(_?f({flowCallbacks:{onClose:l,onComplete:function(){g(n,s)}}}):C({routeProps:{encryptedContext:n,flow:i,onExit:l,onSuccess:function(){return g(n,s)}}})),b.current=!1},S=[C,n,i,l,s,f,_,g],t[3]=n,t[4]=i,t[5]=l,t[6]=s,t[7]=C,t[8]=g,t[9]=f,t[10]=_,t[11]=v,t[12]=S):(v=t[11],S=t[12]),c(v,S)}l.default=_}),98);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:710")}),98);
__d("WADynamicRouterSync",["ExecutionEnvironment","Promise","WALogger","WAMapWithDefault","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=["toLastActiveClient"],d,m;function p(e,t){if(e!=null){var n=e.toLastActiveClient,r=babelHelpers.objectWithoutPropertiesLoose(e,c);if(n===!0&&t!=null){var o;return babelHelpers.extends({},r,{toClientId:(o=r.toClientId)!=null?o:t})}return r}}var _=(function(){function t(){var e=this;this.$2=new Map,this.$4=new(o("WAMapWithDefault")).MapWithDefault(function(){return new Set}),this.$5=null,this.fireAndForget=function(t,n,r,o,a,i){o===void 0&&(o=!1),e.$3==null||e.$3(t,n,r),e.$4.get(t).add({route:n,arg:r,resolver:null,silentLog:o,eventCallbacks:a,opts:p(i,e.$5)}),e.$6(t,n)},this.sendAndReceive=function(t,r,o,a,i,l){return a===void 0&&(a=!1),new(m||(m=n("Promise")))(function(n){e.$3==null||e.$3(t,r,o),e.$4.get(t).add({route:r,arg:o,resolver:function(t){n(t)},silentLog:a,eventCallbacks:i,opts:p(l,e.$5)}),e.$6(t,r)})}}var a=t.prototype;return a.setAckPayload=function(t){this.$1=t},a.getAckPayoad=function(){return this.$1},a.hasHandlerForNamespace=function(t){return this.$2.has(t)},a.getHandledNamespaces=function(){return Array.from(this.$2.keys())},a.setOnRouteCalled=function(t){this.$3=t},a.setNamespaceHandler=function(t,n){var e=this.$2,r=e.get(t);r!==n&&(e.set(t,n),r==null&&this.$6(t))},a.$7=function(r,a){var t=r.route,i=r.arg,l=r.resolver,s=r.silentLog,u=r.eventCallbacks,c=r.opts;try{var d;this.$5=(d=c==null?void 0:c.fromClientId)!=null?d:this.$5,a(t,i,l,s,u,c)}catch(t){l==null||l((m||(m=n("Promise"))).reject(t)),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bridge handler: ",""])),t)}},a.$6=function(t,n){var e=this,a=this.$4.get(t),i=this.$2.get(t);if(i==null){var l=(d||(d=r("ExecutionEnvironment"))).isInWorker?"worker":"main-thread";o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["No handler for bridge with namespace: "," route: "," called in environment: ",""])),t,n,l);return}a.forEach(function(t){a.delete(t),e.$7(t,i)})},a.setHandlers=function(t,n){function e(e,a,i,l,s,c){if(n[e]==null)throw o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),e,t),r("err")(e+" is not defined for "+t);var d=n[e](a,c);i&&i(d)}this.setNamespaceHandler(t,e)},t})();l.normaliseHandlerOptions=p,l.DynamicRouterSync=_}),98);
__d("isMAWUniversalSearchWithEBEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);/*FB_PKG_DELIM*/
__d("LexicalClipboard",["cr:862"],(function(t,n,r,o,a,i){a.exports=n("cr:862")}),null);
__d("LexicalHtml",["cr:1497"],(function(t,n,r,o,a,i){a.exports=n("cr:1497")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<d6430a5c30d3fa2b9f68c5c2e6026021>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalClipboard.prod",["Lexical","LexicalHtml","LexicalSelection","LexicalUtils"],(function $module_LexicalClipboard_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function r(e){var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e of t)o.append("v",_e);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function i(t,n){if(n===void 0){n=require("Lexical").$getSelection();}return null==n&&r(166),require("Lexical").$isRangeSelection(n)&&n.isCollapsed()||0===n.getNodes().length?"":require("LexicalHtml").$generateHtmlFromNodes(t,n);}function s(e,t){if(t===void 0){t=require("Lexical").$getSelection();}return null==t&&r(166),require("Lexical").$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(c(e,t));}function l(e,t,n){e.dispatchCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:t,selection:n})||(n.insertNodes(t),function(e){if(require("Lexical").$isRangeSelection(e)&&e.isCollapsed()){var _t=e.anchor;var _n=null;var _r=require("Lexical").$caretFromPoint(_t,"previous");if(_r)if(require("Lexical").$isTextPointCaret(_r))_n=_r.origin;else{var _e2=require("Lexical").$getCaretRange(_r,require("Lexical").$getChildCaret(require("Lexical").$getRoot(),"next").getFlipped());for(var _t2 of _e2){if(require("Lexical").$isTextNode(_t2.origin)){_n=_t2.origin;break;}if(require("Lexical").$isElementNode(_t2.origin)&&!_t2.origin.isInline())break;}}if(_n&&require("Lexical").$isTextNode(_n)){var _t3=_n.getFormat(),_o=_n.getStyle();e.format===_t3&&e.style===_o||(e.format=_t3,e.style=_o,e.dirty=!0);}}}(n));}function a(e,n,i,s){if(s===void 0){s=[];}var l=null===n||i.isSelected(n);var c=require("Lexical").$isElementNode(i)&&i.excludeFromCopy("html");var d=i;null!==n&&require("Lexical").$isTextNode(d)&&(d=require("LexicalSelection").$sliceSelectedTextNodeContent(n,d,"clone"));var u=require("Lexical").$isElementNode(d)?d.getChildren():[],f=function(e){var t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&r(58,n.name),require("Lexical").$isElementNode(e)){var _e3=t.children;Array.isArray(_e3)||r(59,n.name);}return t;}(d);require("Lexical").$isTextNode(d)&&0===d.getTextContentSize()&&(l=!1);for(var _t4=0;_t4<u.length;_t4++){var _r2=u[_t4],_s=a(e,n,_r2,f.children);!l&&require("Lexical").$isElementNode(i)&&_s&&i.extractWithChild(_r2,n,"clone")&&(l=!0);}if(l&&!c)s.push(f);else if(Array.isArray(f.children))for(var _e4=0;_e4<f.children.length;_e4++){var _t5=f.children[_e4];s.push(_t5);}return l;}function c(e,t){var n=[],r=require("Lexical").$getRoot().getChildren();for(var _o2=0;_o2<r.length;_o2++){a(e,t,r[_o2],n);}return{namespace:e._config.namespace,nodes:n};}function d(e){var n=[];for(var _r3=0;_r3<e.length;_r3++){var _i=e[_r3],_s2=require("Lexical").$parseSerializedNode(_i);require("Lexical").$isTextNode(_s2)&&require("LexicalSelection").$addNodeStyle(_s2),n.push(_s2);}return n;}var u=null;function f(e,t,n){if(void 0===n){var _t6=require("Lexical").getDOMSelection(e._window),_r4=require("Lexical").$getSelection();if(!_r4||_r4.isCollapsed())return!1;if(!_t6)return!1;var _i2=_t6.anchorNode,_s3=_t6.focusNode;if(null!==_i2&&null!==_s3&&!require("Lexical").isSelectionWithinEditor(e,_i2,_s3))return!1;n=g(_r4);}t.preventDefault();var r=t.clipboardData;return null!==r&&(x(r,n),!0);}var p=[["text/html",i],["application/x-lexical-editor",s]];function g(e){if(e===void 0){e=require("Lexical").$getSelection();}var t={"text/plain":e?e.getTextContent():""};if(e){var _n2=require("Lexical").$getEditor();for(var _ref2 of p){var _o3=_ref2[0];var _r5=_ref2[1];{var _i3=_r5(_n2,e);null!==_i3&&(t[_o3]=_i3);}}}return t;}function x(e,t){for(var _ref4 of p){var _n3=_ref4[0];void 0===t[_n3]&&e.setData(_n3,"");}for(var _n4 in t){var _o4=t[_n4];void 0!==_o4&&e.setData(_n4,_o4);}}exports.$generateJSONFromSelectedNodes=c,exports.$generateNodesFromSerializedNodes=d,exports.$getClipboardDataFromSelection=g,exports.$getHtmlContent=i,exports.$getLexicalContent=s,exports.$insertDataTransferForPlainText=function(e,t){var n=e.getData("text/plain")||e.getData("text/uri-list");null!=n&&t.insertRawText(n);},exports.$insertDataTransferForRichText=function(t,n,r){var i=t.getData("application/x-lexical-editor");if(i)try{var _e5=JSON.parse(i);if(_e5.namespace===r._config.namespace&&Array.isArray(_e5.nodes)){return l(r,d(_e5.nodes),n);}}catch(e){console.error(e);}var s=t.getData("text/html"),a=t.getData("text/plain");if(s&&a!==s)try{var _t7=new DOMParser().parseFromString(function(e){if(window.trustedTypes&&window.trustedTypes.createPolicy){return window.trustedTypes.createPolicy("Lexical",{createHTML:function createHTML(e){return e;}}).createHTML(e);}return e;}(s),"text/html");return l(r,require("LexicalHtml").$generateNodesFromDOM(r,_t7),n);}catch(e){console.error(e);}var c=a||t.getData("text/uri-list");if(null!=c)if(require("Lexical").$isRangeSelection(n)){var _e6=c.split(/(\r?\n|\t)/);""===_e6[_e6.length-1]&&_e6.pop();for(var _t8=0;_t8<_e6.length;_t8++){var _n5=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(_n5)){var _r6=_e6[_t8];"\n"===_r6||"\r\n"===_r6?_n5.insertParagraph():"\t"===_r6?_n5.insertNodes([require("Lexical").$createTabNode()]):_n5.insertText(_r6);}}}else n.insertRawText(c);},exports.$insertGeneratedNodes=l,exports.copyToClipboard=async function(e,t,r){if(null!==u)return!1;if(null!==t)return new Promise(function(n,o){e.update(function(){n(f(e,t,r));});});var i=e.getRootElement(),s=e._window||window,l=s.document,a=require("Lexical").getDOMSelection(s);if(null===i||null===a)return!1;var c=l.createElement("span");c.style.cssText="position: fixed; top: -1000px;",c.append(l.createTextNode("#")),i.append(c);var d=new Range();return d.setStart(c,0),d.setEnd(c,1),a.removeAllRanges(),a.addRange(d),new Promise(function(t,i){var a=e.registerCommand(require("Lexical").COPY_COMMAND,function(o){return require("LexicalUtils").objectKlassEquals(o,ClipboardEvent)&&(a(),null!==u&&(s.clearTimeout(u),u=null),t(f(e,o,r))),!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL);u=s.setTimeout(function(){a(),u=null,t(!1);},50),l.execCommand("copy"),c.remove();});},exports.setLexicalClipboardDataTransfer=x;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<f2466b099757848c03fec2201199ae0e>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalDragon.prod",["Lexical","LexicalExtension"],(function $module_LexicalDragon_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function n(e){var n=window.location.origin,o=function o(_o){if(_o.origin!==n)return;var i=e.getRootElement();if(document.activeElement!==i)return;var s=_o.data;if("string"==typeof s){var _n;try{_n=JSON.parse(s);}catch(e){return;}if(_n&&"nuanria_messaging"===_n.protocol&&"request"===_n.type){var _i=_n.payload;if(_i&&"makeChanges"===_i.functionId){var _n2=_i.args;if(_n2){var _i2=_n2[0],_s=_n2[1],a=_n2[2],r=_n2[3],d=_n2[4];e.update(function(){var e=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(e)){var _n3=e.anchor;var c=_n3.getNode(),g=0,u=0;if(require("Lexical").$isTextNode(c)&&_i2>=0&&_s>=0&&(g=_i2,u=_i2+_s,e.setTextNodeRange(c,g,c,u)),g===u&&""===a||(e.insertRawText(a),c=_n3.getNode()),require("Lexical").$isTextNode(c)){g=r,u=r+d;var _t=c.getTextContentSize();g=g>_t?_t:g,u=u>_t?_t:u,e.setTextNodeRange(c,g,c,u);}_o.stopImmediatePropagation();}});}}}}};return window.addEventListener("message",o,!0),function(){window.removeEventListener("message",o,!0);};}var o=require("Lexical").defineExtension({build:function build(t,n,o){return require("LexicalExtension").namedSignals(n);},config:require("Lexical").safeCast({disabled:"undefined"==typeof window}),name:"LexicalDragon",register:function register(t,o,i){return require("LexicalExtension").effect(function(){return i.getOutput().disabled.value?void 0:n(t);});}});exports.DragonExtension=o,exports.registerDragonSupport=n;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<23d13bba94ea1ddd4e5e1a02941c686e>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalExtension.prod",["Lexical","LexicalUtils"],(function $module_LexicalExtension_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _excluded=["$initialEditorState","onError"];var _require_Lexical;var n=Symbol["for"]("preact-signals");function i(){if(d>1)return void d--;var t,e=!1;for(;void 0!==r;){var _n=r;for(r=void 0,a++;void 0!==_n;){var _i=_n.o;if(_n.o=void 0,_n.f&=-3,!(8&_n.f)&&g(_n))try{_n.c();}catch(n){e||(t=n,e=!0);}_n=_i;}}if(a=0,d--,e)throw t;}function o(t){if(d>0)return t();d++;try{return t();}finally{i();}}var s,r;function c(t){var e=s;s=void 0;try{return t();}finally{s=e;}}var d=0,a=0,f=0;function u(t){if(void 0===s)return;var e=t.n;return void 0===e||e.t!==s?(e={i:0,S:t,p:s.s,n:void 0,t:s,e:void 0,x:void 0,r:e},void 0!==s.s&&(s.s.n=e),s.s=e,t.n=e,32&s.f&&t.S(e),e):-1===e.i?(e.i=0,void 0!==e.n&&(e.n.p=e.p,void 0!==e.p&&(e.p.n=e.n),e.p=s.s,e.n=void 0,s.s.n=e,s.s=e),e):void 0;}function l(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name;}function h(t,e){return new l(t,e);}function g(t){for(var _e=t.s;void 0!==_e;_e=_e.n)if(_e.S.i!==_e.i||!_e.S.h()||_e.S.i!==_e.i)return!0;return!1;}function p(t){for(var _e2=t.s;void 0!==_e2;_e2=_e2.n){var _n2=_e2.S.n;if(void 0!==_n2&&(_e2.r=_n2),_e2.S.n=_e2,_e2.i=-1,void 0===_e2.n){t.s=_e2;break;}}}function m(t){var e,n=t.s;for(;void 0!==n;){var _t=n.p;-1===n.i?(n.S.U(n),void 0!==_t&&(_t.n=n.n),void 0!==n.n&&(n.n.p=_t)):e=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=_t;}t.s=e;}function x(t,e){l.call(this,void 0),this.x=t,this.s=void 0,this.g=f-1,this.f=4,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name;}function E(t,e){return new x(t,e);}function v(t){var e=t.u;if(t.u=void 0,"function"==typeof e){d++;var _n3=s;s=void 0;try{e();}catch(e){throw t.f&=-2,t.f|=8,S(t),e;}finally{s=_n3,i();}}}function S(t){for(var _e3=t.s;void 0!==_e3;_e3=_e3.n)_e3.S.U(_e3);t.x=void 0,t.s=void 0,v(t);}function y(t){if(s!==this)throw new Error("Out-of-order effect");m(this),s=t,this.f&=-2,8&this.f&&S(this),i();}function N(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==e?void 0:e.name;}function b(t,e){var n=new N(t,e);try{n.c();}catch(t){throw n.d(),t;}var i=n.d.bind(n);return i[typeof Symbol==="function"?Symbol.dispose:"@@dispose"]=i,i;}function R(t,e){if(e===void 0){e={};}var n={};for(var _i2 in t){var _o=e[_i2],_s=h(void 0===_o?t[_i2]:_o);n[_i2]=_s;}return n;}l.prototype.brand=n,l.prototype.h=function(){return!0;},l.prototype.S=function(t){var _this=this;var e=this.t;e!==t&&void 0===t.e&&(t.x=e,this.t=t,void 0!==e?e.e=t:c(function(){var t;null==(t=_this.W)||t.call(_this);}));},l.prototype.U=function(t){var _this2=this;if(void 0!==this.t){var _e4=t.e,_n4=t.x;void 0!==_e4&&(_e4.x=_n4,t.e=void 0),void 0!==_n4&&(_n4.e=_e4,t.x=void 0),t===this.t&&(this.t=_n4,void 0===_n4&&c(function(){var t;null==(t=_this2.Z)||t.call(_this2);}));}},l.prototype.subscribe=function(t){var _this3=this;return b(function(){var e=_this3.value,n=s;s=void 0;try{t(e);}finally{s=n;}},{name:"sub"});},l.prototype.valueOf=function(){return this.value;},l.prototype.toString=function(){return this.value+"";},l.prototype.toJSON=function(){return this.value;},l.prototype.peek=function(){var t=s;s=void 0;try{return this.value;}finally{s=t;}},Object.defineProperty(l.prototype,"value",{get:function get(){var t=u(this);return void 0!==t&&(t.i=this.i),this.v;},set:function set(t){if(t!==this.v){if(a>100)throw new Error("Cycle detected");this.v=t,this.i++,f++,d++;try{for(var _t2=this.t;void 0!==_t2;_t2=_t2.x)_t2.t.N();}finally{i();}}}}),x.prototype=new l(),x.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===f)return!0;if(this.g=f,this.f|=1,this.i>0&&!g(this))return this.f&=-2,!0;var t=s;try{p(this),s=this;var _t3=this.x();(16&this.f||this.v!==_t3||0===this.i)&&(this.v=_t3,this.f&=-17,this.i++);}catch(t){this.v=t,this.f|=16,this.i++;}return s=t,m(this),this.f&=-2,!0;},x.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(var _t4=this.s;void 0!==_t4;_t4=_t4.n)_t4.S.S(_t4);}l.prototype.S.call(this,t);},x.prototype.U=function(t){if(void 0!==this.t&&(l.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(var _t5=this.s;void 0!==_t5;_t5=_t5.n)_t5.S.U(_t5);}},x.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var _t6=this.t;void 0!==_t6;_t6=_t6.x)_t6.t.N();}},Object.defineProperty(x.prototype,"value",{get:function get(){if(1&this.f)throw new Error("Cycle detected");var t=u(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v;}}),N.prototype.c=function(){var t=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var _t7=this.x();"function"==typeof _t7&&(this.u=_t7);}finally{t();}},N.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,v(this),p(this),d++;var t=s;return s=this,y.bind(this,t);},N.prototype.N=function(){2&this.f||(this.f|=2,this.o=r,r=this);},N.prototype.d=function(){this.f|=8,1&this.f||S(this);},N.prototype.dispose=function(){this.d();};var O=(_require_Lexical=require("Lexical")).defineExtension({build:function build(t,e,n){return R(e);},config:_require_Lexical.safeCast({defaultSelection:"rootEnd",disabled:!1}),name:"@lexical/extension/AutoFocus",register:function register(t,e,n){var i=n.getOutput();return b(function(){return i.disabled.value?void 0:t.registerRootListener(function(e){t.focus(function(){var t=document.activeElement;null===e||null!==t&&e.contains(t)||e.focus({preventScroll:!0});},{defaultSelection:i.defaultSelection.peek()});});});}});function w(){var e=require("Lexical").$getRoot(),n=require("Lexical").$getSelection(),i=require("Lexical").$createParagraphNode();e.clear(),e.append(i),null!==n&&i.select(),require("Lexical").$isRangeSelection(n)&&(n.format=0);}function C(e,n){if(n===void 0){n=w;}return e.registerCommand(require("Lexical").CLEAR_EDITOR_COMMAND,function(t){return e.update(n),!0;},require("Lexical").COMMAND_PRIORITY_EDITOR);}var M=_require_Lexical.defineExtension({build:function build(t,e,n){return R(e);},config:_require_Lexical.safeCast({$onClear:w}),name:"@lexical/extension/ClearEditor",register:function register(t,e,n){var _n$getOutput=n.getOutput(),i=_n$getOutput.$onClear;return b(function(){return C(t,i.value);});}});function D(t){return("function"==typeof t.nodes?t.nodes():t.nodes)||[];}function _(t,e){var n;return h(t(),{unwatched:function unwatched(){n&&(n(),n=void 0);},watched:function watched(){this.value=t(),n=e(this);}});}var I=_require_Lexical.defineExtension({build:function build(t){return _(function(){return t.getEditorState();},function(e){return t.registerUpdateListener(function(t){e.value=t.editorState;});});},name:"@lexical/extension/EditorState"});function T(t){var n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams();i.append("code",t);for(var _len=arguments.length,e=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){e[_key-1]=arguments[_key];}for(var _t8 of e)i.append("v",_t8);throw n.search=i.toString(),Error("Minified Lexical error #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function A(t,e){if(t&&e&&!Array.isArray(e)&&"object"==typeof t&&"object"==typeof e){var _n5=t,_i3=e;for(var _t9 in _i3)_n5[_t9]=A(_n5[_t9],_i3[_t9]);return t;}return e;}var $=0,P=1,L=2,j=3,K=4,k=5,z=6,U=7;function B(t){return t.id===$;}function F(t){return t.id===L;}function H(t){return function(t){return t.id===P;}(t)||T(305,String(t.id),String(P)),Object.assign(t,{id:L});}var G=new Set();var _Y=function(){function Y(t,e){this.builder=t,this.extension=e,this.configs=new Set(),this.state={id:$};}var _proto=Y.prototype;_proto.mergeConfigs=function mergeConfigs(){var e=this.extension.config||{};var n=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):require("Lexical").shallowMergeConfig;for(var _t0 of this.configs)e=n(e,_t0);return e;};_proto.init=function init(t){var e=this.state;F(e)||T(306,String(e.id));var n={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},i=babelHelpers["extends"]({},n,{getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)}),o=function(t,e,n){return Object.assign(t,{config:e,id:j,registerState:n});}(e,this.mergeConfigs(),n);var s;this.state=o,this.extension.init&&(s=this.extension.init(t,o.config,n)),this.state=function(t,e,n){return Object.assign(t,{id:K,initResult:e,registerState:n});}(o,s,i);};_proto.build=function build(t){var e=this.state;var n;e.id!==K&&T(307,String(e.id),String(k)),this.extension.build&&(n=this.extension.build(t,e.config,e.registerState));var i=babelHelpers["extends"]({},e.registerState,{getOutput:function getOutput(){return n;},getSignal:this.getSignal.bind(this)});this.state=function(t,e,n){return Object.assign(t,{id:k,output:e,registerState:n});}(e,n,i);};_proto.register=function register(t,e){var _this4=this;this._signal=e;var n=this.state;n.id!==k&&T(308,String(n.id),String(k));var i=this.extension.register&&this.extension.register(t,n.config,n.registerState);return this.state=function(t){return Object.assign(t,{id:z});}(n),function(){var t=_this4.state;t.id!==U&&T(309,String(n.id),String(U)),_this4.state=function(t){return Object.assign(t,{id:k});}(t),i&&i();};};_proto.afterRegistration=function afterRegistration(t){var e=this.state;var n;return e.id!==z&&T(310,String(e.id),String(z)),this.extension.afterRegistration&&(n=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=function(t){return Object.assign(t,{id:U});}(e),n;};_proto.getSignal=function getSignal(){return void 0===this._signal&&T(311),this._signal;};_proto.getInitResult=function getInitResult(){void 0===this.extension.init&&T(312,this.extension.name);var t=this.state;return function(t){return t.id>=K;}(t)||T(313,String(t.id),String(K)),t.initResult;};_proto.getInitPeer=function getInitPeer(t){var e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0;};_proto.getExtensionInitDependency=function getExtensionInitDependency(){var t=this.state;return function(t){return t.id>=j;}(t)||T(314,String(t.id),String(j)),{config:t.config};};_proto.getPeer=function getPeer(t){var e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0;};_proto.getInitDependency=function getInitDependency(t){var e=this.builder.getExtensionRep(t);return void 0===e&&T(315,this.extension.name,t.name),e.getExtensionInitDependency();};_proto.getDependency=function getDependency(t){var e=this.builder.getExtensionRep(t);return void 0===e&&T(315,this.extension.name,t.name),e.getExtensionDependency();};_proto.getState=function getState(){var t=this.state;return function(t){return t.id>=U;}(t)||T(316,String(t.id),String(U)),t;};_proto.getDirectDependentNames=function getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||G;};_proto.getPeerNameSet=function getPeerNameSet(){var t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(function(_ref){var t=_ref[0];return t;})),this._peerNameSet=t),t;};_proto.getExtensionDependency=function getExtensionDependency(){if(!this._dependency){var _t1=this.state;(function(t){return t.id>=k;})(_t1)||T(317,this.extension.name),this._dependency={config:_t1.config,init:_t1.initResult,output:_t1.output};}return this._dependency;};return Y;}();var W={tag:_require_Lexical.HISTORY_MERGE_TAG};function Z(){var e=require("Lexical").$getRoot();e.isEmpty()&&e.append(require("Lexical").$createParagraphNode());}var V=_require_Lexical.defineExtension({config:_require_Lexical.safeCast({setOptions:W,updateOptions:W}),init:function init(_ref2){var _ref2$$initialEditorS=_ref2.$initialEditorState,t=_ref2$$initialEditorS===void 0?Z:_ref2$$initialEditorS;return{$initialEditorState:t,initialized:!1};},afterRegistration:function afterRegistration(e,_ref3,o){var n=_ref3.updateOptions,i=_ref3.setOptions;var s=o.getInitResult();if(!s.initialized){s.initialized=!0;var _o2=s.$initialEditorState;if(require("Lexical").$isEditorState(_o2))e.setEditorState(_o2,i);else if("function"==typeof _o2)e.update(function(){_o2(e);},n);else if(_o2&&("string"==typeof _o2||"object"==typeof _o2)){var _t10=e.parseEditorState(_o2);e.setEditorState(_t10,i);}}return function(){};},name:"@lexical/extension/InitialState",nodes:[_require_Lexical.RootNode,_require_Lexical.TextNode,_require_Lexical.LineBreakNode,_require_Lexical.TabNode,_require_Lexical.ParagraphNode]}),J=Symbol["for"]("@lexical/extension/LexicalBuilder");function q(){}function X(t){throw t;}function Q(t){return Array.isArray(t)?t:[t];}var tt="0.38.2+prod.cjs";var _et=function(){function et(t){this.outgoingConfigEdges=new Map(),this.incomingEdges=new Map(),this.extensionNameMap=new Map(),this.conflicts=new Map(),this.PACKAGE_VERSION=tt,this.roots=t;for(var _e5 of t)this.addExtension(_e5);}et.fromExtensions=function fromExtensions(t){var e=[Q(V)];for(var _n6 of t)e.push(Q(_n6));return new et(e);};et.maybeFromEditor=function maybeFromEditor(t){var e=t[J];return e&&(e.PACKAGE_VERSION!==tt&&T(292,e.PACKAGE_VERSION,tt),e instanceof et||T(293)),e;};et.fromEditor=function fromEditor(t){var e=et.maybeFromEditor(t);return void 0===e&&T(294),e;};var _proto2=et.prototype;_proto2.constructEditor=function constructEditor(){var _Object$assign;var _this$buildCreateEdit=this.buildCreateEditorArgs(),e=_this$buildCreateEdit.$initialEditorState,n=_this$buildCreateEdit.onError,i=babelHelpers.objectWithoutPropertiesLoose(_this$buildCreateEdit,_excluded),o=Object.assign(require("Lexical").createEditor(babelHelpers["extends"]({},i,n?{onError:function onError(t){n(t,o);}}:{})),(_Object$assign={},_Object$assign[J]=this,_Object$assign));for(var _t11 of this.sortedExtensionReps())_t11.build(o);return o;};_proto2.buildEditor=function buildEditor(){var _Object$assign2;var t=q;function n(){try{t();}finally{t=q;}}var i=Object.assign(this.constructEditor(),(_Object$assign2={dispose:n},_Object$assign2[typeof Symbol==="function"?Symbol.dispose:"@@dispose"]=n,_Object$assign2));return t=require("LexicalUtils").mergeRegister(this.registerEditor(i),function(){return i.setRootElement(null);}),i;};_proto2.hasExtensionByName=function hasExtensionByName(t){return this.extensionNameMap.has(t);};_proto2.getExtensionRep=function getExtensionRep(t){var e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&T(295,t.name),e;};_proto2.addEdge=function addEdge(t,e,n){var i=this.outgoingConfigEdges.get(t);i?i.set(e,n):this.outgoingConfigEdges.set(t,new Map([[e,n]]));var o=this.incomingEdges.get(e);o?o.add(t):this.incomingEdges.set(e,new Set([t]));};_proto2.addExtension=function addExtension(t){void 0!==this._sortedExtensionReps&&T(296);var e=Q(t),n=e[0];"string"!=typeof n.name&&T(297,typeof n.name);var i=this.extensionNameMap.get(n.name);if(void 0!==i&&i.extension!==n&&T(298,n.name),!i){i=new _Y(this,n),this.extensionNameMap.set(n.name,i);var _t12=this.conflicts.get(n.name);"string"==typeof _t12&&T(299,n.name,_t12);for(var _t13 of n.conflictsWith||[])this.extensionNameMap.has(_t13)&&T(299,n.name,_t13),this.conflicts.set(_t13,n.name);for(var _t14 of n.dependencies||[]){var _e6=Q(_t14);this.addEdge(n.name,_e6[0].name,_e6.slice(1)),this.addExtension(_e6);}for(var _ref5 of n.peerDependencies||[]){var _t15=_ref5[0];var _e7=_ref5[1];this.addEdge(n.name,_t15,_e7?[_e7]:[]);}}};_proto2.sortedExtensionReps=function sortedExtensionReps(){var _this5=this;if(this._sortedExtensionReps)return this._sortedExtensionReps;var t=[],_e8=function e(n,i){var o=n.state;if(F(o))return;var s=n.extension.name;var r;B(o)||T(300,s,i||"[unknown]"),B(r=o)||T(304,String(r.id),String($)),o=Object.assign(r,{id:P}),n.state=o;var c=_this5.outgoingConfigEdges.get(s);if(c)for(var _t16 of c.keys()){var _n7=_this5.extensionNameMap.get(_t16);_n7&&_e8(_n7,s);}o=H(o),n.state=o,t.push(n);};for(var _t17 of this.extensionNameMap.values())B(_t17.state)&&_e8(_t17);for(var _e9 of t)for(var _ref7 of this.outgoingConfigEdges.get(_e9.extension.name)||[]){var _t18=_ref7[0];var _n8=_ref7[1];if(_n8.length>0){var _e0=this.extensionNameMap.get(_t18);if(_e0)for(var _t19 of _n8)_e0.configs.add(_t19);}}for(var _ref9 of this.roots){var _t20=_ref9[0];var _e1=babelHelpers.arrayLikeToArray(_ref9).slice(1);if(_e1.length>0){var _n9=this.extensionNameMap.get(_t20.name);void 0===_n9&&T(301,_t20.name);for(var _t21 of _e1)_n9.configs.add(_t21);}}return this._sortedExtensionReps=t,this._sortedExtensionReps;};_proto2.registerEditor=function registerEditor(t){var n=this.sortedExtensionReps(),i=new AbortController(),o=[function(){return i.abort();}],s=i.signal;for(var _e10 of n){var _n0=_e10.register(t,s);_n0&&o.push(_n0);}for(var _e11 of n){var _n1=_e11.afterRegistration(t);_n1&&o.push(_n1);}return require("LexicalUtils").mergeRegister.apply(require("LexicalUtils"),o);};_proto2.buildCreateEditorArgs=function buildCreateEditorArgs(){var t={},e=new Set(),n=new Map(),i=new Map(),o={},s={},r=this.sortedExtensionReps();for(var _c of r){var _r=_c.extension;if(void 0!==_r.onError&&(t.onError=_r.onError),void 0!==_r.disableEvents&&(t.disableEvents=_r.disableEvents),void 0!==_r.parentEditor&&(t.parentEditor=_r.parentEditor),void 0!==_r.editable&&(t.editable=_r.editable),void 0!==_r.namespace&&(t.namespace=_r.namespace),void 0!==_r.$initialEditorState&&(t.$initialEditorState=_r.$initialEditorState),_r.nodes)for(var _t22 of D(_r)){if("function"!=typeof _t22){var _e12=n.get(_t22.replace);_e12&&T(302,_r.name,_t22.replace.name,_e12.extension.name),n.set(_t22.replace,_c);}e.add(_t22);}if(_r.html){if(_r.html["export"])for(var _ref1 of _r.html["export"].entries()){var _t23=_ref1[0];var _e13=_ref1[1];i.set(_t23,_e13);}_r.html["import"]&&Object.assign(o,_r.html["import"]);}_r.theme&&A(s,_r.theme);}Object.keys(s).length>0&&(t.theme=s),e.size&&(t.nodes=[].concat(e));var c=Object.keys(o).length>0,d=i.size>0;(c||d)&&(t.html={},c&&(t.html["import"]=o),d&&(t.html["export"]=i));for(var _e14 of r)_e14.init(t);return t.onError||(t.onError=X),t;};return et;}();function nt(t,e){var n=_et.fromEditor(t).extensionNameMap.get(e);return n?n.getExtensionDependency():void 0;}var it=new Set(),ot=_require_Lexical.defineExtension({build:function build(e,n,i){var o=i.getDependency(I).output,s=h({watchedNodeKeys:new Map()}),r=_(function(){},function(){return b(function(){var e=r.peek(),n=s.value.watchedNodeKeys;var i,c=!1;o.value.read(function(){if(require("Lexical").$getSelection())for(var _ref11 of n.entries()){var _o3=_ref11[0];var _s2=_ref11[1];{if(0===_s2.size){n["delete"](_o3);continue;}var _r2=require("Lexical").$getNodeByKey(_o3),_d=_r2&&_r2.isSelected()||!1;c=c||_d!==(!!e&&e.has(_o3)),_d&&(i=i||new Set(),i.add(_o3));}}}),!c&&i&&e&&i.size===e.size||(r.value=i);});});return{watchNodeKey:function watchNodeKey(t){var e=E(function(){return(r.value||it).has(t);}),_s$peek=s.peek(),n=_s$peek.watchedNodeKeys;var i=n.get(t);var o=void 0!==i;return i=i||new Set(),i.add(e),o||(n.set(t,i),s.value={watchedNodeKeys:n}),e;}};},dependencies:[I],name:"@lexical/extension/NodeSelection"}),st=_require_Lexical.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");var _rt=function(_t$DecoratorNode){function rt(){return _t$DecoratorNode.apply(this,arguments)||this;}babelHelpers.inheritsLoose(rt,_t$DecoratorNode);rt.getType=function getType(){return"horizontalrule";};rt.clone=function clone(t){return new rt(t.__key);};rt.importJSON=function importJSON(t){return dt().updateFromJSON(t);};rt.importDOM=function importDOM(){return{hr:function hr(){return{conversion:ct,priority:0};}};};var _proto3=rt.prototype;_proto3.exportDOM=function exportDOM(){return{element:document.createElement("hr")};};_proto3.createDOM=function createDOM(t){var n=document.createElement("hr");return require("LexicalUtils").addClassNamesToElement(n,t.theme.hr),n;};_proto3.getTextContent=function getTextContent(){return"\n";};_proto3.isInline=function isInline(){return!1;};_proto3.updateDOM=function updateDOM(){return!1;};return rt;}(_require_Lexical.DecoratorNode);function ct(){return{node:dt()};}function dt(){return require("Lexical").$create(_rt);}function at(t){return t instanceof _rt;}var ft=_require_Lexical.defineExtension({dependencies:[I,ot],name:"@lexical/extension/HorizontalRule",nodes:function nodes(){return[_rt];},register:function register(n,i,s){var _n$_config$theme$hrSe;var r=s.getDependency(ot).output.watchNodeKey,c=h({nodeSelections:new Map()}),d=(_n$_config$theme$hrSe=n._config.theme.hrSelected)!=null?_n$_config$theme$hrSe:"selected";return require("LexicalUtils").mergeRegister(n.registerCommand(require("Lexical").CLICK_COMMAND,function(e){if(require("Lexical").isDOMNode(e.target)){var _n10=require("Lexical").$getNodeFromDOMNode(e.target);if(at(_n10))return function(e,n){if(n===void 0){n=!1;}var i=require("Lexical").$getSelection(),o=e.isSelected(),s=e.getKey();var r;n&&require("Lexical").$isNodeSelection(i)?r=i:(r=require("Lexical").$createNodeSelection(),require("Lexical").$setSelection(r)),o?r["delete"](s):r.add(s);}(_n10,e.shiftKey),!0;}return!1;},require("Lexical").COMMAND_PRIORITY_LOW),n.registerMutationListener(_rt,function(t,e){o(function(){var e=!1;var _c$peek=c.peek(),i=_c$peek.nodeSelections;for(var _ref13 of t.entries()){var _o4=_ref13[0];var _s3=_ref13[1];if("destroyed"===_s3)i["delete"](_o4),e=!0;else{var _t24=i.get(_o4),_s4=n.getElementByKey(_o4);_t24?_t24.domNode.value=_s4:(e=!0,i.set(_o4,{domNode:h(_s4),selectedSignal:r(_o4)}));}}e&&(c.value={nodeSelections:i});});}),b(function(){var t=[];var _loop=function _loop(){var n=_ref15.domNode;var i=_ref15.selectedSignal;t.push(b(function(){var t=n.value;if(t){i.value?require("LexicalUtils").addClassNamesToElement(t,d):require("LexicalUtils").removeClassNamesFromElement(t,d);}}));};for(var _ref15 of c.value.nodeSelections.values()){_loop();}return require("LexicalUtils").mergeRegister.apply(require("LexicalUtils"),t);}));}});function ut(n,i){var _require_Lexical;return require("LexicalUtils").mergeRegister(n.registerCommand((_require_Lexical=require("Lexical")).KEY_TAB_COMMAND,function(i){var o=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(o))return!1;i.preventDefault();var s=function(n){var i=n.getNodes();if(require("LexicalUtils").$filter(i,function(e){return require("Lexical").$isBlockElementNode(e)&&e.canIndent()?e:null;}).length>0)return!0;var o=n.anchor,s=n.focus,r=s.isBefore(o)?s:o,c=r.getNode(),d=require("LexicalUtils").$getNearestBlockElementAncestorOrThrow(c);if(d.canIndent()){var _e15=d.getKey();var _n11=require("Lexical").$createRangeSelection();if(_n11.anchor.set(_e15,0,"element"),_n11.focus.set(_e15,0,"element"),_n11=require("Lexical").$normalizeSelection__EXPERIMENTAL(_n11),_n11.anchor.is(r))return!0;}return!1;}(o)?i.shiftKey?require("Lexical").OUTDENT_CONTENT_COMMAND:require("Lexical").INDENT_CONTENT_COMMAND:require("Lexical").INSERT_TAB_COMMAND;return n.dispatchCommand(s,void 0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),n.registerCommand(_require_Lexical.INDENT_CONTENT_COMMAND,function(){var n="number"==typeof i?i:i?i.peek():null;if(null==n)return!1;var o=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(o))return!1;var s=o.getNodes().map(function(t){return require("LexicalUtils").$getNearestBlockElementAncestorOrThrow(t).getIndent();});return Math.max.apply(Math,s)+1>=n;},_require_Lexical.COMMAND_PRIORITY_CRITICAL));}var lt=_require_Lexical.defineExtension({build:function build(t,e,n){return R(e);},config:_require_Lexical.safeCast({disabled:!1,maxIndent:null}),name:"@lexical/extension/TabIndentation",register:function register(t,e,n){var _n$getOutput2=n.getOutput(),i=_n$getOutput2.disabled,o=_n$getOutput2.maxIndent;return b(function(){if(!i.value)return ut(t,o);});}});exports.configExtension=_require_Lexical.configExtension,exports.declarePeerDependency=_require_Lexical.declarePeerDependency,exports.defineExtension=_require_Lexical.defineExtension,exports.safeCast=_require_Lexical.safeCast,exports.shallowMergeConfig=_require_Lexical.shallowMergeConfig,exports.$createHorizontalRuleNode=dt,exports.$isHorizontalRuleNode=at,exports.AutoFocusExtension=O,exports.ClearEditorExtension=M,exports.EditorStateExtension=I,exports.HorizontalRuleExtension=ft,exports.HorizontalRuleNode=_rt,exports.INSERT_HORIZONTAL_RULE_COMMAND=st,exports.InitialStateExtension=V,exports.LexicalBuilder=_et,exports.NodeSelectionExtension=ot,exports.TabIndentationExtension=lt,exports.batch=o,exports.buildEditorFromExtensions=function(){for(var _len2=arguments.length,t=new Array(_len2),_key2=0;_key2<_len2;_key2++){t[_key2]=arguments[_key2];}return _et.fromExtensions(t).buildEditor();},exports.computed=E,exports.effect=b,exports.getExtensionDependencyFromEditor=function(t,e){var n=_et.fromEditor(t).getExtensionRep(e);return void 0===n&&T(303,e.name),n.getExtensionDependency();},exports.getKnownTypesAndNodes=function(t){var e=new Set(),n=new Set();for(var _i4 of D(t)){var _t25="function"==typeof _i4?_i4:_i4.replace;e.add(_t25.getType()),n.add(_t25);}return{nodes:n,types:e};},exports.getPeerDependencyFromEditor=nt,exports.getPeerDependencyFromEditorOrThrow=function(t,e){var n=nt(t,e);return void 0===n&&T(291,e),n;},exports.namedSignals=R,exports.registerClearEditor=C,exports.registerTabIndentation=ut,exports.signal=h,exports.untracked=c,exports.watchedSignal=_;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<6a5d3b588b78ca3db7ed740abdcb7c49>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalSelection.prod",["Lexical"],(function $module_LexicalSelection_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function t(e){for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _e of t)o.append("v",_e);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var n=new Map();function o(e){var t=e;for(;null!=t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild;}return null;}function s(e){var t=e.parentNode;if(null==t)throw new Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)];}function r(e){var t={};if(!e)return t;var n=e.split(";");for(var _e2 of n)if(""!==_e2){var _e2$split=_e2.split(/:([^]+)/),_n=_e2$split[0],_o=_e2$split[1];_n&&_o&&(t[_n.trim()]=_o.trim());}return t;}function l(e){var t=n.get(e);return void 0===t&&(t=r(e),n.set(e,t)),t;}function i(e){var t="";for(var _n2 in e)_n2&&(t+=_n2+": "+e[_n2]+";");return t;}function c(t){var n=require("Lexical").$getEditor().getElementByKey(t.getKey());if(null===n)return null;var o=n.ownerDocument.defaultView;return null===o?null:o.getComputedStyle(n);}function f(t){return c(require("Lexical").$isRootNode(t)?t:t.getParentOrThrow());}function a(t,n,o){var s=n.getNode(),r=o;if(require("Lexical").$isElementNode(s)){var _e3=s.getDescendantByIndex(n.offset);null!==_e3&&(s=_e3);}var _loop=function _loop(){if(require("Lexical").$isElementNode(s)){var _e4=s.getLastDescendant();null!==_e4&&(s=_e4);}var o=s.getPreviousSibling(),l=0;if(null===o){var _e5=s.getParentOrThrow(),_t=_e5.getPreviousSibling();for(;null===_t;){if(_e5=_e5.getParent(),null===_e5){o=null;break;}_t=_e5.getPreviousSibling();}null!==_e5&&(l=_e5.isInline()?0:2,o=_t);}var i=s.getTextContent();""===i&&require("Lexical").$isElementNode(s)&&!s.isInline()&&(i="\n\n");var c=i.length;if(!require("Lexical").$isTextNode(s)||r>=c){var _t2=s.getParent();s.remove(),null==_t2||0!==_t2.getChildrenSize()||require("Lexical").$isRootNode(_t2)||_t2.remove(),r-=c+l,s=o;}else{var _o2=s.getKey(),_l=t.getEditorState().read(function(){var t=require("Lexical").$getNodeByKey(_o2);return require("Lexical").$isTextNode(t)&&t.isSimpleText()?t.getTextContent():null;}),_f=c-r,_a=i.slice(0,_f);if(null!==_l&&_l!==i){var _t3=require("Lexical").$getPreviousSelection();var _n3=s;if(s.isSimpleText())s.setTextContent(_l);else{var _t4=require("Lexical").$createTextNode(_l);s.replace(_t4),_n3=_t4;}if(require("Lexical").$isRangeSelection(_t3)&&_t3.isCollapsed()){var _e6=_t3.anchor.offset;_n3.select(_e6,_e6);}}else if(s.isSimpleText()){var _e7=n.key===_o2;var _t5=n.offset;_t5<r&&(_t5=c);var _l2=_e7?_t5-r:0,_i=_e7?_t5:_f;if(_e7&&0===_l2){var _s$splitText=s.splitText(_l2,_i),_e8=_s$splitText[0];_e8.remove();}else{var _s$splitText2=s.splitText(_l2,_i),_e9=_s$splitText2[1];_e9.remove();}}else{var _t6=require("Lexical").$createTextNode(_a);s.replace(_t6);}r=0;}};for(;r>0&&null!==s;){_loop();}}function d(o,s){(require("Lexical").$isRangeSelection(o)?o.isCollapsed():require("Lexical").$isTextNode(o)||require("Lexical").$isElementNode(o))||t(280);var r=l(require("Lexical").$isRangeSelection(o)?o.style:require("Lexical").$isTextNode(o)?o.getStyle():o.getTextStyle()),c=Object.entries(s).reduce(function(e,_ref){var t=_ref[0],n=_ref[1];return"function"==typeof n?e[t]=n(r[t],o):null===n?delete e[t]:e[t]=n,e;},babelHelpers["extends"]({},r)),f=i(c);require("Lexical").$isRangeSelection(o)||require("Lexical").$isTextNode(o)?o.setStyle(f):o.setTextStyle(f),n.set(f,c);}function u(t){var n=require("Lexical").$getSelection();if(!n)return;var o=new Map(),s=function s(e){return o.get(e.getKey())||[0,e.getTextContentSize()];};if(require("Lexical").$isRangeSelection(n))for(var _t7 of require("Lexical").$caretRangeFromSelection(n).getTextSlices())_t7&&o.set(_t7.caret.origin.getKey(),_t7.getSliceIndices());var r=n.getNodes();for(var _n4 of r){if(!require("Lexical").$isTextNode(_n4)||!_n4.canHaveFormat())continue;var _s=s(_n4),_o3=_s[0],_r=_s[1];if(_r!==_o3)if(require("Lexical").$isTokenOrSegmented(_n4)||0===_o3&&_r===_n4.getTextContentSize())t(_n4);else{t(_n4.splitText(_o3,_r)[0===_o3?0:1]);}}require("Lexical").$isRangeSelection(n)&&"text"===n.anchor.type&&"text"===n.focus.type&&n.anchor.key===n.focus.key&&g(n);}function g(e){if(e.isBackward()){var _t8=e.anchor,_n5=e.focus,_o4=_t8.key,_s2=_t8.offset,_r2=_t8.type;_t8.set(_n5.key,_n5.offset,_n5.type),_n5.set(_o4,_s2,_r2);}}function p(e,t){var n=e.getFormatType(),o=e.getIndent();n!==t.getFormatType()&&t.setFormat(n),o!==t.getIndent()&&t.setIndent(o);}function $(e){return e.getNode().isAttached();}function h(t){var n=t;for(;null!==n&&!require("Lexical").$isRootOrShadowRoot(n);){var _e0=n.getLatest(),_t9=n.getParent();0===_e0.getChildrenSize()&&n.remove(!0),n=_t9;}}function y(n,o,s,r,l){if(l===void 0){l=null;}if(0===o.length)return;var i=o[0],c=new Map(),f=[];var a=require("Lexical").$isElementNode(i)?i:i.getParentOrThrow();a.isInline()&&(a=a.getParentOrThrow());var d=!1;for(;null!==a;){var _t0=a.getPreviousSibling();if(null!==_t0){a=_t0,d=!0;break;}if(a=a.getParentOrThrow(),require("Lexical").$isRootOrShadowRoot(a))break;}var u=new Set();for(var _t1=0;_t1<s;_t1++){var _n6=o[_t1];require("Lexical").$isElementNode(_n6)&&0===_n6.getChildrenSize()&&u.add(_n6.getKey());}var g=new Set();var _loop2=function _loop2(){var s=o[_n7];var l=s.getParent();if(null!==l&&l.isInline()&&(l=l.getParent()),null!==l&&require("Lexical").$isLeafNode(s)&&!g.has(s.getKey())){var _t15=l.getKey();if(void 0===c.get(_t15)){var _n9=r();_n9.setFormat(l.getFormatType()),_n9.setIndent(l.getIndent()),f.push(_n9),c.set(_t15,_n9),l.getChildren().forEach(function(t){_n9.append(t),g.add(t.getKey()),require("Lexical").$isElementNode(t)&&t.getChildrenKeys().forEach(function(e){return g.add(e);});}),h(l);}}else if(u.has(s.getKey())){require("Lexical").$isElementNode(s)||t(179);var _n0=r();_n0.setFormat(s.getFormatType()),_n0.setIndent(s.getIndent()),f.push(_n0),s.remove(!0);}};for(var _n7=0;_n7<s;_n7++){_loop2();}if(null!==l)for(var _e1=0;_e1<f.length;_e1++){var _t10=f[_e1];l.append(_t10);}var p=null;if(require("Lexical").$isRootOrShadowRoot(a)){if(d){if(null!==l)a.insertAfter(l);else for(var _e10=f.length-1;_e10>=0;_e10--){var _t11=f[_e10];a.insertAfter(_t11);}}else{var _t12=a.getFirstChild();if(require("Lexical").$isElementNode(_t12)&&(a=_t12),null===_t12){if(l)a.append(l);else for(var _e11=0;_e11<f.length;_e11++){var _t13=f[_e11];a.append(_t13),p=_t13;}}else if(null!==l)_t12.insertBefore(l);else for(var _e12=0;_e12<f.length;_e12++){var _n8=f[_e12];_t12.insertBefore(_n8),p=_n8;}}}else if(l)a.insertAfter(l);else for(var _e13=f.length-1;_e13>=0;_e13--){var _t14=f[_e13];a.insertAfter(_t14),p=_t14;}var y=require("Lexical").$getPreviousSelection();require("Lexical").$isRangeSelection(y)&&$(y.anchor)&&$(y.focus)?require("Lexical").$setSelection(y.clone()):null!==p?p.selectEnd():n.dirty=!0;}function m(e){var t=S(e);return null!==t&&"vertical-rl"===t.writingMode;}function S(t){var n=t.anchor.getNode();return require("Lexical").$isElementNode(n)?c(n):f(n);}function x(e,t,n,o){e.modify(t?"extend":"move",n,o);}function N(e){var t=S(e);return null!==t&&"rtl"===t.direction;}function T(e,t,n){var o=l(e.getStyle());return null!==o&&o[t]||n;}var E=a;exports.$cloneWithProperties=require("Lexical").$cloneWithProperties,exports.$selectAll=require("Lexical").$selectAll,exports.$addNodeStyle=function(e){var t=e.getStyle(),o=r(t);n.set(t,o);},exports.$copyBlockFormatIndent=p,exports.$ensureForwardRangeSelection=g,exports.$forEachSelectedTextNode=u,exports.$getComputedStyleForElement=c,exports.$getComputedStyleForParent=f,exports.$getSelectionStyleValueForProperty=function(t,n,o){if(o===void 0){o="";}var s=null;var r=t.getNodes(),i=t.anchor,c=t.focus,f=t.isBackward(),a=f?c.offset:i.offset,d=f?c.getNode():i.getNode();if(require("Lexical").$isRangeSelection(t)&&t.isCollapsed()&&""!==t.style){var _e14=l(t.style);if(null!==_e14&&n in _e14)return _e14[n];}for(var _t16=0;_t16<r.length;_t16++){var _l3=r[_t16];if((0===_t16||0!==a||!_l3.is(d))&&require("Lexical").$isTextNode(_l3)){var _e15=T(_l3,n,o);if(null===s)s=_e15;else if(s!==_e15){s="";break;}}}return null===s?o:s;},exports.$isAtNodeEnd=function(n){if("text"===n.type)return n.offset===n.getNode().getTextContentSize();var o=n.getNode();return require("Lexical").$isElementNode(o)||t(177),n.offset===o.getChildrenSize();},exports.$isParentElementRTL=N,exports.$isParentRTL=function(e){var t=f(e);return null!==t&&"rtl"===t.direction;},exports.$moveCaretSelection=x,exports.$moveCharacter=function(e,t,n){var o=N(e);var s;s=m(e)||o?!n:n,x(e,t,s,"character");},exports.$patchStyleText=function(t,n){if(require("Lexical").$isRangeSelection(t)&&t.isCollapsed()){d(t,n);var _o5=t.anchor.getNode();require("Lexical").$isElementNode(_o5)&&_o5.isEmpty()&&d(_o5,n);}u(function(e){d(e,n);});},exports.$setBlocksType=function(t,n,o){if(o===void 0){o=p;}if(null===t)return;var s=t.getStartEndPoints(),r=new Map();var l=null;if(s){var _require_Lexical;var _t17=s[0],_n1=s[1];l=(_require_Lexical=require("Lexical")).$createRangeSelection(),l.anchor.set(_t17.key,_t17.offset,_t17.type),l.focus.set(_n1.key,_n1.offset,_n1.type);var _o6=_require_Lexical.$findMatchingParent(_t17.getNode(),_require_Lexical.INTERNAL_$isBlock),_i2=_require_Lexical.$findMatchingParent(_n1.getNode(),_require_Lexical.INTERNAL_$isBlock);require("Lexical").$isElementNode(_o6)&&r.set(_o6.getKey(),_o6),require("Lexical").$isElementNode(_i2)&&r.set(_i2.getKey(),_i2);}for(var _n10 of t.getNodes())if(require("Lexical").$isElementNode(_n10)&&require("Lexical").INTERNAL_$isBlock(_n10))r.set(_n10.getKey(),_n10);else if(null===s){var _t18=require("Lexical").$findMatchingParent(_n10,require("Lexical").INTERNAL_$isBlock);require("Lexical").$isElementNode(_t18)&&r.set(_t18.getKey(),_t18);}for(var _ref3 of r){var _e16=_ref3[0];var _t19=_ref3[1];{var _s3=n();o(_t19,_s3),_t19.replace(_s3,!0),l&&(_e16===l.anchor.key&&l.anchor.set(_s3.getKey(),l.anchor.offset,l.anchor.type),_e16===l.focus.key&&l.focus.set(_s3.getKey(),l.focus.offset,l.focus.type));}}l&&t.is(require("Lexical").$getSelection())&&require("Lexical").$setSelection(l);},exports.$shouldOverrideDefaultCharacterSelection=function(t,n){var o=m(t)?!n:n;N(t)&&(o=!o);var s=require("Lexical").$caretFromPoint(t.focus,o?"previous":"next");if(require("Lexical").$isExtendableTextPointCaret(s))return!1;for(var _t20 of require("Lexical").$extendCaretToRange(s)){if(require("Lexical").$isChildCaret(_t20))return!_t20.origin.isInline();if(!require("Lexical").$isElementNode(_t20.origin)){if(require("Lexical").$isDecoratorNode(_t20.origin))return!0;break;}}return!1;},exports.$sliceSelectedTextNodeContent=function(t,n,o){if(o===void 0){o="self";}var s=t.getStartEndPoints();if(n.isSelected(t)&&!require("Lexical").$isTokenOrSegmented(n)&&null!==s){var _r3=s[0],_l4=s[1],_i3=t.isBackward(),_c=_r3.getNode(),_f2=_l4.getNode(),_a2=n.is(_c),_d=n.is(_f2);if(_a2||_d){var _e$$getCharacterOffse=require("Lexical").$getCharacterOffsets(t),_s4=_e$$getCharacterOffse[0],_r4=_e$$getCharacterOffse[1],_l5=_c.is(_f2),_a3=n.is(_i3?_f2:_c),_d2=n.is(_i3?_c:_f2);var _u,_g=0;if(_l5)_g=_s4>_r4?_r4:_s4,_u=_s4>_r4?_s4:_r4;else if(_a3){_g=_i3?_r4:_s4,_u=void 0;}else if(_d2){_g=0,_u=_i3?_s4:_r4;}var _p=n.__text.slice(_g,_u);_p!==n.__text&&("clone"===o&&(n=require("Lexical").$cloneWithPropertiesEphemeral(n)),n.__text=_p);}}return n;},exports.$trimTextContentFromAnchor=a,exports.$wrapNodes=function(t,n,o){if(o===void 0){o=null;}var s=t.getStartEndPoints(),r=s?s[0]:null,l=t.getNodes(),i=l.length;if(null!==r&&(0===i||1===i&&"element"===r.type&&0===r.getNode().getChildrenSize())){var _e17="text"===r.type?r.getNode().getParentOrThrow():r.getNode(),_t21=_e17.getChildren();var _s5=n();return _s5.setFormat(_e17.getFormatType()),_s5.setIndent(_e17.getIndent()),_t21.forEach(function(e){return _s5.append(e);}),o&&(_s5=o.append(_s5)),void _e17.replace(_s5);}var c=null,f=[];for(var _s6=0;_s6<i;_s6++){var _r5=l[_s6];require("Lexical").$isRootOrShadowRoot(_r5)?(y(t,f,f.length,n,o),f=[],c=_r5):null===c||null!==c&&require("Lexical").$hasAncestor(_r5,c)?f.push(_r5):(y(t,f,f.length,n,o),f=[_r5]);}y(t,f,f.length,n,o);},exports.createDOMRange=function(t,n,r,l,i){var _s7,_s8;var c=n.getKey(),f=l.getKey(),a=document.createRange();var d=t.getElementByKey(c),u=t.getElementByKey(f),g=r,p=i;if(require("Lexical").$isTextNode(n)&&(d=o(d)),require("Lexical").$isTextNode(l)&&(u=o(u)),void 0===n||void 0===l||null===d||null===u)return null;"BR"===d.nodeName&&(_s7=s(d),d=_s7[0],g=_s7[1],_s7),"BR"===u.nodeName&&(_s8=s(u),u=_s8[0],p=_s8[1],_s8);var $=d.firstChild;d===u&&null!=$&&"BR"===$.nodeName&&0===g&&0===p&&(p=1);try{a.setStart(d,g),a.setEnd(u,p);}catch(e){return null;}return!a.collapsed||g===p&&c===f||(a.setStart(u,p),a.setEnd(d,g)),a;},exports.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];var o=n.getBoundingClientRect(),s=getComputedStyle(n),r=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),l=Array.from(t.getClientRects());var i,c=l.length;l.sort(function(e,t){var n=e.top-t.top;return Math.abs(n)<=3?e.left-t.left:n;});for(var _e18=0;_e18<c;_e18++){var _t22=l[_e18],_n11=i&&i.top<=_t22.top&&i.top+i.height>_t22.top&&i.left+i.width>_t22.left,_s9=_t22.width+r===o.width;_n11||_s9?(l.splice(_e18--,1),c--):i=_t22;}return l;},exports.getCSSFromStyleObject=i,exports.getStyleObjectFromCSS=l,exports.trimTextContentFromAnchor=E;}),null);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("63"),u=e.of_string("65"),c=e.of_string("98"),d=e.of_string("504"),m=e.of_string("1000"),p=e.of_string("1001"),_=e.of_string("1204"),f=e.of_string("1210"),g=e.of_string("1224"),h=e.of_string("1234"),y=e.of_string("1225"),C=e.of_string("2220");l.traceGroupMessage=s,l.armadilloActMessageSend=u,l.traceCreated=c,l.richMediaMediaSendAttachmentType=d,l.traceTextMessage=m,l.traceMediaMessage=p,l.advancedCryptoMEMSendTaskComplete=_,l.deliveryReceiptReceived=f,l.advancedCryptoMEMEncryptionDeviceCount=g,l.advancedCryptoGroupDualSend=h,l.advancedCryptoDualSend=y,l.armadilloTlcControlOpenThread=C}),98);
__d("LSMessageRenderingType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});i.default=e}),66);
__d("LSMessageSearchType",[],(function(t,n,r,o,a,i){var e=Object.freeze({THREAD:1,MESSAGE:2});i.default=e}),66);
__d("LSMessageUnsendabilityStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});i.default=e}),66);
__d("LSQuickReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,HORIZONTAL:1,VERTICAL:2});i.default=e}),66);
__d("LSReplyMessageStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});i.default=e}),66);
__d("LSTransportKey",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADVANCED_CRYPTO:"AdvancedCrypto",CARRIER_MESSAGING:"CarrierMessaging",FB_BROKER:"FBBroker",FB_LEGACY_BROKER:"FBLegacyBroker",TAM:"TAM",WHATS_APP:"WhatsApp",INSTAMADILLO:"Instamadillo",ENCRYPTED_BACKUPS:"EncryptedBackups",CLIENT_CONTACTS_PLACEHOLDER:"",ENCRYPTED_BACKUPS_MEDIA:"EncryptedBackupsMedia"});i.default=e}),66);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}l.isEphemeralSettingSetAdminMsg=e}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWAdminMsgTypesGrouped","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWMsgType","MAWTimeUtils","ReQL"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=new Set([(u=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,u.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,u.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,u.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,u.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,u.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,u.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION]),d=new Set([u.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,u.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME,u.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,u.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME]),m=s._(/*BTDS*/"Change").toString(),p=s._(/*BTDS*/"See All").toString(),_=s._(/*BTDS*/"Learn more").toString(),f=s._(/*BTDS*/"Learn more").toString(),g=s._(/*BTDS*/"actions you can take.").toString(),h=s._(/*BTDS*/"Go to other chat").toString(),y=s._(/*BTDS*/"View archived chat").toString(),C=s._(/*BTDS*/"View poll").toString(),b=s._(/*BTDS*/"Change").toString();async function v(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.admin_message_ctas.index("ctaId")));return n!=null?(e||(e=o("I64"))).add(n.ctaId,(e||(e=o("I64"))).one):(e||(e=o("I64"))).zero}function S(e,t,n){var r=[t,n];return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.admin_message_ctas).bounds({gte:r,lte:r}))}function R(e,t,n){if(e==null)return{showAdChoiceIcon:!1};if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:m};if(c.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:t,targetTitle:n,title:C};if(d.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:b};switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:_};case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:h};case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:y};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.messenger.com/help/1145318292241859/?helpref=uk_lm",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:g};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{actionUrl:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:f};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function L(e){if(e!=null){if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return"admin_msg_armadillo_ephemeral_change_duration";if(c.has(e))return"admin_msg_poll_details";if(d.has(e))return"admin_msg_change_theme";switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return"admin_msg_e2ee_thread";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_uk_osa";case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return"admin_msg_dual_thread_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case o("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return"admin_msg_change_thread_limit_sharing_permission"}}}async function E(e,t,n,r,a){await e.admin_message_ctas.add({actionContentBlob:a.actionContentBlob,actionUrl:a.actionUrl,adClientToken:a.adClientToken,adHelpUrl:a.adHelpUrl,adminMessageNicknameParticipantId:a.adminMessageNicknameParticipantId,adPreferenceUrl:a.adPreferenceUrl,ctaId:t,messageId:r.msgId,showAdChoiceIcon:a.showAdChoiceIcon,targetId:a.targetId,targetTitle:a.targetTitle,threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(r.ts),title:a.title})}async function k(e,t,n){var r=await Promise.all([S(e,t,n.msgId),v(e)]),o=r[0],a=r[1];if(o!=null)return{ctaId:o.ctaId,ctaType:L(n.adminType),title:o.title};var i=T(n.adminType,n),l=D(n.adminType,n),s=R(n.adminType,i,l);return await E(e,a,t,n,s),{ctaId:a,ctaType:L(n.adminType),title:s.title}}function I(e,t,n){var r=n.adminType;return r!=null&&(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(r)||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||r===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED||r!=null&&c.has(r)||r!=null&&d.has(r)||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(r))?k(e,t,n):Promise.resolve()}function T(t,n){if(t!=null){if(n.type_===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE)return(e||(e=o("I64"))).of_string(n.externalId);if(c.has(t)&&n.pollStanzaId!=null)return(e||(e=o("I64"))).of_string(n.pollStanzaId)}}function D(e,t){if(e!=null&&c.has(e))return t.adminContent==null||t.adminContent.length===0?void 0:t.adminContent[t.adminContent.length-1]}l.getAdminMsgCTAContentByAdminType=R,l.getCtaTypeByAdminType=L,l.getAdminMsgCtaStep=I}),226);
__d("MAWBridgeBuildAdminMsg",["MAWAdminMsg","MAWAdminMsgNormalized","MAWSubscribeToContactNames","MAWThreadCustomizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==null?void 0:e.replace(/\$/g,"$$$$")}function s(t,n,r){r===void 0&&(r=0);var a=o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(n,t),i=a.contactIds,l=a.contents,s=o("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(n),u=o("MAWThreadCustomizationUtils").skipNicknameCheck(n);if(r===1){var c=o("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(n);return o("MAWAdminMsg").buildLocalizedString(l.map(e),i.map(function(e,t){return s&&t>0||u?c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+e+")":"$CONTACT_FULL_NAME("+e+")":c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+e+")":"$PARTICIPANT_FULL_NAME("+e+")"}),n)}return o("MAWAdminMsg").buildLocalizedString(l,i,n)}l.buildAdminMsgText=s}),98);
__d("MAWBridgeMsgUtils",["LSTransportKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.keys(r("LSTransportKey")).find(function(t){return r("LSTransportKey")[t]===e});return t?r("LSTransportKey")[t]:"WhatsApp"}l.convertStringToLSTransportKeyType=e}),98);
__d("MAWReplyBuilder_Forward",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){},buildReplyUserId:function(t){}};l.MAWReplyBuilder_Forward=s}),98);
__d("MAWReplyBuilder_HighlightsTabPostReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to their post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.replyToUserId!=null?(u||(u=o("I64"))).of_string(t.replyToUserId):void 0}};l.MAWReplyBuilder_HighlightsTabPostReply=c}),226);
__d("MAWReplyBuilder_LightweightStatus",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(n){return n.replyMediaExpirationTimestampMs!=null?(e||(e=o("I64"))).of_float(n.replyMediaExpirationTimestampMs):void 0},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return t.noteContent},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to their note").toString():s._(/*BTDS*/"{name} replied to your note",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return n.replyToUserId!=null?(e||(e=o("I64"))).of_string(n.replyToUserId):void 0}};l.MAWReplyBuilder_LightweightStatus=c}),226);
__d("MAWBumpMessageMsgReplySnippet",["getMAWLocalizedBumpMsgReplySnippet"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.isAuthorMe,n=e.recipientName,o=e.replySenderIsMe,a=e.replySenderIsRecipient,i=e.senderName,l="participantBumpedParticipantMessage";return t&&o?l="currentUserBumpedOwnMessage":t?l="currentUserBumpedMessage":o?l="participantBumpedCurrentUserMessage":a&&(l="participantBumpedOwnMessage"),r("getMAWLocalizedBumpMsgReplySnippet")(l,i,n)}l.buildBumpMessageReplySnippet=e}),98);
__d("MAWReplyBuilder_Message",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWImageUtils","MAWMpsGating","MessagingAttachmentType","getErrorSafe"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){return d(t)},buildReplyAttachmentPlaintextHash:function(t){return p(t)},buildReplyAttachmentType:function(t){return y(t)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){return _(t)},buildReplyMediaPreviewWidth:function(t){return f(t)},buildReplyMessageText:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.text},buildReplySnippet:function(t,n,r){return C(t,n,r)},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplyStatus:function(t){return b(t)},buildReplyTimestampMs:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.timestampMs},buildReplyType:function(n){return n.isBumpMsg?(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.senderId}};function d(t){var n=t.replyToLSAttachment;if(n!=null&&(n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)||n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)&&n.receiverFetchId!=null)){var a=n.attachmentFbid;try{return(u||(u=o("I64"))).of_string(a)}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_e2ee_web").mustfix("[MAWMsgReply] getReplyAttachmentIdFromReplyContent: Error converting attachmentFbid, %s, to a big int for msg, %s. Attachment of type, %s, is likely using plaintexthash as id, please review types requiring attachment id: %s",a,n.messageId,(u||(u=o("I64"))).to_string(n.attachmentType),i.message)}}}var m=new Set([(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER),e.ofNumber(r("MessagingAttachmentType").IMAGE),e.ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE),e.ofNumber(r("MessagingAttachmentType").VIDEO),e.ofNumber(r("MessagingAttachmentType").AUDIO),e.ofNumber(r("MessagingAttachmentType").FILE)]);function p(e){var t=e.replyToLSAttachment;if(t!=null&&m.has(t.attachmentType))return t.attachmentFbid}function _(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyHeight:n.previewHeight}function f(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyWidth:n.previewWidth}function g(e){var t,n=(t=e.replyToLSAttachment)!=null?t:{},r=n.previewHeight,a=n.previewWidth;if(r==null||a==null)return{replyHeight:void 0,replyWidth:void 0};var i=o("MAWImageUtils").boundHeightWidth((u||(u=o("I64"))).to_int32(r),u.to_int32(a),96*.8),l=i.height,s=i.width;return{replyHeight:u.of_int32(l),replyWidth:u.of_int32(s)}}function h(e){var t,n=(t=e.replyToLSMessage)==null?void 0:t.text;return n!=null&&n!==""}function y(t){var n=t.replyToLSAttachment;if(n!=null)switch(n.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):return h(t)?void 0:(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function C(e,t,n){var r=e.replyToLSMessage;if(!(r==null&&!o("MAWMpsGating").isMpsMessageRendering())){var a=t===n,i="$PARTICIPANT_FIRST_NAME("+t+")";if(r==null||r.isUnsent===!0)return a?s._(/*BTDS*/"You replied to a removed message").toString():s._(/*BTDS*/"{name} replied to a removed message",[s._param("name",i)]).toString();var l=r.senderId,c=(u||(u=o("I64"))).to_string(l)===n,d=t===u.to_string(l),m="$PARTICIPANT_FIRST_NAME("+u.to_string(l)+")";if(e.isBumpMsg){var p=o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:a,recipientName:m,replySenderIsMe:c,replySenderIsRecipient:d,senderName:i});return p==null?void 0:p.toString()}return a&&c?s._(/*BTDS*/"You replied to yourself").toString():d?s._(/*BTDS*/"{other} replied to themself",[s._param("other",i)]).toString():a?s._(/*BTDS*/"You replied to {other_name}",[s._param("other_name",m)]).toString():c?s._(/*BTDS*/"{other_name} replied to you",[s._param("other_name",i)]).toString():s._(/*BTDS*/"{other} replied to {other_name}",[s._param("other",i),s._param("other_name",m)]).toString()}}function b(t){var n=t.replyToLSMessage;if(n==null)return o("MAWMpsGating").isMpsMessageRendering()?(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED):void 0;var a=t.replyToLSAttachment;if(n.isUnsent===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);if(n.isExpired===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").EXPIRED);if(n.isAdminMessage===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);switch(n.displayedContentTypes){case(e||(e=o("LSIntEnum"))).ofNumber(256):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);case(e||(e=o("LSIntEnum"))).ofNumber(1):case(e||(e=o("LSIntEnum"))).ofNumber(4):case(e||(e=o("LSIntEnum"))).ofNumber(32):case(e||(e=o("LSIntEnum"))).ofNumber(64):case(e||(e=o("LSIntEnum"))).ofNumber(1024):case(e||(e=o("LSIntEnum"))).ofNumber(536870912):case(e||(e=o("LSIntEnum"))).ofNumber(4096):case(e||(e=o("LSIntEnum"))).ofNumber(16384):case(e||(e=o("LSIntEnum"))).ofNumber(134217728):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);case(e||(e=o("LSIntEnum"))).ofNumber(2):{if(a!=null)switch(a.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID)}return}case(e||(e=o("LSIntEnum"))).ofNumber(65536):case(e||(e=o("LSIntEnum"))).ofNumber(131072):case(e||(e=o("LSIntEnum"))).ofNumber(262144):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE);case(e||(e=o("LSIntEnum"))).ofNumber(32768):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").UNKNOWN);default:return}}l.MAWReplyBuilder_Message=c}),226);
__d("MAWReplyBuilder_PostMention",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWPostMentionXMASnippetFbt"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,a){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var i="$PARTICIPANT_FIRST_NAME("+e+")",l=n===a,s=l?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(i):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return s.toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(s||(s=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(s||(s=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_PostMention=u}),98);
__d("MAWReplyBuilder_ProducerStoryReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWMsgType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(n){return n.storyMediaId!=null?(e||(e=o("I64"))).of_float(n.storyMediaId):void 0},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to your story").toString():s._(/*BTDS*/"{name} replied to their story",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY)},buildReplyStatus:function(t){return t.storyMsgType===o("MAWMsgType").MSG_TYPE.IMAGE?(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID):void 0},buildReplyTimestampMs:function(n){return n.timestampMs!=null?(e||(e=o("I64"))).of_float(n.timestampMs):void 0},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return(e||(e=o("I64"))).of_string(n.storyOwnerId)}};l.MAWReplyBuilder_ProducerStoryReply=c}),226);
__d("MAWReplyBuilder_Story",["fbt","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=t.storyOwnerId===r,o=n===r,a="$PARTICIPANT_FIRST_NAME("+n+")",i="$PARTICIPANT_FIRST_NAME("+t.storyOwnerId+")";return e?o?s._(/*BTDS*/"You replied to your story").toString():s._(/*BTDS*/"{name} replied to your story",[s._param("name",a)]).toString():o?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",i)]).toString():void 0},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(t){},buildReplyUserId:function(t){return(u||(u=o("I64"))).of_string(t.storyOwnerId)}};l.MAWReplyBuilder_StoryReply=c}),226);
__d("MAWReplyBuilder_StoryMention",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,o){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var a="$PARTICIPANT_FIRST_NAME("+e+")",i=n===o;return i?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",a)]).toString():s._(/*BTDS*/"Mentioned you in their story").toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(u||(u=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_StoryMention=c}),226);
__d("MAWReplyBuilder",["MAWReplyBuilder_Forward","MAWReplyBuilder_HighlightsTabPostReply","MAWReplyBuilder_LightweightStatus","MAWReplyBuilder_Message","MAWReplyBuilder_PostMention","MAWReplyBuilder_ProducerStoryReply","MAWReplyBuilder_Story","MAWReplyBuilder_StoryMention"],(function(t,n,r,o,a,i,l){"use strict";var e={FB_POST_MENTION:o("MAWReplyBuilder_PostMention").MAWReplyBuilder_PostMention,FB_PRODUCER_STORY_REPLY:o("MAWReplyBuilder_ProducerStoryReply").MAWReplyBuilder_ProducerStoryReply,FB_STORY_MENTION:o("MAWReplyBuilder_StoryMention").MAWReplyBuilder_StoryMention,FORWARD:o("MAWReplyBuilder_Forward").MAWReplyBuilder_Forward,HIGHLIGHTS_TAB_POST_REPLY:o("MAWReplyBuilder_HighlightsTabPostReply").MAWReplyBuilder_HighlightsTabPostReply,LIGHTWEIGHT_STATUS:o("MAWReplyBuilder_LightweightStatus").MAWReplyBuilder_LightweightStatus,MESSAGE:o("MAWReplyBuilder_Message").MAWReplyBuilder_Message,STORY:o("MAWReplyBuilder_Story").MAWReplyBuilder_StoryReply};function s(t){return e[t]}function u(e){var t=s(e.replyType);return t.buildReplyUserId(e)}l.getReplyBuilder=s,l.getReplyUserIdNew=u}),98);
__d("MAWMsgReply",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","MAWMsg","MAWMsgType","MAWReplyBuilder","MsgrWebGating","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.replySourceId!=null}function c(e,t,n,a,i){o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&n!=null&&n!==(t!=null?t:"")&&r("FBLogger")("messenger_e2ee_web").warn("[MAWMsgReply][%s][%s] LS derived reply field generated does not match the legacy derived version for msg, %s. Expected: %s, Actual: %s",i,e,a,t,n)}function d(t){var n=m(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyUserId(r);return c("getReplyUserId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function m(t){var n=t.replyToUserId;return n==null?void 0:(e||(e=o("I64"))).of_string(n)}function p(t){var n=_(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceTypeV2();return c("getReplySourceTypeV2",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function _(e){var t=e.isFBPostMention,n=e.isFBStoryMention,a=e.isForwarded,i=e.isMsgHighlightsTabFriendUpdatesReply,l=e.isNoteReply,c=e.isStoryProducerReply,d=e.isStoryReply,m=e.isStoryShare,p=e.replyMediaExpirationTimestampMs,_=u(e);if(t===!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION);if(a)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD);if(m!=null&&m)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION);if(i!=null&&i)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(p!=null&&p<o("WATimeUtils").unixTime()&&l!==!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").EXPIRED_STORY);if(_)return d!=null&&d?c!=null&&c?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):l===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function f(t){var n=g(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceType();return c("getReplySourceType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function g(e){var t=u(e),n=e.isMsgHighlightsTabFriendUpdatesReply,a=e.isNoteReply,i=e.isStoryReply,l=e.isStoryShare;if(l!=null&&l)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(t)return i!=null&&i?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):a===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function h(e){var t=y(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySourceId(n);return n.replyType!=="FB_STORY_MENTION"&&n.replyType!=="FB_POST_MENTION"&&c("getReplySourceId",t,r,e.msgId,e.type_),r}}function y(e){if(e.replySourceId!=null)return e.replySourceId}function C(t){var n=b(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyTimestampMs(r);return c("getReplyTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function b(t){if(t.replySourceTimestampMs!=null)return(e||(e=o("I64"))).of_float(t.replySourceTimestampMs)}function v(e){var t=S(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyMessageText(n);return c("getReplyMessageText",t,r,e.msgId,e.type_),r}}function S(e){if(e.replySourceId!=null)return e.replyMessageText}function R(e){if(e.replySourceId!=null)return e.replyMentionedJids}function L(t){var n=E(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyType(r);return c("getReplyType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function E(e){return e.type_===o("MAWMsg").bumpExistingMessage?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):u(e)?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR):void 0}function k(e){return e.replySourceId==null?!1:I(e.replyStatusType)}function I(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;default:return!1}}function T(e){return e.replyStatusType==="XMA"&&e.replyMessageText!=null}function D(t){var n=x(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewHeight(r);return c("getReplyMediaPreviewHeight",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function x(t){if(k(t))return t.replyMediaPreviewHeight!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewHeight):void 0}function $(t){var n=P(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewWidth(r);return c("getReplyMediaPreviewWidth",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function P(t){if(k(t))return t.replyMediaPreviewWidth!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewWidth):void 0}function N(t){var n=M(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentType(r);return c("getReplyAttachmentType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function M(e){var t=e.replyStatusType;if(t!=null){var n=t==="Raven",a=k(e)||n;if(a)switch(t){case"Gif":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case"Ptt":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"Sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Video":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case"Image":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case"XMA":return e.isIGXMAPostShare===!0||e.isIGXMAStoryShare===!0||e.isStoryHighlightShare===!0||e.isPostPrivateReply===!0||e.isMsgHighlightsTabFriendUpdatesReply===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST):T(e)?void 0:(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case"DocumentFile":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Raven":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}}function w(t){var n=A(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentId(r);return c("getReplyAttachmentId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function A(t){var n=t.replyMediaId,r=t.replyXMAId;if(k(t)&&n!=null)return r!=null?void 0:(e||(e=o("I64"))).of_float(n);if(!(n!=null||r==null)&&!(r!=null&&T(t)))return(e||(e=o("I64"))).of_int32(r)}function F(e){var t=O(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyAttachmentPlaintextHash(n);return c("getReplyAttachmentPlaintextHash",t,r,e.msgId,e.type_),r}}function O(e){var t=e.replyPlaintextHash;if(k(e)&&t!=null)return""+t}function B(t){var n=W(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaExpirationTimestampMs(r);return c("getReplyMediaExpirationTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function W(t){var n=t.isNoteReply,r=t.isStoryReply,a=t.replyMediaExpirationTimestampMs,i=t.replyMessageText,l=t.replyStatusType;if(n===!0)return a!=null?(e||(e=o("I64"))).of_float(a):void 0;var s=N(t),u=w(t);if(l!=null&&l==="XMA"&&s==null){if(u!=null)return;if(i==null)return(e||(e=o("I64"))).zero}if(!(u!=null||!(r!=null&&r)))return(e||(e=o("I64"))).zero}l.assertIfQuotedV2=c,l.getReplyUserId=d,l.getReplySourceTypeV2=p,l.getReplySourceType=f,l.getReplySourceId=h,l.getReplyTimestampMs=C,l.getReplyMessageText=v,l.getReplyMentionedJids=R,l.getReplyType=L,l.getReplyMediaPreviewHeight=D,l.getReplyMediaPreviewWidth=$,l.getReplyAttachmentType=N,l.getReplyAttachmentTypeLegacy=M,l.getReplyAttachmentId=w,l.getReplyAttachmentPlaintextHash=F,l.getReplyMediaExpirationTimestampMs=B}),98);
__d("MAWMsgReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","MAWMsgReply","MAWMsgType","MAWReplyBuilder","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e){case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.REVOKED:return r("LSReplyMessageStatus").DELETED;case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("LSReplyMessageStatus").VALID;case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:return r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return r("LSReplyMessageStatus").UNKNOWN;case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return r("LSReplyMessageStatus").EXPIRED;default:return}}function c(t){var n=d(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyStatus(r);return o("MAWMsgReply").assertIfQuotedV2("getLSReplyMessageStatus",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function d(e){var t=u(e.replyStatusType);if(t!=null)return(s||(s=o("LSIntEnum"))).ofNumber(t)}l.getReplyMessageStatus=u,l.getLSReplyMessageStatus=c}),98);
__d("MAWMsgReplySnippet",["fbt","FBLogger","I64","LSIntEnum","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWCurrentUser","MAWMpsGating","MAWMsgReply","MAWMsgReplyStatus","MAWMsgType","MAWPostMentionXMASnippetFbt","MAWReplyBuilder","MsgrWebGating","ODS"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=t.isAuthorMe,a=t.isBumpMsg,i=a===void 0?!1:a,l=t.isDeletedMsg,c=t.isFBPostMention,d=c===void 0?!1:c,m=t.isFBStoryMention,p=m===void 0?!1:m,_=t.isIGStoryMention,f=_===void 0?!1:_,g=t.isIGXMAStoryShare,h=g===void 0?!1:g,y=t.isMsgHighlightsTabFriendUpdatesReply,C=y===void 0?!1:y,b=t.isNoteReply,v=b===void 0?!1:b,S=t.isPostPrivateReply,R=S===void 0?!1:S,L=t.isStoryHighlightShare,E=L===void 0?!1:L,k=t.isStoryProducerReply,I=t.isStoryReaction,T=I===void 0?!1:I,D=t.isStoryReply,x=D===void 0?!1:D,$=t.isStoryShare,P=$===void 0?!1:$,N=t.recipientName,M=t.replyAttachmentType,w=t.replySenderIsMe,A=w===void 0?!1:w,F=t.replySenderIsRecipient,O=F===void 0?!1:F,B=t.senderName;switch(!0){case d:return n?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(N):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(B);case i:return o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:n,recipientName:N,replySenderIsMe:A,replySenderIsRecipient:O,senderName:B});case E:return s._(/*BTDS*/"Sent a story highlight");case(h&&M!=null&&(e||(e=o("I64"))).equal(M,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST))):return s._(/*BTDS*/"Sent a story");case(n&&l):return s._(/*BTDS*/"You replied to a removed message");case(n&&P):return s._(/*BTDS*/"You shared a story");case(n&&T):return s._(/*BTDS*/"You reacted to their story");case(n&&f):return N!=null?s._(/*BTDS*/"You mentioned \u0040{name} in your story",[s._param("name",N)]):s._(/*BTDS*/"You mentioned a participant in your story");case(n&&p):return N!=null?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",N)]):s._(/*BTDS*/"You mentioned a participant in your story");case f:case p:return s._(/*BTDS*/"Mentioned you in their story");case(!n&&C):return s._(/*BTDS*/"{name} replied to your post",[s._param("name",B)]);case(n&&C):return s._(/*BTDS*/"You replied to their post");case(n&&R):return N!=null?s._(/*BTDS*/"You replied to {name}'s post",[s._param("name",N)]):s._(/*BTDS*/"You replied to a participant's post");case R:return s._(/*BTDS*/"{name} replied to your post",[s._param("name",B)]);case(!n&&v):return s._(/*BTDS*/"{name} replied to your note",[s._param("name",B)]);case(n&&v):return s._(/*BTDS*/"You replied to their note");case(n&&A):return s._(/*BTDS*/"You replied to yourself");case(n&&x):return k===!0?s._(/*BTDS*/"You replied to your story"):N!=null?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",N)]):s._(/*BTDS*/"You replied to a participant's story");case n:return N!=null?s._(/*BTDS*/"You replied to {other_name}",[s._param("other_name",N)]):s._(/*BTDS*/"You replied to a participant");case l:return s._(/*BTDS*/"{name} replied to a removed message",[s._param("name",B)]);case P:return s._(/*BTDS*/"{user} shared a story",[s._param("user",B)]);case T:return s._(/*BTDS*/"Reacted to your story");case O:return s._(/*BTDS*/"{other} replied to themself",[s._param("other",B)]);case(A&&x):return k===!0?s._(/*BTDS*/"{name} replied to their story",[s._param("name",B)]):s._(/*BTDS*/"{name} replied to your story",[s._param("name",B)]);case A:return s._(/*BTDS*/"{other_name} replied to you",[s._param("other_name",B)]);default:return N!=null?s._(/*BTDS*/"{other} replied to {other_name}",[s._param("other",B),s._param("other_name",N)]):s._(/*BTDS*/"{other} replied to participant",[s._param("other",B)])}}function m(t,n,r,a,i){if(a===void 0&&(a=!1),(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(25))){var l=t?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(r):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return l==null?void 0:l.toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(22)))return t?r!=null?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",r)]).toString():s._(/*BTDS*/"You mentioned a participant in your story").toString():s._(/*BTDS*/"Mentioned you in their story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(14)))return t?s._(/*BTDS*/"You replied to their post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(13)))return t?r!=null?s._(/*BTDS*/"You replied to {name}'s post",[s._param("name",r)]).toString():s._(/*BTDS*/"You replied to a participant's post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18)))return t?s._(/*BTDS*/"You replied to their note").toString():s._(/*BTDS*/"{name} replied to your note",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24))){var c=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24));if(t)return c?s._(/*BTDS*/"You replied to your story").toString():r!=null?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",r)]).toString():s._(/*BTDS*/"You replied to a participant's story").toString();if(a)return c?s._(/*BTDS*/"{name} replied to their story",[s._param("name",i)]).toString():s._(/*BTDS*/"{name} replied to your story",[s._param("name",i)]).toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(12)))return t?s._(/*BTDS*/"You reacted to their story").toString():s._(/*BTDS*/"Reacted to your story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(4)))return t?s._(/*BTDS*/"You shared a story").toString():s._(/*BTDS*/"{user} shared a story",[s._param("user",i)]).toString()}function p(t,n,a,i){var l=t.senderId,s=(e||(e=o("I64"))).to_string(t.senderId)===a,u=n===a;if(l==null||n==null)throw r("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToUserId or / and replying message sender");var c="$PARTICIPANT_FIRST_NAME("+e.to_string(l)+")",d="$PARTICIPANT_FIRST_NAME("+n+")",p=m(u,i,c,s,d);return p==null?void 0:p.toString()}function _(e){var t=f(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent,r=e.sender;if(n!=null){var a=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySnippet(n,r,o("MAWCurrentUser").getID());return o("MAWMsgReply").assertIfQuotedV2("getReplySnippet",t,a,e.msgId,e.type_),a}}function f(e){var t;if(!o("MAWMpsGating").isMpsMessageRendering()){var n=e.isAuthorMe,a=e.isFBPostMention,i=a===void 0?!1:a,l=e.isFBStoryMention,s=l===void 0?!1:l,u=e.isIGStoryMention,m=u===void 0?!1:u,p=e.isIGXMAStoryShare,_=e.isMsgHighlightsTabFriendUpdatesReply,f=_===void 0?!1:_,g=e.isNoteReply,h=g===void 0?!1:g,y=e.isPostPrivateReply,C=y===void 0?!1:y,b=e.isStoryHighlightShare,v=b===void 0?!1:b,S=e.isStoryProducerReply,R=e.isStoryReaction,L=e.isStoryReply,E=e.isStoryShare,k=E===void 0?!1:E,I=e.replySenderIsMe,T=e.replySourceId,D=e.replyStatusType,x=e.replyToUserId,$=e.sender,P=e.type_,N=P===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;if(!(T==null&&!L&&!k&&!m&&!s&&!v&&!h&&!i)){if(x==null||$==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error getting reply snippet without replyToUserId or sender");return(c||(c=o("ODS"))).bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet"),(t=d({isAuthorMe:n,isBumpMsg:N,isDeletedMsg:o("MAWMsgReplyStatus").getReplyMessageStatus(D)===r("LSReplyMessageStatus").DELETED,isFBPostMention:i,isFBStoryMention:s,isIGStoryMention:m,isIGXMAStoryShare:p,isMsgHighlightsTabFriendUpdatesReply:f,isNoteReply:h,isPostPrivateReply:C,isStoryHighlightShare:v,isStoryProducerReply:S,isStoryReaction:R,isStoryReply:L,isStoryShare:k,recipientName:"$PARTICIPANT_FIRST_NAME("+x+")",replySenderIsMe:I,replySenderIsRecipient:$===x,senderName:"$PARTICIPANT_FIRST_NAME("+$+")"}))==null?void 0:t.toString()}}}l.buildLocalizedReplySnippetLegacy=d,l.getReplySnippetFromLSMessage=p,l.getReplySnippet=_}),226);
__d("MAWBridgeBuildMsg",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessageUnsendabilityStatus","MAWAckLevel","MAWBridgeBuildAdminMsg","MAWBridgeBuildMsgMentions","MAWBridgeMsg","MAWBridgeMsgUtils","MAWJids","MAWMsg","MAWMsgReply","MAWMsgReplySnippet","MAWMsgReplyStatus","MAWMsgType","MAWTimeUtils","MAWVault","MWPBumpEntityKey","isMWBumpMessage"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).reduce(function(e,t){return[].concat(e,t)},[])}function d(e){return e!=null?o("MAWVault").unvault(e):void 0}function m(e){return e!=null?o("MAWVault").vault(e):void 0}function p(e){return babelHelpers.extends({},e,{replyMessageText:m(e.replyMessageText),text:m(e.text)})}function _(e){var t=o("MAWMsgReply").getReplyMessageText(e),n=e.adminContent,r=e.adminType,a=e.adminVersion,i=e.content,l=e.isAdminMessage,u=i;l&&n!=null&&r!=null&&(u=o("MAWBridgeBuildAdminMsg").buildAdminMsgText(n,r,a));var _=o("MAWMsgReplySnippet").getReplySnippet(e);e.type_===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&(u=m(e.replySourceId==null?"":_!=null?_:s._(/*BTDS*/"Bumped a message").toString()));var f=c(e.mentionedJids,o("MAWMsgReply").getReplyMentionedJids(e)),g=e.commands?e.commands:[];return f.length>0||g.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(u),f,d(t),g.length>0?g:void 0)):{replyMessageText:t,text:u}}function f(t){var n=t.ephemeralDurationInSec;return n!=null?(e||(e=o("I64"))).of_int32(n):void 0}function g(e,t,n,a){var i,l=r("isMWBumpMessage")(t==null?void 0:t.replyType)?t==null?void 0:t.replyMessageText:t==null?void 0:t.text,s=c(n,t==null||(i=t.mentionIds)==null?void 0:i.split(",").map(o("MAWJids").toUserJid)),u=a!=null?a:[];return s.length>0||u.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(e),s,d(l),u)):{replyMessageText:l,text:e}}function h(t,n){var a,i,l,s,c=_(t),d=t.type_===o("MAWMsg").unsent,m=o("MAWTimeUtils").toTimestamp(d&&(a=t.originalTs)!=null?a:t.ts);if(o("MAWMsgReply").getReplyAttachmentId(t)!=null&&o("MAWMsgReply").getReplyAttachmentPlaintextHash(t)==null){var p;o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","new_message_handler_for_reply_type_"+(e||(e=o("I64"))).to_float((p=o("MAWMsgReply").getReplyAttachmentType(t))!=null?p:(e||(e=o("I64"))).zero))}var g=o("MAWBridgeMsgUtils").convertStringToLSTransportKeyType(t.transportKey);return babelHelpers.extends({},c,{adminMsgCtaId:n==null?void 0:n.ctaId,adminMsgCtaTitle:n==null?void 0:n.title,adminMsgCtaType:n==null?void 0:n.ctaType,authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:d||!t.isAuthorMe?(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageUnsendabilityStatus").DENY_FOR_NON_SENDER):void 0,collapsibleId:t.collapsibleId!=null?(e||(e=o("I64"))).of_float(t.collapsibleId):void 0,displayedContentTypes:o("MAWMsg").getDisplayedContentTypes(t.type_,t.isForwarded,t.isExpiredXmaMsg,t.replySourceId!=null,t.unsupportedType,t.xmaMessageType),editCount:(e||(e=o("I64"))).of_int32((i=t.editCount)!=null?i:0),ephemeralDurationInSec:f(t),groupId:(l=t.groupId)!=null?l:void 0,groupIndex:t.groupIndex!=null?(e||(e=o("I64"))).of_float(t.groupIndex):void 0,groupSize:t.groupSize!=null?(e||(e=o("I64"))).of_float(t.groupSize):void 0,hotEmojiSize:o("MAWBridgeMsg").getSpecialTextSize(t),isCollapsed:(s=t.isCollapsed)!=null?s:!1,isUnsent:d,messageId:t.msgId,primarySortKey:e.of_float(t.sortOrderMs),replyAttachmentId:o("MAWMsgReply").getReplyAttachmentId(t),replyAttachmentPlaintextHash:o("MAWMsgReply").getReplyAttachmentPlaintextHash(t),replyAttachmentType:o("MAWMsgReply").getReplyAttachmentType(t),replyMediaExpirationTimestampMs:o("MAWMsgReply").getReplyMediaExpirationTimestampMs(t),replyMediaPreviewHeight:o("MAWMsgReply").getReplyMediaPreviewHeight(t),replyMediaPreviewWidth:o("MAWMsgReply").getReplyMediaPreviewWidth(t),replySnippet:o("MAWMsgReplySnippet").getReplySnippet(t),replySourceId:o("MAWMsgReply").getReplySourceId(t),replySourceTimestampMs:o("MAWMsgReply").getReplyTimestampMs(t),replySourceType:o("MAWMsgReply").getReplySourceType(t),replySourceTypeV2:o("MAWMsgReply").getReplySourceTypeV2(t),replyStatus:o("MAWMsgReplyStatus").getLSReplyMessageStatus(t),replyToUserId:o("MAWMsgReply").getReplyUserId(t),replyType:o("MAWMsgReply").getReplyType(t),sendStatus:o("MAWAckLevel").levelToMessagingSendStatus(t.ack),sendStatusV2:o("MAWAckLevel").levelToMessagingSendStatusV2(t.ack),timestampMs:m,transportKey:g,unsentTimestampMs:d?o("MAWTimeUtils").toTimestamp(t.ts):void 0})}l.getEphemeralDurationInSec=f,l.buildOptimisticMessage=g,l.buildNewAndUpdatedMessageSharedParams=h}),226);
__d("MAWMedia",["LSIntEnum","MAWDbMedia","MessagingAttachmentType"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return t===o("MAWDbMedia").MEDIA_TYPE.IMAGE?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.VIDEO?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):t===o("MAWDbMedia").MEDIA_TYPE.PTT?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):t===o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.STICKER?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):t===o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").NONE)}l.mediaTypeToMessageAttachmentType=s}),98);
__d("MAWBridgeNewMediaHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSThreadMediaGalleryGroup","MAWDbMedia","MAWMedia","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","WAMediaHdType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l,u){var c,d,m,p,_,f,g,h=n.messagesSortOrderMs?(e||(e=o("I64"))).of_float(n.messagesSortOrderMs[a]):n.sortOrderMs!=null?(e||(e=o("I64"))).of_float(n.sortOrderMs):(e||(e=o("I64"))).of_float(n.ts*1e3);return{accessibilitySummaryText:n.accessibilitySummaryText,attachmentFbid:i,attachmentIndex:(c=t==null?void 0:t.attachmentIndex)!=null?c:(e||(e=o("I64"))).zero,attachmentType:(d=t==null?void 0:t.attachmentType)!=null?d:o("MAWMedia").mediaTypeToMessageAttachmentType(n.mediaType,n.ephemeralMediaViewMode),authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:n.ephemeralMediaState!=null?(e||(e=o("I64"))).of_int32(n.ephemeralMediaState):t==null?void 0:t.ephemeralMediaState,ephemeralMediaViewMode:n.ephemeralMediaViewMode!=null?(e||(e=o("I64"))).of_int32(n.ephemeralMediaViewMode):t==null?void 0:t.ephemeralMediaViewMode,filename:(m=(p=n.filenames!=null?n.filenames[a]:null)!=null?p:n.defaultFilename)!=null?m:t==null?void 0:t.filename,filesize:n.filesize==null?t==null?void 0:t.filesize:(e||(e=o("I64"))).of_int32(n.filesize),gifPlayback:n.gifPlayback,hasMedia:n.hasMedia,hasXma:!1,isHd:((_=n.hdTypes)==null?void 0:_[a])===o("WAMediaHdType").HD_TYPE_HQ_4K,isSharable:!1,messageId:a,offlineAttachmentId:l,playableDurationMs:n.duration==null?t==null?void 0:t.playableDurationMs:(e||(e=o("I64"))).of_int32(n.duration),previewHeight:n.previewHeight==null?t==null?void 0:t.previewHeight:(e||(e=o("I64"))).of_int32(n.previewHeight),previewHeightLarge:n.previewHeightLarge==null?t==null?void 0:t.previewHeightLarge:(e||(e=o("I64"))).of_int32(n.previewHeightLarge),previewWidth:n.previewWidth==null?t==null?void 0:t.previewWidth:(e||(e=o("I64"))).of_int32(n.previewWidth),previewWidthLarge:n.previewWidthLarge==null?t==null?void 0:t.previewWidthLarge:(e||(e=o("I64"))).of_int32(n.previewWidthLarge),threadKey:u,timestampMs:h,titleText:n.accessibilitySummaryText,transportKey:(f=n.transportKey)!=null?f:"WhatsApp",waveformData:(g=n.waveformData)!=null?g:t==null?void 0:t.waveformData}}function c(e,t){var n=t.hasPreviewMedia!=null;return{id:e,mainMediaStatus:t.hasMedia?(s||(s=o("LSIntEnum"))).ofNumber(1):(s||(s=o("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:"initial_media_download",previewMediaStatus:n?t.hasPreviewMedia===!0?(s||(s=o("LSIntEnum"))).ofNumber(1):(s||(s=o("LSIntEnum"))).ofNumber(4):void 0,previewMediaStatusDetails:n?"initial_media_download":void 0}}async function d(t,n,r){var a=n.mediaId,i=n.msgIds,l=n.offlineAttachmentId,s=n.plaintextHash;await m(t,n);var c=p(a,s),d=l!=null?l:c,f=!1,g=_(n),h=null;if(h=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments_ranges_v2__generated).getKeyRange(r).filter(function(t){return(e||(e=o("I64"))).equal(t.mediaGroup,g)})),await Promise.all(i.map(async function(a){var i=t.attachments,l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(i).getKeyRange(r,a)),s=u(l,n,a,c,d,r);if(n.skipShouldUpdateHasMore!==!0&&h!=null&&(e||(e=o("I64"))).le(s.timestampMs,h.minTimestampMs)&&(f=!0),l!=null){var m;return i.upsert([l.threadKey,l.messageId,l.attachmentFbid],babelHelpers.extends({},s,{transportKey:(m=l.transportKey)!=null?m:s.transportKey}))}else return i.add(s)})),h!=null&&h.hasMoreBefore!==!0&&f){var y=babelHelpers.extends({},h,{hasMoreBefore:!0});await t.attachments_ranges_v2__generated.upsert([h.threadKey,h.mediaGroup,h.minTimestampMs],y)}}async function m(t,n){var a=n.mediaId,i=n.plaintextHash;if(i==null){r("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",a);return}var l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.client_media_status).getKeyRange(i)),u=l!=null&&!(e||(e=o("I64"))).equal(l.mainMediaStatus,(s||(s=o("LSIntEnum"))).ofNumber(4));u||await t.client_media_status.add(c(i,n))}function p(e,t){return""+(t!=null?t:e.toString())}function _(e){switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").FILES_ONLY);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS)}}function f(e,t){var n=t.threadJid;return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,n,"MAWBridgeNewMediaHandler",function(e,n){return d(e,t,n)})}l.getAttachmentFromBridgeMedia=u,l.callWithoutWaitingForAnything=d,l.getAttachmentID=p,l.call=f}),98);
__d("MAWMsgFetchLSReplyMsgAndAttachment",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWCurrentUser","MAWDbMsg","MAWMpsGating","MAWReplyBuilder","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE"||n.replyToMsgId==null)return null;var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(n.replyToMsgId));a==null&&t._META_loaded_as_quoted_msg!==!0&&r("FBLogger")("messenger_e2ee_web").mustfix("[fetchReplyLocalViaLS] Reply snippet cannot be generated as original message is not in LSDB");var i;return a!=null&&(i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(a.threadKey,a.messageId))),babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:i,replyToLSMessage:a})})}async function c(t,n){var a=o("MAWMpsGating").isMpsMessageRendering()?void 0:await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(n.threadKey,n.messageId)),i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(n.messageId));await Promise.all(i.map(function(i){var l=i.replySourceTypeV2,u=i.replyType;if(l==null||u==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error getting reply snippet without replySourceTypeV2 and/or replyType");return}var c=o("MAWDbMsg").toMsgId(n.messageId);if(c==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error extracting message id from replyToLSMessage");return}if(i.messageId===n.messageId){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Message replying to itself should not be updated");return}if(l===(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)){var d={isBumpMsg:i.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSAttachment:a,replyToLSMessage:n,replyToMsgId:c,replyType:"MESSAGE"},m=o("MAWReplyBuilder").getReplyBuilder(d.replyType),p=a!=null?{replyAttachmentId:m.buildReplyAttachmentId(d),replyAttachmentPlaintextHash:m.buildReplyAttachmentPlaintextHash(d),replyAttachmentType:m.buildReplyAttachmentType(d),replyMediaPreviewHeight:m.buildReplyMediaPreviewHeight(d),replyMediaPreviewWidth:m.buildReplyMediaPreviewWidth(d)}:{},_=babelHelpers.extends({},i,p,{replyMessageText:m.buildReplyMessageText(d),replySnippet:m.buildReplySnippet(d,(s||(s=o("I64"))).to_string(i.senderId),o("MAWCurrentUser").getID()),replySourceTimestampMs:m.buildReplyTimestampMs(d),replyStatus:m.buildReplyStatus(d),replyToUserId:m.buildReplyUserId(d)});return t.messages.put(_)}}))}l.fetchReplyLocalViaLS=u,l.updateMessagesReplyingToMsg=c}),98);
__d("MAWUpdateMsg",["MAWBridgeBuildMsg","MAWMsgFetchLSReplyMsgAndAttachment","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(t,r),i=babelHelpers.extends({},n,a);await e.messages.upsert([n.threadKey,n.timestampMs,n.messageId],i),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,i)}l.call=e}),98);
__d("MAWBridgeNewMsgHandler",["FBLogger","I64","LSIntEnum","LSMessageRenderingType","LSQuickReplyType","MAWAdminMsgCTA","MAWBridgeBuildMsg","MAWBridgeNewMediaHandler","MAWBridgeXMAUtils","MAWMpsGating","MAWMsgFetchLSReplyMsgAndAttachment","MAWThreadLoadingState","MAWUpdateMsg","MAWXMAUtils","MWPBumpEntityKey","MpsMessageToBridge","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","MsgrWebGating","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){return babelHelpers.extends({},o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(n,a),{forwardScore:(e||(e=o("I64"))).of_float(n.forwardingScore),isAdminMessage:n.isAdminMessage,isForwarded:n.isForwarded,messageRenderingType:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageRenderingType").DEFAULT),offlineThreadingId:n.externalId,quickReplyType:s.ofNumber(r("LSQuickReplyType").NONE),senderId:e.of_string(n.sender),threadKey:t,viewFlags:s.ofNumber(0)})}function c(e,t,n){var r=t.mediaId,a=t.offlineAttachmentId,i=t.plaintextHash,l=o("MAWBridgeNewMediaHandler").getAttachmentID(r,i),s=a!=null?a:l;return o("MAWBridgeNewMediaHandler").getAttachmentFromBridgeMedia(null,t,n,l,s,e)}async function d(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=u(t,n,r),i=a.messageId,l=a.timestampMs;await e.messages.upsert([t,l,i],a),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,l,i)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)})}async function m(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=u(t,n,r),i=await e.messages.add(a),l=i[0],s=i[1],c=i[2];o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,s,c)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)})}async function p(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE")return t;var r=await o("MpsOverBridge").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-first"},debug:{purpose:"reply-fetch-local"},messageId:o("MpsToBridgeMessageId").bridgeMsgIdToMps(n.replyToMsgId).messageId,threadId:o("MpsTypes").toThreadId(t.chatJid)}),a=r.value;if(a==null)return t;var i=o("MpsMessageToBridge").mpsFullMessagetoBridge(a),l=i==null?void 0:i.topLevel,s=i==null?void 0:i.supplementals;if(l!=null&&l.kind==="bridgeMsg"){var d=s==null?void 0:s.find(function(e){return e.kind==="bridgeMedia"||e.kind==="bridgeXMA"}),m=l.value.msgId,p=(function(t){if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeMedia"&&"value"in t){var r=t.value;return c(e,r,n.replyToMsgId)}if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeXMA"&&"value"in t){var a=t.value;return o("MAWBridgeXMAUtils").composeAttachmentXMA(a,e,String(a.xmaId),m,void 0,void 0,void 0,void 0,"MAWBridgeNewMsgHandler")}if(t!==void 0)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})(d);return babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:p,replyToLSMessage:u(e,l.value,void 0)})})}return t}async function _(e,t,n){var r,a;if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var i=await o("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(e,n);return i==null?n:o("MAWMpsGating").isMpsMessageRendering()&&((r=i.replyContent)==null?void 0:r.replyToLSAttachment)==null&&((a=i.replyContent)==null?void 0:a.replyToLSMessage)==null?p(t,n):i}async function f(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(t.externalId));return n!=null?Promise.resolve(n):o("MsgrWebGating").isQuotedMessagesInLsEnabled()?o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId)):Promise.resolve(null)}async function g(t,n,a){var i=await _(t,a,n);if(!o("MAWXMAUtils").isXMAStoryReply(i.xmaMessageType)){if(i.isExpiredMsg===!0){r("FBLogger")("messenger_web").mustfix("Attempted to insert an expired message");return}var l=await o("MAWAdminMsgCTA").getAdminMsgCtaStep(t,a,i);if(o("MAWMpsGating").isMpsMessageRendering())await d(t,a,i,l);else{var s,u=await f(t,i);u==null?await m(t,a,i,l):await o("MAWUpdateMsg").call(t,i,u,l),o("MAWMpsGating").isMpsMessageRendering()&&((s=i.editCount)!=null?s:0)>0&&await h(t,i)}if(i.collapsibleId!=null){var c=(e||(e=o("I64"))).of_float(i.collapsibleId),p=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("collapsibleId")).getKeyRange(c));if(p.length>1){var g=p[0],y=p[1];(e||(e=o("I64"))).gt(g.timestampMs,y.timestampMs)?await t.messages.put(babelHelpers.extends({},y,{isCollapsed:!0})):await t.messages.put(babelHelpers.extends({},g,{isCollapsed:!0}))}}}}async function h(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.messages.index("replySourceIdMessageID")).getKeyRange(t.msgId));await Promise.all(n.map(function(n){var r=babelHelpers.extends({},n,{replyMessageText:t.content});return e.messages.put(r)}))}async function y(e,t){var n=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t.chatJid);n!=null&&await g(e,t,n)}async function C(e,t){await Promise.all(t.map(function(t){return y(e,t)}))}l.callWithoutWaitingForAnything=g,l.call=y,l.bulkCall=C}),98);
__d("MWLSContactTypeExactUtils",["I64","LSContactTypeExact","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_USER))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_BUSINESS_USER))?!0:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_CREATOR_USER))}l.isIgContact=u}),98);
__d("getLSMediaContactProfilePictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.profilePictureUrlExpirationTimestampMs;if(t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)||e.profilePictureUrl===""){var n;return(n=e.profilePictureFallbackUrl)!=null?n:e.profilePictureUrl}else return e.profilePictureUrl}l.default=e}),98);
__d("getLSMediaThreadPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.threadPictureUrl,n=e.threadPictureUrlExpirationTimestampMs,r=e.threadPictureUrlFallback,a=n;return a!=null&&o("LSMediaUrlUtils").isTimestampExpired(a)?r:t}l.default=e}),98);/*FB_PKG_DELIM*/
__d("C4GFalcoLoggerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("C4GFalcoLoggerDeferred");function s(t){var n=t.action,r=t.category_id,o=t.client_extras,a=t.community_id,i=t.entry_point,l=t.event,s=t.field_value,u=t.group_id,c=t.parent_surface,d=t.source,m=t.surface,p=t.thread_id;e.onReady(function(e){return e.log(function(){return{action:n,category_id:r,client_extras:o,community_id:a,entry_point:i,event:l,field_value:s,group_id:u,parent_surface:c,source:d,surface:m,thread_id:p}})})}l.logC4GEngagementFalcoEvent=s}),98);
__d("ChatMuteStore",[],(function(t,n,r,o,a,i){"use strict";var e={EightHours:288e5,FifteenMinutes:9e5,Indefinitely:-1,OneDay:864e5,OneHour:36e5},l={Both:"bothMuteScope",Call:"callMuteScope",Message:"messageMuteScope"},s={Duration:"setMuteDuration",Scope:"setMuteScope"},u={type:l.Message},c={type:l.Call},d={type:l.Both},m={duration:e.FifteenMinutes,scope:u};function p(e,t){return t.type===s.Scope?{duration:e.duration,scope:t.scope}:{duration:t.duration,scope:e.scope}}i.ChatMuteOptions=e,i.ChatMuteScopeTypes=l,i.SetMuteActionTypes=s,i.message=u,i.call=c,i.both=d,i.initialState=m,i.reducer=p}),66);
__d("GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9637409876354840"}),null);
__d("GroupsCometCMDisabledChatDialogQuery$Parameters",["GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometCMDisabledChatDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometCMDisabledChatDialog.entrypoint",["GroupsCometCMDisabledChatDialogQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("GroupsCometCMDisabledChatDialogQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("GroupsCometCMDisabledChatDialog.react").__setRef("GroupsCometCMDisabledChatDialog.entrypoint")};l.default=e}),98);
__d("GroupsCometJoinChatDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9560132654105701"}),null);
__d("GroupsCometJoinChatDialogQuery$Parameters",["GroupsCometJoinChatDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometJoinChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometJoinChatDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometJoinChatDialog.entrypoint",["GroupsCometJoinChatDialogQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.groupID,n=t.threadID;return{queries:{myQueryReference:{parameters:r("GroupsCometJoinChatDialogQuery$Parameters"),variables:{groupID:e,threadID:n}}}}},root:r("JSResourceForInteraction")("GroupsCometJoinChatDialog.react").__setRef("GroupsCometJoinChatDialog.entrypoint")};l.default=e}),98);
__d("LSClearTables",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(e){return t.forEach(t.db.table(67).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(66).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(65).fetch(),function(e){return e.delete()})},function(n){return e[0]===void 0||e[0]===!0?t.forEach(t.db.table(69).fetch(),function(e){return e.delete()}):t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSSearchClearTablesStoredProcedure",e.__tables__=["search_queries","server_search_sections","server_search_results","message_search_results"],a.exports=e}),null);
__d("LSClearTablesStoredProcedure",["LSClearTables","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSClearTables"),a.clearMessageResults);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSForceImmediateSync",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({minTimeToSyncTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceImmediateSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSForceImmediateSyncStoredProcedure",["LSForceImmediateSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSForceImmediateSync"),a.dbType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticFetchPendingGroupInvite",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("link_hash",e[0]),r[0].set("image_width",e[1]),r[0].set("image_height",e[2]),r[0].set("has_vanity_name",!1),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"fetch_pending_group_invite",t.i64.cast([0,434]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(n){return t.db.table(235).put({linkHash:e[0],threadTitle:"",lastThreadActivityMs:t.i64.cast([0,0]),groupImageUrl:"",groupImageUrlFallback:"",groupImageUrlExpirationTimestampMs:t.i64.cast([0,0]),joinExplainerText:"",numberOfMembers:t.i64.cast([0,0]),isInApprovalQueue:!1,isSubscribed:!1,canJoin:!1,fbGroupDescription:"",communityImageUrl:"",communityImageUrlFallback:"",communityImageUrlExpirationTimestampMs:t.i64.cast([0,0]),linkJoinType:t.i64.cast([0,1]),fbGroupVisibility:t.i64.cast([0,1]),communityId:t.i64.cast([0,0])})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticFetchPendingGroupInviteStoredProcedure",e.__tables__=["group_invitations_pending"],a.exports=e}),null);
__d("LSOptimisticFetchPendingGroupInviteStoredProcedure",["LSOptimisticFetchPendingGroupInvite","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticFetchPendingGroupInvite"),a.linkHash,a.imageWidth,a.imageHeight);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticMarkThreadReadV2StoredProcedure",["LSOptimisticMarkThreadReadV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticMarkThreadReadV2"),a.threadKey,a.readWatermarkTimestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSReadReceiptSettingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,DISABLED:1,ENABLED:2});i.default=e}),66);
__d("useMAWUnrecoverableDbError",["MAWUnrecoverableDbErrors","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("MAWUnrecoverableDbErrors").getError(),e[0]=t):t=e[0];var n=c(t),r=n[0],a=n[1],i,l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var e=function(t){a(t)},t=o("MAWUnrecoverableDbErrors").subscribe(e);return function(){t()}},l=[],e[1]=i,e[2]=l):(i=e[1],l=e[2]),u(i,l),r}l.default=d}),98);
__d("useWAExceededStorageQuota",["MAWUnrecoverableDbErrors","WAExceededStorageQuota","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("WAExceededStorageQuota").getExceededStorageQuota(),e[0]=t):t=e[0];var n=d(t),r=n[0],a=n[1],i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var e=function(t){a(t)},t=o("WAExceededStorageQuota").subscribe(e);return function(){t()}},l=[],e[1]=i,e[2]=l):(i=e[1],l=e[2]),u(i,l);var s,c;return e[3]!==r?(c=r?new(o("MAWUnrecoverableDbErrors")).WAExceededStorageQuotaError:null,e[3]=r,e[4]=c):c=e[4],s=c,s}l.default=m}),98);
__d("MAWUnrecoverableErrorBoundary.react",["react","react-compiler-runtime","useMAWUnrecoverableDbError","useWAExceededStorageQuota"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=e.fallback,i=r("useMAWUnrecoverableDbError")(),l=r("useWAExceededStorageQuota")(),s=i!=null?i:l;if(s!=null&&a!=null){var u;return t[0]!==s||t[1]!==a?(u=a(s),t[0]=s,t[1]=a,t[2]=u):u=t[2],u}else return n}l.default=u}),98);
__d("MWAddOnCircleContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},disabled:{backgroundColor:"x1281ex9",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(9),n=e.ariaHidden,r=e.children,a=e.disabled,i=e.size,l=n===void 0?!1:n,c=a===void 0?!1:a,d=c&&u.disabled,m;t[0]!==i?(m=[{height:i,width:i}],t[0]=i,t[1]=m):m=t[1];var p;t[2]!==d||t[3]!==m?(p=[u.container,d,m],t[2]=d,t[3]=m,t[4]=p):p=t[4];var _;return t[5]!==l||t[6]!==r||t[7]!==p?(_=s.jsx(o("react-strict-dom").html.div,{"aria-hidden":l,style:p,children:r}),t[5]=l,t[6]=r,t[7]=p,t[8]=_):_=t[8],_}l.default=c}),98);
__d("MWCMGetValidId",["FBLogger","I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return t===void 0&&(t=!1),u(e,t)!=null}function u(t,n){if(n===void 0&&(n=!1),t==null){n&&r("FBLogger")("cc_web").warn("FB Group ID is not defined");return}if((e||(e=o("I64"))).le(t,(e||(e=o("I64"))).zero)){n&&r("FBLogger")("cc_web").warn("FB Group ID is invalid: %s",(e||(e=o("I64"))).to_string(t));return}return t}l.MWCMHasValidFbGroupId=s,l.MWCMGetValidFbGroupIdOrUndefined=u}),98);
__d("getLSMediaCommunityFolderPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=e.pictureUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.pictureUrlFallback:e.pictureUrl}}l.default=e}),98);
__d("MWCMThreadPictureCustomThreadCommunity.react",["BaseView.react","CometHeroHoldTrigger.react","FDSProfilePhoto_EXPERIMENTAL.react","MWXGlimmer.react","getLSMediaCommunityFolderPictureUrl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={base:{height:"x1auzw0x",position:"x10l6tqk",width:"xqu606t",$$css:!0},circle:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},community:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x13vifvy",$$css:!0},glimmer:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",height:"x5yr21d",width:"xh8yej3",$$css:!0},rounded:{borderStartStartRadius:"x1fuqvrd",borderStartEndRadius:"xmvrd30",borderEndEndRadius:"xt2fmn5",borderEndStartRadius:"xkn4fgx",$$css:!0},thread:{backgroundColor:"x1jx94hy",borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",bottom:"x1ey2m1c",boxSizing:"x1afcbsf",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"x1kgmq87",marginInlineEnd:"x11lt19s",marginBottom:"xmgb6t1",marginInlineStart:"xe9ewy2",zIndex:"x1vjfegm",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(14),n=e.community,a=e.photoSize,i=e.threadPictureUrl,l;t[0]!==n?(l=r("getLSMediaCommunityFolderPictureUrl")(n),t[0]=n,t[1]=l):l=t[1];var c=l,d;t[2]!==a?(d={height:a,width:a},t[2]=a,t[3]=d):d=t[3];var m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=[u.base,u.community],t[4]=m):m=t[4];var p;t[5]!==c?(p=s.jsx(r("BaseView.react"),{xstyle:m,children:c==null?s.jsxs(s.Fragment,{children:[s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[u.glimmer,u.rounded]}),s.jsx(r("CometHeroHoldTrigger.react"),{description:"MWCMThreadPictureCustomThreadCommunity",hold:!0})]}):s.jsx(r("FDSProfilePhoto_EXPERIMENTAL.react"),{shape:"rounded",size:"fill",source:c})}),t[5]=c,t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=[u.base,u.thread,u.circle],t[7]=_):_=t[7];var f;t[8]!==i?(f=s.jsx(r("BaseView.react"),{xstyle:_,children:s.jsx(r("FDSProfilePhoto_EXPERIMENTAL.react"),{shape:"circle",size:"fill",source:i})}),t[8]=i,t[9]=f):f=t[9];var g;return t[10]!==d||t[11]!==p||t[12]!==f?(g=s.jsxs(r("BaseView.react"),{role:"img",style:d,children:[p,f]}),t[10]=d,t[11]=p,t[12]=f,t[13]=g):g=t[13],g}l.default=c}),98);
__d("MWCreatorMessagingUtils",["I64","LSIntEnum","LSThreadBitOffset","MWLSThread","MessagingFolderTag","MessagingThreadSubtype"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){if(t.metadata==null||t.threadSubtype==null)return!1;var n=JSON.parse(t.metadata),a=n.thread_initiator_id;return a!=null&&t.threadSubtype!=null&&(e||(e=o("I64"))).equal(t.threadSubtype,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingThreadSubtype").PAGE_TO_USER))&&(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_string(a),t.threadKey)}function c(t){return t.threadSubtype!=null&&(e||(e=o("I64"))).equal(t.threadSubtype,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingThreadSubtype").PAGE_TO_USER))&&o("LSThreadBitOffset").has(21,t)}function d(e){return e.folderName===r("MessagingFolderTag").INBOX?"inbox":e.folderName===r("MessagingFolderTag").PENDING?"message_requests_ymk":e.folderName===r("MessagingFolderTag").SPAM?"message_requests_spam":"unknown"}function m(e){var t=o("MWLSThread").useThread(e,p);return t!=null?t:!1}function p(e){return c(e)}var _=function(t){return(s||(s=o("LSIntEnum"))).equal(t.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_PAGE)||(s||(s=o("LSIntEnum"))).equal(t.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_USER)};l.isAPPlusInitiatedThread=u,l.isAPPlusMessageRequest=c,l.fetchQPLEntrypoint=d,l.useIsAPPlusMessageRequestFromThreadKey=m,l.isPageToAnyThread=_}),98);
__d("MWEBMobileOnboardingEligibility",["CometErrorBoundary.react","CometPlaceholder.react","gkx","lazyLoadComponent","react","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=e.children,n=e.fallback,o=r("useWAInfraDeviceList")(),a;a=o.some(d)&&r("gkx")("5255");var i=a;return i?t:n}function d(e){return e.isCurrentDevice&&e.creationTime!=null&&e.creationTime.getTime()>Date.now()-6048e5}function m(e){var t=r("lazyLoadComponent")(e);return function(e){var n=e.fallback,o=e.props;return s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return n},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{fallback:n,children:s.jsx(t,babelHelpers.extends({},o))})})})}}l.requireMobileOnboardingIfEligible=m}),98);
__d("MWEBWebOnboardingPostDecisionDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBWebOnboardingPostDecisionDialog.react").__setRef("MWEBWebOnboardingPostDecisionDialog.entrypoint")};l.default=e}),98);
__d("MWEBWebOnboardingUpsellUtils",["$InternalEnum","WebDriverConfig","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({QP:"qp",PERSISTENT_BANNER:"persistent_banner",DISMISSED:"dismissed"}),s=r("WebDriverConfig").isJestE2ETestRun&&!r("gkx")("24058");l.UpsellState=e,l.IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS=s}),98);
__d("MWEncryptedBackupsDetermineInitialEBState",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23914");function s(t){var n=t.clientStateData,r=t.hasArmadilloError,o=t.xfb_backup;return!e||r?0:o==null?2:n.length>0?3:4}l.determineInitialEBState=s}),98);
__d("MWFDSArrowRight.svg.react",["cr:21541"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21541")}),98);
__d("MWFDSBellCross.svg.react",["cr:21563"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21563")}),98);
__d("MWFDSCautionTriangle.svg.react",["cr:21594"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21594")}),98);
__d("MWFDSGroup.svg.react",["cr:21677"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21677")}),98);
__d("MWFDSPushpin.svg.react",["cr:21750"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21750")}),98);
__d("MWFacepile.react",["CometHeroHoldTrigger.react","FDSFacepilePhoto.react","MWXGlimmer.react","UNTRANSLATED_STRING_FIXME","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime","translatedServerString","useMWFacepileGetContactsToShow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(21),n=e.actualBadge,a=e.ariaHidden,i=e.label,l=e.onlyAuthoratitiveContacts,c=e.photoSize,d=e.threadKey,m=e.threadType,p=e.withAltText,_=c===void 0?32:c,f=p===void 0?!0:p,g=r("useMWFacepileGetContactsToShow")(d,m,l);if(g.length!==0){var h;t[0]!==i||t[1]!==f?(h=f===!0&&i!=null?r("UNTRANSLATED_STRING_FIXME")(i):void 0,t[0]=i,t[1]=f,t[2]=h):h=t[2];var y;if(t[3]!==g||t[4]!==f){var C;t[6]!==f?(C=function(t){return{alt:f?r("translatedServerString")(t.name):void 0,disabled:!1,source:r("getLSMediaContactProfilePictureUrl")(t)}},t[6]=f,t[7]=C):C=t[7],y=g.map(C),t[3]=g,t[4]=f,t[5]=y}else y=t[5];var b;return t[8]!==n||t[9]!==a||t[10]!==g.length||t[11]!==_||t[12]!==h||t[13]!==y?(b=s.jsx(r("FDSFacepilePhoto.react"),{ariaHidden:a,badge:n,label:h,size:_,sources:y,totalItems:g.length}),t[8]=n,t[9]=a,t[10]=g.length,t[11]=_,t[12]=h,t[13]=y,t[14]=b):b=t[14],b}var v;t[15]!==_?(v={height:_,width:_},t[15]=_,t[16]=v):v=t[16];var S,R;t[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.glimmer}),R=s.jsx(r("CometHeroHoldTrigger.react"),{description:"MWFacepile photo",hold:!0}),t[17]=S,t[18]=R):(S=t[17],R=t[18]);var L;return t[19]!==v?(L=s.jsxs("div",{style:v,children:[S,R]}),t[19]=v,t[20]=L):L=t[20],L}l.default=c}),98);
__d("MWGAMEThreadTakedownDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9985766314800064"}),null);
__d("MWGAMEThreadTakedownDialogQuery$Parameters",["MWGAMEThreadTakedownDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWGAMEThreadTakedownDialogQuery_facebookRelayOperation"),metadata:{},name:"MWGAMEThreadTakedownDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWGAMEThreadTakedownDialog.entrypoint",["JSResourceForInteraction","MWGAMEThreadTakedownDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("MWGAMEThreadTakedownDialogQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("MWGAMEThreadTakedownDialog.react").__setRef("MWGAMEThreadTakedownDialog.entrypoint")};l.default=e}),98);
__d("MWInboxFocusTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({THREAD_VIEW_AND_OR_COMPOSER:0,THREAD_LIST:1,YOU_MAY_KNOW:2}),l=e;i.default=l}),66);
__d("MWLSDatabaseLazySync",["I64","Int64Hooks","LSFactory","LSForceImmediateSyncStoredProcedure","LSSyncGroupsUtils","Promise","ReQL","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.runInTransaction(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.sync_groups).getKeyRange(t)).then(function(a){return a!=null&&(u||(u=o("I64"))).equal(a.minTimeToSyncTimestampMs,o("LSSyncGroupsUtils").neverSyncTimestamp)?r("LSForceImmediateSyncStoredProcedure")(r("LSFactory")(e),{dbType:t}):(s||(s=n("Promise"))).resolve()})},"readwrite",void 0,void 0,i.id+":28")}function d(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){return c(a,t)},l=[t,a],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),o("Int64Hooks").useCallbackInt64(i,l)}l.sync=c,l.useSync=d}),98);
__d("MWReQLCMThreadPictureCustomThreadCommunity.react",["MWCMThreadPictureCustomThreadCommunity.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(14),a=t.photoSize,l=t.thread,s=t.threadPictureUrl,c=(e||(e=r("useReStore")))(),d;n[0]!==c.tables.community_folders||n[1]!==l.parentThreadKey?(d=function(){return o("ReQL").fromTableAscending(c.tables.community_folders).getKeyRange(l.parentThreadKey)},n[0]=c.tables.community_folders,n[1]=l.parentThreadKey,n[2]=d):d=n[2];var m;n[3]!==c||n[4]!==l.parentThreadKey?(m=[c,l.parentThreadKey],n[3]=c,n[4]=l.parentThreadKey,n[5]=m):m=n[5];var p=o("ReQLSuspense").useFirst(d,m,i.id+":25"),_=p==null?void 0:p.pictureUrl,f=p==null?void 0:p.pictureUrlExpirationTimestampMs,g=p==null?void 0:p.pictureUrlFallback,h;n[6]!==_||n[7]!==f||n[8]!==g?(h={pictureUrl:_,pictureUrlExpirationTimestampMs:f,pictureUrlFallback:g},n[6]=_,n[7]=f,n[8]=g,n[9]=h):h=n[9];var y;return n[10]!==a||n[11]!==h||n[12]!==s?(y=u.jsx(r("MWCMThreadPictureCustomThreadCommunity.react"),{community:h,photoSize:a,threadPictureUrl:s}),n[10]=a,n[11]=h,n[12]=s,n[13]=y):y=n[13],y}l.default=c}),98);
__d("MWReQLFacepile.react",["MWFacepile.react","MWFacepileBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(15),n=e.ariaHidden,a=e.badge,i=e.badgeSize,l=e.borderThemeColor,u=e.label,c=e.onlyAuthoratitiveContacts,d=e.photoSize,m=e.showBadge,p=e.thread,_=e.withAltText,f=c===void 0?!1:c,g=d===void 0?32:d,h=m===void 0?!0:m,y=_===void 0?!0:_,C;t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==h||t[4]!==p.threadKey?(C=h?a!=null?a:s.jsx(r("MWFacepileBadge.react"),{borderThemeColor:l,size:i,threadKey:p.threadKey}):null,t[0]=a,t[1]=i,t[2]=l,t[3]=h,t[4]=p.threadKey,t[5]=C):C=t[5];var b=C,v;return t[6]!==b||t[7]!==n||t[8]!==u||t[9]!==f||t[10]!==g||t[11]!==p.threadKey||t[12]!==p.threadType||t[13]!==y?(v=s.jsx(r("MWFacepile.react"),{actualBadge:b,ariaHidden:n,label:u,onlyAuthoratitiveContacts:f,photoSize:g,threadKey:p.threadKey,threadType:p.threadType,withAltText:y}),t[6]=b,t[7]=n,t[8]=u,t[9]=f,t[10]=g,t[11]=p.threadKey,t[12]=p.threadType,t[13]=y,t[14]=v):v=t[14],v}l.default=u}),98);
__d("MWThreadIsMuted_DEPRECATED",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e<=-1?!0:e>Date.now()}i.getThreadIsMuted=e}),66);
__d("MWThreadPictureCustomThread.react",["FDSFacepilePhoto.react","MWFacepileBadge.react","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react","react-compiler-runtime","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(40),a=t.badge,l=t.badgeSize,s=t.borderThemeColor,c=t.photoSize,d=t.shape,m=t.showBadge,p=t.thread,_=t.threadPictureUrl,f=t.withAltText,g=(e||(e=r("useReStore")))(),h=o("MWPActor.react").useActor(),y;n[0]!==g.tables.contacts||n[1]!==g.tables.participants||n[2]!==p.threadKey?(y=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(g.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(p.threadKey),o("ReQL").fromTableAscending(g.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(o("MWPGetThreadTitle").amountToFetchForTitle)},n[0]=g.tables.contacts,n[1]=g.tables.participants,n[2]=p.threadKey,n[3]=y):y=n[3];var C;n[4]!==g||n[5]!==p.threadKey?(C=[g,p.threadKey],n[4]=g,n[5]=p.threadKey,n[6]=C):C=n[6];var b=o("ReQLSuspense").useArray(y,C,i.id+":39"),v,S,R,L,E,k;if(n[7]!==h||n[8]!==a||n[9]!==l||n[10]!==s||n[11]!==b||n[12]!==c||n[13]!==d||n[14]!==m||n[15]!==p.threadKey||n[16]!==p.threadType||n[17]!==f){var I=o("MWPGetThreadTitle").computeThreadTitle(void 0,p.threadType,b.slice(0,o("MWPGetThreadTitle").amountToFetchForTitle),h),T;n[24]!==a||n[25]!==l||n[26]!==s||n[27]!==m||n[28]!==p.threadKey?(T=m===!0?a!=null?a:u.jsx(r("MWFacepileBadge.react"),{borderThemeColor:s,size:l,threadKey:p.threadKey}):null,n[24]=a,n[25]=l,n[26]=s,n[27]=m,n[28]=p.threadKey,n[29]=T):T=n[29];var D=T;v=r("FDSFacepilePhoto.react"),R=D,L=f===!0&&I!=null?r("translatedServerString")(I):void 0,E=d,k=c,S=f===!0&&I!=null?r("translatedServerString")(I):void 0,n[7]=h,n[8]=a,n[9]=l,n[10]=s,n[11]=b,n[12]=c,n[13]=d,n[14]=m,n[15]=p.threadKey,n[16]=p.threadType,n[17]=f,n[18]=v,n[19]=S,n[20]=R,n[21]=L,n[22]=E,n[23]=k}else v=n[18],S=n[19],R=n[20],L=n[21],E=n[22],k=n[23];var x;n[30]!==S||n[31]!==_?(x=[{alt:S,disabled:!1,source:_}],n[30]=S,n[31]=_,n[32]=x):x=n[32];var $;return n[33]!==v||n[34]!==R||n[35]!==L||n[36]!==E||n[37]!==k||n[38]!==x?($=u.jsx(v,{badge:R,label:L,shape:E,size:k,sources:x,totalItems:1}),n[33]=v,n[34]=R,n[35]=L,n[36]=E,n[37]=k,n[38]=x,n[39]=$):$=n[39],$}l.default=c}),98);
__d("MWThreadPicture.react",["MWReQLCMThreadPictureCustomThreadCommunity.react","MWReQLFacepile.react","MWThreadPictureCustomThread.react","ReQL","ReQLSuspense","getLSMediaThreadPictureUrl","mwCMIsAnyCMThread","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={borderThemeColor:{borderTopColor:"xwi95zy",borderInlineEndColor:"x1mlikqm",borderBottomColor:"xt1txi7",borderInlineStartColor:"x1uir17b",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(4),n=e.withCommunityPicture;if(n===!0){var a;return t[0]!==e?(a=u.jsx(r("MWReQLCMThreadPictureCustomThreadCommunity.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=a):a=t[1],a}var i;return t[2]!==e?(i=u.jsx(r("MWThreadPictureCustomThread.react"),babelHelpers.extends({},e)),t[2]=e,t[3]=i):i=t[3],i}function m(t){var n=o("react-compiler-runtime").c(27),a=t.ariaHidden,l=t.badge,s=t.badgeSize,m=t.onlyAuthoratitiveContacts,p=t.photoSize,_=t.showBadge,f=t.showFacepiles,g=t.threadKey,h=t.threadTitle,y=t.withAltText,C=t.withCommunityPicture,b=m===void 0?!1:m,v=_===void 0?!0:_,S=f===void 0?!1:f,R=y===void 0?!0:y,L=C===void 0?!1:C,E=(e||(e=r("useReStore")))(),k;n[0]!==E.tables.threads||n[1]!==g?(k=function(){return o("ReQL").fromTableAscending(E.tables.threads,["parentThreadKey","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadKey","threadName","threadType"]).getKeyRange(g)},n[0]=E.tables.threads,n[1]=g,n[2]=k):k=n[2];var I;n[3]!==E||n[4]!==g?(I=[E,g],n[3]=E,n[4]=g,n[5]=I):I=n[5];var T=o("ReQLSuspense").useFirst(k,I,i.id+":62");if(T==null)return null;var D=r("mwCMIsAnyCMThread")(T.threadType),x=v&&!D,$;n[6]!==T?($=r("getLSMediaThreadPictureUrl")(T),n[6]=T,n[7]=$):$=n[7];var P=$;if(P!=null&&S!==!0){var N;return n[8]!==l||n[9]!==s||n[10]!==p||n[11]!==x||n[12]!==T||n[13]!==P||n[14]!==R||n[15]!==L?(N=u.jsx(d,{badge:l,badgeSize:s,borderThemeColor:c.borderThemeColor,photoSize:p,showBadge:x,thread:T,threadPictureUrl:P,withAltText:R,withCommunityPicture:L}),n[8]=l,n[9]=s,n[10]=p,n[11]=x,n[12]=T,n[13]=P,n[14]=R,n[15]=L,n[16]=N):N=n[16],N}var M=h!=null?h:T.threadName,w;return n[17]!==a||n[18]!==l||n[19]!==s||n[20]!==b||n[21]!==p||n[22]!==x||n[23]!==M||n[24]!==T||n[25]!==R?(w=u.jsx(r("MWReQLFacepile.react"),{ariaHidden:a,badge:l,badgeSize:s,borderThemeColor:c.borderThemeColor,label:M,onlyAuthoratitiveContacts:b,photoSize:p,showBadge:x,thread:T,withAltText:R}),n[17]=a,n[18]=l,n[19]=s,n[20]=b,n[21]=p,n[22]=x,n[23]=M,n[24]=T,n[25]=R,n[26]=w):w=n[26],w}l.default=m}),98);
__d("MWVerticalRhythm",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.height,r=n,a=String(r)+"px",i;return t[0]!==a?(i=s.jsx("div",{style:{height:a}}),t[0]=a,t[1]=i):i=t[1],i}l.default=u}),98);
__d("MWXCardedDialogLoadingState.react",["cr:9908","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));l.default=n("cr:9908")}),98);
__d("MWXIconArrowRight",["MWXSvgIcon","SVGIcon","cr:22197","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22197")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconBellCross",["MWXSvgIcon","SVGIcon","cr:22224","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22224")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconGroup",["MWXSvgIcon","SVGIcon","cr:22360","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22360")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPushpin",["MWXSvgIcon","SVGIcon","cr:22450","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22450")),r("gkx")("23219"));l.default=e}),98);
__d("MWXScrollableAreaStyles",["MDSScrollableAreaStyles"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MDSScrollableAreaStyles")}),98);
__d("MWXTextPairing.react",["FDSTextWebUtils","cr:4853","cr:6725","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["bodyColor","bodyRef","headlineColor","headlineRef","metaColor","metaRef"],s,u=s||(s=o("react")),c={tetraTextWrapper:{boxSizing:"x9f619",minHeight:"x2lwn1j",minWidth:"xeuugli",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function d(e){return function(t){e!=null&&(typeof e=="function"?e(t):e.current=t)}}function m(t){var r=o("react-compiler-runtime").c(31);if(n("cr:6725")!=null){var a,i,l,s,m,p,_;r[0]!==t?(i=t.bodyColor,l=t.bodyRef,s=t.headlineColor,m=t.headlineRef,p=t.metaColor,_=t.metaRef,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=m,r[6]=p,r[7]=_):(a=r[1],i=r[2],l=r[3],s=r[4],m=r[5],p=r[6],_=r[7]);var f;r[8]===Symbol.for("react.memo_cache_sentinel")?(f=[c.tetraTextWrapper],r[8]=f):f=r[8];var g;r[9]!==i?(g=o("FDSTextWebUtils").getFDSBodyColor(i),r[9]=i,r[10]=g):g=r[10];var h;r[11]!==l?(h=d(l),r[11]=l,r[12]=h):h=r[12];var y;r[13]!==s?(y=o("FDSTextWebUtils").getFDSHeadlineColor(s),r[13]=s,r[14]=y):y=r[14];var C;r[15]!==m?(C=d(m),r[15]=m,r[16]=C):C=r[16];var b;r[17]!==p?(b=o("FDSTextWebUtils").getFDSMetaColor(p),r[17]=p,r[18]=b):b=r[18];var v;r[19]!==_?(v=d(_),r[19]=_,r[20]=v):v=r[20];var S;return r[21]!==a||r[22]!==g||r[23]!==h||r[24]!==y||r[25]!==C||r[26]!==b||r[27]!==v?(S=u.jsx(o("react-strict-dom").html.div,{style:f,children:u.jsx(n("cr:6725"),babelHelpers.extends({bodyColor:g,bodyRef:h,headlineColor:y,headlineRef:C,metaColor:b,metaRef:v},a))}),r[21]=a,r[22]=g,r[23]=h,r[24]=y,r[25]=C,r[26]=b,r[27]=v,r[28]=S):S=r[28],S}if(n("cr:4853")!=null){var R;return r[29]!==t?(R=u.jsx(n("cr:4853"),babelHelpers.extends({},t)),r[29]=t,r[30]=R):R=r[30],R}return null}l.default=m}),98);
__d("MessagingCommunityChatsPauseStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACTIVE:1,PAUSED_BY_SOFT_ACTION:2,PAUSED_BY_ADMINLESS_STANDALONE_COMMUNITY:3,DEPRECATED:4});i.default=e}),66);
__d("MessengerMuteUtils",["fbt","ChatMuteStore","DateStrings","I64","formatDate"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){if(e<=0)return e===o("ChatMuteStore").ChatMuteOptions.Indefinitely?s._(/*BTDS*/"Off indefinitely"):void 0;if(!(e<86401)){var t=new Date(e*1e3).getDay(),n=t===new Date().getDay(),a=t===new Date().getDay()+1;return a?s._(/*BTDS*/"Off until {time} tomorrow",[s._param("time",r("formatDate")(e,"g:ia"))]):n?s._(/*BTDS*/"Off until {time}",[s._param("time",r("formatDate")(e,"g:ia"))]):s._(/*BTDS*/"Off until {time} {weekday name}",[s._param("time",r("formatDate")(e,"g:ia")),s._param("weekday name",o("DateStrings").getWeekdayName(t))])}}var c=s._(/*BTDS*/"Chat notifications");function d(e,t){if(e==null)return t===!0?s._(/*BTDS*/"Mute this sidechat?"):s._(/*BTDS*/"Mute conversation");switch(e.type){case"messageMuteScope":return s._(/*BTDS*/"Mute message notifications");case"callMuteScope":return s._(/*BTDS*/"Mute call notifications");case"bothMuteScope":return s._(/*BTDS*/"Mute message and call notifications")}}function m(t){var n=t.muteCallsExpireTimeMs,r=t.muteExpireTimeMs,a=Math.min((e||(e=o("I64"))).to_float(r),e.to_float(n)),i=Math.max(e.to_float(r),e.to_float(n));return a===-1?-1:i}l.mutedUntilLabel=u,l.chatNotificationActionLabel=c,l.muteDialogTitle=d,l.calcMuteUntilMs=m}),226);
__d("isFacebookMessengerInboxURI",["isFacebookURI"],(function(t,n,r,o,a,i,l){function e(e){return r("isFacebookURI")(e)&&e.getPath().startsWith("/messages")}l.default=e}),98);
__d("useEncryptedBackupsProcessStatePreLoaded_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useEncryptedBackupsProcessStatePreLoaded_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useEncryptedBackupsProcessStatePreLoaded",["CometRelay","I64","LSAuthorityLevel","LSIntEnum","MWEncryptedBackupsDetermineInitialEBState","ReQL","ReQLSuspense","isMWEBEntrypointEnabled","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded_query.graphql","useMAWHasUserVisibleErrors","useMAWUnsupportedBrowserNUX","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(t){var a=o("react-compiler-runtime").c(10),l=t.entrypoint,s=t.query,u=o("CometRelay").useFragment(e!==void 0?e:e=n("useEncryptedBackupsProcessStatePreLoaded_query.graphql"),s),d=(c||(c=r("useReStore")))(),p;a[0]!==d||a[1]!==(u==null?void 0:u.viewer.backup_state)?(p=function(){return(u==null?void 0:u.viewer.backup_state)==null?o("ReQL").fromTableAscending(d.tables.secure_encrypted_backups_client_state).filter(m):o("ReQL").empty()},a[0]=d,a[1]=u==null?void 0:u.viewer.backup_state,a[2]=p):p=a[2];var _=u==null?void 0:u.viewer.backup_state,f;a[3]!==d||a[4]!==_?(f=[d,_],a[3]=d,a[4]=_,a[5]=f):f=a[5];var g=o("ReQLSuspense").useArray(p,f,i.id+":57"),h=o("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX(),y=h.shouldHideEBFlow,C=r("useMAWHasUserVisibleErrors")(),b=y||C;if(!r("isMWEBEntrypointEnabled")(l))return 0;var v;return a[6]!==g||a[7]!==b||a[8]!==u?(v=(u==null?void 0:u.viewer.backup_state)!=null?u.viewer.backup_state:o("MWEncryptedBackupsDetermineInitialEBState").determineInitialEBState({clientStateData:g,hasArmadilloError:b,xfb_backup:u==null?void 0:u.xfb_backup}),a[6]=g,a[7]=b,a[8]=u,a[9]=v):v=a[9],v}function m(e){var t=e.authorityLevel;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.default=d}),98);
__d("useGroupsCometCMDisabledChatEntryPointDialog",["GroupsCometCMDisabledChatDialog.entrypoint","MWGAMEThreadTakedownDialog.entrypoint","MetaConfig","gkx","logVultureJSDeadEntrypoint","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(4),n=e.isGeoBlocked,a=e.threadID,i;t[0]!==a?(i={threadID:a},t[0]=a,t[1]=i):i=t[1];var l=r("useMWXEntryPointDialog")(r("GroupsCometCMDisabledChatDialog.entrypoint"),i),s;t[2]!==a?(s={threadID:a},t[2]=a,t[3]=s):s=t[3];var u=r("useMWXEntryPointDialog")(r("MWGAMEThreadTakedownDialog.entrypoint"),s);return n&&r("gkx")("5194")?(r("logVultureJSDeadEntrypoint")("MWGeoblockThreadDialog.entrypoint"),l):n&&r("MetaConfig")._("25")?(r("logVultureJSDeadEntrypoint")("GroupsCometCMGeoBlockedChatDialog.entrypoint"),l):r("gkx")("23433")?u:l}l.default=e}),98);
__d("useGroupsCometChatsEngagementImpressionLogger",["GroupsCometChatsEngagementLogger","react","react-compiler-runtime","usePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(12),n=e.category_id,a=e.client_extras,i=e.community_id,l=e.event,s=e.group_id,u=e.parent_surface,c=e.source,d=e.surface,m=e.thread_id,p;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==s||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==m?(p=function(){o("GroupsCometChatsEngagementLogger").log({action:"impression",category_id:n,client_extras:a,community_id:i,event:l,group_id:s,parent_surface:u,source:c,surface:d,thread_id:m})},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=s,t[5]=u,t[6]=c,t[7]=d,t[8]=m,t[9]=p):p=t[9];var _=p,f;return t[10]!==_?(f={onImpressionStart:_},t[10]=_,t[11]=f):f=t[11],r("usePartialViewImpression")(f)}l.default=u}),98);
__d("useMWAriaLabelForThread",["fbt","Int64Hooks","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t){var n=o("react-compiler-runtime").c(13),a=t.threadKey,l=t.threadName,u=t.threadType,c=o("MWPActor.react").useActor(),d=(e||(e=r("useReStore")))(),m;n[0]!==d.tables.contacts||n[1]!==d.tables.participants||n[2]!==a?(m=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(d.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(a),o("ReQL").fromTableAscending(d.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(8)},n[0]=d.tables.contacts,n[1]=d.tables.participants,n[2]=a,n[3]=m):m=n[3];var p;n[4]!==d||n[5]!==a?(p=[d,a],n[4]=d,n[5]=a,n[6]=p):p=n[6];var _=o("ReQLSuspense").useArray(m,p,i.id+":37"),f,g;return n[7]!==c||n[8]!==_||n[9]!==l||n[10]!==u?(f=function(){var e,t=l;if(t!=null)return s._(/*BTDS*/"Conversation titled {name of conversation}",[s._param("name of conversation",t)]);var n=(e=o("MWPGetThreadTitle").computeThreadTitle(void 0,u,_,c))!=null?e:"";return s._(/*BTDS*/"Conversation with {participant list}",[s._param("participant list",n)])},g=[l,u,_,c],n[7]=c,n[8]=_,n[9]=l,n[10]=u,n[11]=f,n[12]=g):(f=n[11],g=n[12]),o("Int64Hooks").useMemoInt64(f,g)}l.default=u}),226);
__d("useMWCMShouldGoToFullScreenChatHook",["getRequestConstUri","isFacebookMessengerInboxURI","isMessengerDotComURI","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(1),t;if(e[0]===Symbol.for("react.memo_cache_sentinel")){var n=r("getRequestConstUri")();t=r("isMessengerDotComURI")(n)||r("isFacebookMessengerInboxURI")(n),e[0]=t}else t=e[0];return t}l.default=e}),98);
__d("useMWChatCalculateIsMutedFromExpireTime",["MWThreadIsMuted_DEPRECATED","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=o("react-compiler-runtime").c(5),n;t[0]!==e?(n=function(){return o("MWThreadIsMuted_DEPRECATED").getThreadIsMuted(e)},t[0]=e,t[1]=n):n=t[1];var a=c(n),i=a[0],l=a[1],s,d;return t[2]!==e?(s=function(){var t=o("MWThreadIsMuted_DEPRECATED").getThreadIsMuted(e);if(l(t),!!(t&&e>-1)){var n=r("setTimeout")(function(){return l(!1)},e-Date.now());return function(){r("clearTimeout")(n)}}},d=[e,l],t[2]=e,t[3]=s,t[4]=d):(s=t[3],d=t[4]),u(s,d),i}l.default=d}),98);
__d("useMWEBGetUpsellStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null}]}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBGetUpsellStateQuery",selections:[{kind:"RequiredField",field:e,action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBGetUpsellStateQuery",selections:[e]},params:{cacheID:"3d6b0766f42bc6a61e179528381b00b4",id:null,metadata:{},name:"useMWEBGetUpsellStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEBGetUpsellState",["CometRelay","MWEBUpsellDismissedEnum.facebook","react-compiler-runtime","useMWEBGetUpsellStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(5),r,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=e!==void 0?e:e=n("useMWEBGetUpsellStateQuery.graphql"),a={},t[0]=r,t[1]=a):(r=t[0],a=t[1]);var i=o("CometRelay").useClientQuery(r,a),l=i.viewer,s=l.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED,u=s||l.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED,c;return t[2]!==s||t[3]!==u?(c={isAllRestoreUpsellsDismissed:s,isRestoreUpsellsDismissed:u},t[2]=s,t[3]=u,t[4]=c):c=t[4],c}l.default=s}),98);
__d("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2",["Base64Utils","I64","LSIntEnum","cr:343","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useMemo,p=c.useState;function _(e){var t=e===void 0?{}:e,r=t.hsmCreationTimeInitialValue,a=t.offlineDevicesCountInitialValue,i=t.vestaClientIDInitialValue,l=n("cr:343")(),c=l.virtualDevices,_=m(function(){return c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(2))})[0]},[c]),f=c.length===0?r:(_==null?void 0:_.creationTime)!=null?(s||(s=o("I64"))).to_float(_.creationTime):null,g=i!=null?i:_!=null?o("Base64Utils").fromArrayBuffer(_.virtualDeviceId):void 0,h=m(function(){return a!=null?a:c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(1))}).length},[c,a]),y=p(g),C=y[0],b=y[1],v=p(h),S=v[0],R=v[1];return d(function(){if(c.length!==0){var e=c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(2))}),t=e[0],n=c.filter(function(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(1))});b(t!=null?o("Base64Utils").fromArrayBuffer(t.virtualDeviceId):void 0),R(n.length)}},[c]),{hsmCreationTime:f,offlineDevicesCount:S,vestaClientID:C}}l.default=_}),98);
__d("useMWGetInboxFocusTargetFromRoute",["CometRouteParams","MWInboxFocusTarget","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(2),t=o("CometRouteParams").useRouteParams(),n=t.focus_target;if(n!=null){var a=Number(n),i;if(e[0]!==a){var l;i=(l=r("MWInboxFocusTarget").cast(a))!=null?l:0,e[0]=a,e[1]=i}else i=e[1];return i}return 0}l.default=e}),98);
__d("useMWIsReadReceiptsDisabledForUser",["LSIntEnum","LSReadReceiptSettingState","MWPActor.react","MessengerWebPrivacySettings","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t=o("react-compiler-runtime").c(6),n=(s||(s=r("useReStore")))(),a=o("MWPActor.react").useActor(),l;t[0]!==a||t[1]!==n.tables.messaging_privacy_settings?(l=function(){return o("ReQL").fromTableAscending(n.tables.messaging_privacy_settings).getKeyRange(a)},t[0]=a,t[1]=n.tables.messaging_privacy_settings,t[2]=l):l=t[2];var u;t[3]!==a||t[4]!==n?(u=[n,a],t[3]=a,t[4]=n,t[5]=u):u=t[5];var c=o("ReQLSuspense").useFirst(l,u,i.id+":23");if(c==null)return r("MessengerWebPrivacySettings").read_receipts_disabled===r("LSReadReceiptSettingState").DISABLED;var d=c.readReceiptsDisabled!=null?(e||(e=o("LSIntEnum"))).toNumber(c.readReceiptsDisabled):r("LSReadReceiptSettingState").DEFAULT;return d===r("LSReadReceiptSettingState").DISABLED}l.default=u}),98);
__d("useMWIsReadReceiptsDisabledForThread",["LSIntEnum","LSReadReceiptSettingState","MWLSThread","useMWIsReadReceiptsDisabledForUser"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=o("MWLSThread").useThread(e,u),n=r("useMWIsReadReceiptsDisabledForUser")();return t!=null&&t!==r("LSReadReceiptSettingState").DEFAULT?t===r("LSReadReceiptSettingState").DISABLED:n}function u(t){return(e||(e=o("LSIntEnum"))).toNumber(t.readReceiptsDisabledV2)}l.default=s}),98);
__d("useZenonHasActiveCall",["CacheStorage","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e="RTC_LS_CALL_SUMMARY_",s="ls_summary";function u(){var t=r("justknobx")._("4056"),n=new(r("CacheStorage"))("localstorage",e),o=n.get(s);if(!o||Object.keys(o).length===0)return!1;var a=Object.values(o)[0];if(!a||Object.keys(a).length===0)return!1;var i=Object.values(a)[0].__t;return!(i<Date.now()-t)}l.default=u}),98);
__d("useMWIsStaleCall",["DateConsts","FBLogger","I64","LSMessagingThreadTypeUtil","justknobx","useZenonHasActiveCall"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=r("useZenonHasActiveCall")();if(!n||i)return!1;if(a==null&&n)return r("FBLogger")("messenger_web_calling").info("ongoingCallTimestampMs is null but isOngoingCall is true"),!1;var l=a!=null?(e||(e=o("I64"))).to_float(a)/1e3:0;if(l!==0){var s=t!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(t)?r("justknobx")._("4057"):t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t)?r("justknobx")._("4058"):0,u=o("DateConsts").getCurrentTimeInSeconds(),c=u-l,d=c>s;return d}return!1}l.default=s}),98);
__d("useMWLSMarkThreadAsRead",["FBLogger","I64","LSFactory","LSOptimisticMarkThreadReadV2StoredProcedure","MWThreadKey.react","MessengerWebUXLogger","ReQL","cr:2580","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t,a){var l,u=o("react-compiler-runtime").c(5),c=(e||(e=r("useReStore")))(),d=(l=o("MWThreadKey.react").useMWThreadKeyMemoized())!=null?l:a;if(d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Tried to get a thread key when there was none");var m=r("MessengerWebUXLogger").useInteractionLogger(),p;return u[0]!==c||u[1]!==t||u[2]!==m||u[3]!==d?(p=function(){m==null||m({eventName:"mark_thread_as_read"}),r("promiseDone")(c.runInTransaction(async function(e){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(d));if(a!=null){var i=a.lastActivityTimestampMs,l=a.lastReadWatermarkTimestampMs,u=a.threadType;if((s||(s=o("I64"))).gt(i,l)){n("cr:2580")&&t!=null&&n("cr:2580")({threadKey:d,threadType:u},"seen_receipt",t);var c=i;return r("LSOptimisticMarkThreadReadV2StoredProcedure")(r("LSFactory")(e),{readWatermarkTimestampMs:c,threadKey:d})}}},"readwrite",void 0,void 0,i.id+":54"))},u[0]=c,u[1]=t,u[2]=m,u[3]=d,u[4]=p):p=u[4],p}l.default=d}),98);
__d("useOpenThreadAfterJoin",["I64","MWLSThreadDisplayContext","ReQL","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWChatOpenTabForGroup","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){var e=o("react-compiler-runtime").c(5),t=r("useMWChatOpenTabForGroup")("jewel"),n=t[0],a=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),i=r("useAsyncReStore")(),l=r("useMWNavigation")(),u;return e[0]!==i||e[1]!==a||e[2]!==l||e[3]!==n?(u=function(t){if(a==="ChatTab"){n(t);return}r("promiseDone")(i,function(e){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(t))),function(e){e!=null&&l.openInbox({clientThreadKey:void 0,threadKey:(s||(s=o("I64"))).of_string(t),threadType:e.threadType},"deepLink")})})},e[0]=i,e[1]=a,e[2]=l,e[3]=n,e[4]=u):u=e[4],u}l.default=c}),98);
__d("usePublicChatShortlinkCallback",["ConstUriUtils","I64","JSResourceForInteraction","LSFactory","LSIntEnum","LSOptimisticFetchPendingGroupInviteStoredProcedure","ReQL","promiseDone","react","react-compiler-runtime","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useEffect,_=d.useRef,f=r("JSResourceForInteraction")("MWJoinPublicChatDialog.react").__setRef("usePublicChatShortlinkCallback");function g(e){var t=o("ConstUriUtils").getUri(e);if(t!=null&&t.isSubdomainOfDomain("m.me")){var n,r=t==null||(n=t.getPath())==null?void 0:n.split("/").filter(function(e){return e!==""});return(r==null?void 0:r.length)===2&&r[0]==="j"?r[1]:null}return null}function h(t){var n=o("react-compiler-runtime").c(6),a=t.onSuccess,l=_(!1),c=_(),d=_(),m=(e||(e=r("useReStore")))(),h=r("useMWXLazyDialog")(f),y=h[0],C,b;n[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return function(){c.current==null||c.current(),d.current==null||d.current()}},b=[],n[0]=C,n[1]=b):(C=n[0],b=n[1]),p(C,b);var v;return n[2]!==m||n[3]!==a||n[4]!==y?(v=function(t){var e=g(t);e!=null&&(r("promiseDone")(m.runInTransaction(function(t){return r("LSOptimisticFetchPendingGroupInviteStoredProcedure")(r("LSFactory")(t),{linkHash:e})},"readwrite",void 0,void 0,i.id+":85")),c.current=o("ReQL").fromTableAscending(m.tables.group_invitations_pending).getKeyRange(e).subscribe(function(t,n){if(n.operation!=="delete"){var r=n.value;if(r!=null&&r.isSubscribed&&(r==null?void 0:r.threadId)!=null){a==null||a((s||(s=o("I64"))).to_string(r.threadId));return}else if((r==null?void 0:r.linkJoinType)!=null&&(s||(s=o("I64"))).equal(r==null?void 0:r.linkJoinType,(u||(u=o("LSIntEnum"))).ofNumber(6))&&(r==null?void 0:r.threadId)!=null){a==null||a((s||(s=o("I64"))).to_string(r==null?void 0:r.threadId));return}(r==null?void 0:r.threadTitle.length)>0&&!l.current&&(l.current=!0,y({linkHash:e,onClick:function(){r.needsAdminApprovalForNewParticipant||(d.current=o("ReQL").fromTableAscending(m.tables.threads).subscribe(function(t,n){n.operation!=="delete"&&n.value.threadInviteLink!=null&&g(n.value.threadInviteLink)===e&&(a==null||a((s||(s=o("I64"))).to_string(n.value.threadKey)),d.current==null||d.current())}))}},function(){l.current=!1}),c.current==null||c.current())}}))},n[2]=m,n[3]=a,n[4]=y,n[5]=v):v=n[5],v}l.default=h}),98);/*FB_PKG_DELIM*/
__d("FBIconDots3HorizontalOutline20.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-446 -398)",children:s.jsx(o("XPlatReactSVG").Path,{d:"M458 408a2 2 0 1 1-4 0 2 2 0 0 1 4 0m6 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m-12 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("LSCancelTaskByQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.forEach(t.filter(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(n){return n.queueName===e[0]&&n.context===t.i64.to_string(e[1])}),function(e){var r=e.item;return t.sequence([function(e){return n[0]=r.taskDispatchPriority,t.forEach(t.filter(t.db.table(2).fetch([[[r.taskId]]]),function(e){return t.i64.eq(e.taskId,r.taskId)&&e.queueName===r.queueName}),function(e){return e.delete()})},function(e){return t.i64.eq(n[0],t.i64.cast([0,1e3]))||t.i64.eq(n[0],t.i64.cast([0,2e3]))?n[1]=t.i64.cast([0,734739218]):n[1]=t.i64.cast([0,734737036])}])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSComputeOptimisticThreadCapabilities",["LSArrayGetObjectAt","LSComputeParticipantCapabilities","LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.createArray(),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return t.forEach(t.db.table(14).fetch([[[e[0],{lt:r[1]}],[e[0],{gt:r[1]}]]]),function(o){var a=o.item;return t.sequence([function(o){return t.storedProcedure(n("LSComputeParticipantCapabilities"),a.contactId,e[0]).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[32]=(r[0].push(r[31]),r[0])}])})},function(e){return r[2]=t.i64.cast([0,1073741823]),r[3]=t.i64.of_int32(r[0].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[0],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[2]=t.i64.and_(r[2],r[32])}])}):t.resolve()},function(n){return r[4]=t.i64.of_int32(r[0].length),t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?t.sequence([function(n){return t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[31]=!1:(n=a.item,r[31]=!!t.i64.eq(n.contactTypeExact,t.i64.cast([0,16])))})},function(e){return r[5]=r[31]}]):(o=i.item,r[5]=!!t.i64.eq(o.threadType,t.i64.cast([0,201])))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=!1:(n=a.item,r[7]=t.i64.eq(n.threadType,t.i64.cast([0,206])))})},function(n){var o,a,i,l;return r[9]=t.i64.cast([0,1083495711]),r[10]=t.i64.cast([0,1024]),r[11]=t.i64.cast([0,0]),r[12]=t.i64.cast([0,0]),r[13]=t.i64.cast([0,134217728]),r[14]=t.i64.cast([0,1083495711]),r[15]=t.i64.cast([0,1024]),r[16]=t.i64.cast([0,0]),r[17]=t.i64.cast([0,134217728]),r[18]=t.i64.cast([0,0]),r[5]?(r[31]=t.i64.cast([0,8650752]),r[32]=t.i64.cast([0,1024]),r[33]=t.i64.cast([0,0]),r[34]=t.i64.cast([0,0]),r[35]=t.i64.cast([0,0]),o=[r[31],r[32],r[33],r[34],r[35]],r[19]=o[0],r[20]=o[1],r[21]=o[2],r[22]=o[3],r[23]=o[4]):(r[7]?(r[36]=t.i64.cast([0,8700166]),r[37]=t.i64.cast([0,1024]),r[38]=t.i64.cast([0,0]),r[39]=t.i64.cast([0,0]),r[40]=t.i64.cast([0,0]),a=[r[36],r[37],r[38],r[39],r[40]],r[31]=a[0],r[32]=a[1],r[33]=a[2],r[34]=a[3],r[35]=a[4]):(i=[r[14],r[15],r[16],r[17],r[18]],r[31]=i[0],r[32]=i[1],r[33]=i[2],r[34]=i[3],r[35]=i[4]),l=[r[31],r[32],r[33],r[34],r[35]],r[19]=l[0],r[20]=l[1],r[21]=l[2],r[22]=l[3],r[23]=l[4]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[r[19],t.i64.cast([0,1])],r[24]=o[0],r[25]=o[1],o):(n=l.item,a=[r[19],n.threadType],r[24]=a[0],r[25]=a[1])})},function(e){return r[27]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))),r[28]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,23]))),r[30]=t.i64.and_(t.i64.and_(!t.i64.eq(r[25],t.i64.cast([0,1]))||t.i64.eq(r[4],t.i64.cast([0,0]))?t.i64.eq(t.i64.and_(r[24],r[27]),t.i64.cast([0,0]))?r[24]:t.i64.sub(r[24],r[27]):r[24],t.i64.eq(r[25],t.i64.cast([0,2]))?t.i64.eq(t.i64.and_(r[24],r[28]),t.i64.cast([0,0]))?r[24]:t.i64.sub(r[24],r[28]):r[24]),t.i64.eq(r[25],t.i64.cast([0,1]))&&t.i64.neq(r[4],t.i64.cast([0,0]))?r[24]:t.i64.xor(r[24],t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))))),t.i64.eq(r[25],t.i64.cast([0,206]))?t.resolve(r[29]=r[30]):t.sequence([function(e){return r[31]=t.createArray(),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,6]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,6]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,0]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,7]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,1]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,72]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,72]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,8]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,8]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,2]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,9]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,9]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,10]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,4]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,5]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,5]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,8]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,11]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,11]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,14]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,12]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,12]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,15]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,13]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,13]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,18]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,14]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,14]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,20]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,15]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,15]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,23]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(t.i64.cast([0,3]),void 0)||t.i64.neq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,3]))),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,10]))):t.i64.cast([0,0])),r[31]),r[34]=(r[31].push(t.i64.eq(void 0,void 0)||t.i64.neq(t.i64.and_(t.i64.cast([0,0]),r[2]),t.i64.cast([0,0]))?t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,30]))):t.i64.cast([0,0])),r[31]),r[32]=t.i64.cast([0,0]),r[33]=t.i64.of_int32(r[31].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[34]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[31],r[34]).then(function(e){var t;return t=e,r[35]=t[0],r[36]=t[1],t})},function(e){return r[32]=t.i64.add(r[32],r[35])}])}):t.resolve()},function(e){return r[29]=t.i64.and_(r[32],r[30])}])},function(e){return o[0]=r[29]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxComputeOptimisticThreadCapabilitiesStoredProcedure",e.__tables__=["participants","threads","contacts"],a.exports=e}),null);
__d("LSGetFirstAvailableQuickReplyCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.sortBy(t.db.table(20).fetch(),[["ctaId","DESC"]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxGetFirstAvailableQuickReplyCTAIDStoredProcedure",e.__tables__=["quick_reply_ctas"],a.exports=e}),null);
__d("LSInsertQuickReplyCTA",["LSArrayGetObjectAt","LSGetFirstAvailableQuickReplyCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=t.i64.of_int32(e[3].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.sequence([function(n){return t.forEach(t.db.table(20).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})},function(e){return t.storedProcedure(n("LSGetFirstAvailableQuickReplyCTAID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=r[1],r[3]=t.i64.of_int32(e[3].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[7]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(n){return r[10]=r[8].get("title"),r[11]=r[8].get("type"),r[12]=r[8].get("image_url"),r[13]=r[8].get("platform_token"),t.db.table(20).add({threadKey:e[0],messageId:e[1],ctaId:r[2],messageTimestampMs:e[2],title:r[10],type_:r[11],imageUrl:r[12],platformToken:r[13]})},function(e){return r[2]=t.i64.add(r[2],t.i64.cast([0,1]))}])}):t.resolve()},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return r[6]=r[4].get("quick_reply_type"),t.forEach(t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}),function(e){var t=e.update,n=e.item;return t({hasQuickReplies:!0,quickReplyType:r[6]})})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertQuickReplyCTAStoredProcedure",e.__tables__=["quick_reply_ctas","messages"],a.exports=e}),null);
__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.eq(e[3],t.i64.cast([0,1]))?t.sequence([function(o){return t.i64.eq(e[1],r[0])?t.sequence([function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2421884758]),void 0).then(function(e){return r[4]=e})},function(e){return r[3]=r[4]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[4]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2676961947]),r[5]).then(function(e){return r[6]=e})},function(e){return r[3]=r[6]}])},function(e){return r[2]=r[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[1]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[3]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3298086032]),r[5]).then(function(e){return r[6]=e})},function(e){return r[4]=r[6]}]):t.sequence([function(o){return t.i64.eq(e[1],e[2])?t.sequence([function(e){return r[6]=t.createArray(),r[8]=(r[6].push(r[3]),r[6]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3873263038]),r[6]).then(function(e){return r[7]=e})},function(e){return r[5]=r[7]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[7]=t.createArray(),r[9]=(r[7].push(r[3]),r[7]),r[9]=(r[7].push(r[6]),r[7]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2616853333]),r[7]).then(function(e){return r[8]=e})},function(e){return r[5]=r[8]}])},function(e){return r[4]=r[5]}])},function(e){return r[2]=r[4]}])},function(e){return r[1]=r[2]}]):t.sequence([function(o){return t.i64.eq(e[1],r[0])?t.sequence([function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,4002265907]),void 0).then(function(e){return r[4]=e})},function(e){return r[3]=r[4]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[4]=t[0],t})},function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[4]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2663996736]),r[5]).then(function(e){return r[6]=e})},function(e){return r[3]=r[6]}])},function(e){return r[2]=r[3]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[1]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(o){return t.i64.eq(e[2],r[0])?t.sequence([function(e){return r[5]=t.createArray(),r[7]=(r[5].push(r[3]),r[5]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2868699317]),r[5]).then(function(e){return r[6]=e})},function(e){return r[4]=r[6]}]):t.sequence([function(o){return t.i64.eq(e[1],e[2])?t.sequence([function(e){return r[6]=t.createArray(),r[8]=(r[6].push(r[3]),r[6]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2688620547]),r[6]).then(function(e){return r[7]=e})},function(e){return r[5]=r[7]}]):t.sequence([function(o){return t.storedProcedure(n("LSGetThreadParticipantDisplayName"),e[0],e[2]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return r[7]=t.createArray(),r[9]=(r[7].push(r[3]),r[7]),r[9]=(r[7].push(r[6]),r[7]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3544071775]),r[7]).then(function(e){return r[8]=e})},function(e){return r[5]=r[8]}])},function(e){return r[4]=r[5]}])},function(e){return r[2]=r[4]}])},function(e){return r[1]=r[2]}])},function(e){return o[0]=r[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxGetLocalizedReplySnippetStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSetMessageViewFlags",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[2])&&n.messageId===e[1]}).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,r.primarySortKey,r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey],n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8])})},function(r){return t.sortBy(t.filter(t.db.table(12).fetch([[[e[0],{gt:n[7]}],[e[0],n[7]]],"messageDisplayOrder"]),function(r){return t.i64.eq(r.threadKey,e[0])&&r.messageId!==e[1]&&(t.i64.gt(r.primarySortKey,n[7])||t.i64.eq(r.primarySortKey,n[7])&&t.i64.ge(r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey,n[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[10]=o[0],n[11]=o[1],n[12]=o[2],n[13]=o[3],n[14]=o[4],n[15]=o[5],n[16]=o[6],n[17]=o[7],n[18]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[10]=a[0],n[11]=a[1],n[12]=a[2],n[13]=a[3],n[14]=a[4],n[15]=a[5],n[16]=a[6],n[17]=a[7],n[18]=a[8])})},function(r){return t.sortBy(t.filter(t.db.table(12).fetchDesc([[[e[0],{lt:n[7]}],[e[0],n[7]]],"messageDisplayOrder"]),function(r){return t.i64.eq(r.threadKey,e[0])&&r.messageId!==e[1]&&(t.i64.lt(r.primarySortKey,n[7])||t.i64.eq(r.primarySortKey,n[7])&&t.i64.le(r.secondarySortKey==null?t.i64.cast([-1,4294967295]):r.secondarySortKey,n[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),!1,"nonexistent",t.i64.cast([0,20]),void 0,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[20]=o[0],n[21]=o[1],n[22]=o[2],n[23]=o[3],n[24]=o[4],n[25]=o[5],n[26]=o[6],n[27]=o[7],n[28]=o[8],o):(r=l.item,a=[r.timestampMs,r.senderId,r.viewFlags,r.isAdminMessage,r.messageId,r.authorityLevel,r.stickerId,t.i64.cast([-1,4294967295]),t.i64.cast([-1,4294967295])],n[20]=a[0],n[21]=a[1],n[22]=a[2],n[23]=a[3],n[24]=a[4],n[25]=a[5],n[26]=a[6],n[27]=a[7],n[28]=a[8])})},function(r){return n[32]=t.i64.or_(t.i64.cast([0,2]),t.i64.or_(!n[3]&&!e[3]?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.or_(n[3]?t.i64.cast([0,0]):t.i64.cast([0,1]),t.i64.or_(t.i64.eq(n[5],t.i64.cast([0,60]))||t.i64.eq(n[5],t.i64.cast([0,80]))?t.i64.cast([0,1048576]):t.i64.cast([0,0]),t.i64.neq(n[6],t.i64.cast([85970,924785702]))&&t.i64.neq(n[6],t.i64.cast([85970,1004785694]))&&t.i64.neq(n[6],t.i64.cast([85970,1044785690]))?t.i64.cast([0,0]):t.i64.cast([0,2097152]))))),n[14]!=="nonexistent"?t.sequence([function(r){return n[35]=t.i64.or_(t.i64.and_(n[12],t.i64.cast([-1,4294967280])),t.i64.or_(t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5]))?t.i64.cast([0,2]):t.i64.cast([0,0]),t.i64.or_(t.i64.eq(n[11],n[1])&&!n[13]&&!n[3]&&!t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5]))?t.i64.cast([0,8]):t.i64.cast([0,0]),t.i64.or_(!e[3]&&!n[13]&&!(t.i64.eq(n[11],n[1])&&!n[13]&&!n[3]&&!t.i64.gt(t.i64.sub(n[10],n[0]),t.i64.cast([0,6e5])))?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.and_(n[12],t.i64.cast([0,1])))))),n[33]=t.i64.eq(t.i64.and_(n[35],t.i64.cast([0,8])),t.i64.cast([0,8])),n[34]=n[33]?t.i64.or_(n[32],t.i64.cast([0,16])):n[32],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[10],n[14]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[10])&&r.messageId===n[14]}),function(e){var t=e.update,r=e.item;return t({viewFlags:n[35]})})},function(e){return n[30]=n[33]?t.i64.and_(n[34],t.i64.cast([-1,4294967294])):n[34]}]):t.resolve(n[30]=n[32])},function(r){return n[24]!=="nonexistent"?t.sequence([function(r){return n[35]=t.i64.or_(t.i64.and_(n[30],t.i64.cast([-1,4294967280])),t.i64.or_(t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5]))?t.i64.cast([0,2]):t.i64.cast([0,0]),t.i64.or_(t.i64.eq(n[1],n[21])&&!n[3]&&!n[23]&&!t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5]))?t.i64.cast([0,8]):t.i64.cast([0,0]),t.i64.or_(!e[3]&&!n[3]&&!(t.i64.eq(n[1],n[21])&&!n[3]&&!n[23]&&!t.i64.gt(t.i64.sub(n[0],n[20]),t.i64.cast([0,6e5])))?t.i64.cast([0,4]):t.i64.cast([0,0]),t.i64.and_(n[30],t.i64.cast([0,1])))))),n[33]=t.i64.eq(t.i64.and_(n[35],t.i64.cast([0,8])),t.i64.cast([0,8])),n[34]=n[33]?t.i64.or_(n[22],t.i64.cast([0,16])):n[22],t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[20],n[24]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[20])&&r.messageId===n[24]}),function(e){var r=e.update,o=e.item;return r({viewFlags:n[33]?t.i64.and_(n[34],t.i64.cast([-1,4294967294])):n[34]})})},function(e){return n[31]=n[35]}]):t.resolve(n[31]=n[30])},function(r){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0],n[0],n[4]]]]),function(r){return t.i64.eq(r.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(r.timestampMs,n[0])&&r.messageId===n[4]}),function(e){var t=e.update,r=e.item;return t({viewFlags:n[31]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetMessageViewFlagsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSLocalize","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.sequence([function(e){return t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[1]=t.i64.to_string(r[9])}])},function(o){return r[8]=e[4]==null?e[3]:e[4],t.sequence([function(e){return t.islc(t.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[9]=t.i64.cast([-1,4294967295]):(n=a.item,r[9]=n.lastActivityTimestampMs)})},function(o){return r[11]=t.i64.add(r[9],t.i64.cast([0,1])),r[13]=t.i64.gt(r[0],r[11])?r[0]:r[11],t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return(function(e){t.logger(e).info(e)})("localApplyOptimisticMessage insert optimistic thread"),t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,40]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:e[2],clientThreadKey:e[1],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:r[13],lastReadWatermarkTimestampMs:r[13],snippet:r[8],snippetHasEmoji:e[5]==null?!1:e[5],snippetSenderContactId:e[0],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,40])})},function(n){return t.i64.eq(e[2],t.i64.cast([0,13]))||t.i64.eq(e[2],t.i64.cast([0,7]))||t.i64.eq(e[2],t.i64.cast([0,1]))?t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(14).add({threadKey:e[1],contactId:e[1],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}]):t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=!1:(t=o.item,r[14]=t.errorShouldBeShown)})},function(e){return r[14]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[16]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[17]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[16],r[17],void 0,void 0)}]):t.resolve()}]):(a=l.item,t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(n.threadType,e[2])}),function(t){var n=t.update,o=t.item;return n({lastActivityTimestampMs:r[13],lastReadWatermarkTimestampMs:r[13],snippet:r[8],snippetHasEmoji:e[5]==null?!1:e[5],snippetSenderContactId:e[0],snippetText:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(o){return t.sequence([function(n){return t.islc(t.db.table(12).fetchDesc([[[e[1],t.i64.cast([0,80])],[e[1],t.i64.cast([0,60])],[e[1],t.i64.cast([0,40])]],"messageDisplayOrderAuthority"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?(r[33]=t.i64.of_float(Date.now()),r[9]=r[33]):(n=a.item,r[9]=n.primarySortKey)})},function(o){var a,i,l;return e[8]!==void 0&&(t.i64.eq(e[9],t.i64.cast([0,1]))||t.i64.eq(e[10],t.i64.cast([0,1])))?t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[8]==null?"":e[8]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===(e[8]==null?"":e[8])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(i=[e[8],void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=i[0],r[34]=i[1],r[35]=i[2],r[36]=i[3],r[37]=i[4],r[38]=i[5],r[39]=i[6],r[40]=i[7],r[41]=i[8],r[42]=i[9],r[43]=i[10],r[44]=i[11],r[45]=i[12],r[46]=i[13],r[47]=i[14],r[48]=i[15],i):(a=s.item,t.sequence([function(o){var i,l,s;return r[54]=a.senderId,r[53]=a.stickerId,t.i64.neq(r[53],void 0)?(i=[r[53],t.i64.cast([0,4])],r[56]=i[0],r[57]=i[1]):(l=[void 0,void 0],r[56]=l[0],r[57]=l[1]),s=[r[56],r[57]],r[50]=s[0],r[51]=s[1],r[55]=a.replyType==null?t.i64.cast([0,0]):a.replyType,t.sequence([function(o){return t.storedProcedure(n("LSGetLocalizedReplySnippet"),e[1],e[0],r[54],r[55]).then(function(e){var t;return t=e,r[56]=t[0],t})},function(n){return r[52]=t.i64.eq(e[10],t.i64.cast([0,1]))?r[56]:""}])},function(n){var o;return o=[e[8],e[9],e[10],t.i64.cast([0,1]),r[52],r[54],a.text,r[50],r[51],void 0,void 0,void 0,void 0,void 0,void 0,r[55]],r[33]=o[0],r[34]=o[1],r[35]=o[2],r[36]=o[3],r[37]=o[4],r[38]=o[5],r[39]=o[6],r[40]=o[7],r[41]=o[8],r[42]=o[9],r[43]=o[10],r[44]=o[11],r[45]=o[12],r[46]=o[13],r[47]=o[14],r[48]=o[15],o}]))})},function(e){var t;return t=[r[33],r[34],r[35],r[36],r[37],r[38],r[39],r[40],r[41],r[42],r[43],r[44],r[45],r[46],r[47],r[48]],r[11]=t[0],r[12]=t[1],r[13]=t[2],r[14]=t[3],r[15]=t[4],r[16]=t[5],r[17]=t[6],r[18]=t[7],r[19]=t[8],r[20]=t[9],r[21]=t[10],r[22]=t[11],r[23]=t[12],r[24]=t[13],r[25]=t[14],r[26]=t[15],t}]):t.resolve((e[8]===void 0||t.i64.eq(e[9],t.i64.cast([0,0]))||t.i64.eq(e[10],t.i64.cast([0,0]))?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=a[0],r[34]=a[1],r[35]=a[2],r[36]=a[3],r[37]=a[4],r[38]=a[5],r[39]=a[6],r[40]=a[7],r[41]=a[8],r[42]=a[9],r[43]=a[10],r[44]=a[11],r[45]=a[12],r[46]=a[13],r[47]=a[14],r[48]=a[15]):(i=[e[8],e[9],e[10],t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[33]=i[0],r[34]=i[1],r[35]=i[2],r[36]=i[3],r[37]=i[4],r[38]=i[5],r[39]=i[6],r[40]=i[7],r[41]=i[8],r[42]=i[9],r[43]=i[10],r[44]=i[11],r[45]=i[12],r[46]=i[13],r[47]=i[14],r[48]=i[15]),l=[r[33],r[34],r[35],r[36],r[37],r[38],r[39],r[40],r[41],r[42],r[43],r[44],r[45],r[46],r[47],r[48]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4],r[16]=l[5],r[17]=l[6],r[18]=l[7],r[19]=l[8],r[20]=l[9],r[21]=l[10],r[22]=l[11],r[23]=l[12],r[24]=l[13],r[25]=l[14],r[26]=l[15]))},function(n){var o,a;return e[13]?r[27]=!1:r[27]=!0,r[27]?(a=[void 0,void 0,void 0,void 0],r[28]=a[0],r[29]=a[1],r[30]=a[2],r[31]=a[3]):(r[33]=e[13].get("mention_offsets"),r[34]=e[13].get("mention_lengths"),r[35]=e[13].get("mention_ids"),r[36]=e[13].get("mention_types"),o=[r[33],r[34],r[35],r[36]],r[28]=o[0],r[29]=o[1],r[30]=o[2],r[31]=o[3]),e[11]?r[32]=t.i64.cast([0,3]):r[32]=r[13],t.i64.eq(t.i64.cast([0,20]),t.i64.cast([0,20]))?t.db.table(12).add({threadKey:e[1],messageId:r[1],timestampMs:r[0],offlineThreadingId:r[1],primarySortKey:r[9],secondarySortKey:r[0],text:e[3],senderId:e[0],stickerId:e[6],hotEmojiSize:e[7],isForwarded:e[11],forwardScore:e[12],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[32],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],replyType:r[26],mentionOffsets:r[28],mentionLengths:r[29],mentionIds:r[30],mentionTypes:r[31]}):t.sequence([function(e){return t.db.table(12).fetch([[[r[1]]],"optimistic"]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[r[9],r[0],void 0],r[33]=n[0],r[34]=n[1],r[35]=n[2],n):(t=i.item,o=[t.primarySortKey,t.secondarySortKey,t.localDataId],r[33]=o[0],r[34]=o[1],r[35]=o[2])})},function(e){return t.forEach(t.filter(t.db.table(12).fetch([[[r[1]]],"optimistic"]),function(e){return e.offlineThreadingId===r[1]&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(12).add({threadKey:e[1],messageId:r[1],timestampMs:r[0],offlineThreadingId:r[1],primarySortKey:r[33],secondarySortKey:r[34],text:e[3],senderId:e[0],stickerId:e[6],hotEmojiSize:e[7],isForwarded:e[11],forwardScore:e[12],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),localDataId:r[35],replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[32],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],replyType:r[26],mentionOffsets:r[28],mentionLengths:r[29],mentionIds:r[30],mentionTypes:r[31]})}])}])},function(o){return r[2]=t.createArray(),r[3]=(r[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),r[2]),r[4]=(r[2].push("localApplyOptimisticMessage"),r[2]),r[5]=(r[2].push(e[1]),r[2]),r[6]=(r[2].push(r[1]),r[2]),r[7]=t.toJSON(r[2]),(function(e){t.logger(e).info(e)})(r[7]),e[14]?t.sequence([function(o){return t.storedProcedure(n("LSSetMessageViewFlags"),e[1],r[1],r[0],t.i64.eq(e[2],t.i64.cast([0,1])))},function(o){return t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[1],r[0],e[3],!1,t.i64.neq(e[6],void 0))}]):t.resolve()},function(e){var t;return t=[r[1],r[0]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageStoredProcedure",e.__tables__=["threads","participants","user_visible_network_connectivity_error","messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetViewerFBID","LSInsertQuickReplyCTA","LSIssueNewTask","LSLocalApplyOptimisticMessage"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("page_id"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[2]=r[26]}]):t.resolve(r[2]=void 0)},function(o){return e[3]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[3]).then(function(e){var t;return t=e,r[19]=t[0],t})},function(e){return r[20]=new t.Map,r[21]=r[19].keys(),r[22]=t.i64.of_int32(r[21].length),t.i64.gt(r[22],t.i64.cast([0,0]))?t.loopAsync(r[22],function(e){return r[27]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[21],r[27]).then(function(e){var t;return t=e,r[28]=t[0],r[29]=t[1],t})},function(e){return r[30]=r[19].get(r[28]),r[20].set(r[28],r[30])}])}):t.resolve()},function(e){return r[23]=r[20].get("product_extras"),r[23]?r[24]=!1:r[24]=!0,r[24]?t.resolve(r[25]=void 0):t.sequence([function(e){return r[27]=new t.Map,r[28]=r[23].keys(),r[29]=t.i64.of_int32(r[28].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[30]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[28],r[30]).then(function(e){var t;return t=e,r[31]=t[0],r[32]=t[1],t})},function(e){return r[33]=r[23].get(r[31]),r[27].set(r[31],r[33])}])}):t.resolve()},function(e){return r[25]=r[27]}])},function(e){return r[25]!==void 0?(r[27]=r[25].get("__typename"),r[27]==="XMSGClickToMessengerAdExtras"?r[28]=r[25]:r[28]=void 0,r[28]!==void 0?(r[30]=r[28].get("product_type"),r[29]=r[30]):r[29]=void 0,r[26]=r[29]):r[26]=void 0,r[3]=r[26]}]):t.resolve(r[3]=void 0)},function(e){var o,a;return r[3]==="CTM"?(r[2]!==void 0?r[19]=t.i64.from_string(r[2]):r[19]=r[1],r[4]=r[19]):r[4]=r[1],r[5]=t.i64.cast([0,1083495711]),r[6]=t.i64.cast([0,1024]),r[7]=t.i64.cast([0,0]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,134217728]),r[10]=!0,r[10]?(t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,205]))?r[19]=void 0:r[19]="",a=[r[19],void 0,void 0,void 0,void 0],r[11]=a[0],r[12]=a[1],r[13]=a[2],r[14]=a[3],r[15]=a[4]):(r[19]=(void 0).get("nullstate_description_text1"),r[19]!==void 0?r[20]=r[19]:r[20]="",r[21]=(void 0).get("nullstate_description_text2"),r[22]=(void 0).get("nullstate_description_text3"),r[23]=(void 0).get("nullstate_description_text4"),r[24]=(void 0).get("nullstate_description_text5"),o=[r[20],r[21],r[22],r[23],r[24]],r[11]=o[0],r[12]=o[1],r[13]=o[2],r[14]=o[3],r[15]=o[4]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return t.forEach(t.filter(t.db.table(9).fetch([[[r[4]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[4],mailboxType:t.i64.cast([0,0]),threadType:t.i64.cast([0,2]),clientThreadKey:r[4],folderName:"inbox",parentThreadKey:t.i64.cast([0,0]),lastActivityTimestampMs:t.i64.cast([0,0]),lastReadWatermarkTimestampMs:t.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:r[16],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),capabilities:r[5],capabilities2:r[6],capabilities3:r[7],capabilities4:r[8],capabilities5:r[9],nullstateDescriptionText1:r[11],nullstateDescriptionText2:r[12],nullstateDescriptionText3:r[13],threadName:e[2]})},function(e){return r[17]=t.createArray(),t.resolve()},function(n){return e[3]!==void 0?t.db.table(312).add({threadKey:r[4],metadata:e[3]}):t.resolve()},function(o){return r[18]=t.i64.of_int32(e[0].length),t.i64.gt(r[18],t.i64.cast([0,0]))?t.loopAsync(r[18],function(o){return r[19]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[19]).then(function(e){var t;return t=e,r[20]=t[0],r[21]=t[1],t})},function(e){return t.forEach(t.filter(t.db.table(14).fetch([[[r[4],r[20]]]]),function(e){return t.i64.eq(e.threadKey,r[4])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.contactId,r[20])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(e){return t.db.table(14).add({threadKey:r[4],contactId:r[20],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}])}):t.resolve()},function(e){return o[0]=r[4]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticGroupThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_metadata","participants"],a.exports=e}),null);
__d("LSCreateGroupThreadWithAdminText",["LSCreateOfflineThreadingID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],e[1],e[2],void 0).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return e[2],t.sequence([function(e){return r[1]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[1]).then(function(e){var t;return t=e,r[2]=t[0],t})},function(e){return t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(e){var n=e.update,o=e.item;return n({otidOfFirstMessage:t.i64.to_string(r[2])})})},function(o){return r[3]=new t.Map,r[3].set("thread_id",r[0]),r[3].set("otid",t.i64.to_string(r[2])),r[3].set("source",t.i64.cast([0,0])),r[3].set("send_type",t.i64.cast([0,8])),e[3]!==void 0&&r[3].set("text",e[3]),r[4]=new t.Map,r[4].set("participants",e[0]),r[4].set("send_payload",r[3]),e[2]!==void 0&&r[4].set("thread_name",e[2]),r[5]=r[4].get("send_payload"),r[6]=r[5].get("thread_id"),r[7]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[6]),t.i64.cast([0,130]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxCreateGroupThreadWithAdminTextStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSLocalCreateOptimisticGroupThread",["LSArrayGetObjectAt","LSGetViewerFBID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){var a,i;return r[0]=!0,r[0]?(i=["",void 0,void 0,void 0,void 0],r[1]=i[0],r[2]=i[1],r[3]=i[2],r[4]=i[3],r[5]=i[4]):(r[8]=(void 0).get("nullstate_description_text1"),r[8]!==void 0?r[9]=r[8]:r[9]="",r[10]=(void 0).get("nullstate_description_text2"),r[11]=(void 0).get("nullstate_description_text3"),r[12]=(void 0).get("nullstate_description_text4"),r[13]=(void 0).get("nullstate_description_text5"),a=[r[9],r[10],r[11],r[12],r[13]],r[1]=a[0],r[2]=a[1],r[3]=a[2],r[4]=a[3],r[5]=a[4]),r[6]=new t.Map,r[6].set("nullstate_description_text1",r[1]),r[6].set("nullstate_description_text2",r[2]),r[6].set("nullstate_description_text3",r[3]),r[6].set("nullstate_description_text4",r[4]),r[6].set("nullstate_description_text5",r[5]),t.storedProcedure(n("LSLocalApplyOptimisticGroupThread"),e[0],void 0,e[2],e[4]).then(function(e){var t;return t=e,r[7]=t[0],t})},function(o){return e[3]===!0&&t.i64.neq(t.i64.cast([0,2]),t.i64.cast([0,206]))?t.i64.eq(t.i64.cast([0,2]),t.i64.cast([0,5]))?e[4]!==void 0?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[8]=t[0],t})},function(o){return r[9]=t.i64.cast([0,0]),r[10]=t.i64.of_int32(e[0].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[11]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[11]).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(e){return t.i64.neq(r[12],r[8])?r[14]=r[12]:r[14]=r[9],r[9]=r[14]}])}):t.resolve()},function(o){return e[4]!==void 0?(r[11]=new t.Map,r[11].set("seller_id",r[9]),r[11].set("thread_metadata",e[4]),r[11].set("client_thread_key",r[7]),r[12]=r[11].get("client_thread_key"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,646]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve((function(e){t.logger(e).mustfix(e)})("Marketplace thread metadata cannot be null")):(r[8]=new t.Map,r[8].set("participants",e[0]),r[8].set("client_thread_key",r[7]),r[8].set("sync_group",t.i64.cast([0,1])),r[9]=r[8].get("client_thread_key"),r[10]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[9]),t.i64.cast([0,153]),r[10],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(e){return o[0]=r[7]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalCreateOptimisticGroupThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSMediaUrlAttachment",["I64","LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrl}function u(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrlLarge}function c(e){var t=e.playableUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.playableUrlFallback:e.playableUrl}function d(e){var t=e.imageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.imageUrlFallback:e.imageUrl}function m(e){var t=e.faviconUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.faviconUrlFallback:e.faviconUrl}function p(t){try{var n=t.listItemContactUrlExpirationTimestampList1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList1:t.listItemContactUrlList1}catch(e){return t.listItemContactUrlList1}}function _(t){try{var n=t.listItemContactUrlExpirationTimestampList2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList2:t.listItemContactUrlList2}catch(e){return t.listItemContactUrlList2}}function f(t){try{var n=t.listItemContactUrlExpirationTimestampList3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList3:t.listItemContactUrlList3}catch(e){return t.listItemContactUrlList3}}function g(e){var t=e.headerImageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.headerImageUrlFallback:e.headerImageUrl}function h(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback1:t.listItemProfilePictureUrl1}catch(e){return t.listItemProfilePictureUrl1}}function y(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback2:t.listItemProfilePictureUrl2}catch(e){return t.listItemProfilePictureUrl2}}function C(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback3:t.listItemProfilePictureUrl3}catch(e){return t.listItemProfilePictureUrl3}}l.previewUrl=s,l.previewUrlLarge=u,l.playableUrl=c,l.imageUrl=d,l.faviconUrl=m,l.listItemContactUrlList1=p,l.listItemContactUrlList2=_,l.listItemContactUrlList3=f,l.headerImageUrl=g,l.listItemProfilePictureUrl1=h,l.listItemProfilePictureUrl2=y,l.listItemProfilePictureUrl3=C}),98);
__d("LSMessagePointQuery",["LSIssueNewTask","LSVerifyThreadRowExists"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[1]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(r){return t.storedProcedure(n("LSVerifyThreadRowExists"),e[0],e[2],t.i64.cast([0,1]))},function(n){return t.db.table(13).add({threadKey:e[0],minTimestampMs:t.i64.cast([0,0]),minMessageId:e[1],maxTimestampMs:t.i64.cast([0,0]),maxMessageId:e[1],isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[1]=r[6])})},function(o){return r[3]=new t.Map,r[3].set("thread_key",e[0]),r[3].set("message_id",e[1]),r[3].set("sync_group",r[1]),r[3].set("num_context_messages",e[3]),r[4]=r[3].get("thread_key"),r[5]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[4]),t.i64.cast([0,19]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,r[1]=a.timestampMs,t.filter(t.db.table(13).fetch([[[e[0],{lte:r[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.minTimestampMs,r[1])&&t.i64.ge(n.maxTimestampMs,r[1])}).next().then(function(o){var a=o.done,i=o.value;return a?t.sequence([function(n){return t.db.table(13).add({threadKey:e[0],minTimestampMs:t.i64.cast([0,0]),minMessageId:e[1],maxTimestampMs:t.i64.cast([0,0]),maxMessageId:e[1],isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[2]=r[7])})},function(o){return r[4]=new t.Map,r[4].set("thread_key",e[0]),r[4].set("message_id",e[1]),r[4].set("sync_group",r[2]),r[4].set("num_context_messages",e[3]),r[5]=r[4].get("thread_key"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,19]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):0}))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMessagePointQueryStoredProcedure",e.__tables__=["messages","messages_ranges_v2__generated","threads"],a.exports=e}),null);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.eq(e[1],t.i64.cast([0,5]))?r[0]=t.i64.cast([-1,4294967284]):r[0]=t.i64.cast([0,0]),t.storedProcedure(n("LSVerifyThreadExistsV2"),e[0],e[1],"inbox",r[0],e[3],!1,e[2],!1,!1)},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadRowExistsV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyThreadView",["LSArrayGetObjectAt","LSComputeOptimisticThreadCapabilities","LSCreateGroupThreadWithAdminText","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSInsertNewMessageRange","LSIssueNewTask","LSLocalCreateOptimisticGroupThread","LSMessagePointQuery","LSVerifyContactRowExists","LSVerifyThreadRowExists","LSVerifyThreadRowExistsV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return r[4]=new t.Map,r[5]=r[3].keys(),r[6]=t.i64.of_int32(r[5].length),t.i64.gt(r[6],t.i64.cast([0,0]))?t.loopAsync(r[6],function(e){return r[8]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[8]).then(function(e){var t;return t=e,r[9]=t[0],r[10]=t[1],t})},function(e){return r[11]=r[3].get(r[9]),r[4].set(r[9],r[11])}])}):t.resolve()},function(e){return r[7]=r[4].get("product_type"),r[0]=r[7]}]):t.resolve(r[0]=void 0)},function(o){var a;return t.i64.eq(e[1],t.i64.cast([0,7]))?t.resolve((a=[e[0],t.i64.cast([0,1024])],r[1]=a[0],r[2]=a[1],a)):t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,o){var a,i,l=n.done,s=n.value;return l?(t.i64.eq(e[0],t.i64.cast([0,0]))?r[12]=e[0]:r[12]=void 0,a=[r[12],void 0,t.i64.cast([0,20])],r[3]=a[0],r[4]=a[1],r[5]=a[2]):(o=s.item,i=[o.threadKey,o.clientThreadKey,o.authorityLevel],r[3]=i[0],r[4]=i[1],r[5]=i[2])})},function(o){return r[12]=t.i64.of_int32(e[6].length),t.i64.eq(e[1],t.i64.cast([0,1]))&&t.i64.gt(r[12],t.i64.cast([0,0]))?(r[13]=t.i64.of_int32(e[6].length),t.i64.gt(r[13],t.i64.cast([0,0]))?t.loopAsync(r[13],function(o){return r[14]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[14]).then(function(e){var t;return t=e,r[15]=t[0],r[16]=t[1],t})},function(e){return r[17]=r[15].get("contact_id"),r[18]=r[15].get("contact_type"),r[19]=r[15].get("contact_name"),r[20]=r[15].get("contact_profile_photo"),t.storedProcedure(n("LSVerifyContactRowExists"),r[17],t.i64.cast([0,0]),r[20],r[19],r[18],void 0,void 0,void 0,void 0,!1,!1,t.i64.cast([0,0]),void 0,!1,t.i64.cast([0,20]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,5]))}])}):t.resolve()):t.resolve()},function(o){return e[5]!==void 0?t.sequence([function(r){return t.storedProcedure(n("LSMessagePointQuery"),e[0],e[5],e[1],void 0)},function(t){var n;return n=[e[0],void 0],r[7]=n[0],r[8]=n[1],n}]):t.sequence([function(o){return([t.i64.cast([0,2]),t.i64.cast([0,5]),t.i64.cast([0,205]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})||r[0]==="CTM")&&t.i64.eq(e[0],t.i64.cast([0,0]))?t.sequence([function(o){return r[14]=t.createArray(),r[15]=t.i64.of_int32(e[6].length),t.i64.gt(r[15],t.i64.cast([0,0]))?t.loopAsync(r[15],function(o){return r[28]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[28]).then(function(e){var t;return t=e,r[29]=t[0],r[30]=t[1],t})},function(e){return r[31]=r[29].get("contact_id"),r[32]=r[29].get("contact_type"),r[33]=r[29].get("contact_name"),r[34]=r[29].get("contact_profile_photo"),r[35]=(r[14].push(r[31]),r[14])}])}):t.resolve()},function(e){return r[16]=t.i64.of_int32(r[14].length),r[17]=t.createArray(),t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[14].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[14],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[18]=r[30]}])},function(e){return t.groupBy(t.filter(t.db.table(14).fetch(),function(e){return r[14].some(function(n){return t.i64.eq(e.contactId,n)})}),"threadKey").forEach(function(e){return t.i64.eq(e.group_count,r[16])?r[28]=(r[17].push(e.threadKey),r[17]):0})},function(e){return r[19]=t.createArray(),t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[17].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[17],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[20]=r[30]}])},function(e){return t.groupBy(t.filter(t.db.table(14).fetch(),function(e){return r[17].some(function(n){return t.i64.eq(e.threadKey,n)})}),"threadKey").forEach(function(e){return t.i64.eq(e.group_count,r[16])?r[28]=(r[19].push(e.threadKey),r[19]):0})},function(e){return t.sequence([function(e){return r[28]=t.createArray(),r[29]=t.i64.of_int32(r[19].length),t.i64.gt(r[29],t.i64.cast([0,0]))?t.loopAsync(r[29],function(e){return r[31]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[19],r[31]).then(function(e){var t;return t=e,r[32]=t[0],r[33]=t[1],t})},function(e){return r[34]=(r[28].push(t.i64.to_string(r[32])),r[28])}])}):t.resolve()},function(e){return r[30]=r[28].join(","),r[21]=r[30]}])},function(n){return t.islc(t.filter(t.db.table(9).fetchDesc([[[t.merge({lt:t.i64.cast([0,5])},{lt:t.i64.cast([0,206])},e[1])],[t.merge({lt:t.i64.cast([0,5])},{gt:t.i64.cast([0,206])},e[1])],[t.merge({lt:t.i64.cast([0,5])},e[1])],[t.merge({gt:t.i64.cast([0,5])},{lt:t.i64.cast([0,206])},e[1])],[t.merge({gt:t.i64.cast([0,5])},{gt:t.i64.cast([0,206])},e[1])],[t.merge({gt:t.i64.cast([0,5])},e[1])],[t.merge(t.i64.cast([0,5]),{lt:t.i64.cast([0,206])},e[1])],[t.merge(t.i64.cast([0,5]),{gt:t.i64.cast([0,206])},e[1])],[t.merge(t.i64.cast([0,5]),e[1])]],"threadTypeLastActivityTimestampMs"]),function(n){return r[19].some(function(e){return t.i64.eq(n.threadKey,e)})&&(t.i64.neq(n.threadType,t.i64.cast([0,5]))&&n.threadName===void 0||t.i64.eq(n.threadType,t.i64.cast([0,5]))&&n.threadName===e[2])&&(t.i64.neq(n.threadType,t.i64.cast([0,206]))||t.i64.le(n.authorityLevel,t.i64.cast([0,20])))&&t.i64.eq(n.threadType,e[1])}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[void 0,void 0,t.i64.cast([0,20])],r[22]=o[0],r[23]=o[1],r[24]=o[2],o):(n=l.item,a=[n.threadKey,n.clientThreadKey,n.authorityLevel],r[22]=a[0],r[23]=a[1],r[24]=a[2])})},function(o){return t.i64.neq(r[22],void 0)?t.sequence([function(o){return r[0]==="CTM"?t.sequence([function(o){return e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[40]=r[38].keys(),r[41]=t.i64.of_int32(r[40].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[40],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=r[38].get(r[47]),r[39].set(r[47],r[49])}])}):t.resolve()},function(e){return r[42]=r[39].get("product_extras"),r[42]?r[43]=!1:r[43]=!0,r[43]?t.resolve(r[44]=void 0):t.sequence([function(e){return r[46]=new t.Map,r[47]=r[42].keys(),r[48]=t.i64.of_int32(r[47].length),t.i64.gt(r[48],t.i64.cast([0,0]))?t.loopAsync(r[48],function(e){return r[49]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[47],r[49]).then(function(e){var t;return t=e,r[50]=t[0],r[51]=t[1],t})},function(e){return r[52]=r[42].get(r[50]),r[46].set(r[50],r[52])}])}):t.resolve()},function(e){return r[44]=r[46]}])},function(e){return r[44]!==void 0?(r[46]=r[44].get("__typename"),r[46]==="XMSGClickToMessengerAdExtras"?r[47]=r[44]:r[47]=void 0,r[47]!==void 0?(r[49]=r[47].get("page_id"),r[48]=r[49]):r[48]=void 0,r[45]=r[48]):r[45]=void 0,r[30]=r[45]}]):t.resolve(r[30]=void 0)},function(e){return r[31]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[31]).then(function(e){var t;return t=e,r[32]=t[0],t})},function(e){return r[33]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[33]).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[35]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[35]).then(function(e){var t;return t=e,r[36]=t[0],t})},function(o){return r[30]!==void 0?r[37]=t.i64.from_string(r[30]):r[37]=r[32],e[8]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,r[38]=t[0],t})},function(e){return r[39]=new t.Map,r[40]=r[38].keys(),r[41]=t.i64.of_int32(r[40].length),t.i64.gt(r[41],t.i64.cast([0,0]))?t.loopAsync(r[41],function(e){return r[45]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[40],r[45]).then(function(e){var t;return t=e,r[46]=t[0],r[47]=t[1],t})},function(e){return r[48]=r[38].get(r[46]),r[39].set(r[46],r[48])}])}):t.resolve()},function(e){return r[42]=r[39].get("product_extras"),r[42]?r[43]=!1:r[43]=!0,r[43]?t.resolve(r[44]=void 0):t.sequence([function(e){return r[45]=new t.Map,r[46]=r[42].keys(),r[47]=t.i64.of_int32(r[46].length),t.i64.gt(r[47],t.i64.cast([0,0]))?t.loopAsync(r[47],function(e){return r[48]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[46],r[48]).then(function(e){var t;return t=e,r[49]=t[0],r[50]=t[1],t})},function(e){return r[51]=r[42].get(r[49]),r[45].set(r[49],r[51])}])}):t.resolve()},function(e){return r[44]=r[45]}])},function(e){return r[44]!==void 0?(r[45]=r[44].get("__typename"),r[45]==="XMSGClickToMessengerAdExtras"?r[46]=r[44]:r[46]=void 0,r[46]!==void 0?(r[47]=new t.Map,r[47].set("product_extras",r[46]),r[47].set("client_thread_key",r[37]),r[47].set("offline_threading_id",t.i64.to_string(r[34])),r[47].set("admin_text_otid",t.i64.to_string(r[36])),r[48]=r[47].get("client_thread_key"),r[49]=t.toJSON(r[47]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[48]),t.i64.cast([0,1020]),r[49],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()):t.resolve()}]):t.resolve()}]):t.resolve()},function(o){return t.i64.eq(r[24],t.i64.cast([0,20])),t.sequence([function(o){return[t.i64.cast([0,5]),t.i64.cast([0,206])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(o){return t.storedProcedure(n("LSVerifyThreadRowExistsV2"),r[22],e[1],t.i64.cast([0,1]),t.i64.cast([0,20]))},function(e){return r[30]=t.i64.cast([0,20])}]):t.sequence([function(o){return t.i64.eq(r[24],t.i64.cast([0,80])),r[31]=t.i64.cast([0,40]),t.storedProcedure(n("LSVerifyThreadRowExists"),r[22],e[1],t.i64.cast([0,1]))},function(e){return r[30]=r[31]}])},function(e){var t;return t=[r[22],r[30]],r[28]=t[0],r[29]=t[1],t}])},function(e){var t;return t=[r[28],r[29]],r[26]=t[0],r[27]=t[1],t}]):t.sequence([function(o){return r[36]=t.i64.of_int32(e[6].length),t.i64.gt(r[36],t.i64.cast([0,0]))?t.loopAsync(r[36],function(o){return r[37]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=r[38].get("contact_id"),r[41]=r[38].get("contact_type"),r[42]=r[38].get("contact_name"),r[43]=r[38].get("contact_profile_photo"),t.storedProcedure(n("LSVerifyContactRowExists"),r[40],t.i64.cast([0,0]),r[43],r[42],r[41],void 0,void 0,void 0,void 0,!1,!1,t.i64.cast([0,0]),void 0,!1,t.i64.cast([0,20]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,5]))}])}):t.resolve()},function(o){var a,i;return r[28]=!0,r[28]?(i=["",void 0,void 0,void 0,void 0],r[29]=i[0],r[30]=i[1],r[31]=i[2],r[32]=i[3],r[33]=i[4]):(r[36]=(void 0).get("nullstate_description_text1"),r[36]!==void 0?r[37]=r[36]:r[37]="",r[38]=(void 0).get("nullstate_description_text2"),r[39]=(void 0).get("nullstate_description_text3"),r[40]=(void 0).get("nullstate_description_text4"),r[41]=(void 0).get("nullstate_description_text5"),a=[r[37],r[38],r[39],r[40],r[41]],r[29]=a[0],r[30]=a[1],r[31]=a[2],r[32]=a[3],r[33]=a[4]),t.sequence([function(o){return r[36]=new t.Map,r[36].set("nullstate_description_text1",r[29]),r[36].set("nullstate_description_text2",r[30]),r[36].set("nullstate_description_text3",r[31]),r[36].set("nullstate_description_text4",r[32]),r[36].set("nullstate_description_text5",r[33]),t.storedProcedure(n("LSLocalCreateOptimisticGroupThread"),r[14],"",e[2],!0,e[8]).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return t.storedProcedure(n("LSInsertNewMessageRange"),r[37],t.i64.cast([0,0]),t.i64.cast([2328,1316134911]),"","",t.i64.cast([0,0]),t.i64.cast([0,0]),!1,!1,void 0)},function(e){var t;return t=[r[37],void 0],r[34]=t[0],r[35]=t[1],t}])},function(e){var t;return t=[r[34],r[35]],r[26]=t[0],r[27]=t[1],t}])},function(e){var t;return t=[r[26],r[27]],r[12]=t[0],r[13]=t[1],t}]):t.sequence([function(o){return[t.i64.cast([0,19]),t.i64.cast([0,28])].some(function(n){return t.i64.eq(e[1],n)})?t.sequence([function(o){return r[16]=new t.Map,r[16].set("thread_fbid",e[0]),r[16].set("force_upsert",!1),r[16].set("use_open_messenger_transport",!1),r[16].set("sync_group",t.i64.cast([0,104])),r[16].set("metadata_only",!1),r[16].set("preview_only",!0),r[17]=r[16].get("thread_fbid"),r[18]=t.toJSON(r[16]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[17]),t.i64.cast([0,209]),r[18],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(t){var n;return n=[e[0],void 0],r[14]=n[0],r[15]=n[1],n}]):t.sequence([function(r){return t.i64.eq(e[1],t.i64.cast([0,5]))?t.storedProcedure(n("LSVerifyThreadRowExistsV2"),e[0],e[1],t.i64.cast([0,1]),t.i64.cast([0,20])):t.storedProcedure(n("LSVerifyThreadRowExists"),e[0],e[1],t.i64.cast([0,1]))},function(o){return t.i64.lt(r[5],t.i64.cast([0,60]))?t.storedProcedure(n("LSInsertNewMessageRange"),e[0],t.i64.cast([0,0]),t.i64.cast([2328,1316134911]),"","",t.i64.cast([0,0]),t.i64.cast([0,0]),!1,!1,void 0):t.resolve()},function(t){var n;return n=[e[0],void 0],r[14]=n[0],r[15]=n[1],n}])},function(e){var t;return t=[r[14],r[15]],r[12]=t[0],r[13]=t[1],t}])},function(e){var t;return t=[r[12],r[13]],r[7]=t[0],r[8]=t[1],t}])},function(o){return t.i64.eq(r[8]==null?r[5]:r[8],t.i64.cast([0,20]))?t.sequence([function(o){return t.i64.neq(e[4],void 0)?t.resolve(r[12]=e[4]):t.sequence([function(e){return t.storedProcedure(n("LSComputeOptimisticThreadCapabilities"),r[7]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[12]=r[13]}])},function(e){return t.forEach(t.db.table(9).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({capabilities:r[12]})})}]):t.resolve()},function(e){return t.db.table(9).fetch([[[r[7]]]]).next().then(function(e,n){var o,a,i,l,s=e.done,u=e.value;return s?(o=[r[7],t.i64.cast([0,0])],r[9]=o[0],r[10]=o[1],o):(n=u.item,n.isDisappearingMode?(a=[n.disappearingThreadKey,t.i64.cast([0,1024])],r[12]=a[0],r[13]=a[1]):(i=[r[7],n.mailboxType],r[12]=i[0],r[13]=i[1]),l=[r[12],r[13]],r[9]=l[0],r[10]=l[1])})},function(e){var t;return t=[r[9],r[10]],r[1]=t[0],r[2]=t[1],t}])},function(e){var t;return t=[r[1],r[2]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadViewStoredProcedure",e.__tables__=["threads","participants"],a.exports=e}),null);
__d("LSVerifyThreadViewStoredProcedure",["LSSynchronousPromise","LSVerifyThreadView","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyThreadView"),a.threadKey,a.threadType,a.threadName,a.threadPictureUrl,a.threadCapabilities,a.messageId,a.contacts,a.mailboxType,a.threadMetadata,a.enableCcThreadMetadataFix);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWDeleteAllDBs",["MAWEncryptionIndexedDbV2","MAWIndexedDBDeletion","cr:10030"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){n("cr:10030")&&await n("cr:10030").deleteIndexedDB(e),await o("MAWIndexedDBDeletion").deleteMAWPersistence(),(t==null?void 0:t.deleteEncryptionDB)===!0&&await o("MAWEncryptionIndexedDbV2").deleteEncryptionDB_UNSAFE(void 0,"delete_all_dbs")}l.deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING=e}),98);
__d("MAWEncryptionErrorHandler",["FBLogger","MAWSetupWorker","MWDeleteAllDBs","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e="MAWEARKeychainDecryptionError",t="error";try{return await o("MAWSetupWorker").terminateWorker(e),o("MWDeleteAllDBs").deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING(t,{deleteEncryptionDB:!0})}catch(o){var n=r("getErrorSafe")(o);r("FBLogger")("messenger_web").catching(n).mustfixThrow("Fail to delete dbs from: %s terminateWorkerReason: %s",t,e)}}l.handleEARKeychainError=e}),98);
__d("MWEBEntrypointsKillswitch.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({JEWEL_THREADLIST:"jewel_threadlist",IN_THREAD_GAP_UI:"in_thread_gap_ui",IN_THREAD_SCROLL_BANNER:"in_thread_scroll_banner",IN_THREAD_SEARCH:"in_thread_search",INBOX_INTERSTITIAL:"inbox_interstitial",INBOX_THREADLIST:"inbox_threadlist",INBOX_THREADLIST_UNIVERSAL_SEARCH:"inbox_threadlist_universal_search",MEDIA_GALLERY_RESTORE:"media_gallery_restore",EB_SETTINGS:"eb_settings",AUTO_RESTORE:"auto_restore",DYI:"dyi",IGD_NO_KILLSWITCH_APPLICABLE:"igd_no_killswitch_applicable",NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE:"not_an_entrypoint_no_killswitch_applicable",IN_DEVELOPMENT_ADD_A_TODO_COMMENT_WITH_A_TASK_ABOVE_THIS_TO_ADD_A_KILLSWITCH:"in_development_add_a_todo_comment_with_a_task_above_this_to_add_a_killswitch",PINNED_MESSAGES:"pinned_messages",BUMP_MESSAGES:"bump_messages",SIDEBAR_SETTINGS_PRIVACY_MENU:"sidebar_settings_privacy_menu",JEWEL_EVERGREEN_PIN_UPSELL:"jewel_evergreen_pin_upsell"}),l=e;i.default=l}),66);
__d("MWFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(t,n,r,o,a,i,l){"use strict";l.createFocusTable=o("FocusTable.react").createFocusTable,l.tabbableScopeQuery=o("focusScopeQueries").tabbableScopeQuery}),98);
__d("MWThreadListFocusableTable.react",["MWFocusTable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("MWFocusTable.react").createFocusTable(o("MWFocusTable.react").tabbableScopeQuery),c=u[0],d=u[1],m=u[2],p=d,_=m;function f(e){var t=o("react-compiler-runtime").c(2),n=e.children,r;return t[0]!==n?(r=s.jsx(c,{allowModifiers:!0,tabScopeQuery:o("MWFocusTable.react").tabbableScopeQuery,wrapX:!0,children:n}),t[0]=n,t[1]=r):r=t[1],r}l.MWThreadListFocusableTableRow=p,l.MWThreadListFocusableTableCell=_,l.MWThreadListFocusableTableScopeQuery=o("MWFocusTable.react").tabbableScopeQuery,l.MWThreadListFocusableTable=f}),98);
__d("MWXMenu.react",["cr:6941"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6941")}),98);
__d("MWXMenuItem.react",["BaseTheme.react","FDSTextWebUtils","MWXSvgIcon","MWXThreadThemeColor","MessengerWebUXLogger","cr:2466","cr:4318","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["icon","iconColor","loggingEvent","onClick","primaryColor","secondaryColor"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useMemo;function _(t){var a=o("react-compiler-runtime").c(39),i,l;a[0]!==t?(l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var u,d,m,p,_,g,h;if(a[3]!==i){var y=i;u=y.icon,d=y.iconColor,m=y.loggingEvent,p=y.onClick,g=y.primaryColor,h=y.secondaryColor,_=babelHelpers.objectWithoutPropertiesLoose(y,s),a[3]=i,a[4]=u,a[5]=d,a[6]=m,a[7]=p,a[8]=_,a[9]=g,a[10]=h}else u=a[4],d=a[5],m=a[6],p=a[7],_=a[8],g=a[9],h=a[10];var C=d instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?"primary":d,b=r("MessengerWebUXLogger").useInteractionLogger(),v;a[11]!==b||a[12]!==m||a[13]!==p?(v=function(t){p==null||p(t),m&&(b==null||b(m))},a[11]=b,a[12]=m,a[13]=p,a[14]=v):v=a[14];var S=v;if(n("cr:4318")!=null){var R;a[15]!==S||a[16]!==u||a[17]!==C||a[18]!==_||a[19]!==l?(R=c.jsx(n("cr:4318"),babelHelpers.extends({icon:u,iconColor:C,onClick:S},_,{ref:l})),a[15]=S,a[16]=u,a[17]=C,a[18]=_,a[19]=l,a[20]=R):R=a[20];var L;return a[21]!==d||a[22]!==R?(L=c.jsx(f,{iconColor:d,children:R}),a[21]=d,a[22]=R,a[23]=L):L=a[23],L}if(n("cr:2466")!=null){var E=u instanceof o("MWXSvgIcon").MWXSvgMenuItemIcon?u.component:u,k;a[24]!==g?(k=o("FDSTextWebUtils").getFDSHeadlineColor(g),a[24]=g,a[25]=k):k=a[25];var I;a[26]!==h?(I=o("FDSTextWebUtils").getFDSMetaColor(h),a[26]=h,a[27]=I):I=a[27];var T;a[28]!==S||a[29]!==C||a[30]!==_||a[31]!==l||a[32]!==E||a[33]!==k||a[34]!==I?(T=c.jsx(n("cr:2466"),babelHelpers.extends({icon:E,iconColor:C,isIconDecorative:!0,onClick:S,primaryColor_DEPRECATED:k,secondaryColor:I},_,{ref:l})),a[28]=S,a[29]=C,a[30]=_,a[31]=l,a[32]=E,a[33]=k,a[34]=I,a[35]=T):T=a[35];var D;return a[36]!==d||a[37]!==T?(D=c.jsx(f,{iconColor:d,children:T}),a[36]=d,a[37]=T,a[38]=D):D=a[38],D}return null}function f(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.iconColor,i,l;t[0]!==a?(l=a instanceof o("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":a.color},light:{"primary-icon":a.color},type:"VARIABLES"}:void 0,t[0]=a,t[1]=l):l=t[1],i=l;var s=i;if(s==null)return n;var u;return t[2]!==n||t[3]!==s?(u=c.jsx(r("BaseTheme.react"),{config:s,children:n}),t[2]=n,t[3]=s,t[4]=u):u=t[4],u}l.default=_}),98);
__d("MWXPopoverLoadingState.react",["cr:8235"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8235")}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4148"),s=o("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",e),u=s;l.default=u}),98);
__d("isMWEBEntrypointEnabled",["MWEBEntrypointsKillswitch.enum","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWEBEntrypointsKillswitch.enum").INBOX_INTERSTITIAL:return r("justknobx")._("2598");case r("MWEBEntrypointsKillswitch.enum").JEWEL_THREADLIST:return r("justknobx")._("2599");case r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST:return r("justknobx")._("2600");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI:return r("justknobx")._("2601");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SCROLL_BANNER:return r("justknobx")._("2602");case r("MWEBEntrypointsKillswitch.enum").AUTO_RESTORE:return r("justknobx")._("2603");case r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SEARCH:return r("justknobx")._("2604");case r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST_UNIVERSAL_SEARCH:return r("justknobx")._("2768");case r("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE:return r("justknobx")._("2841");case r("MWEBEntrypointsKillswitch.enum").PINNED_MESSAGES:return r("justknobx")._("2937");case r("MWEBEntrypointsKillswitch.enum").BUMP_MESSAGES:return r("justknobx")._("3682");case r("MWEBEntrypointsKillswitch.enum").SIDEBAR_SETTINGS_PRIVACY_MENU:return r("justknobx")._("4788");case r("MWEBEntrypointsKillswitch.enum").JEWEL_EVERGREEN_PIN_UPSELL:return r("justknobx")._("1878");case r("MWEBEntrypointsKillswitch.enum").DYI:case r("MWEBEntrypointsKillswitch.enum").EB_SETTINGS:case r("MWEBEntrypointsKillswitch.enum").IGD_NO_KILLSWITCH_APPLICABLE:case r("MWEBEntrypointsKillswitch.enum").NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE:case r("MWEBEntrypointsKillswitch.enum").IN_DEVELOPMENT_ADD_A_TODO_COMMENT_WITH_A_TASK_ABOVE_THIS_TO_ADD_A_KILLSWITCH:return!0}}l.default=e}),98);
__d("mwEBCheckIfEBKeysExistInDisk",["EBDB","FBLogger","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("gkx")("415");async function u(t){if(!s||t==="true")return Promise.resolve();try{var n=await o("EBDB").getEBDB(),a=await n.store("secure_encrypted_backups_client_state").count();r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{has_eb_keys_on_disk:(a>0).toString()}})}catch(t){var i=r("getErrorSafe")(t);throw r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{has_eb_keys_on_disk:"failed_to_open_db"}}),r("FBLogger")("wmi_eb").catching(i).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to check if EB keys exists"]))),i}}l.default=u}),98);
__d("useMWEBBackupStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBBackupStateQuery",selections:[{kind:"RequiredField",field:e,action:"LOG",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBBackupStateQuery",selections:[e]},params:{cacheID:"780695c71d771c39c4d001bd676844c7",id:null,metadata:{},name:"useMWEBBackupStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEBBackupStateUtil",["isMWEBEntrypointEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return!r("isMWEBEntrypointEnabled")(e)||t?0:n!=null?n:1}l.default=e}),98);
__d("useMWEBBackupState",["CometRelay","react-compiler-runtime","useMWEBBackupStateQuery.graphql","useMWEBBackupStateUtil"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a,i=o("react-compiler-runtime").c(2),l=t.entrypoint,s,u;i[0]===Symbol.for("react.memo_cache_sentinel")?(s=e!==void 0?e:e=n("useMWEBBackupStateQuery.graphql"),u={},i[0]=s,i[1]=u):(s=i[0],u=i[1]);var c=o("CometRelay").useClientQuery(s,u);return r("useMWEBBackupStateUtil")(l,(c==null?void 0:c.viewer)==null,c==null||(a=c.viewer)==null?void 0:a.backup_state)}l.default=s}),98);/*FB_PKG_DELIM*/
__d("E2EEMessagingLinkContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=c({inThread:!1,isSecure:!1});function _(e){var t=o("react-compiler-runtime").c(6),n=e.children,r=e.inThread,a=e.isSecure,i,l;t[0]!==r||t[1]!==a?(l={inThread:r,isSecure:a},t[0]=r,t[1]=a,t[2]=l):l=t[2],i=l;var u=i,c;return t[3]!==n||t[4]!==u?(c=s.jsx(p.Provider,{value:u,children:n}),t[3]=n,t[4]=u,t[5]=c):c=t[5],c}function f(){return d(p)}l.E2EEMessagingLinkContext=p,l.E2EEMessagingLinkProvider=_,l.useE2EEMessagingLink=f}),98);
__d("useGroupThreadViewParams",["getGroupThreadViewParams","react-compiler-runtime","useCometRouterState","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(3),t=r("useTopMostRouteCometEntityKey")(),n=r("useCometRouterState")(),a;return e[0]!==t||e[1]!==n?(a=r("getGroupThreadViewParams")(t,n),e[0]=t,e[1]=n,e[2]=a):a=e[2],a}l.default=e}),98);
__d("useMWInboxURIState",["CometRouteParams","CometRouteURL","ConstUriUtils","CurrentEnvironment","FBLogger","I64","LSMessagingThreadTypeUtil","MessengerURIConstants","ReQL","ReQLSuspense","gkx","isArmadillo","mwCMIsAnyCMThread","react-compiler-runtime","useCurrentRoute","useGroupThreadViewParams","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="Compose",c="PayFriendPicker",d="PayThread",m="SecureThread",p="Thread",_={Compose:u},f={PayFriendPicker:c,PayThread:d},g={SecureThread:m,Thread:p},h=babelHelpers.extends({},_,f,g),y="Null",C="Payment",b="People",v="Search",S="SearchMessages",R="SeeAllGroups",L="SeeAllPages",E="SeeAllPeople",k="SeeAllUnread",I="TeamworkSeeAllAnnouncementGroups",T="Recent",D="UnsupportedThread",x={Null:y,Payment:C,People:b,Search:v,SearchMessages:S,SeeAllGroups:R,SeeAllPages:L,SeeAllPeople:E,SeeAllUnread:k,TeamworkSeeAllAnnouncementGroups:I},$={Recent:T},P={UnsupportedThread:D},N=babelHelpers.extends({},x,$,P),M={type:N.Null},w="/?$";function A(e){var t=e.match(new RegExp(r("MessengerURIConstants").THREAD_PREFIX+"([^/]+)/?$"));if(t!=null)return decodeURIComponent(t[1])}var F=r("CurrentEnvironment").instagramdotcom?r("MessengerURIConstants").INSTAGRAM_DIRECT_PATH:r("CurrentEnvironment").facebookdotcom?r("MessengerURIConstants").FACEBOOK_PREFIX:"";function O(e){var t=new URL(e.url,window.location.origin),n=t.pathname,a=t.searchParams,i=new RegExp("^"+(F+"(/|$)"));if(r("CurrentEnvironment").facebookdotcom&&!i.test(n))throw r("FBLogger")("messenger_web").mustfixThrow("MWInboxURIState.NonMessengerState wrong CurrentEnvironment pattern for %s",F);var l=n.replace(i,"/"),u=a==null?void 0:a.get("fbid"),c=a==null?void 0:a.get("id");if(l.match(new RegExp("^"+r("MessengerURIConstants").PEOPLE_PATH))!=null)return{type:N.People};if(l.match(new RegExp("^"+r("MessengerURIConstants").PAYMENT_PATH))!=null)return{type:N.Payment};if(l.match(new RegExp("^"+r("MessengerURIConstants").SEARCH_PATH))!=null)return{type:N.Search};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_GROUP_VIEW))!=null)return{type:N.SeeAllGroups};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_CHAT_VIEW))!=null)return{type:N.SeeAllPeople};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_UNREAD_VIEW))!=null)return{type:N.SeeAllUnread};if(l.match(new RegExp("^"+r("MessengerURIConstants").TEAMWORK_ANNOUNCEMENT_GROUP_VIEW))!=null)return{type:N.TeamworkSeeAllAnnouncementGroups};if(l==="/read/"&&u!=null)return{type:N.Recent,uriStateDetails:{fbid:(s||(s=o("I64"))).of_string(u),type:h.Thread}};if(l.match(new RegExp("^"+(r("MessengerURIConstants").COMPOSE_SUBPATH+w)))!=null)return{type:N.Recent,uriStateDetails:{initialTogglePosition:"E2EEToggleOff",type:h.Compose}};if(l.match(new RegExp("^"+(r("MessengerURIConstants").PAYMENT_PATH+r("MessengerURIConstants").PAYMENT_PAY_PATH)))!=null)return{type:N.Recent,uriStateDetails:{fbid:void 0,type:c!=null?h.PayThread:h.PayFriendPicker}};var d=q(A(l));return d!=null?{type:N.Recent,uriStateDetails:{fbid:d,type:h.Thread}}:M}var B=r("gkx")("23433")||r("gkx")("22839");function W(e){return new URL(e,window.location.origin).pathname.split("/")}function q(e){try{return e!=null?(s||(s=o("I64"))).of_string_opt(e):void 0}catch(e){return}}function U(t){var n,a=o("react-compiler-runtime").c(40),l=(e||(e=r("useReStore")))(),u=r("useCurrentRoute")(),c=o("CometRouteURL").useRouteURLPath(),d=r("useGroupThreadViewParams")(),m;a[0]!==t?(m=q(t),a[0]=t,a[1]=m):m=a[1];var p=m,_=o("CometRouteParams").useRouteParams(),f=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(p!=null?p:(s||(s=o("I64"))).min_int)},[l,p],i.id+":317"))==null?void 0:n.threadType,g;a[2]!==f?(g=f!=null?r("mwCMIsAnyCMThread")(f):!1,a[2]=f,a[3]=g):g=a[3];var y=g,C;a[4]!==f?(C=f!=null?o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannelWithNoAccessibility(f):!1,a[4]=f,a[5]=C):C=a[5];var b=C;if(d!=null){var v;a[6]!==d.threadKey?(v=(s||(s=o("I64"))).of_string(d.threadKey),a[6]=d.threadKey,a[7]=v):v=a[7];var S;return a[8]!==v?(S={type:N.Recent,uriStateDetails:{fbid:v,type:h.Thread}},a[8]=v,a[9]=S):S=a[9],S}if(u==null)return M;if(!c.startsWith(F)&&!c.startsWith(r("MessengerURIConstants").GROUPS_PATH))throw r("FBLogger")("messenger_web").mustfixThrow("MWInboxURIState.NonMessengerState wrong groups path %s",c);var R=_.initial_e2ee_toggle_position==="1"||_.initial_e2ee_toggle_position===1||_.initial_e2ee_toggle_position===!0?"E2EEToggleOn":"E2EEToggleOff",L=u.url,E;if(a[10]!==l.tables.threads||a[11]!==R||a[12]!==b||a[13]!==y||a[14]!==u||a[15]!==p||a[16]!==f){E=Symbol.for("react.early_return_sentinel");e:{var k,I=L.substring(F.length),T=(k=o("ConstUriUtils").getUriOrThrow(I))==null?void 0:k.getPath().split("/");if(p!=null){if(T.length===4&&T[0]===""&&T[1]==="e2ee"&&T[2]==="t"&&r("isArmadillo")()){var D;a[18]!==p?(D={type:N.Recent,uriStateDetails:{fbid:p,type:h.SecureThread}},a[18]=p,a[19]=D):D=a[19],E=D;break e}if(f!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(f)){var x;a[20]!==u?(x=O(u),a[20]=u,a[21]=x):x=a[21],E=x;break e}if(y&&!B){E=M;break e}if(b){var $;a[22]!==p?($={fbid:p,type:N.UnsupportedThread},a[22]=p,a[23]=$):$=a[23],E=$;break e}var P;a[24]!==p?(P={type:N.Recent,uriStateDetails:{fbid:p,type:h.Thread}},a[24]=p,a[25]=P):P=a[25],E=P;break e}if(T==null){var w;a[26]!==u?(w=O(u),a[26]=u,a[27]=w):w=a[27],E=w;break e}switch(T.length){case 2:{if(T[1]==="new"){var A;a[28]!==R?(A={type:N.Recent,uriStateDetails:{initialTogglePosition:R,type:h.Compose}},a[28]=R,a[29]=A):A=a[29],E=A;break e}var W;a[30]!==u?(W=O(u),a[30]=u,a[31]=W):W=a[31],E=W;break e}case 3:{if(T[1]!=="t"){var U;a[32]!==u?(U=O(u),a[32]=u,a[33]=U):U=a[33],E=U;break e}if(T[2]===""){var V;a[34]!==u?(V=O(u),a[34]=u,a[35]=V):V=a[35],E=V;break e}var H=q(T[2]),G=H!=null?o("ReQLSuspense").first(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(H),i.id+":432"):null;if(H!=null&&G!=null&&!o("LSMessagingThreadTypeUtil").isArmadilloSecure(G==null?void 0:G.threadType)){var z;a[36]!==H?(z={type:N.Recent,uriStateDetails:{fbid:H,type:h.Thread}},a[36]=H,a[37]=z):z=a[37],E=z;break e}E=M;break e}case 0:case 1:default:{var j;a[38]!==u?(j=O(u),a[38]=u,a[39]=j):j=a[39],E=j;break e}}}a[10]=l.tables.threads,a[11]=R,a[12]=b,a[13]=y,a[14]=u,a[15]=p,a[16]=f,a[17]=E}else E=a[17];if(E!==Symbol.for("react.early_return_sentinel"))return E}l.MWInboxURIStateDetailsType=h,l.MWInboxURIStateTag=N,l.getRouteTokens=W,l.useMWInboxURIState=U}),98);
__d("MWInboxProvider.react",["react","react-compiler-runtime","useMWInboxURIState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.createContext,c=u();function d(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.threadKey,a=o("useMWInboxURIState").useMWInboxURIState(r),i;return t[0]!==n||t[1]!==a?(i=s.jsx(c.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.MWInboxProviderContext=c,l.MWInboxProvider=d}),98);
__d("EncryptedBackupsSupportedPlatformUtils",["$InternalEnum","FBLogger","MWInboxProvider.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext,u=n("$InternalEnum").Mirrored(["MESSENGER_DOT_COM","FACEBOOK_DOT_COM","FACEBOOK_INBOX","INSTAGRAM_DIRECT_INBOX"]),c=r("gkx")("23433"),d=r("gkx")("23434"),m=r("gkx")("24057"),p=r("gkx")("5575");function _(){var e=s(o("MWInboxProvider.react").MWInboxProviderContext);return m?u.INSTAGRAM_DIRECT_INBOX:c||p?u.MESSENGER_DOT_COM:(d||r("FBLogger")("wmi_eb").info("Unknown supported platform type. Falling back to facebook.com as Supported Platform type."),e!=null?u.FACEBOOK_INBOX:u.FACEBOOK_DOT_COM)}l.EncryptedBackupsSupportedPlatform=u,l.useMWEncryptedBackupsGetCurrentSupportedPlatform=_}),98);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("contact_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"add_messenger_contact",t.i64.cast([0,308]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactAddMessengerContactStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAddMessengerContact"),a.contactId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(n){return r[1]=a.threadSubtype,t.i64.eq(r[1],t.i64.cast([0,75]))?r[0]="interop":r[0]="inbox",t.i64.eq(r[1],t.i64.cast([0,75]))?r[2]=t.i64.cast([-1,4294967277]):r[2]=t.i64.cast([0,0]),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(n){var o=n.update,i=n.item;return o({folderName:r[0],parentThreadKey:r[2],igFolder:e[1],capabilities:t.i64.and_(a.capabilities,t.i64.cast([-1,4292870143]))})})},function(n){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,r[7]=n.clientThreadPk,t.db.table(276).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,t.i64.eq(r[2],t.i64.cast([-1,4294967277]))?r[8]=t.i64.cast([0,19]):r[8]=t.i64.cast([0,0]),t.forEach(t.db.table(276).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({folderType:r[8]})}))}))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[3]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[3]=r[7])})},function(o){return r[5]=new t.Map,r[5].set("thread_key",e[0]),r[5].set("sync_group",r[3]),r[5].set("ig_folder",e[1]),r[6]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"message_request",t.i64.cast([0,66]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure",e.__tables__=["threads","mi_act_mapping_table","client_threads"],a.exports=e}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticAcceptMessageRequest"),a.threadKey,a.igFolder);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWAttachmentBlob.react",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","WAMediaQplHelper","cr:332","interaction-tracing","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map,p=new Map;function _(e,t){m.set(e,{TAG:1,value:t})}function f(e){var t=m.get(e);return t!=null&&t.TAG===1}function g(t,a,i,l){var s=l!=null?l:t,u=m.get(s);if(u!=null){if(u.TAG===0)throw u.value;return u.value}i==null||i.addPoint("fetch_data_blob_from_backend_start",{string:{fetch_by:isFinite(t)?"mediaId":"hashedPlaintextHash"}});var p=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),_=(d||(d=r("performanceNow")))(),f=isFinite(t)?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:a,mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(t,10)),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(e){return i==null||i.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:e!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(e.size):void 0,description:a,fetch_by:"mediaId"}}),b(p,_,e!=null?"SUCCESS":"FAIL"),m.set(s,{TAG:1,value:e!=null?URL.createObjectURL(e):""}),i==null||i.addPoint("fetch_data_blob_url_set_in_cache"),(c||(c=n("Promise"))).resolve()}).catch(function(e){return i==null||i.endFail("fetch_data_blob_from_backend_fail",{string:{description:a,error:e.message,fetch_by:"mediaId"}}),b(p,_,"FAIL"),m.set(s,{TAG:1,value:""}),r("FBLogger")("messenger_web_media").catching(e).mustfix("Unable to getBlobUrlByMediaId"),(c||(c=n("Promise"))).resolve()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:a,plaintextHash:o("WAHashUtils").stringToPlaintextHash(t),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(e){return i==null||i.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:e!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(e.size):void 0,description:a,fetch_by:"hashedPlaintextHash"}}),b(p,_,e!=null?"SUCCESS":"FAIL"),m.set(s,{TAG:1,value:e!=null?URL.createObjectURL(e):""}),i==null||i.addPoint("fetch_data_blob_url_set_in_cache"),n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:t,idbBlob:e}),(c||(c=n("Promise"))).resolve()}).catch(function(e){return i==null||i.endFail("fetch_data_blob_from_backend_fail",{string:{description:a,error:e.message,fetch_by:"hashedPlaintextHash"}}),b(p,_,"FAIL"),m.set(s,{TAG:1,value:""}),r("FBLogger")("messenger_web_media").catching(e).mustfix("Unable to getBlobDataUrlByHashedPlaintextHash"),(c||(c=n("Promise"))).resolve()});throw(e||(e=o("PromiseAnnotate"))).setDisplayName(f,"MAWAttachmentBlob.getBlobDataUrl"),m.set(s,{TAG:0,value:f}),f}function h(e,t,n){if(e==null)return r("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because attachment is null, from %s",t),n==null||n.endFail("attachment_is_null",{string:{description:t}}),"";if((s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))){var a,i=(a=C(e))!=null?a:"";return i==null||i.length===0?(r("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because optimistic attachment url is null or empty, from %s",t),n==null||n.endFail("no_optimistic_attachment_url",{string:{description:t}}),""):(n==null||n.addPoint("return_optimistic",{string:{description:t}}),i)}return g(e.attachmentFbid,t,n)}function y(e,t,n,a,i){var l="fetch_"+t+"_xma_blob",c={string:{description:n}};if(e==null)return a==null||a.endFail(l+"_attachment_is_null",c),"";if((s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))&&t==="preview"){var d=C(e);return d==null||d.length===0?(r("FBLogger")("messenger_web_media").mustfix("Unable to getInfoUrlXMA because optimistic attachment url is null or empty, from %s",n),a==null||a.endFail(l+"_no_optimistic_attachment_url",c),""):(a==null||a.addPoint(l+"_return_optimistic",c),d)}var m=i!=null?i:e.attachmentFbid+t,_=p.get(m);if(_!=null){if(_.TAG===0)throw _.value;return _.value}var f;switch(t){case"preview":f=e.xmaPreviewFbid;break;case"header":f=e.xmaHeaderImageFbid;break;case"favicon":f=e.xmaFaviconFbid;break}if(f==null)throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed to getInfoUrlXMA because xma does not have required data. xmaId is %s, info type is %s, from %s",e.attachmentFbid,t,n);return g(f,n,a)}function C(e){return e==null?void 0:e.previewUrl}function b(e,t,n){var o=(d||(d=r("performanceNow")))();e.forEach(function(e){e.addSubspan("MAWFetchAttachmentBlob","AppTiming",t,o,{action:n,full_duration:(o-t)/1e3})})}l.setEagerAttachmentUrl=_,l.isEagerAttachmentUrlDone=f,l.getAttachmentBlobNonOptional_CausesSuspense=g,l.getAttachmentBlob_CausesSuspense=h,l.getInfoUrlXMA_CausesSuspense=y}),98);
__d("MWEBRestoreDialogWrapperQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24825865927022420"}),null);
__d("MWEBRestoreDialogWrapperQuery$Parameters",["MWEBRestoreDialogWrapperQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWEBRestoreDialogWrapperQuery_facebookRelayOperation"),metadata:{},name:"MWEBRestoreDialogWrapperQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MAWEncryptedBackupsRestoreDialog.entrypoint",["JSResourceForInteraction","MWEBRestoreDialogWrapperQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("MWEBRestoreDialogWrapperQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWEBRestoreDialogWrapper.react").__setRef("MAWEncryptedBackupsRestoreDialog.entrypoint")};l.default=e}),98);
__d("MAWGetAttachmentThumbnailBlob",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","interaction-tracing","isStringNullOrEmpty","nullthrows","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map,p=new Map;function _(e,t){m.set(e,{TAG:"done",url:t})}function f(e,t,n,a){var i;if(e==null)return r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because attachment is null, from %s",t),n==null||n.endFail("attachment_is_null",{string:{description:t}}),"";if((u||(u=o("I64"))).equal(e.authorityLevel,(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))){var l,s=h(e);return s==null||s.length===0?(r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because optimistic attachment url is null or empty, from %s",t),n==null||n.endFail("no_optimistic_attachment_url",{string:{description:t}}),""):(n==null||n.addPoint("return_optimistic",{string:{description:t}}),p.set((l=e.offlineAttachmentId)!=null?l:e.attachmentFbid,s),s)}var _=a!=null?a:e.attachmentFbid,f=m.get(_),g=p.get((i=e.offlineAttachmentId)!=null?i:e.attachmentFbid);if(f!=null){if(f.TAG==="loading"){if(g!=null)return g;throw f.urlPromise}var b=r("isStringNullOrEmpty")(f.url);return b&&(n==null||n.addPoint("attachment_state_preview_url_is_null_or_empty",{string:{description:t}})),f.url}var v=isFinite(e.attachmentFbid)?C(e.attachmentFbid,t,n,_):y(e.attachmentFbid,t,n,_);if(m.set(_,{TAG:"loading",urlPromise:v}),g!=null)return g;throw(d||(d=o("PromiseAnnotate"))).setDisplayName(v,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobDataUrl"),v}function g(e,t,n,r){var a=r!=null?r:e,i=m.get(a);if(i!=null){if(i.TAG==="loading")throw i.urlPromise;return i.url}var l=isFinite(e)?C(e,t,n,a):y(e,t,n,a);throw m.set(a,{TAG:"loading",urlPromise:l}),(d||(d=o("PromiseAnnotate"))).setDisplayName(l,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobByAttachmentId"),l}function h(e){return e==null?void 0:e.previewUrl}function y(t,a,i,l){i==null||i.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:a}});var u=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),c=(s||(s=r("performanceNow")))(),d=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByHashedPlaintextHash",{description:a,plaintextHash:o("WAHashUtils").stringToPlaintextHash(t),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(t){return b(u,c,t?"SUCCESS":"FAIL"),t?i==null||i.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:a}}):(i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:"empty-url"}}),r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",a)),m.set(l,{TAG:"done",url:r("nullthrows")(t)}),i==null||i.addPoint("fetch_thumbnail_blob_url_set_in_cache"),(e||(e=n("Promise"))).resolve()}).catch(function(t){return i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:t.message}}),b(u,c,"FAIL"),m.set(l,{TAG:"done",url:""}),r("FBLogger")("messenger_web_media").catching(t).warn("Unable to getThumbnailBlobDataUrlByHashedPlaintextHash, from %s",a),(e||(e=n("Promise"))).resolve()});return d}function C(t,a,i,l){i==null||i.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:a}});var u=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),c=(s||(s=r("performanceNow")))(),d=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByMediaId",{description:a,mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(t,10)),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(t){return b(u,c,t?"SUCCESS":"FAIL"),t?i==null||i.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:a}}):(i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:"empty-url"}}),r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",a)),m.set(l,{TAG:"done",url:r("nullthrows")(t)}),i==null||i.addPoint("fetch_thumbnail_blob_url_set_in_cache"),(e||(e=n("Promise"))).resolve()}).catch(function(t){return i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:t.message}}),b(u,c,"FAIL"),m.set(l,{TAG:"done",url:""}),r("FBLogger")("messenger_web_media").catching(t).warn("Unable to getThumbnailBlobDataUrlByMediaId, from %s",a),(e||(e=n("Promise"))).resolve()});return d}function b(e,t,n){var o=(s||(s=r("performanceNow")))();e.forEach(function(e){e.addSubspan("MAWFetchAttachmentThumbnailBlob","AppTiming",t,o,{action:n,full_duration:(o-t)/1e3})})}l.setEagerThumbnailUrl=_,l.getThumbnailBlob_CausesSuspense=f,l.getThumbnailBlobByAttachmentId_CausesSuspense=g}),98);
__d("MAWMiActOnActThreadReadyDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWMiActOnActThreadReady").__setRef("MAWMiActOnActThreadReadyDeferred");function s(t,n,r,o){return e.load().then(function(e){var a=e.onActThreadReady;return a(t.tables,n,r,o)})}l.default=s}),98);
__d("MWChatEncryptedBackupsQPLSource.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({JEWEL_RESTORE_SOFTBLOCK:"jewel_restore_softblock",JEWEL_THREADLIST_QP:"jewel_threadlist_qp",JEWEL_THREADLIST_ONBOARDING_QP:"jewel_threadlist_onboarding_qp",JEWEL_THREADLIST_QP_WITH_PIN:"jewel_threadlist_qp_with_pin",JEWEL_THREADLIST_PERSISTENT_BANNER:"jewel_threadlist_persistent_banner",JEWEL_ONBOARDING_SOFTBLOCK:"jewel_onboarding_softblock",JEWEL_ONBOARDING_HARDBLOCK:"jewel_onboarding_hardblock",JEWEL_EVERGREEN_PIN_UPSELL:"jewel_evergreen_pin_upsell",CHAT_TAB_SOFTBLOCK:"chat_tab_softblock",CHAT_TAB_HARDBLOCK:"chat_tab_hardblock",CHAT_TAB_ONBOARDING_QP:"chat_tab_onboarding_qp",CHAT_TAB_QP:"chat_tab_qp",INBOX_INTERSTITIAL_SOFTBLOCK:"inbox_interstitial_softblock",INBOX_INTERSTITIAL_HARDBLOCK:"inbox_interstitial_hardblock",INBOX_INTERSTITIAL_EVERGREEN_PIN_UPSELL:"inbox_interstitial_evergreen_pin_upsell",INBOX_THREADLIST_QP:"inbox_threadlist_qp",INBOX_THREADLIST_ONBOARDING_QP:"inbox_threadlist_onboarding_qp",INBOX_THREADLIST_PERSISTENT_BANNER:"inbox_threadlist_persistent_banner",INBOX_THREADLIST_QP_WITH_PIN:"inbox_threadlist_qp_with_pin",IN_THREAD_SCROLL_PERSISTENT_BANNER:"in_thread_scroll_persistent_banner",IN_THREAD_GAP_UI:"in_thread_gap_ui",IN_THREAD_QP:"in_thread_qp",EB_SETTINGS:"eb_settings",AUTO_RESTORE:"auto_restore",DYI:"dyi",UNKNOWN:"unknown",INBOX_MESSAGE_SEARCH:"inbox_message_search",SETTINGS_RESTORE_HOLDOUT_MENU_ITEM:"settings_restore_holdout_menu_item",UNIVERSAL_MESSAGE_SEARCH:"universal_message_search",MEDIA_GALLERY_RESTORE:"media_gallery_restore",EB_WEB_ONBOARDING_DIALOG:"eb_web_onboarding_dialog",IG_SETTINGS:"ig_settings",IG_INBOX_AUTO_RESTORE:"ig_inbox_auto_restore",CHAT_SETTINGS:"chat_settings"}),l=e;i.default=l}),66);
__d("MWEBFlowSourceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({source:null});l.default=u}),98);
__d("MWEBQPAlphaIconSmall.react",["ix","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e=r("gkx")("23433");function u(){var t=s(e?"230229":"398256");return t}l.getMWEBQPAlphaIconSmallProperties=u}),98);
__d("MWEBUpsellDismissedEnum.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({NOT_DISMISSED:0,UPSELLS_DISMISSED:1,ALL_DISMISSED:2});i.MWEBUpsellDismissedStateEnum=e}),66);
__d("MWEncryptedBackupsDeferLocalStorageUpsell",["$InternalEnum","FBLogger","MWEncryptedBackupsSharedState","ReQL","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["SOFTBLOCK_JEWEL_AND_CHAT_TAB","QP_JEWEL","QP_WITH_PIN_JEWEL","PERSISTENT_BANNER_JEWEL"]),u=-1,c=720*60*1e3,d=1440*60*1e3,m=4320*60*1e3;function p(e){switch(e){case s.SOFTBLOCK_JEWEL_AND_CHAT_TAB:return{countdownInMS:d,impressionsCountKey:"mw_encrypted_backups_soft_block_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_soft_block_last_impression_time_key",maxImpressionLimit:5};case s.QP_JEWEL:return{countdownInMS:c,impressionsCountKey:"mw_encrypted_backups_qp_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_qp_jewel_last_impression_time_key",maxImpressionLimit:1};case s.QP_WITH_PIN_JEWEL:return{countdownInMS:c,impressionsCountKey:"mw_encrypted_backups_qp_with_pin_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_qp_with_pin_jewel_last_impression_time_key",maxImpressionLimit:1};case s.PERSISTENT_BANNER_JEWEL:return{countdownInMS:m,impressionsCountKey:"mw_encrypted_backups_banner_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_banner_jewel_last_impression_time_key",maxImpressionLimit:1}}}function _(e){var t=e.db,n=e.upsellType,a=p(n),i=a.impressionsCountKey,l=a.lastImpressionTimeKey;r("promiseDone")(o("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:t,stateKey:l,stateValue:Date.now().toString()}).then(async function(){var e,n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.experiences_shared_state)),r=(e=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:t,sharedStateTable:n,stateKey:i}))!=null?e:"0";await o("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:t,stateKey:i,stateValue:(+r+1).toString()})}),function(){},function(){var e="[Encrypted Backups] Failed to defer EB upsell "+n;r("FBLogger")("wmi_eb").mustfix(e)})}function f(t){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n,a=p(t),i=a.lastImpressionTimeKey;(n=(e||(e=r("WebStorage"))).getLocalStorage())==null||n.removeItem(i)}}function g(e){var t,n=e.db,r=e.sharedStateTable,a=e.upsellType,i=p(a),l=i.impressionsCountKey;return(t=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:n,sharedStateTable:r,stateKey:l}))!=null?t:"0"}l.MWEncryptedBackupsDeferableUpsellType=s,l.INFINITE_IMPRESSIONS_LIMIT=u,l.getLocalStorageKeys=p,l.updateUpsellEntry=_,l.deleteEntry=f,l.getUpsellImpressions=g}),98);
__d("MWEncryptedBackupsOnboardingType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["WEB_ONLY_ONBOARDING","NEW_USER_ONBOARDING","AUTO_EB","PIN_UPSELL"]),l=e;i.default=l}),66);
__d("MWEncryptedBackupsRetrieveQplLoggingAnnotations",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","Promise","ReQL","gkx","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("requireDeferred")("MWEBUseLocalStorage").__setRef("MWEncryptedBackupsRetrieveQplLoggingAnnotations"),d=r("gkx")("609");function m(t){var a=t.db,i=t.onFetch,l=t.upsellType;r("promiseDone")((u||(u=n("Promise"))).all([o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.experiences_shared_state)),o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state))]),function(t){var n=t[0],u=t[1],m=u[0],p=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),_=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:a,sharedStateTable:n,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_ONBOARDED_SUCCESSFULLY}),f=o("MWEncryptedBackupsSharedState").getIsEntryPresentInSharedState({db:a,sharedStateTable:n,stateKey:"auto_restored"});c.onReady(function(t){var u=t.mwEBGetIsLocalStorageEntryValuePresent,c=t.mwEBGetLocalStorageEntryValue,g=c(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE),h=u(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION),y=u(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2),C=_!=null,b=l&&o("MWEncryptedBackupsDeferLocalStorageUpsell").getUpsellImpressions({db:a,sharedStateTable:n,upsellType:l}),v=m!=null&&(e||(e=o("I64"))).equal(m.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE));i({ebsmWiped:g!=null?g:"false",firstUpsellTime:p,hasEbKeysLocally:f?"false":v.toString(),hasEBSM:d.toString(),hasPDB:"false",hasUserOnboardedBefore:C.toString(),hasUserRestoredBefore:h.toString(),hasUserRestoredBeforeTemp:y.toString(),impressionsCount:b!=null?b:"0"})})},function(){r("FBLogger")("wmi_eb").mustfix("[Encrypted Backups] Failed to fetch QPL annotations from Shared State")})}l.encryptedBackupsRetrieveQplLoggingAnnotations=m}),98);
__d("MWEncryptedBackupsThreadListQPWrapper.react",["$InternalEnum","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=n("$InternalEnum").Mirrored(["JEWEL","THREAD_LIST","CHAT_TAB"]);function c(e){var t=o("react-compiler-runtime").c(4),n=e.children,r=e.testid,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x1n2onr6 x1vjfegm"},t[0]=a):a=t[0];var i;return t[1]!==n||t[2]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{"data-testid":void 0,children:n})),t[1]=n,t[2]=r,t[3]=i):i=t[3],i}l.MWEncryptedBackupsQPTrigger=u,l.MWEncryptedBackupsThreadListQPWrapper=c}),98);
__d("MWFDSArrowLeft.svg.react",["cr:21539"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21539")}),98);
__d("MWLogInboxFiltersInteraction",["ExecutionEnvironment","ifRequireable","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(30610001,"3003");function u(t){if((e||(e=r("ExecutionEnvironment"))).isInBrowser){var n=d();n==null||n.cancelTrace(t,!0)}}function c(){if((e||(e=r("ExecutionEnvironment"))).isInBrowser){var t=d();t==null||t.forceCompleteTrace()}}function d(){if((e||(e=r("ExecutionEnvironment"))).isInBrowser)return r("ifRequireable")("InteractionTracing",function(e){return Array.from(e.getPendingInteractions()).find(function(e){var t,n=e.getTrace()||{},r=n.tracePolicy,o=r===void 0?"":r;if(((t=e.getTrace())==null?void 0:t.qplEvent)===s&&(o.includes("comet.jewel.messenger.")||o.includes("comet.messenger.inbox.")))return!0})})}l.logInboxFiltersNavigationCancel=u,l.logInboxFiltersNavigationComplete=c,l.getInboxFiltersNavigationTrace=d}),98);
__d("MWXTheme.react",["cr:7379","cr:7380","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["displayMode"],s,u=s||(s=o("react"));function c(t){var r=t.displayMode,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return n("cr:7380")!=null?u.jsx(n("cr:7380"),babelHelpers.extends({displayMode:r},o)):n("cr:7379")!=null?u.jsx(n("cr:7379"),babelHelpers.extends({theme:r},o)):null}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("useMWXButtonSpinner",["fbt","FDSProgressRing.react","MWXSpinner.react","MWXTheme.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=r("react"));function c(e){var t=o("react-compiler-runtime").c(2),n=e.children,a;return t[0]!==n?(a=r("MWXTheme.react")!=null?u.jsx(r("MWXTheme.react"),{displayMode:"dark",children:n}):null,t[0]=n,t[1]=a):a=t[1],a}function d(e,t,n){var a=o("react-compiler-runtime").c(8),i=n===36,l=r("FDSProgressRing.react")!=null&&i?20:16;if(t===!0){var d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Loading..."),a[0]=d):d=a[0];var m;return a[1]!==l?(m=u.jsx(r("FDSProgressRing.react"),{"aria-label":d,color:"disabled",duration:2,size:l,type:"estimated"}),a[1]=l,a[2]=m):m=a[2],m}var p=e!=="secondary"?c:u.Fragment,_;a[3]!==l?(_=u.jsx(r("MWXSpinner.react"),{color:"dark",size:l}),a[3]=l,a[4]=_):_=a[4];var f;return a[5]!==p||a[6]!==_?(f=u.jsx(p,{children:_}),a[5]=p,a[6]=_,a[7]=f):f=a[7],f}l.default=d}),226);
__d("MWXButtonGroup.react",["cr:227","cr:6106","react","react-compiler-runtime","useMWXButtonSpinner"],(function(t,n,r,o,a,i,l){"use strict";var e=["icon","loading","type"],s=["icon","loading"],u,c=u||(u=o("react"));function d(t){var a=o("react-compiler-runtime").c(36),i=t.align,l=t.direction,u=t.expanding,d=t.paddingHorizontal,m=t.primary,p=t.secondary,_=t.secondaryReduceEmphasis,f=l===void 0?"backward":l,g=u===void 0?!1:u,h=d===void 0?0:d,y=_===void 0?!0:_,C=r("useMWXButtonSpinner")("primary",t.primary.disabled);if(n("cr:6106")!=null){var b,v,S,R,L;a[0]!==m?(R=m.icon,v=m.loading,L=m.type,S=babelHelpers.objectWithoutPropertiesLoose(m,e),a[0]=m,a[1]=v,a[2]=S,a[3]=R,a[4]=L):(v=a[1],S=a[2],R=a[3],L=a[4]);var E=L==="destructive"?"fdsOverride_negative":L,k=h===10?8:h,I=i!=null?i:"end",T=v===!0?C:void 0,D=(b=R)==null?void 0:b.component,x;a[5]!==S||a[6]!==T||a[7]!==D||a[8]!==E?(x=babelHelpers.extends({},S,{addOnPrimary:T,icon:D,type:E}),a[5]=S,a[6]=T,a[7]=D,a[8]=E,a[9]=x):x=a[9];var $;if(a[10]!==p||a[11]!==y){var P;$=p!=null?babelHelpers.extends({},p,{icon:(P=p.icon)==null?void 0:P.component,reduceEmphasis:y,type:"secondary"}):null,a[10]=p,a[11]=y,a[12]=$}else $=a[12];var N;return a[13]!==f||a[14]!==g||a[15]!==k||a[16]!==I||a[17]!==x||a[18]!==$?(N=c.jsx(n("cr:6106"),{align:I,direction:f,expanding:g,paddingHorizontal:k,primary:x,secondary:$}),a[13]=f,a[14]=g,a[15]=k,a[16]=I,a[17]=x,a[18]=$,a[19]=N):N=a[19],N}if(n("cr:227")!=null){var M,w,A,F;a[20]!==m?(F=m.icon,w=m.loading,A=babelHelpers.objectWithoutPropertiesLoose(m,s),a[20]=m,a[21]=w,a[22]=A,a[23]=F):(w=a[21],A=a[22],F=a[23]);var O=w===!0?C:void 0,B=(M=F)==null?void 0:M.originalComponent,W;a[24]!==A||a[25]!==O||a[26]!==B?(W=babelHelpers.extends({},A,{addOnStart:O,icon:B}),a[24]=A,a[25]=O,a[26]=B,a[27]=W):W=a[27];var q;if(a[28]!==p){var U;q=p!=null?babelHelpers.extends({},p,{icon:(U=p.icon)==null?void 0:U.originalComponent}):null,a[28]=p,a[29]=q}else q=a[29];var V;return a[30]!==i||a[31]!==f||a[32]!==h||a[33]!==W||a[34]!==q?(V=c.jsx(n("cr:227"),{align:i,direction:f,paddingHorizontal:h,primary:W,secondary:q}),a[30]=i,a[31]=f,a[32]=h,a[33]=W,a[34]=q,a[35]=V):V=a[35],V}return null}l.default=d}),98);
__d("MWXIconArrowLeft",["MWXSvgIcon","SVGIcon","cr:22195","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22195")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconChevronRight",["MWXSvgIcon","SVGIcon","cr:22268","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22268")),r("gkx")("23219"));l.default=e}),98);
__d("MWXImage.react",["cr:1261","cr:2838","cr:6682","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["objectFit","src"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(15),a,i,l;if(r[0]!==t?(a=t.objectFit,l=t.src,i=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]),n("cr:6682")!=null){var s;return r[4]!==a||r[5]!==i||r[6]!==l?(s=u.jsx(n("cr:6682"),babelHelpers.extends({objectFit:a,src:l},i)),r[4]=a,r[5]=i,r[6]=l,r[7]=s):s=r[7],s}if(typeof l=="string"){var c;return r[8]!==a||r[9]!==i||r[10]!==l?(c=n("cr:2838")!=null?u.jsx(n("cr:2838"),babelHelpers.extends({objectFit:a,src:l},i)):null,r[8]=a,r[9]=i,r[10]=l,r[11]=c):c=r[11],c}else{var d;return r[12]!==i||r[13]!==l?(d=n("cr:1261")!=null?u.jsx(n("cr:1261"),babelHelpers.extends({src:l},i)):null,r[12]=i,r[13]=l,r[14]=d):d=r[14],d}}l.default=c}),98);
__d("MWXLink.react",["E2EEMessagingLinkContext.react","cr:6023","cr:820","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","encryptedLink"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(15),a,i,l;r[0]!==t?(i=t.ref,a=t.encryptedLink,l=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]);var s=o("E2EEMessagingLinkContext.react").useE2EEMessagingLink(),c=s.isSecure,d;r[4]!==a||r[5]!==c?(d=c||a===!0?{disableLinkShimAndTracking_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:!0,disableLinkShimForFollowLinkButton_DO_NOT_USE_OR_SEE_YOU_AT_THE_PRIVACY_SEV:!0,rel:["noreferrer","noopener","nofollow"]}:{},r[4]=a,r[5]=c,r[6]=d):d=r[6];var m=d;if(n("cr:6023")){var p;return r[7]!==m||r[8]!==i||r[9]!==l?(p=u.jsx(n("cr:6023"),babelHelpers.extends({},l,m,{ref:i})),r[7]=m,r[8]=i,r[9]=l,r[10]=p):p=r[10],p}if(n("cr:820")){var _;return r[11]!==m||r[12]!==i||r[13]!==l?(_=u.jsx(n("cr:820"),babelHelpers.extends({},l,m,{ref:i})),r[11]=m,r[12]=i,r[13]=l,r[14]=_):_=r[14],_}return null}l.default=c}),98);
__d("MWXQPCard.react",["MWXIconStrict.react","MWXImage.react","cr:10403","cr:2832","cr:6676","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["addOnPrimary","addOnSecondary","icon","ref","secondaryReduceEmphasis","xstyle"],s,u,c=u||(u=o("react")),d={fdsRoot:{boxShadow:"xnw9j1v",$$css:!0},fdsRootMargin:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginTop:"x14vqqas",marginInlineEnd:"xbmvrgn",marginBottom:"xod5an3",marginInlineStart:"x1diwwjn",$$css:!0},mdsRootMargin:{marginTop:"xw7yly9",marginInlineEnd:"x1ys307a",marginBottom:"x1yztbdb",marginInlineStart:"xyqm7xq",$$css:!0}};function m(t){var a=o("react-compiler-runtime").c(41),i,l,u,m,p,_,f;a[0]!==t?(i=t.addOnPrimary,l=t.addOnSecondary,u=t.icon,p=t.ref,_=t.secondaryReduceEmphasis,f=t.xstyle,m=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l,a[3]=u,a[4]=m,a[5]=p,a[6]=_,a[7]=f):(i=a[1],l=a[2],u=a[3],m=a[4],p=a[5],_=a[6],f=a[7]);var g;if(u!=null)e:switch(u.type){case"image":{var h;a[8]!==u.props?(h=c.jsx(r("MWXImage.react"),babelHelpers.extends({},u.props)),a[8]=u.props,a[9]=h):h=a[9],g=h;break e}case"icon":{var y;a[10]!==u.props?(y=c.jsx(r("MWXIconStrict.react"),babelHelpers.extends({},u.props)),a[10]=u.props,a[11]=y):y=a[11],g=y;break e}default:}if(n("cr:2832")!=null){var C;a[12]!==f?(C=(s||(s=r("stylex"))).props(d.mdsRootMargin,f),a[12]=f,a[13]=C):C=a[13];var b;if(a[14]!==i){var v;b=i&&{disabled:i.disabled,icon:(v=i.icon)==null?void 0:v.originalComponent,label:i.label,linkProps:i.linkProps,onPress:i.onPress,reduceEmphasis:i.reduceEmphasis,type:i.type},a[14]=i,a[15]=b}else b=a[15];var S;a[16]!==l?(S=l&&{disabled:l.disabled,label:l.label,linkProps:l.linkProps,onPress:l.onPress,reduceEmphasis:l.reduceEmphasis},a[16]=l,a[17]=S):S=a[17];var R;a[18]!==g||a[19]!==m||a[20]!==b||a[21]!==S?(R=c.jsx(n("cr:2832"),babelHelpers.extends({},m,{headlineNumberOfLines:2,icon:g,primaryCallToAction:b,secondaryCallToAction:S})),a[18]=g,a[19]=m,a[20]=b,a[21]=S,a[22]=R):R=a[22];var L;return a[23]!==p||a[24]!==C||a[25]!==R?(L=c.jsx("div",babelHelpers.extends({},C,{ref:p,children:R})),a[23]=p,a[24]=C,a[25]=R,a[26]=L):L=a[26],L}else if(n("cr:10403")!=null&&n("cr:6676")!=null){var E;a[27]!==f?(E=(s||(s=r("stylex"))).props(d.fdsRoot,d.fdsRootMargin,f),a[27]=f,a[28]=E):E=a[28];var k;a[29]!==i||a[30]!==l||a[31]!==_?(k=i&&c.jsx(n("cr:6676"),{align:"justify",expanding:!0,paddingHorizontal:12,primary:i,secondary:l,secondaryReduceEmphasis:_}),a[29]=i,a[30]=l,a[31]=_,a[32]=k):k=a[32];var I;a[33]!==g||a[34]!==m||a[35]!==k?(I=c.jsx(n("cr:10403"),babelHelpers.extends({},m,{addOnPrimary:k,icon:g,level:4,type:"primary"})),a[33]=g,a[34]=m,a[35]=k,a[36]=I):I=a[36];var T;return a[37]!==p||a[38]!==E||a[39]!==I?(T=c.jsx("div",babelHelpers.extends({},E,{ref:p,children:I})),a[37]=p,a[38]=E,a[39]=I,a[40]=T):T=a[40],T}return null}l.default=m}),98);
__d("MWXRow.react",["cr:2667","cr:2922","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["paddingHorizontal","paddingTop","paddingVertical","spacing","spacingHorizontal","spacingVertical"],u,c=u||(u=o("react"));function d(e){return e===10?12:e}function m(e){switch(e){case 10:return 12;case 20:return 16;default:return e}}function p(e){return e===10?12:e}function _(t){var r=o("react-compiler-runtime").c(35),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:2667")!=null){var l,u,_,f,g,h,y;if(r[3]!==a){var C=a;u=C.paddingHorizontal,_=C.paddingTop,f=C.paddingVertical,g=C.spacing,h=C.spacingHorizontal,y=C.spacingVertical,l=babelHelpers.objectWithoutPropertiesLoose(C,s),r[3]=a,r[4]=l,r[5]=u,r[6]=_,r[7]=f,r[8]=g,r[9]=h,r[10]=y}else l=r[4],u=r[5],_=r[6],f=r[7],g=r[8],h=r[9],y=r[10];var b;r[11]!==u?(b=d(u),r[11]=u,r[12]=b):b=r[12];var v;r[13]!==_?(v=m(_),r[13]=_,r[14]=v):v=r[14];var S;r[15]!==f?(S=m(f),r[15]=f,r[16]=S):S=r[16];var R;r[17]!==g?(R=p(g),r[17]=g,r[18]=R):R=r[18];var L;r[19]!==h?(L=p(h),r[19]=h,r[20]=L):L=r[20];var E;r[21]!==y?(E=p(y),r[21]=y,r[22]=E):E=r[22];var k;return r[23]!==l||r[24]!==i||r[25]!==b||r[26]!==v||r[27]!==S||r[28]!==R||r[29]!==L||r[30]!==E?(k=c.jsx(n("cr:2667"),babelHelpers.extends({paddingHorizontal:b,paddingTop:v,paddingVertical:S,ref:i,spacing:R,spacingHorizontal:L,spacingVertical:E},l)),r[23]=l,r[24]=i,r[25]=b,r[26]=v,r[27]=S,r[28]=R,r[29]=L,r[30]=E,r[31]=k):k=r[31],k}if(n("cr:2922")!=null){var I;return r[32]!==a||r[33]!==i?(I=c.jsx(n("cr:2922"),babelHelpers.extends({},a,{ref:i})),r[32]=a,r[33]=i,r[34]=I):I=r[34],I}return null}l.default=_}),98);
__d("MWXRowItem.react",["cr:3083","cr:3084","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(9),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:3083")!=null){var l;return r[3]!==a||r[4]!==i?(l=u.jsx(n("cr:3083"),babelHelpers.extends({},a,{ref:i})),r[3]=a,r[4]=i,r[5]=l):l=r[5],l}if(n("cr:3084")!=null){var s;return r[6]!==a||r[7]!==i?(s=u.jsx(n("cr:3084"),babelHelpers.extends({},a,{ref:i})),r[6]=a,r[7]=i,r[8]=s):s=r[8],s}return null}l.default=c}),98);
__d("getMWPAttachmentMessageAnnouncement",["fbt","I64","LSIntEnum","MessagingAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={ANIMATED_IMAGE:function(t){return t==null?s._(/*BTDS*/"One image attached"):s._(/*BTDS*/"One image attached, titled {title of image}",[s._param("title of image",t)])},AUDIO:s._(/*BTDS*/"One audio file attached"),FILE:function(t){return t==null?s._(/*BTDS*/"One file attached"):s._(/*BTDS*/"One file attached, named {name of file}",[s._param("name of file",t)])},IMAGE:function(t,n){return n==null?s._(/*BTDS*/"_j{\"*\":\"{number} images attached\",\"_1\":\"One image attached\"}",[s._plural(t,"number")]):s._(/*BTDS*/"One image attached, titled {title of image}",[s._param("title of image",n)])},STICKER:function(t){return t==null||t===""?s._(/*BTDS*/"One sticker attached"):s._(/*BTDS*/"One sticker attached, titled {title of sticker}",[s._param("title of sticker",t)])},UNKNOWN:s._(/*BTDS*/"One unsupported attachment attached"),VIDEO:s._(/*BTDS*/"One video attached"),XMA:s._(/*BTDS*/"One rich content attachment attached")},d={ANIMATED_IMAGE:function(t){return s._(/*BTDS*/"Sent a GIF.")},AUDIO:s._(/*BTDS*/"Sent a voice message."),FILE:function(t){return s._(/*BTDS*/"Sent a file.")},IMAGE:function(t,n){return s._(/*BTDS*/"_j{\"*\":\"Sent {number} photos.\",\"_1\":\"Sent a photo.\"}",[s._plural(t,"number")])},STICKER:function(t){return s._(/*BTDS*/"Sent a sticker.")},UNKNOWN:s._(/*BTDS*/"Sent an attachment."),VIDEO:s._(/*BTDS*/"Sent a video."),XMA:s._(/*BTDS*/"Sent an attachment.")};function m(t,n){if(n===void 0&&(n=!0),t.length!==0){var a=n?c:d;if(t.length>1)return t.every(p)?a.IMAGE(t.length):void 0;var i=t[0],l=i.accessibilitySummaryText,s=i.attachmentType,u=i.filename,m=i.titleText,_=(e||(e=o("LSIntEnum"))).unwrapIntEnum(s);switch(_){case r("MessagingAttachmentType").STICKER:case 1:case r("MessagingAttachmentType").SELFIE_STICKER:case 10:case r("MessagingAttachmentType").THIRD_PARTY_STICKER:case 15:return a.STICKER(l);case r("MessagingAttachmentType").IMAGE:case 2:case r("MessagingAttachmentType").EPHEMERAL_IMAGE:case 8:return a.IMAGE(1,m);case r("MessagingAttachmentType").ANIMATED_IMAGE:case 3:return a.ANIMATED_IMAGE(m);case r("MessagingAttachmentType").VIDEO:case 4:case r("MessagingAttachmentType").EPHEMERAL_VIDEO:case 9:return a.VIDEO;case r("MessagingAttachmentType").AUDIO:case 5:return a.AUDIO;case r("MessagingAttachmentType").FILE:case 6:return a.FILE(u);case r("MessagingAttachmentType").XMA:case 7:return a.XMA;case r("MessagingAttachmentType").NONE:case 0:case r("MessagingAttachmentType").SOUND_BITE:case 12:case r("MessagingAttachmentType").CATALOG_ITEM:case 13:case r("MessagingAttachmentType").POWER_UP:case 14:return a.UNKNOWN;default:return a.UNKNOWN}}}function p(t){return(u||(u=o("I64"))).equal(t.attachmentType,(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))}l.default=m}),226);
__d("useLabyrinthLogging",["EncryptedBackupsSupportedPlatformUtils","MWEBODSCategory","MWEBODSEntityKey.enum","MWEncryptedBackupsDeviceRegistrationId","ODS","QPLEvent","QPLUserFlow","QuickPerformanceLogger","WebSession","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(){var t=o("react-compiler-runtime").c(7),n=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),a;t[0]!==n?(a=function(a){var t=a.additionalAnnotations,i=a.event,l=a.instanceKey,u=a.odsEntityName,c=a.source,d=l===void 0?0:l;if(!(e||(e=r("QuickPerformanceLogger"))).isMarkerOn(i,d)){u&&(s||(s=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),u,r("MWEBODSEntityKey.enum").START);var m=o("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId(),p={deviceRegistrationId:m,platform:n,sessionTabId:o("WebSession").getId(),source:c!=null?c:void 0};r("QPLUserFlow").start(i,{annotations:{string:babelHelpers.extends({},t,p)},instanceKey:d})}},t[0]=n,t[1]=a):a=t[1];var i=a,l;t[2]!==n?(l=function(t){var e=t.additionalAnnotations,a=t.event,i=t.marker,l=t.odsEntityName;if(!r("QPLUserFlow").getActiveFlowIDs().includes((u||(u=o("QPLEvent"))).getMarkerId(a))){l&&(s||(s=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),l,r("MWEBODSEntityKey.enum").START);var c={platform:n,sessionTabId:o("WebSession").getId()};r("QPLUserFlow").start(a,{annotations:{string:babelHelpers.extends({},e,c)}})}r("QPLUserFlow").addPoint(a,i)},t[2]=n,t[3]=l):l=t[3];var c=l,d;return t[4]!==c||t[5]!==i?(d={addMarkerAndStartFlowIfNotActive:c,startFlow:i},t[4]=c,t[5]=i,t[6]=d):d=t[6],d}l.useLabyrinthLoggingFlow=m}),98);
__d("useWAInfraDeviceList",["WMIWABridgeApi","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).use,u=null;function c(){return u==null&&(u=r("WMIWABridgeApi").getCurrentUserDeviceList()),u}function d(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=c(),e[0]=t):t=e[0],s(t)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("LSDatabaseSingletonLazyWrapper",["LSDatabaseSingleton"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton}l.default=s}),98);
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return o[0]=r("gkx")("26374"),t.resolve(o)}e.__sproc_name__="LSCoreGetIfViewerIsWorkplaceUserStoredProcedure",e.__tables__=[];var s=e;l.default=s}),98);
__d("LSLocalizedStrings",["fbt"],(function(t,n,r,o,a,i,l,s){var e=function(t,n){return""},u=e;l.default=u}),98);
__d("LSLocalizedStringsV2",["fbt","I64"],(function(t,n,r,o,a,i,l,s){var e,u=function(n,r){switch(n){case"2285622730":return s._(/*BTDS*/"Messenger is offline");case"1919524925":return s._(/*BTDS*/"Please check your connection. Anything you do in chats while offline, like send messages or change chat colors, will be completed when you connect to the internet.");case"14617150":return s._(/*BTDS*/"_j[\"Facebook User\",\"74630a0214a11fa5068b0655daafe2de\",1]");case"460740012":return s._(/*BTDS*/"Your message was not sent.");case"2353844300":return s._(/*BTDS*/"You can't reply to this conversation.");case"2987332812":return s._(/*BTDS*/"You deleted a message.");case"1530605193":return s._(/*BTDS*/"{user_name} deleted a message.",[s._param("user_name",r(0))]);case"2975370389":return s._(/*BTDS*/"You reported this message");case"3921131020":return s._(/*BTDS*/"Message hidden");case"1899892426":return s._(/*BTDS*/"You bumped a message.");case"3287869262":return s._(/*BTDS*/"{user_name} bumped a message.",[s._param("user_name",r(0))]);case"1890485478":return s._(/*BTDS*/"You");case"1299547062":return s._(/*BTDS*/"You sent a sticker.");case"3621454483":return s._(/*BTDS*/"{user_name} sent a sticker.",[s._param("user_name",r(0))]);case"3948960063":return s._(/*BTDS*/"You sent an attachment.");case"1249692047":return s._(/*BTDS*/"{user_name} sent an attachment.",[s._param("user_name",r(0))]);case"2106510577":return s._(/*BTDS*/"You sent a photo.");case"3960370133":return s._(/*BTDS*/"{user_name} sent a photo.",[s._param("user_name",r(0))]);case"3798396796":return s._(/*BTDS*/"You sent a GIF from {app_name}.",[s._param("app_name",r(0))]);case"3388601579":return s._(/*BTDS*/"{user_name} sent a GIF from {app_name}.",[s._param("user_name",r(0)),s._param("app_name",r(1))]);case"1556712457":return s._(/*BTDS*/"You sent a GIF.");case"3601791933":return s._(/*BTDS*/"{user_name} sent a GIF.",[s._param("user_name",r(0))]);case"3759817031":return s._(/*BTDS*/"You sent a video.");case"2934729541":return s._(/*BTDS*/"{user_name} sent a video.",[s._param("user_name",r(0))]);case"392493418":return s._(/*BTDS*/"You sent a voice message.");case"4085467454":return s._(/*BTDS*/"{user_name} sent a voice message.",[s._param("user_name",r(0))]);case"2738683656":return s._(/*BTDS*/"You sent a selfie sticker.");case"2996525642":return s._(/*BTDS*/"{user_name} sent a selfie sticker.",[s._param("user_name",r(0))]);case"2326868239":return s._(/*BTDS*/"You shared a post.");case"1001986796":return s._(/*BTDS*/"{user_name} shared a post.",[s._param("user_name",r(0))]);case"2285746939":return s._(/*BTDS*/"You replied to a story.");case"3759448420":return s._(/*BTDS*/"{user_name} replied to a story.",[s._param("user_name",r(0))]);case"3719716921":return s._(/*BTDS*/"You sent a story.");case"284944921":return s._(/*BTDS*/"{user_name} sent a story.",[s._param("user_name",r(0))]);case"3322002377":return s._(/*BTDS*/"you mentioned {user_name} in your story",[s._param("user_name",r(0))]);case"2486550278":return s._(/*BTDS*/"mentioned you in their story");case"3557790945":return s._(/*BTDS*/"You sent a reel.");case"3756846086":return s._(/*BTDS*/"{user_name} sent a reel.",[s._param("user_name",r(0))]);case"780378803":return s._(/*BTDS*/"You sent an IGTV video.");case"3918212613":return s._(/*BTDS*/"{user_name} sent an IGTV video.",[s._param("user_name",r(0))]);case"3161890215":return s._(/*BTDS*/"You shared a shop.");case"863428456":return s._(/*BTDS*/"{user_name} shared a shop.",[s._param("user_name",r(0))]);case"2716405471":return s._(/*BTDS*/"You sent a profile.");case"3909474073":return s._(/*BTDS*/"{user_name} sent a profile.",[s._param("user_name",r(0))]);case"1522141193":return s._(/*BTDS*/"You sent a story highlight.");case"2804766375":return s._(/*BTDS*/"{user_name} sent a story highlight.",[s._param("user_name",r(0))]);case"2051792592":return s._(/*BTDS*/"You sent a post.");case"3686831438":return s._(/*BTDS*/"{user_name} sent a post.",[s._param("user_name",r(0))]);case"658804221":return s._(/*BTDS*/"You sent a post: {$xma_title}.",[s._param("$xma_title",r(0))]);case"3431774666":return s._(/*BTDS*/"{user_name} sent a post: {$xma_title}.",[s._param("user_name",r(0)),s._param("$xma_title",r(1))]);case"1390682014":return s._(/*BTDS*/"You sent a post by {$xma_author}.",[s._param("$xma_author",r(0))]);case"3338521342":return s._(/*BTDS*/"{user_name} sent a post by {$xma_author}.",[s._param("user_name",r(0)),s._param("$xma_author",r(1))]);case"1247108605":return s._(/*BTDS*/"You mentioned {receiver_name} in your story.",[s._param("receiver_name",r(0))]);case"2966876020":return s._(/*BTDS*/"{user_name} mentioned {receiver_name} in your story.",[s._param("user_name",r(0)),s._param("receiver_name",r(1))]);case"1056933543":return s._(/*BTDS*/"You mentioned you in their story.");case"1167688664":return s._(/*BTDS*/"{user_name} mentioned you in their story.",[s._param("user_name",r(0))]);case"772459202":return s._(/*BTDS*/"You sent a gaming update.");case"3546068912":return s._(/*BTDS*/"{user_name} sent a gaming update.",[s._param("user_name",r(0))]);case"2459540079":return s._(/*BTDS*/"You replied to your story.");case"1596311291":return s._(/*BTDS*/"{user_name} replied to your story.",[s._param("user_name",r(0))]);case"2253698324":return s._(/*BTDS*/"You replied to their story.");case"4269602817":return s._(/*BTDS*/"{user_name} replied to their story.",[s._param("user_name",r(0))]);case"2552112149":return s._(/*BTDS*/"You sent an event link.");case"969211470":return s._(/*BTDS*/"{user_name} sent an event link.",[s._param("user_name",r(0))]);case"1257875092":return s._(/*BTDS*/"You shared a reel.");case"692355749":return s._(/*BTDS*/"{user_name} shared a reel.",[s._param("user_name",r(0))]);case"1760384120":return s._(/*BTDS*/"You sent a reel: {$xma_title}.",[s._param("$xma_title",r(0))]);case"3421518928":return s._(/*BTDS*/"{user_name} sent a reel: {$xma_title}.",[s._param("user_name",r(0)),s._param("$xma_title",r(1))]);case"1843708631":return s._(/*BTDS*/"You sent a reel by {$xma_author}.",[s._param("$xma_author",r(0))]);case"493478192":return s._(/*BTDS*/"{user_name} sent a reel by {$xma_author}.",[s._param("user_name",r(0)),s._param("$xma_author",r(1))]);case"785694792":return s._(/*BTDS*/"You tagged {receiver_name} in your post.",[s._param("receiver_name",r(0))]);case"2625447567":return s._(/*BTDS*/"{user_name} tagged {receiver_name} in your post.",[s._param("user_name",r(0)),s._param("receiver_name",r(1))]);case"3982213805":return s._(/*BTDS*/"You tagged you in their post.");case"464916028":return s._(/*BTDS*/"{user_name} tagged you in their post.",[s._param("user_name",r(0))]);case"411761881":return s._(/*BTDS*/"You sent a link.");case"3395044660":return s._(/*BTDS*/"{user_name} sent a link.",[s._param("user_name",r(0))]);case"1338772678":return s._(/*BTDS*/"You {$external_xma_link_snippet}.",[s._param("$external_xma_link_snippet",r(0))]);case"2717706487":return s._(/*BTDS*/"{user_name} {$external_xma_link_snippet}.",[s._param("user_name",r(0)),s._param("$external_xma_link_snippet",r(1))]);case"2973334239":return s._(/*BTDS*/"You sent a location.");case"3616471048":return s._(/*BTDS*/"{user_name} sent a location.",[s._param("user_name",r(0))]);case"476264474":return s._(/*BTDS*/"You shared a contact card.");case"3124021488":return s._(/*BTDS*/"{user_name} shared a contact card.",[s._param("user_name",r(0))]);case"3471188061":return s._(/*BTDS*/"You sent a memory.");case"2776822462":return s._(/*BTDS*/"{user_name} sent a memory.",[s._param("user_name",r(0))]);case"1739999037":return s._(/*BTDS*/"The audio call ended.");case"3373597599":return s._(/*BTDS*/"The video call ended.");case"259473449":return s._(/*BTDS*/"{user_name} missed your audio call.",[s._param("user_name",r(0))]);case"1338912959":return s._(/*BTDS*/"You missed an audio call from {user_name}.",[s._param("user_name",r(0))]);case"812940701":return s._(/*BTDS*/"{user_name} missed your video call.",[s._param("user_name",r(0))]);case"1099878966":return s._(/*BTDS*/"You missed a video call from {user_name}.",[s._param("user_name",r(0))]);case"3443782102":return s._(/*BTDS*/"The audio call started.");case"618905030":return s._(/*BTDS*/"The video call started.");case"2470414797":return s._(/*BTDS*/"Missed group audio call");case"1306024833":return s._(/*BTDS*/"Missed group video call");case"2135145355":return s._(/*BTDS*/"You sent a live location.");case"3603511704":return s._(/*BTDS*/"{user_name} sent a live location.",[s._param("user_name",r(0))]);case"705614308":return s._(/*BTDS*/"_j{\"*\":\"You sent {number} photos.\",\"_1\":\"You sent a photo.\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"313217698":return s._(/*BTDS*/"_j{\"*\":\"{user_name} sent {number} photos.\",\"_1\":\"{user_name} sent a photo.\"}",[s._plural((e||(e=o("I64"))).to_float(r(1)),"number"),s._param("user_name",r(0))]);case"3558654267":return s._(/*BTDS*/"You sent multiple attachments.");case"3422266740":return s._(/*BTDS*/"{user_name} sent multiple attachments.",[s._param("user_name",r(0))]);case"1907280305":return s._(/*BTDS*/"Reply to {other_user}",[s._param("other_user",r(0))]);case"1112375422":return s._(/*BTDS*/"Reply to {other_user} and others",[s._param("other_user",r(0))]);case"3575257287":return s._(/*BTDS*/"{num_messages} new messages",[s._param("num_messages",r(0))]);case"1212518911":return s._(/*BTDS*/"1 chat");case"171771714":return s._(/*BTDS*/"{num_channels} chats",[s._param("num_channels",r(0))]);case"763456386":return s._(/*BTDS*/"1 unread chat");case"3313483565":return s._(/*BTDS*/"{num_messages} unread chats",[s._param("num_messages",r(0))]);case"1416259530":return s._(/*BTDS*/"1 channel");case"1681736754":return s._(/*BTDS*/"{num_channels} channels",[s._param("num_channels",r(0))]);case"3802288555":return s._(/*BTDS*/"1 unread channel");case"1420387436":return s._(/*BTDS*/"{num_messages} unread channels",[s._param("num_messages",r(0))]);case"612154886":return s._(/*BTDS*/"_j{\"*\":\"{number} new friends\",\"_1\":\"1 new friend\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"3321340421":return s._(/*BTDS*/"{other_user} sent a message.",[s._param("other_user",r(0))]);case"3199643703":return s._(/*BTDS*/"Pending approval");case"3307909120":return s._(/*BTDS*/"Going");case"845728829":return s._(/*BTDS*/"Interested");case"2022991544":return s._(/*BTDS*/"Not interested");case"4285882723":return s._(/*BTDS*/"Maybe");case"3089015955":return s._(/*BTDS*/"Can't go");case"2662271323":return s._(/*BTDS*/"Respond");case"1531706844":return s._(/*BTDS*/"Request to join");case"3989800917":return s._(/*BTDS*/"See all");case"3387070852":return s._(/*BTDS*/"{receiver_name} didn't accept your payment of ${amount} within 7 days, so the money was returned to you.",[s._param("receiver_name",r(0)),s._param("amount",r(1))]);case"2779070802":return s._(/*BTDS*/"{sender_name} made an update. You are receiving updates for {game_name} in this thread.",[s._param("sender_name",r(0)),s._param("game_name",r(1))]);case"3748497596":return s._(/*BTDS*/"You are receiving updates for {game_name} in this thread.",[s._param("game_name",r(0))]);case"1346982727":return s._(/*BTDS*/"People in this thread are playing {game_name}. Messages are turned off for you.",[s._param("game_name",r(0))]);case"3688076717":return s._(/*BTDS*/"{sender_name} made an update.",[s._param("sender_name",r(0))]);case"194227859":return s._(/*BTDS*/"You're now friends with {name}. You can turn off new friend chats anytime in Settings.",[s._param("name",r(0))]);case"3144899881":return s._(/*BTDS*/"You're now friends with {name}.",[s._param("name",r(0))]);case"3246663081":return s._(/*BTDS*/"You are now connected on Messenger. You can turn off new friend chats anytime in Settings.");case"967111183":return s._(/*BTDS*/"You are now connected on Messenger.");case"4202164190":return s._(/*BTDS*/"{sender_name} scanned {receiver_name}'s QR code to start this chat.",[s._param("sender_name",r(0)),s._param("receiver_name",r(1))]);case"2421884758":return s._(/*BTDS*/"You bumped your message");case"2676961947":return s._(/*BTDS*/"You bumped {participant_name}'s message",[s._param("participant_name",r(0))]);case"3298086032":return s._(/*BTDS*/"{sender_name} bumped your message",[s._param("sender_name",r(0))]);case"3873263038":return s._(/*BTDS*/"{sender_name} bumped their message",[s._param("sender_name",r(0))]);case"2616853333":return s._(/*BTDS*/"{sender_name} bumped {reply_source_sender_name}'s message",[s._param("sender_name",r(0)),s._param("reply_source_sender_name",r(1))]);case"4002265907":return s._(/*BTDS*/"You replied to yourself");case"2663996736":return s._(/*BTDS*/"You replied to {participant_name}",[s._param("participant_name",r(0))]);case"2868699317":return s._(/*BTDS*/"{sender_name} replied to you",[s._param("sender_name",r(0))]);case"2688620547":return s._(/*BTDS*/"{sender_name} replied to themselves",[s._param("sender_name",r(0))]);case"3544071775":return s._(/*BTDS*/"{sender_name} replied to {reply_source_sender_name}",[s._param("sender_name",r(0)),s._param("reply_source_sender_name",r(1))]);case"2856734260":return s._(/*BTDS*/"Add");case"3569041084":return s._(/*BTDS*/"You");case"1640318912":return s._(/*BTDS*/"{user} turned on disappearing messages.",[s._param("user",r(0))]);case"2814174244":return s._(/*BTDS*/"Disappearing messages were turned on.");case"3475381825":return s._(/*BTDS*/"{preamble} Messages will disappear {time} after they're sent.",[s._param("preamble",r(0)),s._param("time",r(1))]);case"2794389366":return s._(/*BTDS*/"_j{\"*\":\"{number} seconds\",\"_1\":\"1 second\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"2528404281":return s._(/*BTDS*/"_j{\"*\":\"{number} minutes\",\"_1\":\"1 minute\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"3691614683":return s._(/*BTDS*/"_j{\"*\":\"{number} hours\",\"_1\":\"1 hour\"}",[s._plural((e||(e=o("I64"))).to_float(r(0)),"number")]);case"2356292598":return s._(/*BTDS*/"{user} turned off disappearing messages.",[s._param("user",r(0))]);case"3184734723":return s._(/*BTDS*/"Disappearing messages were turned off.");case"274842160":return s._(/*BTDS*/"You cleared the chat history");case"2352696798":return s._(/*BTDS*/"Workplace User");case"261320435":return s._(/*BTDS*/"Sidechat");case"1369731110":return s._(/*BTDS*/"Facebook User");case"216075330":return s._(/*BTDS*/"{user_name}'s audio",[s._param("user_name",r(0))]);case"3093868587":return s._(/*BTDS*/"{user_name}'s photo",[s._param("user_name",r(0))]);case"1965569930":return s._(/*BTDS*/"{user_name}'s video",[s._param("user_name",r(0))]);case"3981943156":return s._(/*BTDS*/"{user_name}'s sticker",[s._param("user_name",r(0))]);case"2071149394":return s._(/*BTDS*/"{user_name}'s GIF",[s._param("user_name",r(0))]);case"2414298738":return s._(/*BTDS*/"{user_name}'s attachment",[s._param("user_name",r(0))]);case"4050223159":return s._(/*BTDS*/"You created a sidechat");default:return""}},c=u;l.default=c}),226);
__d("LSLocalize",["I64","LSLocalizedStrings","LSLocalizedStringsV2","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("LSLocalizedStringsV2");function u(e){s=e}function c(t,n){var r=(e||(e=o("I64"))).to_string(t),a=function(t){return n&&n[t]||""};return s(r,a).toString()}function d(t,n){var a=(e||(e=o("I64"))).to_string(t),i=function(t){return n&&n[t]||""};return r("LSLocalizedStrings")(a,i).toString()}function m(e,t){return o("LSSynchronousPromise").makeSynchronousPromise(d(e,t))}function p(e,t){return o("LSSynchronousPromise").makeSynchronousPromise(c(e,t))}l.setStringFactoryV2_TEST_ONLY=u,l.localizeV1Async=m,l.localizeV2Async=p}),98);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return t.storedProcedure(n("LSGetIfViewerIsWorkplaceUser")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return r[0]?t.sequence([function(o){return t.filter(t.db.table(7).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.id,e[1])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,o){var a=e.done,i=e.value;return a?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2352696798]),void 0).then(function(e){return r[4]=e})},function(e){return r[2]=r[4]}]):(o=i.item,r[2]=o.name)})},function(e){return r[1]=r[2]}]):t.sequence([function(n){return t.filter(t.db.table(14).fetch([[[e[0],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[2]=void 0:(t=o.item,r[2]=t.nickname)})},function(o){return t.filter(t.db.table(7).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.id,e[1])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,o){var a=e.done,i=e.value;return a?t.sequence([function(e){return r[6]=t.i64.cast([-1,4294967295]),n("LSLocalize").localizeV2Async(t.i64.cast([0,14617150]),void 0).then(function(e){return r[7]=e})},function(e){return r[4]=r[7]}]):(o=i.item,r[4]=o.firstName==null?o.name:o.firstName)})},function(e){return r[1]=r[2]==null?r[4]:r[2]}])},function(e){return o[0]=r[1]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxGetThreadParticipantDisplayNameStoredProcedure",e.__tables__=["contacts","participants"],a.exports=e}),null);
__d("LSIssueNewError",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.db.table(6).add({errorId:void 0,taskId:e[0],errorCode:e[1],errorTitleText:e[2],errorBodyText:e[3],issuedTimestampMs:n[0],errorExtraData:e[4],presentationStyle:e[5]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreIssueNewErrorStoredProcedure",e.__tables__=["user_visible_errors"],a.exports=e}),null);
__d("LSMarkThreadRead",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.gt(e[0],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxMarkThreadReadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticMarkThreadReadV2",["LSIssueNewTask","LSMarkThreadRead"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSMarkThreadRead"),e[1],e[0])},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[3]=n.syncGroup,t.i64.neq(r[3],void 0)?r[2]=r[3]:r[2]=t.i64.cast([0,1]),r[0]=r[2])})},function(o){return r[2]=new t.Map,r[2].set("thread_id",e[0]),r[2].set("last_read_watermark_ts",e[1]),r[2].set("sync_group",r[0]),r[3]=r[2].get("thread_id"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,21]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticMarkThreadReadV2StoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("MAWClientMediaStatusUtils",["I64","LSIntEnum","MAWMediaDownloadStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){switch(t){case r("MAWMediaDownloadStatus").DOWNLOADING:return(e||(e=o("LSIntEnum"))).ofNumber(0);case r("MAWMediaDownloadStatus").SUCCESS:return(e||(e=o("LSIntEnum"))).ofNumber(1);case r("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE:return(e||(e=o("LSIntEnum"))).ofNumber(2);case r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE:return(e||(e=o("LSIntEnum"))).ofNumber(3);case r("MAWMediaDownloadStatus").MISSING_FILE:return(e||(e=o("LSIntEnum"))).ofNumber(4);case r("MAWMediaDownloadStatus").RETRYING:return(e||(e=o("LSIntEnum"))).ofNumber(5);case r("MAWMediaDownloadStatus").AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE:return(e||(e=o("LSIntEnum"))).ofNumber(6)}}function c(e){switch(e){case 0:return r("MAWMediaDownloadStatus").DOWNLOADING;case 1:return r("MAWMediaDownloadStatus").SUCCESS;case 2:return r("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE;case 3:return r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE;case 4:return r("MAWMediaDownloadStatus").MISSING_FILE;case 5:return r("MAWMediaDownloadStatus").RETRYING;case 6:return r("MAWMediaDownloadStatus").AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE}}function d(e){if(e==null)return"UNKNOWN";switch(e){case r("MAWMediaDownloadStatus").DOWNLOADING:return"DOWNLOADING";case r("MAWMediaDownloadStatus").SUCCESS:return"SUCCESS";case r("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE:return"NOT_MANUAL_RETRYABLE_FAILURE";case r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE:return"MANUAL_RETRYABLE_FAILURE";case r("MAWMediaDownloadStatus").MISSING_FILE:return"MISSING_FILE";case r("MAWMediaDownloadStatus").RETRYING:return"RETRYING";case r("MAWMediaDownloadStatus").AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE:return"AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"}}function m(t){return{mainMediaStatus:c((e||(e=o("LSIntEnum"))).unwrapIntEnum(t.mainMediaStatus)),mainMediaStatusDetails:t.mainMediaStatusDetails,previewMediaStatus:t.previewMediaStatus?c((e||(e=o("LSIntEnum"))).unwrapIntEnum(t.previewMediaStatus)):null,previewMediaStatusDetails:t.previewMediaStatusDetails,validationResult:p(t)}}function p(e){var t,n,r;if(!(e.audioAvgBitsPerSecond==null&&e.audioNumberOfChannels==null&&e.audioSamplingRate==null&&e.audioStreamType==null&&e.validateMimeType==null&&e.videoAvgBitsPerSecond==null&&e.videoCalculatedFps==null&&e.videoDuration==null&&e.videoHeight==null&&e.videoNominalFps==null&&e.videoStreamType==null&&e.videoWidth==null))return{audioAvgBitsPerSecond:e.audioAvgBitsPerSecond!=null?(s||(s=o("I64"))).to_int32(e.audioAvgBitsPerSecond):void 0,audioNumberOfChannels:e.audioNumberOfChannels!=null?(s||(s=o("I64"))).to_int32(e.audioNumberOfChannels):void 0,audioSamplingRate:e.audioSamplingRate!=null?(s||(s=o("I64"))).to_int32(e.audioSamplingRate):void 0,audioStreamType:(t=e.audioStreamType)!=null?t:void 0,validatedMimeType:(n=e.validateMimeType)!=null?n:void 0,videoAvgBitsPerSecond:e.videoAvgBitsPerSecond!=null?(s||(s=o("I64"))).to_int32(e.videoAvgBitsPerSecond):void 0,videoCalculatedFps:e.videoCalculatedFps!=null?(s||(s=o("I64"))).to_int32(e.videoCalculatedFps):void 0,videoDuration:e.videoDuration!=null?(s||(s=o("I64"))).to_int32(e.videoDuration):void 0,videoHeight:e.videoHeight!=null?(s||(s=o("I64"))).to_int32(e.videoHeight):void 0,videoNominalFps:e.videoNominalFps!=null?(s||(s=o("I64"))).to_int32(e.videoNominalFps):void 0,videoStreamType:(r=e.videoStreamType)!=null?r:void 0,videoWidth:e.videoWidth!=null?(s||(s=o("I64"))).to_int32(e.videoWidth):void 0}}function _(e){var t,n,r;return{audioAvgBitsPerSecond:(e==null?void 0:e.audioAvgBitsPerSecond)!=null?(s||(s=o("I64"))).of_int32(e.audioAvgBitsPerSecond):void 0,audioNumberOfChannels:(e==null?void 0:e.audioNumberOfChannels)!=null?(s||(s=o("I64"))).of_int32(e.audioNumberOfChannels):void 0,audioSamplingRate:(e==null?void 0:e.audioSamplingRate)!=null?(s||(s=o("I64"))).of_int32(e.audioSamplingRate):void 0,audioStreamType:(t=e==null?void 0:e.audioStreamType)!=null?t:void 0,validateMimeType:(n=e==null?void 0:e.validatedMimeType)!=null?n:void 0,videoAvgBitsPerSecond:(e==null?void 0:e.videoAvgBitsPerSecond)!=null?(s||(s=o("I64"))).of_int32(e.videoAvgBitsPerSecond):void 0,videoCalculatedFps:(e==null?void 0:e.videoCalculatedFps)!=null?(s||(s=o("I64"))).of_int32(e.videoCalculatedFps):void 0,videoDuration:(e==null?void 0:e.videoDuration)!=null?(s||(s=o("I64"))).of_int32(e.videoDuration):void 0,videoHeight:(e==null?void 0:e.videoHeight)!=null?(s||(s=o("I64"))).of_int32(e.videoHeight):void 0,videoNominalFps:(e==null?void 0:e.videoNominalFps)!=null?(s||(s=o("I64"))).of_int32(e.videoNominalFps):void 0,videoStreamType:(r=e==null?void 0:e.videoStreamType)!=null?r:void 0,videoWidth:(e==null?void 0:e.videoWidth)!=null?(s||(s=o("I64"))).of_int32(e.videoWidth):void 0}}function f(e){var t,n=e.clientMediaStatus,r=e.preloadedMediaStatus,a=e.statusKey,i=r!=null?r:n==null?void 0:n.find(function(e){var t=e.id;return t===a}),l=i?m(i):null,u=l!=null,c=(s||(s=o("I64"))).to_int32((t=i==null?void 0:i.downloadRetryCount)!=null?t:(s||(s=o("I64"))).zero);return{hasStatus:u,retryCount:c,statusData:l}}l.getClientMediaStatusType=u,l.getMAWMediaDownloadStatus=c,l.mediaDownloadStatusEnumToString=d,l.getMAWMediaStatus=m,l.getMAWValidationResults=p,l.getValidationResults=_,l.getStatusDataFromLsdb=f}),98);
__d("MAWBridgeUpdateClientMediaStatusHandler",["I64","LSIntEnum","MAWClientMediaStatusUtils","MAWMediaDownloadStatus","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n){var a,i,l,u=n.details,c=n.key,d=n.status,m=n.type,p=n.validationResult,_=c.toString(),f=await t.client_media_status.get(_),g=m==="main"?(f==null?void 0:f.mainMediaStatus)!=null&&(e||(e=o("I64"))).equal(f==null?void 0:f.mainMediaStatus,(s||(s=o("LSIntEnum"))).ofNumber(1)):(f==null?void 0:f.previewMediaStatus)!=null&&(e||(e=o("I64"))).equal(f==null?void 0:f.previewMediaStatus,(s||(s=o("LSIntEnum"))).ofNumber(1));if(!((d===r("MAWMediaDownloadStatus").DOWNLOADING||r("justknobx")._("4544"))&&g))return t.client_media_status.upsert([_],babelHelpers.extends({downloadRetryCount:(a=f==null?void 0:f.downloadRetryCount)!=null?a:(e||(e=o("I64"))).zero,id:_,mainMediaStatus:m==="main"?o("MAWClientMediaStatusUtils").getClientMediaStatusType(d):(i=f==null?void 0:f.mainMediaStatus)!=null?i:(s||(s=o("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:m==="main"?u:(l=f==null?void 0:f.mainMediaStatusDetails)!=null?l:"updated_main_without_details",previewMediaStatus:m==="preview"?o("MAWClientMediaStatusUtils").getClientMediaStatusType(d):f==null?void 0:f.previewMediaStatus,previewMediaStatusDetails:m==="preview"?u:f==null?void 0:f.previewMediaStatusDetails},o("MAWClientMediaStatusUtils").getValidationResults(p)))}async function c(e,t){await e.runInTransaction(function(e){return u(e,t)},"readwrite",void 0,void 0,i.id+":83")}l.txnHandler=u,l.call=c}),98);
__d("MAWEditMessageContext.react",["emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useMemo,m=u.useState;function p(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=m(null),a=r[0],i=r[1],l,u;t[0]!==a?(u={editMessageData:a,setEditMessageData:i},t[0]=a,t[1]=u):u=t[1],l=u;var c=l,d;return t[2]!==n||t[3]!==c?(d=s.jsx(_.Provider,{value:c,children:n}),t[2]=n,t[3]=c,t[4]=d):d=t[4],d}var _=c({editMessageData:null,setEditMessageData:r("emptyFunction")});l.MAWEditMessageContext=p,l.Context=_}),98);
__d("MAWGetEphemeralSettings",["I64","MAWBridgeSendAndReceive","MAWChatJid","ReQL","WAJids","WALogger","WATimeUtils","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWGetEphemeralSettings"),c=r("requireDeferred")("MAWEphemeralSettingsUpdate").__setRef("MAWGetEphemeralSettings");async function d(t,n){if(o("WAJids").switchOnMsgrChatJidType(t,{group:function(){return!1},user:function(){return!0}})){var a=await u.load(),i=await a(),l=n!=null?n:await o("MAWChatJid").toThreadKeyMaybe(i.tables,t);if(l!=null){var d=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.threads).getKeyRange(l));if(d!=null&&d.disappearingSettingTtl!=null){var m={ephemeralExpirationInSec:(s||(s=o("I64"))).to_int32(d.disappearingSettingTtl),ephemeralLastUpdatedOrSetTimestamp:d.disappearingSettingUpdatedTs!=null?o("WATimeUtils").castMilliSecondsToUnixTime((s||(s=o("I64"))).to_float(d.disappearingSettingUpdatedTs)):o("WATimeUtils").unixTime()};return m}return}return o("MAWBridgeSendAndReceive").sendAndReceive("backend","getEphemeralSettings",{threadId:t}).then(function(n){if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral settings in memory]: MAWGetEphemeralSettings api call for chatJid "," returns ",""])),t,n),n!=null)return r("promiseDone")(c.load().then(function(e){return e.updateEphemeralSettingsByChatJid(n.ephemeralExpirationInSec,n.ephemeralLastUpdatedOrSetTimestamp,!1,t,!0)})),n})}}l.getEphemeralSetting=d}),98);
__d("MAWMediaRestoreEBRange",["I64","MpsTypes","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0xffffffffffff,u={hasMoreBefore:!0,isDefault:!0,nextTimestampMsBefore:o("MpsTypes").toTimestamp(s)},c=new Map,d=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.updateRange=function(n,r){this.$1.set((e||(e=o("I64"))).to_string(n),r)},n.updatePageSize=function(t,n){var e=this.getRange(t);this.updateRange(t,babelHelpers.extends({},e,{pageSize:n}))},n.getRange=function(n){var t;return(t=this.$1.get((e||(e=o("I64"))).to_string(n)))!=null?t:u},n.resetRange=function(n){this.$1.set((e||(e=o("I64"))).to_string(n),u)},t})();function m(e){if(c.has(e))return r("nullthrows")(c.get(e));var t=new d;return c.set(e,t),t}l.getMediaRestoreEBRange=m}),98);
__d("MDSScrollableAreaStyles",[],(function(t,n,r,o,a,i,l){"use strict";var e={themed:{scrollbarColor:"x16o0dkt",$$css:!0},unthemed:{scrollbarColor:"xgjnz6y",$$css:!0}},s=e;l.default=s}),98);
__d("MWChatSettingsQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9672376216183311"}),null);
__d("MWChatSettingsQuery.graphql",["MWChatSettingsQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sounds_on",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatSettingsQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatSettingsQuery",selections:e},params:{id:n("MWChatSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWChatSettingsQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MWChatSettingsQuery",["CometRelay","CometRelayEnvironment","MWChatSettingsQuery.graphql","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t){var e=o("CometRelay").fetchQuery(r("CometRelayEnvironment"),u,{},{fetchPolicy:"store-or-network"}).toPromise().then(function(e){var n,r,o=e==null||(n=e.viewer)==null?void 0:n.chat_tabs_turned_off,a=e==null||(r=e.viewer)==null?void 0:r.chat_sounds_on;t(o,a)});r("promiseDone")(e)},u=e!==void 0?e:e=n("MWChatSettingsQuery.graphql"),c=function(t){s(function(e,n){return t(e)})},d=function(t){s(function(e,n){return t(n!=null&&n)})};l.areChatTabsTurnedOff=c,l.areChatTabsSoundsOn=d}),98);
__d("MWChatThreadId",["FBLogger","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e.NAME){case"Group":case"User":case"Page":case"UserSecret":return e.VAL}}function c(e){switch(e.NAME){case"Group":return"g."+e.VAL;case"Page":return"p."+e.VAL;case"User":return"u."+e.VAL;case"UserSecret":throw r("FBLogger")("messenger_web").mustfixThrow("MWChatThreadIdType Not supported")}}function d(e){switch(e.targetType){case"GROUP":return{NAME:"Group",VAL:e.targetID};case"PAGE":return{NAME:"Page",VAL:e.targetID};case"USER":return{NAME:"User",VAL:e.targetID};default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid id")}}function m(e){return e.NAME==="User"}function p(e){return e.NAME==="UserSecret"}function _(e){if(e!=null){var t=e.split(":");if(t.length===2){var n=t[0],r=t[1];switch(n){case"thread":return{NAME:"Group",VAL:r};case"user":return{NAME:"User",VAL:r};default:return}}}}function f(t){var n=t.NAME;return n==="Group"?(e||(e=o("LSIntEnum"))).ofNumber(2):n==="User"||n==="Page"?(e||(e=o("LSIntEnum"))).ofNumber(1):(e||(e=o("LSIntEnum"))).ofNumber(7)}function g(e){return(s||(s=o("I64"))).of_string(e.VAL)}l.getFBID=u,l.serializeFuture=c,l.fromJs=d,l.isUser=m,l.isSecret=p,l.deserializeFromLegacyThreadId=_,l.getMessagingThreadType=f,l.toThreadKey=g}),98);
__d("MWInboxPersistedUIState",["FBLogger","WebStorage","getErrorSafe","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef,m=u.useSyncExternalStore,p=new Map,_=new Map;function f(e){var t;(t=p.get(e))==null||t.forEach(function(e){return e()})}function g(t,n){var o=d(t).current,a=d({parsed:o,stringified:void 0}),i=c(function(e){var t=p.get(n),r=t!=null?t:new Set;return r.add(e),p.set(n,r),function(){r.delete(e)}},[n]),l=c(function(){var t=(e||(e=r("WebStorage"))).getLocalStorageForRead(),i=t==null?_.get(n):t.getItem(n);if(i==null)return o;if(i===a.current.stringified)return a.current.parsed;try{var l=JSON.parse(i);return a.current={parsed:l,stringified:i},l}catch(e){return o}},[o,n]),s=m(i,l),u=c(function(t){var o=t instanceof Function?t(a.current.parsed):t,i=(e||(e=r("WebStorage"))).getLocalStorage(),l=JSON.stringify(o);if(i!=null)if(l==null)i.removeItem(n);else try{i.setItem(n,l)}catch(e){var s=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(s).mustfix("Failed to setItem")}else _.set(n,l);f(n)},[n]);return[s,u]}l.usePersistedUIState=g}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.createContext,m=c.useCallback,p=c.useMemo,_=c.useState,f=r("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),g=d({clearReply:r("emptyFunction"),reply:void 0,setReply:r("emptyFunction")});function h(e){try{return JSON.parse(e)}catch(e){return}}function y(e){var t=o("react-compiler-runtime").c(17),n=e.children,r=e.clearThreadReply,a=e.getRepliesState,i=e.persistRepliesState,l=e.senderId,c=e.threadKey,d;t[0]!==a||t[1]!==c?(d=a!=null&&c!=null?h(a((s||(s=o("I64"))).to_string(c))):void 0,t[0]=a,t[1]=c,t[2]=d):d=t[2];var m=d,p=_(m),y=p[0],C=p[1],b;t[3]!==r||t[4]!==y?(b=function(t,n){if(f.onReady(function(e){e.logClearReply(n,t,y!=null)}),C(),r!=null)return r((s||(s=o("I64"))).to_string(t))},t[3]=r,t[4]=y,t[5]=b):b=t[5];var v=b,S;t[6]!==i||t[7]!==y||t[8]!==l?(S=function(t,n){if(f.onReady(function(e){e.logSetReply(y,t,n)}),C(t),i!=null)return i({messageId:t.messageId,offlineThreadingId:t.offlineThreadingId,senderId:l,sendStatusV2:t.sendStatusV2,threadKey:(s||(s=o("I64"))).to_string(n),timestampMs:t.timestampMs})},t[6]=i,t[7]=y,t[8]=l,t[9]=S):S=t[9];var R=S,L,E;t[10]!==v||t[11]!==y||t[12]!==R?(E={clearReply:v,reply:y,setReply:R},t[10]=v,t[11]=y,t[12]=R,t[13]=E):E=t[13],L=E;var k=L,I;return t[14]!==n||t[15]!==k?(I=u.jsx(g.Provider,{value:k,children:n}),t[14]=n,t[15]=k,t[16]=I):I=t[16],I}l.MWPReplyContext=g,l.MWPReplyContextProvider=y}),98);
__d("MWPThreadIsPageContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext();l.default=u}),98);
__d("MWPThreadIsPage.react",["FBLogger","I64","LSContactType","LSIntEnum","MWPActor.react","MWPThreadIsPageContext","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=c.useContext;function p(t){var n=o("react-compiler-runtime").c(11),a=t.children,l=t.threadKey,c=(e||(e=r("useReStore")))(),m=o("MWPActor.react").useActor(),p;n[0]!==m||n[1]!==c||n[2]!==l?(p=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(c.tables.participants,["contactId"]).getKeyRange(l).filter(function(e){return!(s||(s=o("I64"))).equal(e.contactId,m)}),o("ReQL").fromTableAscending(c.tables.contacts))},n[0]=m,n[1]=c,n[2]=l,n[3]=p):p=n[3];var _;n[4]!==l?(_=[l],n[4]=l,n[5]=_):_=n[5];var f=o("ReQLSuspense").useFirst(p,_,i.id+":29"),g=f!=null?f[1]:null,h;n[6]!==g?(h=g!=null?(s||(s=o("I64"))).equal(g.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE)):!1,n[6]=g,n[7]=h):h=n[7];var y=h,C;return n[8]!==a||n[9]!==y?(C=d.jsx(r("MWPThreadIsPageContext").Provider,{value:y,children:a}),n[8]=a,n[9]=y,n[10]=C):C=n[10],C}function _(){var e=m(r("MWPThreadIsPageContext"));return e!=null?e:(r("FBLogger")("messenger_web_ia").mustfix("Using hook useIsPage in a place where we didn't include the context"),!1)}l.Provider=p,l.useIsPage=_}),98);
__d("MWResponsiveLayoutConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({THREAD_LIST_PANEL:0,MESSAGE_LIST_PANEL:1,INFO_PANEL:2}),l=[e.MESSAGE_LIST_PANEL,e.INFO_PANEL],s=375,u=320,c=e.THREAD_LIST_PANEL,d=e.MESSAGE_LIST_PANEL,m=3;i.MWLayoutPanel=e,i.MWInboxMainContentPanels=l,i.DENSE_LAYOUT_BREAKPOINT_WIDTH=s,i.DENSE_LAYOUT_BREAKPOINT_HEIGHT=u,i.DEFAULT_ONE_CARD_INDEX=c,i.DEFAULT_TWO_CARDS_INDEX=d,i.DEFAULT_MAX_CARDS_VISIBLE=m}),66);
__d("MWResponsiveLayoutContext.react",["MWResponsiveLayoutConstants","emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({_mountCard:r("emptyFunction"),_unmountCard:r("emptyFunction"),cardsVisible:o("MWResponsiveLayoutConstants").DEFAULT_MAX_CARDS_VISIBLE,isDenseMode:!1,maxCardsVisible:o("MWResponsiveLayoutConstants").DEFAULT_MAX_CARDS_VISIBLE,popCard:r("emptyFunction"),primaryCardIndex:o("MWResponsiveLayoutConstants").DEFAULT_TWO_CARDS_INDEX,pushCard:r("emptyFunction"),secondaryCardIndex:null}),c=u;l.default=c}),98);
__d("MWXGlimmer.react",["cr:4067","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),r;return t[0]!==e?(r=s.jsx(n("cr:4067"),babelHelpers.extends({},e)),t[0]=e,t[1]=r):r=t[1],r}l.default=u}),98);
__d("MWXIconCautionTriangle",["MWXSvgIcon","SVGIcon","cr:22257","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22257")),r("gkx")("23219"));l.default=e}),98);
__d("MWXLazyPopoverTrigger.react",["cr:7121","cr:8610","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return n("cr:8610")!=null?s.jsx(n("cr:8610"),babelHelpers.extends({},e)):n("cr:7121")!=null?s.jsx(n("cr:7121"),babelHelpers.extends({},e)):null}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("ThreadStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,PAUSED:1,PAUSED_AND_UPGRADED_TO_COMMUNITY:2,UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED:3});i.default=e}),66);
__d("coerceMessagingThreadTypeToLSThreadType",["LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t)}l.default=s}),98);
__d("logMessengerWebFalcoEvent",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=["hasMissingMessage"],s;function u(t,n,a,i){var l=t.threadKey,u=t.threadType;if(a!=null){var c=o("LSMessagingThreadTypeUtil").isArmadilloSecure(u),d=o("LSMessagingThreadTypeUtil").isGroup(u),m=(s||(s=o("I64"))).to_string(l),p=i!=null?i:{},_=p.hasMissingMessage,f=babelHelpers.objectWithoutPropertiesLoose(p,e),g=i!=null?i:{},h=g.MAW_vs_EB_numOfMissingInReference,y=g.MAW_vs_EB_numOfMissingInTarget,C=g.UI_vs_EB_numOfMissingInReference,b=g.UI_vs_EB_numOfMissingInTarget,v=g.UI_vs_MAW_numOfMissingInReference,S=g.UI_vs_MAW_numOfMissingInTarget,R=g.pageSize;r("MessengerWebEventsFalcoEvent").log(function(){return{client_timestamp:Date.now().toString(),entry_point:a,event_name:n,extra_data:f,has_message_missing:_,is_secured:c,missing_messages_maw_vs_eb_missing_in_reference_count:h,missing_messages_maw_vs_eb_missing_in_target_count:y,missing_messages_page_size:R,missing_messages_ui_vs_eb_missing_in_reference_count:C,missing_messages_ui_vs_eb_missing_in_target_count:b,missing_messages_ui_vs_maw_missing_in_reference_count:v,missing_messages_ui_vs_maw_missing_in_target_count:S,other_user_fbid:d||c?void 0:m,thread_fbid:m}})}}l.default=u}),98);
__d("useCommunityFolder",["MWPreloadableQueries","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),l,s;return n[0]!==a||n[1]!==t.parentThreadKey?(l=function(){return o("MWPreloadableQueries").getCommunityFolderQuery(a,t.parentThreadKey)},s=[a,t.parentThreadKey],n[0]=a,n[1]=t.parentThreadKey,n[2]=l,n[3]=s):(l=n[2],s=n[3]),o("ReQLSuspense").useFirst(l,s,i.id+":26")}l.default=s}),98);
__d("useMWFamilyCenterContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext,c=s.useContext,d={currentActiveScheduledBreakInterval:null,hasActiveMsgrFamilyCenterEnforcement:!1,isAllowedRoute:!1,shouldHideSidebar:!1,shouldShowDailyTimeLimit:!1,supervisorData:{supervisionStatus:null,supervisor:null,thread:null}},m=u({familyCenterData:d,setFamilyCenterData:function(){}});function p(){return c(m)}l.emptyFamilyCenterData=d,l.FamilyCenterContext=m,l.useMWFamilyCenterEnforcementsContext=p}),98);
__d("useMWGetOtherUserContact",["I64","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useMemo;function d(t,n,a){var l=(e||(e=r("useReStore")))(),u=o("MWPActor.react").useActor(),d=(s||(s=o("I64"))).equal(u,t),m=c(function(){return a},[].concat(a));return o("ReQLSuspense").useFirst(function(){return o("LSMessagingThreadTypeUtil").isOneToOne(n)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(l.tables.participants,["contactId"]).getKeyRange(t),o("ReQL").fromTableAscending(l.tables.contacts,a)).filter(function(e){var t=e[0],n=e[1];return d||!(s||(s=o("I64"))).equal(t.contactId,u)}).map(function(e){var t=e[0],n=e[1];return n}):o("ReQL").empty()},[n,l,t,d,u,m],i.id+":35")}l.default=d}),98);
__d("useMWXPushToast",["MWXIconStrict.react","mwPushToast","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["_isWarning_DO_NOT_USE"],s,u,c=u||(u=r("react")),d=(s||(s=o("react"))).useCallback;function m(){return p}function p(t){var n=t._isWarning_DO_NOT_USE,a=babelHelpers.objectWithoutPropertiesLoose(t,e);o("mwPushToast").mwPushToast(babelHelpers.extends({},a,{icon:a.icon?{comet:c.jsx(r("MWXIconStrict.react"),{color:n===!0?"warning":void 0,icon:a.icon,isDecorative:!0,size:20}),mds:a.icon.component}:void 0}))}l.default=m}),98);
__d("useMWXPushErrorToast",["MWXIconCautionTriangle","react","react-compiler-runtime","useMWXPushToast"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(2),t=r("useMWXPushToast")(),n;return e[0]!==t?(n=function(n){t(babelHelpers.extends({},n,{_isWarning_DO_NOT_USE:!0,announcementType:"warning",assertive:!0,icon:r("MWXIconCautionTriangle")}))},e[0]=t,e[1]=n):n=e[1],n}l.default=u}),98);
__d("useStringWithSubstitutions",["fbt","CometLruCache","CurrentMessengerUser","Env","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSVerifyContactRowExistsStoredProcedure","Promise","ReQL","ReQLSuspense","gkx","justknobx","nullthrows","promiseDone","react","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p=m||(m=o("react")),_=p.useEffect,f=p.useMemo,g=(c||(c=r("Env"))).isMessengerDotComOnComet?"Messenger":r("gkx")("22979")?"Instagram":"Facebook",h=s._(/*BTDS*/"{Platform Name} user",[s._param("Platform Name",g)]).toString(),y=/(\$?)\$([a-zA-Z_]+)(?:\((.*?)\))?/g,C=/()(@)(?:(\d*?)@msgr)/g,b=o("CometLruCache").create(100);function v(t,a){var i=(d||(d=o("I64"))).to_string(a);return b.has(i)?(e||(e=n("Promise"))).resolve():(b.set(i,!0),r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(t),{authorityLevel:d.of_int32(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:d.of_int32(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:d.of_int32(r("LSContactIdType").FBID),contactType:d.of_int32(r("LSContactType").USER),contactViewerRelationship:d.of_int32(r("LSContactViewerRelationship").UNKNOWN),gender:d.of_int32(r("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:a===o("CurrentMessengerUser").getID(),workForeignEntityType:d.of_int32(r("LSContactWorkForeignEntityType").UNKNOWN)}))}function S(e,t){for(var n=0,r=e.length-1;n<=r;){var o=n+r>>1;e[o][0]<t?n=o+1:r=o-1}return r}function R(e,t,n,r){var o=[[-1,0]],a=e.replace(n,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=n[n.length-2],l=r.apply(void 0,[e].concat(n));return l.length===e.length||o.push([i,e.length-l.length+o[o.length-1][1]]),l});if(o.length===1)return{textWithSubstitutions:a,updatedRanges:t};var i=[];for(var l of t){var s=S(o,l.offset);i.push(babelHelpers.extends({},l,{length:l.length-(o[s+1]!=null&&o[s+1][0]<=l.offset+l.length?o[s+1][1]-o[s][1]:0),offset:l.offset-o[s][1]}))}return{textWithSubstitutions:a,updatedRanges:i}}var L={CONTACT_FIRST_NAME:[function(e){return function(t){return o("ReQL").fromTableAscending(e.tables.contacts,["name","firstName","id"]).getKeyRange(t).map(function(e){var t=e.firstName,n=e.name;return t!=null?t:n})}},function(e){return h},v],CONTACT_FULL_NAME:[function(e){return function(t){return o("ReQL").fromTableAscending(e.tables.contacts,["name"]).getKeyRange(t).map(function(e){var t=e.name;return t})}},function(e){return h},v],PARTICIPANT_FIRST_NAME:[function(e){return(function(t,n){var r=n.threadKey;return o("ReQL").fromTableAscending(e.tables.contacts,["name","firstName","id"]).getKeyRange(t).map(function(t){var n,a,l=t.firstName,s=t.id,u=t.name,c=r==null?null:o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.participants,["nickname"]).getKeyRange(r,s),i.id+":190");return(n=(a=c==null?void 0:c.nickname)!=null?a:l)!=null?n:u})})},function(e){return h},v],PARTICIPANT_FULL_NAME:[function(e){return(function(t,n){var r=n.threadKey;return o("ReQL").fromTableAscending(e.tables.contacts,["name","id"]).getKeyRange(t).map(function(t){var n,a=t.id,l=t.name,s=r==null?null:o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.participants,["nickname"]).getKeyRange(r,a),i.id+":209");return(n=s==null?void 0:s.nickname)!=null?n:l})})},function(e){return h},v]};function E(t,a,l,s,c,m){var p=function(t){var e;return((e=t.entity)==null?void 0:e.__typename)==="Thread"},g=a.filter(p),h=a.filter(function(e){return!p(e)}),y=(u||(u=r("useReStore")))(),C=o("Int64Hooks").useMemoInt64(function(){return{threadKey:l}},[l]),b=f(function(){var e,n=[],a=0;if(t!=null){s.lastIndex=0;for(var i=function(){var t=r("nullthrows")(e),i=t[0],l=t[1],s=t[2],u=t[3];if(!l){var p=(d||(d=o("I64"))).of_string_opt(u);if(p==null||u==="0")m&&r("FBLogger")("messenger_web").mustfix("Invalid user id for substitution key %s: %s",s,u);else{var _=a,f=c[s];f!=null&&(n.push([f[0](y)(p,C).take(1).map(function(e){return[_,e]}),function(e){return f[2](e,p)}]),a++)}}};(e=s.exec(t))!==null;)i()}return n},[C,y,t,s,c]),v=o("ReQLSuspense").useArray(function(){return b.length?b.length===1?b[0][0]:o("ReQL").union.apply(void 0,b.map(function(e){return e[0]})):o("ReQL").empty()},[b],i.id+":297"),S=f(function(){return new Map(v)},[v]);return _(function(){var t=b.map(function(e,t){var n=e[0],r=e[1];return S.has(t)?null:r}).filter(Boolean);t.length&&r("promiseDone")(y.runInTransaction(function(r){return(e||(e=n("Promise"))).all(t.map(function(e){return e(r)}))},"readwrite",void 0,void 0,i.id+":324"))},[y,b,S]),f(function(){if(t==null)return null;var e=0,n=R(t,h,s,function(t,n,r,a){var i=c[r];return n||i==null||(d||(d=o("I64"))).of_string_opt(a)==null?t:S.get(e++)||c[r][1](a)}),r=n.textWithSubstitutions,a=n.updatedRanges;return{textWithSubstitutions:r,updatedRanges:[].concat(a,g)}},[t,h,g,s,S,c])}function k(e,t){var n;return(n=E(e,[],t,y,L,!0))==null||(n=n.textWithSubstitutions)==null||n.replace==null?void 0:n.replace(/\$\$/g,"$$")}function I(e,t,n,a){var l=f(function(){return{"@":[function(e){return function(t){return n.has((d||(d=o("I64"))).to_string(t))?o("ReQL").fromTableAscending(e.tables.contacts,["name","id"]).getKeyRange(t).map(function(t){var n=t.id,l=t.name;if(r("justknobx")._("1389")){var s,u=a==null?null:o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.participants,["nickname"]).getKeyRange(a,n),i.id+":416"),c=(s=u==null?void 0:u.nickname)!=null?s:l;return"@"+c}else return"@"+l}):o("ReQL").empty()}},function(e){return n.has(e)?"@"+h:"@"+e+"@msgr"},v]}},[n]);return E(e,t,void 0,C,l,!1)}l.useStringWithSubstitutions=k,l.useStringWithMentionSubstitutionsAndUpdatedRanges=I}),226);/*FB_PKG_DELIM*/
__d("Box.react",["react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["as","xstyle"],u,c,d=c||(c=o("react")),m={box:{alignItems:"x1qjc9v5",boxSizing:"x9f619",display:"x78zum5",flexBasis:"xdl72j9",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",minHeight:"x2lwn1j",minWidth:"xeuugli",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(14),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l,c,p;if(n[3]!==a){var _=a;c=_.as,p=_.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(_,s),n[3]=a,n[4]=l,n[5]=c,n[6]=p}else l=n[4],c=n[5],p=n[6];var f=c===void 0?"div":c,g;n[7]!==p?(g=(u||(u=r("stylex")))(m.box,p),n[7]=p,n[8]=g):g=n[8];var h;return n[9]!==f||n[10]!==l||n[11]!==i||n[12]!==g?(h=d.jsx(f,babelHelpers.extends({},l,{className:g,ref:i})),n[9]=f,n[10]=l,n[11]=i,n[12]=g,n[13]=h):h=n[13],h}l.default=p}),98);
__d("LSRtcCallState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});i.default=e}),66);
__d("useLSComputedThreadName",["CometTextWithEntities.react","react","react-compiler-runtime","useLSGetThreadTitle.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadTitle"],s,u=s||(s=o("react"));function c(t,n){var a=o("react-compiler-runtime").c(12),i=r("useLSGetThreadTitle.react")(t),l,s;if(a[0]!==i?(s=i.threadTitle,l=babelHelpers.objectWithoutPropertiesLoose(i,e),a[0]=i,a[1]=l,a[2]=s):(l=a[1],s=a[2]),s==null){var c;a[3]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("CometTextWithEntities.react"),{text:""}),a[3]=c):c=a[3];var d;return a[4]!==l?(d=babelHelpers.extends({threadNameElement:c},l),a[4]=l,a[5]=d):d=a[5],d}var m;a[6]!==s||a[7]!==n?(m=u.jsx(r("CometTextWithEntities.react"),{text:s,transforms:n}),a[6]=s,a[7]=n,a[8]=m):m=a[8];var p;return a[9]!==l||a[10]!==m?(p=babelHelpers.extends({threadNameElement:m},l),a[9]=l,a[10]=m,a[11]=p):p=a[11],p}l.default=c}),98);
__d("LSThreadTitle.react",["CometTextWithEntities.react","FBLogger","MWChatTextTransform","mwCMIsAnyCMThread","react","react-compiler-runtime","useLSComputedThreadName"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.thread,n=e.transforms;return r("useLSComputedThreadName")(t,n).threadNameElement}function c(e){var t=o("react-compiler-runtime").c(7),n=e.thread,a=e.transforms,i=a===void 0?o("MWChatTextTransform").textTransforms:a,l=n.threadName;if(l!=null){var c;return t[0]!==l||t[1]!==i?(c=s.jsx(r("CometTextWithEntities.react"),{text:l,transforms:i}),t[0]=l,t[1]=i,t[2]=c):c=t[2],c}if(r("mwCMIsAnyCMThread")(n.threadType)){r("FBLogger")("messenger_comet").mustfix("community message should not use computed thread title");var d;return t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("CometTextWithEntities.react"),{text:""}),t[3]=d):d=t[3],d}var m;return t[4]!==n||t[5]!==i?(m=s.jsx(u,{thread:n,transforms:i}),t[4]=n,t[5]=i,t[6]=m):m=t[6],m}l.default=c}),98);
__d("MWInboxMessageSearchJumpToResultQPL",["FBLogger","I64","MAWLoggerUtils","QPLUserFlow","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("3865"),u=r("justknobx")._("3867"),c=null;function d(){c=null}function m(e,t,n){return c={key:o("MAWLoggerUtils").getInstanceKey(),messageId:t,messageOtid:n,threadKey:e},c.key}function p(e,t){if(!(c==null||(t==null?void 0:t.messageId)!==c.messageId&&(t==null?void 0:t.offlineThreadingId)!==c.messageOtid)){var n=c.key;r("QPLUserFlow").addPoint(r("qpl")._(25306290,"2811"),e,{instanceKey:n})}}function _(t,n){if(!(!u||c==null||!(e||(e=o("I64"))).equal(n.threadKey,c.threadKey)))try{var a=c.key,i=t.msgs,l=i.some(function(e){var t,n;return e.msgId===((t=c)==null?void 0:t.messageId)||e.externalId===((n=c)==null?void 0:n.messageOtid)});r("QPLUserFlow").addPoint(r("qpl")._(25306290,"2811"),l?"jumped_message_fetched":"message_fetch_checkpoint",{data:{string:{rangeMaxTimestamp:n.maxTimestampMs!=null?(e||(e=o("I64"))).to_string(n.maxTimestampMs):"null",rangeMinTimestamp:n.minTimestampMs!=null?(e||(e=o("I64"))).to_string(n.minTimestampMs):"null"}},instanceKey:a})}catch(e){var s=r("getErrorSafe")(e);r("FBLogger")("messenger_web_search").mustfix("Failed to check if jumped message are fetched: %s",s.message)}}function f(e){if(!(c==null||(e==null?void 0:e.messageId)!==c.messageId&&(e==null?void 0:e.offlineThreadingId)!==c.messageOtid)){var t=c.key;r("QPLUserFlow").endSuccess(r("qpl")._(25306290,"2811"),{instanceKey:t}),d()}}function g(e){if(c!=null){var t=c.key;r("QPLUserFlow").endCancel(r("qpl")._(25306290,"2811"),{annotations:{string:{cancelReason:e}},instanceKey:t}),d()}}function h(e,t,n){var o=m(e,t.messageId,t.offlineThreadingId);r("QPLUserFlow").start(r("qpl")._(25306290,"2811"),babelHelpers.extends({annotations:{string:{messageId:t==null?void 0:t.messageId,messageOtid:t==null?void 0:t.offlineThreadingId}},instanceKey:o,timeoutInMs:s},n))}l.addPointIfJumpedToMessage=p,l.checkIfJumpedMessageAreFetched=_,l.endSuccessIfJumpedToMessage=f,l.endCancelIfAny=g,l.start=h}),98);
__d("MAWFetchMessagesForMLv2",["DateConsts","MAWMessagesDirection","MAWMessagesPaginationUtils","MAWSecureLocalDBFetch","MWInboxMessageSearchJumpToResultQPL"],(function(t,n,r,o,a,i,l){"use strict";var e=10*o("DateConsts").MS_PER_SEC;async function s(t){var n=t.chatJid,a=t.direction,i=t.includeOriginalMsg,l=t.pageSize,s=t.range,u=o("MAWMessagesDirection").getRangeMsgIdForDirection(a,s),c=await o("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(a,s),d=await r("MAWSecureLocalDBFetch")({actionType:"user",chatJid:n,config:{admin:!0,editMsgHistory:!0,media:!0,polls:!0,reactions:!0,receiverFetch:!0,xma:!0},count:l,direction:o("MAWMessagesDirection").translateMwpDirectionToMawDirection(a),offsetMsg:{externalId:c,includeOriginalMsg:i,messageId:u},timestampMs:o("MAWMessagesDirection").getI64RangeTimestampForDirection(a,s)},{timeoutMs:e});return d.success===!0&&(o("MAWMessagesPaginationUtils").populateExternalIdCache(d.value.msgs),o("MWInboxMessageSearchJumpToResultQPL").checkIfJumpedMessageAreFetched(d.value,s)),d}l.fetchMessagesFromMAW=s}),98);
__d("MAWFindMsgsWithMinAndMaxTimestamp",["MAWMessagesCompare","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e.length===0)return[null,null];if(r("qex")._("18"))return u(e);var t=e.toSorted(function(e,t){var n,r;return((n=e.sortOrderMs)!=null?n:0)-((r=t.sortOrderMs)!=null?r:0)});return[t[0],t[t.length-1]]}function s(e){var t=e.filter(function(e){return e.sortOrderMs!=null});if(t.length===0)return[null,null];if(r("qex")._("18"))return u(t);var n=null,o=null;for(var a of t){var i,l;a.sortOrderMs!=null&&((((i=n)==null?void 0:i.sortOrderMs)==null||n.sortOrderMs<a.sortOrderMs)&&(n=a),(((l=o)==null?void 0:l.sortOrderMs)==null||o.sortOrderMs>a.sortOrderMs)&&(o=a))}return[o,n]}function u(e){if(e.length===0)return[null,null];var t=o("MAWMessagesCompare").getSortComparisonFunctionForDirection("asc"),n=e.filter(function(e){return e.sortOrderMs!=null}).sort(t);return[n[0],n[n.length-1]]}l.findEBMsgsWithMinAndMaxTimestamp=e,l.findMsgsWithMinAndMaxTimestamp=s}),98);
__d("ReplayLastSubjectWithMapper",["relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({}),s=(function(){function t(t,n){var r=this;t===void 0&&(t=e),this.$1=!1,this.$5=new Set,this.$3=t,this.$6=n,this.$4=o("relay-runtime").Observable.create(function(t){if(r.$1){r.$2!=null?t.error(r.$2):t.complete();return}return r.$5.add(t),r.$3!==e&&t.next(r.$6(r.$3)),function(){r.$5.delete(t)}})}var n=t.prototype;return n.next=function(t){this.$1||this.$3!==t&&(this.$3=t,this.$5.forEach(function(e){return e.next(t)}))},n.error=function(t){this.$1||(this.$1=!0,this.$2=t,this.$5.forEach(function(e){return e.error(t)}))},n.complete=function(){this.$1||(this.$1=!0,this.$5.forEach(function(e){return e.complete()}))},n.subscribe=function(t){return this.$4.subscribe(t)},t})();l.ReplayLastSubjectWithMapper=s}),98);
__d("MAWMessageRangeDataExternalObservables",["ReplayLastSubjectWithMapper","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[]}var t=e.prototype;return t.getOrCreateExternalObservableForRange=function(t,n){var e=this.$1.find(function(e){var n=e[0],r=e[1];return t===n});if(e!=null)return e[1];var r=new(o("ReplayLastSubjectWithMapper")).ReplayLastSubjectWithMapper({range:t.value,rangeExternalIds:n},function(e){var t=e.range,n=e.rangeExternalIds;return{range:t,rangeExternalIds:n}});return this.$1.push([t,r]),r},t.updateExternalObservableWithRange=function(t,n){var e=r("nullthrows")(this.$1.find(function(e){var n=e[0],r=e[1];return r===t}));e[0]!==n&&(e[0]=n)},e})();l.MAWMessageRangeDataExternalObservables=e}),98);
__d("MAWMessagesRangesUtils",["I64","MAWFindMsgsWithMinAndMaxTimestamp","MAWMessagesDirection"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(e||(e=o("I64"))).max_int,minMessageId:"",minTimestampMs:e.min_int,threadKey:t}}function u(){return{maxExternalId:null,minExternalId:null}}function c(t,n,r,a){var i,l,s=o("MAWFindMsgsWithMinAndMaxTimestamp").findMsgsWithMinAndMaxTimestamp(r.msgs),u=s[0],c=s[1],m=babelHelpers.extends({},t,o("MAWMessagesDirection").switchOnMWPMessagesDirection(a,{asc:{hasMoreAfter:r.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(i=c==null?void 0:c.msgId)!=null?i:t.maxMessageId,maxTimestampMs:(e||(e=o("I64"))).max(t.maxTimestampMs,(c==null?void 0:c.sortOrderMs)!=null?(e||(e=o("I64"))).of_float(c==null?void 0:c.sortOrderMs):t.maxTimestampMs)},desc:{hasMoreBefore:r.hasMoreBefore,isLoadingBefore:!1,minMessageId:(l=u==null?void 0:u.msgId)!=null?l:t.minMessageId,minTimestampMs:e.min(t.minTimestampMs,(u==null?void 0:u.sortOrderMs)!=null?(e||(e=o("I64"))).of_float(u==null?void 0:u.sortOrderMs):t.minTimestampMs)}})),p=d(a,u,c,n);return[m,p]}function d(e,t,n,r){var a,i;return babelHelpers.extends({},o("MAWMessagesDirection").switchOnMWPMessagesDirection(e,{asc:{maxExternalId:(a=n==null?void 0:n.externalId)!=null?a:r.maxExternalId,minExternalId:r.minExternalId},desc:{maxExternalId:r.maxExternalId,minExternalId:(i=t==null?void 0:t.externalId)!=null?i:r.minExternalId}}))}l.getRangeForFailure=s,l.getRangeExternalIdsForFailure=u,l.mergeMoreMessagesResponseIntoRange=c,l.getNewMsgsRangesExternalIds=d}),98);
__d("MAWMpsM3RangeExtension",["MAWFetchMessagesForMLv2","MAWTimedBridge","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n){var t=n.chatJid,a=n.count,i=n.direction,l=n.logger,s=n.oldRange,u=await o("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:t,direction:i,includeOriginalMsg:!0,pageSize:a,range:s});if(u.success===!1){var c,d=u.payload,m=d==null?"unknown":"["+d.name+"]: "+d.message;if(o("WATagsLogger").TAGS(["maw_message_core","MAWMessageRangeDataSource"]).ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsM3RangeExtension: Failed to fetch messages from worker due to ",". Error: ",""])),u.error,m),u.payload instanceof o("MAWTimedBridge").MAWBridgeTimeoutError)return{status:"try_again"};throw(c=u.payload)!=null?c:r("err")("Failed to fetch messages from worker")}return l==null||l.addQPLAnnotations({string:{mps_status:"m3"}}),{extension:u.value,status:"continue"}};l.mpsM3RangeExtension=s}),98);
__d("MAWWaitForACTThreadReadyForMLv2",["MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActOnActThreadReady"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=await o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByThreadKey(e,t,n);r==null||r.addQPLAnnotations({string:{initial_mi_act_thread_state:a.type}});var i=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(e,t,n);return i}l.waitForACTThreadReadyForMLv2=e}),98);
__d("MLV2DataSourceLogger",["I64","MAWQPLLogger","MWChatInteraction","mergeDeep","performanceNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){return u==null&&(u=r("MAWQPLLogger")(r("qpl")._(25303796,"1974"))),u}var d=new Map;function m(e,t){return(s||(s=o("I64"))).to_string(e)+t}function p(e){var t=e.getTrace(),n=(t==null?void 0:t.completed)!=null,o=(t==null?void 0:t.qplEvent)===r("qpl")._(30605380,"18")||(t==null?void 0:t.qplEvent)===r("qpl")._(30609204,"1682");return!n&&o}function _(t,n,a,i){var l=m(t,n),u=d.get(l);u!=null&&u.markQPLCancel("restart_logger");var _=c().markQPLStart(),f=o("MWChatInteraction").getInteractionTraceForThreadKey((s||(s=o("I64"))).to_string(t)),g=(e||(e=r("performanceNow")))();f==null||f.addMarkerPoint("MLV2_fetch_start","AppTiming",g);var h=function(n,o){var t=(e||(e=r("performanceNow")))(),a={action:n,full_duration:(t-g)/1e3};if(o!=null&&(a=r("mergeDeep")(a,o)),f!=null){var i=p(f),l=n==="CANCEL"&&t-g<50;!i||l||f.addMarkerPoint("MLV2_fetch_end","AppTiming",t,a)}},y=new Set,C={addQPLAnnotations:function(t){c().addQPLAnnotations(_,t)},annotateMessageRangesDataSource:function(t){y.add(t),c().addQPLAnnotations(_,{string_array:{message_ranges_source:Array.from(y.keys())}})},getInstanceKey:function(){return _},markQPLCancel:function(t){c().addQPLAnnotations(_,{string:{cancel_reason:t}}),c().markQPLCancel(_),h("CANCEL"),d.delete(l)},markQPLFailure:function(t){c().markQPLFailure(_,t),h("FAIL"),d.delete(l)},markQPLFailureWithMsg:function(t){c().markQPLFailureWithMsg(_,t),h("FAIL"),d.delete(l)},markQPLPoint:function(t){c().markQPLPoint(_,t)},markQPLSuccess:function(t){c().markQPLSuccess(_),h("SUCCESS",{num_msgs_fetched:t}),d.delete(l)}},b=!1;return f!=null&&p(f)&&(b=!0),C.addQPLAnnotations({bool:{during_chat_open:b},int:{queried_count:a},string:{direction:n,thread_id:s.to_string(t),thread_type:s.to_string(i)}}),d.set(l,C),C}function f(e,t){var n=m(e,t);return d.get(n)}l.startMLV2LoggerForThread=_,l.getMLV2LoggerForThread=f}),98);
__d("MLV2RangeExtensionLogger",["I64","MAWQPLLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return s==null&&(s=r("MAWQPLLogger")(r("qpl")._(1056843758,"1768"))),s}var c=new Map;function d(t,n){return(e||(e=o("I64"))).to_string(t)+n}function m(t,n,r,a){var i=d(t,n),l=c.get(i);l!=null&&l.markQPLCancel("restart_logger");var s=u().markQPLStart(),m=new Set,p={addQPLAnnotations:function(t){u().addQPLAnnotations(s,t)},annotateMessageRangesDataSource:function(t){m.add(t),u().addQPLAnnotations(s,{string_array:{message_ranges_source:Array.from(m.keys())}})},getInstanceKey:function(){return s},markQPLCancel:function(t){u().addQPLAnnotations(s,{string:{cancel_reason:t}}),u().markQPLCancel(s),c.delete(i)},markQPLFailure:function(t){u().markQPLFailure(s,t),c.delete(i)},markQPLFailureWithMsg:function(t){u().markQPLFailureWithMsg(s,t),c.delete(i)},markQPLPoint:function(t){u().markQPLPoint(s,t)},markQPLSuccess:function(){u().markQPLSuccess(s),c.delete(i)}};return p.addQPLAnnotations({bool:{is_initial_range:(e||(e=o("I64"))).equal(r.minTimestampMs,(e||(e=o("I64"))).max_int)&&(e||(e=o("I64"))).equal(r.maxTimestampMs,(e||(e=o("I64"))).max_int)},int:{page_size:a},string:{direction:n,start_range:JSON.stringify(babelHelpers.extends({},r,{maxTimestampMs:r.maxTimestampMs==null?null:(e||(e=o("I64"))).to_string(r.maxTimestampMs),minTimestampMs:r.minTimestampMs==null?null:(e||(e=o("I64"))).to_string(r.minTimestampMs)})),thread_id:(e||(e=o("I64"))).to_string(t)}}),c.set(i,p),p}function p(e,t){var n=d(e,t);return c.get(n)}l.startRangeExtensionLoggerForThread=m,l.getRangeExtensionLoggerForThread=p}),98);
__d("MessageRangeSet",["I64","ReplayLastSubject","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.value=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.next=function(n){this.value=n,e.prototype.next.call(this,n)},t})(o("ReplayLastSubject").ReplayLastSubject),u=(function(e){function t(t){var n;n=e.call(this,t)||this;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.forEach(function(e){n.subscribe({complete:function(){return e.complete()},error:function(n){return e.error(n)},next:function(n){return e.next(n)}})}),n.next(t),n}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(){function t(){this.$1=new Set}var n=t.prototype;return n.$2=function(n){for(var t of this.$1){var r=t.value;if((e||(e=o("I64"))).le(r.minTimestampMs,n)&&((e||(e=o("I64"))).ge(r.maxTimestampMs,n)||!r.hasMoreAfter))return t}return null},n.getRangeForTimestamp=function(t){return this.$2(t)},n.upsertRange=function(t){var e=Array.from(this.$1.values()).filter(function(e){return m(e.value,t)});if(e.length===0){var n=new s(t);return this.$1.add(n),n}var r=d.apply(void 0,e.map(function(e){return e.value}).concat([t]));if(e.length===1){var o=e[0];return o.next(r),o}for(var a of e)this.$1.delete(a);var i=babelHelpers.construct(u,[r].concat(e));return this.$1.add(i),i},t})();function d(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===0)throw r("err")("Cannot merge 0 ranges");for(var i=n[0].threadKey,l=n[0].minTimestampMs,s=n[0].hasMoreAfter,u=n[0].hasMoreBefore,c=n[0].maxMessageId,d=n[0].minMessageId,m=n[0].maxTimestampMs,p=1;p<n.length;p++){var _=n[p];(e||(e=o("I64"))).le(_.minTimestampMs,l)&&((e||(e=o("I64"))).equal(_.minTimestampMs,l)?u=u&&_.hasMoreBefore:u=_.hasMoreBefore,l=_.minTimestampMs,d=_.minMessageId),(e||(e=o("I64"))).ge(_.maxTimestampMs,m)&&((e||(e=o("I64"))).equal(_.maxTimestampMs,m)?s=s&&_.hasMoreAfter:s=_.hasMoreAfter,m=_.maxTimestampMs,c=_.maxMessageId)}return{hasMoreAfter:s,hasMoreBefore:u,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:c,maxTimestampMs:m,minMessageId:d,minTimestampMs:l,threadKey:i}}function m(t,n){var r=(e||(e=o("I64"))).le(n.minTimestampMs,t.minTimestampMs),a=r?n:t,i=r?t:n;return!!p(a,i.minTimestampMs)}function p(t,n){return(e||(e=o("I64"))).ge(n,t.minTimestampMs)&&(e||(e=o("I64"))).le(n,t.maxTimestampMs)}l.MessageRangeSet=c,l.Subject=s}),98);
__d("MpsLoadMessagesStep",["I64","MAWAckLevel","MAWLocalizationType","MAWMessagesDirection","MpsMessageToLoadResponse","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=e+"CUTOVER",a=o("MpsTypes").toMessageId(r),i=o("MpsTypes").toThreadId(r),l={ack:o("MAWAckLevel").ACK.received,adminContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,adminVersion:1,chatJid:e,externalId:r,forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(i,a),sender:"",sortOrderMs:0,ts:o("WATimeUtils").castToUnixTime(0),type_:"Admin"};t.msgs=[l].concat(t.msgs),n.endCursor=[o("MpsTypes").toTimestamp(0),a]}async function u(t){var n=t.chatJid,a=t.count,i=t.direction,l=t.logger,u=t.oldRange,c=t.oldRangeExternalIds;l==null||l.addQPLAnnotations({bool:{use_mps:!0}});var d=[o("MpsTypes").toTimestamp((e||(e=o("I64"))).to_float(o("MAWMessagesDirection").getI64RangeTimestampForDirection(i,u))),o("MpsTypes").toMessageId(o("MAWMessagesDirection").getRangeMsgIdForDirection(i,u))];l==null||l.markQPLPoint("mps_load_messages_start");var m=await o("MpsOverBridge").mps().loadMessages({debug:{purpose:"load-more"},direction:i,from:d,numMessages:a,threadId:o("MpsTypes").toThreadId(n)});if(m.success===!1)throw l==null||l.markQPLPoint("mps_load_messages_failure"),r("err")("Failed to fetch messages from MPS");var p=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:m.value.cursorInfo.hasNext,desc:m.value.cursorInfo.hasPrevious}),_=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:m.value.cursorInfo.hasPrevious,desc:m.value.cursorInfo.hasNext}),f=babelHelpers.extends({},o("MpsMessageToLoadResponse").messageToLoadMsgsResponse(m.value.messages,l),{hasMoreAfter:p,hasMoreBefore:_});_===!1&&i==="desc"&&s(n,f,m.value.cursorInfo);var g=u,h=c,y=m.value.cursorInfo.endCursor;return y!=null?(g=babelHelpers.extends({},u,o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{hasMoreAfter:p,isLoadingAfter:!1,maxMessageId:y[1],maxTimestampMs:(e||(e=o("I64"))).of_float(y[0])},desc:{hasMoreBefore:_,isLoadingBefore:!1,minMessageId:y[1],minTimestampMs:e.of_float(y[0])}})),h=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{maxExternalId:y[1],minExternalId:c.minExternalId},desc:{maxExternalId:c.maxExternalId,minExternalId:y[1]}})):g=babelHelpers.extends({},u,o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{hasMoreAfter:p,isLoadingAfter:!1},desc:{hasMoreBefore:_,isLoadingBefore:!1}})),l==null||l.markQPLPoint("mps_load_messages_end"),{extension:f,status:"complete_with_range_override",updatedRange:g,updatedRangeExternalIds:h}}l.addCutoverAdminMessage=s,l.MpsLoadMessagesStep=u}),98);
__d("switchMap",["relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("relay-runtime").Observable.create(function(n){var r,o=e.subscribe({complete:n.complete,error:n.error,next:function(o){var e;(e=r)==null||e.unsubscribe(),r=t(o).subscribe(n)}});return function(){var e;(e=r)==null||e.unsubscribe(),o.unsubscribe()}})}l.default=e}),98);
__d("MAWMessageRangeDataSourceV2",["I64","LSDatabaseSingleton","MAWEBCombinedSwitch","MAWMessageIntegrityTruncateStatus","MAWMessageRangeDataExternalObservables","MAWMessagesPaginationUtils","MAWMessagesRangesUtils","MAWMpsGating","MAWMpsM3RangeExtension","MAWPutMessagesToDB","MAWSubscribeToLSTruncateMetadataThreads","MAWWaitForACTThreadReadyForMLv2","MLV2DataSourceLogger","MLV2RangeExtensionLogger","MessageRangeSet","MpsLoadMessagesStep","err","gkx","nullthrows","relay-runtime","switchMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=5,c=(function(){function t(t,n){var a=this;this.$2=new(o("MessageRangeSet")).MessageRangeSet,this.$3=u,this.$4=new(o("MAWMessageRangeDataExternalObservables")).MAWMessageRangeDataExternalObservables,this.getOrCreateMessageRangeCoveringCursor=function(t,n,r){var i,l;n==null||n.annotateMessageRangesDataSource("MAWMessageRangeDataSourceV2"),n==null||n.markQPLPoint("maw_get_or_create_range_start");var s=a.$2.getRangeForTimestamp(t.timestampMs);if(s!=null){n==null||n.markQPLPoint("maw_preexisting_range"),n==null||n.markQPLPoint("maw_get_or_create_range_end");var u={maxExternalId:null,minExternalId:null};return a.$4.getOrCreateExternalObservableForRange(s,u)}var c=(e||(e=o("I64"))).equal(t.timestampMs,e.max_int),d={hasMoreAfter:!c,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(i=t.messageId)!=null?i:"",maxTimestampMs:t.timestampMs,minMessageId:(l=t.messageId)!=null?l:"",minTimestampMs:t.timestampMs,threadKey:a.$1},m=a.$2.upsertRange(d);return o("MAWMessageIntegrityTruncateStatus").setThreadLastUpsertedRange(a.$1,d,{maxExternalId:t==null?void 0:t.externalId,minExternalId:t==null?void 0:t.externalId}),n==null||n.markQPLPoint("maw_range_created"),n==null||n.markQPLPoint("maw_get_or_create_range_end"),a.$4.getOrCreateExternalObservableForRange(m,{maxExternalId:t==null?void 0:t.externalId,minExternalId:t==null?void 0:t.externalId})},this.$5=function(e){var t=o("MLV2DataSourceLogger").getMLV2LoggerForThread(a.$1,e),n=o("MLV2RangeExtensionLogger").getRangeExtensionLoggerForThread(a.$1,e),r={addQPLAnnotations:function(r){t==null||t.addQPLAnnotations(r),n==null||n.addQPLAnnotations(r)},annotateMessageRangesDataSource:function(r){t==null||t.annotateMessageRangesDataSource(r),n==null||n.annotateMessageRangesDataSource(r)},getInstanceKey:function(){var e;return(e=t==null?void 0:t.getInstanceKey())!=null?e:0},markQPLCancel:function(r){t==null||t.markQPLCancel(r),n==null||n.markQPLCancel(r)},markQPLFailure:function(r){t==null||t.markQPLFailure(r),n==null||n.markQPLFailure(r)},markQPLFailureWithMsg:function(r){t==null||t.markQPLFailureWithMsg(r),n==null||n.markQPLFailureWithMsg(r)},markQPLPoint:function(r,o){t==null||t.markQPLPoint(r,o),n==null||n.markQPLPoint(r,o)},markQPLSuccess:function(r){t==null||t.markQPLSuccess(r),n==null||n.markQPLSuccess()}};return r},this.extendRange=async function(t,n,r,i,l){var s=a.$5(r);s.annotateMessageRangesDataSource("MAWMessageRangeDataSourceV2"),s.markQPLPoint("maw_v2_extend_range_start");var u=a.$2.getRangeForTimestamp(t.minTimestampMs);if(u==null)return s.markQPLPoint("extend_range_invalid"),Promise.resolve();var c=u.value;s.markQPLPoint("get_range_external_ids_start");var d=await o("MAWMessagesPaginationUtils").getMessagesRangesV2ExternalIdsIfChanged(t,c,n);if(s.markQPLPoint("get_range_external_ids_end"),r==="asc"&&(!c.hasMoreAfter||c.isLoadingAfter)||r==="desc"&&(!c.hasMoreBefore||c.isLoadingBefore))return s.markQPLPoint("extend_range_skipped"),Promise.resolve();var m=a.$4.getOrCreateExternalObservableForRange(u,d);m.next({range:babelHelpers.extends({},c,{isLoadingAfter:c.isLoadingAfter||r==="asc",isLoadingBefore:c.isLoadingBefore||r==="desc"}),rangeExternalIds:d});var p={maxMessageId:u.value.maxMessageId,maxTimestampMs:u.value.maxTimestampMs,minMessageId:u.value.minMessageId,minTimestampMs:u.value.minTimestampMs};return s.markQPLPoint("perf_range_extension_start"),a.$6(u.value,d,m,r,i,l).then(function(){var t=(e||(e=o("I64"))).equal(p.maxTimestampMs,u.value.maxTimestampMs)&&(e||(e=o("I64"))).equal(p.minTimestampMs,u.value.minTimestampMs)&&u.value.maxMessageId===p.maxMessageId&&u.value.minMessageId===p.minMessageId;s.markQPLPoint("perf_range_extension_end"),s.addQPLAnnotations({bool:{extended_range_is_identical:t}})}).catch(function(e){throw s.markQPLPoint("extend_range_failed"),s.addQPLAnnotations({string:{range_extension_error:e instanceof Error?e.message:"unknown_error"}}),e})},this.$6=async function(e,t,n,r,i,l){var u=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,c=a.$5(r);c==null||c.markQPLPoint("maw_wait_act_thread_start");var d=await o("MAWWaitForACTThreadReadyForMLv2").waitForACTThreadReadyForMLv2(u.tables,a.$1,"MAWMessageRangeDataSourceV2",c).then(function(e){return e.chatJid});c==null||c.markQPLPoint("maw_wait_act_thread_end");var m=a.$7(),p=null;for(var _ of m){var f=_.name,g=_.step,h=await a.$8(g,f,{chatJid:d,count:i,db:u,direction:r,dispatch:l,logger:c,oldRange:e,oldRangeExternalIds:t,prevResponse:p},n);if(h.shouldTerminate)return;p=h.extension}},this.$8=async function(e,t,n,i){var l=n.db,s=n.direction,u=n.logger,c=n.oldRange,d=n.oldRangeExternalIds;u==null||u.markQPLPoint("maw_range_"+t+"_start");var m=await e(n);if(u==null||u.markQPLPoint("maw_range_"+t+"_end"),m.status==="try_again"){if(u==null||u.markQPLPoint("maw_range_"+t+"_retry"),r("gkx")("7409")&&a.$3>0)return u==null||u.markQPLPoint("maw_range_"+t+"_timed_out"),a.$3-=1,i.next({range:babelHelpers.extends({},c,{isLoadingAfter:!1,isLoadingBefore:!1}),rangeExternalIds:d}),{shouldTerminate:!0};throw r("err")("Timed out for step: "+t)}return m.status==="complete"?(u==null||u.markQPLPoint("insert_msgs_to_lsdb_start"),u==null||u.addQPLAnnotations({int:{num_msgs_to_insert:m.extension.msgs.length}}),await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(l,m.extension,u==null?void 0:u.getInstanceKey()),u==null||u.markQPLPoint("insert_msgs_to_lsdb_end"),u==null||u.markQPLPoint("maw_upsert_range_start"),a.$9(c,d,i,s,m.extension),u==null||u.markQPLPoint("maw_upsert_range_end"),{shouldTerminate:!0}):m.status==="complete_with_range_override"?(u==null||u.markQPLPoint("insert_msgs_to_lsdb_start"),u==null||u.addQPLAnnotations({int:{num_msgs_to_insert:m.extension.msgs.length}}),await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(l,m.extension,u==null?void 0:u.getInstanceKey()),u==null||u.markQPLPoint("insert_msgs_to_lsdb_end"),u==null||u.markQPLPoint("maw_upsert_range_start"),a.$10(i,m.updatedRange,m.updatedRangeExternalIds),u==null||u.markQPLPoint("maw_upsert_range_end"),{shouldTerminate:!0}):{extension:m.extension,shouldTerminate:!1}},this.$9=function(e,t,n,r,i){var l=o("MAWMessagesRangesUtils").mergeMoreMessagesResponseIntoRange(e,t,i,r),s=l[0],u=l[1];a.$10(n,s,u)},this.$1=t,this.isEBEnabled=n}var n=t.prototype;return n.$7=function(){var e={name:"fallback",step:function(t){var e=t.prevResponse;return Promise.resolve({extension:r("nullthrows")(e),status:"complete"})}};return o("MAWMpsGating").isMpsMessageRendering()?[{name:"mps_load_messages",step:o("MpsLoadMessagesStep").MpsLoadMessagesStep},e]:[{name:"mps_m3_fetch_data",step:o("MAWMpsM3RangeExtension").mpsM3RangeExtension},e]},n.$10=function(t,n,r){var e=this.$2.upsertRange(n);o("MAWMessageIntegrityTruncateStatus").setThreadLastUpsertedRange(this.$1,n,r),t.next({range:e.value,rangeExternalIds:r})},t})();function d(){return o("relay-runtime").Observable.create(function(e){var t=o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.onSet(function(t){e.next(t===!0)});return e.next(o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled()),function(){t()}})}var m=(function(){function t(t){var n=this;this.$1=new Map,this.$3=null,this.getOrCreateMessageRangeCoveringCursor=function(e,t,o){var a=e.threadKey;return r("switchMap")(n.$2,function(r){return n.$4(a,r).getOrCreateMessageRangeCoveringCursor(e,t,o)})},this.extendRange=function(t,a,i,l,s){var u=t.threadKey,c=o("MLV2RangeExtensionLogger").startRangeExtensionLoggerForThread(u,i,t,l);return n.$1.has((e||(e=o("I64"))).to_string(u))?r("nullthrows")(n.$1.get((e||(e=o("I64"))).to_string(u))).extendRange(t,a,i,l,s).then(function(){c.markQPLSuccess()}).catch(function(e){throw c.markQPLFailure(e),e}):(c.markQPLFailure(r("err")("thread range not found in cache")),Promise.resolve())},this.$2=d(),this.$3=o("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(t,function(t,r){var a=(e||(e=o("I64"))).to_string(r);n.$1.delete(a)&&o("MAWMessageIntegrityTruncateStatus").setThreadThuncated(r)})}var n=t.prototype;return n.$4=function(n,a){var t=(e||(e=o("I64"))).to_string(n);if(!this.$1.has(t)){var i=new c(n,a);this.$1.set(t,i)}var l=r("nullthrows")(this.$1.get(t));return l.isEBEnabled!==a&&(l=new c(n,a),this.$1.set(t,l)),l},t})(),p,_;function f(e){return(p==null||_!==e)&&(_=e,p=new m(e)),p}l.default=f}),98);
__d("MAWPreloadSecureMessagesRangeDataSource",["MAWMessageRangeDataSourceV2"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MAWMessageRangeDataSourceV2")}),98);
__d("MAWPreloadSecureMessages",["I64","LSAuthorityLevel","LSIntEnum","LSResult","MAWMessagesDirection","MAWPreloadSecureMessagesRangeDataSource","MWV2OnAuthoritativeThreadInsert","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a,i,l,u){var t;if(!(e||(e=o("I64"))).equal(u,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return Promise.resolve();var c=r("MAWPreloadSecureMessagesRangeDataSource")(n),d,m=await new Promise(function(t,n){d=c.getOrCreateMessageRangeCoveringCursor({externalId:null,messageId:null,threadKey:a,timestampMs:(e||(e=o("I64"))).max_int},void 0,i).subscribe({complete:t,error:n,next:function(n){t(n)}})});if((t=d)==null||t.unsubscribe(),m&&o("MAWMessagesDirection").isFirstPageRange(m.range,"desc"))return c.extendRange(m.range,{maxExternalId:null,minExternalId:null},"desc",l,i)},c=async function(n,a){var t=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(n.tables.threads).getKeyRange(a));if(t==null)return null;if((e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return t;var i=t.clientThreadKey;return i!=null?new Promise(function(e){o("MWV2OnAuthoritativeThreadInsert").onAuthoritativeThreadInsert(r("LSResult")(i),n,function(t){return e(t)})}):null},d=async function(t,n,r,o){var e=await c(t,n);return e==null?Promise.resolve():u(t,e.threadKey,r,o,e.authorityLevel)};l.preloadSecureMessages=u,l.preloadSecureMessagesByThreadKey=d}),98);
__d("MWEnsureCutoverOpenThreadExists",["Int64Hooks","LSFactory","LSIntEnum","LSVerifyThreadRowExistsStoredProcedure","MAWThreadCutover","MWGetChatTabOpenQPLEventTrace","ReQL","ReQLSuspense","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t){var n=await o("ReQL").firstAsync(o("MAWThreadCutover").getMiActMappings(e,t));if(n!=null){var a=await o("ReQL").firstAsync(o("MAWThreadCutover").getCutoverThreadsByJid(e,n.jid));if(a!=null){var l=a.openThreadId,u=await o("ReQL").firstAsync(o("MAWThreadCutover").getThreadByCutoverThread(e,a));if(u==null)return e.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:l})},"readwrite",void 0,void 0,i.id+":54")}}}function c(t){var n=o("react-compiler-runtime").c(10),a=(e||(e=r("useReStore")))(),l=o("MAWThreadCutover").useGetCutoverOpenThreadKey(t),u,c;n[0]!==a||n[1]!==l?(u=function(){return l==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(l)},c=[a,l],n[0]=a,n[1]=l,n[2]=u,n[3]=c):(u=n[2],c=n[3]);var m=o("ReQLSuspense").useFirst(u,c,i.id+":68"),p,_;n[4]!==m||n[5]!==a||n[6]!==l||n[7]!==t?(p=function(){m==null&&l!=null&&r("promiseDone")(a.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:l})},"readwrite",void 0,void 0,i.id+":78"),function(){r("MWGetChatTabOpenQPLEventTrace")(t,d)})},_=[m,a,l,t],n[4]=m,n[5]=a,n[6]=l,n[7]=t,n[8]=p,n[9]=_):(p=n[8],_=n[9]),o("Int64Hooks").useEffectInt64(p,_)}function d(e){e.addMarkerPoint("requested_cutover_open_thread","AppTiming")}l.ensureCutoverOpenThreadExists=u,l.useMWEnsureCutoverOpenThreadExists=c}),98);
__d("withCometPlaceholder",["CometPlaceholder.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=function(t,n,o){return n===void 0&&(n=null),(function(e){return s.jsx(r("CometPlaceholder.react"),{fallback:n,name:o,children:s.jsx(t,babelHelpers.extends({},e))})})};l.withCometPlaceholder=u}),98);
__d("MWPPresenceBadge.react",["fbt","BaseStyledBadge.react","MessengerMSplitFlag","react","react-compiler-runtime","withCometPlaceholder"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=o("withCometPlaceholder").withCometPlaceholder(m,null,"MWPPresenceBadge"),d={border:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",$$css:!0},green:{backgroundColor:"xv9rvxn",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(4),n=e.borderThemeColor,a=e.isActiveStatePresence,i=e.size,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=!r("MessengerMSplitFlag").is_msplit_account&&a?u.jsx(r("BaseStyledBadge.react"),{accessibilityText:s._(/*BTDS*/"Active now"),border:!0,colorXStyle:d.green,size:i,xstyle:n!=null?n:d.border}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=c}),226);
__d("MWPReQLPresenceBadge.react",["MWPPresenceBadge.react","cr:7905","react","react-compiler-runtime","withCometPlaceholder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("withCometPlaceholder").withCometPlaceholder(c,null,"MWPReQLPresenceBadge");function c(e){var t=o("react-compiler-runtime").c(4),a=e.borderThemeColor,i=e.size,l=e.threadKey,u=n("cr:7905")(l),c;return t[0]!==a||t[1]!==u||t[2]!==i?(c=s.jsx(r("MWPPresenceBadge.react"),{borderThemeColor:a,isActiveStatePresence:u,size:i}),t[0]=a,t[1]=u,t[2]=i,t[3]=c):c=t[3],c}l.default=u}),98);
__d("MWFacepileBadge.react",["CometPlaceholder.react","MWPReQLPresenceBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.borderThemeColor,a=e.size,i=e.threadKey,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWFacepileBadge",children:s.jsx(r("MWPReQLPresenceBadge.react"),{borderThemeColor:n,size:a,threadKey:i})}),t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("MWPContactContext.react",["react","react-compiler-runtime","shallowEqualI64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=u.useRef,p=s.createContext({authorName:void 0,contact:void 0,nickname:void 0}),_=s.createContext({authorName:void 0,contact:void 0,nickname:void 0});function f(){return c(p)}function g(){return c(_)}function h(e){var t=o("react-compiler-runtime").c(14),n=e.children,r=e.contact,a=e.nickname,i,l;if(a!=null)l=a;else if(r!=null){var u=r.firstName;l=u!=null?u:r.name}else l=void 0;i=l;var c=i,d,m;t[0]!==c||t[1]!==r||t[2]!==a?(m={authorName:c,contact:r,nickname:a},t[0]=c,t[1]=r,t[2]=a,t[3]=m):m=t[3],d=m;var f=d,g=y(r),h,C;t[4]!==c||t[5]!==a||t[6]!==g?(C={authorName:c,contact:g,nickname:a},t[4]=c,t[5]=a,t[6]=g,t[7]=C):C=t[7],h=C;var b=h,v;t[8]!==n||t[9]!==b?(v=s.jsx(_.Provider,{value:b,children:n}),t[8]=n,t[9]=b,t[10]=v):v=t[10];var S;return t[11]!==f||t[12]!==v?(S=s.jsx(p.Provider,{value:f,children:v}),t[11]=f,t[12]=v,t[13]=S):S=t[13],S}function y(e){var t=m(),n=e?{blockedByViewerStatus:e.blockedByViewerStatus,capabilities:e.capabilities,capabilities2:e.capabilities2,contactTypeExact:e.contactTypeExact,name:e.name,profilePictureFallbackUrl:e.profilePictureFallbackUrl,profilePictureUrl:e.profilePictureUrl,profilePictureUrlExpirationTimestampMs:e.profilePictureUrlExpirationTimestampMs,secondaryName:e.secondaryName}:void 0;return o("shallowEqualI64").shallowEqualI64(t.current,n)||(t.current=n),t.current}l.useMWPContactFullContext=f,l.useMWPContactStableContext=g,l.MWPContactContextProvider=h}),98);
__d("MWGroupBlockingProtectionUtils",["fbt","FBLogger","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWPContactContext.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=o("react-compiler-runtime").c(8),a=(c||(c=r("useReStore")))(),l;n[0]!==a.tables.threads||n[1]!==t?(l=function(){return o("ReQL").fromTableAscending(a.tables.threads,["threadType"]).getKeyRange(t).map(m)},n[0]=a.tables.threads,n[1]=t,n[2]=l):l=n[2];var s;n[3]!==a||n[4]!==t?(s=[a,t],n[3]=a,n[4]=t,n[5]=s):s=n[5];var d=o("ReQLSuspense").useFirst(l,s,i.id+":30");if(d==null)return!1;var p;return n[6]!==d?(p=(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(16))||(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(18)),n[6]=d,n[7]=p):p=n[7],p}function m(e){return e.threadType}function p(t){var n=d(t),a=o("MWPContactContext.react").useMWPContactStableContext(),i=a.contact;return n&&i?!(e||(e=o("I64"))).equal(i.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)):!1}function _(t,n){var a=o("react-compiler-runtime").c(4),l=(c||(c=r("useReStore")))(),s,m;a[0]!==l||a[1]!==t?(s=function(){return t!=null?o("ReQL").fromTableAscending(l.tables.contacts).getKeyRange(t):o("ReQL").empty()},m=[l,t],a[0]=l,a[1]=t,a[2]=s,a[3]=m):(s=a[2],m=a[3]);var p=o("ReQLSuspense").useFirst(s,m,i.id+":69"),_=d(n);return _&&p?!(e||(e=o("I64"))).equal(p.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)):!1}function f(t,n){var a,l,d=o("react-compiler-runtime").c(8),m=(c||(c=r("useReStore")))(),p=(a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableDescending(m.tables.messages).getKeyRange(t)},[m,t],i.id+":92"))==null?void 0:a.senderId,_;d[0]!==m.tables.contacts||d[1]!==p?(_=function(){return p!=null?o("ReQL").fromTableAscending(m.tables.contacts).getKeyRange(p):o("ReQL").empty()},d[0]=m.tables.contacts,d[1]=p,d[2]=_):_=d[2];var f;d[3]!==m||d[4]!==p?(f=[m,p],d[3]=m,d[4]=p,d[5]=f):f=d[5];var g=o("ReQLSuspense").useFirst(_,f,i.id+":96"),h=g==null?!1:!(e||(e=o("I64"))).equal(g.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),y=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(16))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18));if(!(y&&h))return null;var C=(l=g==null?void 0:g.firstName)!=null?l:g==null?void 0:g.name;if(C==null)return r("FBLogger")("messenger_web_wellbeing").mustfix("Empty first name for blocked contact"),null;var b;return d[6]!==C?(b=s._(/*BTDS*/"{blocked contact's name} sent a message.",[s._param("blocked contact's name",C)]).toString(),d[6]=C,d[7]=b):b=d[7],b}l.useShouldEnableBlockingProtection=d,l.useMWGetSnippetForBlockingProtection=f,l.useMWIsContactBlocked=p,l.useMWIsMessageSentByBlockedContact=_}),226);
__d("useGetContactsToShow",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","getLSMediaContactProfilePictureUrl","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i,l=o("react-compiler-runtime").c(40),s;l[0]!==a?(s=function(n){return n.filter(function(t){return!(e||(e=o("I64"))).equal(t.id,a)})},l[0]=a,l[1]=s):s=l[1];var d=s,m=n.length,p,_,f,g;if(l[2]!==a||l[3]!==n||l[4]!==d||l[5]!==m||l[6]!==t.threadType){var h=[];if(p=[],m!==0){var y=n[0],C=n[1];p=d(n.filter(Boolean).filter(c));e:switch(m){case 1:{if(y!=null&&r("getLSMediaContactProfilePictureUrl")(y)!==""){var b;l[11]!==y?(b=[y],l[11]=y,l[12]=b):b=l[12],h=b}break e}case 2:{if(o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p.length===1&&r("getLSMediaContactProfilePictureUrl")(p[0])!==""){var v=p,S;l[13]!==v[0]?(S=[v[0]],l[13]=v[0],l[14]=S):S=l[14],h=S}else if(o("LSMessagingThreadTypeUtil").isGroup(t.threadType)&&y!=null&&C!=null&&r("getLSMediaContactProfilePictureUrl")(y)!==""&&r("getLSMediaContactProfilePictureUrl")(C)!==""){var R;l[15]!==y||l[16]!==C?(R=[y,C],l[15]=y,l[16]=C,l[17]=R):R=l[17],h=R}break e}default:p.length>=2&&(h=p)}}var L;l[18]!==p||l[19]!==t.threadType?(L=o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p.length===0,l[18]=p,l[19]=t.threadType,l[20]=L):L=l[20],_=L;var E;if(l[21]!==a||l[22]!==n){var k;l[24]!==a?(k=function(n){return n!=null&&(e||(e=o("I64"))).equal(n.id,a)},l[24]=a,l[25]=k):k=l[25],E=n.find(k),l[21]=a,l[22]=n,l[23]=E}else E=l[23];f=E,g=h.sort(u).slice(0,2),l[2]=a,l[3]=n,l[4]=d,l[5]=m,l[6]=t.threadType,l[7]=p,l[8]=_,l[9]=f,l[10]=g}else p=l[7],_=l[8],f=l[9],g=l[10];var I=g,T;if(l[26]!==p.length||l[27]!==_||l[28]!==m||l[29]!==I||l[30]!==((i=f)==null?void 0:i.id)||l[31]!==t.threadType){var D;T=function(){var n,a;m===2&&!_&&o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&I.length===1&&(e||(e=o("I64"))).equal(I[0].id,(n=(a=f)==null?void 0:a.id)!=null?n:(e||(e=o("I64"))).minus_one)&&r("FBLogger")("messenger_web").mustfix("One to one thread with participants is showing self contact. Num contacts without self: %s",p.length)},l[26]=p.length,l[27]=_,l[28]=m,l[29]=I,l[30]=(D=f)==null?void 0:D.id,l[31]=t.threadType,l[32]=T}else T=l[32];var x;return l[33]!==p.length||l[34]!==_||l[35]!==m||l[36]!==I||l[37]!==f||l[38]!==t.threadType?(x=[m,_,t.threadType,I,f,p.length],l[33]=p.length,l[34]=_,l[35]=m,l[36]=I,l[37]=f,l[38]=t.threadType,l[39]=x):x=l[39],o("Int64Hooks").useEffectInt64(T,x),I}function u(e,t){return t.rank-e.rank}function c(e){return r("getLSMediaContactProfilePictureUrl")(e)!==""}l.default=s}),98);
__d("useMWFacepileGetContactsToShow",["I64","LSAuthorityLevel","LSGroupParticipantJoinState","LSIntEnum","MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime","useGetContactsToShow","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a){var l=o("react-compiler-runtime").c(14),c=a===void 0?!1:a,m=o("MWPActor.react").useActor(),p=(u||(u=r("useReStore")))(),_;l[0]!==p.tables.contacts||l[1]!==p.tables.participants||l[2]!==c||l[3]!==t?(_=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(p.tables.participants,["groupParticipantJoinState"]).getKeyRange(t),o("ReQL").fromTableAscending(p.tables.contacts,["rank","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs","id","name","authorityLevel"])).filter(function(t){var n=t[0],a=t[1];return(e||(e=o("LSIntEnum"))).toNumber(n.groupParticipantJoinState)!==r("LSGroupParticipantJoinState").MEMBER?!1:!c||a!=null&&c&&(s||(s=o("I64"))).to_int32(a.authorityLevel)>=r("LSAuthorityLevel").AUTHORITATIVE}).take(3)},l[0]=p.tables.contacts,l[1]=p.tables.participants,l[2]=c,l[3]=t,l[4]=_):_=l[4];var f;l[5]!==p||l[6]!==c||l[7]!==t?(f=[p,t,c],l[5]=p,l[6]=c,l[7]=t,l[8]=f):f=l[8];var g=o("ReQLSuspense").useArray(_,f,i.id+":61"),h;l[9]!==g?(h=g.map(d),l[9]=g,l[10]=h):h=l[10];var y=h,C;return l[11]!==t||l[12]!==n?(C={threadKey:t,threadType:n},l[11]=t,l[12]=n,l[13]=C):C=l[13],r("useGetContactsToShow")(C,y,m)}function d(e){var t=e[1];return t}l.default=c}),98);
__d("usePresenceUnifiedIsThreadActive",["FBLogger","I64","Int64Hooks","MWPActor.react","PresenceCommonPresenceCommonTypes","ReQL","promiseDone","react","useAsyncReStore","usePresenceUnifiedClientContext","usePresenceUnifiedMapContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState;function m(e){var t=r("useAsyncReStore")(),n=o("MWPActor.react").useActor(),a=o("usePresenceUnifiedMapContext").usePresenceUnifiedMapContext(),i=o("usePresenceUnifiedClientContext").usePresenceUnifiedClientContext(),l=d(!1),u=l[0],m=l[1],p=o("Int64Hooks").useCallbackInt64(async function(){var r=await t;return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(r.tables.participants,["contactId"]).getKeyRange(e).filter(function(e){var t=e.contactId;return!(s||(s=o("I64"))).equal(t,n)}).map(function(e){var t=e.contactId;return(s||(s=o("I64"))).to_string(t)}))},[n,t,e]);return c(function(){var e=async function(){var e=await p();i==null||i.addAdditionalContacts(e)};r("promiseDone")(e())},[]),c(function(){var e=async function(){if(i==null){r("FBLogger")("messenger_presence_web").warn("usePresenceUnifiedIsThreadActive must have a backing PresenceUnifiedClient");return}var e=await p(),t=e.some(function(e){var t;return((t=a.get(e))==null?void 0:t.presenceStatus)===o("PresenceCommonPresenceCommonTypes").PresenceStatus.Active});m(t)};r("promiseDone")(e())},[p,i,a]),u}l.default=m}),98);/*FB_PKG_DELIM*/
__d("CometFeedInlineComposerWOYM_profile.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerWOYM_profile",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null}],type:"User",abstractKey:null}],type:"Actor",abstractKey:"__isActor"};a.exports=e}),null);
__d("CometFeedInlineComposerWOYM.react",["CometFeedInlineComposerWOYM_profile.graphql","CometRefineRef","CometRelay","TextInputButton.react","cr:1654613","mergeRefs","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=t.additionalInputButtonRef,i=t.onHoverInPrerenderer,l=t.onHoverOutPrerenderer,s=t.onPress,c=t.onPressInPrerenderer,d=t.postPlainText,m=t.profile$key,p=t.triggerRef,_=o("CometRelay").useFragment(e!==void 0?e:e=n("CometFeedInlineComposerWOYM_profile.graphql"),m),f=n("cr:1654613")(_==null?void 0:_.short_name),g=d!=null?d:f;return u.jsx(r("TextInputButton.react"),{isUserEnteredPreviewText:d!=null,label:g,onHoverIn:i,onHoverOut:l,onPress:s,onPressIn:c,ref:r("mergeRefs")(r("CometRefineRef")(p),a),testid:void 0})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("CometMegaphoneQuickPromotionSection_quickPromotion.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMegaphoneQuickPromotionSection_quickPromotion",selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"2e5U5"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometPrimaryTestUserUpsellQP_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometPrimaryTestUserUpsellQP",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometStandardMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometStandardMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionNonprofitMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionNonprofitMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPDiglossiaSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPDiglossiaSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPRegularSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPRegularSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullImageMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullImageMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullBleedImageRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullBleedImageRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionTransparencyInformPlatformRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionTransparencyInformPlatformRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAPPlusCreateBroadcastChannelRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAPPlusCreateBroadcastChannelRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneMPWBulkMigrationRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWMPWBulkMigrationWarningRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"2e5U5")'}],storageKey:null}],type:"QuickPromotion",abstractKey:null};a.exports=e}),null);
__d("CometMegaphoneQuickPromotionSection.react",["CometErrorBoundary.react","CometMegaphoneQuickPromotionSection_quickPromotion.graphql","CometQuickPromotionLoggerContext.react","CometRelay","FDSCard.react","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={section:"quick_promotion",surface:"PROFILE_NEWSFEED_MEGAPHONE"};function d(t){var a,i=o("react-compiler-runtime").c(4),l=t.quickPromotion,s=o("CometRelay").useFragment(e!==void 0?e:e=n("CometMegaphoneQuickPromotionSection_quickPromotion.graphql"),l),d;i[0]===Symbol.for("react.memo_cache_sentinel")?(d={context_surface_id:2646,context_trigger:"newsfeed"},i[0]=d):d=i[0];var m=r("useQuickPromotionFalcoEvent")(d),p=s==null||(a=s.comet_qp_sections)==null?void 0:a.renderer_strategy,_;return i[1]!==m||i[2]!==p?(_=p!=null?u.jsx(r("CometQuickPromotionLoggerContext.react").Provider,{value:m,children:u.jsx(r("CometErrorBoundary.react"),{children:u.jsx("div",{className:"x1yztbdb",children:u.jsx(r("FDSCard.react"),{background:"default",dropShadow:1,children:u.jsx(o("CometRelay").MatchContainer,{match:p,props:c})})})})}):null,i[1]=m,i[2]=p,i[3]=_):_=i[3],_}l.default=d}),98);
__d("FDSLikeFilled12Icon",["cr:15200"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:15200")}),98);
__d("FDSLikeFilled12PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("509920"),12),u=e;l.default=u}),98);
__d("MWAPPlusCreateBroadcastChannelDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="31546735354917848"}),null);
__d("MWAPPlusCreateBroadcastChannelDialogQuery$Parameters",["MWAPPlusCreateBroadcastChannelDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWAPPlusCreateBroadcastChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWAPPlusCreateBroadcastChannelDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWAPPlusCreateBroadcastChannelDialog.entrypoint",["JSResourceForInteraction","MWAPPlusCreateBroadcastChannelDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e="421774700805768",s="760051096197486",u="1547241102502500",c={getPreloadProps:function(n){var t,o=n.isDarkModeEnabled,a=n.routeProps,i=(t=o!=null?o:a==null?void 0:a.isDarkModeEnabled)!=null?t:!1,l=!i;return{extraProps:{fetchAnimations:l},queries:{queryReference:{parameters:r("MWAPPlusCreateBroadcastChannelDialogQuery$Parameters"),variables:{assetID0:e,assetID1:s,assetID2:u,fetchAnimations:l}}}}},root:r("JSResourceForInteraction")("MWAPPlusCreateBroadcastChannelDialog.react").__setRef("MWAPPlusCreateBroadcastChannelDialog.entrypoint")};l.default=c}),98);
__d("StoriesActivityBadgeDeferred.react",["deferredLoadComponent","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("CometActivityBadge.react").__setRef("StoriesActivityBadgeDeferred.react")),c=u;l.default=c}),98);
__d("StoriesTrayTileAvatar.react",["fbt","CometPlaceholder.react","CometSSRReplaceContentOnHydrationAndBreakEventReplaying.react","CometVisualCompletionAttributes","FDSLoadingAnimation.react","FDSText.react","StoriesActivityBadgeDeferred.react","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={activeBadge:{bottom:"xn0vg7t",insetInlineEnd:"xys98vm",left:null,right:null,position:"x10l6tqk",$$css:!0},borderBlue:{borderTopColor:"x1tz4bnf",borderInlineEndColor:"x1yqjg3l",borderBottomColor:"x25epmt",borderInlineStartColor:"xkkygvr",$$css:!0},borderGreen:{borderTopColor:"x751hie",borderInlineEndColor:"x1u8va7r",borderBottomColor:"xnatle3",borderInlineStartColor:"xos4puk",$$css:!0},borderRed:{borderTopColor:"x1mqrs8o",borderInlineEndColor:"x1eayinb",borderBottomColor:"xip93fl",borderInlineStartColor:"x13wnz0e",$$css:!0},borderTransparent:{borderTopColor:"x1v8p93f",borderInlineEndColor:"x1o3jo1z",borderBottomColor:"x16stqrj",borderInlineStartColor:"xv5lvn5",$$css:!0},borderWhite:{borderTopColor:"xsdn2ir",borderInlineEndColor:"xpkn66y",borderBottomColor:"x13awxeq",borderInlineStartColor:"xuxekev",$$css:!0},liveText:{backgroundColor:"x1ciooss",borderStartStartRadius:"xjwep3j",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"x1pczhz8",bottom:"xbfrwjf",insetInlineStart:"xzwoauc",left:null,right:null,paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingInlineStart:"x1djpfga",paddingInlineEnd:"x1im30kd",paddingLeft:null,paddingRight:null,position:"x10l6tqk",textAlign:"x2b8uid",width:"x23j0i4",$$css:!0},loadingOverlay:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",height:"x5yr21d",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",top:"x13vifvy",zIndex:"x1yyfhjw",$$css:!0},opaqueBackground:{backgroundColor:"x1jx94hy",$$css:!0},ringedBorder:{borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x1gp4ovq",borderInlineEndWidth:"x9p2oo0",borderBottomWidth:"x1h2mt7u",borderInlineStartWidth:"x56jcm7",$$css:!0},spinner:{insetInlineStart:"x1o4gcgt",left:null,right:null,position:"x1n2onr6",top:"x1lg0oad",$$css:!0},wrapper:{alignItems:"x6s0dn4",backgroundColor:"x1wpzbip",borderStartStartRadius:"xvs2etk",borderStartEndRadius:"xg3wpu6",borderEndEndRadius:"x1jwbhkm",borderEndStartRadius:"xgg4q86",boxSizing:"x9f619",display:"x78zum5",height:"x1vqgdyp",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"x100vrsf",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(25),n=e.children,a=e.hasNew,l=e.isLiveStreaming,d=e.isOnline,m=e.isOpaqueBackground,p=e.isUploading,_=e.shouldShowCloseFriendsBadge,f=l===void 0?!1:l,g=d===void 0?!1:d,h=p===void 0?!1:p,y=_===void 0?!1:_,C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"LIVE"),t[0]=C):C=t[0];var b=C,v=m===!0&&c.opaqueBackground,S=n!=null&&c.ringedBorder,R=a===!0&&!h&&y&&c.borderGreen,L=a===!0&&!h&&!y&&c.borderBlue,E=a!==!0&&!h&&c.borderWhite,k=h&&!f&&c.borderTransparent,I=f&&c.borderRed,T;t[1]!==E||t[2]!==k||t[3]!==I||t[4]!==v||t[5]!==S||t[6]!==R||t[7]!==L?(T=[c.wrapper,v,S,R,L,E,k,I],t[1]=E,t[2]=k,t[3]=I,t[4]=v,t[5]=S,t[6]=R,t[7]=L,t[8]=T):T=t[8];var D;t[9]!==f||t[10]!==h?(D=h&&!f&&u.jsx(o("react-strict-dom").html.div,{style:c.loadingOverlay,children:u.jsx(o("react-strict-dom").html.div,{style:c.spinner,children:u.jsx(r("FDSLoadingAnimation.react"),{size:40})})}),t[9]=f,t[10]=h,t[11]=D):D=t[11];var x;t[12]!==f?(x=f&&u.jsx(o("react-strict-dom").html.div,{style:c.liveText,children:u.jsx(r("FDSText.react"),{color:"primaryOnMedia",numberOfLines:1,type:"meta4",children:b})}),t[12]=f,t[13]=x):x=t[13];var $;t[14]!==f||t[15]!==g?($=!f&&g&&u.jsx(o("react-strict-dom").html.div,babelHelpers.extends({style:c.activeBadge},r("CometVisualCompletionAttributes").IGNORE,{children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(r("StoriesActivityBadgeDeferred.react"),{size:8,state:"active"})})})),t[14]=f,t[15]=g,t[16]=$):$=t[16];var P;t[17]!==$?(P=u.jsx(r("CometSSRReplaceContentOnHydrationAndBreakEventReplaying.react"),{children:$}),t[17]=$,t[18]=P):P=t[18];var N;return t[19]!==n||t[20]!==T||t[21]!==D||t[22]!==x||t[23]!==P?(N=u.jsxs(o("react-strict-dom").html.div,{style:T,children:[D,n,x,P]}),t[19]=n,t[20]=T,t[21]=D,t[22]=x,t[23]=P,t[24]=N):N=t[24],N}l.default=d}),226);
__d("StoriesTrayTileContentV2.react",["CometBackgroundImage.react","CometColumn.react","CometColumnItem.react","CometRelay","FBVRLinearGradient","FDSIcon.react","FDSLikeFilled12Icon","FDSPlayFilled12Icon","FDSText.react","FDSTextPairing.react","StoriesEnums","StoriesRatioBox.react","XPlatReactEnvironment","cr:17132","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=1800/16,c=50,d="linear-gradient(180deg,\n    rgba(0, 0, 0, 0) 0%,\n    rgba(0, 0, 0, 0.0029348165) 11.79%,\n    rgba(0, 0, 0, 0.01134518) 21.38%,\n    rgba(0, 0, 0, 0.02464) 29.12%,\n    rgba(0, 0, 0, 0.0422282) 35.34%,\n    rgba(0, 0, 0, 0.06351835) 40.37%,\n    rgba(0, 0, 0, 0.08792) 44.56%,\n    rgba(0, 0, 0, 0.11484165) 48.24%,\n    rgba(0, 0, 0, 0.1436918) 51.76%,\n    rgba(0, 0, 0, 0.17388) 55.44%,\n    rgba(0, 0, 0, 0.20481475) 59.63%,\n    rgba(0, 0, 0, 0.23590525) 64.66%,\n    rgba(0, 0, 0, 0.26656) 70.88%,\n    rgba(0, 0, 0, 0.2961882) 78.62%,\n    rgba(0, 0, 0, 0.32419835) 88.21%,\n    rgba(0, 0, 0, 0.35) 100%\n    )",m={transform:"x3oybdh",transformOrigin:"x1g0ag68",transitionDuration:"xx6bhzk",transitionProperty:"x11xpdln",transitionTimingFunction:"xcj1dhv",$$css:!0},p={filter:"x1ur1oty",$$css:!0},_={background:function(t){return[m,{backgroundColor:t!=null?"xl8spv7":t,$$css:!0},{"--x-backgroundColor":t!=null?t:void 0}]},backgroundFocused:{transform:"x1nhozj7",$$css:!0},backgroundWithNotesBlur:function(t){return[p,{backgroundColor:t!=null?"xl8spv7":t,$$css:!0},{"--x-backgroundColor":t!=null?t:void 0}]},coverImageFilter:{backgroundColor:"x1sag07j",$$css:!0},full:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},gradientContainer:{aspectRatio:"x1vf6whn",backgroundImage:"x123ep6o",$$css:!0},gradientContainerNative:{height:"x10wjd1d",$$css:!0},icon:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",paddingBottom:"xsag5q8",paddingInlineStart:"xmzvs34",textAlign:"x1yc453h",width:"xh8yej3",$$css:!0},iconContainer:{display:"x78zum5",$$css:!0},overlayContainer:{height:"x5yr21d",width:"xh8yej3",$$css:!0},pointerEventsNone:{pointerEvents:"x47corl",$$css:!0},text:{paddingInlineStart:"x135b78x",$$css:!0},textIconShadowStyle:{filter:"xnt7nc8",$$css:!0},textWrapper:{boxSizing:"x9f619",textAlign:"x1yc453h",width:"xh8yej3",$$css:!0},title:function(t){return[{paddingTop:t!=null?"x18f6klv":t,paddingInlineEnd:t!=null?"x13jzn7v":t,paddingBottom:t!=null?"x1wkyw2c":t,paddingInlineStart:t!=null?"xixbq2w":t,$$css:!0},{"--x-padding":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},titleWithRightPadding:function(t){return[{paddingInlineEnd:t!=null?"x120eax6":t,$$css:!0},{"--x-paddingInlineEnd":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},titleWithTopPadding:{paddingTop:"xexx8yu",$$css:!0},titleWrapper:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",textAlign:"x1yc453h",width:"xh8yej3",$$css:!0},warningScreenContainer:{zIndex:"x1ja2u2z",$$css:!0}};function f(e){var t,a=o("react-compiler-runtime").c(51),i=e.aspectRatioReal,l=e.avatarInteractable,m=e.backgroundColor,p=e.bucketType,f=e.bucketUrl,g=e.coverImage,h=e.coverImageNullElement,y=e.hasNotesOverlay,C=e.isSmall,b=e.likeCount,v=e.metaText,S=e.numLines,R=e.playCount,L=e.pressableState,E=e.text,k=e.tileAvatar,I=e.tilePadding,T=e.title,D=e.videoAutoplayWrapper,x=e.warningScreen,$=y===void 0?!1:y,P=T!=null,N=E!=null&&T==null,M=R!=null,w=b!=null&&b!=="0",A=!P&&!N&&!M&&!w,F=(t=(L==null?void 0:L.hovered)||(L==null?void 0:L.focused)&&(L==null?void 0:L.focusVisible))!=null?t:!1,O;if(Object.values(o("StoriesEnums").CONVERSATION_STORY_BUCKET_TYPES).includes(p)&&n("cr:17132")){var B;a[0]!==p?(B=s.jsx(o("react-strict-dom").html.div,{children:s.jsx(n("cr:17132"),{bucketType:p})}),a[0]=p,a[1]=B):B=a[1],O=B}else{var W=!l&&k!=null?k:null,q;a[2]!==W?(q=s.jsx(o("react-strict-dom").html.div,{style:_.textIconShadowStyle,children:W}),a[2]=W,a[3]=q):q=a[3],O=q}var U=i!=null?i:1,V;a[4]!==m||a[5]!==f||a[6]!==g||a[7]!==h||a[8]!==$||a[9]!==F||a[10]!==D||a[11]!==x?(V=g!=null?s.jsxs(o("react-strict-dom").html.div,{style:[$?_.backgroundWithNotesBlur(m):_.background(m),F&&_.backgroundFocused,_.full],children:[D!=null?D:s.jsx(r("CometBackgroundImage.react"),{height:"100%",src:g}),x!=null&&s.jsx(o("react-strict-dom").html.div,{style:[_.full,_.warningScreenContainer],children:s.jsx(o("CometRelay").MatchContainer,{match:x,props:{alwaysShowCoverComponent:!0,alwaysShowDetails:!1,alwaysUseSmallLayout:!0,data:x,mediaUri:g!=null?g:"",surface:"story_tray",url:f}})})]}):h,a[4]=m,a[5]=f,a[6]=g,a[7]=h,a[8]=$,a[9]=F,a[10]=D,a[11]=x,a[12]=V):V=a[12];var H;a[13]!==O?(H=s.jsx(r("CometColumnItem.react"),{expanding:!0,children:O}),a[13]=O,a[14]=H):H=a[14];var G;a[15]!==A?(G=o("XPlatReactEnvironment").isWeb()?s.jsx(o("react-strict-dom").html.div,{style:A?null:_.gradientContainer}):A?null:s.jsx(o("react-strict-dom").html.div,{style:_.gradientContainerNative,children:s.jsx(r("FBVRLinearGradient"),{config:d,height:c,width:u})}),a[15]=A,a[16]=G):G=a[16];var z;a[17]!==G?(z=s.jsx(r("CometColumnItem.react"),{children:G}),a[17]=G,a[18]=z):z=a[18];var j=A?null:_.coverImageFilter,K;a[19]!==P||a[20]!==E||a[21]!==I||a[22]!==T?(K=P?s.jsx(o("react-strict-dom").html.div,{style:[_.titleWrapper,_.pointerEventsNone,_.textIconShadowStyle,I&&_.title(I.padding),(I==null?void 0:I.paddingRight)!=null&&_.titleWithRightPadding(I.paddingRight),_.titleWithTopPadding],children:s.jsx(r("FDSTextPairing.react"),{headline:T,headlineColor:"primaryOnMedia",level:4,meta:E,metaColor:"primaryOnMedia"})}):null,a[19]=P,a[20]=E,a[21]=I,a[22]=T,a[23]=K):K=a[23];var Q;a[24]!==N||a[25]!==C||a[26]!==v||a[27]!==S||a[28]!==E||a[29]!==I?(Q=N?s.jsx(o("react-strict-dom").html.div,{style:[_.textWrapper,_.pointerEventsNone,_.textIconShadowStyle,I&&_.title(I.padding),(I==null?void 0:I.paddingRight)!=null&&_.titleWithRightPadding(I.paddingRight),_.titleWithTopPadding],children:s.jsx(r("FDSTextPairing.react"),{body:s.jsx(r("FDSText.react"),{color:"primaryOnMedia",numberOfLines:S,testid:void 0,type:C?"bodyLink4":"bodyLink3",children:E}),level:4,meta:v,metaColor:"secondaryOnMedia",metaLineLimit:1,metaLocation:"above"})}):null,a[24]=N,a[25]=C,a[26]=v,a[27]=S,a[28]=E,a[29]=I,a[30]=Q):Q=a[30];var X;a[31]!==M||a[32]!==R?(X=M?s.jsxs(o("react-strict-dom").html.div,{style:_.icon,children:[s.jsx(o("react-strict-dom").html.div,{style:[_.textIconShadowStyle,_.iconContainer],children:s.jsx(r("FDSIcon.react"),{color:"white",icon:r("FDSPlayFilled12Icon")})}),s.jsx(o("react-strict-dom").html.div,{style:[_.text,_.textIconShadowStyle],children:s.jsx(r("FDSText.react"),{color:"primaryOnMedia",numberOfLines:1,type:"bodyLink4",children:R})})]}):null,a[31]=M,a[32]=R,a[33]=X):X=a[33];var Y;a[34]!==w||a[35]!==b?(Y=w?s.jsxs(o("react-strict-dom").html.div,{style:_.icon,children:[s.jsx(o("react-strict-dom").html.div,{style:[_.textIconShadowStyle,_.iconContainer],children:s.jsx(r("FDSIcon.react"),{color:"white",icon:r("FDSLikeFilled12Icon")})}),s.jsx(o("react-strict-dom").html.div,{style:[_.text,_.textIconShadowStyle],children:s.jsx(r("FDSText.react"),{color:"primaryOnMedia",numberOfLines:1,type:"bodyLink4",children:b})})]}):null,a[34]=w,a[35]=b,a[36]=Y):Y=a[36];var J;a[37]!==X||a[38]!==Y||a[39]!==j||a[40]!==K||a[41]!==Q?(J=s.jsx(r("CometColumnItem.react"),{children:s.jsxs(o("react-strict-dom").html.div,{style:j,children:[K,Q,X,Y]})}),a[37]=X,a[38]=Y,a[39]=j,a[40]=K,a[41]=Q,a[42]=J):J=a[42];var Z;a[43]!==J||a[44]!==H||a[45]!==z?(Z=s.jsxs(r("CometColumn.react"),{paddingHorizontal:0,paddingVertical:0,xstyle:_.overlayContainer,children:[H,z,J]}),a[43]=J,a[44]=H,a[45]=z,a[46]=Z):Z=a[46];var ee;return a[47]!==Z||a[48]!==U||a[49]!==V?(ee=s.jsxs(r("StoriesRatioBox.react"),{height:1,width:U,children:[V,Z]}),a[47]=Z,a[48]=U,a[49]=V,a[50]=ee):ee=a[50],ee}l.default=f}),98);
__d("StoriesTrayTileConversationSparkHeader.react",["fbt","FDSText.react","StoriesEnums","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={birthdayText:{backgroundColor:"x1jx94hy",borderStartStartRadius:"xjwep3j",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"x1pczhz8",insetInlineStart:"x1r4y97",left:null,right:null,paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingInlineStart:"x1djpfga",paddingInlineEnd:"x1im30kd",paddingLeft:null,paddingRight:null,position:"x10l6tqk",textAlign:"x2b8uid",top:"x1tk7jg1",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(4),n=e.bucketType;if(!Object.values(o("StoriesEnums").CONVERSATION_STORY_BUCKET_TYPES).includes(n))return null;var a;t[0]!==n?(a=n===o("StoriesEnums").CONVERSATION_STORY_BUCKET_TYPES.CONVERSATION_STARTER_STORY&&u.jsx(o("react-strict-dom").html.div,{style:c.birthdayText,children:u.jsx(r("FDSText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"Birthday")})}),t[0]=n,t[1]=a):a=t[1];var i;return t[2]!==a?(i=u.jsx(o("react-strict-dom").html.div,{children:a}),t[2]=a,t[3]=i):i=t[3],i}l.default=d}),226);
__d("StoriesTrayTileView_LWRAnimations.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTileView_LWRAnimations",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("StoriesTrayTileView_story.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider"}],kind:"Fragment",metadata:null,name:"StoriesTrayTileView_story",selections:[{condition:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileOverlays_story"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}]}],type:"Story",abstractKey:null};a.exports=e}),null);
__d("StoriesTrayTileView_storyCardInfo.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"StoriesTrayTileView_storyCardInfo",selections:[{condition:"__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"story_video_thumbnail",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileVideoAutoPlayerWrapper_video"}],storageKey:null}]},{alias:null,args:[{kind:"Literal",name:"height",value:277},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:156}],concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thumbnail_frame_pts",storageKey:null}],storageKey:null}],type:"StoryCardStoryInfo",abstractKey:null};a.exports=e}),null);
__d("StoriesTrayTileView_warningScreen.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTileView_warningScreen",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null};a.exports=e}),null);
__d("cometValidateAsElementRect",[],(function(t,n,r,o,a,i){"use strict";function e(e){return typeof e=="object"?{bottom:typeof(e==null?void 0:e.bottom)=="number"?e.bottom:0,height:typeof(e==null?void 0:e.height)=="number"?e.height:0,left:typeof(e==null?void 0:e.left)=="number"?e.left:0,right:typeof(e==null?void 0:e.right)=="number"?e.right:0,top:typeof(e==null?void 0:e.top)=="number"?e.top:0,width:typeof(e==null?void 0:e.width)=="number"?e.width:0}:{bottom:0,height:0,left:0,right:0,top:0,width:0}}i.default=e}),66);
__d("StoriesTrayTileView.react",["CometPressable.react","CometRelay","StoriesConstants","StoriesGating","StoriesTrayTileView_LWRAnimations.graphql","StoriesTrayTileView_story.graphql","StoriesTrayTileView_storyCardInfo.graphql","StoriesTrayTileView_warningScreen.graphql","TopOfFeedLoggingContext","cometValidateAsElementRect","cr:21339","cr:341","cr:5063","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=d||(d=o("react")),p=d,_=p.useContext,f=p.useMemo,g=p.useRef,h=r("requireDeferred")("ODS").__setRef("StoriesTrayTileView.react"),y=12,C=8,b=46,v={boxShadow:{boxShadow:"x2pq9lr",$$css:!0},button:{appearance:"xjyslct",backgroundColor:"xjbqb8w",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxSizing:"x9f619",display:"x1lliihq",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",textAlign:"x16tdsg8",width:"xh8yej3",zIndex:"x1ja2u2z",":active_transform":"xk4oym4",$$css:!0},buttonFocused:{filter:"x14xfefy",$$css:!0},tile:{backgroundColor:"x1qhmfi1",borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},S=function(t){var e=t.showOutline?m.jsx("div",{className:"x16qb05n xi7iut8 x1dm3dyd x1pv694p x1ey2m1c xlg9a9y x9f619 xtijo5x x1o0tod x47corl x10l6tqk x13vifvy"}):null;return m.jsxs("div",{className:"x1n2onr6",children:[t.children,e]})};function R(t){var a,i,l=o("react-compiler-runtime").c(76),d=t.animations,p=t.avatar,f=t.avatarInteractable,R=t.backgroundColor,k=t.bucketType,I=t.bucketUrl,T=t.canViewerReply,D=t.coverImage,x=t.disabled,$=t.disablePreloadOnMouseHover,P=t.disablePreloadOnRender,N=t.hasReactionIcon,M=t.isFirstVideoTile,w=t.isUploading,A=t.label,F=t.metaText,O=t.onPress,B=t.onPressIn,W=t.passthroughProps,q=t.story,U=t.storyCardInfo,V=t.text,H=t.warningScreenNode,G=t.aspectRatio,z=t.numLines,j=t.showOutline,K=t.showShadow,Q=t.small,X=t.theme,Y=f===void 0?!1:f,J=N===void 0?!1:N,Z=M===void 0?!1:M,ee=w===void 0?!1:w,te=G===void 0?o("StoriesConstants").DEFAULT_ASPECT_RATIO:G,ne=j===void 0?!1:j,re=K===void 0?!0:K,oe=Q===void 0?!1:Q,ae=X===void 0?"dark":X,ie=z!=null?z:2,le=o("CometRelay").useFragment(e!==void 0?e:e=n("StoriesTrayTileView_warningScreen.graphql"),H);o("CometRelay").useFragment(s!==void 0?s:s=n("StoriesTrayTileView_LWRAnimations.graphql"),d);var se=o("StoriesGating").shouldUseCompartmentStoriesTiles(),ue=o("CometRelay").useFragment(u!==void 0?u:u=n("StoriesTrayTileView_storyCardInfo.graphql"),U),ce=o("CometRelay").useFragment(c!==void 0?c:c=n("StoriesTrayTileView_story.graphql"),q);ce==null||ce.story_overlays;var de;e:{if(!(ce!=null&&ce.story_overlays)){de=!1;break e}de=ce.story_overlays.some(E)}var me=de,pe=ue==null?void 0:ue.story_video_thumbnail,_e=(a=ue==null||(i=ue.story_thumbnail)==null?void 0:i.thumbnail_frame_pts)!=null?a:0,fe=_(r("TopOfFeedLoggingContext")),ge=fe.tofuSessionID,he=oe?C:y,ye;l[0]!==he?(ye={padding:he},l[0]=he,l[1]=ye):ye=l[1];var Ce=ye,be;l[2]!==Ce||l[3]!==J||l[4]!==oe?(be=J?{padding:oe?C:y,paddingRight:b}:Ce,l[2]=Ce,l[3]=J,l[4]=oe,l[5]=be):be=l[5];var ve=be,Se;l[6]!==p||l[7]!==Y||l[8]!==Ce?(Se=p!=null?m.jsx("div",{className:{0:"x1o0tod x10l6tqk x13vifvy",1:"x1o0tod x10l6tqk x13vifvy x47corl"}[!Y<<0],style:Ce,children:p}):null,l[6]=p,l[7]=Y,l[8]=Ce,l[9]=Se):Se=l[9];var Re=Se,Le=g(null),Ee;l[10]!==ee?(Ee={0:{className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy"},1:{className:"xxj740w x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy"}}[!!ee<<0],l[10]=ee,l[11]=Ee):Ee=l[11];var ke;l[12]!==Ee?(ke=m.jsx("div",babelHelpers.extends({},Ee)),l[12]=Ee,l[13]=ke):ke=l[13];var Ie=ke,Te;l[14]!==D||l[15]!==Z||l[16]!==_e||l[17]!==pe?(Te=D!=null&&pe!=null&&Z===!0&&n("cr:341")!=null?m.jsx(n("cr:341"),{coverImage:D,smartPreviewTimeStamp:_e,video:pe}):null,l[14]=D,l[15]=Z,l[16]=_e,l[17]=pe,l[18]=Te):Te=l[18];var De=Te,xe;l[19]!==te||l[20]!==Y||l[21]!==R||l[22]!==k||l[23]!==I||l[24]!==D||l[25]!==Ie||l[26]!==me||l[27]!==F||l[28]!==ie||l[29]!==V||l[30]!==Re||l[31]!==ve||l[32]!==De||l[33]!==le?(xe=function(t){return m.jsx(n("cr:5063"),{aspectRatioReal:te,avatarInteractable:Y,backgroundColor:R,bucketType:k,bucketUrl:I,coverImage:D,coverImageNullElement:Ie,hasNotesOverlay:me,isSmall:!0,metaText:F,numLines:ie,pressableState:t,text:V,tileAvatar:Re,tilePadding:ve,videoAutoplayWrapper:De,warningScreen:le})},l[19]=te,l[20]=Y,l[21]=R,l[22]=k,l[23]=I,l[24]=D,l[25]=Ie,l[26]=me,l[27]=F,l[28]=ie,l[29]=V,l[30]=Re,l[31]=ve,l[32]=De,l[33]=le,l[34]=xe):xe=l[34];var $e=xe;if(I!=null||O!=null){var Pe;l[35]===Symbol.for("react.memo_cache_sentinel")?(Pe=function(){var e;return r("cometValidateAsElementRect")((e=Le.current)==null?void 0:e.getBoundingClientRect())},l[35]=Pe):Pe=l[35];var Ne;l[36]!==W||l[37]!==ge?(Ne=babelHelpers.extends({},W,{getTilePosition:Pe,tofuTraySessionID:ge}),l[36]=W,l[37]=ge,l[38]=Ne):Ne=l[38];var Me=Ne,we=$!==!0,Ae=P!==!0,Fe;l[39]===Symbol.for("react.memo_cache_sentinel")?(Fe={navigation_source:"stories_tray_tile"},l[39]=Fe):Fe=l[39];var Oe;l[40]!==I||l[41]!==Me||l[42]!==we||l[43]!==Ae?(Oe={passthroughProps:Me,prefetchQueriesOnHover:we,preloadCodeOnMount:Ae,traceParams:Fe,url:I},l[40]=I,l[41]=Me,l[42]=we,l[43]=Ae,l[44]=Oe):Oe=l[44];var Be=Oe,We;l[45]!==O?(We=function(t){h.onReady(L),O&&O(t)},l[45]=O,l[46]=We):We=l[46];var qe=We,Ue;l[47]!==$e||l[48]!==x||l[49]!==A||l[50]!==Be||l[51]!==qe||l[52]!==B||l[53]!==re?(Ue=function(t,n){var e=t===void 0?null:t;return m.jsx(r("CometPressable.react"),{disabled:x,display:"inline",label:A!=null?A:void 0,linkProps:Be,onPress:function(t){qe(t),n&&n()},onPressIn:B,overlayDisabled:!0,ref:e,suppressHydrationWarning:!0,xstyle:function(t){var e=t.focused,n=t.focusVisible,r=t.hovered;return[v.tile,v.button,(r||e&&n)&&v.buttonFocused,re&&v.boxShadow]},children:$e})},l[47]=$e,l[48]=x,l[49]=A,l[50]=Be,l[51]=qe,l[52]=B,l[53]=re,l[54]=Ue):Ue=l[54];var Ve=Ue,He=se===!0?!0:ne,Ge;l[55]!==Ve?(Ge=Ve(),l[55]=Ve,l[56]=Ge):Ge=l[56];var ze=Y?Re:null,je;l[57]!==ce?(je=n("cr:21339")&&m.jsx(n("cr:21339"),{story:ce}),l[57]=ce,l[58]=je):je=l[58];var Ke;return l[59]!==He||l[60]!==Ge||l[61]!==ze||l[62]!==je?(Ke=m.jsx("div",{ref:Le,children:m.jsxs(S,{showOutline:He,children:[Ge,ze,je]})}),l[59]=He,l[60]=Ge,l[61]=ze,l[62]=je,l[63]=Ke):Ke=l[63],Ke}else{var Qe=se===!0?!0:ne,Xe;l[64]!==re||l[65]!==ae?(Xe={0:{className:"x1qhmfi1 x16qb05n xi7iut8 x1dm3dyd x1pv694p x6ikm8r x10wlt62"},2:{className:"x1qhmfi1 x16qb05n xi7iut8 x1dm3dyd x1pv694p x6ikm8r x10wlt62 x2pq9lr"},1:{className:"x1qhmfi1 x16qb05n xi7iut8 x1dm3dyd x1pv694p x6ikm8r x10wlt62 xbyyjgo"},3:{className:"x1qhmfi1 x16qb05n xi7iut8 x1dm3dyd x1pv694p x6ikm8r x10wlt62 x2pq9lr xbyyjgo"}}[!!re<<1|(ae==="light")<<0],l[64]=re,l[65]=ae,l[66]=Xe):Xe=l[66];var Ye;l[67]!==$e?(Ye=$e(),l[67]=$e,l[68]=Ye):Ye=l[68];var Je=Y?Re:null,Ze;l[69]!==Xe||l[70]!==Ye||l[71]!==Je?(Ze=m.jsxs("div",babelHelpers.extends({},Xe,{children:[Ye,Je]})),l[69]=Xe,l[70]=Ye,l[71]=Je,l[72]=Ze):Ze=l[72];var et;return l[73]!==Qe||l[74]!==Ze?(et=m.jsx(S,{showOutline:Qe,children:Ze}),l[73]=Qe,l[74]=Ze,l[75]=et):et=l[75],et}}function L(e){e.bumpEntityKey(4329,"fb_stories_web","stories_tray_pog_click",1)}function E(e){return(e==null?void 0:e.__typename)==="StoryOverlayFBNotesSticker"}l.default=R}),98);
__d("StoriesTrayTileGlimmer.react",["FDSGlimmer.react","StoriesTrayTileAvatar.react","StoriesTrayTileView.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={contents:{borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(6),n=e.aspectRatio,a=e.index,i=a===void 0?0:a,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("StoriesTrayTileAvatar.react"),{}),t[0]=l):l=t[0];var c;t[1]!==n?(c=s.jsx(r("StoriesTrayTileView.react"),{aspectRatio:n,avatar:l,showShadow:!1}),t[1]=n,t[2]=c):c=t[2];var d;return t[3]!==i||t[4]!==c?(d=s.jsx(r("FDSGlimmer.react"),{index:i,xstyle:u.contents,children:c}),t[3]=i,t[4]=c,t[5]=d):d=t[5],d}l.default=c}),98);
__d("StoriesTrayTileVideoAutoPlayerWrapper_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTileVideoAutoPlayerWrapper_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{args:[{kind:"Literal",name:"playerSuborigin",value:"stories_video_preview"}],kind:"FragmentSpread",name:"VideoPlayerRelayWithSSR_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useVideoPlayerClip",["FBLogger","VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(9),n=e.clipDuration,a=e.clipStartTime,i=e.freezeOnLoop,l=e.onPlaybackEnded,u=e.pauseOnLoop,m=e.totalLoopCount,p=a===void 0?0:a,_=i===void 0?!1:i,f=u===void 0?!1:u,g=(s||(s=o("VideoPlayerHooks"))).useController(),h=d(null),y=d(0),C,b;t[0]!==n||t[1]!==p||t[2]!==g||t[3]!==_||t[4]!==l||t[5]!==f||t[6]!==m?(C=function(){if(p>=0||r("FBLogger")("comet_video_player").mustfix("useVideoPlayerClip clipStartTime must be greater than zero"),n!=null&&!(n>0)&&r("FBLogger")("comet_video_player").mustfix("useVideoPlayerClip clipDuration must be greater than zero"),p>=0&&n!=null&&n>0){h.current=g.getPlayheadPosition();var e=g.subscribe(function(){var e=h.current,t=g.getPlayheadPosition(),r=g.getCurrentState();if(e!=null&&t!==e&&!r.seeking){h.current=t;var o=Math.min(r.duration,p+n),a="product_initiated";t>=o?(g.seek(p),f&&g.pause(a),m!=null&&m>-1&&y.current>=m?(g.pause(a),_&&g.freeze(),l!=null&&l()):y.current=y.current+1):t<p&&g.seek(p)}});return function(){e.remove(),h.current=null}}},b=[n,p,g,f,l,m,_],t[0]=n,t[1]=p,t[2]=g,t[3]=_,t[4]=l,t[5]=f,t[6]=m,t[7]=C,t[8]=b):(C=t[7],b=t[8]),c(C,b)}l.default=m}),98);
__d("StoriesTrayTileVideoAutoPlayerWrapper.react",["CometBackgroundImage.react","CometPageletWithDiv.react","CometRelay","CometVideoPlayerLoggingConfigForFBWeb","StoriesTrayTileVideoAutoPlayerWrapper_video.graphql","VideoPlayerHooks","VideoPlayerSurface.react","VideoPlayerWithThumbnail.react","clearTimeout","deferredLoadComponent","gkx","qex","react","react-compiler-runtime","requireDeferred","setTimeout","useVideoPlayerClip"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useCallback,p=d.useEffect,_=d.useRef,f=d.useState,g=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerRelayWithSSR.react").__setRef("StoriesTrayTileVideoAutoPlayerWrapper.react")),h=3;function y(e){var t=o("react-compiler-runtime").c(6),n=e.coverImage,a=e.isSmartPreviewEnabled,i=e.onPlaybackEnded,l=e.smartPreviewTimeStamp,s=(u||(u=o("VideoPlayerHooks"))).useVideoPlayerTotalLoops(),d=a?l:0,m;t[0]!==i||t[1]!==s||t[2]!==d?(m={clipDuration:h,clipStartTime:d,freezeOnLoop:!0,onPlaybackEnded:i,totalLoopCount:s},t[0]=i,t[1]=s,t[2]=d,t[3]=m):m=t[3],r("useVideoPlayerClip")(m);var p;return t[4]!==n?(p=c.jsx(r("VideoPlayerSurface.react"),{children:c.jsx(r("VideoPlayerWithThumbnail.react"),{src:n})}),t[4]=n,t[5]=p):p=t[5],p}function C(t){var a=o("react-compiler-runtime").c(19),i=t.coverImage,l=t.smartPreviewTimeStamp,s=t.video,u=o("CometRelay").useFragment(e!==void 0?e:e=n("StoriesTrayTileVideoAutoPlayerWrapper_video.graphql"),s),d;if(a[0]===Symbol.for("react.memo_cache_sentinel")){var m;d=(m=r("qex")._("3672"))!=null?m:!1,a[0]=d}else d=a[0];var h=d,C;if(a[1]===Symbol.for("react.memo_cache_sentinel")){var b;C=h?(b=r("qex")._("3673"))!=null?b:500:r("gkx")("8787")?500:1e3,a[1]=C}else C=a[1];var v=C,S=h&&r("qex")._("3679")===!0&&l>=5?0:l,R=_(null),L=f(v>0),E=L[0],k=L[1],I,T;a[2]===Symbol.for("react.memo_cache_sentinel")?(I=function(){return v>0&&(R.current=r("setTimeout")(function(){k(!1)},v)),function(){R.current!=null&&(r("clearTimeout")(R.current),R.current=null)}},T=[v],a[2]=I,a[3]=T):(I=a[2],T=a[3]),p(I,T);var D=f(!1),x=D[0],$=D[1],P;a[4]===Symbol.for("react.memo_cache_sentinel")?(P=function(){$(!0)},a[4]=P):P=a[4];var N=P,M;a[5]!==i?(M=c.jsx(r("CometBackgroundImage.react"),{src:i}),a[5]=i,a[6]=M):M=a[6];var w;a[7]!==i?(w=c.jsx(r("CometBackgroundImage.react"),{src:i}),a[7]=i,a[8]=w):w=a[8];var A;a[9]!==i||a[10]!==S||a[11]!==E||a[12]!==x||a[13]!==u?(A=E||x||u.viewer_autoplay_setting==="off"?null:c.jsx(g,{bufferEndLimit:3,bypassUseCometSizeError:!0,canAutoplay:"respect_user_settings",disableLoadingIndicator:!0,loggingConfig:o("CometVideoPlayerLoggingConfigForFBWeb").createCometVideoPlayerLoggingConfigForFBWeb({withFBWebSNAPLGK:!0}),loopCount:2,portalingEnabled:!1,silenceHydrationMutationReporting:!0,subOrigin:"stories_video_preview",video:u,volumeSetting:0,children:c.jsx(y,{coverImage:i,isSmartPreviewEnabled:h,onPlaybackEnded:N,smartPreviewTimeStamp:S})}),a[9]=i,a[10]=S,a[11]=E,a[12]=x,a[13]=u,a[14]=A):A=a[14];var F;return a[15]!==M||a[16]!==w||a[17]!==A?(F=c.jsxs(o("CometPageletWithDiv.react").Placeholder,{fallback:M,name:"Stories",pageletType:"media",children:[w,A]}),a[15]=M,a[16]=w,a[17]=A,a[18]=F):F=a[18],F}l.default=C}),98);
__d("StoriesTrayUtils",["StoriesLoggingConstants","XCometStoriesControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.bucketID,n=e.cardID,o=e.bucketCount,a=e.source,i=a===void 0?r("StoriesLoggingConstants").ACTION_SOURCE.TRAY:a,l=e.viewSingle,s=l!=null?l:i===r("StoriesLoggingConstants").ACTION_SOURCE.FEED_TAB_STORIES_SURFACE,u=null;return s?u={bucket_count:o,bucket_id:t,card_id:n===null?void 0:n,source:i,view_single:!0}:u={bucket_count:o,bucket_id:t,card_id:n===null?void 0:n,source:i},r("XCometStoriesControllerRouteBuilder").buildURL(u)}l.getBucketURL=e}),98);
__d("getMWThreadLinkHashFromJoinLink",["ConstUriUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;var t=o("ConstUriUtils").getUri(e);if(t!=null&&t.isSubdomainOfDomain("m.me")){var n,r=t==null||(n=t.getPath())==null?void 0:n.split("/").filter(function(e){return e!==""});return(r==null?void 0:r.length)===2&&r[0]==="j"?r[1]:null}return null}l.default=e}),98);
__d("useCometFeedInlineComposerWOYMText",["fbt","gkx","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=r("gkx")("20836");function u(t){var n=o("react-compiler-runtime").c(3);if(e){var r;return n[0]===Symbol.for("react.memo_cache_sentinel")?(r=s._(/*BTDS*/"What are you working on?"),n[0]=r):r=n[0],r}else{var a;return n[1]!==t?(a=t!=null?s._(/*BTDS*/"What's on your mind, {short name}?",[s._param("short name",t)]):s._(/*BTDS*/"What's on your mind?"),n[1]=t,n[2]=a):a=n[2],a}}l.default=u}),226);
__d("useMWAPPlusOpenBroadcastChannelCreationDialog",["BroadcastChannelQPL","MWAPPlusCreateBroadcastChannelDialog.entrypoint","MWBroadcastChannelLoggingShapes","MWLogBroadcastChannelFalcoEvent","react","react-compiler-runtime","useCometRouterState","useCurrentDisplayMode","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){switch(e){case"public_chats:comet_www_inbox":return o("MWBroadcastChannelLoggingShapes").CREATE_CHANNEL_TAPPED_FULL_PAGE_SHAPE;case"public_chats:profile_channels_tab_item":return o("MWBroadcastChannelLoggingShapes").CREATE_CHANNEL_TAPPED_CHANNELS_TAB_SHAPE;case"public_chats:profile_channels_tab_null_state":return o("MWBroadcastChannelLoggingShapes").CREATE_CHANNEL_TAPPED_CHANNELS_TAB_NULL_STATE_SHAPE;case"public_chats:newsfeed_qp":return o("MWBroadcastChannelLoggingShapes").CREATE_BROADCAST_CHANNEL_NEWSFEED_QP_TAP_SHAPE;case"public_chats:profile_qp":return o("MWBroadcastChannelLoggingShapes").CREATE_BROADCAST_CHANNEL_PROFILE_PAGE_QP_TAP_SHAPE;case"public_chats:channel_creation_qp":return o("MWBroadcastChannelLoggingShapes").CREATE_BROADCAST_CHANNEL_JEWEL_QP_TAP_SHAPE;case"public_chats:profile_creation_bar":return o("MWBroadcastChannelLoggingShapes").CREATE_BROADCAST_CHANNEL_PROFILE_COMPOSER_TAP_SHAPE;case"public_chats:newsfeed_composer":return o("MWBroadcastChannelLoggingShapes").CREATE_BROADCAST_CHANNEL_NEWSFEED_COMPOSER_TAP_SHAPE;case"public_chats:channels_gutter":return o("MWBroadcastChannelLoggingShapes").CREATE_BROADCAST_CHANNEL_FROM_GUTTER_TAP_SHAPE;case"public_chats:fandom_create_channel_email":return o("MWBroadcastChannelLoggingShapes").CREATE_CHANNEL_TAPPED_CHANNELS_TAB_FCC_EMAIL_SHAPE;default:return}}function c(){var e=o("react-compiler-runtime").c(5),t=r("useCurrentDisplayMode")(),n=t==="dark",a;e[0]!==n?(a={isDarkModeEnabled:n},e[0]=n,e[1]=a):a=e[1];var i=r("useMWXEntryPointDialog")(r("MWAPPlusCreateBroadcastChannelDialog.entrypoint"),a),l=i[0],s=r("useCometRouterState")(),c=s==null?void 0:s.main.route.params.referral_source,d=c!=null&&typeof c=="string"?c:void 0,m;return e[2]!==l||e[3]!==d?(m=function(t,n){var e=u(t);e&&o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent(e),o("BroadcastChannelQPL").logCreateBroadcastChannelQPLStart(t),l({creationEntrypoint:t,referralSource:d,refetchChannelList:n})},e[2]=l,e[3]=d,e[4]=m):m=e[4],m}l.default=c}),98);
__d("useMWOpenBroadcastChannelFromProfile_channel.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWOpenBroadcastChannelFromProfile_channel",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"id"},{alias:null,args:null,kind:"ScalarField",name:"join_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed",storageKey:null}],type:"MessengerPinnableDiscoverablePublicChannelThread",abstractKey:"__isMessengerPinnableDiscoverablePublicChannelThread"};a.exports=e}),null);
__d("useMWOpenBroadcastChannelFromProfile",["CometRelay","I64","LSIntEnum","MWPActor.react","getMWThreadLinkHashFromJoinLink","react","react-compiler-runtime","useMWNavigation","useMWOpenBroadcastChannelFromProfile_channel.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("react"))).useCallback;function m(t,a,i){var l=o("react-compiler-runtime").c(11),s=r("useMWNavigation")(),d=o("CometRelay").useFragment(e!==void 0?e:e=n("useMWOpenBroadcastChannelFromProfile_channel.graphql"),t),m=d.id,p;l[0]!==d.join_link?(p=r("getMWThreadLinkHashFromJoinLink")(d.join_link),l[0]=d.join_link,l[1]=p):p=l[1];var _=p,f;if(l[2]!==d.is_viewer_subscribed){var g;f=(g=d.is_viewer_subscribed)!=null&&g?(u||(u=o("LSIntEnum"))).ofNumber(152):(u||(u=o("LSIntEnum"))).ofNumber(153),l[2]=d.is_viewer_subscribed,l[3]=f}else f=l[3];var h=f,y;return l[4]!==m||l[5]!==a||l[6]!==s||l[7]!==i||l[8]!==_||l[9]!==h?(y=function(){if(m!=null){i(m);var e={threadKey:(c||(c=o("I64"))).of_string(m),threadLinkHash:_!=null?_:void 0,threadType:h!=null?h:(u||(u=o("LSIntEnum"))).ofNumber(152)};o("MWPActor.react").isAPPlus()?s.openInbox(e,a):s.openTabOrInbox(e,a)}},l[4]=m,l[5]=a,l[6]=s,l[7]=i,l[8]=_,l[9]=h,l[10]=y):y=l[10],y}l.default=m}),98);/*FB_PKG_DELIM*/
__d("FocusTableUtils",["FocusManager","filterNulls","focusKeyboardEventPropagation","focusScopeQueries","setElementCanTab"],(function(t,n,r,o,a,i,l){function e(e){return e.length===1}function s(e){return e instanceof HTMLElement||e instanceof SVGElement}function u(e,t){for(var n,o,a,i=t instanceof HTMLElement&&t.id!==""?t.id:null,l=new Set(t instanceof HTMLElement?r("filterNulls")([].concat(((n=t.getAttribute("aria-labelledby"))!=null?n:"").split(" "),((o=t.getAttribute("aria-describedby"))!=null?o:"").split(" "),((a=t.getAttribute("aria-owns"))!=null?a:"").split(" "),[t.getAttribute("aria-errormessage")])).filter(function(e){return e!==""}):[]),u=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(n){return n===t||n.nodeType===Node.TEXT_NODE&&n.textContent.trim()===""||s(n)&&l.has(n.id)||s(n)&&n.getAttribute("aria-hidden")==="true"||n instanceof HTMLLabelElement&&(n.htmlFor===i||n.contains(t))?NodeFilter.FILTER_REJECT:n.hasChildNodes()?NodeFilter.FILTER_SKIP:s(n)&&n.getAttribute("aria-label")==null&&n.getAttribute("aria-labelledby")==null&&n.getAttribute("aria-describedby")==null&&n.getAttribute("alt")==null&&n.getAttribute("title")==null?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),c=u.currentNode;c===e;)c=u.nextNode();return c!=null}var c=new Set(["button","checkbox","radio","reset","submit"]),d=new Set(["checkbox","link","switch","radio","button"]),m=new Set(["a","button"]);function p(e){var t=e.getAttribute("role"),n=e.tagName.toLowerCase(),r=e instanceof HTMLInputElement?e.type:null;return!!(e instanceof HTMLInputElement&&c.has(r)||d.has(t)||m.has(n))}function _(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(t){return t instanceof HTMLElement&&p(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}),r=n.nextNode();r;)t.push(r),r=n.nextNode();return t}function f(e,t){if(!t)return null;var n=e.DO_NOT_USE_queryFirstNode(o("focusScopeQueries").tableCellScopeQuery);if(n==null)return null;var r=_(n),a=r!=null?r:[],i=a[0],l=babelHelpers.arrayLikeToArray(a).slice(1);if(i!=null&&l.length===0&&!u(n,i))return i}function g(e,t,n){if(t){var r=t.scopeRef.current;if(r!==null){var a,i,l=f(r,(a=t.allowWithinCellNavigation)!=null?a:!1),s=(i=l!=null?l:r.DO_NOT_USE_queryFirstNode(e))!=null?i:t.focusStaticCells===!0?r.DO_NOT_USE_queryFirstNode(o("focusScopeQueries").tableCellScopeQuery):null;s!==null&&(document.activeElement!=null&&o("setElementCanTab").setElementCanTab(document.activeElement,!1,t.focusStaticCells),o("setElementCanTab").setElementCanTab(s,!0,t.focusStaticCells),o("FocusManager").focusElement(s),n!=null&&(n.preventDefault(),o("focusKeyboardEventPropagation").stopFocusKeyboardEventPropagation(n)))}}}function h(e,t,n){if(t!=null){var r=t.DO_NOT_USE_queryFirstNode(e);r!==null&&(o("setElementCanTab").setElementCanTab(r,!0),o("FocusManager").focusElement(r),n.preventDefault(),o("focusKeyboardEventPropagation").stopFocusKeyboardEventPropagation(n))}}function y(e,t,n,r,o){var a=r[n],i=S(a,o),l=0,s,u,c;do{if(s=t-l,s>=0&&(c=b(a,s,o,e),c)||(u=t+l,u<=i&&(c=b(a,u,o,e),c)))return c;l++}while(s>=0&&u<=i);return null}function C(e,t,n,r,o,a,i,l){var s=t.onNavigate;if(s){var u=!1,c=I(o,r,l),d=c[1],m=D(t,r,i),p=m[0],_=m[1];if(p===null)return!1;var f={currentCellIndex:d,currentRowIndex:_,event:n,focusCell:function(t,r){g(r||a,t,n)},getCell:function(t,n){var e=p[t];return e!=null?b(e,n,l):null},getCellByTag:function(t){var e=y(t,d,_,p,l);if(e)return e;for(var n=p.length,r=_+1;;){if(r===_)return null;if(r>n-1){r=0;continue}if(e=y(t,d,r,p,l),e)return e;r++}return null},preventDefault:function(){u=!0},type:e};if(s(f),u)return!0}return!1}function b(e,t,n,r){for(var o=e.getChildContextValues(n).filter(function(e){return e!=null&&(r===void 0||e.tag===r)}),a=0,i=0;i<o.length;i++){var l=o[i];if(l&&(a+=l&&l.colSpan||1,a>t))return l}return null}function v(e,t,n,r,o){var a=b(t,n,r);if(a!==null){g(e,a,o);return}var i=t.getChildContextValues(r).filter(Boolean);i.length>0&&g(e,i[i.length-1],o)}function S(e,t){for(var n,r=(n=e.getChildContextValues(t).filter(Boolean))!=null?n:[],o=0,a=0;a<r.length;a++){var i,l=r[a],s=l&&((i=l.colSpan)!=null?i:1);o+=s}return o}function R(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r],a=b(o,e,n);if(a!==null)return r+1}return 0}function L(e,t,n){for(var r=0;r<e.length;r++){var o=e[r],a=b(o,t,n);if(a!==null)return r}return-1}function E(e,t){for(var n=0,r=0;r<e.length;r++){var o=e[r];if(o!==null){if(o.scopeRef.current===t)return[r,r+n];var a=o.colSpan;typeof a=="number"&&(n+=a-1)}}return[-1,-1]}function k(e,t){return e.getChildContextValues(t).filter(Boolean)}function I(e,t,n){var r=k(t,n);if(r.length>0){var o=E(r,e),a=o[0],i=o[1];return[r,a,i]}return[null,-1,-1]}function T(e,t,n){if(e){var r=e.scopeRef.current;if(r!==null){for(var o=r.getChildContextValues(t),a=[],i=0;i<o.length;i++){var l=o[i];if(l){var s,u,c=(s=l.scopeRef)==null?void 0:s.current,d=(u=n==null?void 0:n(l))!=null?u:!0;c&&d&&a.push(c)}}return a}}return null}function D(e,t,n,r){var o=T(e,n,r);if(t&&o&&o.length>0){var a=o.indexOf(t);return[o,a]}return[null,-1]}function x(e){var t=e.altKey,n=e.ctrlKey,r=e.metaKey,o=e.shiftKey;return t===!0||n===!0||r===!0||o===!0}l.isPrintableCharacter=e,l.hasUnassociatedLeafNodes=u,l.isArrowKeyLessOperationElement=p,l.getCellSingleInteractiveContentNode=f,l.focusCell=g,l.focusRow=h,l.checkRowForMatch=y,l.handleOnNavigateBehavior=C,l.getCellByColumnIndex=b,l.focusCellByColumnIndex=v,l.getTotalSpan=S,l.getLastRowNumInColumn=R,l.getFirstRowIndexInColumn=L,l.getCellIndexes=E,l.getRowCells=k,l.getRowCellsWithIndexes=I,l.getRows=T,l.getRowsWithIndex=D,l.hasModifierKey=x}),98);
__d("FocusTable.react",["FocusManager","FocusTableUtils","Locale","ReactFocusEvent.react","ReactKeyboardEvent.react","focusKeyboardEventPropagation","react","setElementCanTab"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=u.useRef,p=5;function _(e){var t=s.unstable_Scope,n=s.createContext(null),r=s.createContext(null),a=s.createContext(null);function l(r){var a=r.children,i=r.wrapX,l=r.wrapY,u=r.wrapXToNextLine,c=r.wrapYToNextColumn,f=c===void 0?!1:c,g=r.tabScopeQuery,h=r.allowModifiers,y=r.pageJumpSize,C=y===void 0?p:y,b=r.onNavigate,v=r.disabled,S=r.withinCellTabScopeQuery,R=r.focusStaticCells,L=R===void 0?!1:R,E=m(null),k=d(function(){return{scopeRef:E,wrapXToNextLine:u,wrapYToNextColumn:f,wrapX:i,wrapY:l,tabScopeQuery:g,allowModifiers:h,pageJumpSize:C,onNavigate:b,disabled:v,withinCellTabScopeQuery:S,focusStaticCells:L}},[u,f,i,l,g,h,C,b,v,S,L]),I=m(!1),T=o("ReactFocusEvent.react").useFocusWithin_DEPRECATED(E,d(function(){return{onFocusWithin:function(n){I.current||(I.current=!0,E.current&&e&&(_(E.current,e,!1),o("setElementCanTab").setElementCanTab(n.target,!0,L)))}}},[I,L]));return s.jsx(n.Provider,{value:k,children:s.jsx(t,{ref:T,children:a})})}l.displayName=l.name+" [from "+i.id+"]";function u(e){var n=e.children,o=m(null),a=d(function(){return{scopeRef:o}},[]);return s.jsx(r.Provider,{value:a,children:s.jsx(t,{ref:o,children:n})})}u.displayName=u.name+" [from "+i.id+"]";function _(e,t,n){var r=e.DO_NOT_USE_queryAllNodes(t);if(r!=null)for(var a=0;a<r.length;a++){var i=r[a];o("setElementCanTab").setElementCanTab(i,n)}}function g(i){var l,u=i.children,p=i.colSpan,g=i.tag,h=c(n),y=(l=c(r))==null?void 0:l.scopeRef,C=m(null),b=m(!1),v=(h==null?void 0:h.withinCellTabScopeQuery)!=null,S=h==null?void 0:h.focusStaticCells;o("ReactKeyboardEvent.react").useKeyboard(C,d(function(){return{onKeyDown:function(n){if(!(h&&h.disabled===!0)&&!o("focusKeyboardEventPropagation").hasFocusKeyboardEventPropagationStopped(n)){var t=C.current;if(!(t===null||h===null)&&y!=null){var i=y.current;if(i!==null){var l=n.key,s=v&&o("FocusTableUtils").getCellSingleInteractiveContentNode(t,v)==null,u=b.current;if(l==="Tab"&&h){var c=h.tabScopeQuery,d=h.scopeRef.current;if(c&&d){if(o("FocusTableUtils").handleOnNavigateBehavior("TAB",h,n,i,t,c,r,a))return;var m=h.withinCellTabScopeQuery;u&&m!=null?n.shiftKey?o("FocusManager").focusPreviousContained(m,t,n,!0):o("FocusManager").focusNextContained(m,t,n,!0):(_(d,c,!1),document.activeElement!=null&&o("setElementCanTab").setElementCanTab(document.activeElement,!0,S))}return}var p=n.ctrlKey||n.metaKey,g=l;switch(o("Locale").isRTL()&&(l==="ArrowRight"?g="ArrowLeft":l==="ArrowLeft"&&(g="ArrowRight")),g){case"Home":{if(o("FocusTableUtils").handleOnNavigateBehavior("HOME",h,n,i,t,e,r,a)||u)return;var R=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),L=R[0],E=R[1],k=o("FocusTableUtils").getRowsWithIndex(h,i,r),I=k[0],T=k[1];if(L!==null&&I!==null){if(p){if(T!==0||E!==0){var D=I[0];o("FocusTableUtils").focusCellByColumnIndex(e,D,0,a,n)}}else if(E!==0){var x=I[T];o("FocusTableUtils").focusCellByColumnIndex(e,x,0,a,n)}}return}case"End":{if(o("FocusTableUtils").handleOnNavigateBehavior("END",h,n,i,t,e,r,a)||u)return;var $=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),P=$[0],N=$[1],M=o("FocusTableUtils").getRowsWithIndex(h,i,r),w=M[0],A=M[1];if(P!==null&&w!==null)if(p){if(A!==w.length-1||N!==P.length-1){var F=w[w.length-1],O=F.getChildContextValues(a).filter(Boolean);O.length>0&&o("FocusTableUtils").focusCell(e,O[O.length-1],n)}}else N!==P[P.length-1]&&o("FocusTableUtils").focusCell(e,P[P.length-1],n);return}case"ArrowUp":{if(f(n,h)||o("FocusTableUtils").handleOnNavigateBehavior("PREV_ROW",h,n,i,t,e,r,a)||u)return;var B=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),W=B[0],q=B[1],U=B[2];if(W!==null&&h){var V=o("FocusTableUtils").getRowsWithIndex(h,i,r),H=V[0],G=V[1];if(H!==null)if(G===0){var z=h.wrapY,j=h.wrapYToNextColumn;if(z===!0&&!p){var K=H[H.length-1];o("FocusTableUtils").focusCellByColumnIndex(e,K,U,a,n)}else if(j===!0&&!p&&q>0){var Q=U-1,X=o("FocusTableUtils").getLastRowNumInColumn(Q,H,a),Y=H[X-1];o("FocusTableUtils").focusCellByColumnIndex(e,Y,Q,a,n)}}else if(p){var J=H[0];o("FocusTableUtils").focusCellByColumnIndex(e,J,U,a,n)}else{var Z=H[G-1];o("FocusTableUtils").focusCellByColumnIndex(e,Z,U,a,n)}}return}case"PageUp":{if(o("FocusTableUtils").handleOnNavigateBehavior("PAGE_UP",h,n,i,t,e,r,a)||u)return;var ee=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),te=ee[0],ne=ee[2],re=o("FocusTableUtils").getRowsWithIndex(h,i,r),oe=re[0],ae=re[1];if(te!==null&&oe!==null&&h&&ae!==0){var ie=h.pageJumpSize,le=oe[Math.max(0,ae-ie)];o("FocusTableUtils").focusCellByColumnIndex(e,le,ne,a,n)}return}case"ArrowDown":{if(f(n,h)||o("FocusTableUtils").handleOnNavigateBehavior("NEXT_ROW",h,n,i,t,e,r,a)||u)return;var se=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),ue=se[0],ce=se[2],de=o("FocusTableUtils").getRowsWithIndex(h,i,r),me=de[0],pe=de[1];if(ue!==null&&me!==null&&h&&pe!==-1)if(pe===me.length-1){var _e=h.wrapY,fe=h.wrapYToNextColumn;if(_e===!0&&!p){var ge=me[0];o("FocusTableUtils").focusCellByColumnIndex(e,ge,ce,a,n)}else if(fe===!0&&!p){var he=ce+1,ye=o("FocusTableUtils").getFirstRowIndexInColumn(me,he,a);if(ye!==-1){var Ce=me[ye];o("FocusTableUtils").focusCellByColumnIndex(e,Ce,he,a,n)}}}else if(p){var be=me[me.length-1];o("FocusTableUtils").focusCellByColumnIndex(e,be,ce,a,n)}else{var ve=me[pe+1];o("FocusTableUtils").focusCellByColumnIndex(e,ve,ce,a,n)}return}case"PageDown":{if(o("FocusTableUtils").handleOnNavigateBehavior("PAGE_DOWN",h,n,i,t,e,r,a)||u)return;var Se=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),Re=Se[0],Le=Se[2],Ee=o("FocusTableUtils").getRowsWithIndex(h,i,r),ke=Ee[0],Ie=Ee[1];if(Re!==null&&ke!==null&&h&&Ie!==ke.length-1){var Te=h.pageJumpSize,De=ke[Math.min(ke.length-1,Ie+Te)];o("FocusTableUtils").focusCellByColumnIndex(e,De,Le,a,n)}return}case"ArrowLeft":{if(f(n,h)||o("FocusTableUtils").handleOnNavigateBehavior("PREV_CELL",h,n,i,t,e,r,a)||u)return;var xe=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),$e=xe[0],Pe=xe[1],Ne=o("FocusTableUtils").getRowsWithIndex(h,i,r),Me=Ne[0],we=Ne[1];if($e!==null&&Me!==null&&h){if(Pe>0)o("FocusTableUtils").focusCell(e,$e[Pe-1],n);else if(Pe===0){var Ae=h.wrapX,Fe=h.wrapXToNextLine;Ae===!0?o("FocusTableUtils").focusCell(e,$e[$e.length-1],n):Fe===!0&&Me[we-1]&&o("FocusTableUtils").focusCellByColumnIndex(e,Me[we-1],o("FocusTableUtils").getTotalSpan(Me[we-1],a),a,n)}}return}case"ArrowRight":{if(f(n,h)||o("FocusTableUtils").handleOnNavigateBehavior("NEXT_CELL",h,n,i,t,e,r,a)||u)return;var Oe=o("FocusTableUtils").getRowCellsWithIndexes(t,i,a),Be=Oe[0],We=Oe[1],qe=o("FocusTableUtils").getRowsWithIndex(h,i,r),Ue=qe[0],Ve=qe[1];if(Be!==null&&Ue!==null&&h&&We!==-1)if(We===Be.length-1){var He=h.wrapX,Ge=h.wrapXToNextLine;He===!0?o("FocusTableUtils").focusCell(e,Be[0],n):Ge===!0&&Ue[Ve+1]&&o("FocusTableUtils").focusCellByColumnIndex(e,Ue[Ve+1],0,a,n)}else o("FocusTableUtils").focusCell(e,Be[We+1],n);return}case"Enter":{if(!s||u||o("FocusTableUtils").handleOnNavigateBehavior("ENTER",h,n,i,t,e,r,a))return;var ze=h==null?void 0:h.withinCellTabScopeQuery;if(ze){var je=t.DO_NOT_USE_queryFirstNode(ze);je!=null&&(b.current=!0,_(t,ze,!0),o("FocusManager").focusElement(je))}return}case"Escape":{if(!s||!u||o("FocusTableUtils").handleOnNavigateBehavior("ESC",h,n,i,t,e,r,a))return;var Ke=h==null?void 0:h.tabScopeQuery;if(Ke){b.current=!1;var Qe=t.DO_NOT_USE_queryAllNodes(Ke);if(Qe!==null)for(var Xe=0;Xe<Qe.length;Xe++){var Ye=Qe[Xe];o("setElementCanTab").setElementCanTab(Ye,!1,S)}o("FocusTableUtils").focusCell(Ke,{scopeRef:C},n)}return}default:o("FocusTableUtils").isPrintableCharacter(l)&&o("FocusTableUtils").handleOnNavigateBehavior("PRINT_CHAR",h,n,i,t,e,r,a)}}}}}}},[y,h,v]));var R=d(function(){return{scopeRef:C,colSpan:p,tag:g,allowWithinCellNavigation:v,focusStaticCells:S}},[p,v,g,S]),L=h==null?void 0:h.tabScopeQuery,E=o("ReactFocusEvent.react").useFocusWithin_DEPRECATED(C,d(function(){return{onFocusWithin:function(n){if(e!=null){var t,r=(t=C.current)==null?void 0:t.DO_NOT_USE_queryFirstNode(e),a=n.target===r;if(a&&r&&!o("setElementCanTab").canElementTab(r)){var i=h==null?void 0:h.scopeRef.current;i&&_(i,e,!1),o("setElementCanTab").setElementCanTab(r,!0,S)}}if(L!=null){var l,s=(l=C.current)==null?void 0:l.DO_NOT_USE_queryFirstNode(L),u=n.target===s,c=R.allowWithinCellNavigation===!0;u&&c&&o("FocusTableUtils").focusCell(L,R),s!=null&&!u&&c&&n.target instanceof HTMLElement&&!o("FocusTableUtils").isArrowKeyLessOperationElement(n.target)&&(b.current=!0)}},onBlurWithin:function(){b.current=!1}}},[L,R,h==null?void 0:h.scopeRef]));return s.jsx(a.Provider,{value:R,children:s.jsx(t,{ref:E,children:u})})}return g.displayName=g.name+" [from "+i.id+"]",[l,u,g]}function f(e,t){if(o("FocusTableUtils").hasModifierKey(e)&&t){var n=t.allowModifiers;if(n!==!0)return!0}}l.createFocusTable=_}),98);
__d("BaseGridFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(t,n,r,o,a,i,l){"use strict";var e=o("FocusTable.react").createFocusTable(o("focusScopeQueries").focusableScopeQuery),s=e[0],u=e[1],c=e[2];l.BaseGridFocusTable=s,l.BaseGridFocusRow=u,l.BaseGridFocusCell=c}),98);
__d("BaseGrid.react",["BaseGridFocusTable.react","focusScopeQueries","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e["aria-describedby"],r=e["aria-multiselectable"],a=e.children,i=e.wrapNavigation,l=e.xstyle,u=e["aria-label"],d=e["aria-labelledby"],m=i===void 0?"none":i,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=["row","both"],t[0]=p):p=t[0];var _=p.includes(m),f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f=["column","both"],t[1]=f):f=t[1];var g=f.includes(m),h;t[2]!==n||t[3]!==u||t[4]!==d||t[5]!==r||t[6]!==a||t[7]!==l?(h=s.jsx(o("react-strict-dom").html.div,{"aria-describedby":n,"aria-label":u,"aria-labelledby":d,"aria-multiselectable":r,role:"grid",style:l,children:a}),t[2]=n,t[3]=u,t[4]=d,t[5]=r,t[6]=a,t[7]=l,t[8]=h):h=t[8];var y;return t[9]!==_||t[10]!==g||t[11]!==h?(y=s.jsx(o("BaseGridFocusTable.react").BaseGridFocusTable,{tabScopeQuery:o("focusScopeQueries").tabbableScopeQuery,withinCellTabScopeQuery:c,wrapXToNextLine:_,wrapYToNextColumn:g,children:h}),t[9]=_,t[10]=g,t[11]=h,t[12]=y):y=t[12],y}var c=function(t,n){return n.role==="gridcell"||n.role==="row"?!1:o("focusScopeQueries").tabbableScopeQuery(t,n)};l.default=u}),98);
__d("BaseGridCell.react",["BaseGridFocusTable.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["aria-selected","children","data-type","ref","testid","xstyle"],s,u,c=u||(u=o("react")),d={focusRing:{boxShadow:"x59fq91",outline:"x1a2a7pz x1uvtmcs x1i4ix8p",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(18),a,i,l,u,m,p,_;n[0]!==t?(i=t["aria-selected"],l=t.children,u=t["data-type"],m=t.ref,p=t.testid,_=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=p,n[7]=_):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],p=n[6],_=n[7]);var f;n[8]!==_?(f=(s||(s=r("stylex"))).props(_,d.focusRing),n[8]=_,n[9]=f):f=n[9];var g;return n[10]!==a||n[11]!==i||n[12]!==l||n[13]!==u||n[14]!==m||n[15]!==f||n[16]!==p?(g=c.jsx(o("BaseGridFocusTable.react").BaseGridFocusCell,{children:c.jsx("div",babelHelpers.extends({},a,{"aria-selected":i,"data-testid":void 0,"data-type":u,ref:m,role:"gridcell"},f,{tabIndex:0,children:l}))}),n[10]=a,n[11]=i,n[12]=l,n[13]=u,n[14]=m,n[15]=f,n[16]=p,n[17]=g):g=n[17],g}l.default=m}),98);
__d("BaseGridRow.react",["BaseGridFocusTable.react","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.xstyle,a;return t[0]!==n||t[1]!==r?(a=s.jsx(o("BaseGridFocusTable.react").BaseGridFocusRow,{children:s.jsx(o("react-strict-dom").html.div,{role:"row",style:r,children:n})}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}l.default=u}),98);
__d("BaseGridRowScrollableArea.react",["BaseScrollableArea.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["addonEnd","addonStart","children","ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(12),a,i,l,s,c;n[0]!==t?(a=t.addonEnd,i=t.addonStart,l=t.children,s=t.ref,c=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5]);var d;return n[6]!==a||n[7]!==i||n[8]!==l||n[9]!==s||n[10]!==c?(d=u.jsxs(r("BaseScrollableArea.react"),babelHelpers.extends({},c,{ref:s,children:[i,l,a]})),n[6]=a,n[7]=i,n[8]=l,n[9]=s,n[10]=c,n[11]=d):d=n[11],d}l.default=c}),98);
__d("BaseHScrollContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({role:void 0,spacing:void 0});l.default=u}),98);
__d("BaseHScrollChild",["BaseGridCell.react","BaseHScrollContext","FocusInertRegion.react","Locale","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["aria-hidden","children","expanding","role","testid","type","xstyle"],s,u,c=u||(u=o("react")),d=u.useContext,m={flexBasis:"x1mz2wy7",$$css:!0},p={":last-of-type_marginInlineEnd":"x10xlvfm",$$css:!0},_={card:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",minWidth:"xeuugli",scrollSnapAlign:"x1bhewko",$$css:!0},cardExpanding:{display:"x78zum5",$$css:!0},cardRTL:{scrollSnapAlign:"x83psoy",$$css:!0},flexBasis:function(t){return[{flexBasis:t!=null?"x1mz2wy7":t,$$css:!0},{"--x-flexBasis":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},flexBasisDoubleWidth:function(t,n){return[m,{"--x-flexBasis":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})("calc(("+t+") * 2 + "+n+"px)")}]},gap:function(t){return[p,{marginInlineEnd:t!=null?"x1c9tiao":t,$$css:!0},{"--x-marginInlineEnd":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}},f=o("Locale").isRTL();function g(t){var n=o("react-compiler-runtime").c(21),a,i,l,u,m,p,g,h;n[0]!==t?(u=t["aria-hidden"],i=t.children,m=t.expanding,l=t.role,g=t.testid,p=t.type,h=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=p,n[7]=g,n[8]=h):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],p=n[6],g=n[7],h=n[8]);var y=u===void 0?!1:u,C=m===void 0?!1:m,b=p===void 0?"default":p,v=d(r("BaseHScrollContext")),S=v.role,R=v.spacing;if(R==null)return null;var L=R.gap,E=R.width,k;if(n[9]!==a||n[10]!==i||n[11]!==C||n[12]!==L||n[13]!==y||n[14]!==S||n[15]!==l||n[16]!==g||n[17]!==b||n[18]!==E||n[19]!==h){var I;e:switch(b){case"custom":{I=void 0;break e}case"doubleWidth":{I=_.flexBasisDoubleWidth(E,L);break e}default:I=_.flexBasis(E)}var T=[_.card,f&&_.cardRTL,_.gap(L),C&&_.cardExpanding,h,I];k=S==="grid"?c.jsx(r("BaseGridCell.react"),babelHelpers.extends({},a,{"data-type":"hscroll-child",testid:void 0,xstyle:T,children:i})):c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(T),{"data-testid":void 0,"data-type":"hscroll-child",role:S==="list"?"listitem":l,children:c.jsx(r("FocusInertRegion.react"),{disabled:!y,children:i})})),n[9]=a,n[10]=i,n[11]=C,n[12]=L,n[13]=y,n[14]=S,n[15]=l,n[16]=g,n[17]=b,n[18]=E,n[19]=h,n[20]=k}else k=n[20];return k}l.default=g}),98);
__d("BaseHScrollConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1600,l=10;i.MAX_CONTAINER_WIDTH=e,i.WIGGLE_ROOM=l}),66);
__d("BaseHScrollPeek.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.maxContentWindowWidth,r=e.padding,a=e.width,i;return t[0]!==n||t[1]!==r||t[2]!==a?(i=n!=null&&r==null?s.jsx("span",{style:{flexShrink:0,minWidth:a,width:"calc((100% - "+n+"px) / 2)"}}):s.jsx("span",{style:{minWidth:r!=null?r:a}}),t[0]=n,t[1]=r,t[2]=a,t[3]=i):i=t[3],i}l.default=u}),98);
__d("BaseHScrollScrollableArea.react",["BaseScrollableArea.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["addonEnd","addonStart"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(8),a,i,l;n[0]!==t?(a=t.addonEnd,i=t.addonStart,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s;return n[4]!==a||n[5]!==i||n[6]!==l?(s=u.jsxs(r("BaseScrollableArea.react"),babelHelpers.extends({},l,{children:[i,l.children,a]})),n[4]=a,n[5]=i,n[6]=l,n[7]=s):s=n[7],s}l.default=c}),98);
__d("getBaseHScrollAccessibilityAlert",["fbt","compactMap","intlList"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t,n,o,a){var i=r("compactMap")(n,function(n,r){var i=n.getBoundingClientRect(),l=Math.round(i.left+i.width-e+a-o)<=0,s=Math.round(i.left-e-t.clientWidth-a-o)>=0;return!l&&!s?(r+1).toString():null});return s._(/*BTDS*/"Item {number} of {total}",[s._param("number",r("intlList")(i)),s._param("total",n.length)])}l.default=e}),226);
__d("setBaseHscrollChildrenAriaHidden",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=Array.from(e.children[0].children).filter(function(e){return e.tagName==="DIV"}),n=e.getBoundingClientRect();t.forEach(function(e){var t=e.getBoundingClientRect();if(n!=null){var r=t.right<n.left,o=t.left>n.right;(o||r)&&e.getAttribute("aria-hidden")!=="true"&&e.setAttribute("aria-hidden","true"),!o&&!r&&e.getAttribute("aria-hidden")==="true"&&e.removeAttribute("aria-hidden")}})}i.default=e}),66);
__d("smoothScrollTo",["ExecutionEnvironment","UserAgent"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("UserAgent").isBrowser("Firefox"),u=(e||(e=r("ExecutionEnvironment"))).canUseDOM&&window.matchMedia("(prefers-reduced-motion: reduce)"),c=u&&u.matches,d=(e||(e=r("ExecutionEnvironment"))).canUseDOM&&document.documentElement!=null&&"scrollBehavior"in document.documentElement.style,m=new WeakMap;function p(e,t,n){var r=t.left,o=r===void 0?0:r,a=t.top,i=a===void 0?0:a;s&&!m.get(e)&&o!==0&&(e.scrollLeft+=o/Math.abs(o),m.set(e,!0)),d?(e.scrollTo({behavior:c?"auto":"smooth",left:o,top:i}),n!=null&&"onscrollend"in window&&e.addEventListener("scrollend",n,{once:!0})):(e.scrollTo(o,i),n==null||n())}l.default=p}),98);
__d("useContainerBreakpoints",["$InternalEnum","gkx","react","react-compiler-runtime","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState,d=n("$InternalEnum")({BiggerContainerSmallerChild:0,BiggerContainerBiggerChild:1});function m(e,t){var n=e[0],r=n.maxContainerWidth,o=n.width,a=babelHelpers.arrayLikeToArray(e).slice(1);if(r===1/0||a.length===0)return o;switch(t){case d.BiggerContainerSmallerChild:{var i="calc(("+r+"px - 100%) * 9999)",l=m(a,t);return typeof l=="number"&&(l="min("+l+"px, (100% - "+(r+.1)+"px) * 9999)"),"max("+l+", min("+o+", "+i+"))"}case d.BiggerContainerBiggerChild:{var s="calc((100% - "+r+"px) * 9999)",u=m(a,t);return"min("+u+", max("+o+", "+s+"))"}}}function p(e,t){var n=o("react-compiler-runtime").c(5),a=c(null),i=a[0],l=a[1],s;n[0]!==e?(s=function(n){var t=n.width,r;for(var o of e)if(!(t>o.maxContainerWidth)){r=o.width;break}l(r)},n[0]=e,n[1]=s):s=n[1];var u=s,d=r("useResizeObserver")(u),m;return n[2]!==i||n[3]!==d?(m=[d,i],n[2]=i,n[3]=d,n[4]=m):m=n[4],m}function _(e,t){var n=o("react-compiler-runtime").c(5),r;n[0]!==e||n[1]!==t?(r=m(e,t),n[0]=e,n[1]=t,n[2]=r):r=n[2];var a=r,i;return n[3]!==a?(i=[void 0,a],n[3]=a,n[4]=i):i=n[4],i}var f=r("gkx")("24318")?_:p;l.BreakpointRelationship=d,l.useContainerBreakpoints=f}),98);
__d("BaseHScroll.react",["BaseGrid.react","BaseGridRow.react","BaseGridRowScrollableArea.react","BaseHScrollChild","BaseHScrollConstants","BaseHScrollContext","BaseHScrollPeek.react","BaseHScrollScrollableArea.react","BaseView.react","HiddenSubtreePassiveContext","Locale","UserAgent","emptyFunction","getBaseHScrollAccessibilityAlert","react","setBaseHscrollChildrenAriaHidden","smoothScrollTo","stylex","useBaseHScrollFakeCards","useContainerBreakpoints","useEventHandler","useMergeRefs","useTriggerAccessibilityAlert","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e=["accessibilityLabel","buttonWrapperStyle","cardWidth","containerXStyle","outerContainerXStyle","scrollViewXStyle","scrollContainerXStyle","disableScrolling","gap","hideArrows","initialScrollToIndex","initialScrollSmoothing","isButtonInward","maxContentWindowWidth","nextButton","peekWidth","prevButton","onPressNext","onPressPrev","peek","peekPaddingStart","peekPaddingEnd","scrollRef","testid","role"],s,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useContext,f=m.useLayoutEffect,g=m.useMemo,h=m.useRef,y=m.useState,C=o("Locale").isRTL(),b=r("UserAgent").isBrowser("Safari < 14")||r("UserAgent").isBrowser("Mobile Safari < 14"),v=r("UserAgent").isBrowser("Chrome"),S=r("UserAgent").isBrowser("IE")||r("UserAgent").isBrowser("Edge"),R=C&&b;function L(t){var n,a=t.accessibilityLabel,i=t.buttonWrapperStyle,l=t.cardWidth,c=t.containerXStyle,m=c===void 0?T.containerPaddingDefault:c,b=t.outerContainerXStyle,v=t.scrollViewXStyle,L=t.scrollContainerXStyle,E=t.disableScrolling,I=E===void 0?!1:E,D=t.gap,x=D===void 0?0:D,$=t.hideArrows,P=$===void 0?!1:$,N=t.initialScrollToIndex,M=t.initialScrollSmoothing,w=M===void 0?!1:M,A=t.isButtonInward,F=A===void 0?!1:A,O=t.maxContentWindowWidth,B=t.nextButton,W=t.peekWidth,q=t.prevButton,U=t.onPressNext,V=U===void 0?r("emptyFunction"):U,H=t.onPressPrev,G=H===void 0?r("emptyFunction"):H,z=t.peek,j=z===void 0?!1:z,K=t.peekPaddingStart,Q=t.peekPaddingEnd,X=t.scrollRef,Y=t.testid,J=t.role,Z=babelHelpers.objectWithoutPropertiesLoose(t,e),ee=O!=null&&j&&Q!=null&&K!=null,te=l.type==="responsive"?l.minWidth:l.width,ne=g(function(){var e=[];if(l.type==="fixed")e.push({maxContainerWidth:1/0,width:te+"px"});else if(j&&O!=null){for(var t=W*2,n=2*te+x+t,r=1;n<O+t;){var a=r<=1||x===0?0:(r-1)*x,i=a+t,s=i===0?"100%":"(100% - "+i+"px)";e.push({maxContainerWidth:n,width:"calc("+s+" / "+r+")"}),n+=x+te,r++}var u=r<=1||x===0?0:(r-1)*x,c=u+t,d=c===0?"100%":"(100% - "+c+"px)";e.push({maxContainerWidth:O+t,width:"calc("+d+" / "+r+")"}),e.push({maxContainerWidth:1/0,width:(O-u)/r})}else{for(var m=j?W*2:0,p=2*te+x+m,_=1;p<o("BaseHScrollConstants").MAX_CONTAINER_WIDTH;){var f=_<=1||x===0?0:(_-1)*x,g=f+m,h=g===0?"100%":"(100% - "+g+"px)";e.push({maxContainerWidth:p,width:"calc("+h+" / "+_+")"}),p+=x+te,_++}var y=_<=1||x===0?0:(_-1)*x,C=y+m,b=C===0?"100%":"(100% - "+C+"px)";e.push({maxContainerWidth:1/0,width:"calc("+b+" / "+_+")"})}return e},[l.type,j,O,te,W,x]),re=r("useTriggerAccessibilityAlert")(),oe=o("useContainerBreakpoints").useContainerBreakpoints(ne,o("useContainerBreakpoints").BreakpointRelationship.BiggerContainerSmallerChild),ae=oe[0],ie=oe[1],le=g(function(){return j&&O!=null?[{maxContainerWidth:O+W*2,width:W},{maxContainerWidth:1/0,width:"calc((100% - "+O+"px) / 2)"}]:j?[{maxContainerWidth:1/0,width:W}]:[{maxContainerWidth:1/0,width:0}]},[O,j,W]),se=o("useContainerBreakpoints").useContainerBreakpoints(le,o("useContainerBreakpoints").BreakpointRelationship.BiggerContainerBiggerChild),ue=se[0],ce=se[1],de=O!=null&&typeof ce=="string"&&ce.includes("min(")?"max("+W+"px, (100% - "+O+"px) / 2)":ce,me=(s||(s=r("useUnsafeRef_DEPRECATED")))(null),pe=d.Children.count(Z.children),_e=y(Z.isCircular?!1:!C),fe=_e[0],ge=_e[1],he=y(Z.isCircular?!1:C),ye=he[0],Ce=he[1],be=h(!1);f(function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null&&C){var n=t.clientWidth,r=t.scrollLeft,o=t.scrollWidth;r>50&&r>o-n-50&&(be.current=!0)}},[]);var ve=r("useEventHandler")(function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){var n=t.getBoundingClientRect(),r=n.width,o=t.scrollLeft,a=t.scrollWidth;if(!Z.isCircular)C&&!S?be.current?(ge(o>a-r-x),Ce(o<=x)):(ge(o>=-x),Ce(o<-a+r+x)):(ge(o<=x),Ce(o>a-r-x));else{var i=$e.current(t),l=i.childCards;if(l==null||l[0]==null)return;ke({isRTL:C,isRTLScrollFromMaxScroll:be,scrollRef:me})}}}),Se=r("useBaseHScrollFakeCards")({children:Z.isCircular?Z.children:[],fakeCardXStyle:Z.isCircular?Z.fakeCardXStyle:null,gap:x,isCircular:(n=Z.isCircular)!=null?n:!1,minWidth:te,onResize:function(){var e;ve();var t=(e=me.current)==null?void 0:e.getDOMNode();t!=null&&r("setBaseHscrollChildrenAriaHidden")(t)},peek:j,peekWidth:W}),Re=Se[0],Le=Se[1],Ee=Se[2],ke=Se[3],Ie=r("useMergeRefs")(ae,ue,Ee),Te=_(r("HiddenSubtreePassiveContext"));f(function(){var e=Te.subscribeToChanges(function(e){e.hidden||ve()});return function(){return e.remove()}},[Te,ve]),f(function(){ve()},[pe,ve]);var De=h(x);f(function(){De.current=x},[x]);var xe=p(function(e){var t=e.getBoundingClientRect(),n=O!=null?Math.min(t.width-(j?2*W:0),O):j?t.width-2*W:t.width,r=(t.width-n)/2,o=t.left+r,a=t.right-r,i=Array.from(e.querySelectorAll('[data-type="hscroll-child"]'));return{childCards:i,containerLeft:o,containerRight:a,containerWidth:n}},[O,j,W]),$e=h(xe);f(function(){$e.current=xe},[xe]);var Pe=(Re!=null?Re:[]).length;f(function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){if(N==null&&Pe===0){r("setBaseHscrollChildrenAriaHidden")(t);return}var n=$e.current(t),o=n.childCards,a=0;if(N!=null)for(var i=0;i<Math.min(N,o.length);i++)a+=o[i].getBoundingClientRect().width+De.current;if(Pe!==0)for(var l=N==null?0:N,s=l;s<Math.min(l+Pe,o.length);s++)a+=o[s].getBoundingClientRect().width+De.current;var u=function(n){w?r("smoothScrollTo")(t,{left:n},function(){r("setBaseHscrollChildrenAriaHidden")(t)}):(t.scrollTo(n,0),r("setBaseHscrollChildrenAriaHidden")(t))};if(C&&!S)if(be.current){var c=t.scrollWidth-t.getBoundingClientRect().width;u(c-a)}else u(-a);else u(a)}},[N,w,Pe]);var Ne=function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){r("setBaseHscrollChildrenAriaHidden")(t);for(var n=xe(t),a=n.childCards,i=n.containerLeft,l=n.containerRight,s,u=C?0:a.length-1;C?u<a.length:u>=0;C?u++:u--){var c=a[u].getBoundingClientRect();if(c.left<=i-o("BaseHScrollConstants").WIGGLE_ROOM){s=c;break}}if(s!=null){var d=s.right-l;if(d!==0){var m=C&&S?t.scrollLeft-d:t.scrollLeft+d;r("smoothScrollTo")(t,{left:m},function(){r("setBaseHscrollChildrenAriaHidden")(t)}),G(),re(r("getBaseHScrollAccessibilityAlert")(m<0?-t.scrollLeft:d,t,a,i,x))}}}},Me=function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){r("setBaseHscrollChildrenAriaHidden")(t);for(var n=xe(t),a=n.childCards,i=n.containerLeft,l=n.containerRight,s,u=C?a.length-1:0;C?u>=0:u<a.length;C?u--:u++){var c=a[u].getBoundingClientRect();if(c.right>=l+o("BaseHScrollConstants").WIGGLE_ROOM){s=c;break}}if(s!=null){var d=s.left-i;if(d!==0){var m=C&&S?t.scrollLeft-d:t.scrollLeft+d;r("smoothScrollTo")(t,{left:m},function(){r("setBaseHscrollChildrenAriaHidden")(t)}),V(),re(r("getBaseHScrollAccessibilityAlert")(m+t.clientWidth>t.scrollWidth?t.scrollWidth-t.scrollLeft-t.clientWidth:d,t,a,i,x))}}}},we=function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();t!=null&&r("setBaseHscrollChildrenAriaHidden")(t)},Ae=g(function(){return{role:J,spacing:ie!=null?{gap:x,width:ie}:null}},[J,ie,x]);k(me,pe);var Fe=j?d.jsx(r("BaseHScrollPeek.react"),{maxContentWindowWidth:O,padding:K,width:W}):void 0,Oe=j?d.jsx(r("BaseHScrollPeek.react"),{maxContentWindowWidth:O,padding:Q,width:W}):void 0,Be=J==="grid",We=r(Be?"BaseGridRowScrollableArea.react":"BaseHScrollScrollableArea.react"),qe=r("useMergeRefs")(me,X),Ue=d.jsx(We,{addonEnd:d.jsxs(d.Fragment,{children:[Le,Oe]}),addonStart:d.jsxs(d.Fragment,{children:[Fe,Re]}),hideScrollbar:!0,horizontal:!0,onScroll:ve,onScrollEnd:we,ref:qe,style:{scrollPadding:de},vertical:!1,xstyle:[T.scrollView,!R&&T.scrollViewSnap,I&&T.scrollViewNoScroll,v],children:Z.children}),Ve;switch(J){case"grid":Ve=void 0;break;case"list":Ve="list";break;default:Ve=a?"region":void 0;break}var He=Ve?a:void 0;return d.jsxs(r("BaseView.react"),{ref:Ie,testid:void 0,xstyle:b,children:[d.jsx("div",{"aria-hidden":P||!!fe,className:(u||(u=r("stylex")))(T.buttonWrapper,(P||!!fe)&&T.hidden,i),style:C?{right:de!=null&&!ee?de:j?W:0,transform:"translate(calc("+(!j&&F?0:50)+"% + "+(j?x/2:0)+"px), -50%)"}:{left:de!=null&&!ee?de:j?W:0,transform:"translate(calc(-"+(!j&&F?0:50)+"% - "+(j?x/2:0)+"px), -50%)"},suppressHydrationWarning:!Z.isCircular,children:q&&q(C?Me:Ne,!!fe)}),d.jsx(r("BaseView.react"),{"aria-label":He,role:Ve,xstyle:[T.scrollContainer,m,L],children:d.jsx(r("BaseHScrollContext").Provider,{value:Ae,children:Be?d.jsx(r("BaseGrid.react"),{"aria-label":a,children:d.jsx(r("BaseGridRow.react"),{children:Ue})}):Ue})}),d.jsx("div",{"aria-hidden":P||!!ye,className:u(T.buttonWrapper,(P||!!ye)&&T.hidden,i),style:C?{left:de!=null&&!ee?de:j?W:0,transform:"translate(calc(-"+(!j&&F?0:50)+"% - "+(j?x/2:0)+"px), -50%)"}:{right:de!=null&&!ee?de:j?W:0,transform:"translate(calc("+(!j&&F?0:50)+"% + "+(j?x/2:0)+"px), -50%)"},suppressHydrationWarning:!Z.isCircular,children:B&&B(C?Ne:Me,!!ye)})]})}L.displayName=L.name+" [from "+i.id+"]";function E(e,t){}var k=E;if(v){var I=function(t,n){var e,o=(s||(s=r("useUnsafeRef_DEPRECATED")))(null);f(function(){var e,n=o.current,r=(e=t.current)==null?void 0:e.getDOMNode();n!=null&&r!=null&&(r.scrollLeft=n)},[n,t]);var a=(e=t.current)==null?void 0:e.getDOMNode();a!=null&&(o.current=a.scrollLeft)};k=I}var T={buttonWrapper:{opacity:"x1hc1fzr",position:"x10l6tqk",top:"xwa60dl",transitionDuration:"x1d8287x",transitionProperty:"x19991ni",transitionTimingFunction:"xwji4o3",zIndex:"x1vjfegm",$$css:!0},containerPaddingDefault:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},hidden:{opacity:"xg01cxk",pointerEvents:"x47corl",$$css:!0},scrollContainer:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0},scrollView:{boxSizing:"x9f619",marginBottom:"xat24cr",paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",scrollbarWidth:"x1rohswg",$$css:!0},scrollViewNoScroll:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},scrollViewSnap:{scrollSnapType:"xhfbhpw",$$css:!0}};l.HScrollContainer=L,l.HScrollChild=r("BaseHScrollChild")}),98);
__d("useBaseHScrollFakeCards",["BaseHScroll.react","BaseHScrollConstants","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","UserAgent","react","react-compiler-runtime","setBaseHscrollChildrenAriaHidden","useEventHandler","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState;function c(e){var t=o("react-compiler-runtime").c(23),n=e.children,a=e.fakeCardXStyle,i=e.gap,l=e.isCircular,c=e.minWidth,d=e.onResize,m=e.peek,p=e.peekWidth,_=u(0),f=_[0],g=_[1],h;t[0]!==n.length||t[1]!==i||t[2]!==l||t[3]!==c||t[4]!==d||t[5]!==m||t[6]!==p?(h=function(t,r,a){var e=t.width,s=Math.min(e,o("BaseHScrollConstants").MAX_CONTAINER_WIDTH),u=m?p*2:0;if(l){var _=Math.floor((s-u+i)/(c+i));n.length<_?g(0):g(_)}d()},t[0]=n.length,t[1]=i,t[2]=l,t[3]=c,t[4]=d,t[5]=m,t[6]=p,t[7]=h):h=t[7];var y=r("useEventHandler")(h),C=r("useResizeObserver")(y),b,v;if(t[8]!==n||t[9]!==a||t[10]!==l||t[11]!==f){var S=f!==0?n.slice(-f):[],R=n.slice(0,f);b=l?S.map(function(e,t){return s.createElement(o("BaseHScroll.react").HScrollChild,babelHelpers.extends({},r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props,{"aria-hidden":!0,key:"head-"+t,xstyle:[r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props.xstyle,a]}))}):null,v=l?R.map(function(e,t){return s.createElement(o("BaseHScroll.react").HScrollChild,babelHelpers.extends({},r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props,{"aria-hidden":!0,key:"tail-"+t,xstyle:[r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props.xstyle,a]}))}):null,t[8]=n,t[9]=a,t[10]=l,t[11]=f,t[12]=b,t[13]=v}else b=t[12],v=t[13];var L=v,E;t[14]!==i||t[15]!==m||t[16]!==p?(E=function(t){var e,n=t.isRTL,a=t.isRTLScrollFromMaxScroll,l=t.scrollRef,s=(e=l.current)==null?void 0:e.getDOMNode();if(s!=null){var u=r("UserAgent").isBrowser("IE")||r("UserAgent").isBrowser("Edge"),c=s.offsetWidth,d=s.scrollLeft,_=s.scrollWidth,f=n?-(_-c):_-c,g=function(t){var e=function(t){s.scrollTo==null||s.scrollTo(t,0),"onscrollend"in s&&s.addEventListener("scrollend",function(){r("setBaseHscrollChildrenAriaHidden")(s)},{once:!0})};if(n&&!u)if(a.current){var o=s.scrollWidth-s.getBoundingClientRect().width;e(o-t)}else e(-t);else e(t)},h=m?p*2:0,y=o("BaseHScrollConstants").WIGGLE_ROOM/2;if(d>=0-y&&d<=0+y){var C=_-2*c+h-i;g(C)}if(d>=f-y&&d<=f+y){var b=c-h+i;g(b)}}},t[14]=i,t[15]=m,t[16]=p,t[17]=E):E=t[17];var k=E,I;return t[18]!==b||t[19]!==k||t[20]!==C||t[21]!==L?(I=[b,L,C,k],t[18]=b,t[19]=k,t[20]=C,t[21]=L,t[22]=I):I=t[22],I}l.default=c}),98);
__d("FBNucleusDots3HorizontalOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M5 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm7 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm9-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._size=24,u._isSVG=!0;var c=u;l.default=c}),98);
__d("FDSHScroll.react",["fbt","BaseHScroll.react","ChevronLeftFilled24.svg.react","ChevronRightFilled24.svg.react","CometTrackingNodeProvider.react","FDSCircleButton.react","Locale","SVGIcon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["nextButtonLabel","prevButtonLabel","reduceArrowSize","scrollRef"],u,c=u||(u=o("react")),d=u.useCallback,m=s._(/*BTDS*/"Next items"),p=s._(/*BTDS*/"Previous items"),_=o("Locale").isRTL(),f=44;function g(t){var n=o("react-compiler-runtime").c(17),a,i,l,s,u;n[0]!==t?(l=t.nextButtonLabel,s=t.prevButtonLabel,u=t.reduceArrowSize,i=t.scrollRef,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=u):(a=n[1],i=n[2],l=n[3],s=n[4],u=n[5]);var d=l===void 0?m:l,g=s===void 0?p:s,h=u===void 0?!1:u,y;n[6]!==g||n[7]!==h?(y=function(t,n){return c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:419,children:c.jsx(r("FDSCircleButton.react"),{"aria-label":g,color_DEPRECATED:"secondary",disabled:n,icon:o("SVGIcon").svgIcon(r(_?"ChevronRightFilled24.svg.react":"ChevronLeftFilled24.svg.react")),onPress:t,size:h?40:48,testid:void 0,type_DEPRECATED:"overlay-raised"})})},n[6]=g,n[7]=h,n[8]=y):y=n[8];var C=y,b;n[9]!==d||n[10]!==h?(b=function(t,n){return c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:420,children:c.jsx(r("FDSCircleButton.react"),{"aria-label":d,color_DEPRECATED:"secondary",disabled:n,icon:o("SVGIcon").svgIcon(r(_?"ChevronLeftFilled24.svg.react":"ChevronRightFilled24.svg.react")),onPress:t,size:h?40:48,testid:void 0,type_DEPRECATED:"overlay-raised"})})},n[9]=d,n[10]=h,n[11]=b):b=n[11];var v=b,S;return n[12]!==v||n[13]!==C||n[14]!==a||n[15]!==i?(S=c.jsx(o("BaseHScroll.react").HScrollContainer,babelHelpers.extends({},a,{nextButton:v,peekWidth:f,prevButton:C,scrollRef:i})),n[12]=v,n[13]=C,n[14]=a,n[15]=i,n[16]=S):S=n[16],S}l.Container=g,l.Child=o("BaseHScroll.react").HScrollChild}),226);
__d("range",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){for(var r=n==null||n===0?e<t?1:-1:n,o=-1,a=Math.max(Math.ceil((t-e)/r),0),i=Array(a),l=e;a--;)i[++o]=l,l+=r;return i}i.default=e}),66);