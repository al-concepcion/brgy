;/*FB_PKG_DELIM*/

__d("BusinessComposerIGAudienceTypes",["$InternalEnum"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["IG_AUDIENCE_PUBLIC","IG_AUDIENCE_RESTRICTED"]),s=["SD","CU","IR","SY","KP"];l.BusinessComposerIGAudienceTypes=e,l.UnsupportedIGAudienceCountryList=s}),98);
__d("MediaCancelledPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743938"),s=o("FalcoLoggerInternal").create("media_cancelled_post_flow",e),u=s;l.default=u}),98);
__d("MediaFailedPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743939"),s=o("FalcoLoggerInternal").create("media_failed_post_flow",e),u=s;l.default=u}),98);
__d("MediaFinishedPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743940"),s=o("FalcoLoggerInternal").create("media_finished_post_flow",e),u=s;l.default=u}),98);
__d("MediaStartedPostFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743941"),s=o("FalcoLoggerInternal").create("media_started_post_flow",e),u=s;l.default=u}),98);
__d("VideoUploadLoggerEvents",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({EVENT_STARTED_GENERATE_THUMBNAILS:"upload.client.started_generate_thumbnails",EVENT_FINISHED_GENERATE_THUMBNAILS:"upload.client.finished_generate_thumbnails",EVENT_SELECTED_CUSTOM_THUMBNAIL:"upload.client.selected_custom_thumbnail",EVENT_VIDEO_DIMENSIONS_UNREADABLE:"upload.client.video_dimensions_unreadable",EVENT_REPLACE_VIDEO:"upload.client.replace_video",EVENT_STARTED_FLOW:"upload.client.started_flow",EVENT_FINISHED_FLOW:"upload.client.finished_flow",EVENT_FAILED_FLOW:"upload.client.failed_flow",EVENT_CANCELED_FLOW:"upload.client.canceled_flow",EVENT_RESIGNED_FLOW:"upload.client.resigned_flow",EVENT_REQUESTED_UPLOADING:"upload.client.requested_uploading",EVENT_INVALIDATED_UPLOADING:"upload.client.invalidated_uploading",EVENT_STARTED_UPLOADING:"upload.client.started_uploading",EVENT_PROGRESS_UPLOADING_START_REQUEST:"upload.client.progress_uploading_start_request",EVENT_FINISHED_UPLOADING:"upload.client.finished_uploading",EVENT_CANCELED_UPLOADING:"upload.client.canceled_uploading",EVENT_ABANDONED_UPLOADING:"upload.client.abandoned_uploading",EVENT_FAILED_UPLOADING:"upload.client.failed_uploading",EVENT_STARTED_SENDING_BYTES:"upload.client.started_sending_bytes",EVENT_FINISHED_SENDING_BYTES:"upload.client.finished_sending_bytes",EVENT_CANCELED_SENDING_BYTES:"upload.client.canceled_sending_bytes",EVENT_FAILED_SENDING_BYTES:"upload.client.failed_sending_bytes",EVENT_STARTED_START_REQUEST:"upload.client.started_sending_start_request",EVENT_FINISHED_START_REQUEST:"upload.client.finished_sending_start_request",EVENT_FAILED_START_REQUEST:"upload.client.failed_sending_start_request",EVENT_CANCELED_START_REQUEST:"upload.client.canceled_sending_start_request",EVENT_STARTED_RECEIVE_REQUEST:"upload.client.started_sending_receive_request",EVENT_FINISHED_RECEIVE_REQUEST:"upload.client.finished_sending_receive_request",EVENT_FAILED_RECEIVE_REQUEST:"upload.client.failed_sending_receive_request",EVENT_STARTED_POST_REQUEST:"upload.client.started_sending_post_request",EVENT_FINISHED_POST_REQUEST:"upload.client.finished_sending_post_request",EVENT_FAILED_POST_REQUEST:"upload.client.failed_sending_post_request",EVENT_HANDLING_SERVER_FAILURE_RESPONSE:"upload.client.handling_server_failure_response",EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE:"upload.client.handling_transport_failure_response",EVENT_DUPLICATE_POST_REQUEST:"upload.client.duplicate_post_request",EVENT_STARTED_SENDING_CHUNK_BYTES:"upload.client.started_sending_chunk_bytes",EVENT_FINISHED_SENDING_CHUNK_BYTES:"upload.client.finished_sending_chunk_bytes",EVENT_CANCELED_SENDING_CHUNK_BYTES:"upload.client.canceled_sending_chunk_bytes",EVENT_FAILED_SENDING_CHUNK_BYTES:"upload.client.failed_sending_chunk_bytes",EVENT_TIMEOUT_SENDING_CHUNK_BYTES:"upload.client.timeout_sending_chunk_bytes",EVENT_STARTED_FETCHING_STATUS:"upload.client.started_fetching_status",EVENT_FINISHED_FETCHING_STATUS:"upload.client.finished_fetching_status",EVENT_STARTED_POST_FLOW:"upload.client.started_post_flow",EVENT_FINISHED_POST_FLOW:"upload.client.finished_post_flow",EVENT_CANCELED_POST_FLOW:"upload.client.canceled_post_flow",EVENT_FAILED_POST_FLOW:"upload.client.failed_post_flow",EVENT_RETRY_ATTEMPT:"upload.client.retry_attempt",EVENT_RESUMABLE_CALLED:"upload.client.resumable_called",EVENT_RESUMABLE_STARTED:"upload.client.resumable_started",EVENT_RESUMABLE_SUCCESS:"upload.client.resumable_success",EVENT_RESUMABLE_FAILED:"upload.client.resumable_failed",EVENT_ENCODING_START_OBSERVED:"encode.client.encoding_start_observed",EVENT_ENCODING_SUCCESS_OBSERVED:"encode.client.encoding_success_observed",EVENT_ENCODING_FAIL_OBSERVED:"encode.client.encoding_fail_observed",EVENT_ENCODING_ABORT_OBSERVED:"encode.client.encoding_abort_observed",EVENT_FETCH_FAIL_OBSERVED:"encode.client.fetch_video_info_fail_observed",EVENT_ENCODING_SUBSCRIBE_TO_VIDEO_STATUS:"encode.client.subscribe_to_video_status",EVENT_ENCODING_POLLING_FALLBACK:"encode.client.polling_fallback",EVENT_RECEIVED_RESPONSE:"upload.client.received_response",EVENT_STARTED_FLOW_EXP1:"upload.client.started_flow_exp1",EVENT_FINISHED_FLOW_EXP1:"upload.client.finished_flow_exp1",EVENT_CANCELED_FLOW_EXP1:"upload.client.canceled_flow_exp1",EVENT_MEASURE_FREE_LOCAL_STORAGE:"upload.client.free_local_storage"});i.VideoUploadLoggerEvents=e}),66);
__d("VideoUploadLoggingConfig.experimental",["cr:8923"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8923")}),98);
__d("MediaUploadCommonWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1839305"),s=o("FalcoLoggerInternal").create("media_upload_common_www",e),u=s;l.default=u}),98);
__d("VideoComposerDialogVersion",[],(function(t,n,r,o,a,i){var e=Object.freeze({V1:"V1",V2:"V2"});i.default=e}),66);
__d("VideoUploadSourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADS_INTERFACES:"ads_interfaces",DIALOG:"dialog",COMPOSER:"composer",BIZ_COMPOSER:"biz_composer",VIDEO_COMPOSER_V2:"video_composer_v2",ADS_API:"ads_api",API:"api",APP_PROMO_VIDEO:"app_promo_video",APP_GAMEPLAY_VIDEO:"app_gameplay_video",APP_PROMO_VIDEO_AB_TEST:"app_promo_video_ab_test",APP_GAMEPLAY_VIDEO_AB_TEST:"app_gameplay_video_ab_test",APP_PROMO_VIDEO_LANDSCAPE:"app_promo_video_landscape",APP_PROMO_VIDEO_PORTRAIT:"app_promo_video_portrait",APP_PROMO_VIDEO_SQUARE:"app_promo_video_square",APP_GAMEPLAY_VIDEO_LANDSCAPE:"app_gameplay_video_landscape",APP_GAMEPLAY_VIDEO_PORTRAIT:"app_gameplay_video_portrait",APP_GAMEPLAY_VIDEO_SQUARE:"app_gameplay_video_square",ASPERA:"aspera",PIXELCLOUD:"pixelcloud",PROTON:"proton",PLATFORM:"platform",INSTANT_ARTICLE:"instant_article",INSTANT_APPLICATION_PREVIEW:"instant_application_preview",IS_REWARDS_ENABLED:"is_rewards_enabled",POWER_EDITOR:"power_editor",CAMPAIGN_MANAGER:"campaign_manager",CREATE_FLOW:"create_flow",VIDEO_BROADCAST:"video_broadcast",SVE_PIPELINE:"sve_pipeline",ALBUM_UPLOADER:"album_uploader",PROFILE_VIDEO:"profile_video",LEARN_VIDEO:"learn_video",BIRTHDAY_VIDEO:"birthday_video",NUX_MEDIA_TOOL:"nux_media_tool",LIVE_BROADCAST:"live_broadcast",CANVAS:"canvas",DYNAMIC_ITEM_DISPLAY_BUNDLE:"dynamic_item_display_bundle",GOODWILL_VIDEO:"goodwill_video",APP_REVIEW:"app_review",APP_REREVIEW:"app_rereview",APP_REREVIEW_SCREENCAST:"app_rereview_screencast",REFERENCE_FILE_COMPOSER:"reference_file_composer",PRODUCT_EDIT_TOOL:"product_edit_tool",SLIDESHOW:"slideshow",ISSUE_MODULE:"issue_module",TAROT_DIGEST:"tarot_digest",LEARN:"learn",PAGES_COVER_VIDEO:"pages_cover_video",EVENT_TOUR:"event_tour",EVENT_COVER_VIDEO:"event_cover_video",PAGE_TRAILER:"page_trailer",SHOW_VIDEO_LIBRARY:"show_video_library",GMS_HUB_ANNOUCEMENTS:"gms_hub_annoucements",LIVE_CREATIVE_KIT_VIDEO:"live_creative_kit_video",MESSENGER_GROUP_VIDEO:"messenger_group_video",P2P:"p2p",DYNAMIC_ITEM:"dynamic_item",AUDIO_STORY_VIDEO:"audio_story_video",IMAGE_OVERLAY_STORY_VIDEO:"image_overlay_story_video",REACTION_STORY:"inspiration_react_mode",SHOWREEL_VIDEO:"showreel_video",INSPIRATIONS:"inspirations",INSPIRATIONS_DIRECT:"inspirations-direct",BACKSTAGE:"backstage",FUNDRAISER_COVER_VIDEO:"fundraiser_cover_video",THIRD_PARTY_VIDEO:"third_party_video",NEWSFEED_COMPOSER:"newsfeed_composer",COMPPHOTO_GENERATED:"compphoto_generated",SIMPLE:"simple",ATTACH_PHOTOS:"attach_photos",COMMENT:"comment",REPLACE:"replace",PAGE_REVIEW:"page_review",WOODHENGE:"woodhenge",UC_DEMONETIZATION_APPEALS:"uc_demonetization_appeals",CREATOR_STOREFRONT_PERSONALIZED_VIDEO:"creator_storefront_personalized_video",CREATOR_STOREFRONT_PROMOTIONAL_VIDEO:"creator_storefront_promotional_video",PROFILE_FEATURED:"profile_featured",INSTANT_GAMES_DVR:"instant_games_dvr",BCMP_PROFILE_PITCHDECK:"branded_content_profile_pitchdeck",MEDIA_MANAGER_INSTAGRAM_VIDEO_COMPOSER:"media_manager_instagram_video_composer",MEDIA_MANAGER_INSTAGRAM_VIDEO:"media_manager_instagram_video",OCULUS_CREATOR_PORTAL:"oculus_creator_portal",VR_CREATOR_STUDIO:"vr_creator_studio",INSTAGRAM_XPOST:"instagram_xpost",WHATSAPP_XPOST:"whatsapp_xpost",HORIZON_XPOST:"horizon_xpost",PH_XPOST:"ph_xpost",DIM_SUM:"dim_sum",VML_VIDEO_SUPERRES:"vml_video_superres_service",MEDIA_MANAGER_BULK_VIDEO_IMPORTER:"media_manager_bulk_video_importer",MARKETPLACE_COMPOSER:"marketplace_composer",MARKETPLACE_COMPOSER_PRE_RECORDED_VIDEO:"marketplace_composer_pre_recorded_video",SOUND_PLATFORM:"sound_platform",OPTIMISTIC_POST:"optimistic_post",WORKPLACE_KNOWLEDGE_LIBRARY:"workplace_knowledge_library",COPYRIGHT_INGESTION:"copyright_ingestion",CMS_MEDIA_MANAGER:"cms_media_manager",PREMIUM_MUSIC_VIDEO:"premium_music_video",BOOSTED_COMPONENT:"boosted_component",VISUAL_EDITOR:"visual_editor",GIF_LINK:"gif_link",SRT_ATTACHMENT:"srt_attachment",SOUNDBITES_VIDEO:"soundbites_video",VOICES_CREATOR_STUDIO:"voices_creator_studio",VOICES_AUDIO_EMBED:"voices_audio_embed",VOICES_ARTICLE:"voices_article",TPG:"tpg",BUSINESS_CREATIVE_ASSET_MANAGER:"business_creative_asset_manager",STAGES:"stages",RMSI_VIDEO_INGESTION:"rights_manager_scaled_video_ingestion",ASSET_MANAGER:"asset_manager",PAID_CONTENT_DIALOG:"paid_content_dialog",CREATION_ML_PRECREATION:"creation_ml_precreation",PODCAST:"podcast",BUSINESS_OMNI_UPLOADER:"business_omni_uploader",BUSINESS_UNIFIED_CREATIVE_EDITOR:"business_unified_creative_editor",REEL_COMPOSER:"reel_composer",CONTENT_INJECTION:"content_injection",DROPS_SHOPPING_EVENT_PAGE:"drops_shopping_event_page",HORIZON_VIDEO:"horizon_video",PAPER_COMPOSER:"paper_composer",SHOP_BUILDER_VIDEO:"shop_builder_video",PROFESSIONAL_DASHBOARD_AB_TESTING:"professional_dashboard_ab_testing",PROFESSIONAL_DASHBOARD_BULK_UPLOAD:"professional_dashboard_bulk_upload",LIVE_CLIP_VIDEO:"live_clip_video",STARFOX_PLAYGROUND:"starfox_playground",CREATOR_FAN_CHALLENGE:"creator_fan_challenge",COMPOSER_ADS_CANVAS_VIDEO_ASSET_CLONER_FEATURE:"composer_ads_canvas_video_asset_cloner_feature",COMPOSER_ADS_VIDEO_AUTO_CROPPER_FEATURE:"composer_ads_video_auto_cropper_feature",COMPOSER_ADS_VIDEO_CLONE_FEATURE:"composer_ads_video_clone_feature",COMPOSER_ADS_VIDEO_CREATIVE_COMPOSER_FEATURE:"composer_ads_video_creative_composer_feature",COMPOSER_ADS_VIDEO_SLIDESHOW_FEATURE:"composer_ads_video_slideshow_feature",COMPOSER_ADS_VIDEO_SLIDESHOW_VARIATIONS_FEATURE:"composer_ads_video_slideshow_variations_feature",COMPOSER_AUTO_CLIPS_TO_REELS:"composer_auto_clips_to_reels",COMPOSER_AUTOGEN_BACK_CATALOG:"composer_autogen_back_catalog",COMPOSER_BASE_VIDEO_EDIT_FEATURE:"composer_base_video_edit_feature",COMPOSER_BIZWEB_AB_TESTING:"composer_bizweb_ab_testing",COMPOSER_BIZWEB_COMPOSER:"composer_bizweb_composer",COMPOSER_BULK_EDIT_COMPOSER:"composer_bulk_edit_composer",COMPOSER_COMET_REEL_COMPOSER:"composer_comet_reel_composer",COMPOSER_CROSS_POST_FROM_VIDEO_ASSET_OBSERVER_FEATURE:"composer_cross_post_from_video_assset_observer_feature",COMPOSER_CS_AB_TESTING:"composer_cs_ab_testing",COMPOSER_CS_AUTO_GENERATE_FB_SHORTS:"composer_cs_auto_generate_fb_shorts",COMPOSER_CS_BULK_UPLOAD:"composer_cs_bulk_upload",COMPOSER_CS_REEL_COMPOSER:"composer_cs_reel_composer",COMPOSER_GRAPH_API_CLIPPING:"composer_graph_api_clipping",COMPOSER_GRAPH_API_CROSSPOST:"composer_graph_api_crosspost",COMPOSER_GRAPH_API_NON_RESUMABLE:"composer_graph_api_non_resumable",COMPOSER_GRAPH_API_RESUMABLE:"composer_graph_api_resumable",COMPOSER_HORIZON_VIDEO_POST_TO_FB:"composer_horizon_video_post_to_fb",COMPOSER_HZ_STORY_XPOST_TO_FB:"composer_hz_story_xpost_to_fb",COMPOSER_IG_GLADOS_VIDEO_ADS_SHOWREEL:"composer_ig_glados_video_ads_showreel",COMPOSER_IG_REELS_SHARED_TO_FB:"composer_ig_reels_shared_to_fb",COMPOSER_IG_STORY_XPOST_TO_FB:"composer_ig_story_xpost_to_fb",COMPOSER_LIVE_VIDEO_BROADCAST:"composer_live_video_broadcast",COMPOSER_LONG_FORM_VIDEO_TO_PLAYLIST:"composer_long_form_video_to_playlist",COMPOSER_PAGE_SLIDESHOW_FEATURE:"composer_page_slideshow_feature",COMPOSER_PAGE_VIDEO_COMPOSER:"composer_page_video_composer",COMPOSER_PH_STORY_XPOST_TO_FB:"composer_ph_story_xpost_to_fb",COMPOSER_PLAYLIST_COMPOSER:"composer_playlist_composer",COMPOSER_PROFILE_VIDEO_INTRO_CLONER:"composer_profile_video_intro_cloner",COMPOSER_REMOTE_TRIMMER:"composer_remote_trimmer",COMPOSER_STORY_VIDEO_RENDER_FEATURE:"composer_story_video_render_feature",COMPOSER_SVE_SHADOW_CLONE_FEATURE:"composer_sve_shadow_clone_feature",COMPOSER_TEXT_BASED_VIDEO_EDITOR:"composer_text_based_video_editor",COMPOSER_UNIFIED_API_FOR_POST_CREATION_FEATURE:"composer_unified_stories_api_for_post_creation_feature",COMPOSER_UNIFIED_STORIES_VIDEO_CONVERTER:"composer_unified_stories_video_converter",COMPOSER_VIDEO_CLONE_FEATURE:"composer_video_clone_feature",COMPOSER_WA_STORY_XPOST_TO_FB:"composer_wa_story_xpost_to_fb",EXPERIMENT_HQ:"experiment_hq",GROUPS_AI:"groups_ai"});i.default=e}),66);
__d("WorkSharedDraftMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({DRAFTER_CREATING:"drafter_creating",FINAL_AUTHOR_EDITING:"final_author_editing"});i.default=e}),66);
__d("logVideoUploadViaFalco",["FBLogger","MediaUploadCommonWwwFalcoEvent","VideoComposerDialogVersion","VideoUploadSourceType","WorkSharedDraftMode","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("FBLogger")("media_upload","media_upload_common_www")}function s(e){if(e!=null)return String(e)}function u(e){if(e!=null)return e==="false"||e==="0"?!1:!!e}function c(t){try{if(t==null)return;var n;return typeof t=="number"?n=Number.isInteger(t)?t:Math.trunc(t):n=Number.parseInt(String(t),10),Number.isNaN(n)||!Number.isFinite(n)?void 0:String(n)}catch(n){e().catching(r("getErrorSafe")(n)).warn("Value should be integer, but it was not - %s",String(t));return}}function d(e){if(e!=null){var t=Number(e);return Number.isNaN(t)||!Number.isFinite(t)?void 0:t}}function m(e){if(!(e==null||typeof e!="object"))return e}function p(e,t){if(e!=null&&Object.values(t).indexOf(e)>=0)return e}function _(t){var n=s(t.waterfall_id);if(n==null){e().warn("Video upload event cannot be logged due missing waterfall_id: %s",String(t.waterfall_id));return}var o=p(t.source,r("VideoUploadSourceType"));if(o==null){e().warn("Video upload event cannot be logged due missing or invalid source type: %s (original: %s)",String(o),String(t.source));return}var a=s(t.event);if(a==null){e().warn("Video upload event cannot be logged due missing event field: %s",String(t.event));return}var i={waterfall_id:n,source:o,event:a,actor_id:s(t.actor_id),target_id:s(t.target_id),composer_entry_point_ref:s(t.composer_entry_point_ref),container_type:c(t.container_type),is_chunked_upload:u(t.is_chunked_upload),hinted_app_id:s(t.app_id),is_remote_upload:u(t.is_remote_upload),composer_dialog_version:p(t.composer_dialog_version,r("VideoComposerDialogVersion")),composer_work_shared_draft_mode:p(t.composer_work_shared_draft_mode,r("WorkSharedDraftMode")),elapsed_time:c(t.elapsed_time),error:s(t.error),error_inner:s(t.error_inner),error_code:c(t.error_code),error_description:s(t.error_description),error_summary:s(t.error_summary),error_trace:s(t.error_trace),source_height:c(t.source_height),source_width:c(t.source_width),duration:c(t.duration),file_size:c(t.file_size),has_file_been_replaced:u(t.has_file_been_replaced),composer_session_id:s(t.composer_session_id),retries:c(t.retries),server_retries:c(t.server_retries),asset_id:s(t.asset_id),file_can_read:u(t.file_can_read),application_state:s(t.application_state),upload_method:s(t.upload_method),upload_domain:s(t.upload_domain),hash:s(t.hash),hash_time:c(t.hash_time),hash_exception:s(t.hash_exception),video_id:s(t.video_id),upload_speed:d(t.upload_speed),skip_upload:u(t.skip_upload),trigger_time:s(t.trigger_time),ad_account_id:s(t.ad_account_id),video_original_file_path:s(t.video_original_file_path),event_reason:s(t.event_reason),retry_id:s(t.retry_id),internet_status:s(t.internet_status),network_status:s(t.network_status),is_spherical:u(t.is_spherical),file_extension:s(t.file_extension),sent_bytes:c(t.sent_bytes),start_offset:c(t.start_offset),transport_retries:c(t.transport_retries),timeout_retries:c(t.timeout_retries),request_manager_state:s(t.request_manager_state),debug:m(t.debug),creative_tools:s(t.creative_tools)};r("MediaUploadCommonWwwFalcoEvent").logCritical(function(){return i})}l.default=_}),98);
__d("VideoUploadLogger",["Banzai","CurrentUser","VideoUploadLoggerEvents","VideoUploadLoggingConfig.experimental","logVideoUploadViaFalco"],(function(t,n,r,o,a,i,l){var e,s=babelHelpers.extends({BANZAI_GK:"videos",BANZAI_ROUTE:"video_waterfall",SOURCE_SIMPLE:"simple",SOURCE_COMPOSER:"composer"},(e=o("VideoUploadLoggerEvents")).VideoUploadLoggerEvents),u=new Set([e.VideoUploadLoggerEvents.EVENT_STARTED_FLOW,e.VideoUploadLoggerEvents.EVENT_FINISHED_FLOW,e.VideoUploadLoggerEvents.EVENT_FAILED_FLOW,e.VideoUploadLoggerEvents.EVENT_CANCELED_FLOW]),c=(function(){function e(t){this.$1=t.source,this.$2=t.composer_dialog_version,this.$3=t.waterfall_id,this.$4=t.ad_account_id,this.$5=t.target_id,this.$6=t.delay,this.$7=[],this.$8=t.is_chunked_upload,this.$9=t.actor_id,this.$10=t.composer_entry_point_ref,this.$11=t.composer_work_shared_draft_mode,this.$12=t.is_remote_upload,this.$13=t.container_type,this.$14=t.has_file_been_replaced,this.$15=t.composer_session_id,this.$16=t.creative_tools,this.$17=t.asset_id,this.$18=r("CurrentUser").getAppID(),this.$19=!t.reported_by_notifier&&e.shouldSendFlowEventsViaNotifier({source_type:t.source,composer_entry_point_ref:t.composer_entry_point_ref})}e.shouldSendFlowEventsViaNotifier=function(t){return!!(r("VideoUploadLoggingConfig.experimental").FLOW_VIA_NOTIFIER_COMPOSERS||[]).find(function(e){return e.source_type===t.source_type&&e.composer_entry_point_ref===t.composer_entry_point_ref})};var t=e.prototype;return t.logEvent=function(t,n){if(!(this.$19&&u.has(t))){var e=babelHelpers.extends({},n);e.elapsed_time==null&&(t.indexOf("started")!==-1?this.$7[t]=Date.now():t.indexOf("finished")!==-1?e.elapsed_time=this.$20(t,"finished"):t.indexOf("canceled")!==-1?e.elapsed_time=this.$20(t,"canceled"):t.indexOf("failed")!==-1&&(e.elapsed_time=this.$20(t,"failed"))),e.event=t,e.source=this.$1,e.composer_dialog_version=e.composer_dialog_version||this.$2,e.waterfall_id=this.$3,e.ad_account_id=this.$4,e.target_id=this.$5,e.is_chunked_upload=this.$8,e.actor_id=this.$9,e.composer_entry_point_ref=this.$10,e.composer_work_shared_draft_mode=this.$11,e.is_remote_upload=this.$12,e.container_type=this.$13,e.has_file_been_replaced=this.$14,e.trigger_time=Date.now(),e.composer_session_id=this.$15,e.asset_id=this.$17,e.app_id=this.$18,r("logVideoUploadViaFalco")(e)}},t.postOnShutdown=function(t){return r("Banzai").subscribe(r("Banzai").SHUTDOWN,t)},t.getWaterfallID=function(){return this.$3},t.$20=function(t,n){var e=t.replace(n,"started"),r=this.$7[e];return r?Date.now()-r:null},e})();Object.assign(c,s);var d=c;l.default=d}),98);
__d("VideoUploadLoggerTyped",["VideoUploadLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,t)||this}return babelHelpers.inheritsLoose(t,e),t})(r("VideoUploadLogger"));l.VideoUploadLogger=e}),98);
__d("VideoUploadFlowNotifier",["Banzai","MediaCancelledPostFlowFalcoEvent","MediaFailedPostFlowFalcoEvent","MediaFinishedPostFlowFalcoEvent","MediaStartedPostFlowFalcoEvent","Run","SubscriptionsHandler","VideoUploadLoggerEvents","VideoUploadLoggerTyped","WaterfallIDGenerator"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({SUCCESSFUL:"successful",FAILED:"failed",CANCELED:"canceled",REQUESTED:"requested",STARTED:"started"}),s=(function(){function t(){this.$1={}}var n=t.prototype;return n.registerUpload=function(t,n){var e={isStarted:!1,isUploaded:!1,isCanceled:!1,isFailed:!1};this.$1[String(n)]=e,t.subscribe("upload-started",function(){e.isStarted=!0}),t.subscribe("upload-canceled",function(){e.isCanceled=!0}),t.subscribe("upload-failed",function(){e.isFailed=!0}),t.subscribe("upload-finished",function(){e.isUploaded=!0})},n.cancelUpload=function(t){var e=this.$1[String(t)];e!=null&&(e.isCanceled=!0)},n.$2=function(n){return n.isCanceled?e.CANCELED:n.isUploaded?e.SUCCESSFUL:n.isFailed?e.FAILED:n.isStarted?e.STARTED:e.REQUESTED},n.areAnyVideosIncludedInPost=function(){var t=this,n=Object.keys(this.$1).map(function(e){return t.$2(t.$1[e])});return n.some(function(t){return t!==e.CANCELED})},n.getSummary=function(){var t=this,n=Object.keys(this.$1).map(function(e){return t.$2(t.$1[e])});return{total:n.length,successful:n.filter(function(t){return t===e.SUCCESSFUL}).length,started:n.filter(function(t){return t===e.STARTED}).length,canceled:n.filter(function(t){return t===e.CANCELED}).length,failed:n.filter(function(t){return t===e.FAILED}).length}},t})(),u=(function(){function e(){}var t=e.prototype;return t.logFlowStarted=function(){},t.logFlowFinished=function(){},t.logFlowCanceled=function(){},t.logFlowFailed=function(){},t.release=function(){},e})(),c=(function(){function e(e,t){var n=this;this.$2=t,this.$1=e,this.$4=new Set,this.$3=new(r("SubscriptionsHandler")),e.cancel_on_unload&&this.$3.addSubscriptions(r("Banzai").subscribe(r("Banzai").SHUTDOWN,function(){return n.$6("shutdown")})),e.cancel_on_leave&&this.$3.addSubscriptions(o("Run").onLeave(function(){return n.$6("leave")}))}var t=e.prototype;return t.release=function(){this.$3.release()},t.$7=function(){var e=this.$2.getSummary(),t=this.$5;return{composer_session_id:this.$1.composer_session_id,source_type:this.$1.source,target_id:this.$1.target_id,target_type:this.$1.target_type,composer_entry_point_ref:this.$1.composer_entry_point_ref,total_uploads:e.total,started_uploads:e.started,successful_uploads:e.successful,canceled_uploads:e.canceled,failed_uploads:e.failed,elapsed_time:t!=null?Date.now()-t:null}},t.logFlowFinished=function(){var e=this;this.$4.has(r("MediaFinishedPostFlowFalcoEvent"))||(r("MediaFinishedPostFlowFalcoEvent").log(function(){return e.$7()}),this.$4.add(r("MediaFinishedPostFlowFalcoEvent")))},t.logFlowStarted=function(){var e=this;this.$4.has(r("MediaStartedPostFlowFalcoEvent"))||(r("MediaStartedPostFlowFalcoEvent").log(function(){return e.$7()}),this.$5=Date.now(),this.$4.add(r("MediaStartedPostFlowFalcoEvent")))},t.logFlowCanceled=function(){this.$6("user")},t.logFlowFailed=function(){var e=this;this.$4.has(r("MediaFailedPostFlowFalcoEvent"))||(r("MediaFailedPostFlowFalcoEvent").log(function(){return e.$7()}),this.$4.add(r("MediaFailedPostFlowFalcoEvent")))},t.$6=function(t){var e=this;this.$4.has(r("MediaCancelledPostFlowFalcoEvent"))||(r("MediaCancelledPostFlowFalcoEvent").log(function(){return babelHelpers.extends({},e.$7(),{event_reason:t})}),this.$4.add(r("MediaCancelledPostFlowFalcoEvent")))},e})(),d=(function(){function e(e,t){var n=this;this.$1=t,this.$3=new Set,this.$4=new(o("VideoUploadLoggerTyped")).VideoUploadLogger({source:e.source,waterfall_id:e.composer_session_id,composer_session_id:e.composer_session_id,target_id:e.target_id,composer_entry_point_ref:e.composer_entry_point_ref,reported_by_notifier:!0}),this.$2=new(r("SubscriptionsHandler")),this.$2.addSubscriptions(this.$4.postOnShutdown(function(){return n.$5("shutdown")})),e.cancel_on_leave&&this.$2.addSubscriptions(o("Run").onLeave(function(){return n.$5("leave")}))}var t=e.prototype;return t.release=function(){this.$2.release()},t.logFlowFinished=function(){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_FINISHED_FLOW)},t.logFlowStarted=function(){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_STARTED_FLOW)},t.logFlowCanceled=function(){this.$5("user")},t.logFlowFailed=function(){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_FAILED_FLOW)},t.$6=function(t,n){if(!this.$3.has(t)){var e=this.$1.getSummary();this.$4.logEvent(t,babelHelpers.extends({},n,{debug:{total_uploads:e.total,started_uploads:e.started,successful_uploads:e.successful,canceled_uploads:e.canceled,failed_uploads:e.failed}})),this.$3.add(t)}},t.$5=function(t){this.$6(o("VideoUploadLoggerEvents").VideoUploadLoggerEvents.EVENT_CANCELED_FLOW,{event_reason:t})},e})(),m=Object.freeze({UPLOAD_USER_REMOVED:"upload_removed"}),p=Object.freeze({POST_USER_CANCELED:"post_user_canceled",POST_USER_REQUESTED:"post_user_requested",POST_FAILED:"post_failed",POST_SUCCESSFUL:"post_successful"});function _(e){return e==null?o("WaterfallIDGenerator").generate():e}function f(e){return e.extended_flow_logging_enabled?new h(e):g.getInstance()}var g=(function(){function e(){}e.getInstance=function(){return e.$1};var t=e.prototype;return t.registerVideoUpload=function(t,n){return _(n)},t.notifyOnUploadAction=function(t){},t.notifyOnPostAction=function(t){},e})();g.$1=new g;var h=(function(){function e(e){this.$3=e,this.$5=new s,this.$2=new u,this.$1=!1,this.$4=e.composer_session_id==null?o("WaterfallIDGenerator").generate():e.composer_session_id}var t=e.prototype;return t.$6=function(){var e=o("VideoUploadLoggerTyped").VideoUploadLogger.shouldSendFlowEventsViaNotifier({source_type:this.$3.source,composer_entry_point_ref:this.$3.composer_entry_point_ref}),t=e?d:c;return new t({composer_entry_point_ref:this.$3.composer_entry_point_ref,source:this.$3.source,target_id:this.$3.target_id,target_type:this.$3.target_type,composer_session_id:this.$4,cancel_on_leave:this.$3.cancel_on_leave,cancel_on_unload:this.$3.cancel_on_unload==null?!0:this.$3.cancel_on_unload},this.$5)},t.registerVideoUpload=function(t,n){var e=_(n);return t.setComposerSessionID(this.$4),this.$5.registerUpload(t,e),e},t.notifyOnUploadAction=function(t){switch(t.action){case m.UPLOAD_USER_REMOVED:this.$5.cancelUpload(t.trackingID);break}},t.notifyOnPostAction=function(t){switch(t.action){case p.POST_USER_REQUESTED:!this.$1&&this.$5.areAnyVideosIncludedInPost()&&(this.$2=this.$6(),this.$1=!0),this.$2.logFlowStarted();break;case p.POST_FAILED:this.$2.logFlowFailed(),this.$2.release();break;case p.POST_SUCCESSFUL:this.$2.logFlowFinished(),this.$2.release(),this.$2=new u;break;case p.POST_USER_CANCELED:this.$2.logFlowCanceled(),this.$2.release();break}},e})();l.VideoUploadActions=m,l.VideoPostActions=p,l.createVideoUploadFlowNotifier=f,l.NoOpVideoUploadFlowNotifier=g}),98);
__d("VideoUploadSurface",["$InternalEnum","VideoUploadFlowNotifier","WaterfallIDGenerator"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({JEST_TESTS:"jest_tests",COMMENTS:"comments",FEED:"feed"}),s=(function(){function e(e){this.$1={},this.$2=e}var t=e.prototype;return t.getByID=function(t){return this.$1[t]},t.getExistingOrNoOpByID=function(t){var e=this.getByID(t);return e==null?this.$2.noOpProvider():e},t.register=function(t,n){var e=n==null?o("WaterfallIDGenerator").generate():n;return this.$1[e]=t,e},t.clear=function(t){this.$1[t]=void 0},e})(),u=(function(){function e(){this.$2=new s({noOpProvider:function(){return o("VideoUploadFlowNotifier").NoOpVideoUploadFlowNotifier.getInstance()}})}e.getOrCreate=function(n){var t=e.$1[n];return t==null&&(t=new e,e.$1[n]=t),t};var t=e.prototype;return t.notifiers=function(){return this.$2},e})();u.$1={},l.VideoUploadSurfaceIDs=e,l.VideoUploadSurface=u}),98);
__d("MediaUploadAssetEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ASSET_ADDED","ASSET_STARTED","ASSET_REMOVED","ASSET_FAILED","ASSET_SUCCEED","ASSET_PROGRESS","ASSET_STALL"]),l=e;i.default=l}),66);
__d("MediaUploadClientEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["CLIENT_CREATED","CLIENT_CONFIG_REQUESTED","CLIENT_CONFIG_RECEIVED","CLIENT_CONFIG_FAILED","CLIENT_CONFIG_CACHED","CLIENT_INTERNET_ONLINE","CLIENT_INTERNET_OFFLINE","CLIENT_INTERNET_UNKNOWN"]),l=e;i.default=l}),66);
__d("MediaUploadEntryPointID",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){this.key=t};i.default=e}),66);
__d("MediaUploadFBEntryPointID",["MediaUploadEntryPointID"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,t+"\\"+n)||this,r.sourceType=t,r.entryPointRef=n,r}return babelHelpers.inheritsLoose(t,e),t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided entry point ID has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadEntryPointID"));l.default=e}),98);
__d("MediaUploadAsset",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.mediaType=e.mediaType,this.data=e.data}var t=e.prototype;return t.dataAsFile=function(){var e=this.data;return e.mode==="File"?e:null},t.dataAsHTMLInput=function(){var e=this.data;return e.mode==="HTMLInput"?e:null},e})();i.default=e}),66);
__d("MediaUploadMediaType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["VIDEO"]),l=e;i.default=l}),66);
__d("MediaUploadTime",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=e*60,s=l*60;function u(e){return e}function c(t){return t*e}function d(e){return e*l}function m(e){return e*s}function p(e){return e}function _(t){return 1*t/e}function f(e){return 1*e/l}function g(e){return 1*e/s}function h(e,t){return e==null?null:t(e)}function y(e){return h(e,p)}function C(e){return h(e,_)}function b(e){return h(e,f)}function v(e){return h(e,g)}function S(e,t){return e+t}function R(e,t){return e-t}function L(e,t){return e<t?-1:e>t?1:0}i.millisecondsToTime=u,i.secondsToTime=c,i.minutesToTime=d,i.hoursToTime=m,i.timeToMilliseconds=p,i.timeToSeconds=_,i.timeToMinutes=f,i.timeToHours=g,i.maybeTimeToMilliseconds=y,i.maybeTimeToSeconds=C,i.maybeTimeToMinutes=b,i.maybeTimeToHours=v,i.addTime=S,i.subtractTime=R,i.compareTime=L}),66);
__d("MediaUploadAssetFactory",["MediaUploadAsset","MediaUploadMediaType","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;var t=/\.([^.]+)$/.exec(e);return t==null||t.length<2?null:t[1]}var s=(function(){function t(e){var t=e.features;this.$1=t}var n=t.prototype;return n.$2=function(n){return{mode:"File",file:n,lastModified:o("MediaUploadTime").millisecondsToTime(n.lastModified),name:n.name,size:n.size,mimeType:n.type,extension:e(n.name)}},n.$3=function(n){return{mode:"HTMLInput",inputElement:n,name:n.value,extension:e(n.value)}},n.createFromFile=function(t,n){return n===void 0&&(n=r("MediaUploadMediaType").VIDEO),new(r("MediaUploadAsset"))({mediaType:n,data:this.$2(t)})},n.createFromHTMLInput=function(t,n){var e;n===void 0&&(n=r("MediaUploadMediaType").VIDEO);var o;if(this.$1.supportFileFromHTML&&((e=t.files)==null?void 0:e.length)>0){var a=t.files[0];o=this.$2(a)}else o=this.$3(t);return new(r("MediaUploadAsset"))({mediaType:n,data:o})},t})();l.default=s}),98);
__d("MediaUploadSDK",["MediaUploadAssetFactory"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){var e=this;this.isSupported=function(){return e.features.supportFileManipulation&&e.features.supportFileFromHTML},this.currentTimeProvider=t.currentTimeProvider,this.randomNumberProvider=t.randomNumberProvider,this.randomStringProvider=t.randomStringProvider,this.retryPolicyProvider=t.retryPolicyProvider,this.promiseTerminator=t.promiseTerminator,this.delayedExecutor=t.delayedExecutor,this.reportRecoverableError=t.reportRecoverableError,this.createThrowableError=t.createThrowableError,this.features=t.featureDetector(),this.registerUnloadHook=t.registerUnloadHook,this.factories={assets:new(r("MediaUploadAssetFactory"))(this)}};l.default=e}),98);
__d("mediaUploadFBRetryPolicyProvider",["MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e,s={backoff:{initial:(e=o("MediaUploadTime")).millisecondsToTime(400),jitter:e.millisecondsToTime(100),expBase:e.millisecondsToTime(100),expMultiplier:1.5,max:e.secondsToTime(8)},limits:{totalRetryCount:3e3,totalTime:e.hoursToTime(6)}};function u(){return s}l.default=u}),98);
__d("MediaUploadFBSDK",["Banzai","FBLogger","MediaUploadSDK","MediaUploadTime","Random","SubscriptionsHandler","WaterfallIDGenerator","clearTimeout","fileSlice","getErrorSafe","mediaUploadFBRetryPolicyProvider","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e="media_upload",s=(function(t){function n(){return t.call(this,{currentTimeProvider:function(){return o("MediaUploadTime").millisecondsToTime(Date.now())},randomNumberProvider:function(t,n){return(n-t)*r("Random").random()+t},randomStringProvider:function(){return o("WaterfallIDGenerator").generate()},retryPolicyProvider:r("mediaUploadFBRetryPolicyProvider"),promiseTerminator:function(t){return r("promiseDone")(t)},delayedExecutor:function(t,n,a){var e=r("setTimeout")(n,o("MediaUploadTime").timeToMilliseconds(t));return{cancel:function(){a!=null&&a(),r("clearTimeout")(e)}}},reportRecoverableError:function(n,o){o!=null?r("FBLogger")(e).catching(r("getErrorSafe")(o)).mustfix(n):r("FBLogger")(e).mustfix(n)},createThrowableError:function(n){throw r("FBLogger")(e).mustfixThrow(n)},featureDetector:function(){return{supportFileFromHTML:"FileList"in window,supportFileManipulation:"FileReader"in window&&"DataView"in window&&"FormData"in window&&typeof r("fileSlice")=="function"}},registerUnloadHook:function(n){var t=new(r("SubscriptionsHandler")),o=r("Banzai").subscribe(r("Banzai").SHUTDOWN,n);return o!=null?t.addSubscriptions():r("FBLogger")(e).mustfix("Banzai did not return handle for unsubscribing from the unload hook; logging quality will be bad"),{cancel:function(){try{t.release()}catch(t){r("FBLogger")(e).catching(r("getErrorSafe")(t)).mustfix("Failed to unsubscribe from the unload hook")}}}}})||this}return babelHelpers.inheritsLoose(n,t),n})(r("MediaUploadSDK")),u=new s,c=u;l.default=c}),98);
__d("MediaUploadFBStage",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["METADATA_EXTRACTION","METADATA_VALIDATION","HASHING","START_REQUEST","BYTES_UPLOAD","RECEIVE_REQUEST"]),l=e;i.default=l}),66);
__d("MediaUploadSessionEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SESSION_CONFIRMED","SESSION_SUCCEED","SESSION_FAILED","SESSION_CANCELED","SESSION_FINISHED","SESSION_PROGRESS","PUBLISH_STARTED","PUBLISH_SUCCEED","PUBLISH_FAILED"]),l=e;i.default=l}),66);
__d("MediaUploadStageEvent",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["STAGE_STARTED","STAGE_PROGRESS","STAGE_SUCCEED","STAGE_FAILED","STAGE_CANCELED"]),l=e;i.default=l}),66);
__d("MediaUploadVUShim",["MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadFBEntryPointID","MediaUploadFBSDK","MediaUploadFBStage","MediaUploadSessionEvent","MediaUploadStageEvent","MediaUploadVUShimSession","MediaUploadVUShimSurface","Promise","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=new Map}var o=t.prototype;return o.createSession=function(t){if(!r("MediaUploadFBSDK").isSupported())return null;var e=t.source,n=t.composer_entry_point_ref;if(e==null||n==null)return null;var o=new(r("MediaUploadFBEntryPointID"))(e,n);if(!r("MediaUploadVUShimSurface").isClientSupported(o)||!r("gkx")("25479"))return null;var a=r("MediaUploadVUShimSurface").getClient(o),i=new(r("MediaUploadVUShimSession"))(t,a);return this.$1.set(i.sessionID,i),i},o.triggerPublish=function(r,o){var t=this.$1.get(r.sessionID);return t==null?(e||(e=n("Promise"))).resolve({isSuccessful:!1,errorCode:"MISSING_SESSION"}):t.triggerPublish(r,o)},o.setupEventSubscription=function(t){var e=this,n=function(r){t.addClientEventListener(r,function(t){return e.emitClientEvents(r)})};for(var o of r("MediaUploadClientEvent").members())n(o);var a=function(r){t.addSessionEventListener(r,function(t){var n;return(n=e.$1.get(t.sessionID))==null?void 0:n.sessionUpdated(r,t)})};for(var i of r("MediaUploadSessionEvent").members())a(i);var l=function(r){t.addAssetEventListener(r,function(t,n){var o;(o=e.$1.get(t.sessionID))==null||o.assetUpdated(r,t,n)})};for(var s of r("MediaUploadAssetEvent").members())l(s);var u=function(o){var n=function(r){t.addStageEventListener(o,r,function(t,n){var a;(a=e.$1.get(t.sessionID))==null||a.stageUpdated(o,r,t,n)})};for(var a of r("MediaUploadFBStage").members())n(a)};for(var c of r("MediaUploadStageEvent").members())u(c)},o.emitClientEvents=function(t){var e;if(t===r("MediaUploadClientEvent").CLIENT_INTERNET_ONLINE)e="online";else if(t===r("MediaUploadClientEvent").CLIENT_INTERNET_OFFLINE)e="offline";else return;for(var n of this.$1.values())n.inform(e)},t})(),u=new s,c=u;l.default=c}),98);
__d("MediaUploadAssetStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["REQUESTED","SCHEDULED","PROCESSING","UPLOADING","COMPLETED","FAILED","REMOVED"]),l=e;i.default=l}),66);
__d("MediaUploadCancelReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["USER_REQUEST","NAVIGATION_AWAY","UNLOAD_HOOK"]),l=e;i.default=l}),66);
__d("MediaUploadSessionStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UNCONFIRMED","CONFIRMED","FAILED","PUBLISHING","COMPLETED","CANCELED"]),l=e;i.default=l}),66);
__d("GraphQLVideoPublisherInputDataHandlerBase",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(e,t){this.postData=e,this.extraData=t}var t=e.prototype;return t.mapPostDataToGraphQLInputObject=function(){s(0,85)},t.hasAPISupport=function(){return u(this.postData)},t.uploadables=function(){s(0,85)},e})();function u(e){return!0}l.GraphQLVideoPublisherInputDataHandlerBase=e,l.hasAPISupport=u}),98);
__d("ExpirationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,DELETE:1,HIDE:2,ONLY_ME:3,HIDE_LONG_DURATION:4});i.default=e}),66);
__d("VideoAssetMatureContentRating",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNSET:0,SUITABLE_FOR_ALL:1,FOURTEEN_PLUS:2,EIGHTEEN_PLUS:3});i.default=e}),66);
__d("VideoCommentatingPermission",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNSET:"unset",ALLOW:"allow",DISALLOW:"disallow"});i.default=e}),66);
__d("VideoFundedContentFlagProgram",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNSET:0,IS_FUNDED_CONTENT:1,NOT_FUNDED_CONTENT:2});i.default=e}),66);
__d("VideoProjection",[],(function(t,n,r,o,a,i){var e=Object.freeze({FLAT:"flat",EQUIRECTANGULAR:"equirectangular",CUBEMAP:"cubemap",ROTATED_CUBEMAP:"rotated_cubemap",BARREL:"barrel",BARREL_SPLIT:"barrel_split",CDS_BARREL:"cds_barrel",HALF_EQUIRECTANGULAR:"half_equirectangular"});i.default=e}),66);
__d("VideoStereoFormat",[],(function(t,n,r,o,a,i){var e=Object.freeze({MONO:"mono",LEFT_RIGHT:"left-right",TOP_BOTTOM:"top-bottom"});i.default=e}),66);
__d("GraphQLVideoPublisherVideoUploaderInputDataHandler",["BrandedContentSharedToSponsorStatus","BrandedContentSponsorRelationship","CallToActionTypes","ClientIDs","ExpirationType","GraphQLVideoPublisherInputDataHandlerBase","VideoAssetMatureContentRating","VideoCommentatingPermission","VideoFundedContentFlagProgram","VideoProjection","VideoStereoFormat","enumUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.mapPostDataToGraphQLInputObject=function(){var e,t=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_1(),n=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_2(),r=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_3(),a=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_4(),i=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_5(),l=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_6(),s=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_7(),u=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_8(),c=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_9(),d=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_10(),m=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_11(),p=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_12(),_=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_13(),f=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_14(),g=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_15(),h=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_16(),y=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_17(),C=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_18(),b=this.postData.publish_as_reel,v=this.postData.translated_audio_metadata,S=(e=this.postData.non_uuc_reel_data)!=null?e:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_19(),R=this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_20();return{actor_id:this.extraData.target_id,basic_data:t,client_mutation_id:o("ClientIDs").getNewClientID(),thumbnail_data:n,ad_break_data:a,vu_editor_data:u,post_status_data:r,main_composer_tab_data:i,distribution_data:l,stars_data:s,questions_data:c,polls_data:d,tracking_data:m,captions_data:p,spherical_data:_,live_premiere_data:f,video_editor_config_json:this.postData.video_editor_config_json,location_preset_data:g,video_abtesting_data:h,auto_dub_data:y,reel_publish_data:C,publish_as_reel:b,non_uuc_reel_data:S,translated_audio_data:{translated_audio_metadata:v},share_story_settings:R}},n.uploadables=function(){return babelHelpers.extends({},this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_21(),this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_22(),this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_23())},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_1=function(){var e;return{source:this.extraData.source,target_id:this.extraData.target_id,video_id:this.extraData.video_id,video_title:this.postData.video_title,waterfall_id:this.extraData.waterfall_id,xhpc_message:this.postData.xhpc_message,creator_product:(e=this.extraData.creator_product)==null?void 0:e.toString(),composer_entry_point_ref:this.extraData.composer_entry_point_ref,composer_dialog_version:this.extraData.composer_dialog_version,has_file_been_replaced:this.extraData.has_file_been_replaced,supports_chunking:this.extraData.supports_chunking}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_2=function(){return{thumbnail_type:this.postData.thumbnail_type}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_22=function(){return this.postData.thumbnail_uploadable},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_23=function(){var e={},t=this.postData.schedule_custom_background_image,n=this.postData.schedule_custom_profile_image,r=this.postData.schedule_feed_background_image;return t!=null&&(e.schedule_custom_background_image=t),n!=null&&(e.schedule_custom_profile_image=n),r!=null&&(e.schedule_feed_background_image=r),e},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_4=function(){var e,t=(e=this.postData.ad_breaks)==null?void 0:e.map(function(e){return{time_offset:parseInt(e.time_offset,10),status:e.status}});return{ad_breaks:t,ad_break_prereview:this.postData.ad_break_prereview,ad_breaks_experiment_revenue_loss_threshold:this.postData.ad_breaks_experiment_revenue_loss_threshold,ad_breaks_creator_chosen_contextual_category:this.postData.ad_breaks_creator_chosen_contextual_category,enable_ad_breaks_experiment:this.postData.enable_ad_breaks_experiment,ad_breaks_block_lists:this.postData.ad_breaks_block_lists,has_ad_breaks_block_lists:this.postData.has_ad_breaks_block_lists,is_in_stream_enabled:this.postData.is_in_stream_enabled,self_cert_answers:this.postData.self_cert_answers,self_cert_educational_form:this.postData.self_cert_educational_form,self_cert_selected_no_sensitive:this.postData.self_cert_selected_no_sensitive,self_cert_predicted_status:this.postData.self_cert_predicted_status,should_auto_adjust_manual_ad_breaks:this.postData.should_auto_adjust_manual_ad_breaks,should_auto_insert_ad_breaks:this.postData.should_auto_insert_ad_breaks,should_use_image_ads:this.postData.should_use_image_ads,monetization_pre_check_options:this.postData.monetization_pre_check_options}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_3=function(){return{dogfooding:this.postData.dogfooding,draft:this.postData.draft,is_reviewable_branded_content:this.postData.is_reviewable_branded_content,scheduled:this.postData.scheduled,future_date:this.postData.future_date,future_time:this.postData.future_time,expiring:this.postData.expiring,expire_type:this.postData.expire_type!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.expire_type,r("ExpirationType")):null,expire_time:this.postData.expire_time,backdated_date:this.postData.backdated_date,hide_from_newsfeed:this.postData.hide_from_newsfeed,schedule_timestamp:this.postData.schedule_timestamp}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_24=function(){var e=this.postData.branded_content_data;if(e==null)return null;var t=e.tagging_data;return t!=null&&(t=babelHelpers.extends({},t,{shared_to_sponsor_status:t.shared_to_sponsor_status!=null?o("enumUtils").enumValueToKeyEnforcing(t.shared_to_sponsor_status,r("BrandedContentSharedToSponsorStatus")):null,sponsor_relationship:t.sponsor_relationship!=null?o("enumUtils").enumValueToKeyEnforcing(t.sponsor_relationship,r("BrandedContentSponsorRelationship")):null})),babelHelpers.extends({},e,{tagging_data:t})},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_5=function(){return{action_type_id:this.postData.action_type_id,branded_content_data:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_24(),collaborator_id:this.postData.collaborator_id,composertags_place_name:this.postData.composertags_place_name,composertags_place:this.postData.composertags_place,composertags_product_items:this.postData.composertags_product_items,composertags_sponsor:this.postData.composertags_sponsor,composertags_with:this.postData.composertags_with,content_tags:this.postData.content_tags,cta_type:this.postData.cta_type!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.cta_type,r("CallToActionTypes")):null,deal_id:this.postData.deal_id,direct_share_status:this.postData.direct_share_status!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.direct_share_status,r("BrandedContentSharedToSponsorStatus")):null,episode_data_json:this.postData.episode_data_json,external_movie_data:this.postData.external_movie_data,feed_targeted_data:this.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_25(),fan_funding_promotion_metadata:this.postData.fan_funding_promotion_metadata,free_form_tags:this.postData.free_form_tags,funded_content_program:this.postData.funded_content_program?o("enumUtils").enumValueToKeyEnforcing(this.postData.funded_content_program,r("VideoFundedContentFlagProgram")):null,fundraiser_for_story_charity_id:this.postData.fundraiser_for_story_charity_id,fundraiser_for_story_charity_type:this.postData.fundraiser_for_story_charity_type,game_id:this.postData.game_id,icon_id:this.postData.icon_id,is_explicitly_tagged_as_gaming_video:this.postData.is_explicitly_tagged_as_gaming_video,is_rewards_enabled:this.postData.is_rewards_enabled,is_stars_enabled_for_post:this.postData.is_stars_enabled_for_post,multilingual_specified_lang:this.postData.multilingual_specified_lang,multilingual_status_langs:this.postData.multilingual_status_langs,multilingual_statuses:this.postData.multilingual_statuses,object_id:this.postData.object_id,object_str:this.postData.object_str,playlistIDs:this.postData.playlistIDs,share_to_parent_page_option_selected:this.postData.share_to_parent_page_option_selected,send_dm_invite:this.postData.send_dm_invite,sponsor_relationship:this.postData.sponsor_relationship?o("enumUtils").enumValueToKeyEnforcing(this.postData.sponsor_relationship,r("BrandedContentSponsorRelationship")):null,targeted_privacy_data:JSON.stringify(this.postData.targeted_privacy_data),background_ab_opted_in:this.postData.background_ab_opted_in,video_duration:this.postData.video_duration}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_25=function(){var e=babelHelpers.extends({},this.postData.feed_targeted_data);return this.postData.relevant_until_date!=null&&(e["relevant-until-date"]=this.postData.relevant_until_date),this.postData.relevant_until_time!=null&&(e["relevant-until-time"]=this.postData.relevant_until_time),Object.keys(e).length===0&&(e=void 0),JSON.stringify(e)},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_6=function(){return{commentating_permission:this.postData.commentating_permission!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.commentating_permission,r("VideoCommentatingPermission")):null,crossposting_config:this.postData.crossposting_config,disturbing:this.postData.disturbing,embeddable:this.postData.embeddable,enable_drm:this.postData.enable_drm,exclude_from_watch:this.postData.exclude_from_watch,mature_content_rating:this.postData.mature_content_rating!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.mature_content_rating,r("VideoAssetMatureContentRating")):null,no_story:this.postData.no_story,secret:this.postData.secret,shows_v2_episode_data:this.postData.shows_v2_episode_data,social_actions:this.postData.social_actions}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_7=function(){return{is_receiving_stars_enabled:this.postData.is_receiving_stars_enabled,stars_goal_id:this.postData.stars_goal_id,stars_cue_trigger_timestamp:this.postData.stars_cue_trigger_timestamp}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_11=function(){return{custom_labels:this.postData.custom_labels,external_video_id:this.postData.external_video_id}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_9=function(){return{questions:this.postData.questions}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_10=function(){return{polls:this.postData.polls}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_26=function(t){return t.getIsDefault()?"captions_default":"captions_file"},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_12=function(){var e,t=this,n=(e=this.postData.captions)==null?void 0:e.map(function(e,n){return t.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_26(e)+n});return{autopublish_captions:this.postData.autopublish_captions,captions:n,should_review_all_captions:this.postData.should_review_all_captions,spoken_locale:this.postData.spoken_locale,autopublish_subtitles:this.postData.autopublish_subtitles}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_21=function(){var e,t=this,n={};return(e=this.postData.captions)==null||e.forEach(function(e,r){n[t.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_26(e)+r]=e.getFile()}),n},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_8=function(){return{auto_reframe_aspect_ratios:this.postData.auto_reframe_aspect_ratios,auto_reframe_publish_mode:this.postData.auto_reframe_publish_mode,trailer_review_required:this.postData.trailer_review_required,trailer_generate_on:this.postData.trailer_generate_on,auto_reframe_mobile_only:this.postData.auto_reframe_mobile_only||!1}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_13=function(){return{initialHeading:this.postData.initialHeading,initialPitch:this.postData.initialPitch,fov:this.postData.fov,guide_enabled:this.postData.guide_enabled,guide_keyframes:this.postData.guide_keyframes,enable_omnistab:this.postData.enable_omnistab,spherical:this.postData.spherical,projection:this.postData.projection!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.projection,r("VideoProjection")):null,stereoMode:this.postData.stereoMode!=null?o("enumUtils").enumValueToKeyEnforcing(this.postData.stereoMode,r("VideoStereoFormat")):null}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_14=function(){return{premiere_time_ms:this.postData.premiere_time_ms,should_premiere:this.postData.should_premiere,premiere_in_living_room_video_ids:this.postData.premiere_in_living_room_video_ids,premiere_custom_profile_image_focus:this.postData.premiere_custom_profile_image_focus,feed_background_focus:this.postData.feed_background_focus,premiere_audience:this.postData.premiere_audience,premiere_is_loe:this.postData.premiere_is_loe,premiere_event_category_id:this.postData.premiere_event_category_id}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_15=function(){return{location_preset_id:this.postData.location_preset_id}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_16=function(){return{is_abtesting:this.postData.is_abtesting,should_publish_uuc:this.postData.should_publish_uuc}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_17=function(){return{dubbing_enabled:this.postData.dubbing_enabled,dub_voice_speed:this.postData.dub_voice_speed,target_locale:this.postData.target_locale,voice_code:this.postData.voice_code}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_19=function(){return{publish_as_non_uuc_reel:this.postData.publish_as_non_uuc_reel}},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_18=function(){return this.postData.reel_publish_data},n.$GraphQLVideoPublisherVideoUploaderInputDataHandler$p_20=function(){return this.postData.reshare_post_as_sticker==null?null:{reshare_post_as_sticker:this.postData.reshare_post_as_sticker,resharing_frequency:this.postData.resharing_frequency}},t})(o("GraphQLVideoPublisherInputDataHandlerBase").GraphQLVideoPublisherInputDataHandlerBase);l.default=e}),98);
__d("ReelComposerReelPublishMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24143317328587698"}),null);
__d("ReelComposerReelPublishMutation.graphql",["ReelComposerReelPublishMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"CpxReelPublishResponsePayload",kind:"LinkedField",name:"cpx_reel_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"published_video_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ReelComposerReelPublishMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ReelComposerReelPublishMutation",selections:t},params:{id:n("ReelComposerReelPublishMutation_facebookRelayOperation"),metadata:{},name:"ReelComposerReelPublishMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("ReelComposerReframeAspectRatio",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["NONE","VERTICAL","SQUARE","FOUR_BY_FIVE","MANUAL_9X16","SPLIT_1X3"]);i.ReelComposerReframeAspectRatio=e}),66);
__d("ReelCreationFlowUtils",["$InternalEnum","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("$InternalEnum")).Mirrored(["PUBLISH_NOW","SCHEDULE","DRAFT"]),u=e.Mirrored(["AUDIO","VIDEO"]),c=e.Mirrored(["CREATE","EDIT","AB_TESTING"]),d=e.Mirrored(["CREATOR_STUDIO","MBS","REELS_BULK_UPLOAD"]),m=e.Mirrored(["ENABLED","DISABLED"]),p=function(t){switch(r("vulture")("Zy_DFT_d9vEB43MOHwvCR9PVUGA="),t){case s.PUBLISH_NOW:return"published";case s.DRAFT:return"draft";case s.SCHEDULE:return"scheduled"}};l.ReelPublishType=s,l.ReelEnhancementType=u,l.ReelComposerMode=c,l.ReelsComposerEntrypoint=d,l.ReelsComposerOriginalAudioReuseMode=m,l.getReelPostStatusFromReelPublishType=p}),98);
__d("XFBXFamilyBusinessContentType.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["POST","REEL","STORY"]),l=e;i.default=l}),66);
__d("getEnumFromString",["memoizeByReference"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={};return Object.values(e).forEach(function(e){t[e]=e}),t}var s=r("memoizeByReference")(e);function u(e,t){if(t==null)return null;var n=s(e);return n[t]!=null?n[t]:null}l.default=u}),98);
__d("getChunkForContentState",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){if(t){var r=n.getEntity(t);if(r.getType()==="EMOTICON")return r.getData().originalEmoticon;if(r.getType()==="EMOJI")return r.getData().emoji.join("")}return e.replace("@[","@ [")}i.default=e}),66);
__d("getMentionsTextForContentState",["emptyFunction","getChunkForContentState"],(function(t,n,r,o,a,i){"use strict";var e=n("emptyFunction").thatReturnsTrue,l=/[\\\]:]/g;function s(t,n,r){n===void 0&&(n=""),r===void 0&&(r=!0);var o=t.getBlockMap().map(function(n){var o=n.getText(),a=[];return n.findEntityRanges(e,function(e,i){a.push(u(o.slice(e,i),n.getEntityAt(e),t,r))}),a.join("")});return o.join("\n"+n)}function u(e,t,r,o){if(t){var a=r.getEntity(t);if(a.getType()==="MENTION"){o&&(e=e.replace(l,function(e){return"\\"+e}));var i=a.getData().id;if(/^\d+$/.test(i))return"@["+i+":"+e+"]"}}return n("getChunkForContentState")(e,t,r)}a.exports=s}),null);
__d("getShouldDisableCollabsDraftsandScheduling",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!r("gkx")("9836")}l.getShouldDisableCollabsDraftsandScheduling=e}),98);
__d("shouldUsePostCollabsField",["getShouldDisableCollabsDraftsandScheduling","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e?t===!1?r("gkx")("10000"):!o("getShouldDisableCollabsDraftsandScheduling").getShouldDisableCollabsDraftsandScheduling():!1}l.shouldUsePostCollabsField=e}),98);
__d("ReelComposerReelPublishMutation",["AdsValidationConsts","BusinessComposerIGAudienceTypes","DateConsts","ISOCountryCode","ReelComposerReelPublishMutation.graphql","ReelComposerReframeAspectRatio","ReelCreationFlowUtils","RelayModern","getEnumFromString","getMentionsTextForContentState","justknobx","requireDeferred","shouldUsePostCollabsField","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ODS").__setRef("ReelComposerReelPublishMutation"),u=1,c=e!==void 0?e:e=n("ReelComposerReelPublishMutation.graphql");function d(e,t,n,r){var a=m(r);o("RelayModern").commitMutation(e,{mutation:c,variables:{input:a},onCompleted:t,onError:function(t){return n()}})}function m(e){var t,n,a,i,l,c,d,m,p=e.isFormatMergeEnabled,h=e.videoID,y=e.shouldSkipEncoding,C=e.shouldEnforceVideoEditorPath,b=e.loggingClientInfo,v=e.reelRemixingEnabled,S=e.reelPublishType,R=e.reelScheduledUnixTimestamp,L=e.reelDescription,E=e.trimStartTimeMs,k=e.trimEndTimeMs,I=e.isTrimTimestampsEqualToEntireVideo,T=e.reelReframeAspectRatio,D=e.collaborators,x=e.videoThumbnailFileID,$=e.thumbnailType,P=e.audioEnhancementProcessingAmount,N=e.music,M=e.audioCustomStartTimeMs,w=e.placements,A=e.igBusinessID,F=e.inStreamAdsSettings,O=e.manualCrop,B=e.mixingParams,W=e.geoTargetingData,q=e.overlay,U=e.mainTrack,V=e.photoTrack,H=e.original_resolution,G=e.isReceivingStarsEnabled,z=e.linkedVideoID,j=e.reelsCreatorPlaylistID,K=e.reelsCreatorPlaylistItemOrder,Q=e.reelsCreatorPlaylistItemBatchSize,X=e.addedHashtags,Y=e.fbMonetizationData,J=e.reelEmbeddingEnabled,Z=e.totalVideoDuration,ee=e.isABTest,te=e.shouldUseConsolidatedReelEditPublishPath,ne=e.shouldShareToStory,re=e.storySharingFrequency,oe=e.igTargetingPrivacyData,ae=e.locationTag,ie=e.reelsReshareDestination,le=e.reelsPoll,se=e.pageCaptionSettings,ue=e.reelCaptionSettings,ce=e.alternateAudioTracks,de=e.autoDubbingSettings,me=e.videoContainerType,pe=e.vodTitle,_e=e.allowTrimBeyondMaxLength,fe=e.closedCaptions,ge=e.shouldDisplayManualDescriptionsSectioninBYOA,he=e.isBoostToggleOn,ye=me==="POST"||p===!0,Ce=S===o("ReelCreationFlowUtils").ReelPublishType.DRAFT||ee===!0,be=S===o("ReelCreationFlowUtils").ReelPublishType.SCHEDULE&&ee!==!0,ve={caption:L,enable_remix:v,is_draft:Ce,is_scheduled:be,scheduled_publish_time:R},Se=(N==null?void 0:N.id)!=null?{id:N.id,offset:(M!=null?M:N.audio.highlightStartTimeMs)/o("DateConsts").MS_PER_SEC,duration:(k-E)/o("DateConsts").MS_PER_SEC}:null,Re=I&&T===o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.NONE&&Se===null&&P===0,Le=Re?null:{start_time_in_sec:E/o("DateConsts").MS_PER_SEC,end_time_in_sec:k/o("DateConsts").MS_PER_SEC},Ee=(t=W==null||(n=W.countries)==null?void 0:n.map(function(e){return r("getEnumFromString")(r("ISOCountryCode"),e)}).filter(Boolean))!=null?t:[],ke=((a=W==null?void 0:W.regions)!=null?a:[]).map(function(e){var t,n;return{key:e.key,country:(t=e.country)!=null?t:"",name:(n=e.name)!=null?n:""}});Ee.length>0&&s.onReady(function(e){e.bumpEntityKey(5907,"fb_stories_web","geo_gating.reel.create",1)});var Ie=(i=oe==null||(l=oe.targetingData)==null?void 0:l.geoLocations.countries)!=null?i:null,Te=(c=oe==null?void 0:oe.isIncluded)!=null?c:!1,De=null;if(Ie!=null&&Ie.length>0)if(Te){var xe;De={age_min:r("AdsValidationConsts").minAge,geo_locations:{countries:(xe=Array.from(new Set(Ie)))!=null?xe:[]}}}else{var $e,Pe=Object.keys(r("ISOCountryCode")).filter(function(e){return!o("BusinessComposerIGAudienceTypes").UnsupportedIGAudienceCountryList.includes(e)&&!Ie.includes(e)});De={age_min:r("AdsValidationConsts").minAge,geo_locations:{countries:($e=Array.from(new Set(Pe)))!=null?$e:[]}}}var Ne={reshare_destination:ie==null?void 0:ie.map(function(e){return{message:{text:e.postText},reshare_audience:{to_id:e.groupID}}})},Me=null;j!=null&&(Me={videolist_ids:[j],order:K,batch_size:Q});var we=ye?["FACEBOOK_NEWS_FEED"]:w,Ae=null;if(ye&&F!=null){var Fe,Oe,Be,We,qe,Ue,Ve=(Fe=F==null||(Oe=F.ad_breaks_block_lists)==null||(Oe=Oe.filter(Boolean))==null?void 0:Oe.map(function(e){return e}))!=null?Fe:[],He=(Be=Ve==null?void 0:Ve.map(function(e){return e.toString()}))!=null?Be:[];Ae={has_ad_breaks_block_lists:(We=F==null?void 0:F.has_ad_breaks_block_lists)!=null?We:!1,should_auto_insert_ad_breaks:(qe=F==null?void 0:F.should_auto_insert_ad_breaks)!=null?qe:!1,should_use_image_ads:(Ue=F==null?void 0:F.should_use_image_ads)!=null?Ue:!1,ad_breaks_block_lists:He!=null?He:[]}}var Ge=f(T),ze=o("shouldUsePostCollabsField").shouldUsePostCollabsField(D.length>0,Ce||be),je=fe!=null&&fe.length>0?{caption_ids:fe.map(function(e){return e.id})}:null;return{video_id:h!=null?h:"",should_skip_encoding:y!=null?y:!1,should_enforce_video_editor_path:C!=null?C:!1,metadata:ve,trim_timestamps:Le,reframe_aspect_ratio:_(T),client_info:b,client_mutation_id:(d=b==null?void 0:b.client_session_id)!=null?d:r("uuidv4")(),reframe_aggressiveness:u,reframe_settings:Ge?{version:Ge}:void 0,video_collaboration:ze?null:{collaborators:D},post_collaborators:ze?{post_collaborators:D}:null,video_thumbnail_file_id:x,thumbnail_type:$.toString(),audio_enhancement:{processing:P},is_boost_toggle_on:he,music_overlay:Se,placements:we,ig_business_id:A,manual_reframe:O?g(O):null,audio_mixing:babelHelpers.extends({},B),targeted_privacy_data:Ee.length>0||ke.length>0?{age_min:0,geo_locations:{countries:Ee,regions:ke}}:null,overlay:q,main_track:U,photo_track:V,original_resolution:H,is_receiving_stars_enabled:G,linked_vod_data:z!=null?{target_video_id:z}:null,videolist:Me,hashtags_logging_data:{added_hashtags:(X!=null?X:[]).map(function(e){return{hashtag:e.hashtag,tool_type:e.toolType}})},fb_monetization_data:Y,embeddable:J,should_share_to_story:ne,total_video_duration:Z,should_use_consolidated_reel_edit_publish_path:te,ig_targeted_privacy_data:De,vod_in_stream_ads_settings:Ae,location_tag:ae!=null?{place_id:ae.id}:null,groups_schedule_resharing:Ne,reels_poll:le,auto_gen_captions_settings:ue!=null?{autogenerate_captions_enabled:ue.autogenerate_captions_enabled,should_review_all_captions:ue.should_review_all_captions}:r("justknobx")._("1058")&&se!=null?{autogenerate_captions_enabled:se.autogenerate_captions_enabled,should_review_all_captions:se.should_review_all_captions}:null,translated_audio_metadata:ce!=null&&ce.length>0?ce.map(function(e){var t,n,o,a=e.description,i=a!=null?r("getMentionsTextForContentState")(a.getCurrentContent()):null;return{audio_handle:(t=e.handle)!=null?t:"",lang_code:(n=(o=e.langCode)==null?void 0:o.valueOf())!=null?n:"",handle_type:"UPLOAD_SERVICE_HANDLE",enabled:!0,description:ge===!0&&i!==L?i:null}}):(de==null?void 0:de.translateVoiceWithMetaAi)===!0?de==null||(m=de.targetLanguages)==null?void 0:m.map(function(e){return{lang_code:e,is_lipsync_enabled:de.enableLipSyncing,enabled:!0,source_lang_code:de.sourceLanguage,audio_handle:"",require_review:de.reviewBeforePublishing}}):null,vod_title:ye?pe:void 0,allow_trim_beyond_max_length:_e,closed_captions:je,has_overridden_video_format:p===!0}}var p={aspect_ratio_denominator:16,aspect_ratio_numerator:9};function _(e){switch(e){case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.NONE:return null;case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.MANUAL_9X16:case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.SPLIT_1X3:case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.VERTICAL:return{aspect_ratio_denominator:16,aspect_ratio_numerator:9};case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.SQUARE:return{aspect_ratio_denominator:1,aspect_ratio_numerator:1};case o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.FOUR_BY_FIVE:return{aspect_ratio_denominator:5,aspect_ratio_numerator:4}}}function f(e){if(e===o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.VERTICAL)return"VERSION_3"}function g(e){return{left:e==null?void 0:e.crop_section_relative_top_x,right:e?e.crop_section_relative_top_x+e.crop_section_relative_width:void 0,top:e==null?void 0:e.crop_section_relative_top_y,bottom:e?e.crop_section_relative_top_y+e.crop_section_relative_height:void 0}}l.reelPublishMutation=d,l.getReelPublishInputObject=m,l.DEFAULT_ASPECT_RATIO_PARAMS=p,l.getAspectRatioParams=_,l.getReframeVersion=f,l.manualCropToReframeParameters=g}),98);
__d("VideoComposerVideoPublishingMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29705123342436060"}),null);
__d("VideoComposerVideoPublishingMutation.graphql",["VideoComposerVideoPublishingMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPublishResponsePayload",kind:"LinkedField",name:"video_publish",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_asset_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VideoComposerVideoPublishingMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VideoComposerVideoPublishingMutation",selections:t},params:{id:n("VideoComposerVideoPublishingMutation_facebookRelayOperation"),metadata:{},name:"VideoComposerVideoPublishingMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VideoComposerVideoPublishingMutation",["RelayAPIConfig","VideoComposerVideoPublishingMutation.graphql","cr:1012418"],(function(t,n,r,o,a,i,l){"use strict";var e,s=9e4,u=e!==void 0?e:e=n("VideoComposerVideoPublishingMutation.graphql");function c(e,t,o,a,i){var l=r("RelayAPIConfig").fetchTimeout;return r("RelayAPIConfig").fetchTimeout=s,n("cr:1012418").commitMutation(t,{uploadables:o,mutation:u,variables:{input:e},onCompleted:function(t){r("RelayAPIConfig").fetchTimeout=l,a(t)},onError:function(t){r("RelayAPIConfig").fetchTimeout=l,i(t)}})}l.commit=c}),98);
__d("VideoComposerVideoPublisher",["ReelComposerReelPublishMutation","ReelComposerReframeAspectRatio","ReelCreationFlowUtils","RelayFBEnvironmentFactory","VideoComposerVideoPublishingMutation","err","getIsEligibleFor180SecondReelLimit"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.mapPostDataToGraphQLInputObject(),this.$3=e.hasAPISupport(),this.$2=e.uploadables()}var t=e.prototype;return t.publish=function(t,n){if(this.$1.publish_as_reel===!0){var e,a,i,l,s,u,c=r("RelayFBEnvironmentFactory").getForActorID(this.$1.basic_data.target_id),d=(e=this.$1.post_status_data)!=null&&e.draft?o("ReelCreationFlowUtils").ReelPublishType.DRAFT:(a=this.$1.post_status_data)!=null&&a.scheduled?o("ReelCreationFlowUtils").ReelPublishType.SCHEDULE:o("ReelCreationFlowUtils").ReelPublishType.PUBLISH_NOW,m=null,p=(i=this.$1.post_status_data)==null?void 0:i.future_date,_=(l=this.$1.post_status_data)==null?void 0:l.future_time;p!=null&&_!=null&&(m=+new Date(p).getTime()+ +_*1e3),o("ReelComposerReelPublishMutation").reelPublishMutation(c,function(){},function(){},{videoID:(s=this.$1.basic_data.video_id)!=null?s:"",shouldSkipEncoding:!1,shouldEnforceVideoEditorPath:null,loggingClientInfo:{entry_point:"CS_IG_CROSSPOST_REEL",composer_entry_point:"CS_IG_CROSSPOST_REEL",product:"CREATOR_STUDIO",feature:"IG_REELS_SHARED_TO_FB"},reelRemixingEnabled:!1,reelPublishType:d,reelScheduledUnixTimestamp:m!=null?m/1e3:0,reelDescription:(u=this.$1.basic_data.xhpc_message)!=null?u:"",trimStartTimeMs:0,trimEndTimeMs:0,isTrimTimestampsEqualToEntireVideo:!0,reelReframeAspectRatio:o("ReelComposerReframeAspectRatio").ReelComposerReframeAspectRatio.NONE,collaborators:[],videoThumbnailFileID:null,thumbnailType:"generated_default",audioEnhancementProcessingAmount:0,music:null,audioCustomStartTimeMs:null,placements:["FACEBOOK_REEL"],igBusinessID:null,manualCrop:null,mixingParams:null,geoTargetingData:null,allowTrimBeyondMaxLength:r("getIsEligibleFor180SecondReelLimit")()})}else{if(!this.$3)throw r("err")("This api does not support your publishing use case");o("VideoComposerVideoPublishingMutation").commit(this.$1,r("RelayFBEnvironmentFactory").getForActorID(this.$1.basic_data.target_id),this.$2,t,n)}},e})();l.default=e}),98);
__d("VideoUploadGraphQLPostRequestManager",["FBLogger","GraphQLVideoPublisherInputDataHandlerBase","GraphQLVideoPublisherVideoUploaderInputDataHandler","VideoComposerVideoPublisher","clearTimeout","cr:909282","err","mixin","setTimeout"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t,n,r,o){var a;return a=e.call(this)||this,a.$VideoUploadGraphQLPostRequestManager$p_1=0,a.$VideoUploadGraphQLPostRequestManager$p_2=0,a.$VideoUploadGraphQLPostRequestManager$p_3=0,a.$VideoUploadGraphQLPostRequestManager$p_4=0,a.$VideoUploadGraphQLPostRequestManager$p_5=0,a.$VideoUploadGraphQLPostRequestManager$p_6=0,a.$VideoUploadGraphQLPostRequestManager$p_7=null,a.$VideoUploadGraphQLPostRequestManager$p_8=null,a.$VideoUploadGraphQLPostRequestManager$p_9=!1,a.$VideoUploadGraphQLPostRequestManager$p_1=t,a.$VideoUploadGraphQLPostRequestManager$p_2=n,a.$VideoUploadGraphQLPostRequestManager$p_3=0,a.$VideoUploadGraphQLPostRequestManager$p_4=r,a.$VideoUploadGraphQLPostRequestManager$p_5=o,a.$VideoUploadGraphQLPostRequestManager$p_6=0,a}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.sendRequest=function(t){if(this.$VideoUploadGraphQLPostRequestManager$p_8=t,this.$VideoUploadGraphQLPostRequestManager$p_9){r("FBLogger")("video_publish_graphql").info("Sending publishing request again while processing another request");return}this.$VideoUploadGraphQLPostRequestManager$p_10(),this.inform("request-started")},n.clearRequest=function(){this.$VideoUploadGraphQLPostRequestManager$p_9=!1,this.$VideoUploadGraphQLPostRequestManager$p_6=0,this.$VideoUploadGraphQLPostRequestManager$p_3=0},n.$VideoUploadGraphQLPostRequestManager$p_10=function(){var e=this.$VideoUploadGraphQLPostRequestManager$p_8;if(e!=null){r("clearTimeout")(this.$VideoUploadGraphQLPostRequestManager$p_7),this.$VideoUploadGraphQLPostRequestManager$p_7=null;var t=e.getMetadata(),n=this.__createRequestData(e),o=new(r("GraphQLVideoPublisherVideoUploaderInputDataHandler"))(t,n);this.$VideoUploadGraphQLPostRequestManager$p_9=!0;var a=new(r("VideoComposerVideoPublisher"))(o);a.publish(this.$VideoUploadGraphQLPostRequestManager$p_11.bind(this),this.$VideoUploadGraphQLPostRequestManager$p_12.bind(this))}},n.__createRequestData=function(t){var e=t.getVideoID(),n=t.getTargetID();if(e==null)throw r("err")("Video id cannot be null");if(n==null)throw r("err")("Target id cannot be null");return{video_id:e,target_id:n,source:"COMPOSER",waterfall_id:t.getWaterfallID()||"",creator_product:t.getCreatorProduct(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_dialog_version:t.getComposerDialogVersion(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking()}},n.$VideoUploadGraphQLPostRequestManager$p_11=function(t){var e;this.inform("request-finished",{video_asset_id:(e=t.video_publish)==null?void 0:e.video_asset_id}),this.clearRequest()},n.$VideoUploadGraphQLPostRequestManager$p_13=function(t){this.inform("request-failed",{error_code:t.number,error_description:t.message,error_summary:t.name,error_object:t}),this.clearRequest()},n.$VideoUploadGraphQLPostRequestManager$p_12=function(t){this.$VideoUploadGraphQLPostRequestManager$p_14(t)&&this.$VideoUploadGraphQLPostRequestManager$p_6<this.$VideoUploadGraphQLPostRequestManager$p_4?(r("FBLogger")("video_publish_graphql").info("retry publishing for error: %s",t.stack),this.$VideoUploadGraphQLPostRequestManager$p_6++,this.$VideoUploadGraphQLPostRequestManager$p_15(this.$VideoUploadGraphQLPostRequestManager$p_16(this.$VideoUploadGraphQLPostRequestManager$p_5,this.$VideoUploadGraphQLPostRequestManager$p_6))):this.$VideoUploadGraphQLPostRequestManager$p_13(t)},n.$VideoUploadGraphQLPostRequestManager$p_16=function(t,n){return Math.pow(t,n)*1e3},n.$VideoUploadGraphQLPostRequestManager$p_15=function(t){r("clearTimeout")(this.$VideoUploadGraphQLPostRequestManager$p_7),this.$VideoUploadGraphQLPostRequestManager$p_7=r("setTimeout")(this.$VideoUploadGraphQLPostRequestManager$p_10.bind(this),t)},n.$VideoUploadGraphQLPostRequestManager$p_14=function(t){var e=t.toString();return!!(e.includes("NetworkTransportError")||e.includes("NetworkTimeoutError")||e.includes("NetworkRequestError"))},n.hasAPISupport=function(t){return o("GraphQLVideoPublisherInputDataHandlerBase").hasAPISupport(t)},t})(r("mixin")(n("cr:909282")));l.default=e}),98);
__d("submitForm",["cr:6114"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.querySelector('input[type="submit"]');t!=null?t.click():(t=n("cr:6114").create("input",{type:"submit",className:"hidden_elem"}),n("cr:6114").appendContent(e,t),t.click(),n("cr:6114").remove(t))}l.default=e}),98);
__d("VideoUploadRequest",["AsyncRequest","DOM","DTSG","FileForm","Form","VideoUploadFeatureDetector","emptyFunction","flattenPHPQueryData","submitForm"],(function(t,n,r,o,a,i){var e="video",l=(function(){"use strict";function t(e){var t;this.$1=e,this.$2=null,this.$3=!1,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=t=n("emptyFunction"),this.$9=t,this.$10=t,this.$11=t,this.$12=null}var r=t.prototype;return r.setAllowCrossOrigin=function(t){return this.$3=t,this},r.setData=function(t){return this.$4=t,this},r.setWaterfallID=function(t){return this.$6=t,this},r.setSuccessHandler=function(t){return this.$8=t,this},r.setErrorHandler=function(t){return this.$9=t,this},r.setTransportErrorHandler=function(t){return this.$10=t,this},r.setUploadProgressHandler=function(t){return this.$11=t,this},r.setTimeoutHandler=function(t,n){return this.$7=t,this.$12=n,this},r.setThumbnail=function(t){return this.$13=t,this},r.setCustomProfileImage=function(t){return this.$14=t,this},r.setCustomBackgroundImage=function(t){return this.$15=t,this},r.setFeedBackgroundImage=function(t){return this.$16=t,this},r.setHandle=function(t){return this.$5=t,this},r.setCaptions=function(t){return this.$17=t,this},r.setPollOptionImages=function(t){return this.$18=t,this},r.send=function(){if(this.$2)throw new Error("An upload request is already in progress.");if(n("VideoUploadFeatureDetector").supportsXHR()){if(this.$2=this.$19(),this.$13||this.$17||this.$14||this.$15||this.$16||this.$18){var e=new FormData;if(this.$13&&e.append("thumb",this.$13),this.$14&&e.append("schedule_custom_profile_image",this.$14),this.$15&&e.append("schedule_custom_background_image",this.$15),this.$16&&e.append("schedule_feed_background_image",this.$16),this.$17&&this.$17.forEach(function(t,n){var r=t.getIsDefault()?"captions_default":"captions_file"+n;e.append(r,t.getFile())}),this.$18){var t=this.$18;Object.keys(t).forEach(function(n){e.append(n,t[n])})}if(this.$4){var r=n("flattenPHPQueryData")(this.$4);Object.keys(r).forEach(function(t){e.append(t,r[t])})}this.$2.setRawData(e)}this.$2.send()}else this.$2=this.$20(),this.$21(this.$2)},r.sendChunk=function(t){if(this.$2)throw new Error("An upload request is already in progress.");var e=new FormData;this.$5?e.append("fbuploader_video_file_chunk",this.$5):e.append("video_file_chunk",t),this.$2=this.$19(),this.$2.setRawData(e),this.$2.send()},r.sendFile=function(r){if(this.$2)throw new Error("An upload request is already in progress.");this.$2=this.$20();var t=r.cloneNode(!1);r.name=e,n("DOM").replace(r,t),n("DOM").appendContent(this.$2.getRoot(),r),this.$21(this.$2),r.name=t.name,n("DOM").replace(t,r)},r.abort=function(){this.$2&&(this.$2.abort(),this.$2=null)},r.$19=function(){var e=this.__getAsyncRequest().setAllowCrossOrigin(this.$3).setURI(this.$1).setData(this.$4).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",this.$6).setHandler(this.$8).setErrorHandler(this.$9).setTransportErrorHandler(this.$10).setUploadProgressHandler(this.$11);return this.$12&&e.setTimeoutHandler(this.$7,this.$12),e},r.__getAsyncRequest=function(){return new(n("AsyncRequest"))},r.$20=function(){var e=n("DOM").create("form",{action:this.$1,method:"POST"});n("Form").createHiddenInputs(babelHelpers.extends({fb_dtsg:n("DTSG").getToken()},this.$4),e);var t=new(n("FileForm"))(e,null,{allowCrossOrigin:this.$3});return t.subscribe("success",this.$22.bind(this)),t.subscribe("failure",this.$23.bind(this)),t.subscribe("progress",this.$24.bind(this)),t},r.$21=function(t){n("DOM").appendContent(document.body,t.getRoot()),n("submitForm")(t.getRoot())},r.$22=function(t,n){this.$8(n.response)},r.$23=function(t,n){this.$9(n.response)},r.$24=function(t,n){this.$11(n.event)},t})();a.exports=l}),null);
__d("VideoUploadPostRequestManager",["VideoUploadLogger","VideoUploadRequest","clearTimeout","cr:909282","isEmpty","mixin","setTimeout"],(function(t,n,r,o,a,i,l){var e,s=(function(t){function n(e,n,r,o,a){var i;return i=t.call(this)||this,i.$VideoUploadPostRequestManager2=e,i.$VideoUploadPostRequestManager3=n,i.$VideoUploadPostRequestManager4=r,i.$VideoUploadPostRequestManager5=0,i.$VideoUploadPostRequestManager6=o,i.$VideoUploadPostRequestManager7=a,i.$VideoUploadPostRequestManager8=0,i}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$VideoUploadPostRequestManager9=function(){return this.$VideoUploadPostRequestManager1?new(r("VideoUploadLogger"))({source:this.$VideoUploadPostRequestManager1.getSource(),waterfall_id:this.$VideoUploadPostRequestManager1.getWaterfallID(),target_id:this.$VideoUploadPostRequestManager1.getTargetID(),composer_entry_point_ref:this.$VideoUploadPostRequestManager1.getComposerEntryPointRef&&this.$VideoUploadPostRequestManager1.getComposerEntryPointRef()}):null},o.getRequest=function(){return this.$VideoUploadPostRequestManager10},o.sendRequest=function(t){if(this.$VideoUploadPostRequestManager1=t,this.$VideoUploadPostRequestManager10){var e=this.$VideoUploadPostRequestManager9();e&&e.logEvent(r("VideoUploadLogger").EVENT_DUPLICATE_POST_REQUEST);return}this.$VideoUploadPostRequestManager11=babelHelpers.extends({},t.getMetadata(),this.__createRequestData(t)),this.$VideoUploadPostRequestManager12=this.$VideoUploadPostRequestManager11.thumb,this.$VideoUploadPostRequestManager13=this.$VideoUploadPostRequestManager11.schedule_custom_profile_image,this.$VideoUploadPostRequestManager14=this.$VideoUploadPostRequestManager11.schedule_custom_background_image,this.$VideoUploadPostRequestManager15=this.$VideoUploadPostRequestManager11.schedule_feed_background_image,delete this.$VideoUploadPostRequestManager11.thumb,this.$VideoUploadPostRequestManager16=this.$VideoUploadPostRequestManager11.captions,delete this.$VideoUploadPostRequestManager11.captions,this.$VideoUploadPostRequestManager17=t.getWaterfallID(),this.$VideoUploadPostRequestManager18=this.$VideoUploadPostRequestManager11.pollImages,this.$VideoUploadPostRequestManager19(),this.inform("request-started")},o.$VideoUploadPostRequestManager19=function(){r("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=null,this.$VideoUploadPostRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager2).setAllowCrossOrigin(!0).setData(this.$VideoUploadPostRequestManager11).setThumbnail(this.$VideoUploadPostRequestManager12).setCustomProfileImage(this.$VideoUploadPostRequestManager13).setCustomBackgroundImage(this.$VideoUploadPostRequestManager14).setFeedBackgroundImage(this.$VideoUploadPostRequestManager15).setCaptions(this.$VideoUploadPostRequestManager16).setWaterfallID(this.$VideoUploadPostRequestManager17).setPollOptionImages(this.$VideoUploadPostRequestManager18).setSuccessHandler(this.$VideoUploadPostRequestManager21.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager22.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager23.bind(this)),this.$VideoUploadPostRequestManager10.send()},o.__createRequestData=function(t){return{video_id:t.getVideoID(),target_id:t.getTargetID(),source:t.getSource(),waterfall_id:t.getWaterfallID(),creator_product:t.getCreatorProduct(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_dialog_version:t.getComposerDialogVersion(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking()}},o.__getVideoUploadRequest=function(t){return new(r("VideoUploadRequest"))(t)},o.clearRequest=function(){this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager8=0,this.$VideoUploadPostRequestManager5=0},o.isInProgress=function(){return!!this.$VideoUploadPostRequestManager10},o.$VideoUploadPostRequestManager24=function(t){r("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=r("setTimeout")(this.$VideoUploadPostRequestManager19.bind(this),t)},o.$VideoUploadPostRequestManager25=function(t,n){return Math.pow(t,n)*1e3},o.$VideoUploadPostRequestManager21=function(t){var e=t.getPayload();this.inform("request-finished",{video_id:e.video_id,video_asset_id:e.video_asset_id,container_type:e.container_type,transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,premiere_destination_video_id:e.premiere_destination_video_id}),this.clearRequest()},o.$VideoUploadPostRequestManager26=function(n){var t,o,a=[].concat(n==null||(t=n.getPayload())==null||(t=t.error)==null?void 0:t.opes_mids,[n==null?void 0:n.errorMid]).filter(Boolean);this.inform("request-failed",{error_code:n.getError(),error_description:n.getErrorDescription(),error_summary:n.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,error_is_silent:n.isSilent(),error_is_transient:n.isTransient(),www_request_id:(o=n.getPayload())==null?void 0:o.__www_request_id__,opes_mids:(e||(e=r("isEmpty")))(a)?null:a}),this.clearRequest()},o.$VideoUploadPostRequestManager22=function(t){this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager5=0;var e=this.$VideoUploadPostRequestManager9();if(e){var n={server_retries:this.$VideoUploadPostRequestManager8,extra_data:{failure_is_transient:t.isTransient()}};e.logEvent(r("VideoUploadLogger").EVENT_HANDLING_SERVER_FAILURE_RESPONSE,n)}t.isTransient()&&this.$VideoUploadPostRequestManager8<this.$VideoUploadPostRequestManager6?(this.$VideoUploadPostRequestManager8++,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager7,this.$VideoUploadPostRequestManager8))):this.$VideoUploadPostRequestManager26(t)},o.$VideoUploadPostRequestManager23=function(t){var e=this.$VideoUploadPostRequestManager9();if(e){var n={extra_data:{transport_retries:this.$VideoUploadPostRequestManager5}};e.logEvent(r("VideoUploadLogger").EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE,n)}this.$VideoUploadPostRequestManager3===0||this.$VideoUploadPostRequestManager5>=this.$VideoUploadPostRequestManager3?this.$VideoUploadPostRequestManager26(t):(this.$VideoUploadPostRequestManager5++,this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager4,this.$VideoUploadPostRequestManager5)))},n})(r("mixin")(n("cr:909282"))),u=s;l.default=u}),98);
__d("VideoUploadRequestContext",[],(function(t,n,r,o,a,i){var e=(function(){function e(){var e=this;this.$14=!1,this.$21=0,this.$22=!1,this.$23=!1,this.$26=!1,this.getComposerEntryPointRef=function(){return e.$11},this.reset()}var t=e.prototype;return t.setFile=function(t){return this.$1=t,this},t.getFile=function(){return this.$1},t.setMetadata=function(t){return this.$24=t,this},t.getMetadata=function(){return this.$24},t.setVideoID=function(t){return this.$2=t,this},t.getVideoID=function(){return this.$2},t.setXPVAssetID=function(t){return this.$29=t,this},t.getXPVAssetID=function(){return this.$29},t.setIsXPVSingleProd=function(t){return this.$30=t,this},t.getIsXPVSingleProd=function(){return this.$30},t.setUploadSessionID=function(t){return this.$3=t,this},t.getUploadSessionID=function(){return this.$3},t.setFbRegion=function(t){return this.$4=t,this},t.getFbRegion=function(){return this.$4},t.setStartOffset=function(t){return this.$5=t,this},t.getStartOffset=function(){return this.$5},t.setEndOffset=function(t){return this.$6=t,this},t.getEndOffset=function(){return this.$6},t.setPartitionStartOffset=function(t){return this.$17=t,this},t.getPartitionStartOffset=function(){return this.$17},t.setPartitionEndOffset=function(t){return this.$18=t,this},t.getPartitionEndOffset=function(){return this.$18},t.setPartitionNo=function(t){return this.$19=t,this},t.getPartitionNo=function(){return this.$19},t.setTargetID=function(t){return this.$7=t,this},t.getTargetID=function(){return this.$7},t.setSource=function(t){return this.$8=t,this},t.setComposerDialogVersion=function(t){return this.$9=t,this},t.getComposerDialogVersion=function(){return this.$9},t.getSource=function(){return this.$8},t.setWaterfallID=function(t){return this.$10=t,this},t.getWaterfallID=function(){return this.$10},t.setComposerEntryPointRef=function(t){return this.$11=t,this},t.setComposerWorkSharedDraftMode=function(t){return this.$12=t,this},t.getComposerWorkSharedDraftMode=function(){return this.$12},t.setHasFileBeenReplaced=function(t){return this.$14=t,this},t.getHasFileBeenReplaced=function(){return this.$14},t.setSupportsChunking=function(t){return this.$15=t,this},t.getSupportsChunking=function(){return this.$15},t.setSupportsFileAPI=function(t){return this.$16=t,this},t.getSupportsFileAPI=function(){return this.$16},t.setCreatorProduct=function(t){return this.$20=t,this},t.getCreatorProduct=function(){return this.$20},t.setLastKnownUploadSpeed=function(t){return this.$21=t,this},t.getLastKnownUploadSpeed=function(){return this.$21||0},t.setUseParallelChunks=function(t){return this.$22=t,this},t.getUseParallelChunks=function(){return this.$22},t.setIsSphericalVideo=function(t){return this.$23=t,this},t.getIsSphericalVideo=function(){return this.$23},t.setSphericalMetadata=function(t){return this.$25=t,this},t.getSphericalMetadata=function(){return this.$25},t.setEnableOmnistab=function(t){return this.$26=t,this},t.getEnableOmnistab=function(){return this.$26},t.setClientChunkSize=function(t){return this.$27=t,this},t.getClientChunkSize=function(){return this.$27},t.setVideoPublisherActionSource=function(t){return this.$28=t,this},t.getVideoPublisherActionSource=function(){return this.$28},t.setComposerSessionID=function(t){return this.$13=t,this},t.getComposerSessionID=function(){return this.$13},t.setRetryState=function(t){return this.$31=t,this},t.getRetryState=function(){return this.$31},t.setCreativeTools=function(t){return this.$32=t,this},t.getCreativeTools=function(){return this.$32},t.reset=function(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null,this.$12=null,this.$14=!1,this.$15=null,this.$16=null,this.$17=null,this.$18=null,this.$19=null,this.$20=null,this.$21=0,this.$22=!1,this.$23=!1,this.$24={},this.$25={},this.$26=!1,this.$27=null,this.$28={},this.$13=null,this.$31=null,this.$32=null},e})();i.default=e}),66);
__d("MediaUploadSingleAssetPublisher",["Promise","VideoUploadGraphQLPostRequestManager","VideoUploadPostRequestManager","VideoUploadRequestContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){}t.publish=function(n){return t.$1==null&&(t.$1=new t),t.$1.publish(n)};var o=t.prototype;return o.publish=function(r){var t=this;return new(e||(e=n("Promise")))(function(e){var n=t.$2(r.sessionSnapshot,r.assetSnapshot,r.postData),o,a=t.$3(r.postRequestManagerParams);a.hasAPISupport(r.postData)&&(o=a),o==null&&(o=t.$4(r.postRequestManagerParams)),t.$5(o,e),o.sendRequest(n)})},o.$4=function(t){return new(r("VideoUploadPostRequestManager"))(t==null?void 0:t.chunk_post_uri,t==null?void 0:t.post_max_transport_retries,t==null?void 0:t.post_transport_retry_interval_base,t==null?void 0:t.post_max_server_retries,t==null?void 0:t.post_server_retry_interval_base)},o.$3=function(t){var e,n,o,a;return new(r("VideoUploadGraphQLPostRequestManager"))((e=t==null?void 0:t.post_max_transport_retries)!=null?e:0,(n=t==null?void 0:t.post_transport_retry_interval_base)!=null?n:0,(o=t==null?void 0:t.post_max_server_retries)!=null?o:0,(a=t==null?void 0:t.post_server_retry_interval_base)!=null?a:0)},o.$5=function(t,n){t.subscribe("request-finished",function(e,t){var r={event:e,payload:t};n({isSuccessful:!0,rawResponse:r})}),t.subscribe("request-failed",function(e,t){var r={event:e,payload:t},o=(t==null?void 0:t.error_code)==null||(t==null?void 0:t.error_code)==0?"PublishError":t==null?void 0:t.error_code;n({isSuccessful:!1,errorCode:o,rawErrorObject:t==null?void 0:t.error_object,rawResponse:r})})},o.$2=function(t,n,o){var e;return new(r("VideoUploadRequestContext"))().setVideoID(n.videoID).setTargetID(n.request.attributes.targetID).setSource(t.entryPoint.sourceType).setWaterfallID(t.sessionID).setCreatorProduct(n.request.attributes.creatorProduct).setComposerEntryPointRef(t.entryPoint.entryPointRef).setComposerDialogVersion(n.request.attributes.composerDialogVersion).setHasFileBeenReplaced((e=n.request.attributes.hasFileBeenReplaced)!=null?e:!1).setSupportsChunking(!0).setMetadata(o)},t})();l.default=s}),98);
__d("MediaUploadVUShimLogger",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.logEvent=function(t,n){},t.postOnShutdown=function(t){return{remove:function(){}}},t.getWaterfallID=function(){return this.$1},e})();i.default=e}),66);
__d("MediaUploadVUShimSession",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadCancelReason","MediaUploadFBSDK","MediaUploadFBStage","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadSingleAssetPublisher","MediaUploadStageEvent","MediaUploadVUShimLogger","MediaUploadVUShimSurface","Promise","WaterfallIDGenerator","cr:909282","mixin"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(t){function a(e,n){var a,i;return i=t.call(this)||this,i.sessionID=o("WaterfallIDGenerator").generate(),i.$MediaUploadVUShimSession$p_1=e,i.$MediaUploadVUShimSession$p_3=(a=e.waterfall_id)!=null?a:i.sessionID,i.$MediaUploadVUShimSession$p_6=n,i.$MediaUploadVUShimSession$p_5=new(r("MediaUploadVUShimLogger"))(i.$MediaUploadVUShimSession$p_3),i.$MediaUploadVUShimSession$p_10=!i.$MediaUploadVUShimSession$p_1.background_upload,i}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.createTestLogger=function(){},i.getLogger=function(){return this.$MediaUploadVUShimSession$p_5},i.start=function(t){var e=this;this.inform("set-waterfall-id",{waterfallID:this.$MediaUploadVUShimSession$p_3});var n=r("MediaUploadVUShimSurface").createAssetRequest(function(e){var n=t.getFile(),o=t.getFileInput();if(n!=null)return e.createFromFile(n);if(o!=null){var a=e.createFromHTMLInput(o);if(a.dataAsFile()==null)throw r("MediaUploadFBSDK").createThrowableError("Cannot get File from the HTML input element");return a}else throw r("MediaUploadFBSDK").createThrowableError("Invalid video upload file, it contains only null objects")},t.getStableAssetID(),function(t){var n,r;return{targetID:(n=e.$MediaUploadVUShimSession$p_4)!=null?n:e.$MediaUploadVUShimSession$p_1.target_id,composerSessionID:e.$MediaUploadVUShimSession$p_2,actorID:e.$MediaUploadVUShimSession$p_1.as_actor_id,composerDialogVersion:"V2",publisherActionSource:e.$MediaUploadVUShimSession$p_1.video_publisher_action_source,creatorProduct:((r=t.dataAsFile())==null?void 0:r.extension)==="gif"?4:2}});this.$MediaUploadVUShimSession$p_9=n,this.$MediaUploadVUShimSession$p_6.startUploads(this.sessionID,[n]),this.$MediaUploadVUShimSession$p_10&&this.$MediaUploadVUShimSession$p_6.confirmSession(this.sessionID,[n],function(e){return e.set("dummyPublish",!0)})},i.setTargetID=function(t){this.$MediaUploadVUShimSession$p_4=t},i.setComposerSessionID=function(t){this.$MediaUploadVUShimSession$p_2=t},i.post=function(t){this.$MediaUploadVUShimSession$p_10?r("MediaUploadFBSDK").reportRecoverableError("Video upload client configured for pessimistic upload and explicit publish calls are now allowed"):this.$MediaUploadVUShimSession$p_9!=null&&this.$MediaUploadVUShimSession$p_6.confirmSession(this.sessionID,[this.$MediaUploadVUShimSession$p_9],function(e){return e.set("postData",t)})},i.cancel=function(t){this.$MediaUploadVUShimSession$p_6.cancelSession(this.sessionID,r("MediaUploadCancelReason").USER_REQUEST)},i.abandon=function(t){this.$MediaUploadVUShimSession$p_6.cancelSession(this.sessionID,r("MediaUploadCancelReason").USER_REQUEST)},i.isPostInProgress=function(){var e;return((e=this.$MediaUploadVUShimSession$p_7)==null?void 0:e.status)===r("MediaUploadSessionStatus").PUBLISHING},i.isInProgress=function(){var e,t;return((e=this.$MediaUploadVUShimSession$p_8)==null?void 0:e.status)===r("MediaUploadAssetStatus").PROCESSING||((t=this.$MediaUploadVUShimSession$p_8)==null?void 0:t.status)===r("MediaUploadAssetStatus").UPLOADING},i.getHasUploadFinished=function(){var e;return((e=this.$MediaUploadVUShimSession$p_8)==null?void 0:e.status)===r("MediaUploadAssetStatus").COMPLETED},i.getVideoID=function(){var e;return(e=this.$MediaUploadVUShimSession$p_8)==null?void 0:e.videoID},i.getUploadTime=function(){var e,t,n=(e=this.$MediaUploadVUShimSession$p_8)==null||(e=e.uploadSummary)==null?void 0:e.startedAtMs,r=(t=this.$MediaUploadVUShimSession$p_8)==null||(t=t.uploadSummary)==null?void 0:t.finishedAtMs;return n!=null&&r!=null?r-n:null},i.getExPartitionNumber=function(t){return 0},i.getIsSphericalVideo=function(){var e,t;return(e=(t=this.$MediaUploadVUShimSession$p_8)==null||(t=t.metadata)==null?void 0:t.isSpherical)!=null?e:!1},i.startFlow=function(){this.$MediaUploadVUShimSession$p_10?r("MediaUploadFBSDK").reportRecoverableError("Video upload client configured for pessimistic upload and explicit publish calls are now allowed"):this.$MediaUploadVUShimSession$p_9!=null&&this.$MediaUploadVUShimSession$p_6.confirmSession(this.sessionID,[this.$MediaUploadVUShimSession$p_9])},i.sessionUpdated=function(t,n){var e,o;this.$MediaUploadVUShimSession$p_7=n;var a=n.extras.getUnsafe("postData");if(a!=null){var i=n.publishingResponse;switch(t){case r("MediaUploadSessionEvent").PUBLISH_STARTED:this.inform("post-started",a);break;case r("MediaUploadSessionEvent").PUBLISH_SUCCEED:this.inform("post-finished",babelHelpers.extends({},(e=i==null?void 0:i.payload)!=null?e:{},a));break;case r("MediaUploadSessionEvent").PUBLISH_FAILED:this.inform("post-failed",(o=i==null?void 0:i.payload)!=null?o:{});break;default:}}},i.assetUpdated=function(t,n,o){var e,a,i,l,s,u,c,d,m,p,_,f,g;this.$MediaUploadVUShimSession$p_7=n,this.$MediaUploadVUShimSession$p_8=o;var h,y,C=(e=(a=o.asset.dataAsFile())==null?void 0:a.size)!=null?e:0,b=(i=(l=o.uploadSummary)==null?void 0:l.skippedUpload)!=null?i:!1;switch(t){case r("MediaUploadAssetEvent").ASSET_ADDED:h="upload-requested";break;case r("MediaUploadAssetEvent").ASSET_STARTED:h="upload-started";break;case r("MediaUploadAssetEvent").ASSET_REMOVED:h="upload-canceled";break;case r("MediaUploadAssetEvent").ASSET_PROGRESS:h="upload-progressed",y={start_offset:0,end_offset:C,file_size:C,sent_bytes:b?C:(s=(u=o.uploadSummary)==null?void 0:u.uploadedBytes)!=null?s:0,video_id:o.videoID,upload_domain:o.uploadServiceDomain,skip_upload:b,transport_retries:o.retries.totalRetryAttempts};break;case r("MediaUploadAssetEvent").ASSET_SUCCEED:h="upload-finished",y={start_offset:0,end_offset:C,video_id:o.videoID,is_spherical_video:(c=o==null||(d=o.metadata)==null?void 0:d.isSpherical)!=null?c:!1};break;case r("MediaUploadAssetEvent").ASSET_FAILED:h="upload-failed",y={error_code:(m=o.lastAction)==null?void 0:m.rawErrorCode,error_summary:(p=o.lastAction)==null||(p=p.displayError)==null?void 0:p.summary,error_description:(_=o.lastAction)==null||(_=_.displayError)==null?void 0:_.description,error_is_transient:(f=o.lastAction)==null||(f=f.errorAttributes)==null?void 0:f.transientError,upload_domain:o.uploadServiceDomain,www_request_id:(g=o.lastAction)==null?void 0:g.networkRequestID};break;default:}h!=null&&this.inform(h,y)},i.stageUpdated=function(t,n,o,a){if(this.$MediaUploadVUShimSession$p_7=o,this.$MediaUploadVUShimSession$p_8=a,t===r("MediaUploadStageEvent").STAGE_SUCCEED&&n===r("MediaUploadFBStage").METADATA_EXTRACTION){var e;if(a.metadata!=null){var i,l=a.metadata,s=l.durationMs==null?void 0:l.durationMs/1e3;e={format:{duration:s,isSpherical:(i=l.isSpherical)!=null?i:!1},metadata:{},streams:{numAudioTracks:1,primaryVideo:{type:"video",width:l.width,height:l.height,duration:s},primaryAudio:{type:"audio",duration:s}}}}else e=null;this.inform("metadata-parsed",e)}},i.triggerPublish=function(o,a){var t;this.$MediaUploadVUShimSession$p_7=o,this.$MediaUploadVUShimSession$p_8=a[0];var i=(t=o.extras.getBoolean("dummyPublish"))!=null?t:!1,l=o.extras.getUnsafe("postData");return i?(e||(e=n("Promise"))).resolve({isSuccessful:!0}):l==null?(e||(e=n("Promise"))).resolve({isSuccessful:!1,errorCode:"MISSING_POST_DATA"}):r("MediaUploadSingleAssetPublisher").publish({sessionSnapshot:o,assetSnapshot:a[0],postData:l,postRequestManagerParams:this.$MediaUploadVUShimSession$p_1})},a})(r("mixin")(n("cr:909282")));l.default=s}),98);
__d("MediaUploadOperationOutcome",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SUCCESS","CANCELED","FAILED_NON_TRANSIENT","FAILED_NO_MORE_RETRIES","FAILED_OUT_OF_TIME"]),l=e;i.default=l}),66);
__d("MediaUploadCancelablePromise",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l={cancel:function(){}},s=(function(){function t(t){var r=this;this.$1=!1,this.promise=new(e||(e=n("Promise")))(function(e,n){r.$2=t(e,n),r.$2==null&&(r.$2=l),r.$1&&r.$2.cancel()})}t.resolve=function(n){return new t(function(e){e(n)})};var r=t.prototype;return r.then=function(n){var e=this;return new t(function(r,o){var a={cancelable:e};return e.promise.then(function(r){if(a.cancelable=l,e.$1)return r;var o=n(r);return o instanceof t?(a.cancelable=o,o.promise):o}).then(r).catch(function(){a.cancelable=l,o.apply(void 0,arguments)}),{cancel:function(){a.cancelable.cancel()}}})},r.isCanceled=function(){return this.$1},r.cancel=function(){if(!this.$1){var e;this.$1=!0,(e=this.$2)==null||e.cancel()}},t})();i.default=s}),66);
__d("MediaUploadPipeline",["MediaUploadCancelablePromise","MediaUploadOperationOutcome"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){var n=this;this.$2=[],this.$3=null,this.$2=e,this.$1=t,this.cancelablePromise=new(r("MediaUploadCancelablePromise"))(function(e,t){return n.$4(e,t,[].concat(n.$2)),{cancel:function(){var t;(t=n.$3)==null||t.cancel(),n.$3=null,e(r("MediaUploadOperationOutcome").CANCELED)}}})}var t=e.prototype;return t.$4=function(t,n,o){var e=this;if(o.length===0)this.$3=null,t(r("MediaUploadOperationOutcome").SUCCESS);else{var a=o.shift(),i=a();this.$1.promiseTerminator(i.promise.then(function(a){e.cancelablePromise.isCanceled()?t(r("MediaUploadOperationOutcome").CANCELED):a===r("MediaUploadOperationOutcome").SUCCESS?e.$4(t,n,o):t(a)}).catch(n)),this.$3=i}},e})(),s=(function(){function t(e){this.$2=[],this.$1=e}var n=t.prototype;return n.addCancelableStep=function(t){this.$2.push(t)},n.addPlainStep=function(t){this.$2.push(function(){return new(r("MediaUploadCancelablePromise"))(function(e){e(t())})})},n.run=function(){var t=new e(this.$2,this.$1);return t.cancelablePromise},t})();l.default=s}),98);
__d("MediaUploadAssetStrategy",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadOperationOutcome","MediaUploadPipeline","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e.implementation,this.$2=e.executor,this.$3=e.params}var o=t.prototype;return o.removeAsset=function(t){var e;t.updateStatusAndEmit(r("MediaUploadAssetStatus").REMOVED),(e=t.inFlightUpload)==null||e.cancel()},o.addAsset=function(t){t.sessionContext.assetsByID.set(t.assetID,t),t.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_ADDED)},o.scheduleUpload=function(t){var e=this;return t.updateStatusAndEmit(r("MediaUploadAssetStatus").SCHEDULED),this.$2.schedule(function(){return e.$4(t)})},o.$4=function(o){var t=this;if(o.isRemoved())return(e||(e=n("Promise"))).resolve();o.updateStatusAndEmit(r("MediaUploadAssetStatus").PROCESSING);var a=new(r("MediaUploadPipeline"))(this.$3);a.addCancelableStep(function(){return t.$1.runClientLazyLoading(o)}),a.addCancelableStep(function(){return t.$1.runLocalAssetStategy(o)}),a.addCancelableStep(function(){return o.updateStatusAndEmit(r("MediaUploadAssetStatus").UPLOADING),t.$1.runNetworkAssetStategy(o)});var i=a.run();return o.inFlightUpload=i,i.promise.then(function(e){return t.$5(o,e)}).catch(function(e){t.$3.reportRecoverableError("Unexpected failure during asset pipeline execution",e),o.updateStatusAndEmit(r("MediaUploadAssetStatus").FAILED)})},o.$5=function(t,n){if(!t.isRemoved())switch(n){case r("MediaUploadOperationOutcome").SUCCESS:t.updateStatusAndEmit(r("MediaUploadAssetStatus").COMPLETED);break;case r("MediaUploadOperationOutcome").CANCELED:t.updateStatusAndEmit(r("MediaUploadAssetStatus").REMOVED);break;default:t.updateStatusAndEmit(r("MediaUploadAssetStatus").FAILED)}},t})();l.default=s}),98);
__d("MediaUploadRetryState",["MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.retryPolicy=e,this.$3=0,this.$4=0,this.$1=t.currentTimeProvider,this.$2=t.randomNumberProvider,this.$5=this.$1()}var t=e.prototype;return t.resetBackoff=function(){this.$3=0},t.getRetryAttempts=function(){return this.$4},t.getRetryAttemptsSinceLastReset=function(){return this.$3},t.calculateBackoffDelay=function(){var e=this.retryPolicy.backoff,t=o("MediaUploadTime").timeToMilliseconds(e.initial),n=e.expBase,r=e.expMultiplier;this.$3>0&&n!=null&&r!=null&&(t+=o("MediaUploadTime").timeToMilliseconds(n)*Math.pow(r,this.$3-1)),e.max!=null&&(t=Math.min(t,o("MediaUploadTime").timeToMilliseconds(e.max)));var a=e.jitter==null?0:o("MediaUploadTime").timeToMilliseconds(e.jitter);return a>0&&(t+=this.$2(-.5*a,.5*a)),o("MediaUploadTime").millisecondsToTime(Math.round(t))},t.exceedTotalRetries=function(){var e;return((e=this.retryPolicy.limits)==null?void 0:e.totalRetryCount)!=null&&this.$4>this.retryPolicy.limits.totalRetryCount},t.exceedTotalDuration=function(){var e,t;return((e=this.retryPolicy.limits)==null?void 0:e.totalTime)!=null&&o("MediaUploadTime").compareTime((t=this.retryPolicy.limits)==null?void 0:t.totalTime,o("MediaUploadTime").subtractTime(this.$1(),this.$5))<=0},t.increaseRetryAttemptCounter=function(){this.$3++,this.$4++},e})();l.default=e}),98);
__d("MediaUploadClientResult",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ACCEPTED","SESSION_NOT_FOUND","ASSET_NOT_FOUND","ASSET_ALREADY_EXISTS","SESSION_ALREADY_CANCELED","SESSION_ALREADY_PUBLISHING","SESSION_ALREADY_PUBLISHED","SESSION_NOT_FAILED","INVALID_TYPE","UNSUPPORTED_BROWSER"]),l=e;i.default=l}),66);
__d("MediaUploadSessionStrategy",["MediaUploadCancelReason","MediaUploadClientResult","MediaUploadSessionEvent","MediaUploadSessionStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.implementation,this.$2=e.assetStrategy,this.$3=e.params}var t=e.prototype;return t.$4=function(t){if(t.isConfirmed()&&t.progress.publishingExtrasProvided){var e=t.getActiveAssets();for(var n of e)if(n.isFailed()){t.updateStatusAndEmit(r("MediaUploadSessionStatus").FAILED);return}e.every(function(e){return e.isCompleted()})&&this.$5(t)}},t.$5=function(t){t.updateStatusAndEmit(r("MediaUploadSessionStatus").PUBLISHING);var e=[];for(var n of t.assetsByID.values())n.isCompleted()&&e.push(n);var o=this.$1.publish(t,e).then(function(e){t.progress.publishingResponse=e.rawResponse,e.isSuccessful?(t.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_SUCCEED),t.updateStatusAndEmit(r("MediaUploadSessionStatus").COMPLETED)):(t.updateLastError({rawErrorCode:e.errorCode,rawErrorObject:e.rawErrorObject}),t.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_FAILED),t.updateStatusAndEmit(r("MediaUploadSessionStatus").FAILED),t.updateLastError())}).catch(function(e){t.updateLastError({rawErrorObject:e}),t.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_FAILED),t.updateStatusAndEmit(r("MediaUploadSessionStatus").FAILED),t.updateLastError()});this.$3.promiseTerminator(o)},t.$6=function(t,n){var e=this;this.$2.scheduleUpload(n).finally(function(){return e.$4(t)})},t.$7=function(t){return t.isPublished()?r("MediaUploadClientResult").SESSION_ALREADY_PUBLISHED:t.isPublishing()?r("MediaUploadClientResult").SESSION_ALREADY_PUBLISHING:t.isCanceled()?r("MediaUploadClientResult").SESSION_ALREADY_CANCELED:r("MediaUploadClientResult").ACCEPTED},t.$8=function(t){var e=this;t.releaseOnFinish.push(this.$3.registerUnloadHook(function(){e.cancel(t,r("MediaUploadCancelReason").UNLOAD_HOOK)})),t.updateStatusAndEmit(r("MediaUploadSessionStatus").CONFIRMED)},t.cancel=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;t.progress.cancelReason=n,t.updateStatusAndEmit(r("MediaUploadSessionStatus").CANCELED);for(var o of t.assetsByID.values())this.$2.removeAsset(o);return r("MediaUploadClientResult").ACCEPTED},t.removeAsset=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;var o=t.assetsByID.get(n);return o==null?r("MediaUploadClientResult").ASSET_NOT_FOUND:(this.$2.removeAsset(o),this.$4(t),r("MediaUploadClientResult").ACCEPTED)},t.uploadAsset=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;var o=t.assetsByID.get(n.assetID);if(o!=null&&!o.isRemoved())return r("MediaUploadClientResult").ASSET_ALREADY_EXISTS;var a=this.$1.createAssetContext(t,n);return this.$2.addAsset(a),this.$6(t,a),r("MediaUploadClientResult").ACCEPTED},t.syncAssetUploads=function(t,n){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;var o=new Set(n.map(function(e){return e.assetID})),a=new Set(t.assetsByID.keys());for(var i in a)if(!o.has(i)){var l=t.assetsByID.get(i);l!=null&&this.$2.removeAsset(l)}return this.uploadAssets(t,n),r("MediaUploadClientResult").ACCEPTED},t.uploadAssets=function(t,n){var e=this,r={};return n.forEach(function(n){return r[n.assetID]=e.uploadAsset(t,n)}),r},t.updateSessionExtras=function(t,n,o){var e=this.$7(t);return e!==r("MediaUploadClientResult").ACCEPTED?e:(n(t.extras),o&&(t.progress.publishingExtrasProvided=!0),r("MediaUploadClientResult").ACCEPTED)},t.retry=function(t){var e=this.$7(t);if(e!==r("MediaUploadClientResult").ACCEPTED)return e;if(!t.isFailed())return r("MediaUploadClientResult").SESSION_NOT_FAILED;t.renewRetryID(),this.$8(t);for(var n of t.assetsByID.values())n.isSchedulable()&&this.$6(t,n);return this.$4(t),r("MediaUploadClientResult").ACCEPTED},t.confirm=function(t){var e=this.$7(t);return e!==r("MediaUploadClientResult").ACCEPTED?e:t.isFailed()?this.retry(t):t.isConfirmed()?(this.$4(t),r("MediaUploadClientResult").ACCEPTED):(this.$8(t),this.$4(t),r("MediaUploadClientResult").ACCEPTED)},e})();l.default=e}),98);
__d("MediaUploadClientContext",["MediaUploadAssetStrategy","MediaUploadRetryState","MediaUploadSessionStrategy"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.sdk=e.sdk,this.emitter=e.emitter,this.executor=e.executor,this.progressCalculator=e.progressCalculator,this.assetStrategy=new(r("MediaUploadAssetStrategy"))({implementation:this,executor:this.executor,params:this.sdk}),this.sessionStrategy=new(r("MediaUploadSessionStrategy"))({implementation:this,assetStrategy:this.assetStrategy,params:this.sdk})}var t=e.prototype;return t.runLocalAssetStategy=function(t){throw this.sdk.createThrowableError("Not implemented")},t.runNetworkAssetStategy=function(t){throw this.sdk.createThrowableError("Not implemented")},t.runClientLazyLoading=function(t){throw this.sdk.createThrowableError("Not implemented")},t.createSessionContext=function(t){throw this.sdk.createThrowableError("Not implemented")},t.createAssetContext=function(t,n){throw this.sdk.createThrowableError("Not implemented")},t.publish=function(t,n){throw this.sdk.createThrowableError("Not implemented")},t.subscribeToHooks=function(){throw this.sdk.createThrowableError("Not implemented")},t.createRetryState=function(){return new(r("MediaUploadRetryState"))(this.sdk.retryPolicyProvider(),this.sdk)},e})();l.default=e}),98);
__d("MediaUploadBytesSummary",["MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.reset=function(){this.$2=null},t.updateForUploadStart=function(t){var e=this.$1.currentTimeProvider();this.$2={fullyCompleted:!1,startedAt:e,updatedAt:e,totalBytes:t,uploadedBytes:0,skippedUpload:!1}},t.updateForUploadSkip=function(t){var e=this.$1.currentTimeProvider();this.$2={fullyCompleted:!0,startedAt:e,updatedAt:e,finishedAt:e,totalBytes:t,uploadedBytes:t,skippedUpload:!0}},t.updateForProgress=function(t){var e=this.$2;if(e==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}e.uploadedBytes=t,e.updatedAt=this.$1.currentTimeProvider()},t.updateForUploadComplete=function(){var e=this.$2;if(e==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}this.updateForProgress(e.totalBytes),e.fullyCompleted=!0,e.uploadedBytes=e.totalBytes},t.updateForUploadAbandoned=function(){var e=this.$2;if(e==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}e.finishedAt=this.$1.currentTimeProvider()},t.computeSpeedBps=function(){var e=this.$2;if(e==null||e.skippedUpload)return null;var t=o("MediaUploadTime").timeToSeconds(o("MediaUploadTime").subtractTime(e.updatedAt,e.startedAt));return t>.1?e.uploadedBytes/t:0},t.computeUploadedPortion=function(){var e=this.$2;return e==null?null:e.fullyCompleted?1:e.totalBytes===0?0:1*e.uploadedBytes/e.totalBytes},t.computeSnapshot=function(){var e=this.$2;return e==null?null:{uploadedBytes:e.uploadedBytes,speedBps:this.computeSpeedBps(),skippedUpload:e.skippedUpload,startedAtMs:o("MediaUploadTime").timeToMilliseconds(e.startedAt),finishedAtMs:o("MediaUploadTime").maybeTimeToMilliseconds(e.finishedAt)}},e})();l.default=e}),98);
__d("MediaUploadAssetContext",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadBytesSummary","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.sessionContext,n=e.assetRequest,o=e.emitter,a=e.progressCalculator,i=e.retryState,l=e.params;this.sessionContext=t,this.request=n,this.assetID=n.assetID,this.asset=n.asset,this.retryState=i,this.$2=o,this.$3=a,this.$1=l.currentTimeProvider,this.$4=r("MediaUploadAssetStatus").REQUESTED,this.createdAt=this.$1(),this.uploadSummary=new(r("MediaUploadBytesSummary"))(l),this.progress={completedStages:new Set,calculated:{rawValue:0,percentageComplete:0}}}var t=e.prototype;return t.emitAssetEvent=function(t){this.$2.emitAssetEvent(t,this),(t===r("MediaUploadAssetEvent").ASSET_SUCCEED||t===r("MediaUploadAssetEvent").ASSET_REMOVED)&&this.recalculateProgressAndEmit()},t.emitStageEvent=function(t,n){this.$2.emitStageEvent(t,this,n),t===r("MediaUploadStageEvent").STAGE_SUCCEED&&(this.progress.completedStages.add(n),this.recalculateProgressAndEmit()),t===r("MediaUploadStageEvent").STAGE_PROGRESS&&this.recalculateProgressAndEmit()},t.emitStageEventForOperationOutcome=function(t,n){t===r("MediaUploadOperationOutcome").SUCCESS?this.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,n):t===r("MediaUploadOperationOutcome").CANCELED?this.emitStageEvent(r("MediaUploadStageEvent").STAGE_CANCELED,n):this.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,n)},t.recalculateProgressAndEmit=function(){var e=this.$3.calculateAssetProgress(this);this.sessionContext.recalculateProgressAndEmit(),e&&this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_PROGRESS)},t.$5=function(){this.uploadSummary.reset(),this.progress.completedStages.clear(),this.recalculateProgressAndEmit()},t.updateStatusAndEmit=function(t){if(this.$4!==t)switch(this.$4=t,t){case r("MediaUploadAssetStatus").REMOVED:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_REMOVED);break;case r("MediaUploadAssetStatus").FAILED:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_FAILED);break;case r("MediaUploadAssetStatus").COMPLETED:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_SUCCEED);break;case r("MediaUploadAssetStatus").PROCESSING:this.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_STARTED);break;case r("MediaUploadAssetStatus").UPLOADING:this.progress.lastAttemptStartedAt=this.$1();break;case r("MediaUploadAssetStatus").REQUESTED:case r("MediaUploadAssetStatus").SCHEDULED:this.$5();break}},t.isCompleted=function(){return this.$4===r("MediaUploadAssetStatus").COMPLETED},t.isSchedulable=function(){return this.$4===r("MediaUploadAssetStatus").REQUESTED||this.$4===r("MediaUploadAssetStatus").FAILED},t.isRemoved=function(){return this.$4===r("MediaUploadAssetStatus").REMOVED},t.isFailed=function(){return this.$4===r("MediaUploadAssetStatus").FAILED},t.__composeBaseSnapshot=function(){return{asset:this.asset,assetID:this.assetID,status:this.$4,createdAtMs:o("MediaUploadTime").timeToMilliseconds(this.createdAt),lastUploadStartedAtMs:o("MediaUploadTime").maybeTimeToMilliseconds(this.progress.lastAttemptStartedAt),metadata:this.metadata==null?void 0:{width:this.metadata.width,height:this.metadata.height,isSpherical:this.metadata.isSpherical,durationMs:o("MediaUploadTime").maybeTimeToMilliseconds(this.metadata.duration)},retries:{totalRetryAttempts:this.retryState.getRetryAttempts()},uploadSummary:this.uploadSummary.computeSnapshot(),percentageComplete:this.progress.calculated.percentageComplete}},e})();l.default=e}),98);
__d("MediaUploadExtrasStorage",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$2=new Map,this.$1=e}var t=e.prototype;return t.setFromObject=function(t){for(var e of Object.keys(t))this.set(e,t[e]);return this},t.set=function(t,n){return this.$2.set(t,n),this},t.getNumber=function(t){var e=this.getUnsafe(t);return e==null||typeof e=="number"?e:(this.$1.reportRecoverableError("Requested key "+t+" as number, but it was "+typeof e),null)},t.getString=function(t){var e=this.getUnsafe(t);return e==null||typeof e=="string"?e:(this.$1.reportRecoverableError("Requested key "+t+" as string, but it was "+typeof e),null)},t.getBoolean=function(t){var e=this.getUnsafe(t);return e==null||typeof e=="boolean"?e:(this.$1.reportRecoverableError("Requested key "+t+" as boolean, but it was "+typeof e),null)},t.getUnsafe=function(t){return this.$2.get(t)},t.getClassInstance=function(t,n){var e=this.getUnsafe(t);return e==null||e instanceof n?e:(this.$1.reportRecoverableError("Requested key "+t+" as "+String(n)+", but it was something else"),null)},e})();i.default=e}),66);
__d("MediaUploadFBAssetContext",["ErrorNormalizeUtils","MediaUploadAssetContext","MediaUploadExtrasStorage","MediaUploadStageEvent","MediaUploadTime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.request=t.assetRequest,n.sessionContext=t.sessionContext,n.processing={rawData:new(r("MediaUploadExtrasStorage"))(t.params)},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.recordStageOutcome=function(t){var e=t.stage,n=t.outcome,o=t.rawErrorCode,a=t.rawErrorObject,i=t.displayError,l=t.errorAttributes,s=t.networkRequestID,u=a==null?void 0:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")(a));this.$MediaUploadFBAssetContext$p_1={stage:e,outcome:n,rawErrorCode:o,errorObject:u,displayError:i,errorAttributes:l,networkRequestID:s}},n.emitStageEvent=function(n,o){n===r("MediaUploadStageEvent").STAGE_STARTED&&(this.$MediaUploadFBAssetContext$p_1=null),e.prototype.emitStageEvent.call(this,n,o)},n.composeSnapshot=function(){var e=this.__composeBaseSnapshot();return babelHelpers.extends({},e,{videoID:this.videoID,request:this.request,uploadServiceDomain:this.processing.uploadServiceDomain,hash:this.processing.pseudoHash==null?null:{hashValue:this.processing.pseudoHash.hashValue,calculationTimeCostMs:o("MediaUploadTime").timeToMilliseconds(this.processing.pseudoHash.calculationTimeCost)},lastAction:this.$MediaUploadFBAssetContext$p_1})},t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided asset context has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadAssetContext"));l.default=e}),98);
__d("MediaUploadClientEventContext",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n){this.startedAt=t.currentTimeProvider(),this.entryPoint=n};i.default=e}),66);
__d("MediaUploadSessionContext",["MediaUploadExtrasStorage","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set([r("MediaUploadSessionStatus").COMPLETED,r("MediaUploadSessionStatus").CANCELED,r("MediaUploadSessionStatus").FAILED]),s=(function(){function t(e){var t=e.sessionID,n=e.emitter,o=e.progressCalculator,a=e.params;this.assetsByID=new Map,this.sessionID=t,this.$1=n,this.$2=o,this.extras=new(r("MediaUploadExtrasStorage"))(a),this.$4=a.currentTimeProvider,this.$5=a.randomStringProvider,this.$6=r("MediaUploadSessionStatus").UNCONFIRMED,this.$3={createdAt:this.$4()},this.progress={retryID:this.$5(),publishingExtrasProvided:!1,publishingDone:!1,percentageComplete:0},this.releaseOnFinish=[]}var n=t.prototype;return n.emitSessionEvent=function(t){this.$1.emitSessionEvent(t,this),t===r("MediaUploadSessionEvent").PUBLISH_SUCCEED&&(this.progress.publishingDone=!0,this.recalculateProgressAndEmit()),t===r("MediaUploadSessionEvent").SESSION_FINISHED&&this.$7()},n.renewRetryID=function(){this.progress.retryID=this.$5()},n.updateLastError=function(t){this.__lastError=t},n.recalculateProgressAndEmit=function(){this.$2.calculateSessionProgress(this)&&this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_PROGRESS)},n.$7=function(){for(;this.releaseOnFinish.length>0;){var e=this.releaseOnFinish.pop();e.cancel()}},n.updateStatusAndEmit=function(n){if(this.$6!==n)switch(this.$6=n,this.progress.terminalStatus==null&&e.has(n)&&(this.progress.terminalStatus=n,this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_FINISHED)),n){case r("MediaUploadSessionStatus").CONFIRMED:this.progress.terminalStatus=void 0,this.$3.confirmedAt=this.$4(),this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_CONFIRMED);break;case r("MediaUploadSessionStatus").COMPLETED:this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_SUCCEED);break;case r("MediaUploadSessionStatus").CANCELED:this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_CANCELED);break;case r("MediaUploadSessionStatus").FAILED:this.emitSessionEvent(r("MediaUploadSessionEvent").SESSION_FAILED);break;case r("MediaUploadSessionStatus").PUBLISHING:this.emitSessionEvent(r("MediaUploadSessionEvent").PUBLISH_STARTED);break;default:}},n.getActiveAssets=function(){var e=[];for(var t of this.assetsByID.values())t.isRemoved()||e.push(t);return e},n.isCanceled=function(){return this.$6===r("MediaUploadSessionStatus").CANCELED},n.isPublished=function(){return this.$6===r("MediaUploadSessionStatus").COMPLETED},n.isPublishing=function(){return this.$6===r("MediaUploadSessionStatus").PUBLISHING},n.isConfirmed=function(){return this.$6===r("MediaUploadSessionStatus").CONFIRMED},n.isFailed=function(){return this.$6===r("MediaUploadSessionStatus").FAILED},n.__composeBaseSnapshot=function(){return{sessionID:this.sessionID,retryID:this.progress.retryID,status:this.$6,extras:this.extras,timing:{createdAtMs:o("MediaUploadTime").timeToMilliseconds(this.$3.createdAt),confirmedAtMs:o("MediaUploadTime").maybeTimeToMilliseconds(this.$3.confirmedAt)},terminalStatus:this.progress.terminalStatus,percentageComplete:this.progress.percentageComplete,publishingResponse:this.progress.publishingResponse,cancelReason:this.progress.cancelReason}},t})();l.default=s}),98);
__d("MediaUploadFBSessionContext",["ErrorNormalizeUtils","MediaUploadSessionContext","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,{sessionID:t.sessionID,emitter:t.emitter,progressCalculator:t.progressCalculator,params:t.params})||this,n.entryPoint=t.entryPoint,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.composeSnapshot=function(){var e=this.__composeBaseSnapshot();return babelHelpers.extends({},e,{entryPoint:this.entryPoint,lastError:this.__lastError==null?null:{errorObject:this.__lastError.rawErrorObject==null?null:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")(this.__lastError.rawErrorObject)),rawErrorCode:this.__lastError.rawErrorCode}})},t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided session context has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadSessionContext"));l.default=e}),98);
__d("MediaUploadFBClientEventContext",["ErrorNormalizeUtils","MediaUploadClientEventContext","MediaUploadFBAssetContext","MediaUploadFBSessionContext","MediaUploadTime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t.envParams,t.entryPoint)||this,n.entryPoint=t.entryPoint,t.context!=null&&t.context instanceof r("MediaUploadFBSessionContext")?n.sessionContext=t.context:t.context!=null&&t.context instanceof r("MediaUploadFBAssetContext")&&(n.sessionContext=t.context.sessionContext,n.assetContext=t.context),n}babelHelpers.inheritsLoose(t,e),t.castOrThrow=function(n,r){if(n instanceof t)return n;var e;throw r.createThrowableError('Provided client event context has incorrect type of "'+((e=n.constructor)==null?void 0:e.name)+'"')};var n=t.prototype;return n.composerSnapshot=function(){var e,t,n,a,i=((e=this.errorInfo)==null?void 0:e.rawErrorObject)==null?void 0:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")((t=this.errorInfo)==null?void 0:t.rawErrorObject));return{entryPoint:this.entryPoint,startedAtMs:o("MediaUploadTime").timeToMilliseconds(this.startedAt),sessionSnapshot:(n=this.sessionContext)==null?void 0:n.composeSnapshot(),assetSnapshot:(a=this.assetContext)==null?void 0:a.composeSnapshot(),errorObject:i}},t})(r("MediaUploadClientEventContext"));l.default=e}),98);
__d("MediaUploadEventEmitterAdapter",["EventEmitter","MediaUploadFBAssetContext","MediaUploadFBClientEventContext","MediaUploadFBSessionContext","MediaUploadFBStage"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t},s=(function(){function t(e){this.$2=new(r("EventEmitter")),this.$1=e,this.emitter=this.$3(),this.subscriber=this.$4()}var n=t.prototype;return n.$3=function(){var t=this,n=function(n){var e=r("MediaUploadFBSessionContext").castOrThrow(n,t.$1);return e.composeSnapshot()},o=function(n){var e=r("MediaUploadFBAssetContext").castOrThrow(n,t.$1);return e.composeSnapshot()},a=this.$2,i=function(r){try{for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];a.emit.apply(a,[e(r)].concat(o))}catch(e){t.$1.reportRecoverableError("Session pub/sub chain failed for event "+String(r),e)}};return{emitClientEvent:function(n,o){i(n,r("MediaUploadFBClientEventContext").castOrThrow(o,t.$1).composerSnapshot())},emitSessionEvent:function(t,r){i(t,n(r))},emitAssetEvent:function(t,r){i(t,n(r.sessionContext),o(r))},emitStageEvent:function(a,l,s){var e=r("MediaUploadFBStage").cast(String(s));if(e==null){t.$1.reportRecoverableError("Invalid stage value, it must be MediaUploadFBStage, ignoring");return}i(a,n(l.sessionContext),o(l),e)}}},n.$4=function(){var t=this,n=function(n,r){try{n()}catch(e){t.$1.reportRecoverableError("Stage pub/sub chain failed for event "+r(),e)}};return{addClientEventListener:function(o,a){var r=t.$2.addListener(e(o),function(e){return n(function(){return a(e)},function(){return String(o)})});return{cancel:function(){return r.remove()}}},addSessionEventListener:function(o,a){var r=t.$2.addListener(e(o),function(e){return n(function(){return a(e)},function(){return String(o)})});return{cancel:function(){return r.remove()}}},addAssetEventListener:function(o,a){var r=t.$2.addListener(e(o),function(e,t){return n(function(){return a(e,t)},function(){return String(o)})});return{cancel:function(){return r.remove()}}},addStageEventListener:function(o,a,i){var r=t.$2.addListener(e(o),function(e,t,r){a===r&&n(function(){return i(e,t)},function(){return String(o)+"  "+String(r)})});return{cancel:function(){return r.remove()}}}}},t})();l.default=s}),98);
__d("MediaUploadExecutor",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(e){e===void 0&&(e=1),this.$1=[],this.$3=0,this.$2=e}var r=t.prototype;return r.schedule=function(r){var t=this;return new(e||(e=n("Promise")))(function(e){var n=function(){var t=r();return t.finally(e),t};t.$1.push(n),t.$4()})},r.$4=function(){var e=this;if(!(this.$3>=this.$2||this.$1.length===0)){var t=this.$1.shift();t().finally(function(){e.$3--,e.$4()}),this.$3++}},t})();i.default=l}),66);
__d("MediaUploadAssetRequest",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=t.assetID,n=t.asset,r=t.extras;this.assetID=e,this.asset=n,this.extras=r};i.default=e}),66);
__d("MediaUploadFBAssetRequest",["MediaUploadAssetRequest"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n,r=t.assetID,o=t.asset,a=t.extras,i=t.attributes;return n=e.call(this,{assetID:r,asset:o,extras:a})||this,n.attributes={targetID:i.targetID,actorID:i.actorID,hasFileBeenReplaced:i.hasFileBeenReplaced,composerDialogVersion:i.composerDialogVersion,publisherActionSource:i.publisherActionSource,creatorProduct:i.creatorProduct,composerSessionID:i.composerSessionID},n}return babelHelpers.inheritsLoose(t,e),t.castOrThrow=function(n,r){var e=r.createThrowableError;if(n instanceof t)return n;var o;throw e('Provided asset request has incorrect type of "'+((o=n.constructor)==null?void 0:o.name)+'"')},t})(r("MediaUploadAssetRequest"));l.default=e}),98);
__d("MediaUploadClient",["MediaUploadClientResult"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$4=new Map,this.$1=e.implementation,this.$2=e.sessionStrategy,this.$3=e.envParams,this.$1.subscribeToHooks(),this.$3.isSupported()||this.$3.reportRecoverableError("This browser does not support this version of the Media Upload SDK")}var t=e.prototype;return t.cancelSession=function(t,n){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$4.get(t);return e==null?r("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.cancel(e,n)},t.cleanSession=function(t){return this.$3.isSupported()?this.$4.delete(t)?r("MediaUploadClientResult").ACCEPTED:r("MediaUploadClientResult").SESSION_NOT_FOUND:r("MediaUploadClientResult").UNSUPPORTED_BROWSER},t.retrySession=function(t){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$4.get(t);return e==null?r("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.retry(e)},t.$5=function(t){var e=this.$4.get(t);return e==null&&(e=this.$1.createSessionContext(t),this.$4.set(t,e)),e},t.updateSessionExtras=function(t,n){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$5(t);return this.$2.updateSessionExtras(e,n,!1)},t.confirmSession=function(t,n,o){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$5(t),a;return o!=null&&(a=this.$2.updateSessionExtras(e,o,!0),a!==r("MediaUploadClientResult").ACCEPTED)||(a=this.$2.syncAssetUploads(e,n),a!==r("MediaUploadClientResult").ACCEPTED)?a:this.$2.confirm(e)},t.startUploads=function(t,n){if(!this.$3.isSupported()){var e={};return n.forEach(function(t){return e[t.assetID]=r("MediaUploadClientResult").UNSUPPORTED_BROWSER}),e}var o=this.$5(t);return this.$2.uploadAssets(o,n)},t.removeUpload=function(t,n){if(!this.$3.isSupported())return r("MediaUploadClientResult").UNSUPPORTED_BROWSER;var e=this.$4.get(t);return e==null?r("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.removeAsset(e,n)},e})();l.default=e}),98);
__d("MediaUploadFBClient",["MediaUploadClient"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,t)||this}return babelHelpers.inheritsLoose(t,e),t})(r("MediaUploadClient"));l.default=e}),98);
__d("MediaUploadFBDefaultServerConfigurationRetrieverQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24229633186643574"}),null);
__d("MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql",["MediaUploadFBDefaultServerConfigurationRetrieverQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"source_type"}],t=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],r=[{alias:null,args:null,kind:"ScalarField",name:"service_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_domain",storageKey:null}],o=[{alias:null,args:null,concreteType:"MediaUploadConfiguration",kind:"LinkedField",name:"media_upload_config",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"source_type",variableName:"source_type"}],concreteType:"MediaUploadVideoMetadataValidation",kind:"LinkedField",name:"video_metadata_validation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_size_kb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_size_kb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_duration_secs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_duration_secs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_aspect_ration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_aspect_ration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_extensions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"accept_dimensions_from_player",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkStart",kind:"LinkedField",name:"network_start",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkReceive",kind:"LinkedField",name:"network_receive",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadService",kind:"LinkedField",name:"network_upload_service",plural:!1,selections:[{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTarget",kind:"LinkedField",name:"default",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTarget",kind:"LinkedField",name:"targeted",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTracing",kind:"LinkedField",name:"tracing",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_file_size_kb",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkMonitor",kind:"LinkedField",name:"network_monitor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"network_probe_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internet_probe_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internet_probe_timeout_ms",storageKey:null},{alias:null,args:null,concreteType:"MediaUploadBackoffPolicy",kind:"LinkedField",name:"internet_probe_backoff",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"backoff_initial_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_jitter_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_exp_base_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_exp_multiplier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_max_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limits_total_retry_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limits_total_time_ms",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stall_detection_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stall_detection_timeout_ms",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",selections:o,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",selections:o},params:{id:n("MediaUploadFBDefaultServerConfigurationRetrieverQuery_facebookRelayOperation"),metadata:{},name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("isOndemandHost",[],(function(t,n,r,o,a,i){"use strict";var e=/(^|\.)(od[0-9]+\.\w{4}|\d{4,}\.od|my-od\.|my-od-[0-9]\.)/;function l(t){return e.test(t)}i.default=l}),66);
__d("MediaUploadFBDefaultServerConfigurationRetriever",["MediaUploadCancelablePromise","MediaUploadClientEvent","MediaUploadFBClientEventContext","MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql","MediaUploadOperationOutcome","MediaUploadTime","RelayFBEnvironment","RelayHooks","URI","isOndemandHost","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql"),c={metadataValidation:{minSizeKB:1,maxSizeKB:10*1024*1024,minDuration:o("MediaUploadTime").secondsToTime(1),maxDuration:o("MediaUploadTime").hoursToTime(24),minWidth:100,minHeight:100,minAspectRatio:.5,maxAspectRatio:4,extensions:new Set(["3g2","3gp","3gpp","asf","avi","dat","divx","dv","f4v","flv","gif","m2ts","m4v","mkv","mod","mov","mp4","mpe","mpeg","mpeg4","mpg","mts","nsv","ogm","ogv","qt","rmvb","tmp","tod","ts","vob","webm","wmv"]),acceptDimensionsFromPlayer:!1},startRequest:{baseURI:new(s||(s=r("URI")))("https://vupload-edge.facebook.com/ajax/video/upload/requests/start/")},startRequestPath:"/ajax/video/upload/requests/start/",receiveRequest:{baseURI:new s("https://vupload-edge.facebook.com/ajax/video/upload/requests/receive/")},receiveRequestPath:"/ajax/video/upload/requests/receive/",uploadService:{defaultService:{serviceName:"rupload",serviceDomain:"facebook.com",serviceConsumer:"fb_video"},targetedService:null,tracing:{enabled:!1,minFileSizeKB:102400},oculusCreatorStudio:"meta_quest_media_studio"},networkMonitor:{networkProbe:{enabled:!0},internetProbe:{enabled:!1,timeout:o("MediaUploadTime").secondsToTime(2),backoffPolicy:{backoff:{initial:o("MediaUploadTime").secondsToTime(10),jitter:o("MediaUploadTime").secondsToTime(0),expBase:o("MediaUploadTime").secondsToTime(1),expMultiplier:2,max:o("MediaUploadTime").secondsToTime(60)},limits:{}}},stallDetector:{enabled:!1,timeout:o("MediaUploadTime").secondsToTime(30)}}},d=(function(){function e(e){this.$5=!0,this.$1=e.entryPoint,this.$3=e.emitter,this.$2=e.setters,this.$4=e.envParams}var t=e.prototype;return t.$6=function(){return o("RelayHooks").fetchQuery(r("RelayFBEnvironment"),u,{source_type:this.$1.sourceType})},t.run=function(t){var e=this,n=new(r("MediaUploadFBClientEventContext"))({entryPoint:this.$1,envParams:this.$4,context:t});return this.$5?(this.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_REQUESTED,n),new(r("MediaUploadCancelablePromise"))(function(t){try{var o=e.$6().subscribe({error:(function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})(function(o){e.$4.reportRecoverableError("Error getting client configuration",o),e.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_FAILED,n),e.$7(null),t(r("MediaUploadOperationOutcome").SUCCESS)}),next:function(a){e.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_RECEIVED,n),e.$7(a),e.$5=!1,t(r("MediaUploadOperationOutcome").SUCCESS)}});return{cancel:function(){o.unsubscribe()}}}catch(o){e.$4.reportRecoverableError("Error requesting client configuration",o),e.$7(null),e.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_FAILED,n),t(r("MediaUploadOperationOutcome").SUCCESS)}})):(this.$3.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CONFIG_CACHED,n),r("MediaUploadCancelablePromise").resolve(r("MediaUploadOperationOutcome").SUCCESS))},t.$8=function(t){var e,n,r,o,a,i,l;if((t==null||(e=t.default)==null?void 0:e.service_name)==null||(t==null||(n=t.default)==null?void 0:n.service_domain)==null)this.$4.reportRecoverableError("Invalid configuration for default endpoint of the Upload Service, falling back to default"),l=c.uploadService.defaultService;else{var s,u;l={serviceName:t==null||(s=t.default)==null?void 0:s.service_name,serviceDomain:t==null||(u=t.default)==null?void 0:u.service_domain,serviceConsumer:c.uploadService.defaultService.serviceConsumer}}var d;if((t==null||(r=t.targeted)==null?void 0:r.service_name)!=null&&(t==null||(o=t.targeted)==null?void 0:o.service_domain)!=null){var m,p;d={serviceName:t==null||(m=t.targeted)==null?void 0:m.service_name,serviceDomain:t==null||(p=t.targeted)==null?void 0:p.service_domain}}else(t==null?void 0:t.targeted)==null?d=null:(this.$4.reportRecoverableError("Invalid configuration for target endpoint of the Upload Service, falling back to default"),d=c.uploadService.targetedService);var _;if((t==null||(a=t.tracing)==null?void 0:a.enabled)!=null&&(t==null||(i=t.tracing)==null?void 0:i.min_file_size_kb)!=null){var f,g;_={enabled:t==null||(f=t.tracing)==null?void 0:f.enabled,minFileSizeKB:t==null||(g=t.tracing)==null?void 0:g.min_file_size_kb}}else this.$4.reportRecoverableError("Invalid configuration for tracing in the Upload Service, falling back to default"),_=c.uploadService.tracing;var h=!1;this.$1.sourceType==="vr_creator_studio"&&(h=!0,l.serviceConsumer=c.uploadService.oculusCreatorStudio),this.$2.uploadService({defaultService:l,targetedService:d,tracing:_,includeAccessToken:h})},t.$9=function(t){var e;if((t==null?void 0:t.min_size_kb)==null||(t==null?void 0:t.max_size_kb)==null||(t==null?void 0:t.min_width)==null||(t==null?void 0:t.min_height)==null||(t==null?void 0:t.min_duration_secs)==null||(t==null?void 0:t.max_duration_secs)==null||(t==null?void 0:t.min_aspect_ration)==null||(t==null?void 0:t.max_aspect_ration)==null||(t==null?void 0:t.allowed_extensions)==null||(t==null?void 0:t.accept_dimensions_from_player)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),e=babelHelpers.extends({sourceType:this.$1.sourceType},c.metadataValidation),this.$1.sourceType==="vr_creator_studio"&&(e.maxSizeKB=100*1024*1024);else{var n=t==null?void 0:t.max_duration_secs;e={sourceType:this.$1.sourceType,minSizeKB:t==null?void 0:t.min_size_kb,maxSizeKB:t==null?void 0:t.max_size_kb,minWidth:t==null?void 0:t.min_width,minHeight:t==null?void 0:t.min_height,minAspectRatio:t==null?void 0:t.min_aspect_ration,maxAspectRatio:t==null?void 0:t.max_aspect_ration,extensions:new Set(t==null?void 0:t.allowed_extensions),acceptDimensionsFromPlayer:t==null?void 0:t.accept_dimensions_from_player,minDuration:o("MediaUploadTime").secondsToTime(t==null?void 0:t.min_duration_secs),maxDuration:o("MediaUploadTime").secondsToTime(n)}}this.$2.metadataValidation(e)},t.$10=function(t){return(t==null?void 0:t.backoff_initial_ms)==null?null:{backoff:{initial:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_initial_ms),jitter:(t==null?void 0:t.backoff_jitter_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_jitter_ms),expBase:(t==null?void 0:t.backoff_exp_base_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_exp_base_ms),expMultiplier:t==null?void 0:t.backoff_exp_multiplier,max:(t==null?void 0:t.backoff_max_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.backoff_max_ms)},limits:{totalRetryCount:t==null?void 0:t.limits_total_retry_count,totalTime:(t==null?void 0:t.limits_total_time_ms)==null?null:o("MediaUploadTime").millisecondsToTime(t==null?void 0:t.limits_total_time_ms)}}},t.$11=function(t){var e,n=this.$10(t==null?void 0:t.internet_probe_backoff);if((t==null?void 0:t.network_probe_enabled)==null||(t==null?void 0:t.internet_probe_enabled)==null||(t==null?void 0:t.internet_probe_timeout_ms)==null||n==null||(t==null?void 0:t.stall_detection_enabled)==null||(t==null?void 0:t.stall_detection_timeout_ms)==null)this.$4.reportRecoverableError("Invalid network monitor configuration, falling back to default"),e=c.networkMonitor;else{var r=t.network_probe_enabled,a=t.internet_probe_enabled,i=t.internet_probe_timeout_ms,l=t.stall_detection_enabled,s=t.stall_detection_timeout_ms;e={networkProbe:{enabled:r},internetProbe:{enabled:a,timeout:o("MediaUploadTime").millisecondsToTime(i),backoffPolicy:n},stallDetector:{enabled:l,timeout:o("MediaUploadTime").millisecondsToTime(s)}}}this.$2.networkMonitor(e)},t.$12=function(t){var e;if((t==null?void 0:t.uri)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),this.$1.sourceType==="vr_creator_studio"?e={baseURI:new(s||(s=r("URI")))("https://"+window.location.hostname+c.startRequestPath)}:e=c.startRequest;else{var n=new(s||(s=r("URI")))(t==null?void 0:t.uri);e={baseURI:n}}this.$2.startRequest(e)},t.$13=function(t){var e;if((t==null?void 0:t.uri)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),this.$1.sourceType==="vr_creator_studio"?e={baseURI:new(s||(s=r("URI")))("https://"+window.location.hostname+c.receiveRequestPath)}:e=c.receiveRequest;else{var n=new(s||(s=r("URI")))(t==null?void 0:t.uri);e={baseURI:n}}this.$2.receiveRequest(e)},t.$7=function(t){var e,n,r,o,a;this.$12(t==null||(e=t.media_upload_config)==null?void 0:e.network_start),this.$13(t==null||(n=t.media_upload_config)==null?void 0:n.network_receive),this.$8(t==null||(r=t.media_upload_config)==null?void 0:r.network_upload_service),this.$9(t==null||(o=t.media_upload_config)==null?void 0:o.video_metadata_validation),this.$11(t==null||(a=t.media_upload_config)==null?void 0:a.network_monitor)},e})();function m(e){return e}l.default=d}),98);
__d("MediaUploadFBStageOutcome",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SUCCESS","CANCEL","EXCEPTION","INTERNAL_FAILURE","UNSUPPORTED_FEATURE","ASSET_IS_NOT_FILE","ASSET_IS_NOT_SUPPORTED","REQUEST_ERROR","INVALID_SERVER_RESPONSE","MISSING_MANDATORY_DATA"]),l=e;i.default=l}),66);
__d("MediaUploadFBFileHasher",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=r("MediaUploadFBStage").HASHING,this.$2=e.pseudoHasher,this.$3=e.fullHasher}var t=e.prototype;return t.process=async function(t){t.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,this.$1);try{await this.$4(t)}catch(e){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:e})}return t.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),r("MediaUploadOperationOutcome").SUCCESS},t.$5=function(t,n,r){return n==null?Promise.resolve():n.hash(t.file).then(function(e){return e.outcome==="SUCCESS"&&r(e.value),e})},t.$4=async function(t){var e=this,n=t.asset.dataAsFile();if(n==null){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA});return}var o=await this.$5(n,this.$3,function(e){return t.processing.fullHash=e}).then(async function(r){return(r==null?void 0:r.outcome)==="SUCCESS"?(t.processing.pseudoHash=t.processing.fullHash,[r,r]):[r,await e.$5(n,e.$2,function(e){return t.processing.pseudoHash=e})]});for(var a of o)if((a==null?void 0:a.outcome)==="FILE_TOO_LARGE"){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").ASSET_IS_NOT_SUPPORTED});return}else if((a==null?void 0:a.outcome)==="FAILURE"){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").INTERNAL_FAILURE,rawErrorCode:a==null?void 0:a.rawErrorCode,rawErrorObject:a==null?void 0:a.rawErrorObject});return}t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS})},e})();l.default=e}),98);
__d("MediaUploadNetworkStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({UNKNOWN:"Unknown",CONNECTED:"Connected",DISCONNECTED:"Disconnected",TIMEOUT:"TimedOut"}),l=e;i.default=l}),66);
__d("MediaUploadFBInternetProbe",["AsyncRequest","MediaUploadCancelablePromise","MediaUploadNetworkStatus","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="https://rupload.facebook.com/fb_video/ping-",s=(function(){function t(t,n){this.$2=t,this.$1=n,this.$3=[""+e+r("uuidv4")()]}var n=t.prototype;return n.$4=function(t){return new(r("MediaUploadCancelablePromise"))(function(e){var n=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(t).setReadOnly(!0).setOption("suppressEvaluation",!0).setHandler(function(t){var n,o=t==null||(n=t.payload)==null?void 0:n.status;e(o===200?r("MediaUploadNetworkStatus").CONNECTED:r("MediaUploadNetworkStatus").DISCONNECTED)}).setTransportErrorHandler(function(){e(r("MediaUploadNetworkStatus").DISCONNECTED)}).setErrorHandler(function(){e(r("MediaUploadNetworkStatus").DISCONNECTED)});return n.send()||e(r("MediaUploadNetworkStatus").DISCONNECTED),{cancel:function(){n.abort()}}})},n.$5=function(){var e=this;return new Promise(function(t){e.$1.delayedExecutor(e.$2.timeout,function(){return t(r("MediaUploadNetworkStatus").TIMEOUT)})})},n.probe=async function(){var e=this,t=this.$3.map(function(t){return e.$4(t)}),n=Promise.race([this.$5()].concat(t.map(function(e){return e.promise}))),r=await n;return t.forEach(function(e){return e.cancel()}),r},t})();l.default=s}),98);
__d("MediaUploadFBLocalAssetStrategy",["MediaUploadPipeline"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.envParams,this.metadataParser=e.metadataParser,this.metadataValidator=e.metadataValidator,this.fileHasher=e.fileHasher}var t=e.prototype;return t.run=function(t){var e=this,n=new(r("MediaUploadPipeline"))(this.$1);n.addPlainStep(function(){return e.metadataParser.parse(t)}),n.addPlainStep(function(){return e.metadataValidator.validate(t,e.metadataParser.retriveRawMetadata(t))});var o=this.fileHasher;return o!=null&&n.addPlainStep(function(){return o.process(t)}),n.run()},e})();l.default=e}),98);
__d("ISOVideoBoxConstants",[],(function(t,n,r,o,a,i){"use strict";var e=8,l=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],s=[174,36,178,77,60,143,79,24,138,123,224,9,193,56,53,193];i.BOX_BASE_SIZE=e,i.GSPHERICAL_UUID=l,i.FBSPHERICAL_UUID=s}),66);
__d("FBSphericalMetadataTags",[],(function(t,n,r,o,a,i){var e=Object.freeze({SPHERICAL:"FBSpherical:Spherical",INITIAL_VERTICAL_FOV_DEGREES:"FBSpherical:InitialVerticalFOVDegrees",GUIDE:"FBSpherical:Guide",HOTSPOT:"FBSpherical:HotspotMetadata",USED_360_DIRECTOR:"FBSpherical:Used360Director"});i.default=e}),66);
__d("GSphericalMetadataTags",[],(function(t,n,r,o,a,i){var e=Object.freeze({SPHERICAL:"GSpherical:Spherical",INITIAL_VIEW_HEADING_DEGREES:"GSpherical:InitialViewHeadingDegrees",INITIAL_VIEW_PITCH_DEGREES:"GSpherical:InitialViewPitchDegrees",PROJECTION_TYPE:"GSpherical:ProjectionType",STEREO_MODE:"GSpherical:StereoMode",STITCHED:"GSpherical:Stitched",STITCHING_SOFTWARE:"GSpherical:StitchingSoftware",CROPPED_AREA_IMAGE_WIDTH_PIXELS:"GSphercal:CroppedAreaImageWidthPixels",CROPPED_AREA_IMAGE_HEIGHT_PIXELS:"GSphercal:CroppedAreaImageHeightPixels",CROPPED_AREA_LEFT_PIXELS:"GSphercal:CroppedAreaLeftPixels",CROPPED_AREA_TOP_PIXELS:"GSphercal:CroppedAreaTopPixels",FULL_PANO_WIDTH_PIXELS:"GSphercal:FullPanoWidthPixels",FULL_PANO_HEIGHT_PIXELS:"GSphercal:FullPanoHeightPixels"});i.default=e}),66);
__d("SphericalVideoMetadataTags",["FBSphericalMetadataTags","GSphericalMetadataTags"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({GSPHERICAL:r("GSphericalMetadataTags"),FBSPHERICAL:r("FBSphericalMetadataTags")});l.default=e}),98);
__d("VideoSphericalMetadataUtil",["SphericalVideoMetadataTags","VideoProjection","VideoStereoFormat"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(!e)return null;e=e.replace(/\0/g,"");var t;if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t}function s(e){return Object.values(r("VideoProjection")).includes(e)?e:null}function u(e){return Object.values(r("VideoStereoFormat")).includes(e)?e:null}function c(e){for(var t=e.getElementsByTagNameNS("*","*"),n=null,o=0;o<t.length;o++){var a=t[o],i=a.nodeName,l=a.parentElement;if(i!=="parsererror"&&l&&l.nodeName!=="parsererror"&&Object.values(r("SphericalVideoMetadataTags").GSPHERICAL).indexOf(i)<0&&Object.values(r("SphericalVideoMetadataTags").GSPHERICAL).indexOf(l.nodeName)<0){n||(n="");var s=a.outerHTML;n+="<"+i+s.slice(i.length+1,-(i.length+1))+i+">"}}return n}function d(e,t,n,r,o){if(t!==null&&n!==null&&r!==null&&o!==null&&e.projectionType==="equirectangular"&&(e.stereoMode==="left-right"||e.stereoMode==="top-bottom")){var a=parseInt(t,10),i=parseInt(n,10),l=parseInt(r,10),s=parseInt(o,10);if(Math.abs(a-l/2)<=1&&Math.abs(i-s)<=1)return!0}return!1}function m(e,t,n){return new File([e],t,{type:n})}function p(e){for(var t=new ArrayBuffer(e.length),n=new DataView(t),r=0;r<e.length;r++)n.setUint8(r,e.charCodeAt(r));return t}function _(e,t,n){var r=e.buffer;return m(r,t,n)}function f(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}l.parseXMLToDocument=e,l.stringToProjectionType=s,l.stringToStereoMode=u,l.getUnsupportedGSphericalTagsXML=c,l.isGoogleVR180=d,l.arrayBufferToFile=m,l.stringToArrayBuffer=p,l.bufferToFile=_,l.uuidArrayEquals=f}),98);
__d("VideoUploadMetadataParserErrorCode",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["FILE_READING_NOT_SUPPORTED","UNKNOWN_FILE_EXTENSION","INTERNAL_FAILURE"]),l=e;i.default=l}),66);
__d("checkForSphericalTag",["VideoSphericalMetadataUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoSphericalMetadataUtil").parseXMLToDocument(e);if(!t)return!1;var n=t.getElementsByTagNameNS("*","Spherical");if(n.length===0)return!1;var r=n[0],a=r.childNodes[0].nodeValue;return a.toLowerCase()==="true"}l.default=e}),98);
__d("getVideo64BitAtomLength",["Int64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o){var a=e.getUint32(t+o+n),i=e.getUint32(t+n+o+o);return new(r("Int64"))(i,a).toNumber()}l.default=e}),98);
__d("VideoUploadMetadataParser",["Bootloader","ErrorNormalizeUtils","ISOVideoBoxConstants","VideoSphericalMetadataUtil","VideoUploadFeatureDetector","VideoUploadMetadataParserErrorCode","checkForSphericalTag","err","fileSlice","getErrorSafe","getVideo64BitAtomLength","gkx","nullthrows","promiseDone"],(function(t,n,r,o,a,i,l){var e=4,s=4,u=r("gkx")("26232")?20482048:5242880,c=24,d=88,m=20,p=16,_=4,f=84,g=20,h=62,y=4,C=12,b=12,v=16,S=16,R={0:36,1:52,2:72},L=1,E=1,k=4,I=1,T=1,D=4,x=4,$=16,P=32,N=34,M=(function(){function t(e,t,n,r){this.$1=e,this.$2=t==null?function(){}:t,this.$4=n,this.$5=!0,this.$3=r}var n=t.prototype;return n.getHandler=function(){return this.$2},n.$6=function(t){this.$2(t),this.$3!=null&&this.$3({success:!0,metadata:t})},n.$7=function(t,n){if(this.$2(null),this.$3!=null){var e=n==null?void 0:r("ErrorNormalizeUtils").normalizeError(r("getErrorSafe")(n));this.$3({success:!1,errorCode:t,errorObject:e})}},n.parse=function(){if(!o("VideoUploadFeatureDetector").supportsFileReading())return this.$7(r("VideoUploadMetadataParserErrorCode").FILE_READING_NOT_SUPPORTED),null;switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":break;case"mkv":if(r("gkx")("26231"))break;default:return this.$7(r("VideoUploadMetadataParserErrorCode").UNKNOWN_FILE_EXTENSION),null}return this.$8()},n.$8=async function(){var e=this,t=this.$9(),n=this.$10(this.$1.getFile(),1e4);return new Promise(function(o,a){try{r("promiseDone")(Promise.all([t,n]).then(function(t){var n=t[0];if(n.completed){var r=t[1];n.videoPlayerData=r,e.$6(n)}o(n)},function(t){e.$7(r("VideoUploadMetadataParserErrorCode").INTERNAL_FAILURE,t),a(t)}))}catch(t){e.$7(r("VideoUploadMetadataParserErrorCode").INTERNAL_FAILURE,t),a(t)}})},n.$9=async function(){var e=this,t;switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":t=this.$11(0,Math.min(u,this.$1.getSize()||0),null);break;case"mkv":await new Promise(function(n,o){r("Bootloader").loadModules(["VideoUploadMetadataMKVParser"],function(r){var o=new r(e.$1);t=o.parse(),n()},"VideoUploadMetadataParser")});break;default:throw new Error("Unrecognized file extension in _parseImpl")}return r("nullthrows")(t)},n.$11=function(t,n,o){var e=this,a=new FileReader;return new Promise(function(i,l){a.onload=async function(r){try{if(!(a.result instanceof ArrayBuffer))throw new Error("reader.result is something other than ArrayBuffer");var s=e.$12(new DataView(a.result),0,n-t,t,o);if(s.completed){var c=e.$13(s);c.completed=!0,i(c)}else{var d=await e.$11(t+s.nextOffset,Math.min(e.$1.getSize()||0,t+s.nextOffset+u),s);i(d)}}catch(e){l(e)}};var s=e.$1.getFile();a.readAsArrayBuffer(r("fileSlice").call(s,t,n))})},n.$10=function(t,n){return!this.$4||!window.URL||!window.URL.createObjectURL||!t?null:new Promise(function(e,r){if(!t.type.startsWith("video/")){r("Incorrect file type, expected video");return}var o=document.createElement("video"),a=window.setTimeout(function(){i(),r("Video onloadedmetadata timed out")},n);function i(){URL.revokeObjectURL(o.src),window.clearTimeout(a),o.remove()}o.onloadedmetadata=function(){if(o.videoWidth===0||o.videoHeight===0){i(),r("Video onloadedmetadata corrupt metadata");return}var t={width:o.videoWidth,height:o.videoHeight};i(),e(t)},o.onerror=function(){var e;i(),r("Video error: "+(((e=o.error)==null?void 0:e.message)||"Unknown error"))},o.src=URL.createObjectURL(t)})},n.$14=function(t,n,r){for(var e=[],o=0;o<r;o++)e.push(String.fromCharCode(t.getUint8(n+o)));return e.join("")},n.$15=function(t,n,r){var e={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_map:[]},o=0;e.version=t.getUint8(n+o),o=L,e.ambisonic_type=t.getUint8(n+o),o+=E,e.ambisonic_order=t.getUint32(n+o),o+=k,e.ambisonic_channel_ordering=t.getUint8(n+o),o+=I,e.ambisonic_normalization=t.getUint8(n+o),o+=T,e.num_channels=t.getUint32(n+o),o+=D;for(var a=0;a<e.num_channels;a++)if(e.channel_map.push(t.getUint32(n+o)),o+=x,o>r)return null;return JSON.stringify(e)},n.$16=function(n,a,i,l){try{var t=s+e,u=o("ISOVideoBoxConstants").GSPHERICAL_UUID.length;if(t+u<i){for(var c=[],d=0;d<u;d++)c.push(n.getUint8(a+t+d));var m=o("VideoSphericalMetadataUtil").uuidArrayEquals(c,o("ISOVideoBoxConstants").GSPHERICAL_UUID),p=o("VideoSphericalMetadataUtil").uuidArrayEquals(c,o("ISOVideoBoxConstants").FBSPHERICAL_UUID);if(t+=u,m||p){var _=this.$14(n,a+t,i-t);r("checkForSphericalTag")(_)&&(l.sphericalMetadata.spherical=!0,p?l.sphericalMetadata.FBSphericalMetadataXML=_:l.sphericalMetadata.sphericalMetadataXml=_)}}}catch(e){}},n.$12=function(n,o,a,i,l){for(var t=l||{widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:!1,sphericalMetadata:{sphericalMetadataXml:null,FBSphericalMetadataXML:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:!1,endOfMediaInformationAtomOffset:null,streamSampleCounts:[],samples:[]},u=null;o<a;){var L=n.getUint32(o),E=this.$14(n,o+e,s);if(L===1&&(L=r("getVideo64BitAtomLength")(n,o,s,e)),o+L>a)return t.completed=!1,t.nextOffset=o,L>a&&(t.nextOffset+=L),t;if(t.isParsingInMediaInformationAtom&&o>=Number(t.endOfMediaInformationAtomOffset)&&(t.isParsingInMediaInformationAtom=!1,t.endOfMediaInformationAtomOffset=null),o+i===0&&E!=="ftyp")throw new Error("No ftyp atom");if(L===0)throw new Error("len is 0");var k=function(){var e=n.getUint32(o+m),t=n.getUint32(o+c);if(e===0)throw r("err")("mvhd timescale is 0");return t/e};switch(E){case"moov":case"trak":case"mdia":case"stbl":o+=e+s;break;case"mvhd":t.duration=k(),o+=L;break;case"tkhd":var I=n.getUint16(o+f),T=n.getUint16(o+d);t.widths.push(I),t.heights.push(T),t.samples.push({descriptions:[]}),u=n.getUint32(o+g),o+=L;break;case"hdlr":if(!t.isParsingInMediaInformationAtom){var D=this.$14(n,o+p,_);switch(D){case"vide":D="video";break;case"soun":D="audio";break;case"subt":D="subtitle";break;default:D="data"}t.streamTypes.push(D)}o+=L;break;case"mdhd":t.streamDurations.push(k()),o+=L;break;case"uuid":this.$16(n,o,L,t),o+=L;break;case"meta":var x=b+C+y,M=this.$14(n,o+x,4);if(M!=="face"){o+=L;break}var w=e+s+h,A=this.$14(n,o+w,L-w);A!==null&&(t.sphericalMetadata.fbSpatialAudioMetadataXml==null&&(t.sphericalMetadata.fbSpatialAudioMetadataXml="<fb360_spatial_audio>"),u?t.sphericalMetadata.fbSpatialAudioMetadataXml+=`
                <track id="`+u.toString()+`">
                  `+A+`
                </track>
              `:t.sphericalMetadata.fbSpatialAudioMetadataXml+=`
                <spatial_audio_formatting>
                  `+A+`
                </spatial_audio_formatting>
              `),o+=L;break;case"minf":var F=this.$14(n,o+2*e+s,s);F==="smhd"||F==="vmhd"?(o+=e+s,t.isParsingInMediaInformationAtom=!0,t.endOfMediaInformationAtomOffset=o+L):(t.streamSampleCounts.push(null),o+=L);break;case"stsd":o+=v;break;case"avc1":if(this.$5&&t.samples.length>0){var O=t.samples[t.samples.length-1];O.descriptions.push({width:n.getUint16(o+P),height:n.getUint16(o+N)})}o+=L;break;case"mp4a":case"sowt":case"raw ":case"twos":case"fl32":case"fl64":case"in24":case"in32":case"ulaw":case"alaw":case"lpcm":case"Opus":var B=n.getUint16(o+S).toString();Object.prototype.hasOwnProperty.call(R,B)?o+=R[B]:o+=L;break;case"SA3D":var W=this.$15(n,o+e+s,L);W!==null&&t.sphericalMetadata.ytSa3dMetadataJson===null&&(t.sphericalMetadata.ytSa3dMetadataJson=W),o+=L;break;case"stsz":case"stz2":t.streamSampleCounts.push(n.getUint32(o+$)),o+=L;break;default:o+=L}}return t.completed=!0,t.sphericalMetadata.fbSpatialAudioMetadataXml&&(t.sphericalMetadata.fbSpatialAudioMetadataXml+="</fb360_spatial_audio>"),t},n.$13=function(t){var e={streams:{numAudioTracks:0},format:{},metadata:{}},n=t.widths.length,r=t.heights.length,o=t.streamTypes.length,a=t.streamDurations.length,i=t.streamSampleCounts.length,l=t.samples.length;if(n!==r||n!==o||n!==a||n!==i||n!==l)throw new Error("Number of parsed widths, heights, durations or sample counts for video file are mismatched.");for(var s=0;s<n;s++){var u={width:t.widths[s],height:t.heights[s],duration:t.streamDurations[s],type:t.streamTypes[s],sampleCount:t.streamSampleCounts[s]};if(u.type==="video"){this.$5&&t.samples[s].descriptions.forEach(function(e){e.width>u.width&&e.height>u.height&&(u.width=e.width,u.height=e.height)});var c=u.width*u.height,d=e.streams.primaryVideo;(!d||d.width*d.height>c)&&(e.streams.primaryVideo=u)}else if(u.type==="audio"){var m=e.streams.primaryAudio;(!m||m.duration<u.duration)&&(e.streams.primaryAudio=u),e.streams.numAudioTracks++}}return e.format.duration=t.duration,e.format.isSpherical=t.sphericalMetadata.spherical,t.sphericalMetadata.spherical&&(e.metadata.sphericalMetadataXml=t.sphericalMetadata.sphericalMetadataXml,e.metadata.FBSphericalMetadataXML=t.sphericalMetadata.FBSphericalMetadataXML,e.metadata.fbSpatialAudioMetadataXml=t.sphericalMetadata.fbSpatialAudioMetadataXml,e.metadata.ytSa3dMetadataJson=t.sphericalMetadata.ytSa3dMetadataJson),e},t})();l.default=M}),98);
__d("MediaUploadFBMetadataParser",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime","VideoUploadFile","VideoUploadMetadataParser"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadMetadataParser",s=(function(){function t(){this.$1=r("MediaUploadFBStage").METADATA_EXTRACTION}var n=t.prototype;return n.parse=async function(t){t.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,this.$1);try{await this.$2(t)}catch(e){t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:e})}return t.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),r("MediaUploadOperationOutcome").SUCCESS},n.retriveRawMetadata=function(n){return n.processing.rawData.getUnsafe(e)},n.$2=function(t){var e=this,n=t.asset,o=n.dataAsFile();if(o==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").ASSET_IS_NOT_FILE}),Promise.resolve();var a=new(r("VideoUploadFile"))(null,o.file,o.size,o.extension);return new Promise(function(n){var o=new(r("VideoUploadMetadataParser"))(a,null,!1,function(o){o.success?e.$3(t,o.metadata):o.errorObject!=null?t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorCode:String(o.errorCode),rawErrorObject:o.errorObject}):t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").INTERNAL_FAILURE,rawErrorCode:String(o.errorCode)}),n()});o.parse()})},n.$3=function(n,r){var t,a,i,l,s,u;n.processing.rawData.set(e,r);var c=(t=r.format)==null?void 0:t.duration,d=c==null?void 0:o("MediaUploadTime").secondsToTime(c),m=(a=r.streams)==null||(a=a.primaryVideo)==null?void 0:a.width,p=(i=r.streams)==null||(i=i.primaryVideo)==null?void 0:i.height;r.videoPlayerData!=null&&((l=r.videoPlayerData)==null?void 0:l.width)>0&&((s=r.videoPlayerData)==null?void 0:s.height)>0&&(m=r.videoPlayerData.width,p=r.videoPlayerData.height);var _=(u=r.format)==null?void 0:u.isSpherical;n.metadata={duration:d,width:m,height:p,isSpherical:_}},t})();l.default=s}),98);
__d("VideoUploadFileValidator",["errorCode","fbt","cr:909496","cr:909497","react","vulture"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=n("react")),c=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],d=["VIDEO__INVALID_GUIDE_DATA"],m=(function(){"use strict";function e(e){this.$1=e}var t=e.prototype;return t.validate=function(t,n){return this.$2(t)&&this.$3(t)&&this.$4(t.getExtension()==="gif",n)},t.getValidationErrorMessage=function(t,n){return this.$5(t)||this.$6(t)||this.$7(t.getExtension()==="gif",n)},e.canReplaceVideoForError=function(t){return n("vulture")("GXIBEX7SKQtgztutRnjhZ9IvfSk="),t?d.indexOf(t)>-1?!1:c.indexOf(t)>-1:!0},t.$2=function(t){var e=this.$5(t);return e?(n("cr:909496")!==null&&n("cr:909496").show(e.summary,e.description),!1):!0},t.$5=function(t){var e;if(!this.$1.extensions[(e=t.getExtension())==null?void 0:e.toLowerCase()]){var r="http://www.facebook.com/help/218673814818907/",o=u.jsx(n("cr:909497"),{target:"_blank",href:r,children:s._(/*BTDS*/"recommended formats")});return{summary:s._(/*BTDS*/"Unsupported File Format"),description:s._(/*BTDS*/"Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[s._param("link",o)])}}},t.$3=function(t){var e=this.$6(t);return e?(n("cr:909496")!==null&&n("cr:909496").show(e.summary,e.description),!1):!0},t.$6=function(t){var e;if(t.getSize()!==null)return t.getSize()<this.$1.minSize&&(e=this.$8()),t.getSize()>this.$1.maxSize&&(e=this.$9()),e},t.$8=function(){var e=Math.round(this.$1.minSize/1024);return{summary:s._(/*BTDS*/"Video File Too Small"),description:s._(/*BTDS*/"The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[s._param("min-size",e)])}},t.$9=function(){var e=Math.floor(this.$1.maxSize/1024/1024);return{summary:s._(/*BTDS*/"Video File Too Large"),description:s._(/*BTDS*/"The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[s._param("max-size",e)])}},t.$4=function(t,r){var e=this.$7(t,r);return e?(n("cr:909496")!==null&&n("cr:909496").show(e.summary,e.description),!1):!0},t.$7=function(t,n){var e;if(n){var r=n.format.duration;if(r&&(r>this.$1.maxLength&&(e=this.$10()),r<this.$1.minLength&&!t&&(e=this.$11())),!(!n.streams||!n.streams.primaryVideo)){var o=n.streams.primaryVideo.width,a=n.streams.primaryVideo.height,i=0,l=0;n.videoPlayerData!==null&&(i=n.videoPlayerData.height,l=n.videoPlayerData.width),this.$1.acceptDimensionsFromPlayer&&l!==0&&i!==0&&(o=l,a=i),!n.streams.primaryVideo&&n.streams.primaryAudio&&(e=this.$12()),o<this.$1.minWidth&&(e=this.$13()),a<this.$1.minHeight&&(e=this.$14());var s=o/a;return this.$1.require16to9AspectRatio&&(s>2||s<1.6)&&(e=this.$15()),this.$1.minAspectRatio&&s<this.$1.minAspectRatio&&(e=this.$16()),this.$1.maxAspectRatio&&s>this.$1.maxAspectRatio&&(e=this.$17()),e}}},t.$10=function(){return this.$1.source==="profile_video"?{summary:s._(/*BTDS*/"Profile Video Duration Too Long"),description:s._(/*BTDS*/"The maximum length is {max-length} seconds. Please upload a shorter video.",[s._param("max-length",this.$1.maxLength)])}:this.$1.source==="event_cover_video"?{summary:s._(/*BTDS*/"Event Cover Video Duration Too Long"),description:s._(/*BTDS*/"Videos can't be longer than {max-length} seconds.",[s._param("max-length",this.$1.maxLength)])}:{summary:s._(/*BTDS*/"Video Duration Too Long"),description:s._(/*BTDS*/"The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[s._param("max-length",Math.round(this.$1.maxLength/60))])}},t.$11=function(){return{summary:s._(/*BTDS*/"Video File Too Short"),description:s._(/*BTDS*/"_j{\"second\":\"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.\",\"seconds\":\"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video.\"}",[s._enum(this.$1.minLength===1?"second":"seconds",{second:"second",seconds:"seconds"}),s._param("min-length",this.$1.minLength)])}},t.$12=function(){n("vulture")("INKG3L69H5R65NZ1WJ71126FvrI=");var e="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?",t=u.jsx(n("cr:909497"),{href:e,children:s._(/*BTDS*/"supported video format")});return{summary:s._(/*BTDS*/"No Video Detected"),description:s._(/*BTDS*/"It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[s._param("supported-video-format link",t)])}},t.$13=function(){return{summary:s._(/*BTDS*/"Video Width Too Narrow"),description:s._(/*BTDS*/"The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[s._param("min-width",this.$1.minWidth)])}},t.$15=function(){return n("vulture")("uxlnhk-6pEg8Fk9bfORWCRp4alE="),{summary:s._(/*BTDS*/"Problem Uploading Video"),description:s._(/*BTDS*/"Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload again.")}},t.$14=function(){return{summary:s._(/*BTDS*/"Video Height Too Short"),description:s._(/*BTDS*/"The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[s._param("min-height",this.$1.minHeight)])}},t.$17=function(){return{summary:s._(/*BTDS*/"Video Too Wide"),description:s._(/*BTDS*/"The video you selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a taller video.",[s._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),s._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}},t.$16=function(){return{summary:s._(/*BTDS*/"Video Too Tall"),description:s._(/*BTDS*/"The video you selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a narrower video.",[s._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),s._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}},e})();a.exports=m}),130);
__d("MediaUploadFBMetadataValidator",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime","Promise","VideoUploadFile","VideoUploadFileValidator"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=r("MediaUploadFBStage").METADATA_VALIDATION,this.$2=e}var a=t.prototype;return a.validate=function(o,a){o.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,this.$1);var t;try{t=this.$3(o,a)}catch(e){o.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:e}),t=r("MediaUploadOperationOutcome").SUCCESS}return o.emitStageEventForOperationOutcome(t,this.$1),(e||(e=n("Promise"))).resolve(t)},a.$4=function(t){var e={};return t.extensions.forEach(function(t){return e[t]=1}),{minSize:t.minSizeKB*1024,maxSize:t.maxSizeKB*1024,maxLength:o("MediaUploadTime").timeToSeconds(t.maxDuration),minLength:o("MediaUploadTime").timeToSeconds(t.minDuration),acceptDimensionsFromPlayer:t.acceptDimensionsFromPlayer,minWidth:t.minWidth,minHeight:t.minHeight,require16to9AspectRatio:!1,minAspectRatio:t.minAspectRatio,maxAspectRatio:t.maxAspectRatio,source:t.sourceType,extensions:e}},a.$3=function(t,n){var e=t.asset.dataAsFile();if(e==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").ASSET_IS_NOT_FILE}),r("MediaUploadOperationOutcome").SUCCESS;if(this.configuration==null)throw this.$2.createThrowableError("Missing configuration in the MediaUploadFBMetadataValidator");var o=new(r("VideoUploadFile"))(null,e.file,e.size,e.extension),a=this.$4(this.configuration),i=new(r("VideoUploadFileValidator"))(a),l=i.getValidationErrorMessage(o,n);return l!=null?(t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").INTERNAL_FAILURE,displayError:l}),r("MediaUploadOperationOutcome").FAILED_NON_TRANSIENT):(t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),r("MediaUploadOperationOutcome").SUCCESS)},t})();l.default=s}),98);
__d("MediaUploadOperationAttemptOutcome",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SUCCESS","CANCELED","TRANSIENT_FAILURE","TRANSIENT_FAILURE_IMMEDIATE_RETRY","NON_TRANSIENT_FAILURE"]),l=e;i.default=l}),66);
__d("MediaUploadRetryableOperation",["MediaUploadCancelablePromise","MediaUploadOperationAttemptOutcome","MediaUploadOperationOutcome"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var o=this;this.$4=null,this.$1=e,this.$2=t,this.$3=n,this.cancelablePromise=new(r("MediaUploadCancelablePromise"))(function(e){return o.$5(e),{cancel:function(){var t;(t=o.$4)==null||t.cancel(),o.$4=null,e(r("MediaUploadOperationOutcome").CANCELED)}}})}e.createAsPromise=function(n,r,o){var t=new e(n,r,o);return t.cancelablePromise};var t=e.prototype;return t.$5=function(t){var e=this,n=this.$1();this.$4=n,this.$3.promiseTerminator(n.promise.then(function(n){e.$4=null,e.$6(t,n)},function(n){throw e.$4=null,e.$6(t,r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE),n}))},t.$6=function(t,n){switch(n){case r("MediaUploadOperationAttemptOutcome").CANCELED:t(r("MediaUploadOperationOutcome").CANCELED);break;case r("MediaUploadOperationAttemptOutcome").SUCCESS:t(r("MediaUploadOperationOutcome").SUCCESS);break;case r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:t(r("MediaUploadOperationOutcome").FAILED_NON_TRANSIENT);break;case r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE:this.$7(t,!1);break;case r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE_IMMEDIATE_RETRY:this.$7(t,!0);break}},t.$7=function(t,n){var e=this;if(this.$2.increaseRetryAttemptCounter(),this.$2.exceedTotalDuration())t(r("MediaUploadOperationOutcome").FAILED_OUT_OF_TIME);else if(this.$2.exceedTotalRetries())t(r("MediaUploadOperationOutcome").FAILED_NO_MORE_RETRIES);else if(n)this.$5(t);else{var o=this.$2.calculateBackoffDelay();this.$4=this.$3.delayedExecutor(o,function(){return e.$5(t)},function(){return t(r("MediaUploadOperationOutcome").CANCELED)})}},e})();l.default=e}),98);
__d("MediaUploadFBNetworkAssetStrategy",["MediaUploadPipeline","MediaUploadRetryableOperation"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r){this.$1=e,this.startRequest=t,this.uploadServiceRequest=n,this.receiveRequest=r}var t=e.prototype;return t.run=function(t){var e=this,n=t.asset.dataAsFile();if(n==null)throw this.$1.createThrowableError("Browser is not compatible with current version of the SDK");var o=new(r("MediaUploadPipeline"))(this.$1);return o.addCancelableStep(function(){return r("MediaUploadRetryableOperation").createAsPromise(function(){return e.startRequest.send(t)},t.retryState,e.$1)}),o.addCancelableStep(function(){return r("MediaUploadRetryableOperation").createAsPromise(function(){return e.uploadServiceRequest.send(t,n,e.startRequest.retriveResponse(t))},t.retryState,e.$1)}),o.addCancelableStep(function(){return r("MediaUploadRetryableOperation").createAsPromise(function(){return e.receiveRequest.send(t,e.startRequest.retriveResponse(t),e.uploadServiceRequest.retriveResponse(t))},t.retryState,e.$1)}),o.run()},t.cancel=function(){},e})();l.default=e}),98);
__d("MediaUploadFBNetworkProbe",["MediaUploadNetworkStatus","Network"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.probe=function(){return r("Network").isOnline()?r("MediaUploadNetworkStatus").CONNECTED:r("MediaUploadNetworkStatus").DISCONNECTED},e})();l.default=e}),98);
__d("MediaUploadFBEndpointRequest",["AsyncRequest","MediaUploadCancelablePromise","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.send=function(t,n){var e=this;return new(r("MediaUploadCancelablePromise"))(function(o){n.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,t.stage);var a=t.createPayload();if(a==null){n.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,t.stage),o(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);return}var i=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(t.uri).setData(a).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",n.sessionContext.sessionID).setProgressHandler(function(){t.networkNotifier.notifyOnProgress(n,t.stage)}).setHandler(function(r){o(e.$1(t,n,r))}).setErrorHandler(function(r){o(e.$2(t,n,r))});if(i.send())return t.networkNotifier.notifyOnNewRequest(n,t.stage),{cancel:function(){t.networkNotifier.notifyOnAbandon(n,t.stage),i.abort()}};o(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE)})},t.$1=function(t,n,o){var e;return t.networkNotifier.notifyOnResponse(n,t.stage),(e=n.retryState)==null||e.resetBackoff(),t.acceptSuccessfulResponse(o),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,t.stage),r("MediaUploadOperationAttemptOutcome").SUCCESS},t.$2=function(t,n,o){var e=o.error<1e3,a=o.error>9999;e||a?t.networkNotifier.notifyOnResponse(n,t.stage):t.networkNotifier.notifyOnTransportError(n,t.stage),t.acceptErrorResponse(o),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,t.stage);var i=e&&o.error>=400&&o.error<500||a&&!o.transientError;return i?r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE},e})();l.default=e}),98);
__d("MediaUploadFBReceiveRequest",["ActorURI","MediaUploadCancelablePromise","MediaUploadFBEndpointRequest","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadFBReceiveRequest",s=(function(){function t(e){this.$1=r("MediaUploadFBStage").RECEIVE_REQUEST,this.$2=e.entryPoint,this.$3=e.payloadHook,this.$4=e.customHeadersHook,this.$5=e.envParams,this.$6=new(r("MediaUploadFBEndpointRequest")),this.$7=e.networkNotifier}var n=t.prototype;return n.send=function(n,a,i){var t=this;if(this.configuration==null)throw this.$5.createThrowableError("Missing configuration in the MediaUploadFBReceiveRequest");return(a==null?void 0:a.skip_upload)===!0?(n.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),r("MediaUploadCancelablePromise").resolve(r("MediaUploadOperationAttemptOutcome").SUCCESS)):this.$6.send({stage:this.$1,networkNotifier:this.$7,uri:n.request.attributes.actorID==null?this.configuration.baseURI:o("ActorURI").create(this.configuration.baseURI,n.request.attributes.actorID),createPayload:function(){return t.$8(n,a,i)},createCustomHeaders:function(){return t.$9(n)},acceptSuccessfulResponse:function(a){n.processing.rawData.set(e,a.payload),n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS})},acceptErrorResponse:function(o){var e;n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:o.error,displayError:{summary:o.errorSummary,description:o.errorDescription},errorAttributes:{silentError:o.silentError,transientError:o.transientError},networkRequestID:(e=o.payload)==null?void 0:e.__www_request_id__})}},n)},n.$9=function(t){var e=this.$4;return e?e({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot()}):null},n.$8=function(t,n,o){if(n==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_START_CALL_RESPONSE"}),null;if(o==null)return t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_UPLOAD_SERVICE_RESPONSE"}),null;var e=t.asset.dataAsFile(),a={waterfall_id:t.sessionContext.sessionID,target_id:t.request.attributes.targetID,video_id:n.video_id,source:this.$2.sourceType,composer_entry_point_ref:this.$2.entryPointRef,supports_chunking:!0,supports_upload_service:!0,partition_start_offset:0,partition_end_offset:e==null?void 0:e.size,start_offset:0,end_offset:e==null?void 0:e.size,upload_speed:t.uploadSummary.computeSpeedBps(),fbuploader_video_file_chunk:o.everstoreHandle,has_file_been_replaced:t.request.attributes.hasFileBeenReplaced,composer_dialog_version:t.request.attributes.composerDialogVersion,composer_work_shared_draft_mode:t.request.attributes.workSharedDraftMode},i=this.$3;return i!=null&&i({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot(),startCallResponse:n,payload:a}),a},t})();l.default=s}),98);
__d("MediaUploadFBStartRequest",["ActorURI","MediaUploadFBEndpointRequest","MediaUploadFBStage","MediaUploadFBStageOutcome"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadFBStartRequest",s=(function(){function t(e){this.$1=r("MediaUploadFBStage").START_REQUEST,this.$2=e.entryPoint,this.$3=e.payloadHook,this.$4=e.customHeadersHook,this.$5=e.envParams,this.$6=new(r("MediaUploadFBEndpointRequest")),this.$7=e.networkNotifier}var n=t.prototype;return n.retriveResponse=function(n){return n.processing.rawData.getUnsafe(e)},n.send=function(n){var t=this;if(this.configuration==null)throw this.$5.createThrowableError("Missing configuration in the MediaUploadFBStartRequest");return this.$6.send({stage:this.$1,networkNotifier:this.$7,uri:n.request.attributes.actorID==null?this.configuration.baseURI:o("ActorURI").create(this.configuration.baseURI,n.request.attributes.actorID),createPayload:function(){return t.$8(n)},createCustomHeaders:function(){return t.$9(n)},acceptSuccessfulResponse:function(a){var o=a.payload;if(o.video_id!=null)n.processing.rawData.set(e,o),n.videoID=o.video_id,n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS});else{var i;n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").INVALID_SERVER_RESPONSE,networkRequestID:(i=a.payload)==null?void 0:i.__www_request_id__})}},acceptErrorResponse:function(o){var e;n.recordStageOutcome({stage:t.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:o.error,displayError:{summary:o.errorSummary,description:o.errorDescription},errorAttributes:{silentError:o.silentError,transientError:o.transientError},networkRequestID:(e=o.payload)==null?void 0:e.__www_request_id__})}},n)},n.$9=function(t){var e=this.$4;return e!=null?e({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot()}):null},n.$8=function(t){var e,n=t.asset.dataAsFile(),r={waterfall_id:t.sessionContext.sessionID,target_id:t.request.attributes.targetID,source:this.$2.sourceType,composer_entry_point_ref:this.$2.entryPointRef,supports_chunking:n!=null,supports_file_api:n!=null,file_size:n==null?0:n.size,file_extension:String(t.asset.data.extension),spherical:(e=t.metadata)==null?void 0:e.isSpherical,partition_start_offset:0,partition_end_offset:n==null?void 0:n.size,has_file_been_replaced:t.request.attributes.hasFileBeenReplaced,composer_dialog_version:t.request.attributes.composerDialogVersion,video_publisher_action_source:t.request.attributes.publisherActionSource,composer_work_shared_draft_mode:t.request.attributes.workSharedDraftMode},o=this.$3;return o!=null&&o({assetSnapshot:t.composeSnapshot(),sessionSnapshot:t.sessionContext.composeSnapshot(),payload:r}),r},t})();l.default=s}),98);
__d("MediaUploadFBUploadServiceRequest",["AsyncResponse","MediaUploadCancelablePromise","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent","RelayAPIConfig","ResumableUploadService","ResumableUploadServiceState.enum","md5"],(function(t,n,r,o,a,i,l){"use strict";var e="MediaUploadFBUploadServiceRequest",s=(function(){function t(e){this.$1=r("MediaUploadFBStage").BYTES_UPLOAD,this.$2=e.envParams,this.$3=e.networkNotifier}var n=t.prototype;return n.send=function(t,n,o){var e=this;return new(r("MediaUploadCancelablePromise"))(function(a){t.emitStageEvent(r("MediaUploadStageEvent").STAGE_STARTED,e.$1);var i=e.configuration;if(i==null)throw e.$2.createThrowableError("Missing configuration in the MediaUploadFBUploadServiceRequest");if(o==null){t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_START_CALL_RESPONSE"}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,e.$1),a(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);return}if(o.skip_upload){t.uploadSummary.updateForUploadSkip(n.size),t.recordStageOutcome({stage:e.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,e.$1),a(r("MediaUploadOperationAttemptOutcome").SUCCESS);return}t.uploadSummary.updateForUploadStart(n.size),t.recalculateProgressAndEmit();var l=e.$4(t,n,i,o),s=r("ResumableUploadService").create(l);return t.processing.uploadServiceDomain=s.getServiceName(),e.$5(t,s,a),s.resume(n.file),e.$3.notifyOnNewRequest(t,e.$1),{cancel:function(){s.cancel()}}})},n.retriveResponse=function(n){return n.processing.rawData.getUnsafe(e)},n.$6=function(n,o,a){this.$3.notifyOnResponse(n,this.$1),typeof a=="string"?(n.processing.rawData.set(e,{everstoreHandle:a}),n.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").SUCCESS}),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),o(r("MediaUploadOperationAttemptOutcome").SUCCESS)):(n.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").INVALID_SERVER_RESPONSE,rawErrorCode:"RECEIVED_HANDLE_IS_NOT_STRING"}),n.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,this.$1),o(r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE))},n.$7=function(t,n,o){o.error<1e3?this.$3.notifyOnResponse(t,this.$1):this.$3.notifyOnTransportError(t,this.$1),t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:o.error,displayError:{summary:o.errorSummary,description:o.errorDescription},errorAttributes:{silentError:o.silentError,transientError:o.transientError}}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,this.$1);var e=o.error>=400&&o.error<500;n(e?r("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE)},n.$8=function(t,n,o){o instanceof r("AsyncResponse")?this.$7(t,n,o):(this.$3.notifyOnAbandon(t,this.$1),t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorObject:o}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_FAILED,this.$1),n(r("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE))},n.$9=function(t,n){this.$3.notifyOnAbandon(t,this.$1),t.recordStageOutcome({stage:this.$1,outcome:r("MediaUploadFBStageOutcome").CANCEL}),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_CANCELED,this.$1),n(r("MediaUploadOperationAttemptOutcome").CANCELED)},n.$10=function(t,n){this.$3.notifyOnProgress(t,this.$1),(n==null?void 0:n.loaded)!=null&&(t.uploadSummary.updateForProgress(n.loaded),t.emitStageEvent(r("MediaUploadStageEvent").STAGE_PROGRESS,this.$1))},n.$5=function(t,n,o){var e=this,a;n.addListener((a=r("ResumableUploadServiceState.enum")).SUCCESS,function(n){return e.$6(t,o,n)}),n.addListener(a.TRANSPORT_FAILURE,function(n){return e.$7(t,o,n)}),n.addListener(a.FAIL,function(n){return e.$8(t,o,n)}),n.addListener(a.CANCEL,function(){return e.$9(t,o)}),n.addListener(a.PROGRESS,function(n){return e.$10(t,n)})},n.$4=function(t,n,o,a){var e,i,l=n.file,s=[String(l.lastModified),l.name,l.type,String(l.size),(e=(i=t.processing.pseudoHash)==null?void 0:i.hashValue)!=null?e:[t.sessionContext.sessionID,t.assetID].join("-")].join("-"),u=[r("md5")(s),String(a.start_offset),String(a.end_offset)].join("-"),c=o.tracing.enabled&&o.tracing.minFileSizeKB<l.size/1024?["video_upload_www",[t.assetID,String(t.retryState.getRetryAttempts())].join("_"),[String(t.sessionContext.sessionID),String(a.video_id)].join("_")].join(":"):null,d=o.defaultService,m=d.serviceName,p=d.serviceDomain;t.retryState.getRetryAttemptsSinceLastReset()<10&&o.targetedService!=null&&(m=o.targetedService.serviceName,p=o.targetedService.serviceDomain);var _=null;return o.includeAccessToken&&(_=r("RelayAPIConfig").accessToken),{consumer:o.defaultService.serviceConsumer,accessToken:_,sessionKey:u,serviceName:m,serviceDomain:p,tracingHeaderValue:c,receiveParameters:{start_offset:String(a.start_offset),end_offset:String(a.end_offset),composer_session_id:t.sessionContext.sessionID,upload_session_id:String(a.upload_session_id),product_media_id:a.video_id,xpv_asset_id:a.xpv_asset_id,is_xpv_single_prod:a.is_xpv_single_prod,fb_region:a.fb_region,total_file_size:String(l.size),target_id:t.request.attributes.targetID,video_waterfall_id:t.sessionContext.sessionID}}},t})();l.default=s}),98);
__d("MediaUploadFalcoLogger",["CurrentUser","MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadStageEvent","MediaUploadTime","logVideoUploadViaFalco"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map([[(e=r("MediaUploadClientEvent")).CLIENT_CONFIG_REQUESTED,"upload.client.started_client_config_fetch"],[e.CLIENT_CONFIG_RECEIVED,"upload.client.finished_client_config_fetch"],[e.CLIENT_CONFIG_FAILED,"upload.client.failed_client_config_fetch"],[e.CLIENT_CONFIG_CACHED,"upload.client.cached_client_config_fetch"]]),p=new Map([[(s=r("MediaUploadSessionEvent")).SESSION_CONFIRMED,"upload.client.started_flow"],[s.PUBLISH_STARTED,"upload.client.started_sending_post_request"],[s.PUBLISH_SUCCEED,"upload.client.finished_sending_post_request"],[s.PUBLISH_FAILED,"upload.client.failed_sending_post_request"]]),_=new Map([[r("MediaUploadSessionStatus").FAILED,"upload.client.failed_flow"],[r("MediaUploadSessionStatus").CANCELED,"upload.client.canceled_flow"],[r("MediaUploadSessionStatus").COMPLETED,"upload.client.finished_flow"]]),f=new Map([[(u=r("MediaUploadAssetEvent")).ASSET_ADDED,"upload.client.requested_uploading"],[u.ASSET_STARTED,"upload.client.started_uploading"],[u.ASSET_FAILED,"upload.client.failed_uploading"],[u.ASSET_REMOVED,"upload.client.canceled_uploading"],[u.ASSET_SUCCEED,"upload.client.finished_uploading"],[u.ASSET_STALL,"upload.client.stall_detected"]]),g=new Map([[(c=r("MediaUploadStageEvent")).STAGE_STARTED,new Map([[(d=r("MediaUploadFBStage")).START_REQUEST,"upload.client.started_sending_start_request"],[d.BYTES_UPLOAD,"upload.client.started_sending_bytes"],[d.RECEIVE_REQUEST,"upload.client.started_sending_receive_request"]])],[c.STAGE_SUCCEED,new Map([[d.START_REQUEST,"upload.client.finished_sending_start_request"],[d.BYTES_UPLOAD,"upload.client.finished_sending_bytes"],[d.RECEIVE_REQUEST,"upload.client.finished_sending_receive_request"]])],[c.STAGE_FAILED,new Map([[d.START_REQUEST,"upload.client.failed_sending_start_request"],[d.RECEIVE_REQUEST,"upload.client.failed_sending_receive_request"],[d.BYTES_UPLOAD,"upload.client.failed_sending_bytes"],[d.METADATA_VALIDATION,"upload.client.invalidated_uploading"]])],[c.STAGE_CANCELED,new Map([[d.START_REQUEST,"upload.client.canceled_sending_start_request"],[d.BYTES_UPLOAD,"upload.client.canceled_sending_bytes"],[d.RECEIVE_REQUEST,"upload.client.canceled_sending_receive_request"]])]]),h=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.subscribe=function(t,n){var e=this;m.forEach(function(r,o){t.addClientEventListener(o,function(t){return e.$3(n,r,t)})}),p.forEach(function(r,o){t.addSessionEventListener(o,function(t){return e.$4(n,r,t)})}),_.forEach(function(o,a){t.addSessionEventListener(r("MediaUploadSessionEvent").SESSION_FINISHED,function(t){t.terminalStatus===a&&t.timing.confirmedAtMs!=null&&e.$4(n,o,t)})}),f.forEach(function(r,o){t.addAssetEventListener(o,function(t,o){return e.$5(n,r,t,o)})}),g.forEach(function(r,o){r.forEach(function(r,a){t.addStageEventListener(o,a,function(t,o){e.$5(n,r,t,o)})})})},t.$6=function(t){return t==null?null:o("MediaUploadTime").timeToMilliseconds(this.$1.currentTimeProvider())-t},t.$7=function(t,n){var e,o;return{event:t,application_state:"www_v2",is_chunked_upload:!0,file_can_read:this.$1.features.supportFileManipulation,network_status:(e=this.$2)==null||(e=e.injectNetworkStatus)==null?void 0:e.getNetworkStatus(),internet_status:(o=this.$2)==null||(o=o.injectNetworkStatus)==null?void 0:o.getInternetStatus(),trigger_time:this.$1.currentTimeProvider(),app_id:r("CurrentUser").getAppID(),source:n.sourceType,composer_entry_point_ref:n.entryPointRef}},t.$8=function(t){var e,n,o,a,i,l=(t==null?void 0:t.rawErrorCode)!=null&&typeof(t==null?void 0:t.rawErrorCode)=="string"?t==null?void 0:t.rawErrorCode:void 0,s=(t==null?void 0:t.rawErrorCode)!=null&&typeof(t==null?void 0:t.rawErrorCode)=="number"?t==null?void 0:t.rawErrorCode:void 0;return{error:l!=null?l:t==null||(e=t.displayError)==null?void 0:e.summary,error_inner:(t==null?void 0:t.outcome)===r("MediaUploadFBStageOutcome").SUCCESS||t==null?void 0:t.outcome,error_description:(n=t==null||(o=t.errorObject)==null?void 0:o.message)!=null?n:t==null||(a=t.displayError)==null?void 0:a.description,error_trace:t==null||(i=t.errorObject)==null?void 0:i.stack,error_code:s}},t.$9=function(t){return{event_reason:t.cancelReason,elapsed_time:this.$6(t.timing.confirmedAtMs),waterfall_id:t.sessionID,retry_id:t.retryID}},t.$10=function(t){var e,n,r,o,a,i,l,s,u;return{elapsed_time:this.$6(t.lastUploadStartedAtMs),asset_id:t.assetID,video_id:t.videoID,composer_session_id:t.request.attributes.composerSessionID,target_id:t.request.attributes.targetID,composer_dialog_version:t.request.attributes.composerDialogVersion,has_file_been_replaced:t.request.attributes.hasFileBeenReplaced,source_width:(e=t.metadata)==null?void 0:e.width,source_height:(n=t.metadata)==null?void 0:n.height,is_spherical:(r=t.metadata)==null?void 0:r.isSpherical,duration:(o=t.metadata)==null?void 0:o.durationMs,file_size:(a=t.asset.dataAsFile())==null?void 0:a.size,video_original_file_path:t.asset.data.name,hash:(i=t.hash)==null?void 0:i.hashValue,hash_time:(l=t.hash)==null?void 0:l.calculationTimeCostMs,retries:t.retries.totalRetryAttempts,upload_domain:t.uploadServiceDomain,upload_speed:(s=t.uploadSummary)==null?void 0:s.speedBps,skip_upload:(u=t.uploadSummary)==null?void 0:u.skippedUpload}},t.$11=function(t){var e,n;return((e=this.$2)==null?void 0:e.injectExtraSessionFields)!=null?(n=this.$2)==null?void 0:n.injectExtraSessionFields(t):null},t.$12=function(t,n){var e,r;return((e=this.$2)==null?void 0:e.injectExtraAssetFields)!=null?(r=this.$2)==null?void 0:r.injectExtraAssetFields(t,n):null},t.$13=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return e!=null?e:{}});return Object.assign.apply(Object,[{}].concat(r))},t.$3=function(t,n,r){var e=r.assetSnapshot,o=r.sessionSnapshot,a=this.$13(o==null?null:this.$11(o),o==null||e==null?null:this.$12(o,e),this.$7(n,t),o==null?null:this.$9(o),o==null||e==null?null:this.$10(e),this.$8(r),{elapsed_time:this.$6(r.startedAtMs)});this.$14(a)},t.$4=function(t,n,r){var e=this.$13(this.$11(r),this.$7(n,t),this.$9(r),this.$8(r.lastError));this.$14(e)},t.$5=function(t,n,r,o){var e=this.$13(this.$11(r),this.$12(r,o),this.$7(n,t),this.$9(r),this.$10(o),this.$8(o.lastAction));this.$14(e)},t.$14=function(t){r("logVideoUploadViaFalco")(t)},e})();l.default=h}),98);
__d("MediaUploadLinearProgressCalculator",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e,this.$2=this.$4(),this.$3=this.$1.sessionWeights.assets+this.$1.sessionWeights.publishing}var t=e.prototype;return t.$4=function(){var e=this.$1.assetWeights.uploadBytes;return this.$1.assetWeights.singleOperations.forEach(function(t){return e+=t}),e},t.$5=function(t,n){var e=Math.floor(t*100/this.$1.percentagePrecision)*this.$1.percentagePrecision,r=Math.abs(e-n)>=this.$1.percentagePrecision;return{percentageProgress:e,isDifferent:r}},t.calculateAssetProgress=function(t){var e=this.$1.assetWeights,n=0;if(t.isCompleted())n=1;else{for(var r of t.progress.completedStages.values()){var o=e.singleOperations.get(r);o!=null&&(n+=o)}var a=t.uploadSummary.computeUploadedPortion();a!=null&&(n+=e.uploadBytes*a),n/=this.$2}var i=this.$5(n,t.progress.calculated.percentageComplete);return t.progress.calculated.rawValue=n,t.progress.calculated.percentageComplete=i.percentageProgress,t.progress.calculated.rawValue=n,i.isDifferent},t.calculateSessionProgress=function(t){var e=this.$1.sessionWeights,n=0;t.progress.publishingDone&&(n+=e.publishing);var r=t.getActiveAssets();if(r.length>0){var o=e.assets/r.length;t.getActiveAssets().forEach(function(e){n+=o*e.progress.calculated.rawValue})}else n+=e.assets;n/=this.$3;var a=this.$5(n,t.progress.percentageComplete);return t.progress.percentageComplete=a.percentageProgress,a.isDifferent},e})();i.default=e}),66);
__d("MediaUploadNetworkMonitor",["MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadNetworkStatus","MediaUploadRetryState","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={probe:function(){return r("MediaUploadNetworkStatus").UNKNOWN}},u={probe:function(){return(e||(e=n("Promise"))).resolve(r("MediaUploadNetworkStatus").UNKNOWN)}},c=(function(){function e(e,t){this.$1=e,this.$3=s,this.$2=u,this.$4=r("MediaUploadNetworkStatus").UNKNOWN,this.$5=new Map,this.$6=null,this.$8=null,this.$9=t.emitClientEvent}var t=e.prototype;return t.updateConfiguration=function(t){var e,n;this.$3=(e=t.networkProbe)!=null?e:s,this.$2=(n=t.internetProbe)!=null?n:u,this.$7=t.internetProbeBackoffPolicy==null?null:new(r("MediaUploadRetryState"))(t.internetProbeBackoffPolicy,this.$1),this.$8=t.stallDetectorTimeout,this.$10()},t.getNetworkStatus=function(){return this.$3.probe()},t.getInternetStatus=function(){return this.$4},t.$11=function(t,n){return t.sessionContext.sessionID+"/"+t.assetID+"/"+String(n)},t.$12=function(t,n,o){var e,a;this.$13(r("MediaUploadNetworkStatus").CONNECTED),(e=this.$7)==null||e.resetBackoff(),(a=this.$6)==null||a.cancel(),this.$6=null;var i=this.$11(t,n);o&&this.$5.set(i,{assetContext:t}),this.$10(),this.$14(i)},t.$15=function(t,n){var e=this.$11(t,n),r=this.$5.get(e);if(r!=null){var o;(o=r.stallDetector)==null||o.cancel(),r.stallDetector=null}this.$5.delete(e)},t.$14=function(t){var e,n=this.$8;if(n!=null){var o=this.$5.get(t);o!=null&&((e=o.stallDetector)==null||e.cancel(),o.stallDetector=this.$1.delayedExecutor(n,function(){o.assetContext.emitAssetEvent(r("MediaUploadAssetEvent").ASSET_STALL),o.stallDetector=null}))}},t.$10=function(){var e=this,t=this.$7;t!=null&&this.$5.size!==0&&this.$6==null&&(this.$6=this.$1.delayedExecutor(t.calculateBackoffDelay(),function(){var t=e.$2.probe().then(function(t){return e.$13(t)}).finally(function(){e.$6=null,e.$10()});e.$1.promiseTerminator(t)}),t.increaseRetryAttemptCounter())},t.$13=function(t){if(this.$4!==t)switch(this.$4=t,this.$4){case r("MediaUploadNetworkStatus").CONNECTED:this.$9(r("MediaUploadClientEvent").CLIENT_INTERNET_ONLINE);break;case r("MediaUploadNetworkStatus").DISCONNECTED:this.$9(r("MediaUploadClientEvent").CLIENT_INTERNET_OFFLINE);break;case r("MediaUploadNetworkStatus").TIMEOUT:this.$9(r("MediaUploadClientEvent").CLIENT_INTERNET_UNKNOWN);break;case r("MediaUploadNetworkStatus").UNKNOWN:}},t.notifyOnNewRequest=function(t,n){this.$12(t,n,!0)},t.notifyOnProgress=function(t,n){this.$12(t,n,!1)},t.notifyOnAbandon=function(t,n){this.$15(t,n)},t.notifyOnTransportError=function(t,n){this.$15(t,n)},t.notifyOnResponse=function(t,n){this.$15(t,n),this.$12(t,n,!1)},e})();l.default=c}),98);
__d("MediaUploadFBDefaultClientContext",["MediaUploadClientContext","MediaUploadClientEvent","MediaUploadEventEmitterAdapter","MediaUploadExecutor","MediaUploadFBAssetContext","MediaUploadFBAssetRequest","MediaUploadFBClient","MediaUploadFBClientEventContext","MediaUploadFBDefaultServerConfigurationRetriever","MediaUploadFBFileHasher","MediaUploadFBInternetProbe","MediaUploadFBLocalAssetStrategy","MediaUploadFBMetadataParser","MediaUploadFBMetadataValidator","MediaUploadFBNetworkAssetStrategy","MediaUploadFBNetworkProbe","MediaUploadFBReceiveRequest","MediaUploadFBSessionContext","MediaUploadFBStage","MediaUploadFBStartRequest","MediaUploadFBUploadServiceRequest","MediaUploadFalcoLogger","MediaUploadLinearProgressCalculator","MediaUploadNetworkMonitor","cr:1856704"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,o){var a,i=new(r("MediaUploadEventEmitterAdapter"))(t);return a=e.call(this,{sdk:t,emitter:i.emitter,executor:new(r("MediaUploadExecutor")),progressCalculator:new(r("MediaUploadLinearProgressCalculator"))({assetWeights:{uploadBytes:.9,singleOperations:new Map([[r("MediaUploadFBStage").START_REQUEST,.05],[r("MediaUploadFBStage").RECEIVE_REQUEST,.05]])},sessionWeights:{publishing:.1,assets:.9},percentagePrecision:1})})||this,a.entryPoint=n,a.eventAdapter=i,a.configuration=o,a.networkMonitor=new(r("MediaUploadNetworkMonitor"))(a.sdk,{emitClientEvent:function(o){return i.emitter.emitClientEvent(o,new(r("MediaUploadFBClientEventContext"))({entryPoint:n,envParams:t}))}}),a.localAssetStategy=a.$MediaUploadFBDefaultClientContext$p_1(),a.networkAssetStategy=a.$MediaUploadFBDefaultClientContext$p_2(),a.serverConfigurationRetriever=new(r("MediaUploadFBDefaultServerConfigurationRetriever"))({entryPoint:n,emitter:a.emitter,setters:{metadataValidation:function(t){a.localAssetStategy.metadataValidator.configuration=t},startRequest:function(t){a.networkAssetStategy.startRequest.configuration=t},receiveRequest:function(t){a.networkAssetStategy.receiveRequest.configuration=t},uploadService:function(t){a.networkAssetStategy.uploadServiceRequest.configuration=t},networkMonitor:function(t){a.networkMonitor.updateConfiguration({networkProbe:t.networkProbe.enabled?new(r("MediaUploadFBNetworkProbe")):null,internetProbe:t.internetProbe.enabled?new(r("MediaUploadFBInternetProbe"))({timeout:t.internetProbe.timeout},a.sdk):null,internetProbeBackoffPolicy:t.internetProbe.backoffPolicy,stallDetectorTimeout:t.stallDetector.enabled?t.stallDetector.timeout:null})}},envParams:a.sdk}),a.client=new(r("MediaUploadFBClient"))({implementation:a,sessionStrategy:a.sessionStrategy,envParams:a.sdk}),a.emitter.emitClientEvent(r("MediaUploadClientEvent").CLIENT_CREATED,new(r("MediaUploadFBClientEventContext"))({entryPoint:n,envParams:a.sdk})),a}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.$MediaUploadFBDefaultClientContext$p_1=function(){return new(r("MediaUploadFBLocalAssetStrategy"))({envParams:this.sdk,metadataParser:new(r("MediaUploadFBMetadataParser")),metadataValidator:new(r("MediaUploadFBMetadataValidator"))(this.sdk),fileHasher:new(r("MediaUploadFBFileHasher"))({pseudoHasher:n("cr:1856704")==null?void 0:new(n("cr:1856704"))({maxChunkSize:1048576,takeFirstBytes:102400,hashingAlgorithm:"sha256",outputEncoding:"base64"},this.sdk)})})},o.$MediaUploadFBDefaultClientContext$p_2=function(){var e,t,n,o,a=new(r("MediaUploadFBStartRequest"))({entryPoint:this.entryPoint,payloadHook:(e=this.configuration.networkHooks)==null?void 0:e.startRequestPayload,customHeadersHook:(t=this.configuration.networkHooks)==null?void 0:t.startRequestCustomHeaders,envParams:this.sdk,networkNotifier:this.networkMonitor}),i=new(r("MediaUploadFBUploadServiceRequest"))({envParams:this.sdk,networkNotifier:this.networkMonitor}),l=new(r("MediaUploadFBReceiveRequest"))({entryPoint:this.entryPoint,payloadHook:(n=this.configuration.networkHooks)==null?void 0:n.receiveRequestPayload,customHeadersHook:(o=this.configuration.networkHooks)==null?void 0:o.receiveRequestCustomHeaders,envParams:this.sdk,networkNotifier:this.networkMonitor});return new(r("MediaUploadFBNetworkAssetStrategy"))(this.sdk,a,i,l)},o.runClientLazyLoading=function(t){return this.serverConfigurationRetriever.run(r("MediaUploadFBAssetContext").castOrThrow(t,this.sdk))},o.runLocalAssetStategy=function(t){return this.localAssetStategy.run(r("MediaUploadFBAssetContext").castOrThrow(t,this.sdk))},o.runNetworkAssetStategy=function(t){return this.networkAssetStategy.run(r("MediaUploadFBAssetContext").castOrThrow(t,this.sdk))},o.createSessionContext=function(t){return new(r("MediaUploadFBSessionContext"))({sessionID:t,entryPoint:this.entryPoint,emitter:this.emitter,progressCalculator:this.progressCalculator,params:this.sdk})},o.createAssetContext=function(t,n){return new(r("MediaUploadFBAssetContext"))({sessionContext:r("MediaUploadFBSessionContext").castOrThrow(t,this.sdk),assetRequest:r("MediaUploadFBAssetRequest").castOrThrow(n,this.sdk),emitter:this.emitter,progressCalculator:this.progressCalculator,retryState:this.createRetryState(),params:this.sdk})},o.publish=function(t,n){var e=this,o=r("MediaUploadFBSessionContext").castOrThrow(t,this.sdk).composeSnapshot(),a=n.map(function(t){return r("MediaUploadFBAssetContext").castOrThrow(t,e.sdk).composeSnapshot()});return this.configuration.eventHooks.publishCallback(o,a)},o.subscribeToHooks=function(){var e=this,t=new(r("MediaUploadFalcoLogger"))(this.sdk,{injectNetworkStatus:this.networkMonitor,injectExtraSessionFields:function(){return{composer_dialog_version:e.configuration.composerDialogVersion}}});t.subscribe(this.eventAdapter.subscriber,this.entryPoint),this.configuration.eventHooks.eventSubscriber!=null&&this.configuration.eventHooks.eventSubscriber(this.eventAdapter.subscriber)},t})(r("MediaUploadClientContext"));l.default=e}),98);
__d("MediaUploadSurface",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=t,this.sdk=e}var t=e.prototype;return t.isClientSupported=function(t){var e=this.$1.get(t.key);return e!=null},t.getClient=function(t){var e=this.$1.get(t.key);if(e==null)throw this.sdk.createThrowableError("Client configuration was not provided for the entry point "+t.key);return e()},e})();i.default=e}),66);
__d("MediaUploadFBSurface",["MediaUploadExtrasStorage","MediaUploadFBAssetRequest","MediaUploadSurface"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){return e.call(this,t,n)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.createAssetRequest=function(t,n,o,a){var e=t(this.sdk.factories.assets),i;a!=null&&(i=new(r("MediaUploadExtrasStorage"))(this.sdk),a(i));var l;return typeof o=="function"?l=o(e):l=o,new(r("MediaUploadFBAssetRequest"))({asset:e,assetID:n,attributes:l,extras:i})},t})(r("MediaUploadSurface"));l.default=e}),98);
__d("MediaUploadSurfaceDefinition",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e,this.$2=new Map,this.$3=new Map}var t=e.prototype;return t.$4=function(t,n){var e=this;return function(){var r=e.$3.get(t.key);return r==null&&(r=e.$1.client(t,n),e.$3.set(t.key,r)),r}},t.registerClientConfiguration=function(t){var e=this;return t.entryPoints.forEach(function(n){e.$2.set(n.key,e.$4(n,t))}),this},t.createSurface=function(){return this.$1.surface(this.$2)},e})();i.default=e}),66);
__d("MediaUploadFBDefaultSurfaceDefinition",["MediaUploadFBDefaultClientContext","MediaUploadFBEntryPointID","MediaUploadFBSurface","MediaUploadSurfaceDefinition"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,{client:function(n,o){var e=new(r("MediaUploadFBDefaultClientContext"))(t,r("MediaUploadFBEntryPointID").castOrThrow(n,t),o);return e.client},surface:function(n){return new(r("MediaUploadFBSurface"))(t,n)}})||this}return babelHelpers.inheritsLoose(t,e),t})(r("MediaUploadSurfaceDefinition"));l.default=e}),98);
__d("MediaUploadVUShimSurface",["MediaUploadFBDefaultSurfaceDefinition","MediaUploadFBEntryPointID","MediaUploadFBSDK","MediaUploadVUShim"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(r("MediaUploadFBDefaultSurfaceDefinition"))(r("MediaUploadFBSDK"));s.registerClientConfiguration({entryPoints:[new(e=r("MediaUploadFBEntryPointID"))("composer","pages_feed"),new e("composer","pages_feed_video_composer"),new e("newsfeed_composer","feed"),new e("composer","timeline")],eventHooks:{publishCallback:function(t,n){return r("MediaUploadVUShim").triggerPublish(t,n)},eventSubscriber:function(t){r("MediaUploadVUShim").setupEventSubscription(t)}}});var u=s.createSurface(),c=u;l.default=c}),98);
__d("VideoUploadCrashMonitor",["Bandicoot","VideoUploadLogger"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(t,n,r,o,a,i,l,s){var u;return u=e.call(this,"VideoUploadSession")||this,u.$VideoUploadCrashMonitor1={waterfallID:t,actorID:n,source:r,targetID:o,loggingDelay:a,supportsChunking:i,composerEntryPointRef:l,flowStarted:s},u}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.flowStarted=function(){this.$VideoUploadCrashMonitor1.flowStarted=!0},r.getCrashTimeData=function(){return this.$VideoUploadCrashMonitor1},r.logCrash=function(t,r,o){if(r.waterfallID){var e=new(n("VideoUploadLogger"))({actor_id:r.actorID,source:r.source,waterfall_id:r.waterfallID,target_id:r.targetID,delay:r.loggingDelay,is_chunked_upload:r.supportsChunking,composer_entry_point_ref:r.composerEntryPointRef}),a={error:"Crash Detected",error_description:"Detected video upload did not complete due to a crash"};e.logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,a),r.flowStarted&&e.logEvent(n("VideoUploadLogger").EVENT_RESIGNED_FLOW,{})}},t})(n("Bandicoot"));a.exports=e}),null);
__d("GraphQLVideoPublishUtils",["immutable"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("immutable").List(["cs_ab_testing_video_upload","cs_content_library","cs_content_library_bulk_upload","cs_content_library_upload_videos","cs_content_show_episode_upload","cs_global_basic_post","cs_global_bulk_upload","cs_global_multipost","cs_global_upload_video","cs_home_basic_post","cs_home_bulk_video","cs_home_upload_video","cs_home_multipost","cs_instagram_content_library","media_manager","pages_feed_video_composer","pages_composer_bulk_upload_upsell","page_content_tab_drafts","page_content_tab_published_posts_opted_out","page_content_tab_scheduled_posts_opted_out","page_content_tab_video_library","page_content_tab_video_library_premiere","pages_posts","pages_video_tab","timeline","video_page_video_list","cs_unified_composer_optout","cs_content_show_trailer_upload","biz_web_testing_video_upload"]);n=n.push("feed_story");var o=n.contains(t);return(e==="composer"||e==="media_manager_instagram_video_composer"||e==="comment")&&o}l.isGraphQLPublish=e}),98);
__d("ResumableUploadAsyncService",["AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rupload",u="facebook.com",c=(function(t){function n(e,n,o,a,i,l,c,d,m){var p;return p=t.call(this)||this,p.consumer=e,p.accessToken=n,p.sessionKey=o||r("uuidv4")(),p.contentKey=a||"",p.contentValue=i||"",p.serviceName=l&&l!=""?l:s,p.serviceDomain=c&&c!=""?c:u,p.receiveParameters=d,p.tracingHeaderValue=m,p}babelHelpers.inheritsLoose(n,t),n.create=function(t){return new n(t.consumer,t.accessToken,t.sessionKey||"",t.contentKey,t.contentValue,t.serviceName,t.serviceDomain,t.receiveParameters,t.tracingHeaderValue)};var o=n.prototype;return o.resume=async function(t){try{var e=await this.sendOffsetRequest();this.emit(r("ResumableUploadServiceState.enum").START,{offset:e.offset});var n=await this.sendUploadRequest(t,e);this.emit(r("ResumableUploadServiceState.enum").SUCCESS,n.h)}catch(e){this.emit(r("ResumableUploadServiceState.enum").FAIL,e)}this.abortUpload=void 0},o.cancel=function(){this.abortUpload&&this.abortUpload(),this.emit(r("ResumableUploadServiceState.enum").CANCEL)},o.sendOffsetRequest=function(){var e=this;return new Promise(function(t,n){var o=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(e.getUploadUri()).setReadOnly(!0).setRequestHeader("Authorization","OAuth "+e.accessToken).setHandler(function(e){return t(JSON.parse(e.payload.response))}).setErrorHandler(n).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(t){e.emit(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,t)});e.abortUpload=function(){return o.abort()},o.send()})},o.sendUploadRequest=function(t,n){var e=this,o=n||{},a=o.offset,i=o.duplicate,l=i?"":t.slice(a);return new Promise(function(n,o){var i=new(r("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(e.getUploadUri()).setRawData(l).setHandler(function(e){return n(JSON.parse(e.payload.response))}).setErrorHandler(o).setRequestHeader("Authorization","OAuth "+e.accessToken).setRequestHeader("X-Entity-Name",encodeURIComponent(t.name)).setRequestHeader("X-Entity-Type",t.type).setRequestHeader("X-Entity-Length",String(t.size)).setRequestHeader("Offset",String(a)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(n){var o=new ProgressEvent("upload-service",{total:t.size,loaded:n.loaded+Number(a)});e.emit(r("ResumableUploadServiceState.enum").PROGRESS,o)}).setTransportErrorHandler(function(t){e.emit(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,t)});e.abortUpload=function(){return i.abort()};var s=e.receiveParameters;s&&(i.setRequestHeader("start_offset",String(s.start_offset)).setRequestHeader("end_offset",String(s.end_offset)).setRequestHeader("composer_session_id",String(s.composer_session_id)).setRequestHeader("id",String(s.upload_session_id)),s.fb_region&&i.setRequestHeader("X-FB-Region",String(s.fb_region))),e.tracingHeaderValue&&i.setRequestHeader("x-fb-product-log",e.tracingHeaderValue),i.send()})},o.getUploadUri=function(){var t=this.getServiceName(),n=new(e||(e=r("URI")))("https://"+t+"/"+this.consumer+"/"+this.sessionKey);return this.contentKey&&this.contentValue&&(n=n.addQueryData(this.contentKey,this.contentValue)),n},o.getServiceName=function(){return this.serviceName+"."+this.serviceDomain},n})(r("EventEmitter"));l.default=c}),98);
__d("VideoUploadConnectionMonitor",["Network","VideoUploadFeatureDetector","cr:909282","debounce","mixin","setTimeout"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(){var t;return t=e.call(this)||this,t.$VideoUploadConnectionMonitor$p_1=!1,t.$VideoUploadConnectionMonitor$p_2=[],t.$VideoUploadConnectionMonitor$p_3=!1,t.$VideoUploadConnectionMonitor$p_4=!0,t.$VideoUploadConnectionMonitor$p_5=n("debounce")(function(){t.$VideoUploadConnectionMonitor$p_6(!1)},2e3),t}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.notifyStart=function(){var e=this;this.$VideoUploadConnectionMonitor$p_3||(this.$VideoUploadConnectionMonitor$p_2.length===0&&(this.$VideoUploadConnectionMonitor$p_2.push(n("Network").addListener("online",function(){e.$VideoUploadConnectionMonitor$p_6(!0)})),this.$VideoUploadConnectionMonitor$p_2.push(n("Network").addListener("offline",function(){e.$VideoUploadConnectionMonitor$p_1?e.$VideoUploadConnectionMonitor$p_5():(e.$VideoUploadConnectionMonitor$p_5.reset(),n("setTimeout")(e.$VideoUploadConnectionMonitor$p_5,2e3))}))),this.$VideoUploadConnectionMonitor$p_3=!0)},r.notifyProgress=function(t){this.$VideoUploadConnectionMonitor$p_3&&t&&n("VideoUploadFeatureDetector").supportsFullProgress()&&(this.$VideoUploadConnectionMonitor$p_1=!0,t.total&&t.loaded===t.total?this.$VideoUploadConnectionMonitor$p_5.reset():this.$VideoUploadConnectionMonitor$p_5())},r.notifySuccess=function(){this.$VideoUploadConnectionMonitor$p_3&&(this.reset(),this.$VideoUploadConnectionMonitor$p_6(!0))},r.notifyTransportError=function(){this.$VideoUploadConnectionMonitor$p_3&&(this.$VideoUploadConnectionMonitor$p_3=!1,this.$VideoUploadConnectionMonitor$p_6(!1))},r.notifyError=function(){this.$VideoUploadConnectionMonitor$p_3&&(this.reset(),this.$VideoUploadConnectionMonitor$p_6(!0))},r.isOnline=function(){return this.$VideoUploadConnectionMonitor$p_4},r.reset=function(){for(;this.$VideoUploadConnectionMonitor$p_2.length;)this.$VideoUploadConnectionMonitor$p_2.pop().remove();this.$VideoUploadConnectionMonitor$p_5.reset(),this.$VideoUploadConnectionMonitor$p_3=!1},r.$VideoUploadConnectionMonitor$p_6=function(t){this.$VideoUploadConnectionMonitor$p_5.reset(),this.$VideoUploadConnectionMonitor$p_4!==t&&(this.$VideoUploadConnectionMonitor$p_4=t,this.$VideoUploadConnectionMonitor$p_4?this.inform("online"):this.inform("offline"))},t})(n("mixin")(n("cr:909282")));a.exports=e}),null);
__d("VideoUploadReceiveRequestManager",["fbt","ODS","ResumableUploadAsyncService","ResumableUploadService","ResumableUploadServiceState.enum","VideoUploadConnectionMonitor","VideoUploadRequest","clearTimeout","cr:909282","err","isEmpty","md5","mixin","setTimeout","uuidv4"],(function(t,n,r,o,a,i,l,s){var e,u,c=1363037,d={INITIAL:"initial",NEXT_CHUNK:"next chunk",INVALID_OFFSET_RETRY:"invalid offset retry",SERVER_FAILURE_RETRY:"server failure retry",TRANSPORT_FAILURE_RETRY:"transport failure retry",TIMEOUT_RETRY:"timeout retry",BACK_ONLINE:"back online"},m=(function(t){function n(e,n,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L){var E;return m===void 0&&(m=""),p===void 0&&(p=!1),_===void 0&&(_=!1),f===void 0&&(f=null),g===void 0&&(g=null),h===void 0&&(h=null),y===void 0&&(y=0),C===void 0&&(C=!1),b===void 0&&(b=!1),v===void 0&&(v=!1),S===void 0&&(S=!1),R===void 0&&(R=!1),L===void 0&&(L=0),E=t.call(this)||this,E.$VideoUploadReceiveRequestManager$p_1=e,E.$VideoUploadReceiveRequestManager$p_2=n,E.$VideoUploadReceiveRequestManager$p_3=o!=null?o:0,E.$VideoUploadReceiveRequestManager$p_4=a,E.$VideoUploadReceiveRequestManager$p_5=i,E.$VideoUploadReceiveRequestManager$p_6=l,E.$VideoUploadReceiveRequestManager$p_7=s,E.$VideoUploadReceiveRequestManager$p_8=u,E.$VideoUploadReceiveRequestManager$p_9=c,E.$VideoUploadReceiveRequestManager$p_10=d,E.$VideoUploadReceiveRequestManager$p_11=0,E.$VideoUploadReceiveRequestManager$p_14=0,E.$VideoUploadReceiveRequestManager$p_15=0,E.$VideoUploadReceiveRequestManager$p_16=null,E.$VideoUploadReceiveRequestManager$p_17=null,E.$VideoUploadReceiveRequestManager$p_18=0,E.$VideoUploadReceiveRequestManager$p_19="constructed",E.$VideoUploadReceiveRequestManager$p_13=null,E.$VideoUploadReceiveRequestManager$p_20=null,E.$VideoUploadReceiveRequestManager$p_21=null,E.$VideoUploadReceiveRequestManager$p_22=m,E.$VideoUploadReceiveRequestManager$p_24=_,E.$VideoUploadReceiveRequestManager$p_23=p,E.$VideoUploadReceiveRequestManager$p_25=f,E.$VideoUploadReceiveRequestManager$p_26=!1,E.$VideoUploadReceiveRequestManager$p_27=g,E.$VideoUploadReceiveRequestManager$p_30=C,E.$VideoUploadReceiveRequestManager$p_31=b,E.$VideoUploadReceiveRequestManager$p_32=v,E.$VideoUploadReceiveRequestManager$p_29=y,E.$VideoUploadReceiveRequestManager$p_33=S,E.$VideoUploadReceiveRequestManager$p_28=h,E.$VideoUploadReceiveRequestManager$p_12=r("uuidv4")(),E.$VideoUploadReceiveRequestManager$p_34=R,E.$VideoUploadReceiveRequestManager$p_35=L,E.$VideoUploadReceiveRequestManager$p_40=null,E.$VideoUploadReceiveRequestManager$p_41=null,E.$VideoUploadReceiveRequestManager$p_39=!1,E.$VideoUploadReceiveRequestManager$p_38=null,E.$VideoUploadReceiveRequestManager$p_36=new(r("VideoUploadConnectionMonitor")),E.$VideoUploadReceiveRequestManager$p_36.subscribe("online",E.$VideoUploadReceiveRequestManager$p_49.bind(E)),E.$VideoUploadReceiveRequestManager$p_36.subscribe("offline",E.$VideoUploadReceiveRequestManager$p_50.bind(E)),E}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.updateVideoID=function(t){this.$VideoUploadReceiveRequestManager$p_37.getVideoID()||(this.$VideoUploadReceiveRequestManager$p_37.setVideoID(t),this.$VideoUploadReceiveRequestManager$p_44&&this.$VideoUploadReceiveRequestManager$p_44.setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager$p_37)),this.$VideoUploadReceiveRequestManager$p_51())},a.isResumabilityEnabled=function(){return this.$VideoUploadReceiveRequestManager$p_23},a.isResumableServiceProxyReceiveEnabled=function(){return this.$VideoUploadReceiveRequestManager$p_30},a.sendRequest=function(t){if(this.$VideoUploadReceiveRequestManager$p_19="sending request",this.$VideoUploadReceiveRequestManager$p_44){this.$VideoUploadReceiveRequestManager$p_19="request already in progress";return}this.$VideoUploadReceiveRequestManager$p_18=t.getEndOffset()-t.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_37=t,this.$VideoUploadReceiveRequestManager$p_52(d.INITIAL)},a.cancelRequest=function(){this.$VideoUploadReceiveRequestManager$p_44&&(this.$VideoUploadReceiveRequestManager$p_44.abort(),this.$VideoUploadReceiveRequestManager$p_21!=null&&this.$VideoUploadReceiveRequestManager$p_21.cancel(),this.$VideoUploadReceiveRequestManager$p_53(),this.inform("request-canceled"))},a.appendStateLogData=function(t,n){t[n+"request_manager_state"]=this.$VideoUploadReceiveRequestManager$p_19,t[n+"upload_speed"]=this.$VideoUploadReceiveRequestManager$p_17,t[n+"transport_retries"]=this.$VideoUploadReceiveRequestManager$p_11,t[n+"server_retries"]=this.$VideoUploadReceiveRequestManager$p_14,t[n+"timeout_retries"]=this.$VideoUploadReceiveRequestManager$p_15,t[n+"last_timeout_value"]=this.$VideoUploadReceiveRequestManager$p_42,t[n+"last_request_start_time"]=this.$VideoUploadReceiveRequestManager$p_16,t[n+"pending_request"]=this.$VideoUploadReceiveRequestManager$p_44!=null,t[n+"pending_timer"]=this.$VideoUploadReceiveRequestManager$p_45!=null,t[n+"cached_chunk"]=this.$VideoUploadReceiveRequestManager$p_43!=null,t[n+"early_receive_start"]=this.$VideoUploadReceiveRequestManager$p_39,this.$VideoUploadReceiveRequestManager$p_37!=null&&(t[n+"start_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),t[n+"end_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),t[n+"partition_start_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getPartitionStartOffset(),t[n+"partition_end_offset"]=this.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()),this.$VideoUploadReceiveRequestManager$p_36!=null&&(t[n+"connection_monitor_online"]=this.$VideoUploadReceiveRequestManager$p_36.isOnline())},a.getHostName=function(t){try{return new URL(t).hostname}catch(e){return null}},a.$VideoUploadReceiveRequestManager$p_53=function(){this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_43=null,this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_14=0,this.$VideoUploadReceiveRequestManager$p_12=r("uuidv4")(),this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_16=null,this.$VideoUploadReceiveRequestManager$p_17=null,this.$VideoUploadReceiveRequestManager$p_18=0,this.$VideoUploadReceiveRequestManager$p_40=null,this.$VideoUploadReceiveRequestManager$p_41=null,this.$VideoUploadReceiveRequestManager$p_39=!1,this.$VideoUploadReceiveRequestManager$p_26=!1,this.$VideoUploadReceiveRequestManager$p_38=null,this.$VideoUploadReceiveRequestManager$p_37.reset(),this.$VideoUploadReceiveRequestManager$p_36.reset(),r("clearTimeout")(this.$VideoUploadReceiveRequestManager$p_45),this.$VideoUploadReceiveRequestManager$p_45=null},a.$VideoUploadReceiveRequestManager$p_52=function(t,n){if(r("clearTimeout")(this.$VideoUploadReceiveRequestManager$p_45),this.$VideoUploadReceiveRequestManager$p_45=null,this.$VideoUploadReceiveRequestManager$p_20=t,this.$VideoUploadReceiveRequestManager$p_13=r("uuidv4")(),this.$VideoUploadReceiveRequestManager$p_37.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager$p_37.getStartOffset()>=this.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()){n?this.$VideoUploadReceiveRequestManager$p_19="request finished - not notified":(this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{request_reason:this.$VideoUploadReceiveRequestManager$p_20,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}}),this.$VideoUploadReceiveRequestManager$p_19="request finished - notified");return}this.$VideoUploadReceiveRequestManager$p_44=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager$p_1).setAllowCrossOrigin(!0).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager$p_37)).setWaterfallID(this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager$p_54.bind(this)),this.$VideoUploadReceiveRequestManager$p_23||this.$VideoUploadReceiveRequestManager$p_44.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager$p_55.bind(this)),this.$VideoUploadReceiveRequestManager$p_16=Date.now(),this.$VideoUploadReceiveRequestManager$p_38=this.getHostName(this.$VideoUploadReceiveRequestManager$p_1);var e=!1;if(this.$VideoUploadReceiveRequestManager$p_37.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager$p_5){var o=this.$VideoUploadReceiveRequestManager$p_56(this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_17);this.$VideoUploadReceiveRequestManager$p_44.setTimeoutHandler(o,this.__handleResponseTimeout.bind(this)),this.$VideoUploadReceiveRequestManager$p_19="sending chunk with timeout = "+o,this.$VideoUploadReceiveRequestManager$p_42=o}else this.$VideoUploadReceiveRequestManager$p_19="sending chunk without timeout";var a=this.$VideoUploadReceiveRequestManager$p_57();if(a==null){var i="Provided chunk is null.",l=r("err")(i);l.is_js_error=!0,this.$VideoUploadReceiveRequestManager$p_58({error_description:i,error_is_transient:!1,error:l});return}else this.$VideoUploadReceiveRequestManager$p_23&&this.$VideoUploadReceiveRequestManager$p_29<this.$VideoUploadReceiveRequestManager$p_37.getFile().getSize()?(e=!0,this.$VideoUploadReceiveRequestManager$p_59(a)):this.$VideoUploadReceiveRequestManager$p_44.sendChunk(a)}else this.$VideoUploadReceiveRequestManager$p_19="sending file",this.$VideoUploadReceiveRequestManager$p_44.sendFile(this.$VideoUploadReceiveRequestManager$p_37.getFile().getFileInput());this.$VideoUploadReceiveRequestManager$p_60(e),this.$VideoUploadReceiveRequestManager$p_36.notifyStart(),this.inform("request-started",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{request_reason:this.$VideoUploadReceiveRequestManager$p_20,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}})},a.$VideoUploadReceiveRequestManager$p_60=function(t){(this.$VideoUploadReceiveRequestManager$p_37.getSource()==="create_flow"||this.$VideoUploadReceiveRequestManager$p_37.getSource()==="ads_interfaces")&&(u||(u=o("ODS"))).bumpEntityKey(2966,"video_ads_upload",t?"upload_service":"graph_api")},a.$VideoUploadReceiveRequestManager$p_61=function(t,n,r){this.$VideoUploadReceiveRequestManager$p_37.getVideoID()?t(n,r):(this.$VideoUploadReceiveRequestManager$p_40=t,this.$VideoUploadReceiveRequestManager$p_41=n)},a.$VideoUploadReceiveRequestManager$p_51=function(){this.$VideoUploadReceiveRequestManager$p_40&&(this.$VideoUploadReceiveRequestManager$p_40(this.$VideoUploadReceiveRequestManager$p_41),this.$VideoUploadReceiveRequestManager$p_40=null,this.$VideoUploadReceiveRequestManager$p_41=null)},a.$VideoUploadReceiveRequestManager$p_59=function(t){var e,n=this.$VideoUploadReceiveRequestManager$p_37.getFile(),o=n.getFile().lastModified+n.getFile().name+n.getFile().type+this.$VideoUploadReceiveRequestManager$p_62(),a=String(r("md5")(o))+"-"+this.$VideoUploadReceiveRequestManager$p_37.getStartOffset()+"-"+this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),i=((e=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:e.getRetryState())==null?this.$VideoUploadReceiveRequestManager$p_14+this.$VideoUploadReceiveRequestManager$p_11+this.$VideoUploadReceiveRequestManager$p_15:this.$VideoUploadReceiveRequestManager$p_37.getRetryState().getTotalRetryCount(),l=this.$VideoUploadReceiveRequestManager$p_34&&this.$VideoUploadReceiveRequestManager$p_35<n.getSize()?["video_upload_www",[this.$VideoUploadReceiveRequestManager$p_12,String(i)].join("_"),[String(this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID()),String(this.$VideoUploadReceiveRequestManager$p_37.getVideoID())].join("_")].join(":"):null;this.isResumabilityEnabled()&&this.$VideoUploadReceiveRequestManager$p_25&&this.$VideoUploadReceiveRequestManager$p_11>this.$VideoUploadReceiveRequestManager$p_2/3&&(this.$VideoUploadReceiveRequestManager$p_26=!0);var s="fb_video";this.$VideoUploadReceiveRequestManager$p_30&&(s="fb_video2");var u=null;if(this.$VideoUploadReceiveRequestManager$p_30||this.$VideoUploadReceiveRequestManager$p_31){var c={};c.start_offset=this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),c.end_offset=this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),c.composer_session_id=this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID(),c.upload_session_id=this.$VideoUploadReceiveRequestManager$p_37.getUploadSessionID(),c.product_media_id=this.$VideoUploadReceiveRequestManager$p_37.getVideoID(),c.xpv_asset_id=this.$VideoUploadReceiveRequestManager$p_37.getXPVAssetID(),c.is_xpv_single_prod=this.$VideoUploadReceiveRequestManager$p_37.getIsXPVSingleProd(),c.fb_region=this.$VideoUploadReceiveRequestManager$p_37.getFbRegion(),this.$VideoUploadReceiveRequestManager$p_32&&(c.total_file_size=this.$VideoUploadReceiveRequestManager$p_37.getFile().getSize()),u=c}var d={};d.consumer=s,d.sessionKey=a,d.serviceName=this.$VideoUploadReceiveRequestManager$p_26?null:this.$VideoUploadReceiveRequestManager$p_25,d.serviceDomain=this.$VideoUploadReceiveRequestManager$p_27,d.receiveParameters=u,d.tracingHeaderValue=l;var m;this.$VideoUploadReceiveRequestManager$p_24?m=r("ResumableUploadAsyncService").create(d):m=r("ResumableUploadService").create(d),this.$VideoUploadReceiveRequestManager$p_21=m,this.$VideoUploadReceiveRequestManager$p_38=m.getServiceName(),this.$VideoUploadReceiveRequestManager$p_63(),m.resume(t),this.inform("resumable-called",{debug:{single_request_id:this.$VideoUploadReceiveRequestManager$p_13,authority:this.$VideoUploadReceiveRequestManager$p_38}})},a.$VideoUploadReceiveRequestManager$p_63=function(){var e=this;this.$VideoUploadReceiveRequestManager$p_37.getVideoID()||(this.$VideoUploadReceiveRequestManager$p_39=!0);var t=this.$VideoUploadReceiveRequestManager$p_21;t!=null&&(t.addListener(r("ResumableUploadServiceState.enum").START,function(t){e.inform("resumable-started",{resume_from_offset:t.offset,debug:{single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),authority:e.$VideoUploadReceiveRequestManager$p_38}})}),this.$VideoUploadReceiveRequestManager$p_46=function(t){e.inform("resumable-failed",{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient(),debug:{error_source:"service",single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),authority:e.$VideoUploadReceiveRequestManager$p_38}}),e.__handleServerFailureResponse(t)},t.addListener(r("ResumableUploadServiceState.enum").FAIL,function(t){e.$VideoUploadReceiveRequestManager$p_61(e.$VideoUploadReceiveRequestManager$p_46,t)}),this.$VideoUploadReceiveRequestManager$p_47=function(t){e.$VideoUploadReceiveRequestManager$p_30?e.__handleSuccessResponsePayload({start_offset:e.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),end_offset:e.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()}):(e.$VideoUploadReceiveRequestManager$p_44.setHandle(t),e.$VideoUploadReceiveRequestManager$p_44.sendChunk(null)),e.inform("resumable-success",{everstore_handle:t,debug:{single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),authority:e.$VideoUploadReceiveRequestManager$p_38}})},t.addListener(r("ResumableUploadServiceState.enum").SUCCESS,function(t){e.$VideoUploadReceiveRequestManager$p_61(e.$VideoUploadReceiveRequestManager$p_47,t)}),this.$VideoUploadReceiveRequestManager$p_48=function(t,n){e.inform("resumable-failed",{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),error_is_transient:t.isTransient(),resume_from_offset:n.offset,debug:{error_source:"transport",single_request_id:e.$VideoUploadReceiveRequestManager$p_13,partition:e.$VideoUploadReceiveRequestManager$p_37.getPartitionNo(),method:n.method,authority:e.$VideoUploadReceiveRequestManager$p_38}}),e.$VideoUploadReceiveRequestManager$p_54(t)},t.addListener(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,function(t,n){e.$VideoUploadReceiveRequestManager$p_61(e.$VideoUploadReceiveRequestManager$p_48,t,n)}),t.addListener(r("ResumableUploadServiceState.enum").PROGRESS,function(t){e.$VideoUploadReceiveRequestManager$p_33&&(e.$VideoUploadReceiveRequestManager$p_11=0),e.$VideoUploadReceiveRequestManager$p_55(t)}))},a.__getVideoUploadRequest=function(t){return new(r("VideoUploadRequest"))(t)},a.$VideoUploadReceiveRequestManager$p_64=function(t,n){this.$VideoUploadReceiveRequestManager$p_19="setting request to send after"+n,r("clearTimeout")(this.$VideoUploadReceiveRequestManager$p_45),this.$VideoUploadReceiveRequestManager$p_45=r("setTimeout")(this.$VideoUploadReceiveRequestManager$p_52.bind(this,t),n)},a.$VideoUploadReceiveRequestManager$p_57=function(){if(this.$VideoUploadReceiveRequestManager$p_43)return this.$VideoUploadReceiveRequestManager$p_43;var e=this.$VideoUploadReceiveRequestManager$p_37.getFile();if(this.$VideoUploadReceiveRequestManager$p_23){var t=e.getFile();this.$VideoUploadReceiveRequestManager$p_43=t?t.slice(this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),"application/octet-stream"):null}else this.$VideoUploadReceiveRequestManager$p_43=e.getChunk(this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),this.$VideoUploadReceiveRequestManager$p_37.getEndOffset());return this.$VideoUploadReceiveRequestManager$p_43},a.__createRequestData=function(t){return{composer_session_id:t.getComposerSessionID(),video_id:t.getVideoID(),start_offset:t.getStartOffset(),end_offset:t.getEndOffset(),source:t.getSource(),target_id:t.getTargetID(),waterfall_id:t.getWaterfallID(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_work_shared_draft_mode:t.getComposerWorkSharedDraftMode(),composer_dialog_version:t.getComposerDialogVersion(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager$p_17,partition_start_offset:t.getPartitionStartOffset(),partition_end_offset:t.getPartitionEndOffset()}},a.__handleSuccessResponse=function(t){var e=t.getPayload();this.__handleSuccessResponsePayload(e)},a.__handleSuccessResponsePayload=function(t){this.$VideoUploadReceiveRequestManager$p_19="success response received";var e=Date.now()-(this.$VideoUploadReceiveRequestManager$p_16||0);if(e=e===0?1:e,t.start_offset===this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()){var n=this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-this.$VideoUploadReceiveRequestManager$p_37.getStartOffset();this.$VideoUploadReceiveRequestManager$p_17=Math.floor(n/e)}else this.$VideoUploadReceiveRequestManager$p_17=null;this.$VideoUploadReceiveRequestManager$p_36.notifySuccess(),this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{request_reason:this.$VideoUploadReceiveRequestManager$p_20,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}}),this.$VideoUploadReceiveRequestManager$p_37.setStartOffset(t.start_offset);var o=t.end_offset;this.$VideoUploadReceiveRequestManager$p_37.getClientChunkSize()&&(o=t.start_offset+Math.min(this.$VideoUploadReceiveRequestManager$p_37.getPartitionEndOffset()-t.start_offset,this.$VideoUploadReceiveRequestManager$p_37.getClientChunkSize())),this.$VideoUploadReceiveRequestManager$p_37.setEndOffset(o),this.$VideoUploadReceiveRequestManager$p_37.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager$p_17),this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_43=null,this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_14=0,this.$VideoUploadReceiveRequestManager$p_12=r("uuidv4")(),this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_37.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager$p_52(d.NEXT_CHUNK,!0)},a.$VideoUploadReceiveRequestManager$p_65=function(t){var e,n=this,r=t.getPayload();this.$VideoUploadReceiveRequestManager$p_19="invalid offset response received start="+r.start_offset+" end="+r.end_offset,(this.$VideoUploadReceiveRequestManager$p_37.getStartOffset()!=r.start_offset||this.$VideoUploadReceiveRequestManager$p_37.getEndOffset()!=r.end_offset)&&(this.$VideoUploadReceiveRequestManager$p_37.setStartOffset(r.start_offset),this.$VideoUploadReceiveRequestManager$p_37.setEndOffset(r.end_offset),this.$VideoUploadReceiveRequestManager$p_43=null),((e=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:e.getRetryState())==null?(this.$VideoUploadReceiveRequestManager$p_14++,this.$VideoUploadReceiveRequestManager$p_52(d.INVALID_OFFSET_RETRY)):this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-invalid_offset"},retryHandler:function(t){return n.$VideoUploadReceiveRequestManager$p_64(d.INVALID_OFFSET_RETRY,t)},failureHandler:function(){return n.$VideoUploadReceiveRequestManager$p_66(t)}})},a.__handleServerFailureResponse=function(t){var e=this;if(this.$VideoUploadReceiveRequestManager$p_19="failure response received",this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_17=null,this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_36.notifyError(),this.__hasInvalidStartOffsetAndHasRetries(t.getError()))this.$VideoUploadReceiveRequestManager$p_65(t);else{var n;((n=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:n.getRetryState())==null?(t.isTransient()||this.$VideoUploadReceiveRequestManager$p_10)&&this.$VideoUploadReceiveRequestManager$p_14<this.$VideoUploadReceiveRequestManager$p_4?(this.$VideoUploadReceiveRequestManager$p_19="transient server error",this.$VideoUploadReceiveRequestManager$p_14++,this.$VideoUploadReceiveRequestManager$p_64(d.SERVER_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager$p_67(this.$VideoUploadReceiveRequestManager$p_9,this.$VideoUploadReceiveRequestManager$p_14,0))):this.$VideoUploadReceiveRequestManager$p_66(t):this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-server_issue",error_code:t.getError()},predicate:function(){return t.isTransient()},retryHandler:function(n){e.$VideoUploadReceiveRequestManager$p_19="transient server error",e.$VideoUploadReceiveRequestManager$p_64(d.SERVER_FAILURE_RETRY,n)},failureHandler:function(){return e.$VideoUploadReceiveRequestManager$p_66(t)}})}},a.__handleResponseTimeout=function(t){var e=this,n;this.inform("request-timeout",{start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager$p_37.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager$p_11,server_retries:this.$VideoUploadReceiveRequestManager$p_14,timeout_retries:this.$VideoUploadReceiveRequestManager$p_15,upload_speed:this.$VideoUploadReceiveRequestManager$p_17,request_manager_state:this.$VideoUploadReceiveRequestManager$p_19,debug:{upload_domain:this.$VideoUploadReceiveRequestManager$p_38,single_request_id:this.$VideoUploadReceiveRequestManager$p_13}}),this.$VideoUploadReceiveRequestManager$p_44.abort(),this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_17=null,this.$VideoUploadReceiveRequestManager$p_36.notifyTransportError();var r=function(){var t=e.$VideoUploadReceiveRequestManager$p_37.getEndOffset()-e.$VideoUploadReceiveRequestManager$p_37.getStartOffset();t=Math.floor(t/2),t=Math.max(t,e.$VideoUploadReceiveRequestManager$p_18);var n=e.$VideoUploadReceiveRequestManager$p_37.getEndOffset();n=Math.min(n,e.$VideoUploadReceiveRequestManager$p_37.getStartOffset()+t),e.$VideoUploadReceiveRequestManager$p_37.setEndOffset(n),e.$VideoUploadReceiveRequestManager$p_43=null,e.$VideoUploadReceiveRequestManager$p_19="resending after timeout with chunksize="+t,e.$VideoUploadReceiveRequestManager$p_52(d.TIMEOUT_RETRY)},o=function(){e.$VideoUploadReceiveRequestManager$p_58({error_code:1006,error_description:s._(/*BTDS*/"Your browser appears to be offline. Please check your internet connection and try again."),error_summary:s._(/*BTDS*/"No Network Connection"),error_is_transient:!0,opes_mids:["fake_mid_network_connection"]})};((n=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:n.getRetryState())==null?++this.$VideoUploadReceiveRequestManager$p_15<=this.$VideoUploadReceiveRequestManager$p_6?r():o():this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-timeout",error_code:1006},retryHandler:function(t){return r()},failureHandler:function(){return o()}})},a.__hasInvalidStartOffsetAndHasRetries=function(t){return t===c&&this.$VideoUploadReceiveRequestManager$p_14<this.$VideoUploadReceiveRequestManager$p_4},a.$VideoUploadReceiveRequestManager$p_54=function(t){var e,n=this;this.$VideoUploadReceiveRequestManager$p_36.notifyTransportError(),this.$VideoUploadReceiveRequestManager$p_17=null,((e=this.$VideoUploadReceiveRequestManager$p_37)==null?void 0:e.getRetryState())==null?(this.$VideoUploadReceiveRequestManager$p_15=0,this.$VideoUploadReceiveRequestManager$p_11<this.$VideoUploadReceiveRequestManager$p_2?(this.$VideoUploadReceiveRequestManager$p_19="resending after transport failure",this.$VideoUploadReceiveRequestManager$p_11++,this.$VideoUploadReceiveRequestManager$p_44=null,this.$VideoUploadReceiveRequestManager$p_64(d.TRANSPORT_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager$p_67(this.$VideoUploadReceiveRequestManager$p_8,this.$VideoUploadReceiveRequestManager$p_11,this.$VideoUploadReceiveRequestManager$p_3))):this.$VideoUploadReceiveRequestManager$p_66(t)):this.$VideoUploadReceiveRequestManager$p_37.getRetryState().handleRetry({context:{location:"receive-transport_issue",error_code:t.getError()},retryHandler:function(t){n.$VideoUploadReceiveRequestManager$p_44=null,n.$VideoUploadReceiveRequestManager$p_19="resending after transport failure",n.$VideoUploadReceiveRequestManager$p_64(d.TRANSPORT_FAILURE_RETRY,t)},failureHandler:function(){return n.$VideoUploadReceiveRequestManager$p_66(t)}})},a.$VideoUploadReceiveRequestManager$p_66=function(n){var t,o,a=[].concat(n==null||(t=n.getPayload())==null||(t=t.error)==null?void 0:t.opes_mids,[n==null?void 0:n.errorMid]).filter(Boolean);this.$VideoUploadReceiveRequestManager$p_58({error_code:n.getError(),error_description:n.getErrorDescription(),error_summary:n.getErrorSummary(),error_is_transient:n.isTransient(),upload_domain:this.uploadDomain,www_request_id:(o=n.getPayload())==null?void 0:o.__www_request_id__,opes_mids:(e||(e=r("isEmpty")))(a)?null:a})},a.$VideoUploadReceiveRequestManager$p_58=function(t){this.$VideoUploadReceiveRequestManager$p_19="handling failure error",t.debug=babelHelpers.extends({},t.debug,{single_request_id:this.$VideoUploadReceiveRequestManager$p_13}),this.inform("request-failed",t),this.$VideoUploadReceiveRequestManager$p_53()},a.$VideoUploadReceiveRequestManager$p_55=function(t){this.$VideoUploadReceiveRequestManager$p_36.notifyProgress(t),this.$VideoUploadReceiveRequestManager$p_37&&this.$VideoUploadReceiveRequestManager$p_37.getFile()&&this.inform("request-progressed",{file_size:this.$VideoUploadReceiveRequestManager$p_37.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager$p_37.getStartOffset(),sent_bytes:t.loaded,transport_retries:this.$VideoUploadReceiveRequestManager$p_11,upload_domain:this.$VideoUploadReceiveRequestManager$p_38,debug:{single_request_id:this.$VideoUploadReceiveRequestManager$p_13}})},a.$VideoUploadReceiveRequestManager$p_49=function(){var e;this.inform("online"),this.$VideoUploadReceiveRequestManager$p_11=0,this.$VideoUploadReceiveRequestManager$p_15=0,(e=this.$VideoUploadReceiveRequestManager$p_37)==null||(e=e.getRetryState())==null||e.resetDelay(),this.$VideoUploadReceiveRequestManager$p_45&&this.$VideoUploadReceiveRequestManager$p_52(d.BACK_ONLINE)},a.$VideoUploadReceiveRequestManager$p_50=function(){this.inform("offline")},a.$VideoUploadReceiveRequestManager$p_67=function(t,n,r){var e=0;return this.$VideoUploadReceiveRequestManager$p_23?e=Math.min(Math.pow(t,n),8)*1e3:e=Math.pow(t,n)*1e3,r>0&&(e=Math.min(e,r)),e},a.$VideoUploadReceiveRequestManager$p_56=function(t,n){var e;n!=null&&n>0?e=n:e=10;var r=Math.floor(t/e*this.$VideoUploadReceiveRequestManager$p_7/100);return Math.max(r,3e4)},a.$VideoUploadReceiveRequestManager$p_62=function(){return this.$VideoUploadReceiveRequestManager$p_28?this.$VideoUploadReceiveRequestManager$p_28:this.$VideoUploadReceiveRequestManager$p_37.getWaterfallID()},n})(r("mixin")(n("cr:909282")));l.default=m}),226);
__d("FileHasher",["FileHashWorkerResource","WebWorker","emptyFunction","fileSliceName"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(){var e=this,t=n("FileHashWorkerResource");n("WebWorker").prepareResource(t),this.$1=new(n("WebWorker"))(t).setMessageHandler(function(t){e.$2(t)}).execute()}e.isSupported=function(){return n("WebWorker").isSupported()};var t=e.prototype;return t.hash=function(t,r){return this.$2=r,this.$1.postMessage({file:t,fileSliceName:n("fileSliceName")}),this},t.destroy=function(){this.$2=n("emptyFunction"),this.$1.terminate()},e})();a.exports=e}),null);
__d("VideoUploadStartRequestManager",["Assert","FileHasher","VideoUploadRequest","clearTimeout","cr:909282","isEmpty","mixin","performanceNow","setTimeout"],(function(t,n,r,o,a,i,l){var e,s,u=(function(t){function n(e,n,r,o,a,i,l,s){var u;return u=t.call(this)||this,u.$VideoUploadStartRequestManager1=e,u.$VideoUploadStartRequestManager2=n,u.$VideoUploadStartRequestManager3=r,u.$VideoUploadStartRequestManager4=o,u.$VideoUploadStartRequestManager5=0,u.$VideoUploadStartRequestManager6=a,u.$VideoUploadStartRequestManager7=i,u.$VideoUploadStartRequestManager8=l,u.$VideoUploadStartRequestManager9=s,u.$VideoUploadStartRequestManager10=0,u}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getRequest=function(){return this.$VideoUploadStartRequestManager11},o.sendRequest=function(n){var t=this;this.$VideoUploadStartRequestManager12||this.$VideoUploadStartRequestManager11||(this.$VideoUploadStartRequestManager13=n,this.$VideoUploadStartRequestManager6&&this.$VideoUploadStartRequestManager13.getFile().getFile()&&this.$VideoUploadStartRequestManager13.getFile().getFile().size<this.$VideoUploadStartRequestManager7&&r("FileHasher").isSupported()?(this.$VideoUploadStartRequestManager14=(e||(e=r("performanceNow")))(),this.$VideoUploadStartRequestManager12=new(r("FileHasher")),this.$VideoUploadStartRequestManager12.hash(this.$VideoUploadStartRequestManager13.getFile().getFile(),function(n){t.$VideoUploadStartRequestManager14=(e||(e=r("performanceNow")))()-t.$VideoUploadStartRequestManager14,t.$VideoUploadStartRequestManager15=n.hash,t.$VideoUploadStartRequestManager12.destroy(),t.$VideoUploadStartRequestManager12=null,n.hash||(t.$VideoUploadStartRequestManager16=n.exception),t.$VideoUploadStartRequestManager17()})):this.$VideoUploadStartRequestManager17())},o.$VideoUploadStartRequestManager17=function(){this.$VideoUploadStartRequestManager18(),this.inform("request-started",{hash_time:this.$VideoUploadStartRequestManager14,hash_exception:this.$VideoUploadStartRequestManager16})},o.$VideoUploadStartRequestManager18=function(){r("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null,this.$VideoUploadStartRequestManager11=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(!0).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager13,this.$VideoUploadStartRequestManager15)).setWaterfallID(this.$VideoUploadStartRequestManager13.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager20.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager21.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager22.bind(this)),this.$VideoUploadStartRequestManager11.send()},o.__getVideoUploadRequest=function(t){return new(r("VideoUploadRequest"))(t)},o.__getDataToSend=function(t,n){var e={file_size:t.getFile().getSize(),file_extension:t.getFile().getExtension(),target_id:t.getTargetID(),source:t.getSource(),composer_dialog_version:t.getComposerDialogVersion(),waterfall_id:t.getWaterfallID(),composer_session_id:t.getComposerSessionID(),composer_entry_point_ref:t.getComposerEntryPointRef&&t.getComposerEntryPointRef(),composer_work_shared_draft_mode:t.getComposerWorkSharedDraftMode(),has_file_been_replaced:t.getHasFileBeenReplaced(),supports_chunking:t.getSupportsChunking(),supports_file_api:t.getSupportsFileAPI(),partition_start_offset:t.getPartitionStartOffset(),partition_end_offset:t.getPartitionEndOffset(),creator_product:t.getCreatorProduct(),original_file_hash:n,spherical:t.getIsSphericalVideo(),spherical_metadata:t.getSphericalMetadata(),video_publisher_action_source:t.getVideoPublisherActionSource()};return t.getCreativeTools()!=null&&(e.creative_tools=t.getCreativeTools()),e},o.cancelRequest=function(){this.$VideoUploadStartRequestManager23(),this.inform("request-canceled")},o.$VideoUploadStartRequestManager24=function(t){r("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=r("setTimeout")(this.$VideoUploadStartRequestManager18.bind(this),t)},o.$VideoUploadStartRequestManager23=function(){this.$VideoUploadStartRequestManager12&&(this.$VideoUploadStartRequestManager12.destroy(),this.$VideoUploadStartRequestManager12=null),this.$VideoUploadStartRequestManager11&&(this.$VideoUploadStartRequestManager11.abort(),this.$VideoUploadStartRequestManager11=null),this.$VideoUploadStartRequestManager10=0,this.$VideoUploadStartRequestManager5=0,this.$VideoUploadStartRequestManager13=null,r("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null},o.$VideoUploadStartRequestManager25=function(t,n,r){var e=Math.pow(t,n)*1e3;return r>0&&(e=Math.min(e,r)),e},o.$VideoUploadStartRequestManager20=function(t){var e;(e=this.$VideoUploadStartRequestManager13)==null||(e=e.getRetryState())==null||e.resetDelay();var n=t.getPayload();this.inform("request-finished",this.__getSuccessInformData(n)),this.$VideoUploadStartRequestManager11=null,r("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")},o.__getSuccessInformData=function(t){return{video_id:t.video_id,xpv_asset_id:t.xpv_asset_id,is_xpv_single_prod:t.is_xpv_single_prod,upload_session_id:t.upload_session_id,fb_region:t.region_hint,start_offset:t.start_offset,end_offset:t.end_offset,transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,skip_upload:t.skip_upload,hash_time:this.$VideoUploadStartRequestManager14}},o.$VideoUploadStartRequestManager26=function(t){this.inform("request-failed",this.$VideoUploadStartRequestManager27(t)),this.$VideoUploadStartRequestManager11=null,r("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")},o.$VideoUploadStartRequestManager21=function(t){var e,n=this;this.$VideoUploadStartRequestManager11=null;var r=(e=this.$VideoUploadStartRequestManager13)==null?void 0:e.getRetryState();r==null?(this.$VideoUploadStartRequestManager5=0,t.isTransient()&&this.$VideoUploadStartRequestManager10<this.$VideoUploadStartRequestManager8?(this.$VideoUploadStartRequestManager10++,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager9,this.$VideoUploadStartRequestManager10))):this.$VideoUploadStartRequestManager26(t)):r.handleRetry({context:{location:"start-server_issue",error_code:t.getError()},predicate:function(){return t.isTransient()},retryHandler:function(t){n.$VideoUploadStartRequestManager10=r.getTotalRetryCount(),n.$VideoUploadStartRequestManager24(t)},failureHandler:function(){return n.$VideoUploadStartRequestManager26(t)}})},o.$VideoUploadStartRequestManager22=function(t){var e,n=this;((e=this.$VideoUploadStartRequestManager13)==null?void 0:e.getRetryState())==null?this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager5>=this.$VideoUploadStartRequestManager2?this.$VideoUploadStartRequestManager26(t):(this.$VideoUploadStartRequestManager5++,this.$VideoUploadStartRequestManager11=null,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager5,this.$VideoUploadStartRequestManager4))):this.$VideoUploadStartRequestManager13.getRetryState().handleRetry({context:{location:"start-transport_issue",error_code:t.getError()},retryHandler:function(t){n.$VideoUploadStartRequestManager11=null,n.$VideoUploadStartRequestManager24(t)},failureHandler:function(){return n.$VideoUploadStartRequestManager26(t)}})},o.$VideoUploadStartRequestManager27=function(t){var e,n,o=[].concat(t==null||(e=t.getPayload())==null||(e=e.error)==null?void 0:e.opes_mids,[t==null?void 0:t.errorMid]).filter(Boolean);return{error_code:t.getError(),error_description:t.getErrorDescription(),error_summary:t.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,error_is_transient:t.isTransient(),www_request_id:(n=t.getPayload())==null?void 0:n.__www_request_id__,opes_mids:(s||(s=r("isEmpty")))(o)?null:o}},n})(r("mixin")(n("cr:909282"))),c=u;l.default=c}),98);
__d("VideoUploadSession",["AsyncRequest","GraphQLVideoPublishUtils","SubscriptionsHandler","VideoUploadCrashMonitor","VideoUploadFeatureDetector","VideoUploadFileValidator","VideoUploadGraphQLPostRequestManager","VideoUploadLogger","VideoUploadMetadataParser","VideoUploadPostRequestManager","VideoUploadReceiveRequestManager","VideoUploadRequestContext","VideoUploadStartRequestManager","WaterfallIDGenerator","cr:909282","err","getByPath","mixin"],(function(t,n,r,o,a,i){var e={CANCELED:"canceled",ABANDONED:"abandoned",SHUTDOWN:"shutdown"},l=(function(t){"use strict";function r(e){var r;if(r=t.call(this)||this,r.$VideoUploadSession2=e.source,r.$VideoUploadSession3=e.composer_dialog_version,r.$VideoUploadSession4=e.target_id,r.$VideoUploadSession5=e.logging_delay,r.$VideoUploadSession6=e.silent_file_validation,r.$VideoUploadSession7=e.background_upload,r.$VideoUploadSession8=e.actor_id,r.$VideoUploadSession9=e.composer_entry_point_ref,r.$VideoUploadSession10=e.composer_work_shared_draft_mode,r.$VideoUploadSession11=e.video_publisher_action_source,r.$VideoUploadSession12=e.monitor_crashes,r.$VideoUploadSession13=e.isMultiMediaPost,r.$VideoUploadSession14=e.container_type,r.$VideoUploadSession15=e.number_of_partitions,r.$VideoUploadSession16=e.multi_partitioning_enabled,r.$VideoUploadSession17=e.change_default_chunk_size,r.$VideoUploadSession18=e.has_file_been_replaced?e.has_file_been_replaced:!1,r.$VideoUploadSession17&&(r.$VideoUploadSession19=e.client_chunk_size),r.$VideoUploadSession20=e.early_receive,r.$VideoUploadSession21=!1,r.$VideoUploadSession22=e.accept_dimensions_from_player,r.$VideoUploadSession23=e.ad_account_id,r.$VideoUploadSession24=e.waterfall_id,r.$VideoUploadSession25=null,r.$VideoUploadSession26=new(n("VideoUploadFileValidator"))({minSize:e.min_size,maxSize:e.max_size,minLength:e.min_length,maxLength:e.max_length,minWidth:e.min_width,minHeight:e.min_height,extensions:e.extensions,source:e.source,require16to9AspectRatio:e.require_16to9_aspect_ratio,minAspectRatio:e.min_aspect_ratio,maxAspectRatio:e.max_aspect_ratio,acceptDimensionsFromPlayer:e.accept_dimensions_from_player}),r.$VideoUploadSession27=n("VideoUploadFeatureDetector").supportsChunking(),r.$VideoUploadSession28=n("VideoUploadFeatureDetector").supportsFileAPI(),r.$VideoUploadSession27?(r.$VideoUploadSession29=e.parallel_chunk_uploads,r.$VideoUploadSession29&&(r.$VideoUploadSession30=e.parallel_chunk_upload_filesize,r.$VideoUploadSession31=e.default_chunk_size)):r.$VideoUploadSession29=!1,r.$VideoUploadSession32=e.shutdown_logging_enabled,r.$VideoUploadSession33=r.$VideoUploadSession$p_34(e),r.$VideoUploadSession35=r.$VideoUploadSession$p_36(e),r.$VideoUploadSession29)if(r.$VideoUploadSession16){var o=0;for(r.$VideoUploadSession37=[],o=0;o<r.$VideoUploadSession15-1;o++)r.$VideoUploadSession37[o]=r.$VideoUploadSession$p_36(e)}else r.$VideoUploadSession37=r.$VideoUploadSession$p_36(e);return r.$VideoUploadSession38=r.$VideoUploadSession$p_39(e),r.$VideoUploadSession40=r.$VideoUploadSession$p_41(e),r.$VideoUploadSession42=e.log_free_local_storage,r.$VideoUploadSession43=null,r}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o.$VideoUploadSession$p_44=function(){this.$VideoUploadSession45=[],this.$VideoUploadSession46=[],this.$VideoUploadSession47=[],this.$VideoUploadSession48=[],this.$VideoUploadSession49=[];var e=0;for(e=0;e<this.$VideoUploadSession1-1;e++)this.$VideoUploadSession45.push(!1)},o.$VideoUploadSession$p_50=function(){var e;this.$VideoUploadSession24==null&&(this.$VideoUploadSession24=n("WaterfallIDGenerator").generate()),this.$VideoUploadSession51=new(n("VideoUploadLogger"))({actor_id:this.$VideoUploadSession8,ad_account_id:this.$VideoUploadSession23,source:this.$VideoUploadSession2,composer_dialog_version:this.$VideoUploadSession3,waterfall_id:this.$VideoUploadSession24,target_id:this.$VideoUploadSession4,delay:this.$VideoUploadSession5,is_chunked_upload:this.$VideoUploadSession27,composer_entry_point_ref:this.$VideoUploadSession9,composer_work_shared_draft_mode:this.$VideoUploadSession10,container_type:this.$VideoUploadSession14,has_file_been_replaced:this.$VideoUploadSession18,composer_session_id:this.$VideoUploadSession52,asset_id:(e=this.$VideoUploadSession53)==null?void 0:e.getStableAssetID(),creative_tools:this.$VideoUploadSession54}),this.inform("set-waterfall-id",{waterfallID:this.$VideoUploadSession24})},o.createTestLogger=function(){this.$VideoUploadSession$p_50()},o.$VideoUploadSession$p_55=function(){return this.$VideoUploadSession51||this.$VideoUploadSession$p_50(),this.$VideoUploadSession51},o.getLogger=function(){return this.$VideoUploadSession51?this.$VideoUploadSession51:null},o.$VideoUploadSession$p_56=function(){return null},o.start=function(t){var e=this;this.$VideoUploadSession57=null,this.$VideoUploadSession58=null,this.$VideoUploadSession59=null,this.$VideoUploadSession60=!1,this.$VideoUploadSession61=!1,this.$VideoUploadSession62=null,this.$VideoUploadSession53=t,this.$VideoUploadSession63=0,this.$VideoUploadSession64=!1,this.$VideoUploadSession65={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},this.$VideoUploadSession66=!1,this.$VideoUploadSession43=this.$VideoUploadSession$p_56(),this.$VideoUploadSession$p_50(),this.$VideoUploadSession16&&(this.$VideoUploadSession1=Math.min(this.$VideoUploadSession15,Math.ceil(this.$VideoUploadSession53.getSize()/this.$VideoUploadSession30))),this.__logEvent(n("VideoUploadLogger").EVENT_REQUESTED_UPLOADING),this.inform("upload-requested");var r=new(n("VideoUploadMetadataParser"))(this.$VideoUploadSession53,this.$VideoUploadSession$p_67.bind(this),this.$VideoUploadSession22);r.parse(),this.$VideoUploadSession42&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota(function(t,r){e.__logEvent(n("VideoUploadLogger").EVENT_MEASURE_FREE_LOCAL_STORAGE,{free_space_in_device:r})})},o.setTargetID=function(t){this.$VideoUploadSession4=t},o.setComposerSessionID=function(t){this.$VideoUploadSession52=t},o.setCreativeTools=function(t){this.$VideoUploadSession54=t},o.post=function(t){this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_POST_REQUEST,this.$VideoUploadSession25),this.inform("post-started",t);var e=this.__createPostRequestContext(t);if(n("GraphQLVideoPublishUtils").isGraphQLPublish(this.$VideoUploadSession2,this.$VideoUploadSession9)&&this.$VideoUploadSession40.hasAPISupport(t)){this.$VideoUploadSession40.sendRequest(e),this.$VideoUploadSession68=t;return}this.$VideoUploadSession38.sendRequest(e),this.$VideoUploadSession68=t},o.__createPostRequestContext=function(t){var e=new(n("VideoUploadRequestContext"));return this.__setupPostRequestContext(e,t),e},o.__setupPostRequestContext=function(t,n){t.setMetadata(n).setVideoID(this.$VideoUploadSession57).setTargetID(this.$VideoUploadSession4).setSource(this.$VideoUploadSession2).setComposerDialogVersion(this.$VideoUploadSession3).setComposerWorkSharedDraftMode(this.$VideoUploadSession10).setWaterfallID(this.$VideoUploadSession24).setComposerSessionID(this.$VideoUploadSession52).setSupportsChunking(this.$VideoUploadSession27).setCreatorProduct(this.$VideoUploadSession53.getCreatorProduct()).setFile(this.$VideoUploadSession53).setHasFileBeenReplaced(this.$VideoUploadSession18),n&&(n.spherical&&(this.$VideoUploadSession64=!0,t.setIsSphericalVideo(this.$VideoUploadSession64)),n.enable_omnistab&&(this.$VideoUploadSession66=!0,t.setEnableOmnistab(this.$VideoUploadSession66))),t.setComposerEntryPointRef&&t.setComposerEntryPointRef(this.$VideoUploadSession9)},o.$VideoUploadSession$p_69=function(o,a){if(this.$VideoUploadSession60){var t={event_reason:a,debug:babelHelpers.extends({},this.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:this.$VideoUploadSession7})},i=a===e.CANCELED?n("VideoUploadLogger").EVENT_CANCELED_UPLOADING:n("VideoUploadLogger").EVENT_ABANDONED_UPLOADING;this.$VideoUploadSession$p_70(),this.$VideoUploadSession7?(this.$VideoUploadSession61||this.__logEvent(i),this.$VideoUploadSession71&&(this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,t),this.$VideoUploadSession71=!1)):(this.__logEvent(i),this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,t)),this.inform("upload-canceled")}else o&&this.$VideoUploadSession57&&r.deleteVideo(this.$VideoUploadSession57)},o.cancel=function(n){n===void 0&&(n=!1),this.$VideoUploadSession$p_69(n,e.CANCELED)},o.abandon=function(n){n===void 0&&(n=!1),this.$VideoUploadSession$p_69(n,e.ABANDONED)},o.isPostInProgress=function(){return this.$VideoUploadSession38.isInProgress()},o.isInProgress=function(){return this.$VideoUploadSession60},o.getHasUploadFinished=function(){return this.$VideoUploadSession61},o.getVideoID=function(){return this.$VideoUploadSession57},o.getUploadTime=function(){return this.$VideoUploadSession72},o.getExPartitionNumber=function(t){var e=0;for(e=0;e<this.$VideoUploadSession1-1&&!(t>=this.$VideoUploadSession46[e]&&t<this.$VideoUploadSession47[e]);e++);return e===this.$VideoUploadSession1?-1:e},o.getIsSphericalVideo=function(){return this.$VideoUploadSession64||!1},o.getVideoMetadata=function(){return this.$VideoUploadSession25||null},o.startFlow=function(){!this.$VideoUploadSession7||this.$VideoUploadSession71||(this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null}),this.$VideoUploadSession71=!0,this.$VideoUploadSession73&&this.$VideoUploadSession73.flowStarted())},o.__extractVideoMetadata=function(t){var e,r=(e=n("getByPath"))(t,["streams","primaryVideo"]),o={source_height:e(r,["height"]),source_width:e(r,["width"]),duration:e(r,["duration"])*1e3};return o.original_video_duration=o.duration,o},o.$VideoUploadSession$p_67=function(t){var e,r;if(this.$VideoUploadSession6){var o=this.$VideoUploadSession26.getValidationErrorMessage(this.$VideoUploadSession53,t);if(o){var a=n("err")(o.summary);a.is_js_error=!0,r={error_summary:o.summary,error_description:o.description,error:a},e=!1}else e=!0}else e=this.$VideoUploadSession26.validate(this.$VideoUploadSession53,t);if(!e){this.__logEvent(n("VideoUploadLogger").EVENT_INVALIDATED_UPLOADING),this.inform("upload-failed",r);return}if(this.$VideoUploadSession25=this.__extractVideoMetadata(t),t&&t.format&&(this.$VideoUploadSession64=t.format.isSpherical,t.metadata&&(this.$VideoUploadSession65.sphericalMetadataXml=t.metadata.sphericalMetadataXml,this.$VideoUploadSession65.fbSpatialAudioMetadataXml=t.metadata.fbSpatialAudioMetadataXml,this.$VideoUploadSession65.ytSa3dMetadataJson=t.metadata.ytSa3dMetadataJson)),this.$VideoUploadSession7||this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null}),this.$VideoUploadSession74=this.$VideoUploadSession29&&this.$VideoUploadSession53.getSize()>=this.$VideoUploadSession30,this.$VideoUploadSession75=!1,this.$VideoUploadSession76=0,this.$VideoUploadSession77=this.$VideoUploadSession76,this.$VideoUploadSession78=0,this.$VideoUploadSession16?this.$VideoUploadSession$p_44():this.$VideoUploadSession45=!1,this.$VideoUploadSession74)if(this.$VideoUploadSession16){var i=0;this.$VideoUploadSession79=Math.ceil(this.$VideoUploadSession53.getSize()/this.$VideoUploadSession1);var l=this.$VideoUploadSession79,s=this.$VideoUploadSession79;for(i=0;i<this.$VideoUploadSession1-1;i++)this.$VideoUploadSession46[i]=l,l=Math.min(this.$VideoUploadSession46[i]+s,this.$VideoUploadSession53.getSize()),this.$VideoUploadSession47[i]=l,this.$VideoUploadSession48[i]=this.$VideoUploadSession46[i],this.$VideoUploadSession49[i]=0}else this.$VideoUploadSession79=Math.floor(this.$VideoUploadSession53.getSize()/2),this.$VideoUploadSession46=this.$VideoUploadSession79,this.$VideoUploadSession48=this.$VideoUploadSession46,this.$VideoUploadSession49=0,this.$VideoUploadSession47=this.$VideoUploadSession53.getSize();else this.$VideoUploadSession79=this.$VideoUploadSession53.getSize();var u=new(n("VideoUploadRequestContext"))().setFile(this.$VideoUploadSession53).setTargetID(this.$VideoUploadSession4).setSource(this.$VideoUploadSession2).setComposerDialogVersion(this.$VideoUploadSession3).setComposerWorkSharedDraftMode(this.$VideoUploadSession10).setWaterfallID(this.$VideoUploadSession24).setComposerSessionID(this.$VideoUploadSession52).setHasFileBeenReplaced(this.$VideoUploadSession18).setSupportsChunking(this.$VideoUploadSession27).setSupportsFileAPI(this.$VideoUploadSession28).setCreatorProduct(this.$VideoUploadSession53.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession76).setPartitionEndOffset(this.$VideoUploadSession79).setRetryState(this.$VideoUploadSession43).setCreativeTools(this.$VideoUploadSession54);this.$VideoUploadSession29&&u.setUseParallelChunks(this.$VideoUploadSession29),this.$VideoUploadSession64&&(u.setIsSphericalVideo(this.$VideoUploadSession64),u.setSphericalMetadata(this.$VideoUploadSession65)),u.setComposerEntryPointRef&&u.setComposerEntryPointRef(this.$VideoUploadSession9),u.setVideoPublisherActionSource(this.$VideoUploadSession11),this.$VideoUploadSession$p_80(),this.$VideoUploadSession33.sendRequest(u),this.$VideoUploadSession20&&this.$VideoUploadSession17&&this.$VideoUploadSession35.isResumabilityEnabled()&&!this.$VideoUploadSession35.isResumableServiceProxyReceiveEnabled()&&this.$VideoUploadSession$p_81(),this.inform("metadata-parsed",t)},o.$VideoUploadSession$p_34=function(t){var e=this.$VideoUploadSession27?t.chunk_start_uri:t.start_uri,n=this.__getVideoUploadStartRequestManager(e,t.start_max_transport_retries,t.start_transport_retry_interval_base,t.start_max_transport_retry_timeout,t.skip_upload_enabled,t.skip_upload_file_size_limit,t.start_max_server_retries,t.start_server_retry_interval_base);return n.subscribe("request-started",this.$VideoUploadSession$p_82.bind(this)),n.subscribe("request-finished",this.$VideoUploadSession$p_83.bind(this)),n.subscribe("request-failed",this.$VideoUploadSession$p_84.bind(this)),n.subscribe("request-canceled",this.$VideoUploadSession$p_85.bind(this)),n},o.$VideoUploadSession$p_36=function(t){var e=this.$VideoUploadSession27?t.chunk_receive_uri:t.receive_uri,n=this.__getVideoUploadReceiveRequestManager(e,t);return n.subscribe("request-started",this.$VideoUploadSession$p_86.bind(this)),n.subscribe("request-progressed",this.$VideoUploadSession$p_87.bind(this)),n.subscribe("request-finished",this.$VideoUploadSession$p_88.bind(this)),n.subscribe("request-failed",this.$VideoUploadSession$p_89.bind(this)),n.subscribe("request-canceled",this.$VideoUploadSession$p_90.bind(this)),n.subscribe("request-timeout",this.$VideoUploadSession$p_91.bind(this)),n.subscribe("online",this.$VideoUploadSession$p_92.bind(this)),n.subscribe("offline",this.$VideoUploadSession$p_93.bind(this)),n.subscribe("resumable-called",this.$VideoUploadSession$p_94.bind(this)),n.subscribe("resumable-started",this.$VideoUploadSession$p_95.bind(this)),n.subscribe("resumable-success",this.$VideoUploadSession$p_96.bind(this)),n.subscribe("resumable-failed",this.$VideoUploadSession$p_97.bind(this)),n},o.$VideoUploadSession$p_39=function(t){var e=this.$VideoUploadSession27?t.chunk_post_uri:t.post_uri,n=this.__getVideoUploadPostRequestManager(e,t);return n.subscribe("request-finished",this.__handlePostRequestFinished.bind(this)),n.subscribe("request-failed",this.$VideoUploadSession$p_98.bind(this)),n},o.$VideoUploadSession$p_41=function(t){var e=new(n("VideoUploadGraphQLPostRequestManager"))(isNaN(t.post_max_transport_retries)?0:t.post_max_transport_retries,isNaN(t.post_transport_retry_interval_base)?0:t.post_transport_retry_interval_base,isNaN(t.post_max_server_retries)?0:t.post_max_server_retries,isNaN(t.post_server_retry_interval_base)?0:t.post_server_retry_interval_base);return e.subscribe("request-finished",this.__handlePostRequestFinished.bind(this)),e.subscribe("request-failed",this.$VideoUploadSession$p_98.bind(this)),e},o.$VideoUploadSession$p_82=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_UPLOADING,babelHelpers.extends({hash_time:r.hash_time,hash_exception:r.hash_exception},this.$VideoUploadSession25)),this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_START_REQUEST,this.$VideoUploadSession25),this.$VideoUploadSession99=Date.now(),this.inform("upload-started")},o.$VideoUploadSession$p_81=function(t){if(this.$VideoUploadSession21)this.$VideoUploadSession$p_100();else{this.$VideoUploadSession21=!0,t||(t={video_id:null});var e=this.__createReceiveRequestContext(t,!1);if(this.$VideoUploadSession35.sendRequest(e),this.$VideoUploadSession74)if(this.$VideoUploadSession16){var n=0;for(n=0;n<this.$VideoUploadSession1-1;n++)e=this.__createReceiveRequestContext(t,!0,n),this.$VideoUploadSession37[n].sendRequest(e)}else e=this.__createReceiveRequestContext(t,!0),this.$VideoUploadSession37.sendRequest(e)}},o.$VideoUploadSession$p_100=function(){if(this.$VideoUploadSession35.updateVideoID(this.$VideoUploadSession57),this.$VideoUploadSession74)if(this.$VideoUploadSession16){var e=0;for(e=0;e<this.$VideoUploadSession1-1;e++)this.$VideoUploadSession37[e].updateVideoID(this.$VideoUploadSession57)}else this.$VideoUploadSession37.updateVideoID(this.$VideoUploadSession57)},o.$VideoUploadSession$p_101=function(t){return this.$VideoUploadSession43==null?((t==null?void 0:t.transport_retries)||0)+((t==null?void 0:t.server_retries)||0)+((t==null?void 0:t.timeout_retries)||0):this.$VideoUploadSession43.getTotalRetryCount()},o.$VideoUploadSession$p_83=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_PROGRESS_UPLOADING_START_REQUEST,{retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,hash_time:r.hash_time,skip_upload:r.skip_upload?1:null}),this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_START_REQUEST,babelHelpers.extends({video_id:r.video_id},this.$VideoUploadSession25)),this.$VideoUploadSession57=r.video_id,this.$VideoUploadSession58=r.upload_session_id,this.$VideoUploadSession59=r.fb_region,this.$VideoUploadSession102=r.skip_upload,r.skip_upload?(this.$VideoUploadSession$p_103(),this.inform("upload-progressed",{start_offset:0,end_offset:this.$VideoUploadSession53.getSize(),file_size:this.$VideoUploadSession53.getSize(),sent_bytes:this.$VideoUploadSession53.getSize(),video_id:r.video_id,skip_upload:r.skip_upload}),this.$VideoUploadSession7&&this.__logFinishedUploading(),this.inform("upload-finished",{start_offset:0,end_offset:this.$VideoUploadSession53.getSize(),video_id:r.video_id,is_spherical_video:this.$VideoUploadSession64})):this.$VideoUploadSession$p_81(r)},o.__fetchReceiveRequestManagerStateLogData=function(){var e={};if(this.$VideoUploadSession35!=null&&(this.$VideoUploadSession35.appendStateLogData(e,"requestManager_"),e.request_manager_state=e.requestManager_last_log_state),this.$VideoUploadSession16){var t=0;for(t=0;t<this.$VideoUploadSession1-1;t++)this.$VideoUploadSession37[t]!=null&&this.$VideoUploadSession37[t].appendStateLogData(e,"requestManagerEx_"+t.toString())}else this.$VideoUploadSession37!=null&&this.$VideoUploadSession37.appendStateLogData(e,"requestManagerEx_");return e},o.__createReceiveRequestContext=function(t,r,o){r||(r=!1);var e=new(n("VideoUploadRequestContext"));return this.$VideoUploadSession16?this.__setupReceiveRequestContext(e,t,r,o):this.__setupReceiveRequestContext(e,t,r),e},o.__setupReceiveRequestContext=function(t,n,r,o){var e,a,i,l;r?this.$VideoUploadSession16?(this.$VideoUploadSession17&&(this.$VideoUploadSession31=this.$VideoUploadSession47[o]-this.$VideoUploadSession46[o],this.$VideoUploadSession31=this.$VideoUploadSession19?Math.min(this.$VideoUploadSession19,this.$VideoUploadSession31):this.$VideoUploadSession31),e=this.$VideoUploadSession46[o],a=this.$VideoUploadSession47[o],i=this.$VideoUploadSession46[o],l=this.$VideoUploadSession46[o]+this.$VideoUploadSession31>=this.$VideoUploadSession47[o]?this.$VideoUploadSession47[o]:this.$VideoUploadSession46[o]+this.$VideoUploadSession31):(this.$VideoUploadSession17&&(this.$VideoUploadSession31=this.$VideoUploadSession47-this.$VideoUploadSession46,this.$VideoUploadSession31=this.$VideoUploadSession19?Math.min(this.$VideoUploadSession19,this.$VideoUploadSession31):this.$VideoUploadSession31),e=this.$VideoUploadSession46,a=this.$VideoUploadSession47,i=this.$VideoUploadSession46,l=this.$VideoUploadSession46+this.$VideoUploadSession31>=this.$VideoUploadSession47?this.$VideoUploadSession47:this.$VideoUploadSession46+this.$VideoUploadSession31):(e=this.$VideoUploadSession76,a=this.$VideoUploadSession79,this.$VideoUploadSession17?(i=this.$VideoUploadSession76,l=this.$VideoUploadSession19?Math.min(this.$VideoUploadSession19,this.$VideoUploadSession79):this.$VideoUploadSession79):(i=n.start_offset,l=n.end_offset)),t.setFile(this.$VideoUploadSession53).setVideoID(n.video_id).setXPVAssetID(n.xpv_asset_id).setIsXPVSingleProd(n.is_xpv_single_prod).setUploadSessionID(n.upload_session_id).setFbRegion(n.fb_region).setStartOffset(i).setEndOffset(l).setPartitionStartOffset(e).setPartitionEndOffset(a).setPartitionNo(o).setTargetID(this.$VideoUploadSession4).setSource(this.$VideoUploadSession2).setComposerDialogVersion(this.$VideoUploadSession3).setComposerWorkSharedDraftMode(this.$VideoUploadSession10).setWaterfallID(this.$VideoUploadSession24).setComposerSessionID(this.$VideoUploadSession52).setSupportsChunking(this.$VideoUploadSession27).setHasFileBeenReplaced(this.$VideoUploadSession18).setRetryState(this.$VideoUploadSession43),this.$VideoUploadSession29&&t.setUseParallelChunks(this.$VideoUploadSession29),t.setComposerEntryPointRef&&t.setComposerEntryPointRef(this.$VideoUploadSession9),this.$VideoUploadSession19&&t.setClientChunkSize(this.$VideoUploadSession19)},o.$VideoUploadSession$p_84=function(t,r){var e=this.__getLogErrorData(r);this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_START_REQUEST,e),this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,e);var o=r.error_is_transient?n("VideoUploadLogger").EVENT_RESIGNED_FLOW:n("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession7?this.$VideoUploadSession71&&(this.__logEvent(o),this.$VideoUploadSession71=!1):this.__logEvent(o),this.$VideoUploadSession$p_103(),this.$VideoUploadSession$p_104(),this.inform("upload-failed",r)},o.$VideoUploadSession$p_85=function(t){this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_START_REQUEST)},o.$VideoUploadSession$p_86=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_RECEIVE_REQUEST,{debug:r.debug}),!r.start_offset&&!r.transport_retries&&!r.server_retries&&this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession53.getSize(),upload_domain:r.upload_domain,debug:r.debug}),this.$VideoUploadSession27&&this.__logEvent(n("VideoUploadLogger").EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:r.start_offset,total_bytes:r.end_offset-r.start_offset,retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,server_retries:r.server_retries,upload_speed:r.upload_speed,request_manager_state:r.request_manager_state,upload_domain:r.upload_domain,debug:r.debug})},o.$VideoUploadSession$p_87=function(t,n){if(n.start_offset<this.$VideoUploadSession79)this.$VideoUploadSession77=n.start_offset,this.$VideoUploadSession78=n.sent_bytes;else if(this.$VideoUploadSession16){var e=0;e=this.getExPartitionNumber(n.start_offset),e>-1&&(this.$VideoUploadSession48[e]=n.start_offset,this.$VideoUploadSession49[e]=n.sent_bytes)}else this.$VideoUploadSession48=n.start_offset,this.$VideoUploadSession49=n.sent_bytes;if(n.start_offset=this.$VideoUploadSession77,n.sent_bytes=this.$VideoUploadSession78,this.$VideoUploadSession74)if(this.$VideoUploadSession16)for(e=0;e<this.$VideoUploadSession1-1;e++)n.start_offset+=this.$VideoUploadSession48[e]-this.$VideoUploadSession46[e],n.sent_bytes+=this.$VideoUploadSession49[e];else n.start_offset+=this.$VideoUploadSession48-this.$VideoUploadSession46,n.sent_bytes+=this.$VideoUploadSession49;var r=Math.min(n.start_offset+n.sent_bytes,n.file_size);r>this.$VideoUploadSession63&&(this.$VideoUploadSession63=r,this.inform("upload-progressed",n))},o.$VideoUploadSession$p_88=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_RECEIVE_REQUEST,{debug:r.debug}),this.$VideoUploadSession27&&this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:r.start_offset,sent_bytes:r.end_offset-r.start_offset,retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,server_retries:r.server_retries,upload_speed:r.upload_speed,request_manager_state:r.request_manager_state,upload_domain:r.upload_domain,debug:r.debug});var e=!1;if(r.start_offset<this.$VideoUploadSession79)this.$VideoUploadSession75=r.end_offset>=this.$VideoUploadSession79;else if(this.$VideoUploadSession16){var o=0;if(o=this.getExPartitionNumber(r.start_offset),o===-1){var a="Invalid offset",i=n("err")(a);i.is_js_error=!0;var l={error_summary:a,error_description:"Offset doesn't fall in any exPartition range.",error:i};this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING),this.inform("upload-failed",l);return}this.$VideoUploadSession45[o]=r.end_offset>=this.$VideoUploadSession47[o]}else this.$VideoUploadSession45=r.end_offset>=this.$VideoUploadSession47;if(this.$VideoUploadSession16)for(o=0;o<this.$VideoUploadSession1-1;o++)if(this.$VideoUploadSession45[o]===!1){e=!1;break}else e=!0;else e=this.$VideoUploadSession45;(!this.$VideoUploadSession28||this.$VideoUploadSession75&&(!this.$VideoUploadSession74||e))&&(this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession53.getSize(),upload_domain:r.upload_domain,debug:r.debug}),this.$VideoUploadSession72=Date.now()-this.$VideoUploadSession99,this.$VideoUploadSession7&&this.__logFinishedUploading(),r.video_id=this.$VideoUploadSession57,r.is_spherical_video=this.$VideoUploadSession64,this.inform("upload-finished",r),this.$VideoUploadSession13&&(this.$VideoUploadSession7||this.__logFinishedUploading(),this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_FLOW,r),this.$VideoUploadSession71=!1,this.$VideoUploadSession$p_104(),this.inform("multimedia-upload-finished",r)))},o.$VideoUploadSession$p_89=function(t,r){var e=this.__getLogErrorData(r);if(this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_RECEIVE_REQUEST,e),this.$VideoUploadSession27&&this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_SENDING_CHUNK_BYTES,e),this.$VideoUploadSession60){this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_SENDING_BYTES,e),this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,e);var o=r.error_is_transient?n("VideoUploadLogger").EVENT_RESIGNED_FLOW:n("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession7?this.$VideoUploadSession71&&(this.__logEvent(o,e),this.$VideoUploadSession71=!1):this.__logEvent(o,e)}this.$VideoUploadSession$p_104(),this.inform("upload-failed",r)},o.$VideoUploadSession$p_90=function(t){this.$VideoUploadSession27?this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_SENDING_CHUNK_BYTES):this.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_SENDING_BYTES)},o.$VideoUploadSession$p_91=function(t,r){var e={start_offset:r.start_offset,sent_bytes:r.end_offset-r.start_offset,retries:this.$VideoUploadSession$p_101(r),transport_retries:r.transport_retries,server_retries:r.server_retries,timeout_retries:r.timeout_retries,upload_speed:r.upload_speed,request_manager_state:r.request_manager_state,debug:r.debug};this.__logEvent(n("VideoUploadLogger").EVENT_TIMEOUT_SENDING_CHUNK_BYTES,e)},o.$VideoUploadSession$p_92=function(t,n){this.inform("online",n)},o.$VideoUploadSession$p_93=function(t,n){this.inform("offline",n)},o.$VideoUploadSession$p_94=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_CALLED,r)},o.$VideoUploadSession$p_95=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_STARTED,r)},o.$VideoUploadSession$p_96=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_SUCCESS,r)},o.$VideoUploadSession$p_97=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_RESUMABLE_FAILED,r)},o.__handlePostRequestFinished=function(t,r){this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_POST_REQUEST,babelHelpers.extends({video_id:this.$VideoUploadSession57},this.$VideoUploadSession25)),r.video_id||(r.video_id=this.$VideoUploadSession57),this.$VideoUploadSession7||this.__logFinishedUploading(),this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_FLOW),this.$VideoUploadSession71=!1,this.$VideoUploadSession$p_104();var e=babelHelpers.extends({},r,this.$VideoUploadSession68);this.inform("post-finished",e)},o.__logFinishedUploading=function(){this.__logEvent(n("VideoUploadLogger").EVENT_FINISHED_UPLOADING,babelHelpers.extends({elapsed_time:this.$VideoUploadSession72,skip_upload:this.$VideoUploadSession102?1:null,video_id:this.$VideoUploadSession57},this.$VideoUploadSession25)),this.$VideoUploadSession61=!0},o.$VideoUploadSession$p_98=function(t,r){var e=this.__getLogErrorData(r);if(this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_POST_REQUEST,e),this.$VideoUploadSession60){this.__logEvent(n("VideoUploadLogger").EVENT_FAILED_UPLOADING,e);var o=r.error_is_transient?n("VideoUploadLogger").EVENT_RESIGNED_FLOW:n("VideoUploadLogger").EVENT_FAILED_FLOW;this.__logEvent(o,e)}this.$VideoUploadSession$p_104(),this.inform("post-failed",r)},o.$VideoUploadSession$p_103=function(){if(this.$VideoUploadSession35.cancelRequest(),this.$VideoUploadSession74)if(this.$VideoUploadSession16){var e=0;for(e=0;e<this.$VideoUploadSession1-1;e++)this.$VideoUploadSession37[e].cancelRequest()}else this.$VideoUploadSession37.cancelRequest();this.$VideoUploadSession21=!1},o.$VideoUploadSession$p_70=function(){this.$VideoUploadSession33.cancelRequest(),this.$VideoUploadSession$p_103(),this.$VideoUploadSession$p_104(),this.$VideoUploadSession57&&(r.deleteVideo(this.$VideoUploadSession57),this.$VideoUploadSession57=null,this.$VideoUploadSession58=null,this.$VideoUploadSession59=null)},o.$VideoUploadSession$p_80=function(){var t=this;this.$VideoUploadSession60=!0,this.$VideoUploadSession32&&(this.$VideoUploadSession62=new(n("SubscriptionsHandler")),this.$VideoUploadSession62.addSubscriptions(this.$VideoUploadSession$p_55().postOnShutdown(function(){if(t.$VideoUploadSession60){var r={event_reason:e.SHUTDOWN,debug:babelHelpers.extends({},t.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:t.$VideoUploadSession7})};t.$VideoUploadSession7?t.$VideoUploadSession71&&t.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,r):t.__logEvent(n("VideoUploadLogger").EVENT_CANCELED_FLOW,r),t.inform("upload-canceled")}}))),this.$VideoUploadSession12&&(this.$VideoUploadSession73=new(n("VideoUploadCrashMonitor"))(this.$VideoUploadSession24,this.$VideoUploadSession8,this.$VideoUploadSession2,this.$VideoUploadSession4,this.$VideoUploadSession5,this.$VideoUploadSession27,this.$VideoUploadSession9,!this.$VideoUploadSession7||this.$VideoUploadSession71),this.$VideoUploadSession73.startSession())},o.$VideoUploadSession$p_104=function(){this.$VideoUploadSession60=!1,this.$VideoUploadSession62&&(this.$VideoUploadSession62.release(),this.$VideoUploadSession62=null),this.$VideoUploadSession73&&(this.$VideoUploadSession73.endSession(),this.$VideoUploadSession73=null)},o.__getLogErrorData=function(t){return{error:t.error_summary,error_code:t.error_code,error_description:t.error_description,retries:this.$VideoUploadSession$p_101(t),transport_retries:t.transport_retries,server_retries:t.server_retries,request_manager_state:t.request_manager_state,debug:t.debug}},o.__logEvent=function(t,n){n=n||{},this.$VideoUploadSession53&&(n.file_size=this.$VideoUploadSession53.getSize(),n.file_extension=this.$VideoUploadSession53.getExtension(),n.sent_bytes=this.$VideoUploadSession63),this.$VideoUploadSession$p_55().logEvent(t,n)},o.__getVideoUploadStartRequestManager=function(t,r,o,a,i,l,s,u){return new(n("VideoUploadStartRequestManager"))(t,r,o,a,i,l,s,u)},o.__getVideoUploadReceiveRequestManager=function(t,r){return new(n("VideoUploadReceiveRequestManager"))(t,r.max_transport_retries,r.max_transport_retry_timeout,r.max_server_retries,r.response_timeout_enabled,r.max_response_timeout_retries,r.response_timeout_speed_variation_factor_ppt,r.transport_retry_interval_base,r.server_retry_interval_base,r.receive_errors_force_retry,r.access_token,r.resumability_enabled,r.resumability_async_enabled,r.resumable_service_name,r.resumable_service_domain,r.datr,r.resumability_min_file_size,r.resumable_service_proxy_receive,r.resumable_service_send_media_info,r.resumable_service_send_file_size,r.resumable_reset_transport_retries_on_progress,r.traffic_tracing_enabled,r.traffic_tracing_min_file_size)},o.__getVideoUploadPostRequestManager=function(t,r){return new(n("VideoUploadPostRequestManager"))(t,r.post_max_transport_retries,r.post_transport_retry_interval_base,r.post_max_server_retries,r.post_server_retry_interval_base)},r.deleteVideo=function(t){var e=new(n("AsyncRequest"))("/ajax/video/actions/delete").setData({fbid:t,redirect:!1});e.setErrorHandler(function(){}),e.send()},r})(n("mixin")(n("cr:909282")));a.exports=l}),null);
__d("VideoUploader",["FBLogger","MediaUploadVUShim","VideoUploadCrashMonitor","VideoUploadSession","cr:909282","getErrorSafe","mixin"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.abandon=function(e){e===void 0&&(e=!1);var t=n.getVideoID();n.$VideoUploader2?n.$VideoUploader2.abandon(e):e&&t&&r("VideoUploadSession").deleteVideo(t),n.reset()},n.$VideoUploader1=t,n.$VideoUploader2=null,n.$VideoUploader3=null,n.$VideoUploader4=t.waterfall_id==null?null:t.waterfall_id,n.$VideoUploader5=n.$VideoUploader1.ad_account_id,t.monitor_crashes&&(n.$VideoUploader6=new(r("VideoUploadCrashMonitor")),n.$VideoUploader6.logKnownCrashes()),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setComposerSessionID=function(t){this.$VideoUploader7=t,this.$VideoUploader2&&this.$VideoUploader2.setComposerSessionID(t)},n.getLogger=function(){if(this.$VideoUploader2&&this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger()},n.upload=function(t,n){var e=this;if(!this.$VideoUploader2){var r=this.__getVideoUploadSession(this.$VideoUploader1);r.setComposerSessionID(this.$VideoUploader7),(n==null?void 0:n.creativeTools)!=null&&r.setCreativeTools(JSON.stringify(n==null?void 0:n.creativeTools)),r.subscribe(this.__getEventsWhichShouldListenFromSession(),function(t,n){return e.$VideoUploader8(t,n)}),this.$VideoUploader2=r,r.start(t)}},n.__getVideoUploadSession=function(t){try{var e=r("MediaUploadVUShim").createSession(t);return e==null?new(r("VideoUploadSession"))(t):e}catch(e){return r("FBLogger")("media_upload").catching(r("getErrorSafe")(e)).warn("Failed to create shim video upload session"),new(r("VideoUploadSession"))(t)}},n.__getEventsWhichShouldListenFromSession=function(){return["upload-requested","upload-started","upload-progressed","upload-finished","upload-failed","upload-canceled","post-started","post-finished","post-failed","online","offline","metadata-parsed","set-waterfall-id"]},n.postUserRequest=function(){this.$VideoUploader2&&this.$VideoUploader2.startFlow&&this.$VideoUploader2.startFlow()},n.setTargetID=function(t){this.$VideoUploader2!=null&&this.$VideoUploader2.setTargetID(t)},n.setHasFileBeenReplaced=function(t){this.$VideoUploader1.has_file_been_replaced=t},n.post=function(t){this.$VideoUploader2&&this.$VideoUploader2.post(t)},n.getVideoID=function(){return this.$VideoUploader2&&(this.$VideoUploader3=this.$VideoUploader2.getVideoID()),this.$VideoUploader3},n.getVideoMetadataFromSession=function(){if(this.$VideoUploader2)return this.$VideoUploader2.getVideoMetadata()},n.cancel=function(t){t===void 0&&(t=!1);var e=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.cancel(t):t&&e&&r("VideoUploadSession").deleteVideo(e),this.reset()},n.reset=function(){this.$VideoUploader2&&(this.$VideoUploader3=this.getVideoID()),this.$VideoUploader2=null},n.getUploadSession=function(){return this.$VideoUploader2},n.getLoggerData=function(){return{waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader4:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}},n.isPostInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()},n.isSessionInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()},n.isSessionExist=function(){return!!this.$VideoUploader2},n.getUploadParameters=function(){return this.$VideoUploader1},n.__getSession=function(){return this.$VideoUploader2},n.__getEventsForWhichSessionShouldBeSetToNull=function(){return["upload-failed","post-finished","multimedia-upload-finished"]},n.$VideoUploader8=function(t,n){this.__getEventsForWhichSessionShouldBeSetToNull().includes(t)&&this.reset(),this.__delegateEvent(t,n)},n.__delegateEvent=function(t,n){this.inform(t,n)},t})(r("mixin")(n("cr:909282")));l.default=e}),98);
__d("CometComposerDraftingUtils",["ComposerMediaFileUploader","FBLogger","LexicalText","MWPActor.react","ReactDOM","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=["abTestData","copyrightPreCheckMetadata","editorRef","editorState","featureDefinitionsGating","lexicalEditor","mediaUploadStatuses","onCloseReelsComposer","onCloseUnderlyingDialog","placeholderTextOverride","submitText","videoComposerData"],s=["currentSelectedVideoFrame","generatedThumbnails","thumbnailFile"],u="comet_composer_drafts",c="reel_draft",d="post_draft",m=1,p="draft_content",_=12096e5;function f(){var e;return o("MWPActor.react").isAPPlus()||o("MWPActor.react").isPromode()?!1:(e=r("qex")._("1295"))!=null?e:!1}function g(){var e;return o("MWPActor.react").isAPPlus()||o("MWPActor.react").isPromode()?!1:(e=r("qex")._("1805"))!=null?e:!1}function h(){var e;return(e=r("qex")._("4296"))!=null?e:!0}function y(e){r("FBLogger")("comet_composer").mustfix("Experienced error during post draft retrieval: "+e.toString())}function C(e){r("FBLogger")("comet_composer").mustfix("Experienced error during post draft save: "+e.toString())}function b(e){r("FBLogger")("comet_composer").mustfix("Experienced error during post draft deletion: "+e.toString())}function v(e,t,n){return new Promise(function(r,o){var a=window.indexedDB.open(u,m);a.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore(c,{keyPath:"id"});n.createIndex(p,[p],{unique:!1});var r=t.createObjectStore(d,{keyPath:"id"});r.createIndex(p,[p],{unique:!1})},a.onerror=function(){C(a.error),o(a.error)},a.onsuccess=function(a){var i=a.target.result;try{var l=i.transaction(n,"readwrite"),s=l.objectStore(n);s.put({draftViewState:e,id:t,timestamp:Date.now()}),l.oncomplete=function(){i.close(),r(!0)},l.onerror=function(e){i.close(),o(e)}}catch(e){i.close(),C(e),o(e)}}})}function S(e,t){return new Promise(function(n,r){var o=window.indexedDB.open(u,m);o.onerror=function(e){r(e)},o.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore(c,{keyPath:"id"});n.createIndex(p,[p],{unique:!1});var r=t.createObjectStore(d,{keyPath:"id"});r.createIndex(p,[p],{unique:!1})},o.onsuccess=function(o){var a=o.target.result;try{var i=a.transaction(t,"readonly"),l=i.objectStore(t),s=l.get(e);i.oncomplete=function(){var r;a.close();var o=(r=s.result)==null?void 0:r.timestamp;if(o!=null&&Date.now()-o>_)R(e,t).then(function(){return n(null)}).catch(function(e){b(e)});else{var i,l=(i=s.result)==null?void 0:i.draftViewState;n(l)}},i.onerror=function(e){a.close(),r(e)}}catch(e){a.close(),e instanceof Error&&e.name==="NotFoundError"?(y(e),L().then(function(){return n(null)}).catch(function(e){r(e)})):r(e)}}})}function R(e,t){return new Promise(function(n,r){var o=window.indexedDB.open(u,m);o.onsuccess=function(a){var i=a.target.result;try{var l=i.transaction(t,"readwrite"),s=l.objectStore(t).delete(e);l.oncomplete=function(){i.close(),n(!0)},l.onerror=function(){i.close(),b(o.error),r(s.error)}}catch(e){i.close(),b(e),r(e)}},o.onerror=function(){b(o.error),r(o.error)}})}function L(){return new Promise(function(e,t){var n=window.indexedDB.deleteDatabase(u);n.onsuccess=function(){e(!0)},n.onerror=function(){t(n.error)}})}function E(e,t,n,a){var i=r("ComposerMediaFileUploader").getInstance(t);a==null||a();var l=[];if(e.mediaUploadStatuses)for(var s in e.mediaUploadStatuses)l.push(e.mediaUploadStatuses[s].onFileComplete);else return Promise.resolve();if(l.length>0&&i!=null){var u=function(t){o("ReactDOM").flushSync(function(){return n({draftState:"PREEXISTING",entID:t.entID,imageURL:t.attachmentType==="PHOTO"?t.imageURL:void 0,takenTime:t.attachmentType==="PHOTO"?t.takenTime:void 0,type:"MEDIA_UPLOAD_SUCCESSFUL",uploadID:t.uploadID})})};return i.successObserver.subscribe(u),Promise.all(l).then(function(){return Promise.resolve()}).catch(function(e){var t;return r("FBLogger")("comet_composer").mustfix("Media upload failed during draft save","Error: "+((t=e==null?void 0:e.message)!=null?t:"Unknown error")),Promise.reject(e)}).finally(function(){i.successObserver.unsubscribe(u)})}else return Promise.resolve()}async function k(e){if(e==null)return null;if(e instanceof File||e instanceof Blob)return e;if(typeof e=="object"&&e!=null&&"getData"in e&&typeof e.getData=="function")try{var t=await e.getData();return t}catch(e){return r("FBLogger")("comet_composer").warn("Failed to serialize thumbnail file",e),null}return null}async function I(t,n,a,i,l,u){var c,d,m=(c=t.lexicalEditor)==null?void 0:c.getEditorState(),p=m==null?void 0:m.toJSON(),_=t.abTestData,f=t.copyrightPreCheckMetadata,g=t.editorRef,h=t.editorState,y=t.featureDefinitionsGating,C=t.lexicalEditor,b=t.mediaUploadStatuses,S=t.onCloseReelsComposer,R=t.onCloseUnderlyingDialog,L=t.placeholderTextOverride,E=t.submitText,I=t.videoComposerData,T=babelHelpers.objectWithoutPropertiesLoose(t,e),D=C==null||(d=C.getEditorState())==null?void 0:d.read(o("LexicalText").$rootTextContent),x=null;t.mediaAttachments!=null&&(x=await Promise.all(t.mediaAttachments.map(async function(e){if(e.fileType==="VIDEO"){var t=e.videoAttachmentMetadata;if(t!=null){var n=t.currentSelectedVideoFrame,r=t.generatedThumbnails,o=t.thumbnailFile,a=babelHelpers.objectWithoutPropertiesLoose(t,s),i=await k(o);return babelHelpers.extends({},e,{videoAttachmentMetadata:babelHelpers.extends({},a,{thumbnailFile:i})})}}return e})));var $=babelHelpers.extends({},T,{draftedPostText:D},x!=null&&{mediaAttachments:x},{serializedLexicalEditorState:p});v($,l,u).then(function(){n!=null&&n(),i==null||i(),a==null||a({ignoreIsSavingFlag:!0})}).catch(function(e){r("FBLogger")("comet_composer").mustfix(e),i==null||i(e)})}function T(e){return e.map(function(e){var t=e;e.fileType==="VIDEO"&&e.file!=null&&(t=babelHelpers.extends({},e,{fileObjectURL:URL.createObjectURL(e.file)}));var n=t.videoAttachmentMetadata;if(n!=null){var r=babelHelpers.extends({},n);if(n.thumbnailPreviewURL!=null&&n.thumbnailFile!=null&&n.thumbnailFile instanceof File){var o=URL.createObjectURL(n.thumbnailFile);r.thumbnailPreviewURL=o,r.customURL=o}t=babelHelpers.extends({},t,{videoAttachmentMetadata:r})}return t})}l.canFriendsAndFamilyUsersDraftPostsSilentExposure=f,l.canFriendsAndFamilyUsersDraftPostsWithExposure=g,l.shouldShowDraftsInline=h,l.logDraftRetrievalError=y,l.logDraftSaveError=C,l.logDraftDeleteError=b,l.addDraftToIndexedDB=v,l.getDraftFromIndexedDB=S,l.deleteDraftFromIndexedDB=R,l.clearAllDraftsFromIndexedDB=L,l.processMediaUpload=E,l.createSerializedDraft=I,l.createNewObjectURLsForVideosAndThumbnails=T}),98);
__d("getComposerUnsavedChangesAlert",["fbt","CometComposerDirtyTracker"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return{primaryAction:function(n,r){o("CometComposerDirtyTracker").setIsComposerDirty(e.creationSessionID,!1),r()},primaryButtonLabel:s._(/*BTDS*/"Leave"),secondaryButtonLabel:s._(/*BTDS*/"Keep editing"),title:s._(/*BTDS*/"Leave Page?"),warnMessage:s._(/*BTDS*/"You haven't finished your post yet. Do you want to leave without finishing?")}}l.default=e}),226);
__d("useComposerTerminalEventLog",["RunComet","cometComposerLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(6),a;n[0]!==t||n[1]!==e?(a=function(){if(e()){var n=t();n!=null&&r("cometComposerLogger")({fields:{terminalReason:"shutdown"},type:"COMPOSER_POST_TERMINAL"},n)}},n[0]=t,n[1]=e,n[2]=a):a=n[2];var i=a,l,s;n[3]!==i?(l=function(){var e=o("RunComet").onUnload(i);return function(){e&&e.remove()}},s=[i],n[3]=i,n[4]=l,n[5]=s):(l=n[4],s=n[5]),c(l,s)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("WAMapWithDefault",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,t!=null?this.$2=new Map(t):this.$2=new Map}var t=e.prototype;return t.size=function(){return this.$2.size},t.clear=function(){this.$2.clear()},t.delete=function(t){return this.$2.delete(t)},t.get=function(t){var e=this.$2.get(t);if(e!=null)return e;var n=this.$1(t);return this.$2.set(t,n),n},t.keys=function(){return this.$2.keys()},t.entries=function(){return this.$2.entries()},t.update=function(n,r){var t=new Map(this.$2).set(n,r(this.get(n)));return new e(this.$1,t)},t.toMap=function(){return new Map(this.$2)},e})();i.MapWithDefault=e}),66);
__d("BroadcastChannelFallback",["FBLogger","WAMapWithDefault"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAMapWithDefault")).MapWithDefault(function(){return new Set});function s(t,n){e.get(t).add(n)}function u(t,n){e.get(t).delete(n)}function c(t,n){var o=e.get(t);o.forEach(function(e){return e(n)}),o.size===0&&r("FBLogger")("BroadcastChannelFallback").warn("No listener for namespace",t)}l.registerBroadcastChannelFallbackListener=s,l.unregisterBroadcastChannelFallbackListener=u,l.handleBroadcastChannelFallbackMessage=c}),98);
__d("CryptoLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("FBLogger")("labyrinth_web","crypto."+e)}function s(e,t){return t instanceof Error?e.catching(t):e}l.CryptoLogger=e,l.captureError=s}),98);
__d("EBAPIQPLPoints",["QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";var e={CREATE_WORKER_NETWORK_EXECUTE_END:"create_worker_network_execute_end",CREATE_WORKER_NETWORK_EXECUTE_START:"create_worker_network_execute_start",GRAPHQL_QUERY_END:"graphql_query_end",GRAPHQL_QUERY_START:"graphql_query_start"},s={CLIENT_STATE_RETRIEVED:"client_state_retrieved",EB_NOT_ENABLED:"eb_not_enabled",EBLS_NOT_INITIALIZED:"ebls_not_initialized",EMPTY_DECRYPTION_RESPONSE:"empty_decryption_response",INVALID_CLIENT_STATE:"invalid_client_state",INVALID_GRAPHQL_RESPONSE:"invalid_graphql_response",INVALID_PARAMETERS:"invalid_parameters",LSDB_SINGLETON_RETRIEVED:"lsdb_singleton_retrieved",NO_CLIENT_STATE:"no_client_state",NULL_CHAT_JID:"null_chat_jid",RUNTIME_ERROR:"runtime_error",UNSUPPORTED_CONTEXT:"unsupported_context"},u=babelHelpers.extends({},e),c=babelHelpers.extends({},e,s,{BACKUP_ID_NULL:"backup_id_null",BATCH_RESTORE_AND_DECRYPT_FAILURE:"batch_restore_and_decrypt_failure",DELETE_MAILBOX:"delete_mailbox",DERIVE_AND_STORE_EPOCHS_END:"derive_and_store_epochs_end",DERIVE_AND_STORE_EPOCHS_START:"derive_and_store_epochs_start",SERVER_SIDE_EXCEPTION:"server_side_exception"}),d={ADDED_ATTACHMENT_CONTEXT:"added_attachment_context",ADDED_ATTACHMENT_CONTEXT_LEGACY:"added_attachment_context_legacy",DEQUEUE:"added_to_queue_end",ENQUEUE:"added_to_queue_start",ENQUEUE_FAILURE:"enqueue_failure",GENERATE_BACKUP_DIRECTIVE_END:"generate_backup_directive_end",GENERATE_BACKUP_DIRECTIVE_START:"generate_backup_directive_start",GENERATE_REPORTING_META_END:"generate_reporting_meta_end",GENERATE_REPORTING_META_START:"generate_reporting_meta_start",GET_ATTACHMENT_CONTEXT_END:"get_attachment_context_end",GET_ATTACHMENT_CONTEXT_START:"get_attachment_context_start",MESSAGE_RESULT_FAILURE_OR_NULL:"message_result_failure_or_null",NO_INCOMING_MESSAGES:"no_incoming_messages",NO_PROCESSED_MESSAGES:"no_processed_messages",PROCESSED_MESSAGES:"processed_messages",RUNTIME_ERROR:"runtime_error",SUCCESSFULLY_PROCESSED_MESSAGE:"successfully_processed_message",UKNOWN_MESSAGE_VERSION_OR_PROTOCOL:"unknown_message_version_or_protocol",UNABLE_TO_CREATE_BACKUP_DIRECTIVE:"unable_to_create_backup_directive",UNKNOWN_MESSAGE_TYPE:"unknown_message_type",UNSUPPORTED_MESSAGE_TYPE:"unsupported_message_type",UPLOAD_DELETED_MESSAGE:"upload_deleted_message",UPLOAD_PAYLOAD_CREATED:"upload_payload_creation_success",UPLOAD_PAYLOAD_CREATION_FAILURE:"upload_payload_creation_failure",UPLOAD_PAYLOAD_CREATION_START:"upload_payload_creation_start"},m={ADD_DEVICE_CHECK_RC_STATUS:"add_device_check_rc_status",ADD_DEVICE_COULD_NOT_FIND_BACKUP:"add_device_could_not_find_backup",ADD_DEVICE_EBSM_API_START:"add_device_ebsm_api_start",ADD_DEVICE_FAILED_DEVICE_REGISTRATION_ID_NULL:"add_device_failed_device_registration_id_null",ADD_DEVICE_FAILED_TO_GET_RC_STATUS:"add_device_failed_to_get_rc_status",ADD_DEVICE_FAILURE_BACKUP_NOT_FOUND:"add_device_failure_backup_not_found",ADD_DEVICE_OPTIMISTIC_STATUS:"add_device_optimistic_status",ADD_DEVICE_RUNTIME_ERROR:"add_device_runtime_error",ADD_DEVICE_SPROC_END:"add_device_sproc_end",ADD_DEVICE_SPROC_FAILURE:"add_device_sproc_failure",ADD_DEVICE_SPROC_START:"add_device_sproc_start",ADD_DEVICE_SUBSCRIPTION_END:"add_device_subscription_end",ADD_DEVICE_SUBSCRIPTION_START:"add_device_subscription_start",ADD_DEVICE_TASK_END:"add_device_task_end",ADD_DEVICE_TASK_START:"add_device_task_start",ADD_DEVICE_TIMEOUT:"add_device_timeout",ADD_DEVICE_WAIT_FOR_EBLS_END:"add_device_wait_for_ebls_end",ADD_DEVICE_WAIT_FOR_EBLS_START:"add_device_wait_for_ebls_start",INVALID_RECOVERY_CODE:"invalid_recovery_code",ON_START_BEGIN:"on_start_start",ON_START_SUCCESS:"on_start_end",OTC_ADD_DEVICE_SPROC_END:"otc_add_device_sproc_end",OTC_ADD_DEVICE_SPROC_ERROR:"otc_add_device_sproc_error",OTC_ADD_DEVICE_SPROC_FAILURE:"otc_add_device_sproc_failure",OTC_ADD_DEVICE_SPROC_START:"otc_add_device_sproc_start",OTC_ADD_DEVICE_SUCCESS:"otc_add_device_success",OTC_ADD_DEVICE_SYSTEM_ERROR:"otc_add_device_system_error",OTC_ADD_DEVICE_UNEXPECTED_RECOVERY_CODE_STATUS:"otc_add_device_unexpected_rc_status"},p={ADD_DEVICE_FETCH_VD_GRAPHQL_END:"add_device_fetch_vd_graphql_end",ADD_DEVICE_FETCH_VD_GRAPHQL_FAIL:"add_device_fetch_vd_graphql_fail",ADD_DEVICE_FETCH_VD_GRAPHQL_START:"add_device_fetch_vd_graphql_start",ADD_DEVICE_GQL_END:"add_device_gql_end",ADD_DEVICE_GQL_FAIL:"add_device_gql_fail",ADD_DEVICE_GQL_START:"add_device_gql_start",ADD_DEVICE_MISSING_GRAPHQL_FIELDS:"add_device_missing_graphql_fields",ADD_DEVICE_PARSE_RECOVERY_CODE_END:"add_device_parse_recovery_code_end",ADD_DEVICE_PARSE_RECOVERY_CODE_FAIL:"add_device_parse_recovery_code_fail",ADD_DEVICE_PARSE_RECOVERY_CODE_START:"add_device_parse_recovery_code_start",ADD_DEVICE_VIRTUAL_DEVICE_EXISTS:"add_device_virtual_device_exists",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_END:"add_device_vd_key_sproc_end",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_FAIL:"add_device_vd_key_sproc_fail",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_START:"add_device_vd_key_sproc_start"},_={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",GET_DB_END:"get_db_end",GET_DB_START:"get_db_start",INITIALIZE_BACKUP_END:"initialize_backup_end",INITIALIZE_BACKUP_FAIL:"initialize_backup_fail",INITIALIZE_BACKUP_FAIL_NO_RECOVERY_CODE:"initialize_backup_fail_no_recovery_code",INITIALIZE_BACKUP_RUNNING:"initialize_backup_running",INITIALIZE_BACKUP_SPROC_END:"initialize_backup_sproc_end",INITIALIZE_BACKUP_SPROC_FAIL:"initialize_backup_sproc_fail",INITIALIZE_BACKUP_SPROC_START:"initialize_backup_sproc_start",INITIALIZE_BACKUP_START:"initialize_backup_start",INITIALIZE_BACKUP_SUBSCRIPTION_DELETE:"initialize_backup_subscription_delete",INITIALIZE_BACKUP_TIMEOUT:"initialize_backup_timeout",INITIALIZE_BACKUP_WORKER_START:"initialize_backup_worker_start",OPTIMISTIC_CLIENT_STATE:"optimistic_client_state"},f={DELETE_EB_BRIDGE_CALL_START:"delete_eb_bridge_call_start",DELETE_EB_GET_DB_END:"delete_eb_get_db_end",DELETE_EB_GET_DB_START:"delete_eb_get_db_start",DELETE_EB_NON_DELETE_OPERATION:"delete_eb_non_delete_operation",DELETE_EB_NON_PUT_OPERATION:"delete_eb_non_put_operation",DELETE_EB_SPROC_ERROR:"delete_eb_sproc_error",DELETE_EB_SPROC_FAIL:"delete_eb_sproc_fail",DELETE_EB_SPROC_START:"delete_eb_sproc_start",DELETE_EB_SPROC_SUCCESS:"delete_eb_sproc_success",DELETE_EB_START:"delete_eb_start",DELETE_EB_TASK_FAIL:"delete_eb_task_fail",DELETE_EB_TASK_START:"delete_eb_task_start",DELETE_EB_TASK_SUCCESS:"delete_eb_task_success",DELETE_EB_WORKER_START:"delete_eb_worker_start",FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start"},g={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",OPT_OUT_BACKUP_ROW_EXISTS:"opt_out_backup_row_exists",OPT_OUT_BACKUP_ROW_NULL:"opt_out_backup_row_null",OPT_OUT_BACKUP_SPROC_END:"opt_out_backup_sproc_end",OPT_OUT_BACKUP_SPROC_FAIL:"opt_out_backup_sproc_fail",OPT_OUT_BACKUP_SPROC_START:"opt_out_backup_sproc_start",OPT_OUT_BACKUP_TASK_END:"opt_out_backup_task_end",OPT_OUT_BACKUP_TASK_FAIL:"opt_out_backup_task_fail",OPT_OUT_BACKUP_TASK_START:"opt_out_backup_task_start",OPT_OUT_BACKUP_WORKER_START:"opt_out_backup_worker_start",OPT_OUT_BRIDGE_CALL_START:"opt_out_bridge_call_start",OPT_OUT_START:"opt_out_start"},h={SYNC_EPOCH_SPROC_END:"sync_epoch_sproc_end",SYNC_EPOCH_SPROC_START:"sync_epoch_sproc_start",SYNC_EPOCH_TIMEOUT:"sync_epoch_timeout"},y={REVOKE_VIRTUAL_DEVICE_DB_END:"revoke_virtual_device_get_db_end",REVOKE_VIRTUAL_DEVICE_DB_ERROR:"revoke_virtual_device_get_db_error",REVOKE_VIRTUAL_DEVICE_DB_START:"revoke_virtual_device_get_db_start",REVOKE_VIRTUAL_DEVICE_SPROC_ERROR:"revoke_virtual_device_sproc_error",REVOKE_VIRTUAL_DEVICE_SPROC_FAILURE:"revoke_virtual_device_sproc_failure",REVOKE_VIRTUAL_DEVICE_STATUS_INTERNAL_ERROR:"revoke_virtual_device_get_status_internal_error"},C={DERIVE_AND_STORE_EPOCHS_END:"derive_and_store_epochs_end",DERIVE_AND_STORE_EPOCHS_START:"derive_and_store_epochs_start",GET_CLIENT_STATE_END:"get_client_state_end",GET_CLIENT_STATE_START:"get_client_state_start",GET_EPOCHS_END:"get_epochs_end",GET_EPOCHS_START:"get_epochs_start",REPAIR_EPOCH_QUERY_END:"repair_epoch_query_end",REPAIR_EPOCH_QUERY_START:"repair_epoch_query_start"},b={CLEAR_CLIENT_STATE_END:"clear_client_state_end",CLEAR_CLIENT_STATE_START:"clear_client_state_start",CLEAR_ENCRYPTED_BACKUPS_END:"clear_encrypted_backups_end",CLEAR_ENCRYPTED_BACKUPS_START:"clear_encrypted_backups_start",CLEAR_EPOCHS_END:"clear_epochs_end",CLEAR_EPOCHS_START:"clear_epochs_start",CLEAR_METADATA_END:"clear_metadata_end",CLEAR_METADATA_START:"clear_metadata_start",CLEAR_PENDING_BACKUPS_END:"clear_pending_backups_end",CLEAR_PENDING_BACKUPS_START:"clear_pending_backups_start",CLEAR_RECOVERY_CODE_END:"clear_recovery_code_end",CLEAR_RECOVERY_CODE_START:"clear_recovery_code_start",CLEAR_RECOVERY_CODE_STATUS_END:"clear_recovery_code_status_end",CLEAR_RECOVERY_CODE_STATUS_START:"clear_recovery_code_status_start",CLEAR_VIRTUAL_DEVICES_END:"clear_virtual_devices_end",CLEAR_VIRTUAL_DEVICES_START:"clear_virtual_devices_start",FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",GET_DB_END:"get_db_end",GET_DB_START:"get_db_start",TRANSACTION_END:"transaction_end",TRANSACTION_START:"transaction_start"};function v(e,t,n,o,a){r("QPLUserFlow").addPoint(t,n,{data:babelHelpers.extends({},o,{bool:{runningInWorker:e}}),instanceKey:a})}function S(e,t,n,o,a){r("QPLUserFlow").endFailure(t,n,{annotations:babelHelpers.extends({},a,{bool:{runningInWorker:e}}),instanceKey:o})}function R(e,t,n,o){r("QPLUserFlow").endSuccess(t,{annotations:babelHelpers.extends({},o,{bool:{runningInWorker:e}}),instanceKey:n})}l.EBAPIQPLCommonPoints=e,l.EBAPIQPLCommonErrorPoints=s,l.EBMessageMetadataQPLPoints=u,l.EBMessageRestoreQueryQPLPoints=c,l.EBUploadQueueQPLPoints=d,l.EBAddDeviceQPLPoints=m,l.EBAddDeviceGraphqlQPLPoints=p,l.EBBackupInitQPLPoints=_,l.EBDeleteEBQPLPoints=f,l.EBOptOutQPLPoints=g,l.EBSyncEpochsQPLPoints=h,l.EBRevokeVirtualDeviceQPLPoints=y,l.EBRepairEpochsQPLPoints=C,l.EBDeleteBackupsOnClientQPLPoints=b,l.ebAPIAddQPLPoint=v,l.ebAPIEndFailure=S,l.ebAPIEndSuccess=R}),98);
__d("EBLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("wmi_eb",t)};l.EBLogger=e}),98);
__d("EBMinosLogger",["WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WATagsLogger").TAGS(["minos"]);l.minosLogger=e}),98);
__d("EBMinosMessageEncryptionVersion",["$InternalEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({V1:1,V2:2}),s=e.V1,u=r("gkx")("19866")?e.V2:e.V1;l.MinosMessageEncryptionVersion=e,l.INITIAL_VERSION=s,l.MINOS_MESSAGE_ENCRYPTION_CURRENT_VERSION=u}),98);
__d("EBMinosMessageMetadataVersion",["$InternalEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({V1:1,V2:2}),s=e.V1,u=r("gkx")("4258")?e.V2:e.V1;l.MinosMessageMetadataVersion=e,l.INITIAL_VERSION=s,l.MESSAGE_METADATA_CURRENT_VERSION=u}),98);
__d("WALongInt",["WAHex","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){if(typeof t!="number")throw o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"])),t).color("red"),new Error("numberOrThrowIfTooLarge is given a non-safe integer");return t}var d=function(t){return t==null?t:c(t)};function m(e){return e==null||typeof e!="number"?null:e}function p(e,t){if(typeof e=="number"&&typeof t=="number")return e>t;var n=typeof e=="number"?o("WAHex").hexLongFromNumber(e):e,r=typeof t=="number"?o("WAHex").hexLongFromNumber(t):t;return o("WAHex").isBiggerHexLong(n,r)}function _(e){if(typeof e=="number")return e.toString(10);for(var t=o("WAHex").hexLongToHex(e),n=[0],r=0,a=0;a<t.length;a++){r=o("WAHex").hexAt(t,a);for(var i=0;i<n.length;i++)n[i]=n[i]*16+r,r=n[i]/10|0,n[i]%=10;for(;r>0;)n.push(r%10),r=r/10|0}var l=n.reverse().join("");return o("WAHex").hexLongIsNegative(e)?"-"+l:l}function f(e){if(!/^-?\d+$/.test(e))throw o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string'])),e).color("red"),new Error("decimalStringToLongInt is given an invalid decimal string");var t=e[0]==="-",n=e.replace(/^-?0*/,""),r=n.length;if(r<16||r===16&&n<="9007199254740991")return t?-Number(n):Number(n);if(r>20||r===20&&n>"18446744073709551615"||t&&(r>19||r===19&&n>"9223372036854775807"))throw o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits'])),e).color("red"),new Error("decimalStringToHexLong is given value over 64 bits");for(var a=0,i=0,l=0;l<r;l++)a=a*10+Number(n[l]),i=i*10+Math.floor(a/4294967296),a=a%4294967296;return o("WAHex").createHexLongFrom32Bits(i,a,t)}l.numberOrThrowIfTooLarge=c,l.maybeNumberOrThrowIfTooLarge=d,l.maybeNumber=m,l.isBiggerLongInt=p,l.longIntToDecimalString=_,l.decimalStringToLongInt=f}),98);
__d("EBMinosTypes",["$InternalEnum","WAJids","WALongInt"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return e.endsWith(o("WAJids").MSGR_USER_DOMAIN)?e.slice(0,-o("WAJids").MSGR_USER_DOMAIN.length):null}var u=o("WAJids").createJidUtils({platform:"msgr"});function c(e){return u.toUserJid(e)}function d(e){return e}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}function g(e){return o("WALongInt").decimalStringToLongInt(new TextDecoder().decode(e))}function h(e){return e}function y(e){return e}function C(e){return e}function b(e){return e}function v(e){return e}function S(e){return e}function R(e){return e}function L(e){return e}function E(e){return e}function k(e){return e}function I(e){return e}function T(e){return e}function D(e){return e}function x(e){return e}function $(e){return e}function P(e){return e}function N(e){return e}function M(e){return e}function w(e){return e}function A(e){return e}function F(e){return e}function O(e){return e}function B(e){return e}function W(e){return e}function q(e){return e}function U(e){return e}var V=n("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});l.unsafeCastToUserFbId=e,l.userJidToUserFbId=s,l.userFbidToUserJid=c,l.unsafeCastToMinosThreadId=d,l.unsafeCastToEpochHead=m,l.unsafeCastToEpochSelfSig=p,l.unsafeCastToEpochPrevSig=_,l.unsafeCastToEpochNumber=f,l.unsafeCastToBase64StringIntToEpochNumber=g,l.unsafeCastToEpochCreationTime=h,l.unsafeCastToExportRootKey=y,l.unsafeCastToMekId=C,l.unsafeCastMekKey=b,l.unsafeCastMekRosterHash=v,l.unsafeCastToEncryptedMek=S,l.unsafeCastToMekFbId=R,l.unsafeCastToMekMiThreadId=L,l.unsafeCastToEncryptedMessage=E,l.unsafeCastToEncryptedMessageSignature=k,l.unsafeCastToDecryptedMessage=I,l.unsafeCastToMailboxFbId=T,l.unsafeCastToMailboxSigningPK=D,l.unsafeCastToMailboxSigningSK=x,l.unsafeCastToMailboxEncryptionPK=$,l.unsafeCastToMailboxEncryptionSK=P,l.unsafeCastToMailboxAuthPK=N,l.unsafeCastToMailboxAuthSK=M,l.unsafeCastToTransportSenderEphemeralPK=w,l.unsafeCastToTransportSenderEphemeralKeySig=A,l.unsafeCastToTransportSigningPK=F,l.unsafeCastToTransportSigningSK=O,l.unsafeCastToEpochFbId=B,l.castToSupplementalOpToken=W,l.unsafeCastToAttachmentAccessTokenSecret=q,l.unsafeCastToAttachmentPrimaryKeySecret=U,l.MinosAttachmentMediaType=V}),98);
__d("MSGDataclassTypes.flow",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({HistoryRestore:"HISTORY_RESTORE",Reporting:"REPORTING",Fts:"FTS",NewMemberExport:"NEW_MEMBER_EXPORT"}),s=e({Before:"BEFORE",After:"AFTER"}),u=e({UpsertBackupItem:"UPSERT_BACKUP_ITEM",RemoveBackupItem:"REMOVE_BACKUP_ITEM"}),c=e({Message:"MESSAGE",Thread:"THREAD"}),d=e({Photo:"PHOTO",Permanent:"PERMANENT",Ephemeral:"EPHEMERAL",Video:"VIDEO",Gif:"GIF",Audio:"AUDIO",File:"FILE",Raven:"RAVEN",UnreadRaven:"UNREAD_RAVEN",ShareIgMedia:"SHARE_IG_MEDIA",ShareLink:"SHARE_LINK",ShareIgClips:"SHARE_IG_CLIPS",Shh:"SHH",StoryReply:"STORY_REPLY",DisappearingMessage:"DISAPPEARING_MESSAGE",RavenSeen:"RAVEN_SEEN",RavenReplayed:"RAVEN_REPLAYED",RavenReadOnce:"RAVEN_READ_ONCE",RavenReplayable:"RAVEN_REPLAYABLE",RavenPermanent:"RAVEN_PERMANENT",ActionLog:"ACTION_LOG"}),m=e({Fbn:"FBN",Instamadillo:"INSTAMADILLO",Unknown:"UNKNOWN"}),p=e({Retroactive:"RETROACTIVE",Realtime:"REALTIME",InfiniteRetroactive:"INFINITE_RETROACTIVE",Retry:"RETRY"}),_=e({Success:"SUCCESS",RetryableException:"RETRYABLE_EXCEPTION",PermanentFailure:"PERMANENT_FAILURE"}),f=e({NotApplicable:"NOT_APPLICABLE",NeedsUpload:"NEEDS_UPLOAD",AlreadyUploaded:"ALREADY_UPLOADED"}),g=e({DeleteBackupStateOnClient:"DELETE_BACKUP_STATE_ON_CLIENT",IssueCheckBackupStateTask:"ISSUE_CHECK_BACKUP_STATE_TASK",UpsertStatusTrigger:"UPSERT_STATUS_TRIGGER",UpsertReenrollmentTrigger:"UPSERT_REENROLLMENT_TRIGGER",UpdateInitializeRestoreResult:"UPDATE_INITIALIZE_RESTORE_RESULT",InitializeRestore:"INITIALIZE_RESTORE",DeleteAndInsertPakeMessage:"DELETE_AND_INSERT_PAKE_MESSAGE",RotateDeviceKeysStart:"ROTATE_DEVICE_KEYS_START",LegacyRetroactiveBackup:"LEGACY_RETROACTIVE_BACKUP",UpdatePbqWithNeedsBackupUploadStatus:"UPDATE_PBQ_WITH_NEEDS_BACKUP_UPLOAD_STATUS",SyncDeviceCreationTimestamp:"SYNC_DEVICE_CREATION_TIMESTAMP"}),h=e({LlmOutput:"llm_output",SendQuery:"send_query",StartTyping:"start_typing",StopTyping:"stop_typing",VideoAboutToFinish:"video_about_to_finish"}),y=e({Text:"text",Image:"image",Voice:"voice",Link_1p:"link_1p",Link_3p:"link_3p"}),C=e({Reasoning:"REASONING",Responding:"RESPONDING"}),b=e({CopyToClipboard:"COPY_TO_CLIPBOARD",SendToChat:"SEND_TO_CHAT",FollowUpPrompt:"FOLLOW_UP_PROMPT"}),v=e({End:"END",Start:"START"}),S=e({InThread:"IN_THREAD",BottomSheet:"BOTTOM_SHEET"}),R=e({Keyword:"KEYWORD",Method:"METHOD",Str:"STR",Number:"NUMBER",Comment:"COMMENT",Default:"DEFAULT"}),L=e({Fetching:"FETCHING",Fetched:"FETCHED",Failed:"FAILED"}),E=e({Landscape:"LANDSCAPE",Portrait:"PORTRAIT"}),k=e({Group:"GROUP",Page:"PAGE"}),I=e({Follow:"FOLLOW",Unfollow:"UNFOLLOW",Join:"JOIN",Leave:"LEAVE"}),T=e({Fetching:"FETCHING",Fetched:"FETCHED",Failed:"FAILED"}),D=e({Bing:"BING",Brave:"BRAVE",Google:"GOOGLE",HelpCenter:"HELP_CENTER",InHouse:"IN_HOUSE",Kss:"KSS",Mase:"MASE"}),x=e({Planned:"PLANNED",InProgress:"IN_PROGRESS",Completed:"COMPLETED",Stopped:"STOPPED"}),$=e({Circle:"CIRCLE",Square:"SQUARE",Vertical:"VERTICAL"}),P=e({GroupPost:"GROUP_POST",PagePost:"PAGE_POST"}),N=e({Start:"START",End:"END"}),M=e({Top:"TOP",Center:"CENTER"}),w=e({OpenFullView:"OPEN_FULL_VIEW",CancelReasoning:"CANCEL_REASONING"}),A=e({HorizontalLine:"HORIZONTAL_LINE",Dot:"DOT"}),F=e({FacebookPost:"FACEBOOK_POST",InstagramPost:"INSTAGRAM_POST",ThreadsPost:"THREADS_POST",ThirdParty:"THIRD_PARTY"}),O=e({Restaurant:"RESTAURANT",Movie:"MOVIE",TvShows:"TV_SHOWS",Celebrity:"CELEBRITY",SportsTeam:"SPORTS_TEAM",InfoTerm:"INFO_TERM"}),B=e({ContextualMenu:"CONTEXTUAL_MENU",AiLookup:"AI_LOOKUP"}),W=e({RequestStart:"REQUEST_START",Searching:"SEARCHING",Imagining:"IMAGINING",UnderstandingImage:"UNDERSTANDING_IMAGE",Generating:"GENERATING",StreamingImage:"STREAMING_IMAGE"}),q=e({Love:"LOVE",Giftwrap:"GIFTWRAP",Celebration:"CELEBRATION",Fire:"FIRE",AvatarLove:"AVATAR_LOVE",AvatarAngry:"AVATAR_ANGRY",AvatarCry:"AVATAR_CRY",AvatarLaugh:"AVATAR_LAUGH",Halloween:"HALLOWEEN",NomNomDash:"NOM_NOM_DASH",NewYears:"NEW_YEARS",ValentinesDay:"VALENTINES_DAY",AntiValentines:"ANTI_VALENTINES"}),U=e({Reminder:"REMINDER",Subscription:"SUBSCRIPTION"}),V=e({Memu:"MEMU",Imagine:"IMAGINE",ImagineRestyle:"IMAGINE_RESTYLE"}),H=e({Unknown:"UNKNOWN",Memu:"MEMU",Synthetic:"SYNTHETIC",UserUploaded:"USER_UPLOADED"}),G=e({Simple:"SIMPLE",Retro:"RETRO",Messages:"MESSAGES"}),z=e({MagicModBackdrop:"MAGIC_MOD_BACKDROP",MagicModRestyle:"MAGIC_MOD_RESTYLE",Imagine:"IMAGINE",Memu:"MEMU",HiddenMetadata:"HIDDEN_METADATA"}),j=e({PaidPartnership:"PAID_PARTNERSHIP",NoBranding:"NO_BRANDING"}),K=e({AskMetaAi:"ASK_META_AI",Summarize:"SUMMARIZE"}),Q=e({Unknown:"UNKNOWN",Product:"PRODUCT",Faq:"FAQ",Chat:"CHAT",Post:"POST",Pricelist:"PRICELIST",Other:"OTHER"}),X=e({BanUser:"BAN_USER",RemoveUser:"REMOVE_USER",SuspendUser:"SUSPEND_USER",RemoveMessage:"REMOVE_MESSAGE",ReportMessage:"REPORT_MESSAGE",HideMessage:"HIDE_MESSAGE"}),Y=e({MothersDay:"MOTHERS_DAY",FathersDay:"FATHERS_DAY",Graduation:"GRADUATION",NationalSelfie:"NATIONAL_SELFIE",PhIndependenceDay:"PH_INDEPENDENCE_DAY",JulyFourth:"JULY_FOURTH",FriendshipDay:"FRIENDSHIP_DAY"}),J=e({Birthday:"BIRTHDAY",Attribution:"ATTRIBUTION"}),Z=e({XmaWebUrl:"XMA_WEB_URL"}),ee=e({GenAiGetInfo:"GEN_AI_GET_INFO",GenAiReminder:"GEN_AI_REMINDER",GenAiThreadSurfing:"GEN_AI_THREAD_SURFING"}),te=e({Mention:"MENTION",Reply:"REPLY"}),ne=e({Note:"NOTE",Prompt:"PROMPT",PromptResponse:"PROMPT_RESPONSE"}),re=e({Restaurant:"RESTAURANT",Movie:"MOVIE",TvShows:"TV_SHOWS",Celebrity:"CELEBRITY",SportsTeam:"SPORTS_TEAM"}),oe=e({GetInfo:"GET_INFO",GetRestaurantInfo:"GET_RESTAURANT_INFO",Reviews:"REVIEWS",MenuHighlights:"MENU_HIGHLIGHTS",Address:"ADDRESS",WhereToWatch:"WHERE_TO_WATCH",LatestNews:"LATEST_NEWS",FindNextGame:"FIND_NEXT_GAME",ResponseCard:"RESPONSE_CARD"}),ae=e({Untranscribed:"UNTRANSCRIBED",Transcribing:"TRANSCRIBING",Success:"SUCCESS",Error:"ERROR",UnsupportedLanguage:"UNSUPPORTED_LANGUAGE"}),ie=e({Undefined:"UNDEFINED",Genmoji:"GENMOJI",Metamoji:"METAMOJI",AnimatedEmoji:"ANIMATED_EMOJI"}),le=e({Video:"VIDEO",Image:"IMAGE",Other:"OTHER"}),se=e({Unactioned:"UNACTIONED",Accepted:"ACCEPTED",Deleted:"DELETED"}),ue=e({SummarizeInboxFnfMessages:"SUMMARIZE_INBOX_FNF_MESSAGES",PsiQueryPlan:"PSI_QUERY_PLAN"}),ce=e({Takedown:"TAKEDOWN",Restore:"RESTORE"}),de=e({SenderParent:"SENDER_PARENT",RecipientParent:"RECIPIENT_PARENT",Classifier:"CLASSIFIER",ReactiveEnforcement:"REACTIVE_ENFORCEMENT"}),me=e({Unknown:"UNKNOWN",SoftDeleteWithAppeal:"SOFT_DELETE_WITH_APPEAL",SoftDeleteWithoutAppeal:"SOFT_DELETE_WITHOUT_APPEAL",PermanentDelete:"PERMANENT_DELETE",SoftDeleteWithAppealParentUnviewable:"SOFT_DELETE_WITH_APPEAL_PARENT_UNVIEWABLE",SoftDeleteWithoutAppealParentUnviewable:"SOFT_DELETE_WITHOUT_APPEAL_PARENT_UNVIEWABLE"}),pe=e({Unknown:"UNKNOWN",BulkReply:"BULK_REPLY",AutoReply:"AUTO_REPLY"}),_e=e({Unknown:"UNKNOWN",AnimatedThankImage:"ANIMATED_THANK_IMAGE",AnimatedThankImageWithTextMessage:"ANIMATED_THANK_IMAGE_WITH_TEXT_MESSAGE"}),fe=e({FbmInbox:"FBM_INBOX",Profile:"PROFILE",Feed:"FEED",FbSearch:"FB_SEARCH",Watch:"WATCH",Shorts:"SHORTS",Ufi:"UFI",Ctm:"CTM",Cts:"CTS",Psrib:"PSRIB",Srib:"SRIB",Rta:"RTA",Mp:"MP",CommentMentions:"COMMENT_MENTIONS",ZorroMessage:"ZORRO_MESSAGE",FbHelpCenterXsMetaAi:"FB_HELP_CENTER_XS_META_AI",Dating:"DATING",IgReels:"IG_REELS",IgStory:"IG_STORY",IgFeed:"IG_FEED",IgProfile:"IG_PROFILE",IgNotes:"IG_NOTES",IgLive:"IG_LIVE",IgExternalLink:"IG_EXTERNAL_LINK",IgComment:"IG_COMMENT",FbNotes:"FB_NOTES",FbGroups:"FB_GROUPS",GenAiSuggestedPrompts:"GEN_AI_SUGGESTED_PROMPTS",GenAiMultiModal:"GEN_AI_MULTI_MODAL",GenAiFlAshImagine:"GEN_AI_FlASH_IMAGINE",GenAiAssistant:"GEN_AI_ASSISTANT",GenAiLocation:"GEN_AI_LOCATION",Sharesheet:"SHARESHEET",ProductHighlights:"PRODUCT_HIGHLIGHTS",MagicMessenger:"MAGIC_MESSENGER",SpectraAction:"SPECTRA_ACTION"}),ge=e({Unspecified:"UNSPECIFIED",QuickEmoji:"QUICK_EMOJI",Avatar:"AVATAR",SuggestedReply:"SUGGESTED_REPLY",PostLwrSuggestedReply:"POST_LWR_SUGGESTED_REPLY",WriteWithAi:"WRITE_WITH_AI",GifLightWeight:"GIF_LIGHT_WEIGHT",StickerLightWeight:"STICKER_LIGHT_WEIGHT",QuickEmojiPalette:"QUICK_EMOJI_PALETTE",SuggestedText:"SUGGESTED_TEXT",SuggestedEmoji:"SUGGESTED_EMOJI",SuggestedEmojiText:"SUGGESTED_EMOJI_TEXT"}),he=e({Default:"DEFAULT",CriticalUserMessage:"CRITICAL_USER_MESSAGE",NonCriticalAdminXma:"NON_CRITICAL_ADMIN_XMA"}),ye=e({ThreadviewSuggestedPrompt:"THREADVIEW_SUGGESTED_PROMPT",TypeaheadSuggestedPrompt:"TYPEAHEAD_SUGGESTED_PROMPT",SuggestedPrompt:"SUGGESTED_PROMPT",NullStatePrompt:"NULL_STATE_PROMPT",UserInputPrompt:"USER_INPUT_PROMPT",GenericPrompt:"GENERIC_PROMPT",ThreadviewUserInputPrompt:"THREADVIEW_USER_INPUT_PROMPT",Icebreakers:"ICEBREAKERS",ThreadSurfingPrompt:"THREAD_SURFING_PROMPT",MetaAiVoiceConversationStarter:"META_AI_VOICE_CONVERSATION_STARTER",MetaAiTextConversationStarter:"META_AI_TEXT_CONVERSATION_STARTER",MetaAiFabHint:"META_AI_FAB_HINT",AiLookup:"AI_LOOKUP"}),Ce=e({Mention:"MENTION",SuperReact:"SUPER_REACT",StoryReply:"STORY_REPLY",MessageReply:"MESSAGE_REPLY",ContentReply:"CONTENT_REPLY",ContentMention:"CONTENT_MENTION",ContentShare:"CONTENT_SHARE",OnPlatform:"ON_PLATFORM",OffPlatform:"OFF_PLATFORM",MessageForward:"MESSAGE_FORWARD",Avatar:"AVATAR",SocialSticker:"SOCIAL_STICKER",NoteReply:"NOTE_REPLY",InvokesGenAiResponse:"INVOKES_GEN_AI_RESPONSE",SentFromGenAiBot:"SENT_FROM_GEN_AI_BOT",DisappearingMessage:"DISAPPEARING_MESSAGE",IncludesOnPlatformContent:"INCLUDES_ON_PLATFORM_CONTENT",IncludesOffPlatformContent:"INCLUDES_OFF_PLATFORM_CONTENT",IncludesLink:"INCLUDES_LINK",MultitabEnv:"MULTITAB_ENV",PowerUp:"POWER_UP",MsysSend:"MSYS_SEND",EditMessage:"EDIT_MESSAGE",VanishMode:"VANISH_MODE",Superlative:"SUPERLATIVE",Raven:"RAVEN",Hotlike:"HOTLIKE",IsDialtone:"IS_DIALTONE",MessageReshare:"MESSAGE_RESHARE",PostReply:"POST_REPLY",IsNotDialtone:"IS_NOT_DIALTONE",ThirdPartyReshare:"THIRD_PARTY_RESHARE",ZeroBalanceDetected:"ZERO_BALANCE_DETECTED",ConversationStarter:"CONVERSATION_STARTER",AnimatedAiSticker:"ANIMATED_AI_STICKER",AiGeneratedSticker:"AI_GENERATED_STICKER",MagicModImage:"MAGIC_MOD_IMAGE",ShareOfOriginalUserContent:"SHARE_OF_ORIGINAL_USER_CONTENT",LightweightInteractionAsStoryReply:"LIGHTWEIGHT_INTERACTION_AS_STORY_REPLY",WriteWithMetaAi:"WRITE_WITH_META_AI",AvatarStyle_1:"AVATAR_STYLE_1",AvatarStyle_2:"AVATAR_STYLE_2",MetaAiEntitySuggestedPrompts:"META_AI_ENTITY_SUGGESTED_PROMPTS",ContentConversationStarter:"CONTENT_CONVERSATION_STARTER",MetaAiIntents:"META_AI_INTENTS",QuicksnapReply:"QUICKSNAP_REPLY",ContentBasedSparks:"CONTENT_BASED_SPARKS"}),be=e({MsgrE2EeGenai:"MSGR_E2EE_GENAI"}),ve=e({Imagine:"IMAGINE",Imaginev2:"IMAGINEV2",Imagineme:"IMAGINEME"}),Se=e({Animate:"ANIMATE",AnimateImagineme:"ANIMATE_IMAGINEME"}),Re=e({Share:"SHARE",Reply:"REPLY",Mention:"MENTION",Bump:"BUMP"}),Le=e({Statusupdate:"STATUSUPDATE",Grouppost:"GROUPPOST",Shareurl:"SHAREURL",Unifiedresponse:"UNIFIEDRESPONSE"}),Ee=e({Single:"SINGLE",Hscroll:"HSCROLL",Xcenter:"XCENTER",Portrait:"PORTRAIT",Layered:"LAYERED",Placeholder:"PLACEHOLDER",ExpiredPlaceholder:"EXPIRED_PLACEHOLDER",PilePrompt:"PILE_PROMPT",Stack:"STACK",SharedStack:"SHARED_STACK",StackCard:"STACK_CARD",StandardDxma:"STANDARD_DXMA",DxmaPlaceholder:"DXMA_PLACEHOLDER",Grid:"GRID"}),ke=e({Text:"TEXT",Media:"MEDIA"}),Ie=e({Unknown:"UNKNOWN",TwoOptionCombined:"TWO_OPTION_COMBINED",IgTwoOptionCombined:"IG_TWO_OPTION_COMBINED",FiveOptionStarRating:"FIVE_OPTION_STAR_RATING"}),Te=e({Unknown:"UNKNOWN",Location:"LOCATION",People:"PEOPLE",Event:"EVENT",ResharedPost:"RESHARED_POST",ResharedContent:"RESHARED_CONTENT",Page:"PAGE",Fundraiser:"FUNDRAISER",Product:"PRODUCT",AntiBully:"ANTI_BULLY",Instagram:"INSTAGRAM"}),De=e({None:"NONE",BasicSuperReactAnimation:"BASIC_SUPER_REACT_ANIMATION",FbEmoji:"FB_EMOJI",NonDefaultEmoji:"NON_DEFAULT_EMOJI"}),xe=e({Grid:"GRID",Hscroll:"HSCROLL",Portrait:"PORTRAIT",Single:"SINGLE",Vstack:"VSTACK",SharedStack:"SHARED_STACK"}),$e=e({Left:"LEFT",Center:"CENTER"}),Pe=e({Test:"TEST",None:"NONE",IgMediaShare:"IG_MEDIA_SHARE",IgMultipostShare:"IG_MULTIPOST_SHARE",IgStoryReply:"IG_STORY_REPLY",IgStoryPhotoShare:"IG_STORY_PHOTO_SHARE",IgStoryPhotoMention:"IG_STORY_PHOTO_MENTION",IgClipsShare:"IG_CLIPS_SHARE",IgSingleVideoPostShare:"IG_SINGLE_VIDEO_POST_SHARE",IgStoryVideoShare:"IG_STORY_VIDEO_SHARE",IgStoryReaction:"IG_STORY_REACTION",IgIgtvShare:"IG_IGTV_SHARE",IgShopShare:"IG_SHOP_SHARE",IgProfileShare:"IG_PROFILE_SHARE",IgStoryPhotoHighlightShare:"IG_STORY_PHOTO_HIGHLIGHT_SHARE",IgStoryVideoHighlightShare:"IG_STORY_VIDEO_HIGHLIGHT_SHARE",IgStoryVideoMention:"IG_STORY_VIDEO_MENTION",IgStoryHighlightReply:"IG_STORY_HIGHLIGHT_REPLY",IgStoryHighlightReaction:"IG_STORY_HIGHLIGHT_REACTION",IgExternalLink:"IG_EXTERNAL_LINK",IgReceiverFetch:"IG_RECEIVER_FETCH",IgTextPostAppShare:"IG_TEXT_POST_APP_SHARE",FbFeedShare:"FB_FEED_SHARE",FbStoryReply:"FB_STORY_REPLY",FbStoryShare:"FB_STORY_SHARE",FbStoryMention:"FB_STORY_MENTION",FbFeedVideoShare:"FB_FEED_VIDEO_SHARE",FbGamingCustomUpdate:"FB_GAMING_CUSTOM_UPDATE",FbProducerStoryReply:"FB_PRODUCER_STORY_REPLY",FbEvent:"FB_EVENT",FbFeedPostPrivateReply:"FB_FEED_POST_PRIVATE_REPLY",FbShort:"FB_SHORT",FbCommentMentionShare:"FB_COMMENT_MENTION_SHARE",FbPostMention:"FB_POST_MENTION",FbFeedPostReactionReply:"FB_FEED_POST_REACTION_REPLY",MsgExternalLinkShare:"MSG_EXTERNAL_LINK_SHARE",MsgP2PPayment:"MSG_P2P_PAYMENT",MsgOpgP2PPayment:"MSG_OPG_P2P_PAYMENT",MsgLocationSharingDeprecated:"MSG_LOCATION_SHARING_DEPRECATED",MsgLocationSharingV2:"MSG_LOCATION_SHARING_V2",MsgReceiverFetch:"MSG_RECEIVER_FETCH",MsgIgMediaShare:"MSG_IG_MEDIA_SHARE",MsgGenAiSearchPluginResponse:"MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE",MsgReelsList:"MSG_REELS_LIST",MsgContact:"MSG_CONTACT",MsgFile:"MSG_FILE",MsgAiContact:"MSG_AI_CONTACT",MsgMemoriesShare:"MSG_MEMORIES_SHARE",MsgEarlyAccessFbShare:"MSG_EARLY_ACCESS_FB_SHARE",MsgSharedAlbum:"MSG_SHARED_ALBUM",MsgPhoneNumber:"MSG_PHONE_NUMBER",MsgPrivateXma:"MSG_PRIVATE_XMA",MsgMusicSticker:"MSG_MUSIC_STICKER",MsgReceiverFetchFallback:"MSG_RECEIVER_FETCH_FALLBACK",MsgAiBotSearchResult:"MSG_AI_BOT_SEARCH_RESULT",MsgGenAiSubscription:"MSG_GEN_AI_SUBSCRIPTION",MsgGenAiReminder:"MSG_GEN_AI_REMINDER",MsgGenAiTask:"MSG_GEN_AI_TASK",MsgGenAi_1PSearchResult:"MSG_GEN_AI_1P_SEARCH_RESULT",MsgGenAiMemuOnboardingResponse:"MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE",MsgGenAiRichResponse:"MSG_GEN_AI_RICH_RESPONSE",RtcAudioCall:"RTC_AUDIO_CALL",RtcVideoCall:"RTC_VIDEO_CALL",RtcMissedAudioCall:"RTC_MISSED_AUDIO_CALL",RtcMissedVideoCall:"RTC_MISSED_VIDEO_CALL",RtcGroupAudioCall:"RTC_GROUP_AUDIO_CALL",RtcGroupVideoCall:"RTC_GROUP_VIDEO_CALL",RtcMissedGroupAudioCall:"RTC_MISSED_GROUP_AUDIO_CALL",RtcMissedGroupVideoCall:"RTC_MISSED_GROUP_VIDEO_CALL",RtcOngoingVideoCall:"RTC_ONGOING_VIDEO_CALL",RtcOngoingAudioCall:"RTC_ONGOING_AUDIO_CALL",LiveLocation:"LIVE_LOCATION",OcAvatarStaticSticker:"OC_AVATAR_STATIC_STICKER"}),Ne=e({XmaWebUrl:"XMA_WEB_URL",XmaOpenNative:"XMA_OPEN_NATIVE",XmaMsgExternalLinkShare:"XMA_MSG_EXTERNAL_LINK_SHARE",XmaGenAiSearchPluginResponseSources:"XMA_GEN_AI_SEARCH_PLUGIN_RESPONSE_SOURCES",XmaSharedAlbumViewer:"XMA_SHARED_ALBUM_VIEWER",XmaMetaAiSingleSubscription:"XMA_META_AI_SINGLE_SUBSCRIPTION",XmaMetaAiSubscriptions:"XMA_META_AI_SUBSCRIPTIONS",XmaMetaAiReminders:"XMA_META_AI_REMINDERS",XmaMetaAiTask:"XMA_META_AI_TASK",XmaGamePlay:"XMA_GAME_PLAY",ViewSingleAiTask:"VIEW_SINGLE_AI_TASK",ViewAllAiTasks:"VIEW_ALL_AI_TASKS",XmaMetaAiLocation:"XMA_META_AI_LOCATION",XmaMetaAiLookupEntity:"XMA_META_AI_LOOKUP_ENTITY",XmaP2POpgTransfer:"XMA_P2P_OPG_TRANSFER",MarketplaceXmaCallFunction:"MARKETPLACE_XMA_CALL_FUNCTION",XmaMetaAiDigestSeeSummary:"XMA_META_AI_DIGEST_SEE_SUMMARY",XmaMusicArtist:"XMA_MUSIC_ARTIST",MarketplaceXmatCallFunction:"MARKETPLACE_XMAT_CALL_FUNCTION"}),Me=e({Album:"ALBUM",Clips:"CLIPS",Video:"VIDEO"}),we=e({None:"NONE",VodVideo:"VOD_VIDEO",LiveVideo:"LIVE_VIDEO",ShortsVideo:"SHORTS_VIDEO"}),Ae=e({Default:"DEFAULT",ThreadsIcon:"THREADS_ICON",FacebookIcon:"FACEBOOK_ICON",ExternalLinkIcon:"EXTERNAL_LINK_ICON",MessengerIcon:"MESSENGER_ICON",InstagramIcon:"INSTAGRAM_ICON",OculusIcon:"OCULUS_ICON",MetaAiIcon:"META_AI_ICON",MetaHorizonIcon:"META_HORIZON_ICON"}),Fe=e({Default:"DEFAULT"}),Oe=e({AttachmentPreviewMedia:"ATTACHMENT_PREVIEW_MEDIA",AttachmentPreviewHeaderMedia:"ATTACHMENT_PREVIEW_HEADER_MEDIA"}),Be=e({None:"NONE",Collage:"COLLAGE",Photo:"PHOTO",Video:"VIDEO",MultiPhoto:"MULTI_PHOTO",MessengerIcon:"MESSENGER_ICON",InstagramIcon:"INSTAGRAM_ICON",ReelsIcon:"REELS_ICON",Live:"LIVE",YoutubeVideo:"YOUTUBE_VIDEO",YoutubeShorts:"YOUTUBE_SHORTS",Blur:"BLUR",Pill:"PILL"}),We=e({Default:"DEFAULT",P2PPreviewImageWithTextOverlay:"P2P_PREVIEW_IMAGE_WITH_TEXT_OVERLAY",Playable:"PLAYABLE",AutoPlayable:"AUTO_PLAYABLE",BlurredImage:"BLURRED_IMAGE",BlurredPlayable:"BLURRED_PLAYABLE",InformTreatmentWithLabel:"INFORM_TREATMENT_WITH_LABEL",InformTreatmentWithWarningScreen:"INFORM_TREATMENT_WITH_WARNING_SCREEN",YoutubePlayer:"YOUTUBE_PLAYER",ImageWithPlayButton:"IMAGE_WITH_PLAY_BUTTON",Placeholder:"PLACEHOLDER",AutoPlayableWithAspectRatio:"AUTO_PLAYABLE_WITH_ASPECT_RATIO"}),qe=e({Default:"DEFAULT",Rounded:"ROUNDED",BlurredCircle:"BLURRED_CIRCLE",TemplateAsset:"TEMPLATE_ASSET",DefaultWithGradient:"DEFAULT_WITH_GRADIENT"}),Ue=e({MediaLabel:"MEDIA_LABEL",Misinformation:"MISINFORMATION",PostCover:"POST_COVER",PostLabel:"POST_LABEL",Private:"PRIVATE",Sensitive:"SENSITIVE",WarningScreens:"WARNING_SCREENS"}),Ve=e({None:"NONE",YoutubeVideo:"YOUTUBE_VIDEO",YoutubeShorts:"YOUTUBE_SHORTS"}),He=e({None:"NONE",Fb:"FB",FbAlwaysWhite:"FB_ALWAYS_WHITE",DotsThreeHorizontal:"DOTS_THREE_HORIZONTAL",ChevronDown:"CHEVRON_DOWN",FbInfoSmall:"FB_INFO_SMALL"}),Ge=e({Simple:"SIMPLE",Retro:"RETRO",Messages:"MESSAGES"}),ze=e({Missed:"MISSED",Ended:"ENDED",Started:"STARTED"}),je=e({Video:"VIDEO",Audio:"AUDIO"}),Ke=e({Weekly:"WEEKLY",Daily:"DAILY"}),Qe=e({Paypal:"PAYPAL",Venmo:"VENMO"}),Xe=e({Payment:"PAYMENT",Request:"REQUEST"}),Ye=e({Default:"DEFAULT",Overlay:"OVERLAY"}),Je=e({Started:"STARTED",Ended:"ENDED",Active:"ACTIVE",Expired:"EXPIRED"}),Ze=e({Keyword:"KEYWORD",Method:"METHOD",Str:"STR",Number:"NUMBER",Comment:"COMMENT",Default:"DEFAULT"}),et=e({Unknown:"UNKNOWN",Product:"PRODUCT",Faq:"FAQ",Chat:"CHAT",Post:"POST",Other:"OTHER"}),tt=e({Square:"SQUARE",Circle:"CIRCLE"}),nt=e({Chevron:"CHEVRON"}),rt=e({OnTime:"ON_TIME",Delayed:"DELAYED",Cancelled:"CANCELLED",Arrived:"ARRIVED",Departed:"DEPARTED",Unknown:"UNKNOWN"});i.MpsQueryCaller=l,i.MpsMessageRangeQueryDirection=s,i.MpsBackupOperation=u,i.MpsBackupContentType=c,i.MpsMessageTag=d,i.MpsUploadType=m,i.MpsMessageBackupSource=p,i.MpsServerMessageUploadStatus=_,i.MpsServerAttachmentUploadStatus=f,i.MebSplitDatabaseExecutionType=g,i.AiBotEmbodimentTrigger=h,i.XmsgGenAiMessageType=y,i.GenAiUnifiedResponseSectionType=C,i.GenAiAddonActionType=b,i.GenAiAddonActionAlignment=v,i.GenAiMultipleResponseLayoutType=S,i.GenAiCodeBlockType=R,i.GenAiImageAssetQueryStatus=L,i.GenAiPostOrientation=E,i.GenAiCompactEntityType=k,i.GenAiCompactEntityActionType=I,i.GenAiMapQueryStatus=T,i.GenAiOrchestratorSearchEngine=D,i.GenAiSearchPlannerStepStatus=x,i.GenAiMediaShape=$,i.GenAiPostType=P,i.GenAiMediaHorizontalAlignment=N,i.GenAiMediaVerticalAlignment=M,i.GenAiFooterActionType=w,i.GenAiDividerType=A,i.GenAiSourcedItemType=F,i.GenAiThreadSurfingEntityType=O,i.GenAiThreadSurfingActionType=B,i.XmsgStreamStatusType=W,i.XmsgPowerUpStyle=q,i.XmsgGenAiBotSubscriptionProductType=U,i.XmsgGenAiBotResponseProductType=V,i.XmsgaiBotResponseImagineSource=H,i.XmsgMemoriesTemplateType=G,i.XmsgaiProduct=z,i.XmsgContentBrandingOption=j,i.XmsgaiInvocationOptions=K,i.XmsgXmaBizAiUnifiedResponseSourceAttributionType=Q,i.XmsgSuggestedModerationActionType=X,i.XmsgHighlightsTabMoment=Y,i.XmsgHighlightsTabReplySourceType=J,i.XmsgMustacheCtaType=Z,i.XmsgInlineEntityType=ee,i.XmsgNoteMessageType=te,i.XmsgNoteModelType=ne,i.XmsgaiLookupEntityType=re,i.XmsgaiLookupActionType=oe,i.XmsgTranscriptionStatus=ae,i.XmsgImageGlyphType=ie,i.XmsgOculusMediaType=le,i.XmsgMessageRequestStatus=se,i.ClientInstructionType=ue,i.XmsgSpectraActionType=ce,i.XmsgSpectraActionSource=de,i.XmsgSpectraTakeDownActionType=me,i.XmsgMarketplaceSmartRepliesTriggerType=pe,i.XmsgMarketplaceLightweightReplyType=_e,i.XmsgMessageSendProductType=fe,i.XmsgStoryReplyType=ge,i.GenAiContextInjectionType=he,i.GenAiPromptType=ye,i.XmsgFeatureTags=Ce,i.XmsgMessageStreamingProductType=be,i.Xmsge2EeGenAiEncryptedImageProductType=ve,i.Xmsge2EeGenAiEncryptedVideoProductType=Se,i.XmsgMsgrXmaActionType=Re,i.XmsgMsgrReceiverFetchContentType=Le,i.XmsgMsgrReceiverFetchXmaLayoutType=Ee,i.XmsgReportedMessageType=ke,i.XmsgStoryOverlayPollStyle=Ie,i.XmsgStoryOverlayTagType=Te,i.XmsgReactionStyle=De,i.XmsgXmaLayoutType=xe,i.XmsgXmaVStackLayoutHeaderAlignmentType=$e,i.XmsgXmaContentType=Pe,i.XmsgctaType=Ne,i.XmsgXmaContentAttributionIcon=Me,i.XmsgXmaOverlayContentType=we,i.XmsgXmaSubtitleDecorationType=Ae,i.XmsgXmaVerifiedType=Fe,i.XmsgMediaDispatchKey=Oe,i.XmsgXmaImageDecorationType=Be,i.XmsgXmaCustomPreviewType=We,i.XmsgXmaMessagingAttachmentFaviconStyle=qe,i.XmsgXmaGatingType=Ue,i.XmsgXmaYoutubePreviewMediaType=Ve,i.XmsgXmaCtaIconType=He,i.XmsgMemoriesE2EeSendTemplateType=Ge,i.XmsgXmaRtcCallState=ze,i.XmsgXmaRtcCallType=je,i.XmsgXmaSubscriptionRecurrenceType=Ke,i.XmsgXmaOpgP2pPaymentMethodType=Qe,i.XmsgXmaOpgP2pTransactionType=Xe,i.XmsgXmaStandardGenericBodyLayoutType=Ye,i.XmsgXmaLiveLocationSessionState=Je,i.XmsgXmaCodeBlockType=Ze,i.XmsgXmaBizAiUnifiedResponseAttributionType=et,i.XmsgXmaCompactGenericTemplatePreviewStyle=tt,i.XmsgXmaCompactGenericTemplateAccessoryType=nt,i.XmsgXmaFlightStatusEnum=rt}),66);
__d("WAStanzaUtils",[],(function(t,n,r,o,a,i){"use strict";var e=/^[0-9A-Za-z-]{1,32}$/;function l(e){return e}function s(t){return e.test(t)?t:null}i.toStanzaId=l,i.validateCallId=s}),66);
__d("MpsTypes",["$InternalEnum","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return e}function u(e){return e}function c(e){return o("WAStanzaUtils").toStanzaId(e)}function d(e){return e}function m(e){return e}var p=n("$InternalEnum").Mirrored(["Send","Receive"]),_=n("$InternalEnum").Mirrored(["InProgress","Completed"]),f=n("$InternalEnum")({Unknown:0,Noop:1,UpsertTopLevel:2,UpsertSupplemental:3,DeleteTopLevel:4,DeleteTopLevelWithPlaceholder:5,Preprocess:6,DeleteSupplemental:7,DeleteThread:8});l.toBytes=e,l.toTimestamp=s,l.toMessageId=u,l.messageIdToStanzaId=c,l.toThreadId=d,l.toSupplementalKey=m,l.InsertionSource=p,l.MawDBMigrationState=_,l.ActionType=f}),98);
__d("WAFrankingTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}i.castToFrankingTag=e,i.castToFrankingKey=l,i.castToReportingTag=s}),66);
__d("EBMinosProcessMessages",["Base64Utils","EBMinosLogger","EBMinosMessageEncryptionVersion","EBMinosMessageMetadataVersion","EBMinosTypes","MSGDataclassTypes.flow","MpsTypes","WAFrankingTypes","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C;function b(t){var n=t!=null?t:{},r=n.actor_token,a=n.encrypted_protobuf,i=n.franking_tag,l=n.mek_fbid,c=n.mek_id,d=n.message_encryption_version,m=n.message_metadata_version,p=n.protobuf_timestamp,_=n.reporting_tag,f=n.transport_sender_message_signature,g=n.transport_sender_signing_pk;if(d==null&&o("EBMinosLogger").minosLogger.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["missing message_encryption_version on restore"]))),r==null||a==null||d==null||m==null||l==null||c==null||p==null||f==null||g==null)return o("WAResultOrError").makeError("top-level-missing-fields");var h=o("EBMinosMessageEncryptionVersion").MinosMessageEncryptionVersion.cast(d);if(h==null)return o("EBMinosLogger").minosLogger.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast message encryption version: ",""])),d),o("WAResultOrError").makeError("invalid-message-encryption-version");var y=o("EBMinosMessageMetadataVersion").MinosMessageMetadataVersion.cast(m);return y==null?(o("EBMinosLogger").minosLogger.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast message metadata version: ",""])),m),o("WAResultOrError").makeError("invalid-message-metadata-version")):o("WAResultOrError").makeResult({actorToken:o("EBMinosTypes").unsafeCastToUserFbId(r),encryptedProtobuf:o("EBMinosTypes").unsafeCastToEncryptedMessage(o("Base64Utils").toArrayBuffer(a)),frankingTag:i!=null?o("WAFrankingTypes").castToFrankingTag(new Uint8Array(o("Base64Utils").toArrayBuffer(i))):null,mekFbid:o("EBMinosTypes").unsafeCastToMekFbId(l),mekId:o("EBMinosTypes").unsafeCastToMekId(o("Base64Utils").toArrayBuffer(c)),messageEncryptionVersion:h,messageMetadataVersion:y,protobufTimestamp:o("MpsTypes").toTimestamp(parseInt(p,10)),reportingTag:_!=null?o("WAFrankingTypes").castToReportingTag(new Uint8Array(o("Base64Utils").toArrayBuffer(_))):null,transportSenderMessageSignature:o("EBMinosTypes").unsafeCastToEncryptedMessageSignature(o("Base64Utils").toArrayBuffer(f)),transportSenderSigningPk:o("EBMinosTypes").unsafeCastToTransportSigningPK(o("Base64Utils").toArrayBuffer(g))})}function v(e){switch(e){case"PHOTO":return o("MSGDataclassTypes.flow").MpsMessageTag.Photo;case"PERMANENT":return o("MSGDataclassTypes.flow").MpsMessageTag.Permanent;case"EPHEMERAL":return o("MSGDataclassTypes.flow").MpsMessageTag.Ephemeral;case"VIDEO":return o("MSGDataclassTypes.flow").MpsMessageTag.Video;case"GIF":return o("MSGDataclassTypes.flow").MpsMessageTag.Gif;case"AUDIO":return o("MSGDataclassTypes.flow").MpsMessageTag.Audio;case"FILE":return o("MSGDataclassTypes.flow").MpsMessageTag.File;case"RAVEN":return o("MSGDataclassTypes.flow").MpsMessageTag.Raven;case"UNREAD_RAVEN":return o("MSGDataclassTypes.flow").MpsMessageTag.UnreadRaven;case"SHARE_IG_MEDIA":return o("MSGDataclassTypes.flow").MpsMessageTag.ShareIgMedia;case"SHARE_LINK":return o("MSGDataclassTypes.flow").MpsMessageTag.ShareLink;case"SHARE_IG_CLIPS":return o("MSGDataclassTypes.flow").MpsMessageTag.ShareIgClips;case"SHH":return o("MSGDataclassTypes.flow").MpsMessageTag.Shh;case"STORY_REPLY":return o("MSGDataclassTypes.flow").MpsMessageTag.StoryReply;case"DISAPPEARING_MESSAGE":return o("MSGDataclassTypes.flow").MpsMessageTag.DisappearingMessage;case"RAVEN_SEEN":return o("MSGDataclassTypes.flow").MpsMessageTag.RavenSeen;case"RAVEN_REPLAYED":return o("MSGDataclassTypes.flow").MpsMessageTag.RavenReplayed;case"RAVEN_READ_ONCE":return o("MSGDataclassTypes.flow").MpsMessageTag.RavenReadOnce;case"RAVEN_REPLAYABLE":return o("MSGDataclassTypes.flow").MpsMessageTag.RavenReplayable;case"RAVEN_PERMANENT":return o("MSGDataclassTypes.flow").MpsMessageTag.RavenPermanent;case"ACTION_LOG":return o("MSGDataclassTypes.flow").MpsMessageTag.ActionLog;default:return null}}function S(e){if(e==null)return[];var t=[];for(var n of e){var r=v(n);r==null?o("EBMinosLogger").minosLogger.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["processMinosMessages: protobuf_stanzas is null"]))):t.push(r)}return t}function R(e){var t=e!=null?e:{},n=t.actor_token,r=t.encrypted_protobuf,a=t.franking_tag,i=t.mek_fbid,l=t.mek_id,s=t.message_encryption_version,u=t.message_metadata_version,c=t.protobuf_timestamp,_=t.reporting_tag,f=t.supplemental_key,g=t.supplemental_otid,h=t.transport_sender_message_signature,y=t.transport_sender_signing_pk;if(s==null&&o("EBMinosLogger").minosLogger.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["missing message_encryption_version on restore"]))),n==null||r==null||s==null||u==null||i==null||l==null||c==null||h==null||y==null||f==null||g==null)return null;var C=o("EBMinosMessageEncryptionVersion").MinosMessageEncryptionVersion.cast(s);if(C==null)return o("EBMinosLogger").minosLogger.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast message encryption version: ",""])),s),null;var b=o("EBMinosMessageMetadataVersion").MinosMessageMetadataVersion.cast(u);return b==null?(o("EBMinosLogger").minosLogger.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast message metadata version: ",""])),u),null):{actorToken:o("EBMinosTypes").unsafeCastToUserFbId(n),encryptedProtobuf:o("EBMinosTypes").unsafeCastToEncryptedMessage(o("Base64Utils").toArrayBuffer(r)),frankingTag:a!=null?o("WAFrankingTypes").castToFrankingTag(new Uint8Array(o("Base64Utils").toArrayBuffer(a))):null,mekFbid:o("EBMinosTypes").unsafeCastToMekFbId(i),mekId:o("EBMinosTypes").unsafeCastToMekId(o("Base64Utils").toArrayBuffer(l)),messageEncryptionVersion:C,messageMetadataVersion:b,protobufTimestamp:o("MpsTypes").toTimestamp(parseInt(c,10)),reportingTag:_!=null?o("WAFrankingTypes").castToReportingTag(new Uint8Array(o("Base64Utils").toArrayBuffer(_))):null,supplementalKey:o("MpsTypes").toSupplementalKey(f),supplementalOtid:o("MpsTypes").toMessageId(g),transportSenderMessageSignature:o("EBMinosTypes").unsafeCastToEncryptedMessageSignature(o("Base64Utils").toArrayBuffer(h)),transportSenderSigningPk:o("EBMinosTypes").unsafeCastToTransportSigningPK(o("Base64Utils").toArrayBuffer(y))}}function L(e){return e==null?[]:e.map(function(e){var t=e.echo_document,n=e.otid,r=e.protobuf_stanzas;if(n==null)return o("EBMinosLogger").minosLogger.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["processMinosMessages: otid is null"]))),null;if(r==null)return t==null&&o("EBMinosLogger").minosLogger.ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["processMinosMessages: protobuf_stanzas and echo_documents are null"]))),null;var a=r.message_tags,i=r.supplemental_protobufs_v2,l=i===void 0?[]:i,s=r.top_level_protobuf_v2;if(s==null)return null;var u=b(s);if(!u.success)return o("EBMinosLogger").minosLogger.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["processMinosMessages: top_level_protobuf_v2 conversion failed"]))),null;var c=l.map(function(e){var t=e==null?void 0:e.supplemental_key,n=R(e);if(t==null){o("EBMinosLogger").minosLogger.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["processMinosMessages: minos supplementalKey is null"])));return}if(n==null){o("EBMinosLogger").minosLogger.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["processMinosMessages: minosSupplementalProtobuf is null"])));return}return n}).filter(Boolean),d=o("MpsTypes").toMessageId(n);return{messageTags:S(a),otid:d,supplementalProtobufsV2:c,topLevelProtobufV2:u.value}}).filter(Boolean)}function E(e,t,n){return t===o("EBMinosMessageMetadataVersion").MinosMessageMetadataVersion.V1?e:isNaN(n)?(o("EBMinosLogger").minosLogger.ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["createMessageTimestamp: otid is not a number"]))),o("MpsTypes").toTimestamp(0)):k(n)}function k(e){return o("MpsTypes").toTimestamp(Number(BigInt(e)>>BigInt(22)))}l.convertArrayToMpsMessageTags=S,l.processMinosMessages=L,l.createMessageTimestamp=E,l.extractTimestampFromOtid=k}),98);
__d("EBMinosInterfaceTypes",["EBMinosProcessMessages","EBMinosTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;l.unsafeCastToBase64StringIntToEpochNumber=(e=o("EBMinosTypes")).unsafeCastToBase64StringIntToEpochNumber,l.unsafeCastToEpochHead=e.unsafeCastToEpochHead,l.unsafeCastToEpochSelfSig=e.unsafeCastToEpochSelfSig,l.unsafeCastToMailboxAuthPK=e.unsafeCastToMailboxAuthPK,l.unsafeCastToMailboxEncryptionPK=e.unsafeCastToMailboxEncryptionPK,l.processMinosMessages=o("EBMinosProcessMessages").processMinosMessages,l.unsafeCastToMailboxSigningPK=e.unsafeCastToMailboxSigningPK,l.convertArrayToMpsMessageTags=o("EBMinosProcessMessages").convertArrayToMpsMessageTags,l.unsafeCastToUserFbId=e.unsafeCastToUserFbId,l.unsafeCastToMailboxFbId=e.unsafeCastToMailboxFbId,l.unsafeCastToEpochCreationTime=e.unsafeCastToEpochCreationTime,l.unsafeCastToDecryptedMessage=e.unsafeCastToDecryptedMessage}),98);
__d("EBMinosQplFlow",["QPLUserFlow","Random","gkx","justknobx","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.threadId;return u({annotations:{string:{threadId:t}},event:r("qpl")._(521473369,"2834")})}function s(e){var t=e.threadId;return u({annotations:{string:{threadId:t}},event:r("qpl")._(521485893,"2835")})}function u(e){var t=e.annotations,n=e.event,a=o("Random").uint32();return r("QPLUserFlow").start(n,{annotations:babelHelpers.extends({},t,{bool:babelHelpers.extends({},t==null?void 0:t.bool,{minos_mvp_enabled:r("qex")._("208")===!0,occam_only_mailbox_users:r("gkx")("16674"),use_minos_thread_id:!0}),int:babelHelpers.extends({},t==null?void 0:t.int,{instanceKey:a,retryCount:0})}),instanceKey:a,timeoutInMs:r("justknobx")._("1405")}),p(n,a)}function c(){return u({event:r("qpl")._(521473150,"2143")})}function d(e){var t=e.entryPoint;return u({annotations:{string:{entryPoint:t}},event:r("qpl")._(521482880,"16")})}function m(){return u({event:r("qpl")._(521479165,"3055")})}function p(e,t){return{addAnnotations:function(o){r("QPLUserFlow").addAnnotations(e,o,{instanceKey:t})},addPoint:function(o,a){a&&r("QPLUserFlow").addAnnotations(e,a,{instanceKey:t}),r("QPLUserFlow").addPoint(e,o,{instanceKey:t})},endFailWithError:function(o,a,i){var n=babelHelpers.extends({},i,{string:babelHelpers.extends({},i==null?void 0:i.string,{failReason:a})});r("QPLUserFlow").endFailure(e,o,{annotations:n,instanceKey:t})},endSuccess:function(o){r("QPLUserFlow").endSuccess(e,{annotations:o,instanceKey:t})},getInstanceKey:function(){return t}}}l.startMinosMessageEnqueueQpl=e,l.startMinosMessageUploadQpl=s,l.startMinosWritePublicKeysQpl=c,l.startMinosVerifySingleEpochQpl=d,l.startMinosCreateEpochParamsQpl=m}),98);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAppendDataTraceAddon"),a.dataTraceId,a.checkPointId,a.syncChannel,a.errorMessage,a.tags);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSBase64Decode",["Base64Utils","CryptoLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","="),n=4-t.length%4;if(n<4)for(var r=0;r<n;r++)t+="=";return t}function s(t){var n=o("CryptoLogger").CryptoLogger("base64decode");try{return t!=null?o("Base64Utils").toArrayBuffer(e(t)):void 0}catch(e){var a=r("getErrorSafe")(e);if(a.message==null)return;n.catching(a).mustfix(a.message)}}l.decode=s}),98);
__d("LSBase64Decode.nop",["LSBase64Decode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(o("LSBase64Decode").decode(a)))};e.__nop_name__="LSBase64Decode",l.default=e}),98);
__d("LSIsMobileClient",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return r[0]=!1,t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLogMEBUploadSuccessEvent.nop",["Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EncryptedBackupUploadFailureFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),u=r("requireDeferred")("EncryptedBackupUploadSuccessFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),c=function(r,o,a,i,l){if(a!=null){var t=l?u.load():s.load();t.then(function(e){return e.log(function(){return{message_id:a,trace_id:i}})})}return(e||(e=n("Promise"))).resolve()};c.__nop_name__="LSLogMEBUploadSuccessEvent",l.default=c}),98);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMEBUploadSuccessEvent.nop","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return e[3]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_sproc_start"):t.resolve()},function(r){return e[3]!==void 0&&e[4]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_error_message",e[4]):t.resolve()},function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),t.i64.neq(void 0,void 0)?(r[9]=["deleteBackupOnClient reason: "," ",t.i64.to_string(void 0)].join(""),(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[r[9]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(e){return r[1]="Beginning deleteBackupOnClient stored procedure",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[1]].join("")),r[2]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[1]].join(""),r[2],t.i64.cast([0,4]))},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(168).fetch([[[e[0]]]]),function(e){return e.delete()}):t.forEach(t.db.table(168).fetch(),function(e){return e.delete()})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(169).fetch([[[e[0]]],"fk_secure_encrypted_backups_client_state"]),function(e){return e.delete()}):t.forEach(t.db.table(169).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(174).fetch(),function(e){return e.delete()})},function(n){return e[1]==="fetch_virtual_device"?t.db.table(178).put({pk:t.i64.cast([0,1]),recoveryCodeStatus:t.i64.cast([0,4])}):t.resolve()},function(o){return e[2]?t.sequence([function(e){return r[9]="Clearing state management backups tables",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[9]].join(""),r[10],t.i64.cast([0,4]))},function(e){return t.forEach(t.db.table(172).fetch([[[t.i64.cast([0,1])]]]),function(e){var t=e.update,n=e.item;return t({backupId:void 0})})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.filter(t.db.table(184).fetch(),function(n){return t.i64.eq(n.backupId,e[0])}),function(e){return e.delete()}):t.forEach(t.db.table(184).fetch(),function(e){return e.delete()})},function(n){return t.i64.neq(e[0],void 0)?t.forEach(t.db.table(196).fetch([[[e[0]]]]),function(e){return e.delete()}):t.forEach(t.db.table(196).fetch(),function(e){return e.delete()})}]):t.resolve()},function(e){return t.sequence([function(e){return t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}])},function(e){return t.forEach(t.db.table(177).fetch(),function(e){var r=e.item;return t.sequence([function(e){return t.forEach(t.db.table(2).fetch([[[r.pendingBackupTaskId]]]),function(e){return e.delete()})},function(e){return t.i64.eq(r.contentType,t.i64.cast([0,1]))?t.nativeOperation(n("LSLogMEBUploadSuccessEvent.nop"),r.uniqueKey,r.lsTraceId,!0):t.resolve()}])})},function(e){return t.count(t.db.table(177).fetch()).then(function(e){return r[9]=e})},function(e){return t.i64.eq(r[9],t.i64.cast([0,0]))?t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}]):t.sequence([function(e){return t.resolve()},function(e){return t.storedProcedure(n("LSIsMobileClient")).then(function(e){var t;return t=e,r[10]=t[0],t})},function(e){return r[10]?r[11]=!0:r[11]=!1,r[11]?((function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),r[13]="LSDataTraceMciTraceLog native op not supported",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][MEBTraceUtils] ","",r[13]].join("")),r[12]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"MEBTraceUtils",r[13],r[12],t.i64.cast([0,3]))):t.resolve()}])}])},function(o){return e[2]?(r[9]="Clearing data flow backups tables",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][deleteBackupOnClient] ","",r[9]].join("")),r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[r[9]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(o){return e[5]?t.resolve(0):e[4]!==void 0?((function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",e[4]].join("")),r[9]=t.createArray(),e[3]!==void 0&&(r[10]=(r[9].push(e[3]),r[9])),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",e[4],r[9],t.i64.cast([0,3]))):t.resolve()},function(e){return r[3]=t.i64.of_float(Date.now()),r[4]=t.i64.random(),r[6]="Finishing execution. Execution time: ",r[7]=t.i64.to_string(t.i64.sub(r[3],r[0])),r[8]=" ms",r[5]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",r[5],r[6],r[5],r[7],r[5],r[8]].join("")),t.i64.eq(t.i64.mod_(r[4],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[9]=",",r[10]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[r[6],r[9],r[7],r[9],r[8]].join(""),r[10],t.i64.cast([0,4]))):t.resolve()},function(r){return e[3]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021646192]),e[3],"dasm_delete_backup_on_client_sproc_end"):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_generated_recovery_code","secure_encrypted_backups_recovery_code_status","encrypted_backups","encrypted_backups_virtual_devices","encrypted_backups_metadata","pending_backups_context_v2","pending_tasks"],a.exports=e}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.count(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]})).then(function(e){return r[0]=e})},function(o){return t.i64.gt(r[0],t.i64.cast([0,0]))&&e[3]===!0?t.resolve(0):t.sequence([function(n){return t.forEach(t.filter(t.db.table(310).fetch(),function(t){return t.projectName===e[1]}),function(e){return e.delete()})},function(o){return t.i64.gt(e[2],t.i64.cast([0,0]))?(r[3]=t.i64.of_float(Date.now()),r[1]=t.i64.add(r[3],e[2])):r[1]=t.i64.cast([0,0]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",e[1]].join(""),t.i64.cast([0,362]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[1],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(310).add({taskId:r[2],projectName:e[1],maxClientTokenPoolSize:e[0]})}])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure",e.__tables__=["acs_request_context"],a.exports=e}),null);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(233).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({success:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure",e.__tables__=["mailbox_task_completion_api_tasks"],a.exports=e}),null);
__d("LSQplMarkEnd.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return u?r("QPLUserFlow").endSuccess(t,{instanceKey:c}):r("QPLUserFlow").endFailure(t,"failure",{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkEnd",l.default=s}),98);
__d("LSRemoveBlindedTokens",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(308).fetch(),function(t){return t.configId===e[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure",e.__tables__=["secure_acs_blinded_tokens"],a.exports=e}),null);
__d("LSXmaContentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEST:-1,NONE:0,IG_SINGLE_IMAGE_POST_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,IG_MULTI_MEDIA_RESPONSE:1020,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,FB_COMMENT_MENTION_SHARE:2010,FB_STORY_LWI_REPLY:2011,FB_COMMENT_SHARE:2012,FB_POST_MENTION:2013,FB_PROFILE_DIRECTORY_ITEM:2014,FB_FEED_POST_REACTION_REPLY:2015,FB_QUICKSNAP_REPLY:2016,FB_SPARK_ICEBREAKER:2017,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING:3002,MSG_LOCATION_SHARING_V2:3003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:3004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:3005,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_THREADS_POST_SHARE:3011,MSG_FILE:3012,MSG_AVATAR_DETAILS:3013,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_SHARED_ALBUM_REPLY:3016,MSG_SHARED_ALBUM:3017,MSG_OCCAMADILLO_XMA:3018,MSG_GEN_AI_1P_SEARCH_RESULT:3019,MSG_EARLY_ACCESS_FB_SHARE:3020,MSG_GEN_AI_SUBSCRIPTION:3021,MSG_GEN_AI_REMINDER:3022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:3023,MSG_MAGICAL_MESSENGER_PLACES:3024,MSG_RECEIVER_FETCH_FALLBACK:3025,MSG_MAGICAL_MESSENGER_TASKS:3026,MSG_NOTE_REPLY:3027,MSG_NOTE_MENTION:3028,MSG_PROMPT_REPLY:3029,MSG_GEN_AI_TASK:3030,MSG_GEN_AI_RICH_RESPONSE:3040,MSG_RECEIVER_FETCH_ENT_DELETED:3041,MSG_GEN_AI_APP_DOWNLOAD_LINK:3042,MSG_GEN_AI_ENTITY:3043,MSG_OPG_P2P_PAYMENT:3044,MSG_MARKETPLACE:3045,MSG_MUSIC_STICKER:3046,MSG_META_AI_DIGEST:3047,MSG_PHONE_NUMBER:3048,MSG_GEN_AI_CONCORD_FEED_POST:3049,MSG_META_AI_MEDIA_SHARE:3050,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,RTC_ONGOING_AUDIO_CALL:4008,RTC_ONGOING_VIDEO_CALL:4009,DATACLASS_SENDER_COPY:5e3,OC_AVATAR_STATIC_STICKER:6e3,LIVE_LOCATION:7e3});i.default=e}),66);
__d("MAWChatJid",["FBLogger","I64","MAWJids","MAWMiActMappingTableAPI","ReQL","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){try{return o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,o("MAWJids").convertChatJidToIntJid(t)).then(function(e){return e==null?void 0:e.serverThreadKey})}catch(e){var n=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(n).warn("Invalid chatJid: "+t),Promise.reject(n)}}function u(e,t,n){return s(e,t).then(function(e){if(e!=null)return e;throw r("FBLogger")("messenger_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",n)})}async function c(e,t){var n=await s(e,t);if(n!=null)return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(n))}function d(t,n){try{return o("MAWMiActMappingTableAPI").getMappingRowForIntJid(t,n).then(function(e){return e==null?void 0:e.serverThreadKey})}catch(t){var a=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").catching(a).warn("Invalid integer jid: "+(e||(e=o("I64"))).to_string(n)),Promise.reject(a)}}l.toThreadKeyMaybe=s,l.toThreadKey=u,l.toThreadMaybe=c,l.toThreadKeyMaybeForChatJidInteger=d}),98);
__d("MAWCryptoConsts",[],(function(t,n,r,o,a,i){"use strict";var e=3600,l=24*e,s=32,u=new Uint8Array(0).buffer,c=128,d=256,m=12,p=1,_=2,f=2,g=4,h=l*30*6,y=3,C="AES-GCM",b="HKDF",v="SHA-256";i.HKDF_SEED_LENGTH_IN_BYTES=s,i.HKDF_INFO=u,i.AES_GCM_TAG_LENGTH=c,i.AES_GCM_KEY_LENGTH=d,i.AES_GCM_IV_LENGTH_IN_BYTES=m,i.VERSION=p,i.CIPHER_ID=_,i.ADDITIONAL_DATA_LENGTH_IN_BYTES=f,i.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES=g,i.ENC_KEY_TTL=h,i.MAX_KEYCHAIN_SETUP_RETRIES=y,i.AES_GCM=C,i.HKDF=b,i.SHA256=v}),66);
__d("MAWDbChatId__UNSAFE_DO_NOT_USE",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).of_float(t)}function u(e,t){return e+"_"+t}l.convertToChatId64__DEPRECATED=s,l.craftAltIndex__DEPRECATED=u}),98);
__d("WAMsgType",[],(function(t,n,r,o,a,i){"use strict";var e="Text",l="Futureproof",s="Ciphertext",u="Unavailable",c="Image",d="Video",m="Ptt",p="Admin",_="Revoked",f="Gif",g="Sticker",h="DocumentFile",y="ExpiredEphemeral",C="EphemeralSettingAdmin",b="EphemeralSyncResponse",v="DeleteForMe",S="EphemeralSettingChangeFromCurrentDevice",R="AlertICDC",L="GroupInvite",E="NoteReply",k="Reaction",I="SenderKeyDistribution",T="EditAction",D="ReceiverFetch",x="Raven",$="GroupPollCreate",P="GroupPollUpdate",N={ADMIN:p,CIPHERTEXT:s,DELETE_FOR_ME:v,DOCUMENT_FILE:h,EDIT_ACTION:T,EPHEMERAL_SETTING_ADMIN:C,EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:S,EPHEMERAL_SYNC_RESPONSE:b,EXPIRED_EPHEMERAL:y,FUTUREPROOF:l,GIF:f,GROUP_INVITE:L,ICDC_ALERT:R,IMAGE:c,PTT:m,REACTION:k,REVOKED:_,SK_DISTRIBUTION:I,STICKER:g,TEXT:e,UNAVAILABLE:u,VIDEO:d,RECEIVER_FETCH:D,RAVEN:x,GROUP_POLL_CREATE:$,GROUP_POLL_UPDATE:P,NOTE_REPLY:E};i.TEXT=e,i.FUTUREPROOF=l,i.CIPHERTEXT=s,i.UNAVAILABLE=u,i.IMAGE=c,i.VIDEO=d,i.PTT=m,i.ADMIN=p,i.REVOKED=_,i.GIF=f,i.STICKER=g,i.DOCUMENT_FILE=h,i.EXPIRED_EPHEMERAL=y,i.EPHEMERAL_SETTING_ADMIN=C,i.EPHEMERAL_SYNC_RESPONSE=b,i.DELETE_FOR_ME=v,i.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE=S,i.ICDC_ALERT=R,i.GROUP_INVITE=L,i.NOTE_REPLY=E,i.REACTION=k,i.SK_DISTRIBUTION=I,i.EDIT_ACTION=T,i.RECEIVER_FETCH=D,i.RAVEN=x,i.GROUP_POLL_CREATE=$,i.GROUP_POLL_UPDATE=P,i.MSG_TYPE=N}),66);
__d("MAWMsgType",["WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return g.has(t)},s=function(t){return h.has(t)||g.has(t)},u=function(t){return s(t)||y.has(t)},c="EphemeralScreenshotAction",d="Raven",m="RavenAction",p="XMA",_="BumpExistingMessage",f=babelHelpers.extends({},o("WAMsgType").MSG_TYPE,{BUMP_EXISTING_MESSAGE:_,EPHEMERAL_SCREENSHOT_ACTION:c,RAVEN:d,RAVEN_ACTION:m,XMA:p}),g=new Set([f.IMAGE,f.VIDEO,f.PTT,f.GIF,f.STICKER,f.XMA,f.RAVEN,f.DOCUMENT_FILE,f.RECEIVER_FETCH]),h=new Set([f.TEXT,f.REVOKED,f.XMA,f.BUMP_EXISTING_MESSAGE,f.GROUP_POLL_CREATE]),y=new Set([f.FUTUREPROOF]),C=new Set([f.TEXT,f.IMAGE,f.VIDEO,f.PTT,f.GIF,f.STICKER,f.DOCUMENT_FILE,f.UNAVAILABLE,f.EXPIRED_EPHEMERAL,f.REVOKED,f.XMA,f.RAVEN,f.RECEIVER_FETCH]),b=function(t){return C.has(t)};l.isMAWSupportedMediaType=e,l.isEBSupportedMsgType=s,l.isProtobufUploadSupportedMsgType=u,l.EPHEMERAL_SCREENSHOT_ACTION=c,l.MSG_TYPE=f,l.mawSupportedMediaTypes=g,l.isQuotedMsgType=b}),98);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-1.0.3",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=t(),i=t([1]),l=t([56129,1]),s=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n&255,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=r&255}function _(e,t,n,r,o){var a,i=0;for(a=0;a<o;a++)i|=e[t+a]^n[r+a];return(1&i-1>>>8)-1}function f(e,t,n,r){return _(e,t,n,r,16)}function g(e,t,n,r){return _(e,t,n,r,32)}function h(e,t,n,r){for(var o=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,a=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,i=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,l=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,s=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24,u=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,c=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,d=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,m=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,p=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,_=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,f=n[16]&255|(n[17]&255)<<8|(n[18]&255)<<16|(n[19]&255)<<24,g=n[20]&255|(n[21]&255)<<8|(n[22]&255)<<16|(n[23]&255)<<24,h=n[24]&255|(n[25]&255)<<8|(n[26]&255)<<16|(n[27]&255)<<24,y=n[28]&255|(n[29]&255)<<8|(n[30]&255)<<16|(n[31]&255)<<24,C=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,b=o,v=a,S=i,R=l,L=s,E=u,k=c,I=d,T=m,D=p,x=_,$=f,P=g,N=h,M=y,w=C,A,F=0;F<20;F+=2)A=b+P|0,L^=A<<7|A>>>25,A=L+b|0,T^=A<<9|A>>>23,A=T+L|0,P^=A<<13|A>>>19,A=P+T|0,b^=A<<18|A>>>14,A=E+v|0,D^=A<<7|A>>>25,A=D+E|0,N^=A<<9|A>>>23,A=N+D|0,v^=A<<13|A>>>19,A=v+N|0,E^=A<<18|A>>>14,A=x+k|0,M^=A<<7|A>>>25,A=M+x|0,S^=A<<9|A>>>23,A=S+M|0,k^=A<<13|A>>>19,A=k+S|0,x^=A<<18|A>>>14,A=w+$|0,R^=A<<7|A>>>25,A=R+w|0,I^=A<<9|A>>>23,A=I+R|0,$^=A<<13|A>>>19,A=$+I|0,w^=A<<18|A>>>14,A=b+R|0,v^=A<<7|A>>>25,A=v+b|0,S^=A<<9|A>>>23,A=S+v|0,R^=A<<13|A>>>19,A=R+S|0,b^=A<<18|A>>>14,A=E+L|0,k^=A<<7|A>>>25,A=k+E|0,I^=A<<9|A>>>23,A=I+k|0,L^=A<<13|A>>>19,A=L+I|0,E^=A<<18|A>>>14,A=x+D|0,$^=A<<7|A>>>25,A=$+x|0,T^=A<<9|A>>>23,A=T+$|0,D^=A<<13|A>>>19,A=D+T|0,x^=A<<18|A>>>14,A=w+M|0,P^=A<<7|A>>>25,A=P+w|0,N^=A<<9|A>>>23,A=N+P|0,M^=A<<13|A>>>19,A=M+N|0,w^=A<<18|A>>>14;b=b+o|0,v=v+a|0,S=S+i|0,R=R+l|0,L=L+s|0,E=E+u|0,k=k+c|0,I=I+d|0,T=T+m|0,D=D+p|0,x=x+_|0,$=$+f|0,P=P+g|0,N=N+h|0,M=M+y|0,w=w+C|0,e[0]=b>>>0&255,e[1]=b>>>8&255,e[2]=b>>>16&255,e[3]=b>>>24&255,e[4]=v>>>0&255,e[5]=v>>>8&255,e[6]=v>>>16&255,e[7]=v>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=R>>>0&255,e[13]=R>>>8&255,e[14]=R>>>16&255,e[15]=R>>>24&255,e[16]=L>>>0&255,e[17]=L>>>8&255,e[18]=L>>>16&255,e[19]=L>>>24&255,e[20]=E>>>0&255,e[21]=E>>>8&255,e[22]=E>>>16&255,e[23]=E>>>24&255,e[24]=k>>>0&255,e[25]=k>>>8&255,e[26]=k>>>16&255,e[27]=k>>>24&255,e[28]=I>>>0&255,e[29]=I>>>8&255,e[30]=I>>>16&255,e[31]=I>>>24&255,e[32]=T>>>0&255,e[33]=T>>>8&255,e[34]=T>>>16&255,e[35]=T>>>24&255,e[36]=D>>>0&255,e[37]=D>>>8&255,e[38]=D>>>16&255,e[39]=D>>>24&255,e[40]=x>>>0&255,e[41]=x>>>8&255,e[42]=x>>>16&255,e[43]=x>>>24&255,e[44]=$>>>0&255,e[45]=$>>>8&255,e[46]=$>>>16&255,e[47]=$>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=N>>>0&255,e[53]=N>>>8&255,e[54]=N>>>16&255,e[55]=N>>>24&255,e[56]=M>>>0&255,e[57]=M>>>8&255,e[58]=M>>>16&255,e[59]=M>>>24&255,e[60]=w>>>0&255,e[61]=w>>>8&255,e[62]=w>>>16&255,e[63]=w>>>24&255}function y(e,t,n,r){for(var o=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,a=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,i=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,l=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,s=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24,u=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,c=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,d=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,m=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,p=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,_=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,f=n[16]&255|(n[17]&255)<<8|(n[18]&255)<<16|(n[19]&255)<<24,g=n[20]&255|(n[21]&255)<<8|(n[22]&255)<<16|(n[23]&255)<<24,h=n[24]&255|(n[25]&255)<<8|(n[26]&255)<<16|(n[27]&255)<<24,y=n[28]&255|(n[29]&255)<<8|(n[30]&255)<<16|(n[31]&255)<<24,C=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,b=o,v=a,S=i,R=l,L=s,E=u,k=c,I=d,T=m,D=p,x=_,$=f,P=g,N=h,M=y,w=C,A,F=0;F<20;F+=2)A=b+P|0,L^=A<<7|A>>>25,A=L+b|0,T^=A<<9|A>>>23,A=T+L|0,P^=A<<13|A>>>19,A=P+T|0,b^=A<<18|A>>>14,A=E+v|0,D^=A<<7|A>>>25,A=D+E|0,N^=A<<9|A>>>23,A=N+D|0,v^=A<<13|A>>>19,A=v+N|0,E^=A<<18|A>>>14,A=x+k|0,M^=A<<7|A>>>25,A=M+x|0,S^=A<<9|A>>>23,A=S+M|0,k^=A<<13|A>>>19,A=k+S|0,x^=A<<18|A>>>14,A=w+$|0,R^=A<<7|A>>>25,A=R+w|0,I^=A<<9|A>>>23,A=I+R|0,$^=A<<13|A>>>19,A=$+I|0,w^=A<<18|A>>>14,A=b+R|0,v^=A<<7|A>>>25,A=v+b|0,S^=A<<9|A>>>23,A=S+v|0,R^=A<<13|A>>>19,A=R+S|0,b^=A<<18|A>>>14,A=E+L|0,k^=A<<7|A>>>25,A=k+E|0,I^=A<<9|A>>>23,A=I+k|0,L^=A<<13|A>>>19,A=L+I|0,E^=A<<18|A>>>14,A=x+D|0,$^=A<<7|A>>>25,A=$+x|0,T^=A<<9|A>>>23,A=T+$|0,D^=A<<13|A>>>19,A=D+T|0,x^=A<<18|A>>>14,A=w+M|0,P^=A<<7|A>>>25,A=P+w|0,N^=A<<9|A>>>23,A=N+P|0,M^=A<<13|A>>>19,A=M+N|0,w^=A<<18|A>>>14;e[0]=b>>>0&255,e[1]=b>>>8&255,e[2]=b>>>16&255,e[3]=b>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=x>>>0&255,e[9]=x>>>8&255,e[10]=x>>>16&255,e[11]=x>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=k>>>0&255,e[17]=k>>>8&255,e[18]=k>>>16&255,e[19]=k>>>24&255,e[20]=I>>>0&255,e[21]=I>>>8&255,e[22]=I>>>16&255,e[23]=I>>>24&255,e[24]=T>>>0&255,e[25]=T>>>8&255,e[26]=T>>>16&255,e[27]=T>>>24&255,e[28]=D>>>0&255,e[29]=D>>>8&255,e[30]=D>>>16&255,e[31]=D>>>24&255}function C(e,t,n,r){h(e,t,n,r)}function b(e,t,n,r){y(e,t,n,r)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(e,t,n,r,o,a,i){var l=new Uint8Array(16),s=new Uint8Array(64),u,c;for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=a[c];for(;o>=64;){for(C(s,l,i,v),c=0;c<64;c++)e[t+c]=n[r+c]^s[c];for(u=1,c=8;c<16;c++)u=u+(l[c]&255)|0,l[c]=u&255,u>>>=8;o-=64,t+=64,r+=64}if(o>0)for(C(s,l,i,v),c=0;c<o;c++)e[t+c]=n[r+c]^s[c];return 0}function R(e,t,n,r,o){var a=new Uint8Array(16),i=new Uint8Array(64),l,s;for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=r[s];for(;n>=64;){for(C(i,a,o,v),s=0;s<64;s++)e[t+s]=i[s];for(l=1,s=8;s<16;s++)l=l+(a[s]&255)|0,a[s]=l&255,l>>>=8;n-=64,t+=64}if(n>0)for(C(i,a,o,v),s=0;s<n;s++)e[t+s]=i[s];return 0}function L(e,t,n,r,o){var a=new Uint8Array(32);b(a,r,o,v);for(var i=new Uint8Array(8),l=0;l<8;l++)i[l]=r[l+16];return R(e,t,n,i,a)}function E(e,t,n,r,o,a,i){var l=new Uint8Array(32);b(l,a,i,v);for(var s=new Uint8Array(8),u=0;u<8;u++)s[u]=a[u+16];return S(e,t,n,r,o,s,l)}var k=function(e){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var t,n,r,o,a,i,l,s;t=e[0]&255|(e[1]&255)<<8,this.r[0]=t&8191,n=e[2]&255|(e[3]&255)<<8,this.r[1]=(t>>>13|n<<3)&8191,r=e[4]&255|(e[5]&255)<<8,this.r[2]=(n>>>10|r<<6)&7939,o=e[6]&255|(e[7]&255)<<8,this.r[3]=(r>>>7|o<<9)&8191,a=e[8]&255|(e[9]&255)<<8,this.r[4]=(o>>>4|a<<12)&255,this.r[5]=a>>>1&8190,i=e[10]&255|(e[11]&255)<<8,this.r[6]=(a>>>14|i<<2)&8191,l=e[12]&255|(e[13]&255)<<8,this.r[7]=(i>>>11|l<<5)&8065,s=e[14]&255|(e[15]&255)<<8,this.r[8]=(l>>>8|s<<8)&8191,this.r[9]=s>>>5&127,this.pad[0]=e[16]&255|(e[17]&255)<<8,this.pad[1]=e[18]&255|(e[19]&255)<<8,this.pad[2]=e[20]&255|(e[21]&255)<<8,this.pad[3]=e[22]&255|(e[23]&255)<<8,this.pad[4]=e[24]&255|(e[25]&255)<<8,this.pad[5]=e[26]&255|(e[27]&255)<<8,this.pad[6]=e[28]&255|(e[29]&255)<<8,this.pad[7]=e[30]&255|(e[31]&255)<<8};k.prototype.blocks=function(e,t,n){for(var r=this.fin?0:2048,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R=this.h[0],L=this.h[1],E=this.h[2],k=this.h[3],I=this.h[4],T=this.h[5],D=this.h[6],x=this.h[7],$=this.h[8],P=this.h[9],N=this.r[0],M=this.r[1],w=this.r[2],A=this.r[3],F=this.r[4],O=this.r[5],B=this.r[6],W=this.r[7],q=this.r[8],U=this.r[9];n>=16;)o=e[t+0]&255|(e[t+1]&255)<<8,R+=o&8191,a=e[t+2]&255|(e[t+3]&255)<<8,L+=(o>>>13|a<<3)&8191,i=e[t+4]&255|(e[t+5]&255)<<8,E+=(a>>>10|i<<6)&8191,l=e[t+6]&255|(e[t+7]&255)<<8,k+=(i>>>7|l<<9)&8191,s=e[t+8]&255|(e[t+9]&255)<<8,I+=(l>>>4|s<<12)&8191,T+=s>>>1&8191,u=e[t+10]&255|(e[t+11]&255)<<8,D+=(s>>>14|u<<2)&8191,c=e[t+12]&255|(e[t+13]&255)<<8,x+=(u>>>11|c<<5)&8191,d=e[t+14]&255|(e[t+15]&255)<<8,$+=(c>>>8|d<<8)&8191,P+=d>>>5|r,m=0,p=m,p+=R*N,p+=L*(5*U),p+=E*(5*q),p+=k*(5*W),p+=I*(5*B),m=p>>>13,p&=8191,p+=T*(5*O),p+=D*(5*F),p+=x*(5*A),p+=$*(5*w),p+=P*(5*M),m+=p>>>13,p&=8191,_=m,_+=R*M,_+=L*N,_+=E*(5*U),_+=k*(5*q),_+=I*(5*W),m=_>>>13,_&=8191,_+=T*(5*B),_+=D*(5*O),_+=x*(5*F),_+=$*(5*A),_+=P*(5*w),m+=_>>>13,_&=8191,f=m,f+=R*w,f+=L*M,f+=E*N,f+=k*(5*U),f+=I*(5*q),m=f>>>13,f&=8191,f+=T*(5*W),f+=D*(5*B),f+=x*(5*O),f+=$*(5*F),f+=P*(5*A),m+=f>>>13,f&=8191,g=m,g+=R*A,g+=L*w,g+=E*M,g+=k*N,g+=I*(5*U),m=g>>>13,g&=8191,g+=T*(5*q),g+=D*(5*W),g+=x*(5*B),g+=$*(5*O),g+=P*(5*F),m+=g>>>13,g&=8191,h=m,h+=R*F,h+=L*A,h+=E*w,h+=k*M,h+=I*N,m=h>>>13,h&=8191,h+=T*(5*U),h+=D*(5*q),h+=x*(5*W),h+=$*(5*B),h+=P*(5*O),m+=h>>>13,h&=8191,y=m,y+=R*O,y+=L*F,y+=E*A,y+=k*w,y+=I*M,m=y>>>13,y&=8191,y+=T*N,y+=D*(5*U),y+=x*(5*q),y+=$*(5*W),y+=P*(5*B),m+=y>>>13,y&=8191,C=m,C+=R*B,C+=L*O,C+=E*F,C+=k*A,C+=I*w,m=C>>>13,C&=8191,C+=T*M,C+=D*N,C+=x*(5*U),C+=$*(5*q),C+=P*(5*W),m+=C>>>13,C&=8191,b=m,b+=R*W,b+=L*B,b+=E*O,b+=k*F,b+=I*A,m=b>>>13,b&=8191,b+=T*w,b+=D*M,b+=x*N,b+=$*(5*U),b+=P*(5*q),m+=b>>>13,b&=8191,v=m,v+=R*q,v+=L*W,v+=E*B,v+=k*O,v+=I*F,m=v>>>13,v&=8191,v+=T*A,v+=D*w,v+=x*M,v+=$*N,v+=P*(5*U),m+=v>>>13,v&=8191,S=m,S+=R*U,S+=L*q,S+=E*W,S+=k*B,S+=I*O,m=S>>>13,S&=8191,S+=T*F,S+=D*A,S+=x*w,S+=$*M,S+=P*N,m+=S>>>13,S&=8191,m=(m<<2)+m|0,m=m+p|0,p=m&8191,m=m>>>13,_+=m,R=p,L=_,E=f,k=g,I=h,T=y,D=C,x=b,$=v,P=S,t+=16,n-=16;this.h[0]=R,this.h[1]=L,this.h[2]=E,this.h[3]=k,this.h[4]=I,this.h[5]=T,this.h[6]=D,this.h[7]=x,this.h[8]=$,this.h[9]=P},k.prototype.finish=function(e,t){var n=new Uint16Array(10),r,o,a,i;if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=r*5,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,n[0]=this.h[0]+5,r=n[0]>>>13,n[0]&=8191,i=1;i<10;i++)n[i]=this.h[i]+r,r=n[i]>>>13,n[i]&=8191;for(n[9]-=8192,o=(r^1)-1,i=0;i<10;i++)n[i]&=o;for(o=~o,i=0;i<10;i++)this.h[i]=this.h[i]&o|n[i];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,a=this.h[0]+this.pad[0],this.h[0]=a&65535,i=1;i<8;i++)a=(this.h[i]+this.pad[i]|0)+(a>>>16)|0,this.h[i]=a&65535;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,n){var r,o;if(this.leftover){for(o=16-this.leftover,o>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(e,t,o),t+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};function I(e,t,n,r,o,a){var i=new k(a);return i.update(n,r,o),i.finish(e,t),0}function T(e,t,n,r,o,a){var i=new Uint8Array(16);return I(i,0,n,r,o,a),f(e,t,i,0)}function D(e,t,n,r,o){var a;if(n<32)return-1;for(E(e,0,t,0,n,r,o),I(e,16,e,32,n-32,e),a=0;a<16;a++)e[a]=0;return 0}function x(e,t,n,r,o){var a,i=new Uint8Array(32);if(n<32||(L(i,0,32,r,o),T(t,16,t,32,n-32,i)!==0))return-1;for(E(e,0,t,0,n,r,o),a=0;a<32;a++)e[a]=0;return 0}function $(e,t){var n;for(n=0;n<16;n++)e[n]=t[n]|0}function P(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-r*65536;e[0]+=r-1+37*(r-1)}function N(e,t,n){for(var r,o=~(n-1),a=0;a<16;a++)r=o&(e[a]^t[a]),e[a]^=r,t[a]^=r}function M(e,n){var r,o,a,i=t(),l=t();for(r=0;r<16;r++)l[r]=n[r];for(P(l),P(l),P(l),o=0;o<2;o++){for(i[0]=l[0]-65517,r=1;r<15;r++)i[r]=l[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=l[15]-32767-(i[14]>>16&1),a=i[15]>>16&1,i[14]&=65535,N(l,i,1-a)}for(r=0;r<16;r++)e[2*r]=l[r]&255,e[2*r+1]=l[r]>>8}function w(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return M(n,e),M(r,t),g(n,0,r,0)}function A(e){var t=new Uint8Array(32);return M(t,e),t[0]&1}function F(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function O(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function B(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function W(e,t,n){var r,o,a=0,i=0,l=0,s=0,u=0,c=0,d=0,m=0,p=0,_=0,f=0,g=0,h=0,y=0,C=0,b=0,v=0,S=0,R=0,L=0,E=0,k=0,I=0,T=0,D=0,x=0,$=0,P=0,N=0,M=0,w=0,A=n[0],F=n[1],O=n[2],B=n[3],W=n[4],q=n[5],U=n[6],V=n[7],H=n[8],G=n[9],z=n[10],j=n[11],K=n[12],Q=n[13],X=n[14],Y=n[15];r=t[0],a+=r*A,i+=r*F,l+=r*O,s+=r*B,u+=r*W,c+=r*q,d+=r*U,m+=r*V,p+=r*H,_+=r*G,f+=r*z,g+=r*j,h+=r*K,y+=r*Q,C+=r*X,b+=r*Y,r=t[1],i+=r*A,l+=r*F,s+=r*O,u+=r*B,c+=r*W,d+=r*q,m+=r*U,p+=r*V,_+=r*H,f+=r*G,g+=r*z,h+=r*j,y+=r*K,C+=r*Q,b+=r*X,v+=r*Y,r=t[2],l+=r*A,s+=r*F,u+=r*O,c+=r*B,d+=r*W,m+=r*q,p+=r*U,_+=r*V,f+=r*H,g+=r*G,h+=r*z,y+=r*j,C+=r*K,b+=r*Q,v+=r*X,S+=r*Y,r=t[3],s+=r*A,u+=r*F,c+=r*O,d+=r*B,m+=r*W,p+=r*q,_+=r*U,f+=r*V,g+=r*H,h+=r*G,y+=r*z,C+=r*j,b+=r*K,v+=r*Q,S+=r*X,R+=r*Y,r=t[4],u+=r*A,c+=r*F,d+=r*O,m+=r*B,p+=r*W,_+=r*q,f+=r*U,g+=r*V,h+=r*H,y+=r*G,C+=r*z,b+=r*j,v+=r*K,S+=r*Q,R+=r*X,L+=r*Y,r=t[5],c+=r*A,d+=r*F,m+=r*O,p+=r*B,_+=r*W,f+=r*q,g+=r*U,h+=r*V,y+=r*H,C+=r*G,b+=r*z,v+=r*j,S+=r*K,R+=r*Q,L+=r*X,E+=r*Y,r=t[6],d+=r*A,m+=r*F,p+=r*O,_+=r*B,f+=r*W,g+=r*q,h+=r*U,y+=r*V,C+=r*H,b+=r*G,v+=r*z,S+=r*j,R+=r*K,L+=r*Q,E+=r*X,k+=r*Y,r=t[7],m+=r*A,p+=r*F,_+=r*O,f+=r*B,g+=r*W,h+=r*q,y+=r*U,C+=r*V,b+=r*H,v+=r*G,S+=r*z,R+=r*j,L+=r*K,E+=r*Q,k+=r*X,I+=r*Y,r=t[8],p+=r*A,_+=r*F,f+=r*O,g+=r*B,h+=r*W,y+=r*q,C+=r*U,b+=r*V,v+=r*H,S+=r*G,R+=r*z,L+=r*j,E+=r*K,k+=r*Q,I+=r*X,T+=r*Y,r=t[9],_+=r*A,f+=r*F,g+=r*O,h+=r*B,y+=r*W,C+=r*q,b+=r*U,v+=r*V,S+=r*H,R+=r*G,L+=r*z,E+=r*j,k+=r*K,I+=r*Q,T+=r*X,D+=r*Y,r=t[10],f+=r*A,g+=r*F,h+=r*O,y+=r*B,C+=r*W,b+=r*q,v+=r*U,S+=r*V,R+=r*H,L+=r*G,E+=r*z,k+=r*j,I+=r*K,T+=r*Q,D+=r*X,x+=r*Y,r=t[11],g+=r*A,h+=r*F,y+=r*O,C+=r*B,b+=r*W,v+=r*q,S+=r*U,R+=r*V,L+=r*H,E+=r*G,k+=r*z,I+=r*j,T+=r*K,D+=r*Q,x+=r*X,$+=r*Y,r=t[12],h+=r*A,y+=r*F,C+=r*O,b+=r*B,v+=r*W,S+=r*q,R+=r*U,L+=r*V,E+=r*H,k+=r*G,I+=r*z,T+=r*j,D+=r*K,x+=r*Q,$+=r*X,P+=r*Y,r=t[13],y+=r*A,C+=r*F,b+=r*O,v+=r*B,S+=r*W,R+=r*q,L+=r*U,E+=r*V,k+=r*H,I+=r*G,T+=r*z,D+=r*j,x+=r*K,$+=r*Q,P+=r*X,N+=r*Y,r=t[14],C+=r*A,b+=r*F,v+=r*O,S+=r*B,R+=r*W,L+=r*q,E+=r*U,k+=r*V,I+=r*H,T+=r*G,D+=r*z,x+=r*j,$+=r*K,P+=r*Q,N+=r*X,M+=r*Y,r=t[15],b+=r*A,v+=r*F,S+=r*O,R+=r*B,L+=r*W,E+=r*q,k+=r*U,I+=r*V,T+=r*H,D+=r*G,x+=r*z,$+=r*j,P+=r*K,N+=r*Q,M+=r*X,w+=r*Y,a+=38*v,i+=38*S,l+=38*R,s+=38*L,u+=38*E,c+=38*k,d+=38*I,m+=38*T,p+=38*D,_+=38*x,f+=38*$,g+=38*P,h+=38*N,y+=38*M,C+=38*w,o=1,r=a+o+65535,o=Math.floor(r/65536),a=r-o*65536,r=i+o+65535,o=Math.floor(r/65536),i=r-o*65536,r=l+o+65535,o=Math.floor(r/65536),l=r-o*65536,r=s+o+65535,o=Math.floor(r/65536),s=r-o*65536,r=u+o+65535,o=Math.floor(r/65536),u=r-o*65536,r=c+o+65535,o=Math.floor(r/65536),c=r-o*65536,r=d+o+65535,o=Math.floor(r/65536),d=r-o*65536,r=m+o+65535,o=Math.floor(r/65536),m=r-o*65536,r=p+o+65535,o=Math.floor(r/65536),p=r-o*65536,r=_+o+65535,o=Math.floor(r/65536),_=r-o*65536,r=f+o+65535,o=Math.floor(r/65536),f=r-o*65536,r=g+o+65535,o=Math.floor(r/65536),g=r-o*65536,r=h+o+65535,o=Math.floor(r/65536),h=r-o*65536,r=y+o+65535,o=Math.floor(r/65536),y=r-o*65536,r=C+o+65535,o=Math.floor(r/65536),C=r-o*65536,r=b+o+65535,o=Math.floor(r/65536),b=r-o*65536,a+=o-1+37*(o-1),o=1,r=a+o+65535,o=Math.floor(r/65536),a=r-o*65536,r=i+o+65535,o=Math.floor(r/65536),i=r-o*65536,r=l+o+65535,o=Math.floor(r/65536),l=r-o*65536,r=s+o+65535,o=Math.floor(r/65536),s=r-o*65536,r=u+o+65535,o=Math.floor(r/65536),u=r-o*65536,r=c+o+65535,o=Math.floor(r/65536),c=r-o*65536,r=d+o+65535,o=Math.floor(r/65536),d=r-o*65536,r=m+o+65535,o=Math.floor(r/65536),m=r-o*65536,r=p+o+65535,o=Math.floor(r/65536),p=r-o*65536,r=_+o+65535,o=Math.floor(r/65536),_=r-o*65536,r=f+o+65535,o=Math.floor(r/65536),f=r-o*65536,r=g+o+65535,o=Math.floor(r/65536),g=r-o*65536,r=h+o+65535,o=Math.floor(r/65536),h=r-o*65536,r=y+o+65535,o=Math.floor(r/65536),y=r-o*65536,r=C+o+65535,o=Math.floor(r/65536),C=r-o*65536,r=b+o+65535,o=Math.floor(r/65536),b=r-o*65536,a+=o-1+37*(o-1),e[0]=a,e[1]=i,e[2]=l,e[3]=s,e[4]=u,e[5]=c,e[6]=d,e[7]=m,e[8]=p,e[9]=_,e[10]=f,e[11]=g,e[12]=h,e[13]=y,e[14]=C,e[15]=b}function q(e,t){W(e,t,t)}function U(e,n){var r=t(),o;for(o=0;o<16;o++)r[o]=n[o];for(o=253;o>=0;o--)q(r,r),o!==2&&o!==4&&W(r,r,n);for(o=0;o<16;o++)e[o]=r[o]}function V(e,n){var r=t(),o;for(o=0;o<16;o++)r[o]=n[o];for(o=250;o>=0;o--)q(r,r),o!==1&&W(r,r,n);for(o=0;o<16;o++)e[o]=r[o]}function H(e,n,r){var o=new Uint8Array(32),a=new Float64Array(80),i,s,u=t(),c=t(),d=t(),m=t(),p=t(),_=t();for(s=0;s<31;s++)o[s]=n[s];for(o[31]=n[31]&127|64,o[0]&=248,F(a,r),s=0;s<16;s++)c[s]=a[s],m[s]=u[s]=d[s]=0;for(u[0]=m[0]=1,s=254;s>=0;--s)i=o[s>>>3]>>>(s&7)&1,N(u,c,i),N(d,m,i),O(p,u,d),B(u,u,d),O(d,c,m),B(c,c,m),q(m,p),q(_,u),W(u,d,u),W(d,c,p),O(p,u,d),B(u,u,d),q(c,u),B(d,m,_),W(u,d,l),O(u,u,m),W(d,d,u),W(u,m,_),W(m,c,a),q(c,p),N(u,c,i),N(d,m,i);for(s=0;s<16;s++)a[s+16]=u[s],a[s+32]=d[s],a[s+48]=c[s],a[s+64]=m[s];var f=a.subarray(32),g=a.subarray(16);return U(f,f),W(g,g,f),M(e,g),0}function G(e,t){return H(e,t,o)}function z(e,t){return n(t,32),G(e,t)}function j(e,t,n){var o=new Uint8Array(32);return H(o,n,t),b(e,r,o,v)}var K=D,Q=x;function X(e,t,n,r,o,a){var i=new Uint8Array(32);return j(i,o,a),K(e,t,n,r,i)}function Y(e,t,n,r,o,a){var i=new Uint8Array(32);return j(i,o,a),Q(e,t,n,r,i)}var J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Z(e,t,n,r){for(var o=new Int32Array(16),a=new Int32Array(16),i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P=e[0],N=e[1],M=e[2],w=e[3],A=e[4],F=e[5],O=e[6],B=e[7],W=t[0],q=t[1],U=t[2],V=t[3],H=t[4],G=t[5],z=t[6],j=t[7],K=0;r>=128;){for(L=0;L<16;L++)E=8*L+K,o[L]=n[E+0]<<24|n[E+1]<<16|n[E+2]<<8|n[E+3],a[L]=n[E+4]<<24|n[E+5]<<16|n[E+6]<<8|n[E+7];for(L=0;L<80;L++)if(i=P,l=N,s=M,u=w,c=A,d=F,m=O,p=B,_=W,f=q,g=U,h=V,y=H,C=G,b=z,v=j,k=B,I=j,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=(A>>>14|H<<18)^(A>>>18|H<<14)^(H>>>9|A<<23),I=(H>>>14|A<<18)^(H>>>18|A<<14)^(A>>>9|H<<23),T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,k=A&F^~A&O,I=H&G^~H&z,T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,k=J[L*2],I=J[L*2+1],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,k=o[L%16],I=a[L%16],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,S=x&65535|$<<16,R=T&65535|D<<16,k=S,I=R,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=(P>>>28|W<<4)^(W>>>2|P<<30)^(W>>>7|P<<25),I=(W>>>28|P<<4)^(P>>>2|W<<30)^(P>>>7|W<<25),T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,k=P&N^P&M^N&M,I=W&q^W&U^q&U,T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,p=x&65535|$<<16,v=T&65535|D<<16,k=u,I=h,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=S,I=R,T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,u=x&65535|$<<16,h=T&65535|D<<16,N=i,M=l,w=s,A=u,F=c,O=d,B=m,P=p,q=_,U=f,V=g,H=h,G=y,z=C,j=b,W=v,L%16===15)for(E=0;E<16;E++)k=o[E],I=a[E],T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=o[(E+9)%16],I=a[(E+9)%16],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,S=o[(E+1)%16],R=a[(E+1)%16],k=(S>>>1|R<<31)^(S>>>8|R<<24)^S>>>7,I=(R>>>1|S<<31)^(R>>>8|S<<24)^(R>>>7|S<<25),T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,S=o[(E+14)%16],R=a[(E+14)%16],k=(S>>>19|R<<13)^(R>>>29|S<<3)^S>>>6,I=(R>>>19|S<<13)^(S>>>29|R<<3)^(R>>>6|S<<26),T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,o[E]=x&65535|$<<16,a[E]=T&65535|D<<16;k=P,I=W,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[0],I=t[0],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[0]=P=x&65535|$<<16,t[0]=W=T&65535|D<<16,k=N,I=q,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[1],I=t[1],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[1]=N=x&65535|$<<16,t[1]=q=T&65535|D<<16,k=M,I=U,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[2],I=t[2],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[2]=M=x&65535|$<<16,t[2]=U=T&65535|D<<16,k=w,I=V,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[3],I=t[3],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[3]=w=x&65535|$<<16,t[3]=V=T&65535|D<<16,k=A,I=H,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[4],I=t[4],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[4]=A=x&65535|$<<16,t[4]=H=T&65535|D<<16,k=F,I=G,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[5],I=t[5],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[5]=F=x&65535|$<<16,t[5]=G=T&65535|D<<16,k=O,I=z,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[6],I=t[6],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[6]=O=x&65535|$<<16,t[6]=z=T&65535|D<<16,k=B,I=j,T=I&65535,D=I>>>16,x=k&65535,$=k>>>16,k=e[7],I=t[7],T+=I&65535,D+=I>>>16,x+=k&65535,$+=k>>>16,D+=T>>>16,x+=D>>>16,$+=x>>>16,e[7]=B=x&65535|$<<16,t[7]=j=T&65535|D<<16,K+=128,r-=128}return r}function ee(e,t,n){var r=new Int32Array(8),o=new Int32Array(8),a=new Uint8Array(256),i,l=n;for(r[0]=1779033703,r[1]=3144134277,r[2]=1013904242,r[3]=2773480762,r[4]=1359893119,r[5]=2600822924,r[6]=528734635,r[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Z(r,o,t,n),n%=128,i=0;i<n;i++)a[i]=t[l-n+i];for(a[n]=128,n=256-128*(n<112?1:0),a[n-9]=0,p(a,n-8,l/536870912|0,l<<3),Z(r,o,a,n),i=0;i<8;i++)p(e,8*i,r[i],o[i]);return 0}function te(e,n){var r=t(),o=t(),a=t(),i=t(),l=t(),s=t(),c=t(),d=t(),m=t();B(r,e[1],e[0]),B(m,n[1],n[0]),W(r,r,m),O(o,e[0],e[1]),O(m,n[0],n[1]),W(o,o,m),W(a,e[3],n[3]),W(a,a,u),W(i,e[2],n[2]),O(i,i,i),B(l,o,r),B(s,i,a),O(c,i,a),O(d,o,r),W(e[0],l,s),W(e[1],d,c),W(e[2],c,s),W(e[3],l,d)}function ne(e,t,n){var r;for(r=0;r<4;r++)N(e[r],t[r],n)}function re(e,n){var r=t(),o=t(),a=t();U(a,n[2]),W(r,n[0],a),W(o,n[1],a),M(e,o),e[31]^=A(r)<<7}function oe(e,t,n){var r,o;for($(e[0],a),$(e[1],i),$(e[2],i),$(e[3],a),o=255;o>=0;--o)r=n[o/8|0]>>(o&7)&1,ne(e,t,r),te(t,e),te(e,e),ne(e,t,r)}function ae(e,n){var r=[t(),t(),t(),t()];$(r[0],c),$(r[1],d),$(r[2],i),W(r[3],c,d),oe(e,r,n)}function ie(e,r,o){var a=new Uint8Array(64),i=[t(),t(),t(),t()],l;for(o||n(r,32),ee(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,ae(i,a),re(e,i),l=0;l<32;l++)r[l+32]=e[l];return 0}var le=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function se(e,t){var n,r,o,a;for(r=63;r>=32;--r){for(n=0,o=r-32,a=r-12;o<a;++o)t[o]+=n-16*t[r]*le[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=n*256;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*le[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*le[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=t[r]&255}function ue(e){var t=new Float64Array(64),n;for(n=0;n<64;n++)t[n]=e[n];for(n=0;n<64;n++)e[n]=0;se(e,t)}function ce(e,n,r,o){var a=new Uint8Array(64),i=new Uint8Array(64),l=new Uint8Array(64),s,u,c=new Float64Array(64),d=[t(),t(),t(),t()];ee(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var m=r+64;for(s=0;s<r;s++)e[64+s]=n[s];for(s=0;s<32;s++)e[32+s]=a[32+s];for(ee(l,e.subarray(32),r+32),ue(l),ae(d,l),re(e,d),s=32;s<64;s++)e[s]=o[s];for(ee(i,e,r+64),ue(i),s=0;s<64;s++)c[s]=0;for(s=0;s<32;s++)c[s]=l[s];for(s=0;s<32;s++)for(u=0;u<32;u++)c[s+u]+=i[s]*a[u];return se(e.subarray(32),c),m}function de(e,n){var r=t(),o=t(),l=t(),u=t(),c=t(),d=t(),p=t();return $(e[2],i),F(e[1],n),q(l,e[1]),W(u,l,s),B(l,l,e[2]),O(u,e[2],u),q(c,u),q(d,c),W(p,d,c),W(r,p,l),W(r,r,u),V(r,r),W(r,r,l),W(r,r,u),W(r,r,u),W(e[0],r,u),q(o,e[0]),W(o,o,u),w(o,l)&&W(e[0],e[0],m),q(o,e[0]),W(o,o,u),w(o,l)?-1:(A(e[0])===n[31]>>7&&B(e[0],a,e[0]),W(e[3],e[0],e[1]),0)}function me(e,n,r,o){var a,i=new Uint8Array(32),l=new Uint8Array(64),s=[t(),t(),t(),t()],u=[t(),t(),t(),t()];if(r<64||de(u,o))return-1;for(a=0;a<r;a++)e[a]=n[a];for(a=0;a<32;a++)e[a+32]=o[a];if(ee(l,e,r),ue(l),oe(s,u,l),ae(u,n.subarray(32)),te(s,u),re(i,s),r-=64,g(n,0,i,0)){for(a=0;a<r;a++)e[a]=0;return-1}for(a=0;a<r;a++)e[a]=n[a+64];return r}var pe=32,_e=24,fe=32,ge=16,he=32,ye=32,Ce=32,be=32,ve=32,Se=_e,Re=fe,Le=ge,Ee=64,ke=32,Ie=64,Te=32,De=64;e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:E,crypto_stream:L,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:R,crypto_onetimeauth:I,crypto_onetimeauth_verify:T,crypto_verify_16:f,crypto_verify_32:g,crypto_secretbox:D,crypto_secretbox_open:x,crypto_scalarmult:H,crypto_scalarmult_base:G,crypto_box_beforenm:j,crypto_box_afternm:K,crypto_box:X,crypto_box_open:Y,crypto_box_keypair:z,crypto_hash:ee,crypto_sign:ce,crypto_sign_keypair:ie,crypto_sign_open:me,crypto_secretbox_KEYBYTES:pe,crypto_secretbox_NONCEBYTES:_e,crypto_secretbox_ZEROBYTES:fe,crypto_secretbox_BOXZEROBYTES:ge,crypto_scalarmult_BYTES:he,crypto_scalarmult_SCALARBYTES:ye,crypto_box_PUBLICKEYBYTES:Ce,crypto_box_SECRETKEYBYTES:be,crypto_box_BEFORENMBYTES:ve,crypto_box_NONCEBYTES:Se,crypto_box_ZEROBYTES:Re,crypto_box_BOXZEROBYTES:Le,crypto_sign_BYTES:Ee,crypto_sign_PUBLICKEYBYTES:ke,crypto_sign_SECRETKEYBYTES:Ie,crypto_sign_SEEDBYTES:Te,crypto_hash_BYTES:De,gf:t,D:s,L:le,pack25519:M,unpack25519:F,M:W,A:O,S:q,Z:B,pow2523:V,add:te,set25519:$,modL:se,scalarmult:oe,scalarbase:ae};function xe(e,t){if(e.length!==pe)throw new Error("bad key size");if(t.length!==_e)throw new Error("bad nonce size")}function $e(e,t){if(e.length!==Ce)throw new Error("bad public key size");if(t.length!==be)throw new Error("bad secret key size")}function Pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ne(e){for(var t=0;t<e.length;t++)e[t]=0}e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){Pe(e,t,n),xe(n,t);for(var r=new Uint8Array(fe+e.length),o=new Uint8Array(r.length),a=0;a<e.length;a++)r[a+fe]=e[a];return D(o,r,r.length,t,n),o.subarray(ge)},e.secretbox.open=function(e,t,n){Pe(e,t,n),xe(n,t);for(var r=new Uint8Array(ge+e.length),o=new Uint8Array(r.length),a=0;a<e.length;a++)r[a+ge]=e[a];return r.length<32||x(o,r,r.length,t,n)!==0?null:o.subarray(fe)},e.secretbox.keyLength=pe,e.secretbox.nonceLength=_e,e.secretbox.overheadLength=ge,e.scalarMult=function(e,t){if(Pe(e,t),e.length!==ye)throw new Error("bad n size");if(t.length!==he)throw new Error("bad p size");var n=new Uint8Array(he);return H(n,e,t),n},e.scalarMult.base=function(e){if(Pe(e),e.length!==ye)throw new Error("bad n size");var t=new Uint8Array(he);return G(t,e),t},e.scalarMult.scalarLength=ye,e.scalarMult.groupElementLength=he,e.box=function(t,n,r,o){var a=e.box.before(r,o);return e.secretbox(t,n,a)},e.box.before=function(e,t){Pe(e,t),$e(e,t);var n=new Uint8Array(ve);return j(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,o){var a=e.box.before(r,o);return e.secretbox.open(t,n,a)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(Ce),t=new Uint8Array(be);return z(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(Pe(e),e.length!==be)throw new Error("bad secret key size");var t=new Uint8Array(Ce);return G(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=Ce,e.box.secretKeyLength=be,e.box.sharedKeyLength=ve,e.box.nonceLength=Se,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(Pe(e,t),t.length!==Ie)throw new Error("bad secret key size");var n=new Uint8Array(Ee+e.length);return ce(n,e,e.length,t),n},e.sign.open=function(e,t){if(Pe(e,t),t.length!==ke)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=me(n,e,e.length,t);if(r<0)return null;for(var o=new Uint8Array(r),a=0;a<o.length;a++)o[a]=n[a];return o},e.sign.detached=function(t,n){for(var r=e.sign(t,n),o=new Uint8Array(Ee),a=0;a<o.length;a++)o[a]=r[a];return o},e.sign.detached.verify=function(e,t,n){if(Pe(e,t,n),t.length!==Ee)throw new Error("bad signature size");if(n.length!==ke)throw new Error("bad public key size");var r=new Uint8Array(Ee+e.length),o=new Uint8Array(Ee+e.length),a;for(a=0;a<Ee;a++)r[a]=t[a];for(a=0;a<e.length;a++)r[a+Ee]=e[a];return me(o,r,r.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ke),t=new Uint8Array(Ie);return ie(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(Pe(e),e.length!==Ie)throw new Error("bad secret key size");for(var t=new Uint8Array(ke),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(Pe(e),e.length!==Te)throw new Error("bad seed size");for(var t=new Uint8Array(ke),n=new Uint8Array(Ie),r=0;r<32;r++)n[r]=e[r];return ie(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=ke,e.sign.secretKeyLength=Ie,e.sign.seedLength=Te,e.sign.signatureLength=Ee,e.hash=function(e){Pe(e);var t=new Uint8Array(De);return ee(t,e,e.length),t},e.hash.hashLength=De,e.verify=function(e,t){return Pe(e,t),e.length===0||t.length===0||e.length!==t.length?!1:_(e,0,t,0,e.length)===0},e.setPRNG=function(e){n=e},(function(){var t=typeof self!="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){var n=65536;e.setPRNG(function(e,r){var o,a=new Uint8Array(r);for(o=0;o<r;o+=n)t.getRandomValues(a.subarray(o,o+Math.min(r-o,n)));for(o=0;o<r;o++)e[o]=a[o];Ne(a)})}else t&&t.randomBytes&&e.setPRNG(function(e,n){var r,o=t.randomBytes(n);for(r=0;r<n;r++)e[r]=o[r];Ne(o)})})()})(typeof l!="undefined"&&l.exports?l.exports:self.nacl=self.nacl||{})}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("tweetnacl",["tweetnacl-1.0.3"],(function(t,n,r,o,a,i){"use strict";a.exports=n("tweetnacl-1.0.3")()}),null);
__d("WACryptoDependencies",["tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e=self.crypto;function s(t){e=t;var n=65536;o("tweetnacl").setPRNG(function(e,r){var o,a=new Uint8Array(r);for(o=0;o<r;o+=n)t.getRandomValues(a.subarray(o,o+Math.min(r-o,n)));for(o=0;o<r;o++)e[o]=a[o];for(var i=0;i<a.length;i++)a[i]=0})}function u(){return e}l.setCrypto=s,l.getCrypto=u}),98);
__d("WADirectPath",["WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e="0_0_0_.enc";function s(e){return e}function u(t){return t==null?o("WAResultOrError").makeError("direct-path-undefined"):t===""?o("WAResultOrError").makeError("direct-path-empty"):t.includes(e)?o("WAResultOrError").makeError("direct-path-corrupted"):o("WAResultOrError").makeResult(t)}l.unsafeCastToDirectPath=s,l.validateDirectPath=u}),98);
__d("WAProtoConst",[],(function(t,n,r,o,a,i){"use strict";var e={REPEATED:64,PACKED:128,REQUIRED:256},l=31,s={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17,MAP:18},u={VARINT:0,BIT64:1,BINARY:2,BIT32:5},c={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};i.FLAGS=e,i.TYPE_MASK=l,i.TYPES=s,i.ENC=u,i.KEYS=c}),66);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.internalSpec={fileSha256:[1,(e=o("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,u],size:[16,e.TYPES.INT64],lastDownloadAttemptTimestamp:[17,e.TYPES.INT64]},u.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]},c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]},l.MediaEntrySpec=s,l.MediaEntry$ProgressiveJpegDetailsSpec=u,l.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegMarkers",[],(function(t,n,r,o,a,i){"use strict";var e=255,l=0,s={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1},u=[l,s.RST0,s.RST1,s.RST2,s.RST3,s.RST4,s.RST5,s.RST6,s.RST7];i.MARKER_PREFIX=e,i.MARKER_ESCAPE_BYTE=l,i.MARKERS=s,i.SOS_STREAM=u}),66);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function p(t){if(m.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["starting"]))),!_(t))return m.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"]))),[];var n=[],r=2,a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",i=null,l=0,p=!1,y=!1,C=!1;function b(){C=!1,m.DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""])),r-1),n.push(r-1)}for(;r<t.byteLength;){if(i=t[r],p)return m.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"]))),[];switch(a){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":i===o("WAProgressiveJpegMarkers").MARKER_PREFIX&&(a="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(i===o("WAProgressiveJpegMarkers").MARKER_PREFIX)a="READ_MARKER_SECOND_BYTE";else if(i===o("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(i===o("WAProgressiveJpegMarkers").MARKERS.EOI)p=!0,C&&b();else{if(!y&&g(i))return m.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"]))),[];f(i)?(y=!0,a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(C&&b(),i===o("WAProgressiveJpegMarkers").MARKERS.SOS&&(C=!0),h(i)?a="READ_SIZE_FIRST_BYTE":a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA")}break;case"READ_SIZE_FIRST_BYTE":a="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":r+=l*256,r+=i,r-=2,a="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}r+=1,l=i}return n}function _(e){return!(e.byteLength<=2||e[0]!==o("WAProgressiveJpegMarkers").MARKER_PREFIX||e[1]!==o("WAProgressiveJpegMarkers").MARKERS.SOF2&&e[1]!==o("WAProgressiveJpegMarkers").MARKERS.SOI)}function f(e){return e===o("WAProgressiveJpegMarkers").MARKERS.SOF2||e===o("WAProgressiveJpegMarkers").MARKERS.SOF6||e===o("WAProgressiveJpegMarkers").MARKERS.SOF10||e===o("WAProgressiveJpegMarkers").MARKERS.SOF14}function g(e){return e===o("WAProgressiveJpegMarkers").MARKERS.SOF0||e===o("WAProgressiveJpegMarkers").MARKERS.SOF1||e===o("WAProgressiveJpegMarkers").MARKERS.SOF3||e===o("WAProgressiveJpegMarkers").MARKERS.SOF5||e===o("WAProgressiveJpegMarkers").MARKERS.SOF7||e===o("WAProgressiveJpegMarkers").MARKERS.JPG||e===o("WAProgressiveJpegMarkers").MARKERS.SOF9||e===o("WAProgressiveJpegMarkers").MARKERS.SOF11||e===o("WAProgressiveJpegMarkers").MARKERS.SOF13||e===o("WAProgressiveJpegMarkers").MARKERS.SOF15}function h(e){return e===o("WAProgressiveJpegMarkers").MARKERS.TEM||e>=o("WAProgressiveJpegMarkers").MARKERS.RST0&&e<=o("WAProgressiveJpegMarkers").MARKERS.RST7?!1:e!==o("WAProgressiveJpegMarkers").MARKERS.EOI&&e!==o("WAProgressiveJpegMarkers").MARKERS.SOI}l.getProgressiveJpegScanOffsets=p}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(e);return u(t)}function s(e){return e}function u(e){var t=[],n=0;for(var r of e)t.push(r-n),n=r;return t}l.getProgressiveJpegScanLengths=e,l.asProgressiveJpegScanLength=s}),98);
__d("WAServerMediaType",["WAAssertUnreachable"],(function(t,n,r,o,a,i,l){"use strict";var e=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","xma-image","biz-cover-photo","preview","newsletter-music-artwork","newsletter-audio","newsletter-document","newsletter-image","newsletter-gif","newsletter-ptt","newsletter-sticker","newsletter-thumbnail-link","newsletter-video","sticker-pack","thumbnail-sticker-pack","music-artwork","group-history"];function s(e){switch(e){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-music-artwork":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-thumbnail-link":case"newsletter-video":case"sticker-pack":case"thumbnail-sticker-pack":case"music-artwork":case"group-history":return e;default:return null}}function u(e){switch(e){case"Image":return"image";case"Video":return"video";case"Ptt":return"ptt";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"document";case"Text":case"Futureproof":case"Ciphertext":case"Unavailable":case"ExpiredEphemeral":case"Admin":case"Revoked":case"DeleteForMe":case"EphemeralSettingAdmin":case"EphemeralSyncResponse":case"EphemeralSettingChangeFromCurrentDevice":case"AlertICDC":case"GroupInvite":case"SenderKeyDistribution":case"Reaction":case"EditAction":case"ReceiverFetch":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":return null;default:return r("WAAssertUnreachable")(e)}}l.SERVER_MEDIA=e,l.castToServerMediaType=s,l.getMediaType=u}),98);
__d("WABaseProto",[],(function(t,n,r,o,a,i){"use strict";var e="__tu";i.TAGGED_UNION_TAG=e}),66);
__d("WABinary",["WAHex","err"],(function(t,n,r,o,a,i,l){"use strict";var e=65533,s=10,u=new Uint8Array(s),c=new Uint8Array(0),d=(function(){function e(t,n){var r=this;t===void 0&&(t=c),n===void 0&&(n=!1),this.$1=new Uint8Array(0),this.$2=0,this.$4=0,this.write=function(){for(var t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];typeof n=="string"?r.writeString(n):typeof n=="number"?r.writeUint8(n):n instanceof e?r.writeBinary(n):n instanceof ArrayBuffer?r.writeBuffer(n):n instanceof Uint8Array&&r.writeByteArray(n)}},t instanceof ArrayBuffer?(this.$1=new Uint8Array(t),this.$2=this.$4=t.byteLength):t instanceof Uint8Array&&(this.$1=t,this.$2=this.$4=t.length),this.$5=0,this.$6=this.$3=0,this.$7=null,this.$8=n,this.$9=0,this.$10=0}var t=e.prototype;return t.size=function(){return this.$2-this.$3},t.peek=function(t,n){this.$9++;var e=this.$3,r=this.$5;try{return t(this,n)}finally{this.$9--,this.$3=e-(this.$5-r)}},t.advance=function(t){this.$11(t)},t.readWithViewParser=function(t,n,r,o){return n(this.$12(),this.$11(t),t,r,o)},t.readWithBytesParser=function(t,n,r,o){return n(this.$1,this.$11(t),t,r,o)},t.readUint8=function(){return g(this,1,y,!1)},t.readInt8=function(){return g(this,1,y,!0)},t.readUint16=function(t){return t===void 0&&(t=this.$8),g(this,2,C,t)},t.readInt32=function(t){return t===void 0&&(t=this.$8),g(this,4,b,t)},t.readUint32=function(t){return t===void 0&&(t=this.$8),g(this,4,v,t)},t.readInt64=function(t){return t===void 0&&(t=this.$8),g(this,8,S,j,t)},t.readUint64=function(t){return t===void 0&&(t=this.$8),g(this,8,S,K,t)},t.readLong=function(t,n){return n===void 0&&(n=this.$8),g(this,8,S,t,n)},t.readFloat32=function(t){return t===void 0&&(t=this.$8),g(this,4,R,t)},t.readFloat64=function(t){return t===void 0&&(t=this.$8),g(this,8,L,t)},t.readVarInt=function(t){var e=this.size(),n=h(this,0,E,e);return h(this,n,k,t)},t.readBuffer=function(t){return t===void 0&&(t=this.size()),t===0?new ArrayBuffer(0):h(this,t,I)},t.readByteArrayView=function(t){return t===void 0&&(t=this.size()),t===0?new Uint8Array(0):h(this,t,T)},t.readBinary=function(n,r){if(n===void 0&&(n=this.size()),r===void 0&&(r=this.$8),n===0)return new e(void 0,r);var t=h(this,n,T);return new e(t,r)},t.indexOf=function(t){if(t.length===0)return 0;for(var e=this.$1,n=this.$2,r=this.$3,o=0,a=r,i=r;i<n;i++)if(e[i]===t[o]){if(o===0&&(a=i),o++,o===t.byteLength)return i-r-t.byteLength+1}else o>0&&(o=0,i=a);return-1},t.readString=function(t){return h(this,t,D)},t.ensureCapacity=function(t){this.$13(this.$3+t)},t.ensureAdditionalCapacity=function(t){this.$13(this.$4+t)},t.writeToView=function(t,n,r,o){var e=this.$14(t);return n(this.$12(),e,t,r,o)},t.writeToBytes=function(t,n,r,o){var e=this.$14(t);return n(this.$1,e,t,r,o)},t.writeUint8=function(t){G(t,0,256,"uint8"),$(this,1,P,t,!1)},t.writeInt8=function(t){G(t,-128,128,"signed int8"),$(this,1,P,t,!0)},t.writeUint16=function(t,n){n===void 0&&(n=this.$8),G(t,0,65536,"uint16"),x(this,2,N,t,n)},t.writeInt16=function(t,n){n===void 0&&(n=this.$8),G(t,-32768,32768,"signed int16"),x(this,2,M,t,n)},t.writeUint32=function(t,n){n===void 0&&(n=this.$8),G(t,0,4294967296,"uint32"),x(this,4,w,t,n)},t.writeInt32=function(t,n){n===void 0&&(n=this.$8),G(t,-2147483648,2147483648,"signed int32"),x(this,4,A,t,n)},t.writeUint64=function(t,n){n===void 0&&(n=this.$8),G(t,0,18446744073709552e3,"uint64"),x(this,8,F,t,n)},t.writeInt64=function(t,n){n===void 0&&(n=this.$8),G(t,-9223372036854776e3,9223372036854776e3,"signed int64"),x(this,8,F,t,n)},t.writeFloat32=function(t,n){n===void 0&&(n=this.$8),x(this,4,O,t,n)},t.writeFloat64=function(t,n){n===void 0&&(n=this.$8),x(this,8,B,t,n)},t.writeVarInt=function(t){G(t,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var e=t<0,n=e?-t:t,r=Math.floor(n/4294967296),o=n-r*4294967296;e&&(r=~r,o===0?r++:o=-o);var a=H(r,o);$(this,a,W,r,o)},t.writeVarIntFromHexLong=function(t){for(var e=o("WAHex").hexLongIsNegative(t),n=e?o("WAHex").negateHexLong(t):t,r=o("WAHex").hexLongToHex(n),a=0,i=0,l=0;l<o("WAHex").NUM_HEX_IN_LONG;l++)a=a<<4|i>>>28,i=i<<4|o("WAHex").hexAt(r,l);e&&(a=~a,i===0?a++:i=-i);var s=H(a,i);$(this,s,W,a,i)},t.writeBinary=function(t){var e=t.peek(function(e){return e.readByteArrayView()});if(e.length){var n=this.$14(e.length);this.$1.set(e,n)}},t.writeBuffer=function(t){this.writeByteArray(new Uint8Array(t))},t.writeByteArray=function(t){var e=this.$14(t.length);this.$1.set(t,e)},t.writeBufferView=function(t){this.writeByteArray(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},t.writeString=function(t){$(this,_(t),q,t)},t.writeHexLong=function(t,n){n===void 0&&(n=this.$8),x(this,8,U,t,n)},t.writeBytes=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)G(t[r],0,256,"byte");$(this,t.length,V,t)},t.writeAtomically=function(t,n){this.$10++;var e=this.$4,r=this.$5;try{var o=t(this,n);return e=this.$4,r=this.$5,o}finally{this.$10--,this.$4=e-(this.$5-r)}},t.writeWithVarIntLength=function(t,n){var e=this.$4,r=this.writeAtomically(t,n),o=this.$4;this.writeVarInt(o-e);for(var a=this.$4-o,i=this.$1,l=0;l<a;l++)u[l]=i[o+l];for(var s=o-1;s>=e;s--)i[s+a]=i[s];for(var c=0;c<a;c++)i[e+c]=u[c];return r},e.build=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,a=0;a<n.length;a++){var i=n[a];typeof i=="string"?o+=_(i):typeof i=="number"?o++:i instanceof e?o+=i.size():i instanceof ArrayBuffer?o+=i.byteLength:i instanceof Uint8Array&&(o+=i.length)}var l=new e;return l.ensureCapacity(o),l.write.apply(l,arguments),l},t.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))},t.$11=function(t){if(t<0)throw r("err")("ReadError: given negative number of bytes to read");var e=this.$3,n=e+t;if(n>this.$2)throw r("err")(e===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");return this.$3=n,this.$9||(this.$6=n),e},t.$13=function(t){var e=this.$1;if(t<=e.length)return t;var n=this.$6,r=t-n,o=Math.max(r,2*(e.length-n),64),a=new Uint8Array(o);return n?(a.set(e.subarray(n)),this.$5+=n,this.$3-=n,this.$2-=n,this.$4-=n,this.$6=0):a.set(e),this.$1=a,this.$7=null,r},t.$14=function(t){var e=this.$13(this.$4+t),n=this.$4;return this.$4=e,this.$10||(this.$2=e),n},e})(),m="",p=0;function _(e){if(e===m)return p;for(var t=e.length,n=0,r=0;r<t;r++){var o=e.charCodeAt(r);if(o<128)n++;else if(o<2048)n+=2;else if(o<55296||57344<=o&&o<=65535)n+=3;else if(55296<=o&&o<56320&&r+1!==t){var a=e.charCodeAt(r+1);56320<=a&&a<57344?(r++,n+=4):n+=3}else n+=3}return m=e,p=n}function f(e,t,n){var r=t>>21;if(e){var o=t&2097151,a=!!(o||n);return r===0||r===-1&&a}else return r===0}function g(e,t,n,r,o){return e.readWithViewParser(t,n,r,o)}function h(e,t,n,r,o){return e.readWithBytesParser(t,n,r,o)}function y(e,t,n,r){return r?e.getInt8(t):e.getUint8(t)}function C(e,t,n,r){return e.getUint16(t,r)}function b(e,t,n,r){return e.getInt32(t,r)}function v(e,t,n,r){return e.getUint32(t,r)}function S(e,t,n,r,o){var a=e.getInt32(o?t+4:t,o),i=e.getInt32(o?t:t+4,o);return r(a,i)}function R(e,t,n,r){return e.getFloat32(t,r)}function L(e,t,n,r){return e.getFloat64(t,r)}function E(e,t,n,o){for(var a=Math.min(o,s),i=0,l=128;i<a&&l&128;)l=e[t+i++];if(i===s&&l>1)throw r("err")("ParseError: varint exceeds 64 bits");return l&128?i+1:i}function k(e,t,n,r){var o=0,a=0,i=n;n===s&&(i--,a=e[t+i]&1);for(var l=i-1;l>=0;l--)o=o<<7|a>>>25,a=a<<7|e[t+l]&127;return r(o,a)}function I(e,t,n){var r=t+e.byteOffset,o=e.buffer;return r===0&&n===o.byteLength?o:o.slice(r,r+n)}function T(e,t,n){return e.subarray(t,t+n)}function D(t,n,r){for(var o=n+r,a=[],i=null,l=n;l<o;l++){a.length>5e3&&(i||(i=[]),i.push(String.fromCharCode.apply(String,a)),a=[]);var s=t[l]|0;if((s&128)===0)a.push(s);else if((s&224)===192){var u=Q(t,l+1,o);if(u){l++;var c=(s&31)<<6|u&63;c>=128?a.push(c):a.push(e)}else a.push(e)}else if((s&240)===224){var d=Q(t,l+1,o),m=Q(t,l+2,o);if(d&&m){l+=2;var p=(s&15)<<12|(d&63)<<6|m&63;p>=2048&&!(55296<=p&&p<57344)?a.push(p):a.push(e)}else d&&l++,a.push(e)}else if((s&248)===240){var _=Q(t,l+1,o),f=Q(t,l+2,o),g=Q(t,l+3,o);if(_&&f&&g){l+=3;var h=(s&7)<<18|(_&63)<<12|(f&63)<<6|g&63;if(h>=65536&&h<=1114111){var y=h-65536;a.push(55296|y>>10,56320|y&1023)}else a.push(e)}else _&&f?(l+=2,a.push(e)):(_&&l++,a.push(e))}else a.push(e)}var C=String.fromCharCode.apply(String,a);return i?(i.push(C),i.join("")):C}function x(e,t,n,r,o){return e.writeToView(t,n,r,o)}function $(e,t,n,r,o){return e.writeToBytes(t,n,r,o)}function P(e,t,n,r){e[t]=r}function N(e,t,n,r,o){e.setUint16(t,r,o)}function M(e,t,n,r,o){e.setInt16(t,r,o)}function w(e,t,n,r,o){e.setUint32(t,r,o)}function A(e,t,n,r,o){e.setInt32(t,r,o)}function F(e,t,n,r,o){var a=r<0,i=a?-r:r,l=Math.floor(i/4294967296),s=i-l*4294967296;a&&(l=~l,s===0?l++:s=-s),e.setUint32(o?t+4:t,l,o),e.setUint32(o?t:t+4,s,o)}function O(e,t,n,r,o){e.setFloat32(t,r,o)}function B(e,t,n,r,o){e.setFloat64(t,r,o)}function W(e,t,n,r,o){for(var a=r,i=o,l=t+n-1,s=t;s<l;s++)e[s]=128|i&127,i=a<<25|i>>>7,a>>>=7;e[l]=i}function q(e,t,n,r){for(var o=t,a=r.length,i=0;i<a;i++){var l=r.charCodeAt(i);if(l<128)e[o++]=l;else if(l<2048)e[o++]=192|l>>6,e[o++]=128|l&63;else if(l<55296||57344<=l)e[o++]=224|l>>12,e[o++]=128|l>>6&63,e[o++]=128|l&63;else if(55296<=l&&l<56320&&i+1!==a){var s=r.charCodeAt(i+1);if(56320<=s&&s<57344){i++;var u=65536+((l&1023)<<10|s&1023);e[o++]=240|u>>18,e[o++]=128|u>>12&63,e[o++]=128|u>>6&63,e[o++]=128|u&63}else e[o++]=239,e[o++]=191,e[o++]=189}else e[o++]=239,e[o++]=191,e[o++]=189}}function U(e,t,n,r,a){for(var i=o("WAHex").hexLongIsNegative(r),l=o("WAHex").hexLongToHex(r),s=0,u=0,c=0;c<16;c++)s=s<<4|u>>>28,u=u<<4|o("WAHex").hexAt(l,c);i&&(s=~s,u===0?s++:u=-u),e.setUint32(a?t+4:t,s,a),e.setUint32(a?t:t+4,u,a)}function V(e,t,n,r){for(var o=0;o<n;o++)e[t+o]=r[o]}function H(e,t){var n,r;for(e?(n=5,r=e>>>3):(n=1,r=t>>>7);r;)n++,r>>>=7;return n}function G(e,t,n,o){if(typeof e!="number"||e!==e||Math.floor(e)!==e||e<t||e>=n)throw r("err")(typeof e=="string"?'TyperError WriteError: string "'+e+'" is not a valid '+o:"TypeError WriteError: "+String(e)+" is not a valid "+o)}function z(e,t,n){var o=f(e,t,n),a;t>=0?a=t:a=e?t:4294967296+t;var i=n>=0?n:4294967296+n,l=a*4294967296+i;if(!o)throw r("err")("ReadError: integer exceeded 53 bits ("+l+")");return l}function j(e,t){return z(!0,e,t)}function K(e,t){return z(!1,e,t)}function Q(e,t,n){if(t>=n)return 0;var r=e[t]|0;return(r&192)===128?r:0}l.Binary=d,l.numUtf8Bytes=_,l.longFitsInDouble=f,l.parseInt64OrThrow=j,l.parseUint64OrThrow=K}),98);
__d("WAHasProperty",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.default=e}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r,o,a,i,l,s,u){this.names=t,this.fields=n,this.types=r,this.defaults=o,this.meta=a,this.oneofToFields=i,this.fieldToOneof=l,this.reservedTags=s?s.reduce(function(e,t){return e[t]=!0,e},{}):{},this.reservedFields=u?u.reduce(function(e,t){return e[t]=!0,e},{}):{}};function s(t){if(t.internalCompiledSpec)return t.internalCompiledSpec;var n=t.internalSpec;if(!n)throw new Error("Message Class "+String(t)+" does not have internalSpec");var r=t.internalDefaults||{},a=Object.keys(n).filter(function(e){return e!==o("WAProtoConst").KEYS.ONEOF}),i=new Array(a.length),l=[],s=[],c=new Array(a.length),d=n[o("WAProtoConst").KEYS.ONEOF]||{};a.sort(function(e,t){var r=u(n,e),o=u(n,t);return r[0]-o[0]});for(var m=0;m<a.length;m++){var p=a[m],_=u(n,p);c[m]=r[p];var f=_[1],g=_[0];if(l.push(g),s.push(f),(f&o("WAProtoConst").TYPE_MASK)===o("WAProtoConst").TYPES.MESSAGE)i[m]=_[2];else if((f&o("WAProtoConst").TYPE_MASK)===o("WAProtoConst").TYPES.ENUM){var h=_[2];if(typeof h.cast=="function")i[m]=h;else{var y=!0,C=0;for(var b in h)y&&b!==C++&&(y=!1);var v=void 0;if(y){v=[];for(var S=0;S<C;S++)v.push(!0)}else{v={};for(var R in h)v[h[R]]=!0}i[m]=v}}else if((f&o("WAProtoConst").TYPE_MASK)===o("WAProtoConst").TYPES.MAP){if(_.length!==3)throw new Error("Map field "+p+" should have exactly three elements in its internalSpec");i[m]=_[2]}else i[m]=null}var L={},E=function(t){d[t].forEach(function(e){L[e]||(L[e]=[]),L[e].push(t)})};for(var k in d)E(k);var I=n[o("WAProtoConst").KEYS.RESERVED]&&n[o("WAProtoConst").KEYS.RESERVED][o("WAProtoConst").KEYS.RESERVED_TAGS],T=n[o("WAProtoConst").KEYS.RESERVED]&&n[o("WAProtoConst").KEYS.RESERVED][o("WAProtoConst").KEYS.RESERVED_FIELDS],D=new e(a,l,s,c,i,d,L,I,T);return t.internalCompiledSpec=D,D}function u(e,t){var n=e[t];if(n==null)throw new Error("fieldData of "+t+" is missing");return n}l.Spec=e,l.compileSpec=s}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e&o("WAProtoConst").FLAGS.PACKED)return o("WAProtoConst").ENC.BINARY;var t=e&o("WAProtoConst").TYPE_MASK;return t<=o("WAProtoConst").TYPES.ENUM?o("WAProtoConst").ENC.VARINT:t<=o("WAProtoConst").TYPES.DOUBLE?o("WAProtoConst").ENC.BIT64:t<=o("WAProtoConst").TYPES.MESSAGE||t===o("WAProtoConst").TYPES.MAP?o("WAProtoConst").ENC.BINARY:o("WAProtoConst").ENC.BIT32}l.typeToEncType=e}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=Number.MAX_SAFE_INTEGER;function p(e,t){var n=f(e,t);if(n)throw n.reverse(),new TypeError("Message missing required value "+n.join("."))}function _(e,t){p(e,t);var n=v(t,e);if(n)throw n.path.reverse(),new TypeError("Invalid value at "+n.path.join(".")+": "+n.error)}function f(e,t){for(var n=o("WAProtoCompile").compileSpec(e),a=n.names,i=n.types,l=n.meta,s=void 0,u=0;u<i.length&&!s;u++){var c=i[u],d=a[u],m=r("WAHasProperty")(t,d)?t[d]:void 0;if(c&o("WAProtoConst").FLAGS.REQUIRED&&m==null)s=[d];else if((c&o("WAProtoConst").TYPE_MASK)===o("WAProtoConst").TYPES.MESSAGE&&c&o("WAProtoConst").FLAGS.REPEATED&&m!=null){var p=l[u],_=void 0;for(_=0;_<m.length&&!s;_++)s=f(p,m[_]);s&&s.push(d+"["+_+"]")}else(c&o("WAProtoConst").TYPE_MASK)===o("WAProtoConst").TYPES.MESSAGE&&m!=null&&(s=f(l[u],m),s&&s.push(d))}return s}function g(t,n,r){return typeof t=="string"?/^-?0x[0-9a-f]{16}$/i.test(t)?!1:(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long'])),C(t)).color("red"),{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}):h(t,n,r)}function h(e,t,n){return typeof e!="number"||e!==e||Math.floor(e)!==e?(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int'])),C(e)).color("red"),{path:[],error:"value must be an int"}):e<t||e>=n?(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range'])),C(e)).color("red"),{path:[],error:"value is out of range"}):!1}function y(e,t,n){if(!e)return o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""])),C(n),t).color("red"),{path:[],error:"value is invalid"}}function C(e){return typeof e=="string"?'"'+e+'"':Array.isArray(e)?"["+e.join(", ")+"]":""+e}var b=[void 0,function(e){return h(e,-2147483648,2147483648)},function(e){return g(e,-m,m+1)},function(e){return h(e,0,4294967296)},function(e){return g(e,0,m+1)},function(e){return h(e,-2147483648,2147483648)},function(e){return g(e,-m,m+1)},function(e){return y(typeof e=="boolean","boolean",e)},function(e,t){return y(typeof e=="number"&&(t[e]||t.cast(e)!==void 0),"in enum",e)},function(e){return g(e,0,m+1)},function(e){return g(e,-m,m+1)},function(e){return y(typeof e=="number","number",e)},function(e){return y(typeof e=="string","string",e)},function(e){return y(e instanceof ArrayBuffer||e instanceof Uint8Array,"ArrayBuffer or Uint8Array",e)},v,function(e){return h(e,0,4294967296)},function(e){return h(e,-2147483648,2147483648)},function(e){return y(typeof e=="number","number",e)}];function v(e,t){for(var n=o("WAProtoCompile").compileSpec(t),r=n.names,a=n.fields,i=n.types,l=n.meta,s=n.oneofToFields,u=n.fieldToOneof,c=n.reservedTags,m=n.reservedFields,p=void 0,_=function(){var t=r[g],n=i[g],_=e[t],f=n&o("WAProtoConst").TYPE_MASK,h=b[f],y=(n&o("WAProtoConst").TYPE_MASK)===o("WAProtoConst").TYPES.MAP;if(h===void 0&&!y)throw new Error("Can not find the validator for type "+f);if(n&(o("WAProtoConst").FLAGS.PACKED|o("WAProtoConst").FLAGS.REPEATED)&&_!=null)if(!Array.isArray(_))o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array'])),C(_)).color("red"),p={path:[t],error:"repeated field must be array"};else for(var v=l[g],S=0;S<_.length&&!p;S++)p=h(_[S],v),p&&p.path.push(t+"["+S+"]");else if(y&&_!=null){var R=l[g],L=R[0],E=R[1],k=typeof E=="object"?o("WAProtoConst").TYPES.MESSAGE:E,I=b[L],T=b[k];if(I===void 0||T===void 0)throw new Error("Can not find the validator for Map with key type "+L+", value type "+k);for(var D of _){var x=D[0],$=D[1];if(p=I(x,L),p)return p.path.push(t+"'s key ["+x+"]"),{v:p};if(p=T($,E),p)return p.path.push(t+"["+x+"]'s value"),{v:p}}}else if(_!=null){p=h(_,l[g]),p&&p.path.push(t);var P=u[t];P&&P.forEach(function(n){var r=s[n].filter(function(e){return e!==t});r.forEach(function(r){typeof e[r]!="undefined"&&(p={path:[n],error:"oneof '"+n+"' has fields '"+t+"' and '"+r+"' set"})})}),c[a[g]]&&(p={path:[t],error:"tag "+a[g]+" is reserved"}),m[t]&&(p={path:[t],error:"field "+t+" is reserved"})}},f,g=0;g<r.length&&!p;g++)if(f=_(),f)return f.v;return p}l.checkRequirements=p,l.checkValid=_}),98);
__d("decodeProtobuf",["WABaseProto","WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=new(o("WABinary")).Binary(t),r=h(e,n,void 0,!1,!1);return o("WAProtoValidate").checkRequirements(e,r),r}function s(e,t){var n=new(o("WABinary")).Binary(t),r=h(e,n,void 0,!1,!0);return o("WAProtoValidate").checkRequirements(e,r),r}function u(e,t){var n=new(o("WABinary")).Binary(t),r=h(e,n,void 0,!0,!1);return o("WAProtoValidate").checkRequirements(e,r),r}function c(e){return r("WAHasProperty")(e,"$$unsafeUnknownFields")?e.$$unsafeUnknownFields:null}function d(e,t,n){if(e!==o("WAProtoUtils").typeToEncType(t))throw new Error("FormatError: "+n+" encoded with wire type "+e)}function m(e,t,n){switch(t){case o("WAProtoConst").TYPES.INT32:return p(n,-2147483648,2147483648,e,o("WABinary").parseInt64OrThrow);case o("WAProtoConst").TYPES.INT64:return n.readVarInt(_);case o("WAProtoConst").TYPES.UINT32:return p(n,0,4294967296,e,o("WABinary").parseUint64OrThrow);case o("WAProtoConst").TYPES.UINT64:return n.readVarInt(f);case o("WAProtoConst").TYPES.SINT32:{var r=p(n,0,4294967296,e,o("WABinary").parseInt64OrThrow);return r&1?~(r>>>1):r>>>1}case o("WAProtoConst").TYPES.SINT64:return n.readVarInt(g);case o("WAProtoConst").TYPES.BOOL:return!!p(n,0,2,e,o("WABinary").parseUint64OrThrow);case o("WAProtoConst").TYPES.ENUM:return n.readVarInt(o("WABinary").parseInt64OrThrow);case o("WAProtoConst").TYPES.FIXED64:return n.readLong(f,!0);case o("WAProtoConst").TYPES.SFIXED64:return n.readLong(_,!0);case o("WAProtoConst").TYPES.DOUBLE:return n.readFloat64(!0);case o("WAProtoConst").TYPES.STRING:return n.readString(n.readVarInt(o("WABinary").parseUint64OrThrow));case o("WAProtoConst").TYPES.BYTES:return n.readBuffer(n.readVarInt(o("WABinary").parseUint64OrThrow));case o("WAProtoConst").TYPES.FIXED32:return n.readUint32(!0);case o("WAProtoConst").TYPES.SFIXED32:return n.readInt32(!0);case o("WAProtoConst").TYPES.FLOAT:return n.readFloat32(!0)}}function p(e,t,n,r,o){var a=e.readVarInt(o);if(a<t||a>=n)throw new Error("FormatError: "+r+" encoded with out-of-range value "+a);return a}function _(e,t){var n=o("WABinary").longFitsInDouble(!0,e,t);if(n){var r=y(t);return e*4294967296+r}else{var a=e<0,i;a?i=t===0?-e:~e:i=e;var l=a?-t:t;return o("WAHex").createHexLongFrom32Bits(i,l,a)}}function f(e,t){var n=o("WABinary").longFitsInDouble(!1,e,t);if(n){var r=y(e),a=y(t);return r*4294967296+a}else return o("WAHex").createHexLongFrom32Bits(e,t)}function g(e,t){var n=e>>>1,r=e<<31|t>>>1;return t&1&&(n=~n,r=~r),_(n,r)}function h(e,t,n,r,a){var i,l=o("WAProtoCompile").compileSpec(e),s=l.names,u=l.fields,c=l.types,_=l.meta,f=l.oneofToFields,g=l.fieldToOneof,y=l.reservedTags,C=l.reservedFields,b=e.internalDefaults,v=n||babelHelpers.extends({},b)||{};v.$$unknownFieldCount=(i=n==null?void 0:n.$$unknownFieldCount)!=null?i:0;for(var S=0;S<s.length;S++)c[S]&o("WAProtoConst").FLAGS.REPEATED?v[s[S]]=[]:c[S]===(o("WAProtoConst").TYPES.MAP&o("WAProtoConst").TYPE_MASK)&&(v[s[S]]=new Map);for(var R=0,L=u.length>0,E=u[0],k=function(){var e=p(t,0,4294967296,"field and enc type",o("WABinary").parseInt64OrThrow),n=e&7,i=e>>>3;if(L&&i!==E){var l=R;do++R===u.length&&(R=0),E=u[R];while(i!==E&&R!==l)}if(L&&i===E){var b=s[R],S=c[R];d(n,S,b);var k=S&o("WAProtoConst").TYPE_MASK,I=_[R];if(S&o("WAProtoConst").FLAGS.PACKED)for(var T=t.readVarInt(o("WABinary").parseUint64OrThrow),D=t.readBinary(T);D.size();){var x=m(b,k,D);(k!==o("WAProtoConst").TYPES.ENUM||I[x]||(I.cast==null?void 0:I.cast(x))!==void 0)&&v[b].push(x)}else if(k===o("WAProtoConst").TYPES.MESSAGE){var $=t.readVarInt(o("WABinary").parseUint64OrThrow),P=t.readBinary($);if(S&o("WAProtoConst").FLAGS.REPEATED)v[b].push(h(I,P,void 0,r,a));else{var N=v[b];v[b]=h(I,P,N,r,a)}}else if(k===o("WAProtoConst").TYPES.MAP){for(var M=t.readVarInt(o("WABinary").parseUint64OrThrow),w=t.readBinary(M),A,F,O=0;O<_[R].length;O++){var B=p(w,0,4294967296,"map field and enc type",o("WABinary").parseInt64OrThrow),W=B&7,q=B>>>3,U=void 0;switch(W){case o("WAProtoConst").ENC.VARINT:U=w.readVarInt(o("WABinary").parseInt64OrThrow);break;case o("WAProtoConst").ENC.BIT64:U=w.readBinary(8);break;case o("WAProtoConst").ENC.BINARY:{var V=I[O];if(V===o("WAProtoConst").TYPES.BYTES||V===o("WAProtoConst").TYPES.STRING)U=m(b,V,w);else{var H=w.readVarInt(o("WABinary").parseUint64OrThrow),G=w.readBinary(H);U=h(V,G,void 0,r,a)}break}case o("WAProtoConst").ENC.BIT32:U=w.readBinary(4);break}q===1?A=U:F=U}v[b].set(A,F)}else{var z=m(b,k,t);(k!==o("WAProtoConst").TYPES.ENUM||I[z]||(I.cast==null?void 0:I.cast(z))!==void 0)&&(S&o("WAProtoConst").FLAGS.REPEATED?v[b].push(z):v[b]=z)}var j=g[b];j&&typeof v[b]!="undefined"&&j.forEach(function(e){var t=f[e].filter(function(e){return e!==b});if(t.forEach(function(e){delete v[e]}),a){var n;v[e]=(n={type:b,value:v[b]},n[o("WABaseProto").TAGGED_UNION_TAG]=!0,n),delete v[b]}}),(y[i]||C[b])&&delete v[b]}else if(v.$$unknownFieldCount++,r){v.$$unsafeUnknownFields||(v.$$unsafeUnknownFields={});var K;switch(n){case o("WAProtoConst").ENC.VARINT:K=t.readVarInt(o("WABinary").parseInt64OrThrow);break;case o("WAProtoConst").ENC.BIT64:K=t.readBinary(8);break;case o("WAProtoConst").ENC.BINARY:K=t.readBinary(t.readVarInt(o("WABinary").parseUint64OrThrow));break;case o("WAProtoConst").ENC.BIT32:K=t.readBinary(4);break}v.$$unsafeUnknownFields[i]=K}else n===o("WAProtoConst").ENC.VARINT?t.readVarInt(o("WABinary").parseInt64OrThrow):n===o("WAProtoConst").ENC.BIT64?t.advance(8):n===o("WAProtoConst").ENC.BINARY?t.advance(t.readVarInt(o("WABinary").parseUint64OrThrow)):n===o("WAProtoConst").ENC.BIT32&&t.advance(4)};t.size();)k();return v}function y(e){return e>=0?e:4294967296+e}l.decodeProtobuf=e,l.decodeProtobufWithTaggedUnions=s,l.decodeProtobufWithUnknowns=u,l.getUnknownFields=c,l.assertEncType=d,l.readValue=m,l.readBoundVarInt=p}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(t,n,r,o,a,i,l){"use strict";var e=void 0,s=128;function u(t,n,r){return r===void 0&&(r=new(o("WABinary")).Binary),o("WAProtoValidate").checkValid(t,n),b(r,n,t),e=void 0,r}function c(){return e!==void 0?"Last encoded value for "+e:"No information known"}function d(e,t){e.writeVarInt(t)}function m(e,t){if(typeof t=="number"&&t<4503599627370496&&t>=-4503599627370496)e.writeVarInt(t>=0?2*t:2*-t-1);else{var n=new(o("WABinary")).Binary,r;typeof t=="number"?(r=t<0,n.writeVarInt(r?-t:t)):(r=o("WAHex").hexLongIsNegative(t),n.writeVarIntFromHexLong(r?o("WAHex").negateHexLong(t):t));var a=n.peek(function(){return n.readByteArrayView()}),i=a.byteLength;if(r){var l=0,u;do u=a[l],a[l]=u&s|(u&127)-1&127,l++;while(a[l-1]===255)}for(var c=r?1:0,d=0;d<i;d++){var m=a[d],p=m&s|(m&63)<<1|c;c=(m&64)>>6,a[d]=p}c===1&&(a[i-1]|=s,n.writeInt8(1)),e.writeBinary(n)}}function p(e,t){typeof t=="number"?e.writeVarInt(t):e.writeVarIntFromHexLong(t)}function _(e,t){e.writeVarInt(o("WABinary").numUtf8Bytes(t)),e.writeString(t)}function f(e,t){e.writeVarInt(t.byteLength),e.writeBuffer(t)}function g(e,t,n){e.writeWithVarIntLength(function(e,t){return b(e,t,n)},t)}var h=[void 0,d,p,d,p,m,m,function(e,t){e.writeVarInt(t?1:0)},d,function(e,t){typeof t=="number"?e.writeUint64(t,!0):e.writeHexLong(t,!0)},function(e,t){typeof t=="number"?e.writeInt64(t,!0):e.writeHexLong(t,!0)},function(e,t){e.writeFloat64(t,!0)},_,f,g,function(e,t){e.writeUint32(t,!0)},function(e,t){e.writeInt32(t,!0)},function(e,t){e.writeFloat32(t,!0)}],y=function(t){if(t==null)return;var e=t;function n(t,n){for(var r=0;r<n.length;r++)e(t,n[r])}return function(e,t){e.writeWithVarIntLength(n,t)}},C=h.map(y);function b(t,n,r){for(var a=o("WAProtoCompile").compileSpec(r),i=a.names,l=a.fields,s=a.types,u=a.meta,c=r.internalDefaults,d=0;d<i.length;d++){var m=i[d],p=n[m];if(p==null&&c&&(p=c[m]),p!=null){e=m;var _=l[d],f=s[d],g=f&o("WAProtoConst").TYPE_MASK,y=u[d],b=_*8|o("WAProtoUtils").typeToEncType(f);if(f&o("WAProtoConst").FLAGS.PACKED){if(p.length>0){t.writeVarInt(b);var v=C[g];v(t,p,y)}}else if(f&o("WAProtoConst").FLAGS.REPEATED)for(var S=0;S<p.length;S++){t.writeVarInt(b);var R=h[g];R(t,p[S],y)}else if(g===o("WAProtoConst").TYPES.MAP)for(var L of p){var E=L[0],k=L[1];t.writeVarInt(b);var I=y[0],T=y[1],D=typeof T=="object"?o("WAProtoConst").TYPES.MESSAGE:T,x=h[I],$=h[D];if(x==null||$==null)throw new Error("Invalid encoder for map key/value");var P=new(o("WABinary")).Binary,N=8|o("WAProtoUtils").typeToEncType(I);P.writeVarInt(N),x(P,E,I);var M=16|o("WAProtoUtils").typeToEncType(D);P.writeVarInt(M),$(P,k,T),t.writeVarInt(P.size()),t.writeBinary(P)}else{t.writeVarInt(b);var w=h[g];w(t,p,y)}}}}l.encodeProtobuf=u,l.encodeErrorInfo=c}),98);
__d("WAMediaUtils",["WACryptoDependencies","WADirectPath","WALongInt","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAResultOrError","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","directPath","objectId"],s=["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails","size","lastDownloadAttemptTimestamp","sidecar","directPath","objectId"];function u(){var e=new Uint8Array(32);return o("WACryptoDependencies").getCrypto().getRandomValues(e),e.buffer}function c(e){return e}function d(){return u()}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}function g(e,t){var n=o("decodeProtobuf").decodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,t),r=n.fileSha256,a=n.mediaKey,i=n.fileEncSha256,l=n.directPath,s=n.mediaKeyTimestamp,u=n.sidecar,c=n.objectId,d=n.fbid,m=n.serverMediaType,_=n.downloadableThumbnail,f=n.filename,g=n.progressiveJpegDetails,h=n.size,y=o("WADirectPath").validateDirectPath(l);return{fileSha256:r,mediaKey:a,fileEncSha256:i,directPath:y.success?y.value:null,mediaKeyTimestamp:o("WALongInt").maybeNumberOrThrowIfTooLarge(s),sidecar:u&&u,objectId:c,fbid:d,downloadableThumbnail:_==null?void 0:{directPath:_.directPath,fileEncSha256:_.fileEncSha256,fileSha256:_.fileSha256,mediaKey:_.mediaKey,mediaKeyTimestamp:o("WALongInt").maybeNumberOrThrowIfTooLarge(_.mediaKeyTimestamp),objectId:_.objectId},serverMediaType:m,filename:f,progressiveJpegDetails:g&&L(g),size:h==null?void 0:o("WALongInt").numberOrThrowIfTooLarge(h)}}function h(e){var t=e.fileSha256,n=e.fileEncSha256,r=e.mediaKey,a=e.directPath,i=e.mediaKeyTimestamp,l=e.serverMediaType,s=e.objectId,u=e.fbid,c=e.downloadableThumbnail,d=e.filename,m=e.progressiveJpegDetails,p=e.size,_=o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:t,fileEncSha256:n,mediaKey:r,directPath:a,mediaKeyTimestamp:i,serverMediaType:l,objectId:s,fbid:u,downloadableThumbnail:c,filename:d,progressiveJpegDetails:m,size:p});return _.readByteArrayView()}function y(e){return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,e).readByteArrayView()}function C(e,t){return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers.extends({},e,{directPath:t})).readByteArrayView()}function b(e,t){return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers.extends({},e,{downloadableThumbnail:babelHelpers.extends({},e.downloadableThumbnail,{directPath:t})})).readByteArrayView()}function v(e,t){var n=babelHelpers.extends({},e,{fbid:t});return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,n).readByteArrayView()}function S(e,t){var n=babelHelpers.extends({},e,{objectId:t});return o("encodeProtobuf").encodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,n).readByteArrayView()}function R(t){if(t==null)return null;var n=t.$$unknownFieldCount,r=t.directPath,a=t.objectId,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=o("WADirectPath").validateDirectPath(r);return babelHelpers.extends({},i,{directPath:l.success?l.value:null,objectId:a,mediaKey:t.mediaKey&&t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp==null?null:o("WATimeUtils").castToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(t.mediaKeyTimestamp))})}function L(e){return e==null||e.scanLengths==null||e.sidecar==null?null:{sidecar:e.sidecar,scanLengths:e.scanLengths.map(function(e){return o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(o("WALongInt").numberOrThrowIfTooLarge(e))})}}function E(e){var t=o("decodeProtobuf").decodeProtobuf(o("WAMediaEntryData.pb").MediaEntrySpec,e),n=t.serverMediaType,r=t.mediaKey,a=t.mediaKeyTimestamp,i=t.uploadToken,l=t.downloadableThumbnail,u=t.progressiveJpegDetails,d=t.size,p=t.lastDownloadAttemptTimestamp,_=t.sidecar,f=t.directPath,g=t.objectId,h=babelHelpers.objectWithoutPropertiesLoose(t,s),y=null;u!=null&&u.scanLengths!=null&&u.sidecar!=null&&(y={sidecar:u.sidecar,scanLengths:u.scanLengths.map(function(e){return o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(o("WALongInt").numberOrThrowIfTooLarge(e))})});var C=o("WADirectPath").validateDirectPath(f);return babelHelpers.extends({},h,{objectId:g,directPath:C.success?C.value:void 0,sidecar:_,serverMediaType:n==null?null:o("WAServerMediaType").castToServerMediaType(n),mediaKey:r&&r,mediaKeyTimestamp:a==null?null:o("WATimeUtils").castToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(a)),uploadToken:i&&i,progressiveJpegDetails:y,downloadableThumbnail:l&&R(l),size:o("WALongInt").maybeNumberOrThrowIfTooLarge(d),lastDownloadAttemptTimestamp:p==null?null:o("WATimeUtils").castToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(p))})}function k(e){var t=e.directPath,n=e.fileEncSha256,r=e.fileSha256,a=e.mediaKey,i=e.serverMediaType;return a==null?o("WAResultOrError").makeError("media-entry-invalid-media-key"):t==null?o("WAResultOrError").makeError("media-entry-invalid-direct-path"):n==null?o("WAResultOrError").makeError("media-entry-invalid-file-enc-sha256"):r==null?o("WAResultOrError").makeError("media-entry-invalid-file-sha256"):i==null?o("WAResultOrError").makeError("media-entry-invalid-server-media-type"):o("WAResultOrError").makeResult(babelHelpers.extends({},e,{directPath:t,fileEncSha256:n,fileSha256:r,mediaKey:a,serverMediaType:i}))}function I(e){var t=e.directPath,n=e.fileEncSha256,r=e.fileSha256,a=e.mediaKey,i=[];return a==null?i.push("media-entry-invalid-media-key"):t==null?i.push("media-entry-invalid-direct-path"):n==null?i.push("media-entry-invalid-file-enc-sha256"):r==null&&i.push("media-entry-invalid-file-sha256"),a!=null&&t!=null&&n!=null&&r!=null?o("WAResultOrError").makeResult(babelHelpers.extends({},e,{directPath:t,fileEncSha256:n,fileSha256:r,mediaKey:a})):o("WAResultOrError").makeError(i)}function T(e){var t="image/jpeg";switch(e){case"image":t="image/jpeg";break;case"ptt":t="audio/wav";break;case"video":t="video/mp4";break;case"gif":t="image/gif";break;case"sticker":t="image/webp";break;case"preview":t="image/jpeg";break;case"document":t="application/octet-stream";break;case"xma-image":t="image/jpeg";break;default:throw r("err")("Unsupported server media type: "+e)}return t}var D=function(){return"TransformStream"in self};l.createMediaKey=u,l.castToMediaKey=c,l.createUploadToken=d,l.castToUploadToken=m,l.castToStreamingSidecar=p,l.stringToDeliveryObjectId=_,l.stringToBackupEntFbid=f,l.mediaEntryDataToRawData=g,l.rawDataToMediaEntry=h,l.encodeMediaEntryForUpload=y,l.encodeMediaEntryWithUpdatedPath=C,l.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=b,l.encodeMediaEntryWithUpdatedFbid=v,l.encodeMediaEntryWithUpdatedObjectId=S,l.convertMediaDownloadableThumbnailToDownloadableThumbnail=R,l.decodeMediaEntryData=E,l.validateDecodedMediaEntryForDownload=k,l.validateDownloadableThumbnailForDownload=I,l.getMimeTypeFromServerMediaType=T,l.isTransformStreamSupported=D}),98);
__d("MAWDbMedia",["I64","MAWMsgType","WAMediaUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={DOCUMENT_FILE:(s=o("MAWMsgType")).MSG_TYPE.DOCUMENT_FILE,GIF:s.MSG_TYPE.GIF,IMAGE:s.MSG_TYPE.IMAGE,PTT:s.MSG_TYPE.PTT,STICKER:s.MSG_TYPE.STICKER,VIDEO:s.MSG_TYPE.VIDEO};function c(e){return e}function d(e){return e}function m(t){return(e||(e=o("I64"))).of_float(t)}function p(t){return(e||(e=o("I64"))).to_float(t)}function _(e,t){var n=e.mediaEntries.get(t);if(n==null)return o("WAResultOrError").makeError("missing-media-entry");var r=o("WAMediaUtils").decodeMediaEntryData(n),a=r.serverMediaType;return a==null?o("WAResultOrError").makeError("missing-server-media-type"):o("WAResultOrError").makeResult(a)}l.MEDIA_TYPE=u,l.convertNumberToMediaId=c,l.convertToMediaId64=d,l.convertMediaIdToMediaId64=m,l.convertMediaId64ToMediaId=p,l.getServerMediaType=_}),98);
__d("MAWHexUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.toString(16);return(t.length-1).toString(16)+t}function s(e){for(var t=1;t<e.length;t++){var n=e.substring(0,t),o=e.substring(t);if(o.length-1===parseInt(n,16))return parseInt(o,16)}throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert the order-preserving-hex back to number")}l.orderPreservingHex=e,l.reverseOrderPreservingHex=s}),98);
__d("WAMsg",["WAAssertUnreachable","WAJids","WAMsgType","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.chat,r=e.externalId;return n+"_"+r+"_"+t}function s(e){switch(e.type){case o("WAMsgType").MSG_TYPE.TEXT:case o("WAMsgType").MSG_TYPE.IMAGE:case o("WAMsgType").MSG_TYPE.VIDEO:case o("WAMsgType").MSG_TYPE.PTT:case o("WAMsgType").MSG_TYPE.GIF:case o("WAMsgType").MSG_TYPE.STICKER:case o("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return{author:e.id.author,deleteTs:e.deleteTs,ephemeralSetting:e.ephemeralSetting,expirationTs:e.expirationTs,externalId:e.id.externalId,sentTs:e.sentTs,serverTs:e.serverTs,ts:e.ts};case o("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("WAMsgType").MSG_TYPE.UNAVAILABLE:return{author:e.id.author,externalId:e.id.externalId,sentTs:e.sentTs,ts:e.ts};default:return e.type,null}}function u(e){var t=s(e);if(t==null)return null;switch(e.type){case o("WAMsgType").MSG_TYPE.TEXT:return babelHelpers.extends({},t,{msgContent:e.msgContent,type:o("WAMsgType").MSG_TYPE.TEXT});case o("WAMsgType").MSG_TYPE.IMAGE:return babelHelpers.extends({},t,{mediaId:e.mediaId,type:o("WAMsgType").MSG_TYPE.IMAGE});case o("WAMsgType").MSG_TYPE.VIDEO:return babelHelpers.extends({},t,{mediaId:e.mediaId,type:o("WAMsgType").MSG_TYPE.VIDEO});case o("WAMsgType").MSG_TYPE.PTT:return babelHelpers.extends({},t,{mediaId:e.mediaId,type:o("WAMsgType").MSG_TYPE.PTT});case o("WAMsgType").MSG_TYPE.STICKER:return babelHelpers.extends({},t,{mediaId:e.mediaId,type:o("WAMsgType").MSG_TYPE.STICKER});case o("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return babelHelpers.extends({},t,{type:o("WAMsgType").MSG_TYPE.RECEIVER_FETCH});case o("WAMsgType").MSG_TYPE.GIF:return babelHelpers.extends({},t,{mediaId:e.mediaId,type:o("WAMsgType").MSG_TYPE.PTT});case o("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},t,{type:o("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL});case o("WAMsgType").MSG_TYPE.UNAVAILABLE:return babelHelpers.extends({},t,{type:o("WAMsgType").MSG_TYPE.UNAVAILABLE});case o("WAMsgType").MSG_TYPE.REVOKED:case o("WAMsgType").MSG_TYPE.REACTION:case o("WAMsgType").MSG_TYPE.ICDC_ALERT:case o("WAMsgType").MSG_TYPE.ADMIN:case o("WAMsgType").MSG_TYPE.FUTUREPROOF:case o("WAMsgType").MSG_TYPE.CIPHERTEXT:case o("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("WAMsgType").MSG_TYPE.GROUP_INVITE:case o("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case o("WAMsgType").MSG_TYPE.DOCUMENT_FILE:case o("WAMsgType").MSG_TYPE.EDIT_ACTION:return null;default:return r("WAAssertUnreachable")(e.type)}}function c(e){if(o("WAJids").isAuthorSystem(e.author))throw r("err")("Cannot send @system messages");return{author:e.author,chat:e.chat,externalId:e.externalId}}l.craftWAMsgIdString=e,l.asQuotedMsg=u,l.asProtocolMsgId=c}),98);
__d("MAWDbMsg",["FBLogger","I64","MAWDbChatId__UNSAFE_DO_NOT_USE","MAWHexUtils","MAWMsgType","WAMsg"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=[(s=o("MAWMsgType")).MSG_TYPE.REVOKED,s.MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,s.MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,s.MSG_TYPE.GROUP_INVITE,s.MSG_TYPE.SK_DISTRIBUTION,s.MSG_TYPE.RAVEN_ACTION],c=0,d=Number.MAX_SAFE_INTEGER;function m(e){return e}function p(e){return e}function _(e){return D(e)?e:null}function f(e){return e}function g(e){return e}var h="futureproof",y="futureproof_spam",C="spam",b="toBeRead",v="e2ee_admin_msg",S="cutover_admin_msg";function R(e,t){return o("MAWHexUtils").orderPreservingHex(e)+"_"+o("MAWHexUtils").orderPreservingHex(t)+"_m"}function L(e,t,n){var r=o("MAWHexUtils").orderPreservingHex(e)+"_"+o("MAWHexUtils").orderPreservingHex(t)+"_m";return r+"_"+n.externalId}function E(e,t){return o("MAWHexUtils").orderPreservingHex(e)+"_"+o("MAWHexUtils").orderPreservingHex(t)+"_um"}function k(e,t){return o("MAWHexUtils").orderPreservingHex(e)+"_"+o("MAWHexUtils").orderPreservingHex(t)+"_r"}function I(e,t,n){var r=n!=null?n:o("MAWHexUtils").orderPreservingHex(Math.floor(Math.random()*1e4));return o("MAWHexUtils").orderPreservingHex(e)+"_"+o("MAWHexUtils").orderPreservingHex(t)+"_DEBUG_"+r+")}"}function T(e){var t=e.split("_");return t.length>=3&&t[0]!==""&&t[1]!==""&&t[2]==="m"}function D(e){var t=/^(.*)\..*?$/,n=t.test(e);return T(e)||n}function x(e){return o("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(e,b)}function $(e){return o("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(e,v)}function P(e){return o("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(e,S)}function N(e){if(!T(e))return 0;var t=e.split("_"),n=t[0],r=t[1];return o("MAWHexUtils").reverseOrderPreservingHex(r)}function M(e){return o("MAWHexUtils").orderPreservingHex(e)+"_"}function w(e){return o("MAWHexUtils").orderPreservingHex(e)+"_z"}function A(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.XMA:return!0;case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1}throw r("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isXMAMsg check: "%s"',e.type)}function F(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RAVEN:return!0;case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1}throw r("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isMediaMsg check: "%s"',e.type)}function O(e){return e.type===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH}function B(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:return!0;case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1;default:return r("FBLogger")("messenger_web").mustfix('Invalid msg type for isPhotoOrVideoMediaMsg check: "%s"',e.type),!1}}function W(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return!0;case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1;default:return r("FBLogger")("messenger_web").mustfix('Invalid msg type for isDocumentFileMediaMsg check: "%s"',e.type),!1}}function q(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!0;case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case o("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case o("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw r("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isContentMsg check: "%s"',e.type)}function U(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case o("MAWMsgType").MSG_TYPE.EDIT_ACTION:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1}throw r("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: "%s"',e.type)}function V(e){return G(e.type)}function H(e){return e.type===o("MAWMsgType").MSG_TYPE.ADMIN}function G(e){return e==="EphemeralSyncResponse"||e==="EphemeralSettingChangeFromCurrentDevice"||e==="GroupInvite"||e==="SenderKeyDistribution"||e==="RavenAction"||e==="EditAction"}function z(e){return e==="RavenAction"}function j(e){return e.originalTs!=null?e.originalTs:K(e)}function K(e){return e.serverTs!=null?e.serverTs:e.ts}function Q(e){return e.sortOrderMs!=null?e.sortOrderMs:K(e)*1e3}function X(e,t){return e.serverTs!=null?Math.max(t+1,e.serverTs*1e3):t+1}function Y(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.TEXT:return e.msgContent;case o("MAWMsgType").MSG_TYPE.EDIT_ACTION:return e.editMsgContent;case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return}throw r("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for getMsgContent check: "%s"',e.type)}function J(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}function Z(t){return(e||(e=o("I64"))).to_float(t)}l.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=u,l.MIN_MSG_SORT_ORDER=c,l.MAX_MSG_SORT_ORDER=d,l.toCachedMsgId__UNSAFE_DO_NOT_USE=m,l.toMsgId__UNSAFE_DO_NOT_USE=p,l.toMsgId=_,l.stanzaIdToMsgId=f,l.instamadilloMsgIdToMsgId=g,l.FUTUREPROOF_ALT_INDEX=h,l.FUTUREPROOF_SPAM_ALT_INDEX=y,l.SPAM_ALT_INDEX=C,l.craftMsgId__DEPRECATED=R,l.craftMsgIdV2=L,l.craftUnrenderedMsgId=E,l.craftReactionId=k,l.craftDebugMsgId=I,l.isValidMsgId=D,l.craftToBeReadAltIndex=x,l.craftE2eeAdminMsgAltIndex=$,l.craftCutoverAdminMsgAltIndex=P,l.getInChatMsgIdFromMsgId=N,l.msgIdsInChatLowerBound=M,l.msgIdsInChatUpperBound=w,l.isXMAMsg=A,l.isMediaMsg=F,l.isReceiverFetchStickerMsg=O,l.isPhotoOrVideoMediaMsg=B,l.isDocumentFileMediaMsg=W,l.isContentMsg=q,l.isMsgEligibleForTriggeringEphemeralSyncResponse=U,l.isUnrenderedMsg=V,l.isAdminMsg=H,l.isUnrenderedMsgType=G,l.isRavenActionMsgType=z,l.getOriginalTsFromMsg=j,l.getCanonicalTsFromMsg=K,l.getSortOrderWithFallback=Q,l.getSortOrderFromPrevious=X,l.getMsgContent=Y,l.getWAMsgId=J,l.convertMsgRowId64=Z}),98);
__d("MAWEphemeralMsgAutoResetSystemId",[],(function(t,n,r,o,a,i){"use strict";var e="-111111",l=e;i.default=l}),66);
__d("MAWExternalId",["I64","Random","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=131071,u=null,c=0;function d(){var e=u,t=Date.now();if(e==null||p(e)!==p(t))return u=t,c=0,t;var n=t+100*(c+1),r=g(t),o=g(n);return r==null||o==null||r>o?t:(c++,n)}function m(e){return new Date(e).getTime()>0}function p(e){return Math.floor(e/100)*100}function _(e){return Math.floor(r("Random").random()*e)}function f(){var t=d();return o("WAStanzaUtils").toStanzaId((e||(e=o("I64"))).to_string(e.and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(e.of_float(_(s)),e.of_float(s))),e.max_int)))}function g(e){return m(e)?Math.floor(Number(e)%1e5/100):null}l.generateExternalId=f,l.getThreeMostSignificantDigitsForSortOrderTimestamp=g}),98);
__d("MAWFrontendMediaUtils",["MAWDbMedia"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(e==="image/gif")return{mediaType:o("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(e==="image/webp"&&t!==!0)return{mediaType:o("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};var r=n!=null?n:e.split("/")[0];switch(r){case"image":return t===!0?{mediaType:o("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"xma-image"}:{mediaType:o("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:o("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:o("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};case"application":default:return{mediaType:o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:"document"}}}l.getMediaTypeAndServerMediaTypeFromBlob=e}),98);
__d("WALRUMap",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){var t=e.max;this.$1=new Map,this.$2=t}var t=e.prototype;return t.has=function(t){return this.$1.has(t)},t.get=function(t){return this.$1.get(t)},t.set=function(t,n){if(this.$1.delete(t),this.$1.set(t,n),this.$1.size>this.$2){var e=this.$1.keys().next().value;e!=null&&this.$1.delete(e)}},t.delete=function(t){this.$1.delete(t)},t.clear=function(){this.$1.clear()},t.size=function(){return this.$1.size},e})();i.LRUMap=e}),66);
__d("WARandomHex",["WACryptoDependencies","WAHex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=new Uint8Array(e);return o("WACryptoDependencies").getCrypto().getRandomValues(t),o("WAHex").toHex(t)}l.randomHex=e}),98);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WALRUMap","WARandomHex","WATimeUtils","emptyFunction","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return new(e||(e=n("Promise")))(function(e,n){t.onsuccess=e,t.onerror=n})}function u(e){return s(e).then(function(e){return e.target.result})}function c(t,r,a){return new(e||(e=n("Promise")))(function(e,n){var i=t(o("MAWTransactionMode").READONLY).index(r),l=i.openCursor(IDBKeyRange.only(a)),s=[];l.onsuccess=function(t){var n=t.target.result;if(!n){e(s);return}s.push(n.value),n.continue()},l.onerror=function(e){return n(e)}})}var d=new(o("WALRUMap")).LRUMap({max:100});function m(t,r){var a=r.args,i=r.scheduleConfig,l=r.type,s=r.uniqKey,d=r.version,m=d===void 0?1:d,_=JSON.stringify([l,s!=null?s:o("WARandomHex").randomHex(32)]),f={backedOffCount:0,current:a,original:a,scheduleConfig:i,startTime:o("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:l,uniqKey:_,version:m,waitUntil:null},g=function(){var e,n=t().add(f),r=u(n);if(f.uniqKey==null&&typeof((e=n.transaction)==null?void 0:e.commit)=="function")try{n.transaction.commit()}catch(e){}return r.then(function(e){return{id:e,newlyCreated:!0}})};return s!=null?c(t,"uniqKey",_).then(function(r){if(r.length===0)return g();var o=[],a=null;return r.forEach(function(e){e.step!=="$finished"?a=e:o.push(p(t,e.jobId))}),(e||(e=n("Promise"))).all(o).then(function(){return a!=null?{id:a.jobId,newlyCreated:!1}:g()})}):g()}function p(e,t){return u(e().delete(t))}function _(e,t){return u(e().get(t))}function f(e,t){return u(e().put(t))}function g(e){return u(e().getAll())}function h(t){try{return s(t().clear()).then(r("emptyFunction"))}catch(t){var o=r("getErrorSafe")(t);if(o.name==="NotFoundError")return(e||(e=n("Promise"))).resolve();throw o}}l.recentFinishedJobsCache=d,l.maybeCreateJob=m,l.deletePersistedJob=p,l.readPersistedJob=_,l.updatePersistedJob=f,l.readAllPersistedJobs=g,l.clearJobs=h}),98);
__d("MAWKeychainUtil",[],(function(t,n,r,o,a,i){"use strict";function e(e){return self.crypto.getRandomValues(new Uint8Array(e))}function l(e){var t=e.reduce(function(e,t){return e+t.byteLength},0),n=new Uint8Array(t);return e.reduce(function(e,t){return n.set(new Uint8Array(t),e),e+t.byteLength},0),n.buffer}function s(e,t){return new Uint8Array([e,t]).buffer}function u(e){var t=e.length;if(t>0&&t%2===0&&/^[\da-f]+$/gi.test(e)){for(var n=[],r=0,o=t/2;r<o;++r){var a=parseInt(e.substring(r*2,r*2+2),16);n.push(a)}return new Uint8Array(n)}else return null}i.getBufferWithRandomValuesFromLength=e,i.mergeBuffers=l,i.makeAAD=s,i.fromHexString=u}),66);
__d("MAWSubtleCrypto",[],(function(t,n,r,o,a,i){var e=self.crypto,l=e&&(e.subtle||e.webkitSubtle||e.subtle);i.MAWSubtleCrypto=l}),66);
__d("MAWWebInitDataHelpers",["FBLogger","MessengerWebInitData"],(function(t,n,r,o,a,i,l){"use strict";function e(){return 2}function s(e){var t;switch(e){case 2:return[r("MessengerWebInitData").accountKeyV2];case 1:return[r("MessengerWebInitData").accountKey].concat((t=r("MessengerWebInitData").additionalAccountKeysV1)!=null?t:[]);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid format version, should never happen.")}}l.getLastAccountKeyFormatVersion=e,l.getAccountKeysString=s}),98);
__d("WABase64",["WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=43,u=47,c=61,d=45,m=95,p=3e3,_="data:image/jpeg;base64,",f=function(t){return typeof t=="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)};function g(e){return y(e,s,u,!0)}function h(e,t){return t===void 0&&(t=!1),y(e,d,m,t)}function y(e,t,n,r){var o=Array.isArray(e)||e instanceof ArrayBuffer?new Uint8Array(e):e;if(o.length<=p)return C(o,t,n,r);for(var a=[],i=0;i<o.length;i+=p)a.push(C(o.subarray(i,i+p),t,n,r));return a.join("")}function C(e,t,n,r){for(var o=Math.ceil(e.length*4/3),a=4*Math.ceil(e.length/3),i=new Array(a),l=0,s=0;l<a;l+=4,s+=3){var u=e[s]<<16|e[s+1]<<8|e[s+2];i[l]=u>>18,i[l+1]=u>>12&63,i[l+2]=u>>6&63,i[l+3]=u&63}for(var c=0;c<o;c++){var d=i[c];d<26?i[c]=65+d:d<52?i[c]=71+d:d<62?i[c]=d-4:d===62?i[c]=t:i[c]=n}for(var m=o;m<a;m++)i[m]=61;var p=String.fromCharCode.apply(String,i);return r?p:p.substring(0,o)}function b(t,n,r,a){for(var i=t.length,l=new Int32Array(i+i%4),s=0;s<i;s++){var u=t.charCodeAt(s);if(65<=u&&u<=90)l[s]=u-65;else if(97<=u&&u<=122)l[s]=u-71;else if(48<=u&&u<=57)l[s]=u+4;else if(u===n)l[s]=62;else if(u===r)l[s]=63;else if(u===a){i=s;break}else return self.ERROR!=null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Found unexpected character code while decoding B64 at index ",", length ",": ",""])),s,i,u),null}for(var c=l.length/4,d=0,m=0;d<c;d++,m+=4)l[d]=l[m]<<18|l[m+1]<<12|l[m+2]<<6|l[m+3];for(var p=Math.floor(i*3/4),_=new Uint8Array(p),f=0,g=0;g+3<=p;f++,g+=3){var h=l[f];_[g]=h>>16,_[g+1]=h>>8&255,_[g+2]=h&255}switch(p-g){case 2:_[g]=l[f]>>16,_[g+1]=l[f]>>8&255;break;case 1:_[g]=l[f]>>16}return _}function v(e){var t=b(e,s,u,c);if(t)return t.buffer;throw r("err")("Base64.decode given invalid string")}function S(e,t){t===void 0&&(t=!1);var n=b(e,d,m,t?c:-1);if(n)return n.buffer;throw r("err")("Base64.decode given invalid string")}function R(e){var t=e instanceof ArrayBuffer?new Uint8Array(e):b(e,s,u,c);return t&&Array.from(t)}function L(e){return Math.floor(e.length*3/4)}l.BASE64_DATA_URL_SCHEME=_,l.isBase64=f,l.encodeB64=g,l.encodeB64UrlSafe=h,l.decodeB64=v,l.decodeB64UrlSafe=S,l.decodeB64ToJsArray=R,l.sizeWhenB64Decoded=L}),98);
__d("MAWKeychainCrypto",["FBLogger","MAWCryptoConsts","MAWKeychainUtil","MAWSubtleCrypto","MAWWebInitDataHelpers","WABase64","getErrorSafe","memoizeOneWithArgs"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWKeychainUtil").makeAAD(o("MAWCryptoConsts").VERSION,o("MAWCryptoConsts").CIPHER_ID);function s(t,n,a){var i=o("MAWKeychainUtil").getBufferWithRandomValuesFromLength(o("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES),l=a||e;return o("MAWSubtleCrypto").MAWSubtleCrypto.encrypt({additionalData:l,iv:new Uint8Array(i),name:o("MAWCryptoConsts").AES_GCM,tagLength:o("MAWCryptoConsts").AES_GCM_TAG_LENGTH},t,n).then(function(e){var t=o("MAWKeychainUtil").mergeBuffers([l,i,e]);return o("WABase64").encodeB64(t)}).catch(function(e){var n=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(n).mustfixThrow("Failed to encryptDataToStringBuffer",typeof t,t.constructor.name)})}async function u(e,t){var n,r=new Uint8Array(o("WABase64").decodeB64(t)),a=r.subarray(0,(n=o("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES),i=r.subarray(n.ADDITIONAL_DATA_LENGTH_IN_BYTES,n.AES_GCM_IV_LENGTH_IN_BYTES+n.ADDITIONAL_DATA_LENGTH_IN_BYTES),l=r.subarray(n.AES_GCM_IV_LENGTH_IN_BYTES+n.ADDITIONAL_DATA_LENGTH_IN_BYTES),s=await o("MAWSubtleCrypto").MAWSubtleCrypto.decrypt({additionalData:a,iv:i,name:n.AES_GCM,tagLength:n.AES_GCM_TAG_LENGTH},e,l);return s}function c(e){var t=o("MAWWebInitDataHelpers").getAccountKeysString(e);return t.map(function(e){var t=o("MAWKeychainUtil").fromHexString(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Invalid value for account key. Is empty="+String(e.length===0)+";");return t.buffer})}function d(e){return Promise.all(c(e).map(function(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",e,{name:o("MAWCryptoConsts").AES_GCM},!1,["encrypt","decrypt"])}))}function m(){return o("WABase64").encodeB64(o("MAWKeychainUtil").getBufferWithRandomValuesFromLength(o("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES))}async function p(e){var t=o("WABase64").decodeB64(e);try{var n=await o("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",t,{name:o("MAWCryptoConsts").HKDF},!1,["deriveKey"]);return n}catch(e){var a=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(a).mustfix("Failed to importBrowserEncryptionKey"),a}}function _(){return o("MAWKeychainUtil").getBufferWithRandomValuesFromLength(o("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES)}function f(e,t){var n;return o("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:{name:(n=o("MAWCryptoConsts")).SHA256},info:n.HKDF_INFO,name:n.HKDF,salt:t},e,{length:n.AES_GCM_KEY_LENGTH,name:n.AES_GCM},!0,["encrypt","decrypt"]).then(function(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",e)})}function g(e){var t=e.slice(0,o("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES),n=new DataView(t).getUint8(0);if(n===0){var r,a=e.slice((r=o("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES,r.ADDITIONAL_DATA_LENGTH_IN_BYTES*2);return{aadLengthInBytes:r.ADDITIONAL_DATA_LENGTH_IN_BYTES*2+r.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:new DataView(a).getUint8(0),originRandomisedVersion:new DataView(e).getUint32(r.ADDITIONAL_DATA_LENGTH_IN_BYTES*2,!0)}}return{aadLengthInBytes:o("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:n}}function h(e){return g(e)}var y=r("memoizeOneWithArgs")(function(e){return d(e)});async function C(e){var t=o("WABase64").decodeB64(e),n=await o("MAWSubtleCrypto").MAWSubtleCrypto.digest(o("MAWCryptoConsts").SHA256,t);return o("WABase64").encodeB64(n)}l.ADDITIONAL_DATA=e,l.encryptDataToStringBuffer=s,l.decryptDataToArrayBuffer=u,l.getAccountKeysBuffers=c,l.genAccountKeys=d,l.genBrowserEncryptionKeyString=m,l.importBrowserEncryptionKey=p,l.genDatabaseEncryptionSeed=_,l.genDatabaseEncryptionKey=f,l.getKeyVersionFromCipherData=g,l.getKeyVersionFromCipherDataString=h,l.getAccountKeys=y,l.generateHashString=C}),98);
__d("MAWKeychainNaClCrypto",["MAWKeychainCrypto","WABase64","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function s(e,t,n){var r=new Uint8Array(n),a=o("tweetnacl").randomBytes(o("tweetnacl").secretbox.nonceLength),i=o("tweetnacl").secretbox(t,a,new Uint8Array(e)),l=new Uint8Array(r.length+a.length+i.length);return l.set(r),l.set(a,r.length),l.set(i,r.length+a.length),l.buffer}function u(e,t,n){return o("WABase64").encodeB64(s(e,t,n!=null?n:o("MAWKeychainCrypto").ADDITIONAL_DATA))}function c(t,n,r,a,i){var l=n.slice(0,i),s=n.slice(i,i+o("tweetnacl").secretbox.nonceLength),u=n.slice(i+o("tweetnacl").secretbox.nonceLength),c=o("tweetnacl").secretbox.open(new Uint8Array(u),new Uint8Array(s),new Uint8Array(t));if(c==null)throw new e("decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : "+(r!=null?r:"non-provided")+". Format version "+(a!=null?a:"unknown")+".");return c}function d(e,t,n,r){return c(e,o("WABase64").decodeB64(t),n,void 0,r)}function m(e,t,n){return u(e,t,n)}function p(e,t,n,r){return d(e,t,n,r)}function _(e,t,n,r,o){return c(e,t,n,r,o)}l.EARDecryptionError=e,l.encryptTweetNaClArrayBuffer=s,l.encryptTweetNaCl=u,l.decryptTweetNaClArrayBuffer=c,l.decryptTweetNaCl=d,l.encrypt=m,l.decrypt=p,l.decryptArrayBuffer=_}),98);
__d("MAWMessagesDirection",["I64","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return r("err")("Unhandled direction: "+e)}function u(e,t){return _(e,{asc:t.maxTimestampMs,desc:t.minTimestampMs})}function c(e,t){return _(e,{asc:t.maxMessageId,desc:t.minMessageId})}function d(t,n){return n==="desc"&&(e||(e=o("I64"))).equal(t.maxTimestampMs,(e||(e=o("I64"))).max_int)&&t.minMessageId===t.maxMessageId&&t.hasMoreBefore&&!t.hasMoreAfter}function m(e){return _(e,{asc:"after",desc:"before"})}function p(e){return f(e,{after:"asc",before:"desc"})}function _(e,t){var n=t.asc,r=t.desc;switch(e){case"asc":return n;case"desc":return r;default:throw s(e)}}function f(e,t){var n=t.after,r=t.before;switch(e){case"after":return n;case"before":return r;default:throw s(e)}}l.unhandledDirectionError=s,l.getI64RangeTimestampForDirection=u,l.getRangeMsgIdForDirection=c,l.isFirstPageRange=d,l.translateMwpDirectionToMawDirection=m,l.translateMawDirectionToMwpDirection=p,l.switchOnMWPMessagesDirection=_,l.switchOnMAWMessagesDirection=f}),98);
__d("MAWMessagesCompare",["MAWMessagesDirection"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t,n){if(n.sortOrderMs==null||t.sortOrderMs==null)return 0;if(t.sortOrderMs===n.sortOrderMs){var r,o,a,i,l=(r=t.externalId)!=null?r:"",s=(o=n.externalId)!=null?o:"";if(e!=null){var u=e.has(l),c=e.has(s);if(u&&!c)return-1;if(!u&&c)return 1}return((a=n.externalId)!=null?a:"").localeCompare((i=t.externalId)!=null?i:"")}return n.sortOrderMs-t.sortOrderMs}}var s=e(),u=function(n,r){return-1*e()(n,r)};function c(e){return o("MAWMessagesDirection").switchOnMWPMessagesDirection(e,{asc:u,desc:s})}l.makeCompareMessageMetadataForDescOrderFn=e,l.getSortComparisonFunctionForDirection=c}),98);
__d("MAWRotateDTSG",["CSRFGuard","DTSG","MWFBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["RotateDTSG"]),c=async function(){var t,n;u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Getting new DTSG token"])));var r=new Request("/ajax/dtsg/?__a=true",{credentials:"include",method:"GET"}),a=await self.fetch(r);if(a.status!==200)throw u.mustfixThrow("Unable to get new DTSG token: "+a.status);var i=await a.text(),l=o("CSRFGuard").clean(i),s=JSON.parse(l),c=s==null||(t=s.payload)==null?void 0:t.token,d=s==null||(n=s.payload)==null?void 0:n.valid_for;if(c==null||d==null)throw u.mustfixThrow("DTSG response is not valid: "+l+"'");return{token:c,validFor:d}},d=null;async function m(){self.clearTimeout(d);try{var e=await c(),t=e.token,n=e.validFor;return d=self.setTimeout(m,n/2*1e3),o("DTSG").setToken(t),!0}catch(e){return u.catching(r("getErrorSafe")(e)).MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error rotating DTSG"]))),d=self.setTimeout(m,600*1e3),!1}}l.getNewDTSG=c,l.tryRotateDTSG=m}),98);
__d("MAWThreadId",["LSMessagingThreadTypeUtil","ReQL"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));return n==null?void 0:n.threadType}async function s(t,n){var r=await e(t,n);return r==null?!1:o("LSMessagingThreadTypeUtil").isArmadilloSecure(r)}function u(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t))}l.isSecureThreadKey=s,l.getThread=u}),98);
__d("WAArrayBufferUtils",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r,o;for(r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return n.buffer}function u(t,r){return r===void 0&&(r=5e5),new(e||(e=n("Promise")))(function(e,n){var o=t.length,a=new ArrayBuffer(o),i=new Uint8Array(a),l=0;setTimeout(s,0);function s(){for(var n=Math.min(l+r,o);l<n;)i[l]=t.charCodeAt(l),l++;if(l===o){e(a);return}setTimeout(s,16)}})}function c(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var d=8388607;function m(e,t){var n=new Uint8Array(e);if(t>d)throw r("err")("Divisor is too big");for(var o=0,a=0;a<n.length;++a)o=((o<<8)+n[a])%t;return o}function p(e){var t=e.map(function(e){return new Uint8Array(e)}),n=t.reduce(function(e,t){return e+t.byteLength},0),r=new Uint8Array(n);return t.reduce(function(e,t){return r.set(t,e),e+t.byteLength},0),r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}function _(e,t){var n=new Uint8Array(e),r=new Uint8Array(t);return f(n,r)}function f(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n!==e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}l.stringToArrayBuffer=s,l.largeStringToArrayBuffer=u,l.arrayBufferToString=c,l.arrayBufferMod=m,l.concatBuffers=p,l.arrayBuffersEqualUNSAFE=_,l.uint8ArraysEqualUNSAFE=f}),98);
__d("MAWVaultMaterials",["FBLogger","WAArrayBufferUtils","randomInt","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=null,u=null;function c(e){s=e}function d(){return e}function m(t){e=t}function p(){e=null,s=null}function _(){return h()!=null&&d()!=null}function f(){return u}function g(){var e=1e9,t=9999999999;return r("randomInt")(e,t)+"##"+r("randomInt")(e,t)}function h(){return s}function y(){if(!_())throw r("FBLogger")("messenger_web").mustfixThrow("Vault materials are null");return{encryptionKey:e,prefixAndSuffix:s}}function C(e,t){var n=_();return r("FBLogger")("messenger_web").debug("Setting vault materials -- vaultMaterials=%s, previouslySetup=%s",(!!e).toString(),n),n||(v(e!=null?e:b()),u=t!=null?t:e!=null?"existing":"newly-generated"),y()}function b(){return{encryptionKey:o("tweetnacl").randomBytes(32).buffer,prefixAndSuffix:g()}}function v(e){var t=e.encryptionKey,n=e.prefixAndSuffix;if(t==null||n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot set null values for encryption key and prefix");m(t),c(n)}function S(){return R(y())}function R(e){var t=e.encryptionKey,n=e.prefixAndSuffix;if(n!=null&&t!=null){var r=o("WAArrayBufferUtils").arrayBufferToString(t);return JSON.stringify({encryptionKey:r,prefixAndSuffix:n})}else return""}function L(e){if(e==="")return null;var t=JSON.parse(e);if(t.encryptionKey==null||t.prefixAndSuffix==null)throw r("FBLogger")("messenger_web").mustfixThrow("Vault materials were not in correct format");var n=o("WAArrayBufferUtils").stringToArrayBuffer(t.encryptionKey),a=t.prefixAndSuffix;return{encryptionKey:n,prefixAndSuffix:a}}l.TEST_ONLY_clearVaultMaterials=p,l.hasVaultBeenSetup=_,l.getVaultMaterialsSource=f,l.getVaultPrefixAndSuffix=h,l.getVaultMaterials=y,l.initializeVaultMaterials=C,l.generateNewVaultMaterials=b,l.materialsToString=S,l.fromMaterialsToString=R,l.fromStringToMaterials=L}),98);
__d("MAWVaultMaterialsStorageStatus",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(){return e}function s(){e=!0}i.isCurrentContextHoldingLock=l,i.setIsCurrentContextHoldingLock=s}),66);
__d("MAWVault",["ExecutionEnvironment","FBLogger","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWODSProxy","MAWVaultMaterials","MAWVaultMaterialsStorageStatus","WAOdsEnums","err","gkx","hasMultipleTabs","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map,u=new Map;function c(e){return new RegExp("^[0-9]{10}##[0-9]{10}.*[0-9]{10}##[0-9]{10}$").test(e)}var d=r("gkx")("23909");function m(e){if(!d)return!1;var t=o("MAWVaultMaterials").getVaultPrefixAndSuffix(),n=t==null?!1:new RegExp(t+".*"+t).test(e);return n}function p(t,n){if(n===void 0&&(n=!1),!d)return t;if(m(t)){var a=o("MAWVaultMaterials").getVaultMaterials(),i=a.encryptionKey,l=a.prefixAndSuffix;if(l==null)throw _("unvault","prefix_null"),r("FBLogger")("messenger_web").mustfixThrow("Vault prefix and suffix should not be null when unvaulting");var s=new RegExp(l+"(.*)"+l),u=t.match(s);if(u==null||u.length!=2)throw _("unvault","value_null"),r("FBLogger")("messenger_web").mustfixThrow("Could not retrieve inner value to unvault");if(i==null)throw _("unvault","key_null"),r("FBLogger")("messenger_web").mustfixThrow("Vault encryption key was null before unvault");var p=u[1],f=""+l+p+l,g=y(i,p);return t.replace(f,function(){return g})}if(c(t)){if(_("unvault","incorrect_key"),n)throw r("FBLogger")("messenger_web").mustfixThrow("Encountered vaulted value with incorrect key.");var h=r("err")("Encountered vaulted value with incorrect key");r("promiseDone")(o("hasMultipleTabs").hasMultipleTabs().then(function(t){r("FBLogger")("messenger_web").catching(h).mustfix("Encountered vaulted value with incorrect key. Vault material source: %s, environment: %s, hasMultipleTabs: %s, isSharedWorker: %s, isCurrentContextHoldingLock: %s",o("MAWVaultMaterials").getVaultMaterialsSource(),(e||(e=r("ExecutionEnvironment"))).isInMainThread?"main":"worker",t==null?"unknown_multi_tab":t?"multi_tab":"single_tab",o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?"shared_worker":"dedicated_worker",o("MAWVaultMaterialsStorageStatus").isCurrentContextHoldingLock()?"holding_lock":"not_holding_lock")}))}return t}function _(e,t){o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_VAULTING,key:"failure."+e+"."+t})}function f(t){if(t===""||!d||!(e||(e=r("ExecutionEnvironment"))).isInBrowser)return t;if(!o("MAWVaultMaterials").hasVaultBeenSetup())return _("vault","has_not_been_setup"),r("FBLogger")("messenger_web").mustfix("Attempted to vault value while materials were not setup"),t;if(m(t))return _("vault","already_vaulted"),r("FBLogger")("messenger_web").warn("Attempted to vault value that's already been vaulted"),t;c(t)&&(_("vault","already_vaulted_with_different_key"),r("FBLogger")("messenger_web").mustfix("Attempted to vault value that's already been vaulted with a different key"));var n=o("MAWVaultMaterials").getVaultMaterials(),a=n.encryptionKey,i=n.prefixAndSuffix;if(i==null||a==null)throw _("vault","prefix_or_key_null"),r("FBLogger")("messenger_web").mustfixThrow("Cannot vault before vault materials are set");var l=h(a,t);return""+i+l+i}function g(e){if(!d)return e;if(!m(e))throw r("FBLogger")("messenger_web").mustfixThrow("Value should be vaulted");return p(e)}function h(e,t){var n=s==null?void 0:s.get(t);if(n!=null)return n;var r=new TextEncoder().encode(t).buffer,a=o("MAWKeychainNaClCrypto").encryptTweetNaCl(e,new Uint8Array(r));return s==null||s.set(t,a),u==null||u.set(a,t),a}function y(e,t){var n=u==null?void 0:u.get(t);if(n!=null)return n;var r=new TextDecoder().decode(o("MAWKeychainNaClCrypto").decryptTweetNaCl(e,t,void 0,o("MAWKeychainCrypto").ADDITIONAL_DATA.byteLength));return s==null||s.set(r,t),u==null||u.set(t,r),r}l.isVaulted=m,l.unvault=p,l.vault=f,l.unvaultOrThrow=g}),98);
__d("isObject",[],(function(t,n,r,o,a,i){function e(e){var t=typeof e;return t==="function"||t==="object"&&!!e}i.default=e}),66);
__d("isPlainObject",[],(function(t,n,r,o,a,i){"use strict";function e(e){return Object.prototype.toString.call(e)==="[object Object]"}i.default=e}),66);
__d("MAWVaultDb",["FBLogger","MAWQplProxy","MAWVault","getErrorSafe","gkx","isObject","isPlainObject","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=.001,s=new WeakMap;function u(e,t){return t[e]!=null}var c=r("gkx")("23909");function d(t,n,a){if(!r("isPlainObject")(t)||!c||!u(n,a)||t==null)return t;var i=s.get(t);if(i!=null)return i;var l=Math.random()<e?o("MAWQplProxy").startQplUserFlow(r("qpl")._(25301509,"119")):null;try{var d=a[n],m=p(t,d,o("MAWVault").vault);return l==null||l.endSuccess(),s.set(t,m),m}catch(e){l==null||l.endFail("vault_fail");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("%s - Failed to vault an entity in the table: %s",_.message,n)}}function m(t,n,a){if(!r("isPlainObject")(t)||!c||!u(n,a)||t==null)return t;var i=Math.random()<e?o("MAWQplProxy").startQplUserFlow(r("qpl")._(741087294,"2028")):null;try{var l=p(t,a[n],o("MAWVault").unvault);return i==null||i.endSuccess(),l}catch(e){i==null||i.endFail("unvault_fail");var s=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("%s - Unvaulting failed for an entity in the table: %s",s.message,n)}}function p(e,t,n){if(e==null)return e;var o=Object.entries(t).filter(function(t){var n=t[0];return e[n]!=null});return o.length===0?e:o.reduce(function(e,t){var o=t[0],a=t[1];return typeof a!="boolean"&&r("isObject")(a)?e[o]=p(e[o],a,n):a===!0&&(e[o]=n(e[o])),e},babelHelpers.extends({},e))}l.vaultDbRow=d,l.unvaultDbRow=m,l.setInPath=p}),98);
__d("MAWVaultDefinitions",[],(function(t,n,r,o,a,i){"use strict";var e={editMsgHistory:{msgContent:{content:!0}},messages:{msgContent:{content:!0},quote:{content:{msgContent:{content:!0}}}},unrenderedMessages:{msgContent:!0}},l={edit_message_history:{messageContent:!0},messages:{replyMessageText:!0,text:!0},threads:{snippet:!0}};i.ARMADILLO_IDB_VAULT_DEFINITIONS=e,i.PERSISTED_DB_VAULT_DEFINITIONS=l}),66);
__d("WACommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={EVERYONE:1,SILENT:2,AI:3,AI_IMAGINE:4},u={PROFILE:0},c={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2},d={},m={},p={},_={},f={};d.name="MessageKey",d.internalSpec={remoteJid:[1,(e=o("WAProtoConst")).TYPES.STRING],fromMe:[2,e.TYPES.BOOL],id:[3,e.TYPES.STRING],participant:[4,e.TYPES.STRING]},m.name="Command",m.internalSpec={commandType:[1,e.TYPES.ENUM,s],offset:[2,e.TYPES.UINT32],length:[3,e.TYPES.UINT32],validationToken:[4,e.TYPES.STRING]},p.name="Mention",p.internalSpec={mentionType:[1,e.TYPES.ENUM,u],mentionedJid:[2,e.TYPES.STRING],offset:[3,e.TYPES.UINT32],length:[4,e.TYPES.UINT32]},_.name="MessageText",_.internalSpec={text:[1,e.TYPES.STRING],mentionedJid:[2,e.FLAGS.REPEATED|e.TYPES.STRING],commands:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,m],mentions:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p]},f.name="SubProtocol",f.internalSpec={payload:[1,e.TYPES.BYTES],version:[2,e.TYPES.INT32]},l.COMMAND_COMMAND_TYPE=s,l.MENTION_MENTION_TYPE=u,l.FUTURE_PROOF_BEHAVIOR=c,l.MessageKeySpec=d,l.CommandSpec=m,l.MentionSpec=p,l.MessageTextSpec=_,l.SubProtocolSpec=f}),98);
__d("WAArmadilloXMA.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SENDER_COPY:0,SERVER:1,SIGNED_CLIENT:2},c={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5,MEDIA_LABEL:6,POST_COVER:7,POST_LABEL:8,WARNING_SCREENS:9},d={OPEN_NATIVE:11},m={SINGLE:0,HSCROLL:1,PORTRAIT:3,STANDARD_DXMA:12,LIST_DXMA:15,GRID:16},p={UNSUPPORTED:-1,IG_STORY_PHOTO_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_SINGLE_VIDEO_POST_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_PROFILE_SHARE:19,IG_STORY_PHOTO_HIGHLIGHT_SHARE:20,IG_STORY_VIDEO_HIGHLIGHT_SHARE:21,IG_STORY_REPLY:22,IG_STORY_REACTION:23,IG_STORY_VIDEO_MENTION:24,IG_STORY_HIGHLIGHT_REPLY:25,IG_STORY_HIGHLIGHT_REACTION:26,IG_EXTERNAL_LINK:27,IG_RECEIVER_FETCH:28,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,FB_PRODUCER_STORY_REPLY:1006,FB_EVENT:1007,FB_FEED_POST_PRIVATE_REPLY:1008,FB_SHORT:1009,FB_COMMENT_MENTION_SHARE:1010,FB_POST_MENTION:1011,FB_PROFILE_DIRECTORY_ITEM:1013,FB_FEED_POST_REACTION_REPLY:1014,FB_QUICKSNAP_REPLY:1015,MSG_EXTERNAL_LINK_SHARE:2e3,MSG_P2P_PAYMENT:2001,MSG_LOCATION_SHARING:2002,MSG_LOCATION_SHARING_V2:2003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:2004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:2005,MSG_RECEIVER_FETCH:2006,MSG_IG_MEDIA_SHARE:2007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:2008,MSG_REELS_LIST:2009,MSG_CONTACT:2010,MSG_THREADS_POST_SHARE:2011,MSG_FILE:2012,MSG_AVATAR_DETAILS:2013,MSG_AI_CONTACT:2014,MSG_MEMORIES_SHARE:2015,MSG_SHARED_ALBUM_REPLY:2016,MSG_SHARED_ALBUM:2017,MSG_OCCAMADILLO_XMA:2018,MSG_GEN_AI_SUBSCRIPTION:2021,MSG_GEN_AI_REMINDER:2022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:2023,MSG_NOTE_REPLY:2024,MSG_NOTE_MENTION:2025,GEN_AI_ENTITY:2026,MSG_OPG_P2P_PAYMENT:2027,GEN_AI_RICH_RESPONSE:2028,MSG_MUSIC_STICKER:2029,MSG_PHONE_NUMBER:2030,AI_ACTIVITY_SHARE:2031,MSG_PRIVATE_XMA:2032,RTC_AUDIO_CALL:3e3,RTC_VIDEO_CALL:3001,RTC_MISSED_AUDIO_CALL:3002,RTC_MISSED_VIDEO_CALL:3003,RTC_GROUP_AUDIO_CALL:3004,RTC_GROUP_VIDEO_CALL:3005,RTC_MISSED_GROUP_AUDIO_CALL:3006,RTC_MISSED_GROUP_VIDEO_CALL:3007,RTC_ONGOING_AUDIO_CALL:3008,RTC_ONGOING_VIDEO_CALL:3009,MSG_RECEIVER_FETCH_FALLBACK:3025,DATACLASS_SENDER_COPY:4e3},_={},f={};_.name="ExtendedContentMessage",_.internalSpec={associatedMessage:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],targetType:[2,e.TYPES.ENUM,p],targetUsername:[3,e.TYPES.STRING],targetId:[4,e.TYPES.STRING],targetExpiringAtSec:[5,e.TYPES.INT64],xmaLayoutType:[6,e.TYPES.ENUM,m],ctas:[7,e.FLAGS.REPEATED|e.TYPES.MESSAGE,f],previews:[8,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec],titleText:[9,e.TYPES.STRING],subtitleText:[10,e.TYPES.STRING],maxTitleNumOfLines:[11,e.TYPES.UINT32],maxSubtitleNumOfLines:[12,e.TYPES.UINT32],favicon:[13,e.TYPES.MESSAGE,s.SubProtocolSpec],headerImage:[14,e.TYPES.MESSAGE,s.SubProtocolSpec],headerTitle:[15,e.TYPES.STRING],overlayIconGlyph:[16,e.TYPES.ENUM,c],overlayTitle:[17,e.TYPES.STRING],overlayDescription:[18,e.TYPES.STRING],sentWithMessageId:[19,e.TYPES.STRING],messageText:[20,e.TYPES.STRING],headerSubtitle:[21,e.TYPES.STRING],xmaDataclass:[22,e.TYPES.STRING],contentRef:[23,e.TYPES.STRING],mentionedJid:[24,e.FLAGS.REPEATED|e.TYPES.STRING],commands:[25,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.CommandSpec],mentions:[26,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.MentionSpec],xmaDataclassType:[27,e.TYPES.ENUM,u],signedXmaDataclassValidation:[28,e.TYPES.STRING]},f.name="ExtendedContentMessage$CTA",f.internalSpec={buttonType:[1,e.TYPES.ENUM,d],title:[2,e.TYPES.STRING],actionUrl:[3,e.TYPES.STRING],nativeUrl:[4,e.TYPES.STRING],ctaType:[5,e.TYPES.STRING],actionContentBlob:[6,e.TYPES.STRING]},l.EXTENDED_CONTENT_MESSAGE_XMA_DATACLASS_TYPE=u,l.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH=c,l.EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE=d,l.EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE=m,l.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE=p,l.ExtendedContentMessageSpec=_,l.ExtendedContentMessage$CTASpec=f}),98);
__d("MAWXMAUtils",["I64","LSIntEnum","LSXmaContentType","MAWMsgType","WAArmadilloXMA.pb","WALogger","WATimeUtils","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return!e||e.type!==o("MAWMsgType").MSG_TYPE.XMA?null:e}function d(t){if(t==null)return!1;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("gkx")("9339");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:return!1;default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Hit Unreachable XMAType "," - checking isXMAShare"])),t),!1}}function m(e){return e!=null&&((s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSXmaContentType").FB_STORY_REPLY))||(s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSXmaContentType").FB_STORY_SHARE))||(s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSXmaContentType").FB_STORY_MENTION))||(s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSXmaContentType").FB_PRODUCER_STORY_REPLY)))}function p(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function _(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function f(e){return e!=null&&(s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSXmaContentType").MSG_CONTACT))}function g(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH}function h(e){return e==null?!1:e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function y(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function C(e,t){return e!=null&&e||t!=null&&t<o("WATimeUtils").unixTime()}function b(e){var t=e.ctas;return t!=null&&(t=t.filter(function(e){return e.buttonType!==o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE})),t}function v(e){return babelHelpers.extends({},e,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function S(e){var t=babelHelpers.extends({},e,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,defaultPreviewMediaPlaintextHash:void 0,faviconMediaId:void 0,faviconPlaintextHash:void 0,headerMediaId:void 0,headerMediaPlaintextHash:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0});return r("justknobx")._("3897")&&(t.targetExpiringAtSec=void 0),t}function R(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return!0;default:return!1}}function L(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY}function E(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function k(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION}function I(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION}function T(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return!0;default:return!1}}function D(e){return k(e)||T(e)}function x(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function $(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function P(e){return e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY}function N(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}l.maybeXMAMessage=c,l.isXMAShare_DO_NOT_USE=d,l.isXMAFBStory=m,l.isXMAStoryShare=p,l.isXMAExternalLinkShare=_,l.isXMAContactShare=f,l.isReceiverFetchXMA=g,l.isIGXMAStoryShare=h,l.isXMAPostPrivateReply=y,l.isXMAExpired=C,l.removeCTAsForStoryMentionXMA=b,l.buildUnstoredTombstonedXMA=v,l.buildTombstonedDbXMA=S,l.isXMAStoryReply=R,l.isXMAStoryProducerReply=L,l.isXMAStoryReaction=E,l.isFBXMAStoryMention=k,l.isFBXMAPostMention=I,l.isIGXMAStoryMention=T,l.isXMAStoryMention=D,l.isIGXMAPostShare=x,l.isXMAStoryHighlightShare=$,l.isXMAMsgHighlightsTabFriendUpdatesReply=P,l.isRtcXMA=N}),98);
__d("MWLSThreadDisplayContext",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext();function d(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.value,a;return t[0]!==n||t[1]!==r?(a=s.jsx(c.Provider,{value:r,children:n}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}function m(){return u(c)}l.MWLSThreadDisplayContextProvider=d,l.useMWLSThreadDisplayContext=m}),98);
__d("RetUtil",["LSResult"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSResult")(e)}l.getNullableRetResult=e}),98);
__d("WAByteArray",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=t,r=new Uint8Array(e),o=e-1;o>=0;o--)r[o]=n&255,n>>>=8;return r}function l(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function s(e,t){if(!e||!t)return!1;var n=new Uint8Array(e),r=new Uint8Array(t),o=n.length,a=r.length;if(o!==a)return!1;for(var i=0;i<o;i++)if(n[i]!==r[i])return!1;return!0}i.intToBytes=e,i.uint8ArrayToBuffer=l,i.compareArrayBuffer=s}),66);
__d("WARetryableError",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,"see error at this.source")||this,n.source=t,n}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("RetryableError"));l.default=e}),98);
__d("WAWasmModuleCache",["WAPromiseManagement"],(function(t,n,r,o,a,i,l){"use strict";var e=t.fetch,s=new Map,u=o("WAPromiseManagement").cacheWhilePending(function(e){return e},async function(e){var t=s.get(e);if(t!=null)return t;var n=await c(e);return s.set(e,n),n});async function c(t){var n=e(t);if(typeof WebAssembly.compileStreaming=="function")return WebAssembly.compileStreaming(n);var r=await n;return WebAssembly.compile(await r.arrayBuffer())}l.loadWasmModule=u}),98);
__d("WorkerRelayNetwork",["ActorURIConfig","MAWCurrentUser","RelayAPIConfig","WAResolvable","createRelayFBNetwork","createRelayFBNetworkFetch","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAResolvable")).Resolvable;function s(){var t=c(o("MAWCurrentUser").getID()),n={execute:t.execute};return e.resolve(n),n}function u(){return e.promise}function c(e,t){var n={actorID:e,batchResponseChunks:!0,getAdditionalData:function(){var t={};return e!=null&&(t[r("ActorURIConfig").PARAMETER_ACTOR]=e),r("RelayAPIConfig").useXController===!1&&r("RelayAPIConfig").accessToken!==""&&(t.access_token=r("RelayAPIConfig").accessToken),t},graphURI:t},a=r("createRelayFBNetworkFetch")(n),i=function(t,n,r){return o("relay-runtime").Observable.create(function(e){return e.complete()})};return r("createRelayFBNetwork")(a,i,null,null)}l.createWorkerNetworkExecute=s,l.getWorkerNetworkExecute=u}),98);
__d("executeGraphQLQuery",["DTSG","FBLogger","MAWBridge","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){var a=o("relay-runtime").getRequest(t);if(a.params.operationKind==="subscription")throw r("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Expected query or mutation operation");var i={force:!0},l=o("DTSG").getToken();if(l==null||l===""||typeof l!="string"){if(l=await o("MAWBridge").getBridge().sendAndReceive("event","getDTSGToken").catch(function(e){throw r("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Failed to get DTSG token from the main thread",e)}),l==null||l===""||typeof l!="string")throw r("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Received an empty DTSG token from the main thread");o("DTSG").setToken(l)}var s=o("relay-runtime").createOperationDescriptor(a,n,i);return e.execute(s.request.node.params,s.request.variables,i)}l.executeGraphQLQuery=e}),98);
__d("createWorkerMutation",["FBLogger","WorkerRelayNetwork","executeGraphQLQuery","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("relay-runtime").getRequest(e);if(t.params.operationKind!=="mutation")throw r("FBLogger")("messenger_web").mustfixThrow("createWorkerMutation: Expected mutation operation");var n=o("WorkerRelayNetwork").getWorkerNetworkExecute(),a=async function(r){var t=await n;return o("executeGraphQLQuery").executeGraphQLQuery(t,e,r).then(function(e){return e.toPromise()}).then(function(e){var t,n=Array.isArray(e)?(t=e[0])==null?void 0:t.data:e==null?void 0:e.data;return n==null?null:n})};return[a]}l.default=e}),98);
__d("createWorkerQuery",["FBLogger","IGDWebUtils","MAWRotateDTSG","WARetryableError","WorkerRelayNetwork","executeGraphQLQuery","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){var a=o("relay-runtime").getRequest(e);if(a.params.operationKind!=="query")throw r("FBLogger")("messenger_web").mustfixThrow("createWorkerQuery: Expected query operation");var i=await o("WorkerRelayNetwork").getWorkerNetworkExecute();n==null||n.onExecute==null||n.onExecute();var l=o("IGDWebUtils").isOnInstagramWeb(),s=await o("executeGraphQLQuery").executeGraphQLQuery(i,e,t).then(function(e){return e.toPromise()}).then(function(e){var t;n==null||n.onResponse==null||n.onResponse(e);var r=Array.isArray(e)?(t=e[0])==null?void 0:t.data:e==null?void 0:e.data;if(r!=null)return r}).catch(function(e){if(("code"in e&&e.code===1357004||"message"in e&&e.message.indexOf("1357004")!==-1||typeof e=="string"&&e.indexOf("1357004")!==-1)&&!l)return r("FBLogger")("messenger_web").info("Failed with expired DTSG, attempting to rotate."),o("MAWRotateDTSG").tryRotateDTSG().then(function(t){throw t?new(r("WARetryableError"))(e):e});throw e});return s}l.default=e}),98);
__d("WorkerRelay",["WorkerRelayNetwork","createWorkerMutation","createWorkerQuery","executeGraphQLQuery","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";i.exports={createWorkerMutation:r("createWorkerMutation"),createWorkerQuery:r("createWorkerQuery"),executeGraphQLQuery:o("executeGraphQLQuery").executeGraphQLQuery,getWorkerRelayEnvironment:o("WorkerRelayNetwork").getWorkerNetworkExecute,graphql:o("relay-runtime").graphql}}),34);
__d("XPlatReactVoprf",["WAWasmModuleCache","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");async function s(){var t=await e.load(),n=t.LSVoprfWasm,r=t.locateFile,a=await n({getWasmModule:function(){return o("WAWasmModuleCache").loadWasmModule(r())}}),i,l;try{i=a.createCurveRistretto(),l=a.createVoprfExpTwohashdh(i);var s={voprfInfo:{curvePtr:i,voprfPtr:l},voprfWasm:a};return{voprfInstance:s}}catch(e){throw i!=null&&a.freeCurve(i),l!=null&&a.freeVoprf(l),e}}function u(){return Promise.resolve(s())}function c(e){var t=e.voprfInfo,n=e.voprfWasm,r=t.curvePtr,o=t.voprfPtr;n.freeCurve(r),n.freeVoprf(o)}l.loadXPlatReactVoprf=u,l.freeVoprfInstance=c}),98);
__d("XPlatRelayEnvironment",["CometRelayEnvironment","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw r("err")("RelayEnvironment is already set")}function s(){return r("CometRelayEnvironment")}l.setRelayEnvironment=e,l.getRelayEnvironment=s}),98);/*FB_PKG_DELIM*/
__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("base64Binary").encode(new(o("XPlatReactTextEncoder")).TextEncoder().encode(e))}function s(e){return o("base64Binary").encode(new Uint8Array(e))}function u(e){return o("base64Binary").decode(e).buffer}l.encodeUnicode=e,l.fromArrayBuffer=s,l.toArrayBuffer=u}),98);
__d("EBBase64Encode",["Base64Utils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("Base64Utils").fromArrayBuffer(e)}l.default=e}),98);
__d("EBDeps",["FBLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){if(e==null)throw r("err")("EBDeps is not initialized");return e}function u(t,n){if(e==null){var o={},a=function(a){var e=t[a];if(e==null)return 1;e instanceof Function?o[a]=function(){r("FBLogger")("wmi_eb").info("EBDeps: function %s, reason %s",a,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e.apply(t,i)}:(r("FBLogger")("wmi_eb").info("EBDeps: %s is not function",a),o[a]=e)};for(var i of Object.keys(t))a(i);e=o}}l.getDeps=s,l.setDeps=u}),98);
__d("EBGating",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!0}function s(){return r("gkx")("4877")}function u(){return r("gkx")("19324")}l.isEBSMv2Phase1Enabled=e,l.isFetchBackupIdsFromWorker=s,l.isGetEBSMDataFromRelay=u}),98);
__d("LSEncryptedBackupsBackupTenancy",[],(function(t,n,r,o,a,i){var e=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});i.default=e}),66);
__d("WAPubSub",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.publish=function(t){this.$1.forEach(function(e){return e(t)})},t.subscribe=function(t){var e=this;return this.$1.add(t),function(){e.$1.delete(t)}},e})(),s=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.publish=function(t,n){var e=this.$2(t);e.forEach(function(e){return e(n)})},t.$2=function(t){(!this.$1.has(t)||this.$1.get(t)==null)&&this.$1.set(t,new Set);var e=this.$1.get(t);if(e==null)throw r("err")("Key space should not be null");return e},t.subscribe=function(t,n){var e=this.$2(t);return e.add(n),function(){e.delete(n)}},e})();function u(){return new e}l.WAPubSub=e,l.WAKeyedPubSub=s,l.simplePubSub=u}),98);
__d("WAGenericStateManager",["Promise","WAPubSub"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$2=o("WAPubSub").simplePubSub(),this.$1=e}var r=t.prototype;return r.onSet=function(t){return this.$2.subscribe(t)},r.set=function(t){return this.$1=t,this.$2.publish(t),this.$1},r.get=function(){return this.$1},r.waitForValue=function(r){var t=this;return this.$1===r?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e){var n=t.onSet(function(t){t===r&&(n(),e())})})},t})();l.WAGenericStateManager=s}),98);
__d("MAWEBEnabledStateManager",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,null)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){return this.get()===!0},n.waitForEBEnabled=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager);l.MAWEBEnabledStateManager=e}),98);
__d("MAWEBSwitch",["EBGating","ExecutionEnvironment","MAWEBEnabledStateManager","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EBIsEbEnabledSubscriber").__setRef("MAWEBSwitch"),u=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager;((e||(e=r("ExecutionEnvironment"))).isInMainThread===!0||o("EBGating").isEBSMv2Phase1Enabled())&&s.load().then(function(e){return e.subscribeToEbChanges(function(e){u.set(e)})});var c=u;l.default=c}),98);
__d("MAWEncryptedBackupUtils",["FBLogger","I64","LSAuthorityLevel","LSDict","LSIntEnum","LSShape","LSVec","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.secure_encrypted_backups_client_state)).then(function(e){return c(e,t)})}function c(t,n){var a;if(t==null){n!=null&&n.addPoint("get_backup_tenancy_null_client_state_row");return}var i=(a=t.backupTenancy)!=null?a:(e||(e=o("I64"))).one,l=t.authorityLevel;if(n!=null&&n.addPoint("get_backup_tenancy",{int:{authorityLevel:(e||(e=o("I64"))).to_int32(l!=null?l:(e||(e=o("I64"))).zero),backupTenancy:e.to_int32(i!=null?i:(e||(e=o("I64"))).zero)}}),i!=null&&(e||(e=o("I64"))).equal((s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),l))return i}function d(e,t){var n=new Set,o=e.length;for(var a of e.entries()){var i=a[0],l=a[1];n.has(l)&&r("FBLogger")("wmi_eb").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",t,i,o),n.add(l)}}function m(t){var n=t.map(function(t){var n=t.toplevelProtobuf,a=o("LSShape").ofRecord({decrypted_protobuf:n.decryptedProtobuf,protobuf_timestamp_ms:(e||(e=o("I64"))).of_float(n.protobufTimestampMS)}),i=new(r("LSDict"));return t.supplementalProtobufs.forEach(function(t,n){i.set(n,o("LSShape").ofRecord({decrypted_protobuf:t.decryptedProtobuf,protobuf_timestamp_ms:(e||(e=o("I64"))).of_float(t.protobufTimestampMS)}))}),o("LSShape").ofRecord({otid:t.otid,supplemental_protobufs:i,toplevel_protobuf:a})});return r("LSVec").ofArray(n)}function p(t){var n=r("LSVec").toArray(t),a=n.map(function(e){return o("LSShape").toRecord(e)});return a.map(function(t){var n=o("LSShape").toRecord(t.toplevel_protobuf),r={decryptedProtobuf:n.decrypted_protobuf,protobufTimestampMS:(e||(e=o("I64"))).to_float(n.protobuf_timestamp_ms)},a=new Map,i=t.supplemental_protobufs;return i.forEach(function(t,n){var r=o("LSShape").toRecord(t);a.set(n,{decryptedProtobuf:r.decrypted_protobuf,protobufTimestampMS:(e||(e=o("I64"))).to_float(r.protobuf_timestamp_ms)})}),{otid:t.otid,supplementalProtobufs:a,toplevelProtobuf:r}})}l.getBackupTenancy=u,l.getBackupTenancyFromClientStateRow=c,l.logIfDuplicateMessagesFoundInRestore=d,l.convertJSTypesToLSTypesForRestoreJob=m,l.convertLSTypesToJSTypesForRestoreJob=p}),98);
__d("EBIsEbEnabled",["EBDeps","FBLogger","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBSwitch","MAWEncryptedBackupUtils","WAResultOrError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){return o("MAWEncryptedBackupUtils").getBackupTenancy(t,n).then(function(t){return t!=null&&(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}function c(){try{return o("WAResultOrError").makeResult(r("MAWEBSwitch").isEnabled())}catch(e){return r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Failed to check EB enabled"),o("WAResultOrError").makeResult(!1)}}async function d(){var e=await o("EBDeps").getDeps().getLSDB();return u(e.tables)}l.isEbEnabledLS=u,l.isEbEnabledEbSwitch=c,l.isEBEnabled=d}),98);
__d("EBIsEbEnabledSubscriber",["EBDeps","EBIsEbEnabled","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","ReQL","WAPubSub"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=o("WAPubSub").simplePubSub(),this.$4=e,this.$2=!1}var n=t.prototype;return n.initialize=async function(){this.$2=await o("EBIsEbEnabled").isEbEnabledLS(this.$4.tables),this.$5(this.$4)},n.$6=function(t){this.$2=t,this.$1.publish(t)},n.$5=function(n){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(n.tables.secure_encrypted_backups_client_state).take(1).subscribe(function(n,a){a.operation==="delete"&&t.$6(!1),(a.operation==="add"||a.operation==="put")&&(a.value.backupTenancy!=null&&(e||(e=o("I64"))).equal(a.value.backupTenancy,(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))?t.$6(!0):t.$6(!1))})),this.$3},n.subscribe=function(t){return this.$1.subscribe(t)},n.isEnabled=function(){return this.$2},t})(),c;async function d(e){if(c!=null)return Promise.resolve();c=new u(e),await c.initialize()}async function m(){if(c==null){var e=await o("EBDeps").getDeps().getLSDB();await d(e)}return c}async function p(e){if(c==null){var t=await o("EBDeps").getDeps().getLSDB();await d(t)}e(c.isEnabled());var n=c.subscribe(e);return n}async function _(){if(c==null){var e=await o("EBDeps").getDeps().getLSDB();await d(e)}return c.isEnabled()}l.initIsEbEnabledPubSub=d,l.isEbEnabledSubscriber=m,l.subscribeToEbChanges=p,l.isEBEnabledValueFromSubscriber=_}),98);
__d("EBMarkerIdToQPLEvent",["I64","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=(e||(e=o("I64"))).to_int32(t);switch(n){case 1021646192:return r("qpl")._(1021646192,"3099");case 1021656232:return r("qpl")._(1021656232,"3100");case 1021647318:return r("qpl")._(1021647318,"3101");case 1021651622:return r("qpl")._(1021651622,"3102");case 1021655799:return r("qpl")._(1021655799,"3103");case 1021648929:return r("qpl")._(1021648929,"3104");case 1021647593:return r("qpl")._(1021647593,"3105");case 1021653744:return r("qpl")._(1021653744,"3106");case 1021655355:return r("qpl")._(1021655355,"3107");case 1021648240:return r("qpl")._(1021648240,"3108");case 1021651939:return r("qpl")._(1021651939,"3109");case 1021656851:return r("qpl")._(1021656851,"3110");case 1021652813:return r("qpl")._(1021652813,"3111");case 1021653501:return r("qpl")._(1021653501,"3112");case 1021655710:return r("qpl")._(1021655710,"3114");case 1021655643:return r("qpl")._(1021655643,"3115");case 1021646076:return r("qpl")._(1021646076,"3116");case 1021642512:return r("qpl")._(1021642512,"3117");case 1021654781:return r("qpl")._(1021654781,"3118");case 1021649468:return r("qpl")._(1021649468,"3120");case 1021652080:return r("qpl")._(1021652080,"3121");case 1021652512:return r("qpl")._(1021652512,"3122");case 1021655828:return r("qpl")._(1021655828,"3124");case 1021642298:return r("qpl")._(1021642298,"3126");case 1021652377:return r("qpl")._(1021652377,"3127");case 521471316:return r("qpl")._(521471316,"2831");case 521478596:return r("qpl")._(521478596,"1329");case 521479468:return r("qpl")._(521479468,"3128");case 521473151:return r("qpl")._(521473151,"2593");case 521482563:return r("qpl")._(521482563,"3129");case 521482912:return r("qpl")._(521482912,"3131");case 521481876:return r("qpl")._(521481876,"1407");case 521471732:return r("qpl")._(521471732,"1454");case 521477507:return r("qpl")._(521477507,"1406");case 521478817:return r("qpl")._(521478817,"2806");case 521476801:return r("qpl")._(521476801,"3132");case 521484724:return r("qpl")._(521484724,"141");case 521473756:return r("qpl")._(521473756,"2768");case 521477113:return r("qpl")._(521477113,"2698");case 521478750:return r("qpl")._(521478750,"2850");case 521479165:return r("qpl")._(521479165,"3055");case 521484370:return r("qpl")._(521484370,"2995");case 521473213:return r("qpl")._(521473213,"27");case 521482281:return r("qpl")._(521482281,"2703");case 521476771:return r("qpl")._(521476771,"2454");case 521474469:return r("qpl")._(521474469,"2612");case 521471755:return r("qpl")._(521471755,"2586");case 521476367:return r("qpl")._(521476367,"2704");case 521473850:return r("qpl")._(521473850,"2910");case 521482558:return r("qpl")._(521482558,"2558");case 521482880:return r("qpl")._(521482880,"16");case 521473150:return r("qpl")._(521473150,"2143");case 521473369:return r("qpl")._(521473369,"2834");case 521485893:return r("qpl")._(521485893,"2835");case 521473922:return r("qpl")._(521473922,"2832");case 521479146:return r("qpl")._(521479146,"3133");case 521471468:return r("qpl")._(521471468,"2968");case 521480391:return r("qpl")._(521480391,"1167");case 521480745:return r("qpl")._(521480745,"3134");case 521481602:return r("qpl")._(521481602,"829");case 521475102:return r("qpl")._(521475102,"3135");case 521484676:return r("qpl")._(521484676,"2684");case 521485625:return r("qpl")._(521485625,"1876");case 521482085:return r("qpl")._(521482085,"409");case 521471024:return r("qpl")._(521471024,"2275");case 521474385:return r("qpl")._(521474385,"263");case 521479842:return r("qpl")._(521479842,"2163");case 521485383:return r("qpl")._(521485383,"2200");case 521478580:return r("qpl")._(521478580,"3136");case 521485815:return r("qpl")._(521485815,"3137");case 521482969:return r("qpl")._(521482969,"1519");case 521485406:return r("qpl")._(521485406,"272");case 521479972:return r("qpl")._(521479972,"3138");case 521484777:return r("qpl")._(521484777,"2715");case 521483076:return r("qpl")._(521483076,"3140");case 521482858:return r("qpl")._(521482858,"1290");case 521472542:return r("qpl")._(521472542,"295");case 521472456:return r("qpl")._(521472456,"1646");case 521476140:return r("qpl")._(521476140,"378");case 521473194:return r("qpl")._(521473194,"1331");case 521482763:return r("qpl")._(521482763,"296");case 521484295:return r("qpl")._(521484295,"1460");case 521476165:return r("qpl")._(521476165,"2432");case 521477947:return r("qpl")._(521477947,"2395");case 521486220:return r("qpl")._(521486220,"827");case 521482576:return r("qpl")._(521482576,"1069");case 521479124:return r("qpl")._(521479124,"1939");case 521476098:return r("qpl")._(521476098,"504");case 521472095:return r("qpl")._(521472095,"2859")}return null}l.markerIdToQPLEvent=s}),98);
__d("InstagramMediaProductTypeName",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LIVE:"live",FEED:"feed",STORY:"story",DIRECT:"direct",IGTV:"igtv",NAMETAG:"nametag",DIRECT_AUDIO:"direct_audio",CAROUSEL_ITEM:"carousel_item",CAROUSEL_CONTAINER:"carousel_container",PROFILE_PIC:"profile_pic",AD:"ad",AR_EFFECT_PREVIEW:"ar_effect_preview",DIRECT_PERMANENT:"direct_permanent",SELFIE_STICKER:"selfie_sticker",COWATCH_LOCAL:"cowatch_local",CLIPS:"clips",GUIDE_MEDIA_FACADE:"guide_media_facade",FUNDRAISER_COVER:"fundraiser_cover",LIVE_ARCHIVE:"live_archive",HIGHLIGHT_POST_FACADE:"highlight_post_facade",DIRECT_THREAD:"direct_thread",SCHEDULED_LIVE:"scheduled_live",RATINGS_AND_REVIEWS:"ratings_and_reviews",DIRECT_HEADMOJI:"direct_headmoji",CLIPS_PREVIEW:"clips_preview",REPOST_MEDIA_FACADE:"repost_media_facade",STORY_INTERACTION_RESPONSE:"story_interaction_response",MEDIA_KIT:"media_kit",TEXT_POST:"text_post",NOTE_AUDIO:"note_audio",DIRECT_MESSAGE_COMMENT_FACADE:"direct_message_comment_facade"}),l=e;i.default=l}),66);
__d("IGDThreadTTLCUtils",["IGDInstamadilloUtils","InstagramMediaProductTypeName","LSThreadBitOffset","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=[225,235,226,227,228,229,230,231,232,233,234,236];function s(e,t){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:o("LSThreadBitOffset").has(t,e)}function u(e){return s(e,225)}function c(e){return!r("gkx")("2400")||!o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?!1:s(e,235)}function d(e){return s(e,226)}function m(e){return s(e,227)}function p(e){return s(e,228)}function _(e){return s(e,229)}function f(e){return s(e,230)}function g(e){return s(e,231)}function h(e){return s(e,232)}function y(e){return s(e,233)}function C(e){return s(e,234)}function b(e){return s(e,236)}function v(e){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:S(e)}function S(t){return t==null?!1:e.some(function(e){return o("LSThreadBitOffset").has(e,t)})}function R(e,t){var n=e.isDisappearingModeSettingOn,o=e.isTTLCClipEnabled,a=e.isTTLCGenericXMAShareEnabled,i=e.isTTLCMediaShareEnabled,l=e.isTTLCStoryShareEnabled,s=r("InstagramMediaProductTypeName").cast(t);if(s==null||n||!r("qex")._("954"))return!1;switch(s){case"feed":case"carousel_container":case"ad":return i;case"clips":return o;case"story":return l;case"live":return a;default:return!1}}function L(e){return new Map([["Text",u(e)],["Clip",d(e)],["Reel Share",m(e)],["Media Share",p(e)],["Story Share",_(e)],["Link",f(e)],["Generic XMA",g(e)],["Profile",b(e)],["Image",h(e)],["Video",y(e)],["Audio",C(e)],["Gif/Sticker/Avatar",void 0],["Raven",void 0],["Media Collection",void 0],["Calling",c(e)],["Rest of Message Types",void 0]])}function E(e){return{is_instamadillo_ttlc:String(v(e)),is_instamadillo_ttlc_audio:String(C(e)),is_instamadillo_ttlc_clip:String(d(e)),is_instamadillo_ttlc_generic_xma:String(g(e)),is_instamadillo_ttlc_image:String(h(e)),is_instamadillo_ttlc_link:String(f(e)),is_instamadillo_ttlc_media_share:String(p(e)),is_instamadillo_ttlc_profile:String(b(e)),is_instamadillo_ttlc_reel_share:String(m(e)),is_instamadillo_ttlc_story_share:String(_(e)),is_instamadillo_ttlc_text:String(u(e)),is_instamadillo_ttlc_video:String(y(e))}}function k(e){return{is_instamadillo_ttlc:v(e),is_instamadillo_ttlc_audio:C(e),is_instamadillo_ttlc_clip:d(e),is_instamadillo_ttlc_generic_xma:g(e),is_instamadillo_ttlc_image:h(e),is_instamadillo_ttlc_link:f(e),is_instamadillo_ttlc_media_share:p(e),is_instamadillo_ttlc_profile:b(e),is_instamadillo_ttlc_reel_share:m(e),is_instamadillo_ttlc_story_share:_(e),is_instamadillo_ttlc_text:u(e),is_instamadillo_ttlc_video:y(e)}}function I(e,t){if(e==null)return!1;switch(e.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":return p(t);case"XMSGIgReceiverFetchXmaProfileFetchParams":return g(t);case"XMSGIgReceiverFetchXmaClipFetchParams":return d(t);default:return!1}}function T(e){return e==null?!1:o("LSThreadBitOffset").has(261,e)}l.isInstamadilloTTLCTextEnabled=u,l.isInstamadilloTTLCCallingEnabled=c,l.isInstamadilloTTLCClipEnabled=d,l.isInstamadilloTTLCReelShareEnabled=m,l.isInstamadilloTTLCMediaShareEnabled=p,l.isInstamadilloTTLCStoryShareEnabled=_,l.isInstamadilloTTLCLinkEnabled=f,l.isInstamadilloTTLCGenericXmaEnabled=g,l.isInstamadilloTTLCImageEnabled=h,l.isInstamadilloTTLCVideoEnabled=y,l.isInstamadilloTTLCAudioEnabled=C,l.isInstamadilloTTLCProfileEnabled=b,l.isIGDTTLCEnabledForThread=v,l.threadHasInstamadilloTTLCCapability=S,l.isIGDTTLCEnabledForIGDCandidate=R,l.getTtlcMessageTypeMap=L,l.getTTLCLoggingExtraData=E,l.getTTLCBooleanAnnotations=k,l.isXmaReceiverFetchTTLCEnabled=I,l.isInstamadilloOptionalE2EE=T}),98);
__d("IGDInstamadilloUtils",["IGDThreadTTLCUtils","LSThreadBitOffset","gkx","isInstamadillo"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e==null?void 0:e.transportKey)==="Instamadillo"}function s(e){return e==null?!1:o("LSThreadBitOffset").has(214,e)}function u(e){return e==null?!1:o("LSThreadBitOffset").has(212,e)}function c(e){return e==null?!1:o("LSThreadBitOffset").has(38,e)}function d(e){return e==null?!1:o("LSThreadBitOffset").has(211,e)}function m(e){var t=s(e),n=p(e);return n||t}function p(e){if(r("gkx")("6650"))return!1;var t=c(e),n=s(e),a=o("IGDThreadTTLCUtils").threadHasInstamadilloTTLCCapability(e);return t&&(n||a)}function _(t,n){var r=e(t)&&t.ephemeralExpirationTs!=null;return n&&r||!n&&!r}function f(t){var n=e(t);return n?r("isInstamadillo")():!0}l.isInstamadilloMessage=e,l.isInstamadilloCutover=s,l.isInstamadilloDMToggleEnabled=u,l.isIGDDisappearingModeEnabled=c,l.isInstamadilloTransportEnabled=d,l.isInstamadilloHardblockEnabled=m,l.isDMHardblockedEnabled=p,l.shouldRenderMessageReply=_,l.canMutateIGDMessage=f}),98);
__d("IGDRouteProvider.react",["react","react-compiler-runtime","useCurrentRoute"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext;function m(e){var t,n=e==null||(t=e.params)==null?void 0:t.thread_key;return n!=null&&typeof n=="string"?n:null}var p=c();function _(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=r("useCurrentRoute")(),i;t[0]!==a?(i=m(a),t[0]=a,t[1]=i):i=t[1];var l=i,u;return t[2]!==n||t[3]!==l?(u=s.jsx(p.Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}function f(){return d(p)}l.IGDRouteContextProvider=_,l.useThreadKeyFromCurrentRoute=f}),98);
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e||(e=o("react"))).useEffect;function d(e){return babelHelpers.extends({},o("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(e),{is_dm:o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e),is_instamadillo:o("IGDInstamadilloUtils").isInstamadilloTransportEnabled(e),is_instamadillo_tlc:o("IGDInstamadilloUtils").isInstamadilloCutover(e)})}function m(e,t){var n,r=o("IGDInstamadilloUtils").isInstamadilloCutover(e),a=o("IGDInstamadilloUtils").isInstamadilloTransportEnabled(e),i=o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e);t.addAnnotationBoolean("is_instamadillo",a),t.addAnnotationBoolean("is_instamadillo_tlc",r),t.addAnnotationBoolean("is_dm",i),t.addAnnotationBoolean("is_instamadillo_ttlc",(n=o("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_audio",n.isInstamadilloTTLCAudioEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_clip",n.isInstamadilloTTLCClipEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",n.isInstamadilloTTLCGenericXmaEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_image",n.isInstamadilloTTLCImageEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_link",n.isInstamadilloTTLCLinkEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_media_share",n.isInstamadilloTTLCMediaShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_profile",n.isInstamadilloTTLCProfileEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",n.isInstamadilloTTLCReelShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_story_share",n.isInstamadilloTTLCStoryShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_text",n.isInstamadilloTTLCTextEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_video",n.isInstamadilloTTLCVideoEnabled(e))}function p(e){var t=o("react-compiler-runtime").c(3),n,a;t[0]!==e?(n=function(){r("InteractionTracing").getPendingInteractions().forEach(function(t){m(e,t)})},a=[e],t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),o("Int64Hooks").useEffectInt64(n,a)}var _=new Set;function f(e){var t=o("react-compiler-runtime").c(7),n;t[0]!==e.consistentThreadFbid||t[1]!==e.threadKey||t[2]!==e.threadSubtype||t[3]!==e.threadType?(n=function(){var t=(s||(s=o("I64"))).to_string(e.threadKey);return r("InteractionTracing").getPendingInteractions().forEach(function(n){var r=_.has(t);n.addAnnotationBoolean("is_thread_visited",r),n.addAnnotation("thread_key",(s||(s=o("I64"))).to_string(e.threadKey)),e.consistentThreadFbid!=null&&n.addAnnotation("consistent_thread_fbid",(s||(s=o("I64"))).to_string(e.consistentThreadFbid)),n.addAnnotationInt("thread_type",(u||(u=o("LSIntEnum"))).toNumber(e.threadType)),e.threadSubtype!=null&&n.addAnnotation("thread_subtype",(s||(s=o("I64"))).to_string(e.threadSubtype))}),function(){_.add(t)}},t[0]=e.consistentThreadFbid,t[1]=e.threadKey,t[2]=e.threadSubtype,t[3]=e.threadType,t[4]=n):n=t[4];var a;t[5]!==e?(a=[e],t[5]=e,t[6]=a):a=t[6],o("Int64Hooks").useEffectInt64(n,a)}function g(){var e=o("react-compiler-runtime").c(3),t=o("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),n,a;e[0]!==t?(n=function(){r("InteractionTracing").getPendingInteractions().forEach(function(e){if(t==null){e.addAnnotationInt("rendered_direct_null_state",1),e.addAnnotationInt("has_thread_key",0);return}e.addAnnotationInt("has_thread_key",1),e.addAnnotationInt("rendered_direct_null_state",0)})},a=[t],e[0]=t,e[1]=n,e[2]=a):(n=e[1],a=e[2]),c(n,a)}l.getInstamadilloBooleanAnnotations=d,l.addInstamadilloAnnotationsToInteractionTrace=m,l.useAddInstamadilloAnnotationsToInteractionTraces=p,l.useAddThreadAnnotationToInteractionTraces=f,l.useAddThreadRouteAnnotations=g}),98);
__d("LSResult",[],(function(t,n,r,o,a,i){"use strict";function e(e){return[e]}i.default=e}),66);
__d("LSBase64Encode.nop",["EBBase64Encode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(a?r("EBBase64Encode")(a):void 0))};e.__nop_name__="LSBase64Encode",l.default=e}),98);
__d("LSCheckIfAuthoritativeThreadMissingMiActMapping",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r("gkx")("4792")?t.sequence([function(r){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[3]=!1:(r=a.item,n[3]=t.i64.eq(r.authorityLevel,t.i64.cast([0,80])))})},function(e){return n[1]=n[3]}]):(o=i.item,n[1]=!1)})},function(e){return n[0]=n[1]}]):t.resolve(n[0]=!1)},function(e){return o[0]=n[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckIfAuthoritativeThreadMissingMiActMappingStoredProcedure",e.__tables__=["mi_act_mapping_table","threads"];var s=e;l.default=s}),98);
__d("LSContactUserBlockAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});i.default=e}),66);
__d("LSGroupParticipantJoinState",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});i.default=e}),66);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,r){return new(u||(u=n("Promise")))(function(n,a){var i=o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(r).subscribe(function(t,r){if(r.operation!=="delete"&&(e||(e=o("I64"))).equal(r.value.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2)))return i(),n()})})}function d(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(n)).then(function(r){if(!(r!=null&&(e||(e=o("I64"))).equal(r.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))))return c(t,n)})}function m(e){return c(e,(s||(s=o("LSIntEnum"))).ofNumber(1))}l.maybeWaitForSyncGroup=d,l.use=m}),98);
__d("LSIsEncryptionVersionSecure",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.i64.eq(e[0],t.i64.cast([0,4]))?n[0]=!1:(t.i64.eq(e[0],t.i64.cast([0,3]))?n[1]=!0:(t.i64.eq(e[0],t.i64.cast([0,2]))?n[2]=!0:(t.i64.eq(e[0],t.i64.cast([0,0]))?n[3]=!0:(t.i64.eq(e[0],t.i64.cast([0,99])),n[4]=!1,n[3]=n[4]),n[2]=n[3]),n[1]=n[2]),n[0]=n[1]),r[0]=n[0],t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],void 0,void 0,t.i64.cast([0,0]),e[3],e[4],void 0,e[5],e[7]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3226"),s=o("FalcoLoggerInternal").create("meb_client_logs",e),u=s;l.default=u}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){return r("MebClientLogsFalcoEvent").log(function(){return{calling_class:l,device_family_id:void 0,device_registration_id:void 0,log_level:(s||(s=o("I64"))).to_string(d),msg:u,trace_ids:r("LSVec").toArray(c)}}),(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSLogMebClientEvent",l.default=u}),98);
__d("LSQplAnnotateInt.nop",["EBMarkerIdToQPLEvent","I64","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){try{var t,m=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),p=o("WAHashStringToNumber").hashStringToNumber(u);return r("QPLUserFlow").addAnnotations(m,{int:(t={},t[c]=(s||(s=o("I64"))).to_int32(d),t)},{instanceKey:p}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};u.__nop_name__="LSQplAnnotateInt",l.default=u}),98);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{string:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateString",l.default=s}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addPoint(t,u,{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkPoint",l.default=s}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),d=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").start(t,{instanceKey:d}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplStartTrace",l.default=s}),98);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCheckIfAuthoritativeThreadMissingMiActMapping","LSCreateOfflineThreadingID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return t.i64.neq(e[1],void 0)?t.sequence([function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[void 0,void 0],r[3]=o[0],r[4]=o[1],o):(n=l.item,a=[e[1],n.authorityLevel],r[3]=a[0],r[4]=a[1])})},function(e){var t;return t=[r[3],r[4]],r[0]=t[0],r[1]=t[1],t}]):t.resolve((o=[void 0,void 0],r[0]=o[0],r[1]=o[1],o))},function(o){return t.i64.neq(r[0],void 0)?t.sequence([function(o){return t.i64.neq(r[1],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSCheckIfAuthoritativeThreadMissingMiActMapping"),r[0]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(n){return t.i64.gt(e[2],r[1])?t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(t){var n=t.update,r=t.item;return n({authorityLevel:e[2]})}):t.resolve()},function(o){return r[3]||t.i64.gt(e[2],r[1])?(r[4]=new t.Map,r[4].set("thread_fbid",r[0]),r[4].set("force_upsert",!1),r[4].set("use_open_messenger_transport",!1),r[4].set("sync_group",t.i64.cast([0,95])),r[4].set("metadata_only",!1),r[4].set("preview_only",!1),r[5]=r[4].get("thread_fbid"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,209]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve()},function(e){return r[2]=r[0]}]):t.sequence([function(o){return t.i64.neq(e[1],void 0)?t.sequence([function(o){return t.i64.neq(e[2],t.i64.cast([0,20]))?(r[11]=new t.Map,r[11].set("thread_fbid",e[1]),r[11].set("force_upsert",!1),r[11].set("use_open_messenger_transport",!1),r[11].set("sync_group",t.i64.cast([0,95])),r[11].set("metadata_only",!1),r[11].set("preview_only",!1),r[12]=r[11].get("thread_fbid"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,209]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(t){return r[3]=e[1]}]):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return r[3]=r[12]}])},function(n){var o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v;return t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?(o=["inbox",t.i64.cast([0,0])],r[4]=o[0],r[5]=o[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,1]))?(a=["pending",t.i64.cast([-1,4294967295])],r[11]=a[0],r[12]=a[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,2]))?(i=["other",t.i64.cast([-1,4294967294])],r[13]=i[0],r[14]=i[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,3]))?(l=["spam",t.i64.cast([-1,4294967293])],r[15]=l[0],r[16]=l[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,5]))?(s=["hidden",t.i64.cast([-1,4294967292])],r[17]=s[0],r[18]=s[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,4]))?(u=["archived",t.i64.cast([-1,4294967286])],r[19]=u[0],r[20]=u[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,15]))?(c=["restricted",t.i64.cast([-1,4294967281])],r[21]=c[0],r[22]=c[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,19]))?(d=["interop",t.i64.cast([-1,4294967277])],r[23]=d[0],r[24]=d[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,29]))?(m=["interop_pending",t.i64.cast([-1,4294967267])],r[25]=m[0],r[26]=m[1]):(p=["inbox",t.i64.cast([0,0])],r[25]=p[0],r[26]=p[1]),_=[r[25],r[26]],r[23]=_[0],r[24]=_[1]),f=[r[23],r[24]],r[21]=f[0],r[22]=f[1]),g=[r[21],r[22]],r[19]=g[0],r[20]=g[1]),h=[r[19],r[20]],r[17]=h[0],r[18]=h[1]),y=[r[17],r[18]],r[15]=y[0],r[16]=y[1]),C=[r[15],r[16]],r[13]=C[0],r[14]=C[1]),b=[r[13],r[14]],r[11]=b[0],r[12]=b[1]),v=[r[11],r[12]],r[4]=v[0],r[5]=v[1]),r[6]=t.i64.cast([0,1083495711]),r[7]=t.i64.cast([0,1024]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,0]),r[10]=t.i64.cast([0,134217728]),t.forEach(t.filter(t.db.table(9).fetch([[[r[3]]]]),function(n){return t.i64.eq(n.threadKey,r[3])&&t.i64.lt(n.authorityLevel,e[2])}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[3],mailboxType:t.i64.cast([0,4096]),threadType:e[0],folderName:r[4],lastActivityTimestampMs:t.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:t.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),parentThreadKey:r[5],authorityLevel:e[2],capabilities:r[6],capabilities2:r[7],capabilities3:r[8],capabilities4:r[9],capabilities5:r[10],unsendLimitMs:t.i64.cast([-1,4294967295]),syncGroup:t.i64.cast([0,95]),isHidden:!0,clientThreadKey:r[3]})},function(e){return r[2]=r[3]}])},function(e){return o[0]=r[2]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyE2EEMetadataThreadExistsV2","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyE2EEMetadataThreadExistsV2"),a.threadType,a.threadKey,a.authorityLevel);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=[0,31,35,55,56,58,24,25,19,85],p=[0,31,35,55,56,58,24,25,19,85,8,22],_=[35,19,85,56,24,25];function f(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(t,a){r("promiseDone")((async function(){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.participants).getKeyRange(t));if(e!=null){var l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(e.threadKey).filter(g));if(l!=null){var c=(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").MN_BLOCK))?o("LSThreadBitOffset").clear(m,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5):(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").FB_BLOCK))?o("LSThreadBitOffset").clear(p,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5):o("LSThreadBitOffset").set(_,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5),d=c[0],f=c[1];await n.runInTransaction(function(e){var t=babelHelpers.extends({},l,{capabilities:d,capabilities2:f});return e.threads.put(t)},"readwrite",void 0,void 0,i.id+":137")}}})())},t[0]=n,t[1]=a):a=t[1],a}function g(e){return(s||(s=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(15))}l.clearedMnBlockCapabilities=m,l.clearedFbBlockCapabilities=p,l.useChangeThreadBlockCapabilities=f}),98);
__d("MAWReliabilityMonitor",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["PENDING","OK","ERROR","UNKNOWN"]),l=(function(){function e(){this.$1=new Map,this.$2=new Map,this.$3=[]}var t=e.prototype;return t.startMonitoring=function(t,n){var e=new u(t,n,this);return this.$1.set(t,e),this.recordReport(e),e},t.stopMonitoring=function(t){this.$1.delete(t.identifier),this.$2.delete(t.identifier)},t.recordReport=function(t){this.$2.set(t.identifier,babelHelpers.extends({},t.selfAssessmentFn(),{identifier:t.identifier,timestamp:Date.now()})),this.$4()},t.onAggregatedReportChange=function(t){this.$3.push(t)},t.$4=function(){var e=this.getAggregatedReportEntity();this.$3.forEach(function(t){return t(e)})},t.getAggregatedReportEntity=function(){return new s(this.$2)},t.triggerAllSelfAssessments=function(){var e=this;this.$1.forEach(function(t){e.recordReport(t)})},t.getAggregatedReport=function(){return this.triggerAllSelfAssessments(),this.$2},t.TEST_ONLY_reset=function(){this.$1.clear(),this.$2.clear(),this.$3=[]},e})(),s=(function(){function e(e){this.$1=e}var t=e.prototype;return t.toAckPayloadFormat=function(){return Array.from(this.$1.values())},t.toString=function(){var e=Object.fromEntries(this.$1);return JSON.stringify(e)},e})(),u=(function(){function e(e,t,n){this.identifier=e,this.selfAssessmentFn=t,this.$1=n}var t=e.prototype;return t.stopMonitoring=function(){this.$1.stopMonitoring(this)},t.updateState=function(){this.$1.recordReport(this)},e})(),c=new l;i.HealthReportState=e,i.ReliabilityAggregatedReport=s,i.ReportableModule=u,i.MAWReliabilityMonitorSingleton=c}),66);
__d("MAWSetupWorkerAuxStateForLogging",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=[],s=3,u={getWorkerAge:function(){if(u.workerStartTime!=null)return Math.floor((Date.now()-r("nullthrows")(u.workerStartTime))/1e3)},restartMessageTypes:[],restartReasons:[],workerStartTime:null,workerTerminatedPermanently:!1};function c(){u.workerStartTime=Date.now()}function d(t){e.push(t),e.length>s&&e.shift()}function m(){return e.join(",")}l.HEART_BEAT_HISTORY=e,l.WorkerLifeCycleState=u,l.resetWorkerCreationTime=c,l.addWorkerHeartbeatToHistory=d,l.getHeartbeatHistoryAsString=m}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","QuickPerformanceLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e={},e[o("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,e[o("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,e[o("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,e);(function(){Object.keys(d).forEach(function(e){o("MAWMIC").addIntAnnotation(e,0)})})();function m(e){o("MAWMIC").addIntAnnotation(e,++d[e])}function p(){return d.occamadilloBatchesSentToWorker}var _=new(r("Deferred")),f=new Set,g=new Set,h=new Set,y=new Set;function C(e){var t=e.callingSource;y.add((c||(c=o("LSIntEnum"))).toNumber(t)),o("MAWMIC").addIntArrayAnnotation(o("MAWMICSchema").ANNOTATIONS.occamadilloCallingSources,Array.from(y))}var b=null;function v(e){if(o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_start),f.has(e)){m(o("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}g.add(e),o("LSPlatformLsInitLog").LsSync.isRunning()&&h.add(e),b=(s||(s=r("QuickPerformanceLogger"))).currentTimestamp(),f.add(e),o("MAWMIC").addIntAnnotation("occamadilloThreadCount",f.size),o("LSPlatformLsInitLog").LsSync.hasEnded()&&m(o("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync)}function S(){o("MAWMIC").addBoolAnnotation("threadMappingAcked",!0)}async function R(e){if(r("gkx")("2661"))await _.getPromise();else{var t=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton;await o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(t,(c||(c=o("LSIntEnum"))).ofNumber(95))}g.delete(e),h.delete(e),o("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",f.size-g.size),E()}function L(){_.resolve(),E()}function E(){if(o("MAWMIC").addIntAnnotation("occamadilloThreadCount",f.size),o("LSPlatformLsInitLog").LsSync.hasEnded()&&h.size===0){o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end);return}g.size===0&&o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end)}l.incrementCounter=m,l.getBatchesSentNumber=p,l.markThreadPassedToNativeOp=C,l.addPendingThread=v,l.markBridgeCallAcked=S,l.removePendingThread=R,l.completeSync=L,l.maybeEndOccamadilloThreadMapping=E}),98);
__d("MAWInitError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.error=void 0,r.name="MAWInitError",r.message=t,r.error=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MAWInitError=e}),66);
__d("MAWInit",["MAWCurrentUser","MAWInitError","MAWMIC","MWQPLJoinId","MultipleTabsLogger","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","gkx","qpl","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(25310776,"6155"),u=!1,c=[],d=[],m=!1;function p(){m||(m=!0,r("QPLUserFlow").addAnnotations(s,{bool:{armadillo_init_sync_api_improvements:r("gkx")("24025"),isArmadilloPublicLaunchUser:r("gkx")("23405"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}}))}var _=!1,f=function(){return document.visibilityState!==void 0?document.visibilityState==="hidden":document.hidden},g=function(){y("visibility_change_"+(f()?"hidden":"visible"))};function h(){_||(o("MAWMIC").addPoint("maw_init_start"),_=!0,r("QPLUserFlow").start(s,babelHelpers.extends({annotations:{bool:{initiallyHidden:f()},string:{hostname:window.location.hostname}},cancelOnUnload:!0},o("MWQPLJoinId").allowJoinId?{joinOptions:{joinId:o("MWQPLJoinId").MWQPLJoinId}}:{})),r("QPLUserFlow").addAlignmentPointForJoin(s,0,{requestId:o("MWQPLJoinId").MWQPLJoinId}),o("MultipleTabsLogger").addAnnotationToQPLEvent(s),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){r("QPLUserFlow").addAnnotations(s,e)}),p(),document.addEventListener("visibilitychange",g),c.forEach(function(e){return e()}),d.forEach(function(e){return e()}),c.splice(0,c.length),d.splice(0,d.length))}function y(t,n){if(!_||u){if(!_&&n!=null&&n.allowEarlyLogPoints){var o=(e||(e=r("QuickPerformanceLogger"))).currentTimestamp();d.push(function(){r("QPLUserFlow").addPoint(s,t,{timestamp:o})})}return}p(),r("QPLUserFlow").addPoint(s,t)}function C(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{bool:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{bool:(o={},o[e]=t,o)})}function b(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{string:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{string:(o={},o[e]=t,o)})}function v(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{string_array:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{string_array:(o={},o[e]=t,o)})}function S(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{int:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{int:(o={},o[e]=t,o)})}function R(){p(),u=!0,m=!1,document.removeEventListener("visibilitychange",g)}function L(e,t){R();var n=t instanceof o("MAWInitError").MAWInitError&&t.error?t.error:t;r("QPLUserFlow").addAnnotations(s,{string:{errorDescription:n==null?void 0:n.message}}),r("QPLUserFlow").endFailure(s,e,{error:n}),o("MAWMIC").fail(e,n)}function E(e,t){R(),r("QPLUserFlow").addAnnotations(s,{string:{cancelReason:e}}),t&&r("QPLUserFlow").markError(s,"maw_init_cancel_with_error",{error:t}),r("QPLUserFlow").endCancel(s),o("MAWMIC").addStringAnnotation("mawInitCancelReason",e),o("MAWMIC").cancel("maw_init_cancel",t),r("QPLUserFlow").addAnnotations(r("qpl")._(29818881,"6702"),{string:{maw_cancel_reason:e,maw_error_message:t==null?void 0:t.message}})}function k(t){u||(R(),o("MAWMIC").addStringAnnotation("mawInitDropReason",t),(e||(e=r("QuickPerformanceLogger"))).markerDrop(s))}function I(){R(),r("QPLUserFlow").endSuccess(s),o("MAWMIC").addPoint("maw_init_end")}async function T(e,t){var n=e+"_start",r=e+"_end";y(n);var o=await t();return y(r),o}var D={isCompleted:function(){return u}},x={addBoolAnnotation:C,addIntAnnotation:S,addStringAnnotation:b,addStringArrayAnnotation:v,cancel:E,drop:k,endSuccess:I,fail:L,logPoint:y,measurePerformance:T,start:h};l.MAWInitState=D,l.MAWInit=x}),98);
__d("MAWStartupLoggingUtils",["FBLogger","MAWInit","MAWMIC","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a,i=(a=t==null?void 0:t.message)!=null?a:"";i.indexOf("Failed to execute 'importScripts'")>=0?o("MAWInit").MAWInit.fail("import_scripts_failure",r("getErrorSafe")(t)):o("MAWInit").MAWInit.fail("worker_error",r("getErrorSafe")(t)),r("FBLogger")("messenger_web").mustfix("[MAWWebWorkerSingletonAsync: "+e+"]: %s:%s:%s:%s:%s:%s:%s",JSON.stringify(t==null?void 0:t.message),t==null?void 0:t.lineno,t==null?void 0:t.colno,t==null?void 0:t.filename,JSON.stringify(t,window.Object.getOwnPropertyNames(t)),t==null?void 0:t.name,n)}function s(e){var t=function(o){var n=o==null?void 0:o.data;if(typeof n=="object")if((n==null?void 0:n.type)==="importScripts_error"){var a,i,l,s,u,c;e.removeEventListener("message",t);var d=r("FBLogger")("messenger_web");d=d.addMetadata("FBLOGGER","ERROR_STACK",(a=typeof(n==null?void 0:n.stack)=="string"?n==null?void 0:n.stack:JSON.stringify(n==null?void 0:n.stack))!=null?a:"no_stack");var m=n!=null?n:{},p=m.error_code,_=m.error_msg,f=m.error_name,g=m.source,h=(i=n==null?void 0:n.perfEntry)!=null?i:{},y=h.duration,C=h.encodedBodySize,b=h.responseStatus,v=h.transferSize;d.mustfix("[MAWWebWorkerSingletonAsync Script Import Error Details]: %s:%s:%s || errCode:%s || respStatus:%s || encBodySize:%s || duration:%s || transferSize:%s",g!=null&&JSON.stringify(g)||"no_source",f!=null&&JSON.stringify(f)||"no_name",_!=null&&JSON.stringify(_)||"no_msg",p!=null&&JSON.stringify(p)||"none",(l=JSON.stringify(b))!=null?l:"none",(s=JSON.stringify(C))!=null?s:"none",(u=JSON.stringify(y))!=null?u:"none",(c=JSON.stringify(v))!=null?c:"none")}else(n==null?void 0:n.type)==="importScripts_success"&&e.removeEventListener("message",t)};e.addEventListener("message",t)}var u=new Set(["worker_connection_established","worker_init_point_hsdp_end","worker_init_point_hblp_end","get_worker_rev_ack_received","old_worker_shutdown_end","old_worker_shutdown_start"]);function c(e){var t=e.data.annotations;if(t!=null){var n={allowEarlyAnnotations:!0};Object.keys(t).forEach(function(e){var r,a=(r=t[e])!=null?r:{};Object.entries(a).forEach(function(t){var r=t[0],a=t[1],i="workerInit"+r.charAt(0).toUpperCase()+r.substring(1);e==="int"&&typeof a=="number"?(o("MAWInit").MAWInit.addIntAnnotation(i,a,n),o("MAWMIC").addIntAnnotation(i,a)):e==="string"&&typeof a=="string"?(o("MAWInit").MAWInit.addStringAnnotation(i,a,n),o("MAWMIC").addStringAnnotation(i,a)):e==="bool"&&typeof a=="boolean"&&(o("MAWInit").MAWInit.addBoolAnnotation(i,a,n),o("MAWMIC").addBoolAnnotation(i,a))})})}var r={allowEarlyLogPoints:!0};if(e.type==="point"){if(u.has(e.data.event)){var a="worker_"+e.data.event;o("MAWInit").MAWInit.logPoint(a,r),o("MAWMIC").addPoint(a)}}else e.type==="end"&&(e.data.cancel===!0?o("MAWInit").MAWInit.logPoint("worker_creation_cancel",r):e.data.errorName!=null&&(o("MAWInit").MAWInit.addStringAnnotation("errorDescription",e.data.errorName,{allowEarlyAnnotations:!0}),o("MAWInit").MAWInit.logPoint("worker_creation_fail",r)))}l.logWorkerError=e,l.setImportScriptsErrorListener=s,l.logSharedWorkerQPLEvents=c}),98);
__d("MAWWorkerWatchdogRecovery",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}i.setRecoveryForWatchdog=l,i.getWorkerRecoveryForWatchdog=s}),66);
__d("SharedWorkerDevChangeManager",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=!1,s=new Set;function u(e,t){var n=t.storageWorkerResource,r=t.tabResource;return!0}function c(e){return!1}function d(e){}l.shouldUseStorageWorkerForDev=u,l.shouldUpgradeWorkerForDevExperimental=c,l.trackCreatedWorker=d}),98);
__d("SharedWorkerEventManager",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=function(n){var e,o,a;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="console"&&typeof((o=n.data)==null?void 0:o.response)=="object"&&((a=n.data)==null?void 0:a.response)!=null){var i=n.data.response,l=i.method,s=i.args;if(typeof l!="string"||!["log","error","info","debug","warn"].includes(l)){r("FBLogger")("worker").mustfix("Unexpected console method: %s",String(l));return}if(!Array.isArray(s)){r("FBLogger")("worker").mustfix('Expected console args "%s" to be an array',JSON.stringify(s));return}t({method:l,args:s})}},o=e.port;return o.addEventListener("message",n),function(){return o.removeEventListener("message",n)}}function s(e,t){var n=function(n){var e;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="sw-uncaught-error"){var r,o,a=typeof((r=n.data)==null?void 0:r.e)=="object"?(o=n.data.e)!=null?o:{}:{},i=a.error,l=a.lineno,s=a.colno,u=a.filename,c=a.message;t({error:i instanceof Error?i:null,errorObject:{lineno:typeof l=="number"?l:null,colno:typeof s=="number"?s:null,filename:typeof u=="string"?u:null,message:typeof c=="string"?c:null}})}},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function u(e,t,n){var o=function(o){var e;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="sw-get-rev"&&typeof o.data.response=="object"){var a,i;t==null||t.markPoint("get_worker_rev_ack_received");var l=typeof o.data=="object"&&typeof((a=o.data)==null?void 0:a.response)=="object"?(i=o.data)==null?void 0:i.response:{},s=l==null?void 0:l.workerRevision,u=l==null?void 0:l.spinTime,c=l==null?void 0:l.workerChecksum;if(s==null||typeof s!="number"){t==null||t.addAnnotations({string:{malformedData:"rev is non-number"}}),r("FBLogger")("worker").mustfix("Expected worker rev to be non-null number, but instead received: %s",String(s));return}if(u==null||typeof u!="number"){t==null||t.addAnnotations({string:{malformedData:"spin_time is non-number"}}),r("FBLogger")("worker").mustfix("Expected worker spin time to be non-null number, but instead received: %s",String(u));return}n({rev:s,spinTime:u,workerChecksum:typeof c=="string"?c:void 0})}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function c(e,t,n){var r=function(a){var o;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="sw-shutdown"&&typeof a.data.response=="object"){var i,l,s,u,c,d,m=typeof((i=a.data.response)==null?void 0:i.reason)=="string"?(l=a.data.response)==null?void 0:l.reason:null,p=typeof((s=a.data.response)==null?void 0:s.workerID)=="string"?(u=a.data.response)==null?void 0:u.workerID:null,_=typeof((c=a.data.response)==null?void 0:c.isInitialized)=="boolean"?(d=a.data.response)==null?void 0:d.isInitialized:null;t({reason:m,workerID:p,isInitialized:_}),(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function d(e,t){e.port.addEventListener("message",function(e){var n,r,o;typeof e.data=="object"&&((n=e.data)==null?void 0:n.type)==="sw-uptime-tracking"&&typeof((r=e.data)==null?void 0:r.response)=="object"&&typeof((o=e.data)==null||(o=o.response)==null?void 0:o.trackerID)=="number"&&t({trackerID:e.data.response.trackerID})})}function m(e,t,n){var o=function(o){var e,a;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="execute-worker-ack"&&typeof((a=o.data)==null?void 0:a.response)=="object"){var i,l,s,u=typeof o.data=="object"&&typeof((i=o.data)==null?void 0:i.response)=="object"?(l=(s=o.data)==null?void 0:s.response)!=null?l:{}:{},c=u.workerRevision,d=u.spinMode,m=u.spinTime,p=u.firstInit,_=u.errorGettingSiteData,f=u.error;if(typeof p!="boolean"){t==null||t.addAnnotations({string:{malformedData:"firstInit is non-boolean"}}),r("FBLogger")("worker").mustfix("Expected firstInit to be a boolean, but instead received: %s",String(p));return}var g=_!=null?_:f;if(typeof g=="string")return n({err:g,isFirstInit:p});if(typeof c=="number"&&typeof d=="number"&&typeof m=="number")return n({workerRev:c,workerSpinTime:m,workerSpinMode:d,isFirstInit:p});t==null||t.addAnnotations({string:{malformedData:"workerRevision, spinMode, and/or spinTime are non-numbers"}}),r("FBLogger")("worker").mustfix("Expected workerRevision, spinMode, and spinTime to be non-null number, but instead received: %s %s %s",String(c),String(d),String(m))}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function p(e,t,n,o){var a=function(l){var i,s;if(typeof l.data=="object"&&((i=l.data)==null?void 0:i.type)==="execute-worker-imports"&&typeof((s=l.data)==null?void 0:s.response)=="object"){var u,c,d;(o==null?void 0:o.once)===!0&&e.port.removeEventListener("message",a),t==null||t.markPoint("bundle_imports_ack");var m=typeof l.data=="object"&&typeof((u=l.data)==null?void 0:u.response)=="object"?(c=(d=l.data)==null?void 0:d.response)!=null?c:{}:{},p=m.err,_=m.attempts;if(p!=null&&typeof p!="string"){t==null||t.addAnnotations({string:{malformedData:"err is neither null or a string"}}),r("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(p));return}if(_!=null&&typeof _!="number"){t==null||t.addAnnotations({string:{malformedData:"attempts is neither null or a number"}}),r("FBLogger")("worker").mustfix("Expected attempts to be a number or null, but instead receieved: %s",String(_));return}n({err:p,attempts:_})}},i=e.port;return i.addEventListener("message",a),function(){return i.removeEventListener("message",a)}}function _(e,t,n){var o=function(o){var e;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="ww-hrp-init"){var a,i,l;t==null||t.markEventEnd("hrp_init");var s=typeof o.data=="object"&&typeof((a=o.data)==null?void 0:a.response)=="object"?(i=(l=o.data)==null?void 0:l.response)!=null?i:{}:{},u=s.err;if(u!=null&&typeof u!="string"){t==null||t.addAnnotations({string:{malformedData:"err is neither null or a string"}}),r("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(u));return}n({err:u})}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function f(e,t){var n=function(n){var e,r,o;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="worker-init-mark"&&typeof((r=n.data)==null?void 0:r.response)=="object"&&typeof((o=n.data)==null||(o=o.response)==null?void 0:o.point)=="string"){var a;t((a=n.data)==null||(a=a.response)==null?void 0:a.point)}},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function g(e,t,n){var r=function(a){var o,i,l;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="self-terminate"&&typeof((i=a.data)==null?void 0:i.response)=="object"&&typeof((l=a.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c,d,m,p,_,f=(s=a.data)==null||(s=s.response)==null?void 0:s.from,g=typeof((u=a.data)==null||(u=u.response)==null?void 0:u.reason)=="string"?(c=a.data)==null||(c=c.response)==null?void 0:c.reason:"unknown",h=typeof((d=a.data)==null||(d=d.response)==null?void 0:d.workerID)=="string"?(m=a.data)==null||(m=m.response)==null?void 0:m.workerID:"unknown",y=typeof((p=a.data)==null||(p=p.response)==null?void 0:p.error)=="string"?(_=a.data)==null||(_=_.response)==null?void 0:_.error:void 0;(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r),t(f,g,h,y)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function h(e,t){var n=t!=null?t:{},r=n.reason,o=n.upgrade;e.port.postMessage({type:"sw-shutdown",args:[{reason:r,upgrade:o}]})}function y(e){e.port.postMessage({type:"sw-get-rev",args:[]})}function C(e,t){var n=t!=null?t:{},r=n.jsModuleResource,o=n.isDev;e.port.postMessage({type:"execute-worker",args:[r!=null?r:{},o]})}var b=["no-hrp","initialized","processed"];function v(e,t,n){var r=function(a){var o,i,l;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="connection-ack"&&typeof((i=a.data)==null?void 0:i.response)=="object"&&typeof((l=a.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c,d,m,p=typeof((s=a.data)==null||(s=s.response)==null?void 0:s.workerID)=="string"?(u=a.data)==null||(u=u.response)==null?void 0:u.workerID:void 0,_=typeof((c=a.data)==null||(c=c.response)==null?void 0:c.hrpStatus)=="string"?(d=a.data)==null||(d=d.response)==null?void 0:d.hrpStatus:void 0;t((m=a.data)==null||(m=m.response)==null?void 0:m.from,p,_!=null&&b.includes(_)?_:void 0),(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function S(e,t){var n=function(n){t(n.data)},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function R(e){e.port.postMessage({type:"ww-connection-ack"})}function L(e,t,n){var r=t.isDev,o=t.hrp,a=t.js_env;e.port.postMessage({type:"ww-hrp-init",hrp:o,is_dev:r,js_env:a,tiered:!0})}function E(e,t){var n=t.trackerID;e.port.postMessage({type:"sw-uptime-tracking",args:{trackerID:n}})}function k(t){var n=e(t,function(e){var t,n=e.args,r=e.method;(t=console)[r].apply(t,n)}),o=s(t,function(e){var t=e.error,n=e.errorObject;t!=null?r("FBLogger")("worker").catching(t).mustfix("Shared Worker uncaught error."):r("FBLogger")("worker").mustfix("Shared Worker uncaught error with no Error object. %s:%d:%d:%s",n.message,n.lineno,n.colno,n.filename)});return function(){n(),o()}}l.registerLogFowardingListener=e,l.registerUncaughtErrorForwardingListener=s,l.registerGetWorkerRevListener=u,l.registerWorkerShutdownListener=c,l.registerUptimeTrackerListener=d,l.registerExecuteWorkerAckListener=m,l.registerExecuteWorkerImportsListener=p,l.registerHrpInitListener=_,l.registerWorkerInitPointsListener=f,l.registerWorkerSelfTerminationListener=g,l.emitWorkerShutdown=h,l.emitGetRev=y,l.emitExecuteWorker=C,l.registerConnectionAckListener=v,l.registerAnyMessageListener=S,l.emitConnectionAckRequest=R,l.emitHrpInit=L,l.emitUptimeTracking=E,l.registerForwardListeners=k}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Run","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e){r("FBLogger")("messenger_web").mustfix(e)}function s(t,n){var a="Failed to execute 'request' on 'LockManager'",i="Lock broken by another request with the 'steal' option.",l=function(t,n,r){var e=t.get(n);if(e!=null)return e;var o=r();return t.set(n,o),o};try{var s=o("LocalStorageWrapper").getStorage(e),u=function(r,a){o("LocalStorageWrapper").setItemGuarded(s,r,a,e,n==null?void 0:n.onQuotaExceeded)},c=function(n){o("LocalStorageWrapper").removeItemGuarded(s,n,e)},d=function(n){return o("LocalStorageWrapper").getItemGuarded(s,n,e)},m=(function(){function e(e,t){this.lockName=e,this.tabId=t,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var t=e.prototype;return t.run=function(t){return this.$1(t,0)},t.$1=function(t,n){var e=this,o=function(o){return window.requestAnimationFrame(function(){return e.$1(t,n+1).then(o)})},a=function(t){return d(t)==null};return u(this.lockA,this.tabId),new Promise(function(i){var l=function(){try{t(),i()}finally{c(e.lockB),c(e.lockA)}};a(e.lockB)||n>10?(n>10&&r("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),u(e.lockB,e.tabId),d(e.lockA)===e.tabId?l():window.requestAnimationFrame(function(){d(e.lockB)===e.tabId?l():o(i)})):o(i)})},e})(),p=(function(){function e(t){this.tabId=t,this.lock=new m(e.tabsKey,t),r("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(t){return e.isAlive(t)})}e.isAlive=function(n){var t=d(e.$3(n));return t==null?!1:Date.now()-parseFloat(t)<1e3};var t=e.prototype;return t.keepOnlyTabs=async function(n){await this.lock.run(function(){var t,r=JSON.parse((t=d(e.tabsKey))!=null?t:"[]").filter(n);r.length>0?u(e.tabsKey,JSON.stringify(r)):c(e.tabsKey)})},t.$2=function(){var t=e.$3(this.tabId);u(t,Date.now().toString());var n=r("setInterval")(function(){u(t,Date.now().toString())},500);o("Run").onUnload(function(){r("clearInterval")(n),c(t)})},t.$1=async function(){var t=this;await this.lock.run(function(){var n,r=JSON.parse((n=d(e.tabsKey))!=null?n:"[]");u(e.tabsKey,JSON.stringify([].concat(r,[t.tabId])))}),o("Run").onUnload(function(){return r("promiseDone")(t.keepOnlyTabs(function(e){return e!==t.tabId}))})},e.$3=function(t){return"$navigator.heartbeat-"+t},e})();p.tabsKey="$navigator.heartbeat-tabs";var _=(function(){function e(t,n){var a=this;this.requests=new Map,this.name=t,this.tabId=n,this.queueKey=e.storagePrefix+"-"+t+"-q",this.currentOwnerKey=e.storagePrefix+"-"+t+"-o",this.lock=new m(e.storagePrefix+"-"+t,this.tabId),o("Run").onUnload(function(){r("promiseDone")(a.keepOnlyRequests(function(e){return(e==null?void 0:e.t)!==a.tabId}))})}var t=e.prototype;return t.enqueue=async function(t,n,o){var e=this,a=r("uuidv4")().toString(),i={t:this.tabId,u:a},l=function(){t(null),e.markRequestReleased(a)},s=function(){t(a),e.markRequestReleased(a)};if(this.requests.set(a,[function(){return t(a)},function(){n(),e.markRequestReleased(a)}]),(o==null?void 0:o.signal)!=null&&(o.signal.onabort=function(){r("promiseDone")(e.keepOnlyRequests(function(e){return(e==null?void 0:e.u)!==a})),s()},o.signal.aborted))return s();await this.lock.run(function(){var t=e.getOwner();if((o==null?void 0:o.steal)===!0&&e.$1(t==null?void 0:t.u),t==null||(o==null?void 0:o.steal)===!0||!p.isAlive(t.t))e.$2(e.currentOwnerKey,babelHelpers.extends({},i,(o==null?void 0:o.steal)===!0?{s:!0}:{})),e.$3(a);else if((o==null?void 0:o.ifAvailable)!==!0){var n=e.getQueue();n.push(i),e.$2(e.queueKey,n)}else l()})},t.dequeue=async function(n){var t=this,r,o=null;await this.lock.run(function(){var r=t.getOwner();if(!((r==null?void 0:r.t)!==t.tabId||(r==null?void 0:r.u)!==n)){var a=t.getQueue(),i=e.getNextOwner(a),l=i[0],s=i[1];o=l,t.$2(t.currentOwnerKey,l),t.$2(t.queueKey,s)}}),this.$3((r=o)==null?void 0:r.u)},t.storageChangedOnOtherTab=async function(t,n){var e=this;t==="o"&&await this.lock.run(function(){var t=e.getOwner();if(t!=null&&(e.$3(t==null?void 0:t.u),t.s===!0)){var r=n==null?void 0:n.oldValue;if(r!=null){var o=JSON.parse(r);o.t===e.tabId&&e.$1(o.u)}}})},t.getQueue=function(){var e;return(e=this.$4(this.queueKey))!=null?e:[]},t.getOwner=function(){return this.$4(this.currentOwnerKey)},e.getQueueNameAndStorageType=function(n){if(!n.startsWith(e.storagePrefix))return null;var t=n.slice(e.storagePrefix.length+1,n.length-2),o=n.charAt(n.length-1);switch(o){case"q":case"o":case"a":case"b":break;default:throw r("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+n)}return[t,o]},e.getNextOwner=function(t){for(var e=0;e<t.length;e+=1)if(p.isAlive(t[e].t))return[t[e],t.slice(e+1)];return[null,[]]},t.$4=function(t){var e=d(t);return e!=null?JSON.parse(e):null},t.$2=function(t,n){var e=n==null||Array.isArray(n)&&n.length===0?null:JSON.stringify(n);e==null?c(t):u(t,e)},t.keepOnlyRequests=async function(n){var t=this;await this.lock.run(function(){var r=t.getOwner(),o=t.getQueue().filter(n);if(n(r))t.$2(t.queueKey,o);else{var a=e.getNextOwner(o),i=a[0],l=a[1];t.$2(t.currentOwnerKey,i),t.$2(t.queueKey,l)}})},t.markRequestReleased=function(t){t!=null&&this.requests.delete(t)},t.$3=function(t){if(t!=null){var e=this.requests.get(t);if(e!=null){var n=e[0];n()}}},t.$1=function(t){if(t!=null){var e=this.requests.get(t);if(e!=null){var n=e[0],r=e[1];r()}}},e})();_.storagePrefix="$navigator.locks";var f=(function(){function t(t){this.$1=new Map,this.storage=o("LocalStorageWrapper").getStorage(e),this.tabId=t;var n=new p(this.tabId);r("promiseDone")(this.$2()),this.$3()}var n=t.prototype;return n.request=function(){for(var e=this,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return new Promise(function(t,l){r("promiseDone")((async function(t){var s=n[0],u=n.length===3?n[1]:null,c=n.length===2?n[1]:n[2];if(s.startsWith("-"))throw new DOMException("Names cannot start with '-'.",a);if((u==null?void 0:u.ifAvailable)===!0&&(u==null?void 0:u.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",a);var d=e.$4(s),m=await new Promise(function(e){r("promiseDone")(d.enqueue(e,function(){l(new DOMException(i,a))},u))});if((u==null||(t=u.signal)==null?void 0:t.aborted)===!0)throw new DOMException("The request was aborted.",a);try{var p;await c(m!=null?{mode:(p=u==null?void 0:u.mode)!=null?p:o("LockManager").LockMode.Exclusive,name:s}:null)}finally{m!=null&&await d.dequeue(m),d.markRequestReleased(m)}})(),t,l)})},n.query=function(){var e=[],t=[];for(var n of this.$5())if(n!=null){var r={mode:o("LockManager").LockMode.Exclusive,name:n.name};if(n.getOwner()!=null)e.push(r);else for(var a of n.getQueue())t.push(r)}return Promise.resolve({held:e,pending:t})},n.$4=function(t){var e=this;return l(this.$1,t,function(){return new _(t,e.tabId)})},n.$3=function(){var e=this;window.addEventListener("storage",function(t){var n,o=t.key;if(!(t.storageArea!==e.storage||o==null)){var a=_.getQueueNameAndStorageType(o);if(a!=null){var i=a[0],l=a[1];r("promiseDone")((n=e.$4(i))==null?void 0:n.storageChangedOnOtherTab(l,t))}}})},n.$2=async function(){await Promise.all(this.$5().map(function(e){return e==null?void 0:e.keepOnlyRequests(function(e){return e==null?!1:p.isAlive(e.t)})}))},n.$5=function(){var e=this;return s==null?[]:Object.keys(s).map(function(t){var n=_.getQueueNameAndStorageType(t);if(n!=null){var r=n[0];return e.$4(r)}})},t})();return new f(t)}catch(e){return null}}l.make=s}),98);
__d("supportsNativeWebLock",[],(function(t,n,r,o,a,i){"use strict";function e(){return self.LockManager!=null&&self.navigator.locks instanceof self.LockManager}i.default=e}),66);
__d("SharedWorkerLockManager",["Deferred","FBLogger","WebStorageLockManager","emptyFunction","pageID","promiseDone","setTimeout","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e="shared_worker_mutex",s=6e5;function u(e){var t,n=(t=window)==null||(t=t.navigator)==null?void 0:t.locks;if(n!=null)return n;var a=o("WebStorageLockManager").make(r("pageID"));return a!=null?(e==null||e.addAnnotations({bool:{fallback_lock_manager:!0}}),{request:function(t,n){return a.request(t,n)}}):null}function c(e,t,n){r("setTimeout")(function(){e.isSettled()||(t==null||t.endFailure("lock_timeout"),r("FBLogger")("worker").warn("[SharedWorkerLockManager]: lock timed out in %s ms",s),e.resolve(),n==null||n())},s)}function d(t,n){var o=n.workerQPLLogger,a=n.onLockTimeout,i=n.onLockFail,l=u(o);if(o==null||o.addAnnotations({bool:{native_locks:l!=null?r("supportsNativeWebLock")():null}}),l==null){o==null||o.markPoint("no_lock_manager"),r("FBLogger")("worker").warn("Unable to initialize lock manager"),t(r("emptyFunction"));return}o==null||o.markPoint("lock_requested");var s=new(r("Deferred"));r("promiseDone")(l.request(e,function(){return o==null||o.markPoint("lock_obtained"),c(s,o,a),t(function(){o==null||o.markPoint("lock_released"),s.resolve()}),s.getPromise()}),void 0,i)}l.withWorkerLock=d}),98);
__d("SharedWorkerLoggingUtils",["ErrorSerializer","FBLogger","ODS","QPLUserFlow","getErrorSafe","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){(e||(e=o("ODS"))).bumpEntityKey(6653,"shared_worker_infra","worker_self_termination."+n+"."+t),u(t,n,r,a,!0)}function u(e,t,n,o,a){a===void 0&&(a=!1);var i=r("qpl")._(931600201,"1438");r("QPLUserFlow").start(i),r("QPLUserFlow").endSuccess(i,{annotations:{string:{workerName:e,workerID:o,reason:n,location:t,pageID:r("pageID")},bool:{isSelfTermination:a}}})}function c(e,t,n,r,o,a){e==null||e.markEventEnd("execute_worker"),e==null||e.addAnnotations({int:{runningWorkerRev:o,runningWorkerSpinTime:t,runningWorkerSpinMode:a},string:{executeWorkerErr:n},bool:{isFirstInit:r}})}function d(e,t,n){var o,a,i,l,s,u,c=r("getErrorSafe")((o=t instanceof ErrorEvent&&(t==null?void 0:t.error))!=null?o:t);r("FBLogger")("worker").catching(c).warn("Worker %s onerror: %s type, %s message",n,String(t.type),r("ErrorSerializer").toReadableMessage(c)),e==null||e.addAnnotations({string_array:{onErrorHandler:[(a=JSON.stringify((i=c==null?void 0:c.message)!=null?i:t==null?void 0:t.message))!=null?a:"undefined",String((l=t==null?void 0:t.lineno)!=null?l:c==null?void 0:c.lineno),String((s=t==null?void 0:t.colno)!=null?s:c==null?void 0:c.colno),String((u=t==null?void 0:t.filename)!=null?u:c==null?void 0:c.filename)]}})}l.logSelfTermination=s,l.logShutdown=u,l.logExecuteAck=c,l.logSharedWorkerError=d}),98);
__d("validateSharedWorkerReference",["ConstUriUtils","isRelativeURL","isSameOrigin","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoize")(function(){return o("ConstUriUtils").getUri(window.location.href)});function s(t){var n=e(),a=o("ConstUriUtils").getUri(t),i=n!=null&&a!=null?r("isSameOrigin")(a,n):!1;return i||r("isRelativeURL")(t)}function u(e){if(e==null||typeof e!="object")return null;var t=e.rev,n=e.spin_time,r=e.url,o=e.version,a=e.rsrcBundleUrl,i=e.sandboxOnlyChecksum;return typeof t!="number"||typeof n!="number"||o!=null&&o!==1&&o!==2||!Number.isInteger(t)||!Number.isInteger(n)||typeof r!="string"||!s(r)||a!=null&&typeof a!="string"||i!=null&&typeof i!="string"?null:{rev:t,spin_time:n,url:r,version:o!=null?o:1,rsrcBundleUrl:a,sandboxOnlyChecksum:i}}l.default=u}),98);
__d("SharedWorkerStorageManager",["Deferred","FBLogger","Promise","WebAsyncStorage","promiseDone","validateSharedWorkerReference"],(function(t,n,r,o,a,i,l){"use strict";var e,s="__swbundle__",u={};function c(e){return""+s+e}function d(e){var t=new(r("Deferred"));return r("WebAsyncStorage").removeItem(c(e),function(n){if(n)return t.reject(n);u[e]=null,t.resolve()}),t.getPromise()}function m(e,t){var n=new(r("Deferred"));return r("WebAsyncStorage").setItem(c(e),t,function(r){if(r!=null)return n.reject(r);u[e]=t,n.resolve()}),n.getPromise()}function p(e){var t=new(r("Deferred"));return r("WebAsyncStorage").getItem(c(e),function(n,r){if(n)return t.reject(n);u[e]=r,t.resolve(r)}),t.getPromise()}function _(){return u}function f(e,t){return p(e).then(function(e){var t=r("validateSharedWorkerReference")(e);return t==null?null:t}).catch(function(n){throw r("FBLogger")("worker").catching(n).mustfix("Failed to getSharedWorkerReference for bundleName %s",e),t==null||t.addAnnotations({bool:{failedToGetSharedWorkerResource:!0}}),n})}function g(e,t){return d(e).catch(function(n){throw r("FBLogger")("worker").catching(n).mustfix("Failed to removeSharedWorkerReference for bundleName %s",e),t==null||t.addAnnotations({bool:{failedToDeleteSharedWorkerResource:!0}}),n})}function h(t,o,a){var i=r("validateSharedWorkerReference")(o);return i==null?(r("FBLogger")("worker").mustfix('Failed to save worker reference for bundle "%s". Invalid reference: %s',t,JSON.stringify(o)),(e||(e=n("Promise"))).resolve()):m(t,i).catch(function(e){throw r("FBLogger")("worker").catching(e).mustfix("Failed to saveSharedWorkerReference for bundleName %s",t),a==null||a.addAnnotations({bool:{failedToSaveSharedWorkerResource:!0}}),e})}function y(e,t,n){var o=r("WebAsyncStorage").isOpenPromiseSettled();n==null||n.addAnnotations({bool:{isWebAsyncStorageIndexedDBOpened:o}}),o&&r("promiseDone")(r("WebAsyncStorage").isOperational(),function(e){n==null||n.addAnnotations({string:{idb_open_error:e.success===!1?e.error.message:"No IDB open error"}})});var a=new(r("Deferred"));return r("WebAsyncStorage").upsertAndSaveAtomic(c(e),function(e){var n=r("validateSharedWorkerReference")(e);return t(n)},function(t,o){if(n==null||n.markPoint("worker_reference_db_response"),t)return r("FBLogger")("worker").catching(t).mustfix("Failed to getOrUpdateWorkerReference for bundleName %s",e),a.reject(t);u[e]=o,a.resolve(o)}),a.getPromise()}l.SHARED_WORKER_STORAGE_KEY_BASE=s,l.getDebugState=_,l.getSharedWorkerReference=f,l.removeSharedWorkerReference=g,l.saveSharedWorkerReference=h,l.getOrUpdateWorkerReference=y}),98);
__d("createSharedWorkerV2BundleUrlExperimental",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","nullthrows","supportsModuleWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=r("supportsModuleWorker")(!0);return r("nullthrows")((t=r("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:n?"MODULE":"CLASSIC",name:e}))==null?void 0:t.toString())}l.default=e}),98);
__d("SharedWorkerMigrationUtils",["ConstUriUtils","Deferred","FBLogger","SharedWorkerEventManager","SharedWorkerStatusLock","SharedWorkerStorageManager","TrustedTypesWebWorkerScriptURLPolicy","clearTimeout","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){if(!r("supportsNativeWebLock")())return!0;var t=await self.navigator.locks.query();return t.held.some(function(t){return t.name===o("SharedWorkerStatusLock").getDynamicStringInitLockName(e)})}function s(){return r("supportsNativeWebLock")()}async function u(e){if(!r("supportsNativeWebLock")())return!0;var t=await self.navigator.locks.query();return t.held.some(function(t){return t.name===o("SharedWorkerStatusLock").getStatusLockName(e)})}async function c(e,t){if(!r("supportsNativeWebLock")())return!0;var n=await self.navigator.locks.query();return n.held.some(function(n){return n.name===o("SharedWorkerStatusLock").getWorkerIdStatusLockName(e,t)})}var d={SharedWorkerBundle:!0,MAWMainWebWorkerV2Bundle:!0};function m(e){var t;return(t=d[e])!=null?t:!1}async function p(t){if(!await e(t))return!1;var n=new(r("Deferred")),a=r("createSharedWorkerV2BundleUrlExperimental")(t),i=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),l=r("supportsModuleWorker")(!0)?new SharedWorker(i,{name:t,type:"module"}):new SharedWorker(i,t);return o("SharedWorkerEventManager").registerWorkerShutdownListener(l,function(e){n.resolve(!0)},{once:!0}),o("SharedWorkerEventManager").emitWorkerShutdown(l,{upgrade:!1,reason:"dynamic_string_worker_rollback"}),l.port.start(),n.getPromise()}function _(e){var t=o("ConstUriUtils").getUri(e);return t!=null&&t.getQueryParam("hash")!=null}async function f(t){var n=t.name,a=t.logger;try{var i=await Promise.all([u(n),e(n)]),l=i[0],s=i[1];if(!l||r("supportsNativeWebLock")()&&s){a.markPoint("legacy_termination_skipped"),a.addAnnotations({bool:{dynamicStringWorkerAlreadyRunning:s,workerAlreadyRunning:l,native_locks:r("supportsNativeWebLock")()}});return}var c=await o("SharedWorkerStorageManager").getSharedWorkerReference(n);if(a.markPoint("storage_read"),a.addAnnotations({bool:{storageResourceSet:c!=null}}),c==null)return;try{await o("SharedWorkerStorageManager").removeSharedWorkerReference(n),a.markPoint("storage_cleaned")}catch(e){a.markPoint("storage_error"),a.addAnnotations({string:{storageError:String(e)}}),r("FBLogger")("worker").catching(r("getErrorSafe")(e)).mustfix("Failed to remove reference from storage.")}var d=_(c.url);if(a.markPoint(d?"legacy_termination_start":"termination_skipped"),d){var m=new(r("Deferred")),p=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(c.url),f=r("supportsModuleWorker")(!0)?new SharedWorker(p,{name:n,type:"module"}):new SharedWorker(p,n),g=function(){a.markPoint("legacy_termination_end"),m.resolve(!0)};o("SharedWorkerEventManager").registerWorkerShutdownListener(f,g,{once:!0}),o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(f,g,{once:!0}),f.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(f,{upgrade:!1,reason:"maw-request-refresh"});var h=r("setTimeout")(function(){a.markPoint("legacy_termination_timeout"),m.reject(r("err")("Failed to close Shared Web Worker properly. SelfTerminationTimeout was exceeded."))},1e3);await m.getPromise(),r("clearTimeout")(h)}}catch(e){a.markPoint("legacy_check_and_termination_error"),a.addAnnotations({string:{legacyCheckError:String(e)}}),r("FBLogger")("worker").catching(r("getErrorSafe")(e)).mustfix("Failed to check storage and possibly terminate legacy worker.")}}l.isDynamicStringWorkerRunning=e,l.supportsNativeWebLocks=s,l.isStatusLockHeld=u,l.isWorkerIdStatusLockHeld=c,l.shouldCheckForDynamicStringWorker=m,l.maybeTerminateDynamicStringWorker=p,l.isLegacyWorkerURL=_,l.checkStorageAndTerminateLegacyWorker=f}),98);
__d("SharedWorkerUptimeTracker",["FBLogger","ODS","SharedWorkerEventManager","clearInterval","performanceNow","setInterval","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=1e4,c=45e3,d=new Map;function m(e){return Math.floor(((s||(s=r("performanceNow")))()-e)/1e3)}function p(t,n){var a=0,i={};return o("SharedWorkerEventManager").registerUptimeTrackerListener(t,function(t){var r=t.trackerID,a=i[r];a!=null&&((e||(e=o("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+n,1,0),e.bumpEntityKey(6653,"shared_worker_infra","worker_uptime_elapsed_time_to_response_sec."+m(a.createdMs)+"."+n),delete i[r])}),r("setInterval")(function(){var l=a++;r("setTimeout")(function(){var e=i[l];e!=null&&delete i[l]},c),i[l]={createdMs:(s||(s=r("performanceNow")))()},(e||(e=o("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+n,0,1),o("SharedWorkerEventManager").emitUptimeTracking(t,{trackerID:l})},u)}function _(e,t){if(d.has(t)){r("FBLogger")("worker").mustfix('Uptime tracking for worker "%s" already started.',t);return}d.set(t,{intervalID:p(e,t)})}function f(e){var t=d.get(e);t!=null&&(r("clearInterval")(t.intervalID),d.delete(e))}l.startUptimeTracking=_,l.stopUptimeTracking=f}),98);
__d("buildSharedWorkerInitQPLLogger",["QPLUserFlow","SiteData","checkForIndexedDbSupported","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(931595918,"2062"),s=0;function u(t){var n=!1,o=!1,a=s++;function i(i){var l=i.version,s=i.workerName,u=i.callReason,c=i.experimental_init,d=i.migrationEnabled;if(!(n||o)){n=!0;var m={int:{version:l,clientRev:r("SiteData").client_revision},bool:{isDev:!1,supportsIDB:r("checkForIndexedDbSupported")(),experimental_init:c!=null?c:!1,migrationEnabled:d!=null?d:!1},string:{workerName:s,hostname:window.location.hostname,callReason:u,pageID:r("pageID")}};r("QPLUserFlow").start(e,{onFlowTimeout:function(){r("QPLUserFlow").addAnnotations(e,{bool:{setupTimeout:!0}},{instanceKey:a}),o=!0},cancelOnUnload:!0,annotations:m,timeoutInMs:66e4,instanceKey:a}),t==null||t({type:"start",data:{annotations:m}})}}function l(i,l){var s=i+"_start";t==null||t({type:"point",data:{annotations:l,event:s}}),!(!n||o)&&r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a})}function u(i,l){var s=i+"_end";t==null||t({type:"point",data:{annotations:l,event:s}}),!(!n||o)&&(r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}}))}function c(i,l){t==null||t({type:"point",data:{annotations:l,event:i}}),!(!n||o)&&r("QPLUserFlow").addPoint(e,i,{data:l,instanceKey:a})}function d(i){t==null||t({type:"end",data:{annotations:i}}),!(!n||o)&&(r("QPLUserFlow").endSuccess(e,{annotations:i,instanceKey:a}),o=!0)}function m(i,l){t==null||t({type:"end",data:{errorName:i,annotations:l}}),!(!n||o)&&(r("QPLUserFlow").endFailure(e,i,{annotations:l,instanceKey:a}),o=!0)}function p(i){t==null||t({type:"end",data:{annotations:i,cancel:!0}}),!(!n||o)&&(r("QPLUserFlow").endCancel(e,{annotations:i,instanceKey:a}),o=!0)}function _(i){t==null||t({type:"annotate",data:{annotations:i}}),!(!n||o)&&r("QPLUserFlow").addAnnotations(e,i,{instanceKey:a})}return{start:i,endFailure:m,addAnnotations:_,endSuccess:d,endCancel:p,markEventStart:l,markEventEnd:u,markPoint:c}}l.default=u}),98);
__d("buildSharedWorkerTerminateQPLLogger",["QPLUserFlow","SiteData","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(931600201,"1438"),s=0;function u(t){var n=!1,o=!1,a=s++;function i(i){var l=i.workerName,s=i.callReason;if(!(n||o)){n=!0;var u={int:{clientRev:r("SiteData").client_revision},bool:{isDev:!1},string:{workerName:l,hostname:window.location.hostname,callReason:s,pageID:r("pageID")}};r("QPLUserFlow").start(e,{onFlowTimeout:function(){r("QPLUserFlow").addAnnotations(e,{bool:{setupTimeout:!0}},{instanceKey:a}),o=!0},cancelOnUnload:!0,annotations:u,timeoutInMs:3e4,instanceKey:a}),t==null||t({type:"start",data:{annotations:u}})}}function l(i,l){if(!(!n||o)){var s=i+"_start";r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}})}}function u(i,l){if(!(!n||o)){var s=i+"_end";r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}})}}function c(i,l){!n||o||(r("QPLUserFlow").addPoint(e,i,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:i}}))}function d(i){!n||o||(r("QPLUserFlow").endSuccess(e,{annotations:i,instanceKey:a}),t==null||t({type:"end",data:{annotations:i}}),o=!0)}function m(i,l){!n||o||(r("QPLUserFlow").endFailure(e,i,{annotations:l,instanceKey:a}),t==null||t({type:"end",data:{errorName:i,annotations:l}}),o=!0)}function p(i){!n||o||(r("QPLUserFlow").endCancel(e,{annotations:i,instanceKey:a}),t==null||t({type:"end",data:{annotations:i,cancel:!0}}),o=!0)}function _(i){!n||o||(r("QPLUserFlow").addAnnotations(e,i,{instanceKey:a}),t==null||t({type:"annotate",data:{annotations:i}}))}return{start:i,endFailure:m,addAnnotations:_,endSuccess:d,endCancel:p,markEventStart:l,markEventEnd:u,markPoint:c}}l.default=u}),98);
__d("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/static_resources/sharedworker/init_script/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("getSharedWorkerHash",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("uuidv4")()}l.default=e}),98);
__d("createSharedWorkerBundleUrl",["XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;return r("nullthrows")((e=r("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder").buildUri({hash:r("getSharedWorkerHash")()}).addQueryParams(r("getWorkerInitScriptSPINParams")()))==null?void 0:e.toString())}l.default=e}),98);
__d("createSharedWorkerV2BundleUrl",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","gkx","justknobx","nullthrows","supportsModuleWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("supportsModuleWorker")(!0),n=r("getWorkerInitScriptSPINParams")();return n.set("hash",r("getSharedWorkerHash")()),n.set("use_broadcast",r("justknobx")._("4177")),n.set("worker_id_in_terminate",r("gkx")("12766")),r("nullthrows")((e=r("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:t?"MODULE":"CLASSIC"}))==null||(e=e.addQueryParams(n))==null?void 0:e.toString())}var s=function(){return e()};l.createSharedWorkerV2BundleUrl=s}),98);
__d("handleWorkerWriteError",["FBLogger","WebStorageCleanupReason"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e instanceof Error){r("FBLogger")("worker").catching(e).mustfix("Error occured checking in shared worker reference");return}if(e==="writes disabled"){var t;r("FBLogger")("worker").warn("Writes to WebAsyncStorage is disabled. Unable to save shared worker reference. Reason: %s",(t=o("WebStorageCleanupReason").getLastCleanupReason())!=null?t:"n/a");return}r("FBLogger")("worker").mustfix("Error occured checking in shared worker reference: %s",JSON.stringify(e))}l.default=e}),98);
__d("SharedWorkerInitFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4266"),s=o("FalcoLoggerInternal").create("shared_worker_init",e),u=s;l.default=u}),98);
__d("logSharedWorkerInitStep",["SharedWorkerInitFalcoEvent","SiteData","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("uuidv4")();function s(t,n,o,a){r("gkx")("21115")&&r("SharedWorkerInitFalcoEvent").log(function(){return{client_id:e,bundle_name:t,client_rev:String(r("SiteData").client_revision),local_shared_worker_ref:n!=null?{bundle_url:n.url,rev:String(n.rev),spin_time:String(n.spin_time)}:null,new_shared_worker_ref:o!=null?{bundle_url:o}:null,init_step:a}})}l.default=s}),98);
__d("SharedWorkerBundleResource",["BootloaderPreloader","Deferred","FBLogger","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLockManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerStorageManager","SharedWorkerUptimeTracker","SharedWorkerV2ResourceExperimental","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerBundleUrl","createSharedWorkerV2BundleUrl","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","handleWorkerWriteError","justknobx","logSharedWorkerInitStep","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3,s="shared_worker_broadcast_channel",u=(function(e){function t(t){var n;return n=e.call(this)||this,n.name="SelfTerminationError",n.message="Worker self terminated with the reason: "+t,n.reason=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function c(e,t,n,a){a==null||a.markEventStart("shared_worker_construct");var i=new SharedWorker(r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),t);a==null||a.markEventEnd("shared_worker_construct"),i.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(a,e,t)});var l=new Set;o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(i,function(e,n,r){o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r)},{once:!0});var s=0;o("SharedWorkerEventManager").registerConnectionAckListener(i,function(e,t){if(s++,l.has("worker_connection_established")){a==null||a.addAnnotations({int:{connectionAckNum:s}});return}l.add("worker_connection_established"),a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),a==null||a.markPoint("worker_connection_established")}),o("SharedWorkerEventManager").registerWorkerInitPointsListener(i,function(e){l.has(e)||(l.add(e),a==null||a.markPoint("worker_init_point_"+e))}),i.port.start(),o("SharedWorkerEventManager").registerExecuteWorkerImportsListener(i,a,function(e){var t=e.err,n=e.attempts;a==null||a.addAnnotations({string:{importsError:t},int:{importAttempts:n}}),a==null||a.markPoint(t==null?"bundle_imports_success":"bundle_imports_failure")});var u=new(r("Deferred"));return o("SharedWorkerEventManager").registerExecuteWorkerAckListener(i,a,function(e){var t=e.workerSpinTime,n=e.err,i=e.isFirstInit,l=e.workerRev,s=e.workerSpinMode;o("SharedWorkerLoggingUtils").logExecuteAck(a,t,n,i,l,s),n!=null||t==null||l==null?u.reject(r("err")(n!=null?n:"no worker rev or spin time")):u.resolve({rev:l,spinTime:t})}),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(i,{jsModuleResource:n,isDev:!1}),u.getPromise().then(function(e){var t=e.rev,n=e.spinTime;return{worker:i,rev:t,spinTime:n}})}function d(e,t,n){n==null||n.markEventStart("worker_constructor");var o=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),a=r("supportsModuleWorker")(!0)?new SharedWorker(o,{name:t,type:"module"}):new SharedWorker(o,t);return n==null||n.markEventEnd("worker_constructor",{string:{workerUrl:o.toString()}}),a}function m(e,t,n){var r=[],a=new Set;r.push(o("SharedWorkerEventManager").registerWorkerInitPointsListener(e,function(e){a.has(e)||(a.add(e),n==null||n.markPoint("worker_init_point_"+e))})),r.push(o("SharedWorkerEventManager").registerHrpInitListener(e,n,function(){}));var i=function(r){o("SharedWorkerLoggingUtils").logSharedWorkerError(n,r,t)};return e.addEventListener("error",i),r.push(function(){return e.removeEventListener("error",i)}),r}function p(e,t,n,a){o("SharedWorkerMigrationUtils").shouldCheckForDynamicStringWorker(t)&&(a==null||a.markEventStart("dynamic_string_worker_check"),r("promiseDone")(o("SharedWorkerMigrationUtils").maybeTerminateDynamicStringWorker(t),function(e){a==null||a.markEventEnd("dynamic_string_worker_check",{bool:{didTerminateDynamicStringWorker:e}})}));var i=d(e,t,a);o("SharedWorkerEventManager").registerConnectionAckListener(i,function(e,t,n){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t,hrpStatus:n}}),a==null||a.markPoint("worker_connection_established")});var l=new(r("Deferred"));return o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(i,function(e,n,r,i){a==null||a.addAnnotations({string:{selfTerminationError:i}}),o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r),l.reject(new u(n))},{once:!0}),m(i,t,a),i.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(i),a==null||a.markPoint("read_dynamic_data"),r("promiseDone")(T(n,!1,a).then(function(e){var t=e.hrp;a==null||a.markEventStart("hrp_init"),o("SharedWorkerEventManager").emitHrpInit(i,{hrp:t.hrp,js_env:t.js_env,isDev:!1},a)},function(e){var t=r("getErrorSafe")(e);a==null||a.addAnnotations({string:{hrpInitErr:t.toString()}})})),o("SharedWorkerEventManager").registerExecuteWorkerAckListener(i,a,function(e){var t=e.workerSpinTime,n=e.err,i=e.isFirstInit,s=e.workerRev,u=e.workerSpinMode;o("SharedWorkerLoggingUtils").logExecuteAck(a,t,n,i,s,u),n!=null||s==null||t==null?l.reject(r("err")(n!=null?n:"no worker rev or spin time")):l.resolve({rev:s,spinTime:t})}),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(i),l.getPromise().then(function(e){var t=e.rev,n=e.spinTime;return{worker:i,rev:t,spinTime:n}})}function _(e,t,n,a,i,l){var s=new(r("Deferred"));return o("SharedWorkerEventManager").registerGetWorkerRevListener(e,l,function(e){var u=e.rev,c=e.spinTime;r("promiseDone")(o("SharedWorkerStorageManager").saveSharedWorkerReference(n,{url:t,rev:u,spin_time:c,version:i.version,rsrcBundleUrl:i.getJSModuleBundleResource().url,sandboxOnlyChecksum:i.sandboxOnlyChecksum},l).then(function(){return o("SharedWorkerStorageManager").getSharedWorkerReference(n,l)}).then(function(e){r("logSharedWorkerInitStep")(n,e,i.resourceUrlForLogging,"after_worker_reference_save")}),function(){l.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!0}}),s.resolve(),a()},function(e){l.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!1}}),s.reject(e),r("handleWorkerWriteError")(e),a()})}),l.markEventStart("get_worker_rev"),o("SharedWorkerEventManager").emitGetRev(e),s.getPromise()}function f(e,t,n,a){a===void 0&&(a=null);var i=[],l=function(r,a,l){i.forEach(function(e){return e()}),t(r,a,l),o("SharedWorkerUptimeTracker").stopUptimeTracking(n)};i.push(o("SharedWorkerEventManager").registerForwardListeners(e)),i.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(e){var t=e.reason,r=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(n,null,t,r);var a=t==="dynamic_string_worker_rollback"?"requested-upgrade":t;l(a,r,"sw-shutdown")})),i.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(e,function(e,t,n){l(t,n,"self-terminate")})),o("SharedWorkerDevChangeManager").trackCreatedWorker(n),o("SharedWorkerUptimeTracker").startUptimeTracking(e,n),r("logSharedWorkerInitStep")(n,null,null,"create_worker_end")}async function g(e,t,n,a,i,l){l.addAnnotations({string:{initFlow:"use_existing_ref"}}),r("logSharedWorkerInitStep")(e,null,null,"using_existing_worker_ref");var s=o("SharedWorkerMigrationUtils").isLegacyWorkerURL(t.url),u=await(t.version===2?s?p(t.url,e,n.getJSModuleBundleResource(),l):o("SharedWorkerV2ResourceExperimental").startV2Worker(t.url,e,n.getJSModuleBundleResource(),l):c(t.url,e,n.getJSModuleBundleResource(),l)),d=u.worker;return a(),t.version===2&&!s&&_(d,t.url,e,a,n,l),f(d,i,e),d}async function h(e,t,n,a){n.markPoint("terminate_on_upgrade");var i=new(r("Deferred")),l=o("SharedWorkerMigrationUtils").isStatusLockHeld(e);if(await o("SharedWorkerMigrationUtils").isDynamicStringWorkerRunning(e)&&r("supportsNativeWebLock")()&&a===!1)i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"not_needed_for_dynamic_string"}});else if(self.BroadcastChannel!=null){var s=k(e);s.postMessage({type:"terminate",reason:"requested-upgrade",pageID:r("pageID")}),i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"broadcast"}})}else if(await l){var u;t.version===2&&r("supportsModuleWorker")(!0)?u=new SharedWorker(t.url,{name:e,type:"module"}):u=new SharedWorker(t.url,e),o("SharedWorkerEventManager").registerWorkerShutdownListener(u,function(e){var t=e.workerID,l=e.isInitialized;a?r("setTimeout")(function(){n.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:t},bool:{oldWorkerWasInitialized:l}}),i.resolve()},o("SharedWorkerV2ResourceExperimental").DELAY_FOR_WORKER_SHUTDOWN_MS):(n.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:t},bool:{oldWorkerWasInitialized:l}}),i.resolve()),n.addAnnotations({string:{oldWorkerShutdown:"success"}})},{once:!0}),n.markEventStart("old_worker_shutdown"),u.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(u,{upgrade:!0})}else i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"not_needed"}});a===!0?await i.getPromise():i.resolve()}async function y(e,t,n,r,o,a,i){return a.addAnnotations({string:{initFlow:"upgrade_worker_ref"}}),await h(e,t,a,i),b(e,n,r,o,a,"upgrading_worker_ref")}function C(e,t,n,r,o){return o.addAnnotations({string:{initFlow:"new_worker_ref"}}),b(e,t,n,r,o,"new_worker_ref")}async function b(e,t,n,a,i,l){r("logSharedWorkerInitStep")(e,null,null,l),await o("SharedWorkerMigrationUtils").isStatusLockHeld(e)&&r("FBLogger")("worker").info("Trying to create a worker %s while old one is still running",e);var s=await t.createSharedWorker(),u=s[0],c=s[1].worker;return l==="upgrading_worker_ref"&&await o("SharedWorkerStorageManager").removeSharedWorkerReference(e,i),await _(c,u,e,n,t,i),f(c,a,e),c}function v(e,t){var n=o("SharedWorkerDevChangeManager").shouldUseStorageWorkerForDev(e.name,{storageWorkerResource:t,tabResource:e}),a=t.spin_time,i=t.version,l=t.rev;return l>=r("SiteData").client_revision&&(e.version===i||a>=r("SiteData")[r("StaticSiteData").spin_time_key])&&n}async function S(e,t,n,a,i){a.markEventStart("create_worker");var l=e.name;o("SharedWorkerUptimeTracker").stopUptimeTracking(l),a.addAnnotations({bool:{workerAlreadyRunning:r("supportsNativeWebLock")()?await o("SharedWorkerMigrationUtils").isStatusLockHeld(l):null}});var s=r("supportsNativeWebLock")()?await o("SharedWorkerMigrationUtils").isStatusLockHeld(l):!0;if(!i&&e.version===2)return P(e,t,n,a);var u=await o("SharedWorkerStorageManager").getSharedWorkerReference(l,a);r("logSharedWorkerInitStep")(l,u,e.resourceUrlForLogging,"create_worker_start");var c=u!=null&&o("SharedWorkerMigrationUtils").isLegacyWorkerURL(u==null?void 0:u.url),d=i&&s===!1&&c;if(u==null||d)return C(l,e,t,n,a);var m=u.spin_time,p=u.version,_=u.rev;return a.addAnnotations({int:{storageWorkerSpinTime:m,storageWorkerVersion:p,storageWorkerRev:_}}),v(e,u)?g(l,u,e,t,n,a):y(l,u,e,t,n,a,i)}function R(e,t,n){var a=n!=null?n:{},i=a.onQPLEvent,l=a.reason,s=e.name,u=r("buildSharedWorkerInitQPLLogger")(i);u.start({version:1,workerName:s,callReason:l});var d=new(r("Deferred"));return o("SharedWorkerLockManager").withWorkerLock(function(n){var o;r("promiseDone")(S({name:s,version:1,resourceUrlForLogging:(o=e.url)!=null?o:"",getJSModuleBundleResource:function(){return e},createSharedWorker:async function(){var t=r("createSharedWorkerBundleUrl")();return[t,await c(t,s,e,u)]}},n,t,u,!1),function(e){u.markEventEnd("create_worker"),u.endSuccess(),d.resolve(e)},function(e){var t=typeof e=="string"?r("err")(e):e;u.endFailure("worker_init_failure",{string:{workerInitFailureReason:t.message,errorName:t.name}}),d.reject(t),n()})},{workerQPLLogger:u,onLockTimeout:function(){return d.reject(r("err")("Worker lock timeout"))}}),d.getPromise()}function L(e,t,n,a){a===void 0&&(a=0);var i=e.name,l=n!=null?n:{},s=l.onQPLEvent,c=l.reason,d=r("buildSharedWorkerInitQPLLogger")(s);d.start({version:2,workerName:i,callReason:c,experimental_init:n==null?void 0:n.useDynamicStringInit}),d.addAnnotations({bool:{usingModuleWorker:r("supportsModuleWorker")(!0)}});var m=new(r("Deferred")),_=function(l){r("promiseDone")(S({name:i,version:2,getJSModuleBundleResource:function(){return e},sandboxOnlyChecksum:e.sandboxOnlyChecksum,createSharedWorker:(n==null?void 0:n.useDynamicStringInit)===!0?async function(){var t=r("createSharedWorkerV2BundleUrlExperimental")(i);return[t,await o("SharedWorkerV2ResourceExperimental").startV2Worker(t,i,e,d)]}:async function(){var t=o("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl();return[t,await p(t,i,e,d)]}},l,t,d,(n==null?void 0:n.useDynamicStringInit)===!0),function(e){d.markEventEnd("create_worker"),d.endSuccess(),m.resolve(e)},function(e){var t=typeof e=="string"?r("err")(e):e;m.reject(t),l()})};return o("SharedWorkerLockManager").withWorkerLock(_,{workerQPLLogger:d,onLockTimeout:function(){return m.reject(r("err")("Worker lock timeout"))},onLockFail:function(t){m.reject(t)}}),m.getPromise().catch(function(o){if(o instanceof u&&a<2)return d.endCancel({string:{workerInitCancelReason:o.message},int:{workerInitRetry:a}}),new Promise(function(o,i){r("setTimeout")(function(){r("promiseDone")(L(e,t,n,a+1),o,i)},a===0?200:500)});throw d.endFailure("worker_init_failure",{string:{workerInitFailureReason:o.message,errorName:o.name}}),o})}async function E(t,n,a){var i=n!=null?n:t.name,l=new(r("Deferred")),s=r("buildSharedWorkerTerminateQPLLogger")();if(s.start({workerName:i}),r("promiseDone")(r("supportsNativeWebLock")()?o("SharedWorkerMigrationUtils").isStatusLockHeld(i):Promise.resolve(void 0),function(e){return s.addAnnotations({bool:{workerAlreadyRunning:e}})}),s.addAnnotations({string:{reason:a,terminatingPageId:r("pageID")}}),self.BroadcastChannel!=null){var u=k(i);return u.postMessage({type:"terminate",reason:a,pageID:r("pageID")}),r("promiseDone")(o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s).then(function(){s.endSuccess(),l.resolve()})),l.getPromise()}return o("SharedWorkerLockManager").withWorkerLock(function(e){r("promiseDone")(o("SharedWorkerStorageManager").getSharedWorkerReference(i,s).then(function(e){if(s.markPoint("read_worker_reference",{int:{storageWorkerVersion:e==null?void 0:e.version},bool:{storageReferenceExists:e!=null}}),e!=null){var n=o("SharedWorkerMigrationUtils").isLegacyWorkerURL(e.url);s.addAnnotations({bool:{isLegacy:n}});var a=e.version===2?n?p(e.url,i,t,void 0).then(function(e){var t=e.worker;return t}):o("SharedWorkerV2ResourceExperimental").startV2Worker(e.url,i,t,void 0).then(function(e){var t=e.worker;return t}):c(e.url,i,t).then(function(e){var t=e.worker;return t}),l=r("justknobx")._("3569")?Promise.resolve(null):o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s);return l.then(function(){return a})}return s.markPoint("storage_resource_empty"),null}),function(t){try{if(e(),o("SharedWorkerUptimeTracker").stopUptimeTracking(i),t==null){s.endSuccess(),l.resolve();return}o("SharedWorkerEventManager").registerWorkerShutdownListener(t,function(e){var t=e.workerID,n=e.isInitialized;s.markPoint("worker_shut_down",{string:{workerID:t},bool:{wasInitialized:n}});var a=r("justknobx")._("3569")?o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s):Promise.resolve(null);r("promiseDone")(a,function(){return s.endSuccess()},function(e){s.endFailure("failed_to_remove_worker_reference",{string:{errorDescription:e.toString()}})}),l.resolve()},{once:!0}),o("SharedWorkerEventManager").emitWorkerShutdown(t,{reason:a})}catch(e){s.endFailure("terminate_worker_failure",{string:{workerTerminateFailReason:e.message}}),l.reject(e.message)}},function(t){r("FBLogger")("worker").catching(r("getErrorSafe")(t)).mustfix("Failed to terminate worker"),s.endFailure("connect_to_worker_failure",{string:{workerTerminateFailReason:t.message}}),l.reject(t.message),e()})},{workerQPLLogger:s}),r("setTimeout")(function(){return l.reject()},e),l.getPromise()}function k(e){return new self.BroadcastChannel(s+"_"+e)}async function I(e){var t=await o("SharedWorkerStorageManager").getSharedWorkerReference(e.name);return t!=null}async function T(e,t,n){var a;n==null||n.markEventStart("load_hrp");var i=await o("WebWorkerV2DynamicData").readDynamicDataForWorker(e,t),l=i.data,s=i.time;n==null||n.markEventEnd("load_hrp");try{var u,c=r("justknobx")._("1979");n==null||n.markEventStart("prefetch_worker_scripts",{bool:{prefetchWorkerScripts:c},int:{resourcesCount:(u=l.hrp.allResources)==null?void 0:u.length}}),c&&o("BootloaderPreloader").preloadWorkerJSFromHRP(l.hrp)}catch(t){var d=r("getErrorSafe")(t);n==null||n.markPoint("prefetch_worker_scripts_fail",{string:{hrpInitErr:d.toString()}}),r("FBLogger")("worker").catching(d).warn("Failed to preload worker %s JS from HRP",e.name)}return n==null||n.markEventEnd("prefetch_worker_scripts"),{hrp:l,time:s,rev:(a=l.hrp.hsrp)==null||(a=a.hblp)==null||(a=a.consistency)==null?void 0:a.rev}}function D(e,t,n){return o("SharedWorkerStorageManager").getOrUpdateWorkerReference(e.name,function(r){return n.markPoint("worker_reference_retrieved"),r==null?t:v(e,r)?r:(h(e.name,r,n,!1),t)},n)}function x(e,t){if(self.BroadcastChannel!=null){var n=k(e),o=function(n){var e=n.data;if(typeof e=="object"&&(e==null?void 0:e.type)==="terminate"){var o=typeof e.reason=="string"?e.reason:"unknown",a=typeof e.pageID=="string"?e.pageID:null;if(a!=null&&a===r("pageID")&&o==="requested-upgrade")return;t(o)}};return n.addEventListener("message",o),function(){return n.removeEventListener("message",o)}}return function(){}}function $(e,t,n,a){var i=new(r("Deferred"));return o("SharedWorkerStorageManager").getOrUpdateWorkerReference(e,function(e){return e==null||e.url!==t?(i.resolve("url-was-changed"),e):e.rev!==n||e.spin_time!==a?babelHelpers.extends({},e,{rev:n,spin_time:a}):e}).then(function(){i.resolve("success")}),i.getPromise()}async function P(e,t,n,a){if(e.version!==2)throw r("err")("Worker version must be 2");var i=e.name,l=await T(e.getJSModuleBundleResource(),!1,a),s=l.rev;if(s==null)throw r("err")("HRP rev or spin time is null");var c={url:o("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl(),rev:s,spin_time:l.time,version:e.version,rsrcBundleUrl:e.getJSModuleBundleResource().url,sandboxOnlyChecksum:e.sandboxOnlyChecksum},p=new(r("Deferred")),_=new(r("Deferred")),g=[];try{var h=function(t){_.reject(t),p.reject(t)};g.push(x(i,function(e){h(new u("broadcast-"+e))})),a==null||a.markEventStart("get_worker_reference");var y=await D(e,c,a);a==null||a.markEventEnd("get_worker_reference");var C=d(y.url,i,a);g.push(o("SharedWorkerEventManager").registerConnectionAckListener(C,function(e,t,n){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),p.resolve({hrpStatus:n!=null?n:"no-hrp",workerID:t})})),g.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(C,function(e,t,n,r){a==null||a.addAnnotations({string:{selfTerminationError:r}}),o("SharedWorkerLoggingUtils").logSelfTermination(i,e,t,n),h(new u(t))},{once:!0})),g.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(C,function(e){var t=e.reason,n=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(i,null,t,n),h(new u(t!=null?t:"sw-shutdown-unknown"))})),g.push.apply(g,m(C,i,a)),a.markEventStart("worker_connection"),C.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(C);var b=await p.getPromise(),v=b.hrpStatus,S=b.workerID;if(a.markEventEnd("worker_connection"),v==="no-hrp"){a==null||a.markPoint("read_dynamic_data");var R=c.rev>=y.rev,L=R?Promise.resolve(l):T(e.getJSModuleBundleResource(),!0,a);r("promiseDone")(L.then(function(e){a==null||a.markEventStart("hrp_init"),o("SharedWorkerEventManager").emitHrpInit(C,{hrp:e.hrp.hrp,js_env:e.hrp.js_env,isDev:!1},a)},function(e){var t=r("getErrorSafe")(e);a==null||a.markPoint("hrp_init_fail",{string:{hrpInitErr:t.toString()}}),h(t)}))}g.push(o("SharedWorkerEventManager").registerExecuteWorkerAckListener(C,a,function(e){var t=e.workerSpinTime,n=e.err,i=e.isFirstInit,l=e.workerRev,s=e.workerSpinMode;o("SharedWorkerLoggingUtils").logExecuteAck(a,t,n,i,l,s),n!=null||t==null||l==null?_.reject(r("err")(n!=null?n:"no worker rev or spin time")):_.resolve({workerRev:l,workerSpinTime:t})})),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(C);var E=await _.getPromise(),k=E.workerRev,I=E.workerSpinTime;a==null||a.markEventStart("update_worker_ref");var P=await $(i,y.url,k,I);if(a==null||a.markEventEnd("update_worker_ref",{string:{updateWorkerRef:P}}),P==="url-was-changed")throw o("SharedWorkerEventManager").emitWorkerShutdown(C,{reason:"url-was-changed"}),new u("url-was-changed");return t(),f(C,n,i,S),C}finally{g.forEach(function(e){return e()})}}l.SHARED_WORKER_BROADCAST_CHANNEL=s,l.SelfTerminationError=u,l.createPushSafeSharedWebWorkerAsync=R,l.createPushSafeSharedWebWorkerV2Async=L,l.terminateSharedWorker=E,l.doesSharedWorkerReferenceExist=I}),98);
__d("SharedWorkerV2ResourceExperimental",["Deferred","SharedWorkerBundleResource","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerUptimeTracker","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerV2BundleUrlExperimental","justknobx","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e=50,s=5e3,u=2e3;function c(e,t,n,a){return o("SharedWorkerDevChangeManager").shouldUpgradeWorkerForDevExperimental(e)&&!a?!0:t<r("SiteData").client_revision&&n<r("SiteData")[r("StaticSiteData").spin_time_key]}async function d(t,n,a){var i=t.name,l=r("buildSharedWorkerInitQPLLogger")(a==null?void 0:a.onQPLEvent);l.start({version:2,workerName:i,experimental_init:!0,callReason:a==null?void 0:a.reason,migrationEnabled:!0}),l.markEventStart("create_worker"),r("supportsNativeWebLock")()&&r("promiseDone")(o("SharedWorkerMigrationUtils").isStatusLockHeld(i).then(function(e){l.addAnnotations({bool:{workerAlreadyRunning:e}})})),(a==null?void 0:a.migratedWorker)===!0&&await o("SharedWorkerMigrationUtils").checkStorageAndTerminateLegacyWorker({name:i,logger:l});var s=await m(t,l),u=s.worker,c=s.needsUpgrade;return new Promise(function(a,s){var d=function(t){return a(_(t,i,l,n))};c?(o("SharedWorkerEventManager").registerWorkerShutdownListener(u,function(n){var o=n.workerID,a=n.isInitialized;l.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:o},bool:{oldWorkerWasInitialized:a}}),r("setTimeout")(function(){return m(t,l).then(function(e){var t=e.worker;return d(t)})},e)},{once:!0}),l.markEventStart("old_worker_shutdown"),o("SharedWorkerEventManager").emitWorkerShutdown(u,{upgrade:!0})):d(u)})}function m(e,t){var n=e.name,a=r("createSharedWorkerV2BundleUrlExperimental")(n),i=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),l=r("supportsModuleWorker")(!0)?"module":"classic",s=new SharedWorker(i,{name:n,type:l}),u=new Set;o("SharedWorkerEventManager").registerWorkerInitPointsListener(s,function(e){u.has(e)||(u.add(e),t==null||t.markPoint("worker_init_point_"+e))});var d=new(r("Deferred"));return o("SharedWorkerEventManager").registerGetWorkerRevListener(s,t,function(r){var o=r.rev,a=r.spinTime,i=r.workerChecksum,l=c(n,o,a,e.sandboxOnlyChecksum===i);d.resolve(l),l?t.addAnnotations({int:{oldWorkerRev:o,oldWorkerSpinTime:a}}):t.addAnnotations({int:{workerRev:o,workerSpinTime:a}})}),p(s,n,t),s.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(s),d.getPromise().then(function(e){return{worker:s,needsUpgrade:e}})}function p(e,t,n,r){return e.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(n,e,t)}),o("SharedWorkerEventManager").registerForwardListeners(e),o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(e,function(e,t,r,o){n.endFailure("worker_init_failure",{string:{selfTerminationError:o,selfTerminationReason:t}})},{once:!0}),o("SharedWorkerEventManager").registerConnectionAckListener(e,function(e,t){n==null||n.addAnnotations({string:{connectedFrom:e,workerID:t}}),n==null||n.markPoint("worker_connection_established")},{once:!0}),e}function _(e,t,n,a){return o("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(e){var n=e.reason,i=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(t,null,n,i),n==="requested-upgrade"?r("setTimeout")(function(){return a==null?void 0:a(n,i)},1e3):n==="dynamic_string_worker_rollback"?a==null||a("maw_request_refresh",i):a==null||a(n,i),o("SharedWorkerUptimeTracker").stopUptimeTracking(t)}),n.markEventEnd("create_worker"),n.endSuccess(),o("SharedWorkerUptimeTracker").startUptimeTracking(e,t),o("SharedWorkerDevChangeManager").trackCreatedWorker(t),e}function f(e,t,n,a,i){i===void 0&&(i=0);var l=n.name,s=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),c=r("supportsModuleWorker")(!0)?"module":"classic",d=new SharedWorker(s,{name:l,type:c});a==null||a.markPoint("shared_worker_construct_done"),a==null||a.addAnnotations({string:{workerUrl:s.toString()}});var m=new(r("Deferred")),p=[];p.push(o("SharedWorkerEventManager").registerConnectionAckListener(d,function(e,t){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),a==null||a.markPoint("worker_connection_established"),m.resolve()},{once:!0})),p.push(o("SharedWorkerEventManager").registerWorkerInitPointsListener(d,function(e){a==null||a.markPoint("worker_init_point_"+e)})),p.push(o("SharedWorkerEventManager").registerForwardListeners(d)),o("SharedWorkerEventManager").emitConnectionAckRequest(d),d.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(a,e,t)});var _=new(r("Deferred"));return p.push(o("SharedWorkerEventManager").registerGetWorkerRevListener(d,a,function(e){var t=e.rev,n=e.spinTime;a==null||a.addAnnotations({int:{initialWorkerRev:t,initialSpinTime:n}}),_.resolve({worker:d,rev:t,spinTime:n})})),p.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(d,function(e,n,r,i){a==null||a.addAnnotations({string:{selfTerminationError:i}}),o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r),_.reject(new(o("SharedWorkerBundleResource")).SelfTerminationError(n))},{once:!0})),p.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(d,function(e){var n=e.reason,r=e.workerID;a==null||a.addAnnotations({string:{shutdownReason:n}}),o("SharedWorkerLoggingUtils").logShutdown(t,null,n,r),_.reject(new(o("SharedWorkerBundleResource")).SelfTerminationError(n!=null?n:"unknownShutdown"))},{once:!0})),d.port.start(),i===0&&r("justknobx")._("1707")&&Promise.race([m.getPromise().then(function(){return"success"}),new Promise(function(e){r("setTimeout")(function(){e("timeout")},u)})]).then(function(r){if(r==="timeout"){var o=d,l=f(e,t,n,a,i+1);l.then(function(e){return _.resolve(e)}),p.forEach(function(e){return e()}),o.port.close()}}),_.getPromise()}async function g(e,t){var n=e.name,a=new(r("Deferred")),i=await o("SharedWorkerMigrationUtils").isStatusLockHeld(n),l=r("buildSharedWorkerTerminateQPLLogger")();if(!i){l.start({workerName:n}),l.markPoint("no_worker_running"),l.endSuccess();return}l.start({workerName:n}),l.addAnnotations({string:{reason:t,terminatingPageId:r("pageID")}});var u=r("createSharedWorkerV2BundleUrlExperimental")(n),c=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(u),d=r("supportsModuleWorker")(!0)?"module":"classic",m=new SharedWorker(c,{workerName:n,type:d});return l.markPoint("worker_created"),o("SharedWorkerEventManager").registerWorkerShutdownListener(m,function(e){var t=e.workerID;l.markPoint("worker_shut_down",{string:{workerID:t}}),l.endSuccess(),o("SharedWorkerUptimeTracker").stopUptimeTracking(n),a.resolve()},{once:!0}),m.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(m,{reason:t}),r("setTimeout")(function(){return a.reject()},s),a.getPromise()}l.DELAY_FOR_WORKER_SHUTDOWN_MS=e,l.createPushSafeSharedWebWorkerV2Async=d,l.startV2Worker=f,l.terminateSharedWorker=g}),98);
__d("MAWWebWorkerSingleton",["Deferred","MAWInit","MAWMIC","MAWStartupLoggingUtils","MAWWaitForBackendSetup","MAWWorkerWatchdogRecovery","Promise","SharedWorkerBundleResource","SharedWorkerMigrationUtils","SharedWorkerV2ResourceExperimental","WAResolvable","WebWorkerV2Resource","clearTimeout","cr:6600","err","gkx","promiseDone","setTimeout","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=function(t){s=t},c=function(){return s},d=g,m=new(o("WAResolvable")).Resolvable,p=null;function _(){return o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?o("SharedWorkerMigrationUtils").isStatusLockHeld(n("cr:6600").name):(e||(e=n("Promise"))).resolve(p!==null)}function f(){var t={isSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),nativeLocksSupported:o("SharedWorkerMigrationUtils").supportsNativeWebLocks(),workerCreationPromiseExists:p!==null};if(t.isSharedWorker!==!0)return(e||(e=n("Promise"))).resolve(t.workerCreationPromiseExists===!0?{data:t,tag:"dedicated_exists"}:{data:t,tag:"dedicated_not_exists"});if(t.nativeLocksSupported!==!0)return(e||(e=n("Promise"))).resolve({data:t,tag:"shared_unknown_locks_not_supported"});var r=o("MAWWaitForBackendSetup").getCurrentWorkerID();return(e||(e=n("Promise"))).all([o("SharedWorkerMigrationUtils").isStatusLockHeld(n("cr:6600").name),r!=null?o("SharedWorkerMigrationUtils").isWorkerIdStatusLockHeld(n("cr:6600").name,r):(e||(e=n("Promise"))).resolve(!1)]).then(function(e){var n=e[0],r=e[1];return t.sharedLockHeld=n,t.workerIdLockHeld=r,n&&r?{data:t,tag:"shared_exists_and_connected"}:n?{data:t,tag:"shared_exists_not_connected"}:r?{data:t,tag:"shared_only_unique_lock_held"}:{data:t,tag:"shared_not_exists"}})}function g(){p=null}function h(e){return p?(o("MAWMIC").addPoint(e+"_wait_on_worker_creation"),o("MAWInit").MAWInit.logPoint(e+"_wait_on_worker_creation"),p):(o("MAWInit").MAWInit.logPoint(e+"_create_worker_start"),o("MAWMIC").addPoint(e+"_create_worker_start"),p=(o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?y(e):C().then(function(e){return{worker:e,workerID:"dedicated"}})).then(function(t){var n=t.worker,r=t.workerID;return o("MAWMIC").addPoint(e+"_create_worker_end"),o("MAWInit").MAWInit.logPoint(e+"_create_worker_end"),{worker:n,workerID:r}},function(e){throw p=null,e}),p)}function y(e){var t=function(t,n,o){r("promiseDone")(m.promise.then(function(){return d(t,n,o)}))};o("MAWWorkerWatchdogRecovery").setRecoveryForWatchdog(t);var a=new(r("Deferred")),i=r("gkx")("7313");o("MAWMIC").addBoolAnnotation("migrationEnabled",i);var l=i?o("SharedWorkerV2ResourceExperimental").createPushSafeSharedWebWorkerV2Async(n("cr:6600"),t,{migratedWorker:!0,onQPLEvent:o("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:e}):o("SharedWorkerBundleResource").createPushSafeSharedWebWorkerV2Async(n("cr:6600"),t,{onQPLEvent:o("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:e,useDynamicStringInit:r("gkx")("8737")});return l.then(function(e){u(e),o("MAWMIC").addPoint("shared_worker_bundle_created");var t=r("setTimeout")(function(){o("MAWMIC").addPoint("shared_worker_connection_ack_timeout"),a.reject(r("err")("Worker connection ack timeout"))},1e4),n=function(n){var e,i,l;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="connection-ack"&&typeof((i=n.data)==null?void 0:i.response)=="object"&&typeof((l=n.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c=typeof((s=n.data)==null||(s=s.response)==null?void 0:s.workerID)=="string"?(u=n.data)==null||(u=u.response)==null?void 0:u.workerID:void 0;c!=null?(o("MAWMIC").addPoint("shared_worker_workerID_received"),o("MAWMIC").addStringAnnotation("workerID",c),t!=null&&r("clearTimeout")(t),a.resolve(c)):(o("MAWMIC").addPoint("shared_worker_null_workerID_received"),o("MAWMIC").addStringAnnotation("workerID","unknown"))}};return e.port.addEventListener("message",n),e.port.postMessage({type:"ww-connection-ack"}),e.addEventListener("error",function(e){o("MAWStartupLoggingUtils").logWorkerError("Shared Worker",e,"")}),a.getPromise().then(function(t){return{worker:e.port,workerID:t}})})}function C(){return(e||(e=n("Promise"))).resolve(o("WebWorkerV2Resource").createDedicatedV2WebWorker(n("cr:6600"))).then(function(e){var t=e.url,n=e.worker;return n.onerror=function(e){return o("MAWStartupLoggingUtils").logWorkerError("Dedicated Worker",e,t)},o("MAWStartupLoggingUtils").setImportScriptsErrorListener(n),n})}function b(e){d=e,m.resolve()}l.getSharedWorkerInstance__TEST_ONLY=c,l.doesWorkerExist=_,l.getWorkerHealthStatus=f,l.resetWorkerCreation=g,l.createWorkerIfNone=h,l.setOnCloseForWorkerInstance=b}),98);
__d("MAWWaitForBackendSetup",["ErrorSerializer","MAWInit","MAWInitError","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWebWorkerSingleton","Promise","err","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=new(e||(e=n("Promise")))(function(e,t){s=e,u=t}),d=!1,m=!1,p=!1,_=!1,f=null,g=s,h=u;function y(t){return new(e||(e=n("Promise")))(function(e,n){c.then(e).catch(function(e){var a=t+" rejected because backend setup failed: "+e.message+".",i=e instanceof o("MAWInitError").MAWInitError?e.error:null;i!=null&&(a=a.concat(" More error detail: "+r("ErrorSerializer").toReadableMessage(i))),n(r("err")(a))})})}function C(e,t){r("promiseDone")(y(t).then(function(){e()}))}function b(){_&&(c=new(e||(e=n("Promise")))(function(e,t){s=e,u=t}),_=!1,d=!1,g=s,h=u,m=!0,p=!1)}function v(e){d=!0,_=!0,p=!1,g==null||g(e)}function S(e){d=!1,_=!0,p=!1,h==null||h(e)}function R(){return d}function L(){return _}function E(){return m}function k(e){e!=null&&f!==e&&o("MAWSetupWorkerAuxStateForLogging").resetWorkerCreationTime(),f=e}function I(e){f==null||f!==e||T()}function T(){f=null,o("MAWWebWorkerSingleton").resetWorkerCreation(),b(),o("MAWInit").MAWInit.logPoint("reset_current_worker"),o("MAWMIC").addPoint("reset_current_worker")}function D(){return f}function x(){p=!0}function $(){return p}l.waitForBackendSetup=y,l.runAfterBackendSetup=C,l.resetBackendSetup=b,l.resolveBackendSetup=v,l.rejectBackendSetup=S,l.isBackendSetupSuccessful=R,l.isBackendSetupSettled=L,l.wasBackendSetupReset=E,l.setCurrentWorker=k,l.resetCurrentWorkerWithId=I,l.resetCurrentWorkerSkipIdCheck=T,l.getCurrentWorkerID=D,l.markBackendSetupStarted=x,l.isBackendSetupInProgress=$}),98);
__d("MAWWorkerEvent",["FBLogger","MAWMIC","MAWReliabilityMonitor","MAWSetupWorkerAuxStateForLogging","MAWTrackPendingOccamadilloThreads","MAWWaitForBackendSetup","MultipleTabsLogger","QPLUserFlow","getErrorSafe","pageID","performanceNow","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MAWBridgeObserver").__setRef("MAWWorkerEvent"),u=r("requireDeferred")("MAWWebWorkerSingleton").__setRef("MAWWorkerEvent"),c=new Set,d=new Set(["addEbUploadTrackingWorkerQPL","addMediaDownloadQpl","searchGetFTSRestoreSessionId","none"]),m=new Set(["bulkMaybeCreateOrUpdateThread","createOrUpdateThread"]),p=new Map,_=function(t){switch(t){case"sendAndReceive":return 1e4;case"fireAndForget":return 4e3;case"waitUntilCompleted":return 1e4;case"waitUntilPersisted":return 1e4;default:return 1e4}},f=function(n,o,a){var t=window.setTimeout(function(){E(n,"ack_timeout"),r("promiseDone")(s.load().then(function(t){t.notifyUnackedEvent({route:o,timestamp:(e||(e=r("performanceNow")))()})}))},_(a));return p.set(n,t),t},g=function(t){var e=p.get(t);e!=null&&(window.clearTimeout(e),r("promiseDone")(s.load().then(function(e){e.resetUnackedMessages()})),p.delete(t))};function h(e,t,n){c.has(n)||d.has(t)||(c.add(n),r("QPLUserFlow").start(r("qpl")._(1056842055,"807"),{annotations:{bool:{duringMIC:o("MAWMIC").duringMIC(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{key:n},string:{callType:e,event:t,pageID:r("pageID"),workerHeartbeatsOnStart:o("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:n}),o("MultipleTabsLogger").hasMultipleTabs().then(function(e){r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),{bool:{isMultiTabs:e}},{instanceKey:n})}),u.load().then(function(e){return e.getWorkerHealthStatus().then(function(e){r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),{string:{workerHealthStatusOnStart:e.tag}})})}))}function y(e){c.has(e)&&(c.delete(e),r("QPLUserFlow").endSuccess(r("qpl")._(1056842055,"807"),{instanceKey:e}))}function C(e,t){c.has(e)&&(c.delete(e),r("QPLUserFlow").endFailure(r("qpl")._(1056842055,"807"),"fail",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:t},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e}))}function b(e,t,n){c.has(e)&&(c.delete(e),r("QPLUserFlow").endFailure(r("qpl")._(1056842055,"807"),"timeout",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:t,workerHealthStatus:n.tag},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e}))}function v(e,t){c.has(e)&&r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),t,{instanceKey:e})}function S(e,t){if(c.has(e))try{if(Array.isArray(t)){var n,a=t.every(function(e){return typeof e=="object"&&e!=null&&"state"in e&&e.state===o("MAWReliabilityMonitor").HealthReportState.OK.valueOf()}),i=t.reduce(function(e,t){return typeof t=="object"&&t!=null&&"state"in t&&"identifier"in t&&"reason"in t&&t.state!==o("MAWReliabilityMonitor").HealthReportState.OK.valueOf()&&typeof t.state=="string"&&typeof t.reason=="string"&&typeof t.identifier=="string"&&e.push([t.identifier,t.state,t.reason].join(":")),e},[]);v(e,{bool:{workerHealthStatus:a},string:{error:(n=i[0])!=null?n:void 0},string_array:{errors:i}})}}catch(e){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Failed to log ack result annotations"),!1}}function R(e,t,n){if(typeof n=="object"&&typeof(n==null?void 0:n.timestamp)=="number"){var r=n.payload;g(e),E(e,"ack"),S(e,r),m.has(t)&&o("MAWTrackPendingOccamadilloThreads").markBridgeCallAcked()}}function L(e,t,n){d.has(t)||f(e,t,n),E(e,"send")}function E(e,t,n){c.has(e)&&r("QPLUserFlow").addPoint(r("qpl")._(1056842055,"807"),t,{instanceKey:e,timestamp:n})}l.getUnackedEventTimeout=_,l.logStart=h,l.logSuccess=y,l.logFailure=C,l.logTimeoutFailure=b,l.logAnnotations=v,l.logAck=R,l.logSend=L}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS","Random","WAHashStringToNumber"],(function(t,n,r,o,a,i,l){"use strict";var e,s=3185,u="armadillo_worker_runtime",c="getWorkerHeartbeat",d=10,m=new Array(d);function p(t,n,r){(e||(e=o("ODS"))).bumpEntityKey(s,u,t+"_"+n+"_"+r)}function _(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function f(t,n,r,a){p(n,r,"start"),r!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_start"),o("MAWWorkerEvent").logStart(t,r,a),m.length===d&&m.shift(),m.push(n+"_"+r))}function g(t){m.filter(Boolean).forEach(function(n){(e||(e=o("ODS"))).bumpEntityKey(s,u,n+t)})}function h(t,n,r){p(t,n,"success"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_success"),o("MAWWorkerEvent").logSuccess(r))}function y(t,n,r,a){p(t,n,"fail"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_fail"),o("MAWWorkerEvent").logFailure(a,r))}function C(t,n,r,a){p(t,n,"timeout"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_timeout"),o("MAWWorkerEvent").logTimeoutFailure(r,"Route timeout",a))}function b(){g("_before_unresponsive"),m.fill(null)}l.CAT_ID=s,l.ENT=u,l.HEARTBEAT_ROUTE=c,l.RECENT_ROUTES_NUM=d,l.getBridgeEventInstanceKey=_,l.routeStart=f,l.logRecentRoutes=g,l.routeSuccess=h,l.routeFail=y,l.routeTimeoutFail=C,l.logRecentBridgeEvents=b}),98);
__d("WACustomError",[],(function(t,n,r,o,a,i){"use strict";var e=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function l(t,n,r){n===void 0&&(n=!0);function o(e){var r=Error.call(this,e);this.message=e,r.name=t,this.name=t,n&&(this.stack=r.stack)}return o.prototype=Object.create(r?r.prototype:e),o.prototype.constructor=o,o}function s(e){return e.length===0?"No errors":e.length===1?e[0].message:e.map(function(e){return"- "+e.message}).join("\n")}var u=(function(e){function t(t,n){var r,o=n!=null&&n.length>0?n:s(t);return r=e.call(this,o)||this,r.errors=t,r}return babelHelpers.inheritsLoose(t,e),t})(l("AggregateError",!0)),c=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(l("TimeoutError",!1)),d=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.code=n,r}return babelHelpers.inheritsLoose(t,e),t})(l("HttpError",!1)),m=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(l("UnimplementedMethod")),p=!1;function _(e){if(e==null||e.name!=="QuotaExceededError")throw e;p=!0}function f(){return p}function g(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))}var h=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.inner=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.customError=l,i.AggregateError=u,i.TimeoutError=c,i.HttpError=d,i.UnimplementedMethod=m,i.supressQuotaExceededError=_,i.hasSupressedQuotaExceededError=f,i.obtainErrorSummary=g,i.WrappedError=h}),66);
__d("WAAbortError",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("AbortError")),s="AbortError";function u(e){return function(t){if(t.name===s)return e(t);throw t}}l.AbortError=e,l.ABORT_ERROR=s,l.catchAbort=u}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r){return new(e||(e=n("Promise")))(function(e,n){if(r!=null&&r.aborted)throw new(o("WAAbortError")).AbortError;var a=setTimeout(i,t);r==null||r.addEventListener("abort",l);function i(){r==null||r.removeEventListener("abort",l),e()}function l(){r==null||r.removeEventListener("abort",l),clearTimeout(a),n(new(o("WAAbortError")).AbortError)}})}function u(t,r,o){return new(e||(e=n("Promise")))(function(e,n){var a=setTimeout(function(){try{e(o())}catch(e){n(e)}},r);t.then(function(t){clearTimeout(a),e(t)},function(e){clearTimeout(a),n(e)})})}l.delayMs=s,l.withTimeout=u}),98);
__d("MAWMaybeWithTimeout",["MAWODSProxy","WAOdsEnums","WAPromiseDelays"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!0}function s(t,n,r,a){return e()?o("WAPromiseDelays").withTimeout(t.then(function(e){return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_NON_TIMEOUT,key:a!=null?a:"unknown"}),e}),n,function(){return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_TIMEOUT,key:a!=null?a:"unknown"}),r()}):t}l.maybeWithTimeout=s}),98);
__d("MAWTimedBridge",["MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=17e4;function u(t,n,r,a,i){return i===void 0&&(i=s),o("MAWWaitForBackendSetup").waitForBackendSetup(r).then(function(){return o("MAWMaybeWithTimeout").maybeWithTimeout(t(),i,function(){return o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(t){throw o("MAWBridgeLoggingUtils").routeTimeoutFail(n,r,a,t),o("WALogger").COUNT(e||(e=babelHelpers.taggedTemplateLiteralLoose(["route.",""])),r).tags("bridge_timeout"),new c("Bridge route "+r+" timed out, WorkerHealthStatus: "+t.tag)})},r)})}var c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="BridgeTimeoutError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));l.DEFAULT_MAW_BRIDGE_TIMEOUT_MS=s,l.bridgeTimeout=u,l.MAWBridgeTimeoutError=c}),98);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("1143");function u(t,r,a,i){return o("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var l=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(r);i!==!0&&o("MAWBridgeLoggingUtils").routeStart("fireAndForget",t,r,l),o("MAWTimedBridge").bridgeTimeout(function(){return new(e||(e=n("Promise")))(function(e){o("MAWBridge").getBridge().fireAndForget(t,r,a,i,{onAck:function(a){i!==!0&&(o("MAWWorkerEvent").logAck(l,r,a),o("MAWBridgeLoggingUtils").routeSuccess(t,r,l)),e()},onSend:function(t){var e=t.queueMsgs,n=t.queueSize;i!==!0&&(o("MAWWorkerEvent").logSend(l,r,"fireAndForget"),o("MAWWorkerEvent").logAnnotations(l,{int:{bridgeSize:n},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:l})})},t,r,l,s)},r)}l.fireAndForget=u}),98);
__d("MAWBridgeODSLogger",["ExecutionEnvironment","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){if(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_BRIDGE,key:(a?"sendAndReceive":"fireAndForget")+"."+t+"."+n+"."+((e||(e=r("ExecutionEnvironment"))).isInWorker?"worker":"ui")}),i!=null&&typeof i=="object"){var l=i.event;if(l!=null&&typeof l=="object"){var s=l==null?void 0:l.i;s!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_BRIDGE,key:"qpl."+t+"."+n+"."+s+"."+((e||(e=r("ExecutionEnvironment"))).isInWorker?"worker":"ui")})}}}l.logCrossWorkerPortalODS=s}),98);
__d("MAWJids",["I64","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WAJids").createJidUtils({platform:"msgr"}),u=s.toUserJid,c=function(n,r){var t=(e||(e=o("I64"))).to_string(n);return r?o("WAJids").toGroupJid(t):u(t)};function d(e){return c(e,!1)}function m(e){return c(e,!0)}var p=function(n){var t=o("WAJids").threadIdForChatJid(n);return(e||(e=o("I64"))).of_string(t)};function _(e){return o("WAJids").unsafeCoerceToChatJid(e)}l.jidUtils=s,l.toUserJid=u,l.convertIntJidToChatJid=c,l.convertIntJidToOneToOneChatJid=d,l.convertIntJidToGroupJid=m,l.convertChatJidToIntJid=p,l.threadIdToChatJid=_}),98);
__d("MAWMiActMappingTableAPI",["I64","LSMessagingThreadTypeUtil","MAWJids","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return t==null?Promise.resolve(null):o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))}function u(e,t,n){return s(e,t).then(function(e){var t=e==null?void 0:e.jid;return t==null?null:o("MAWJids").convertIntJidToChatJid(t,o("LSMessagingThreadTypeUtil").isGroup(n))})}function c(e,t){return m(e,t).then(function(e){return e==null?void 0:e.serverThreadKey})}function d(e,t){return t==null?Promise.resolve(null):o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table.index("jid")).getKeyRange(t))}function m(e,t){return d(e,o("MAWJids").convertChatJidToIntJid(t))}async function p(e,t){var n=t.intJid,r=t.threadKey,o=await s(e,r);return o!=null?o:d(e,n)}function _(t){return(e||(e=o("I64"))).le(t,e.zero)}function f(e,t){return e.tables.mi_act_mapping_table.subscribe(function(e,n){var r=e[0],o=e[1],a=e[2],i=n.operation;i==="delete"&&!_(o)&&t(o,r)})}l.getMappingRowForThreadKey=s,l.getChatJidForThreadKey=u,l.getThreadKeyForChatJid=c,l.getMappingRowForIntJid=d,l.getMappingRowForChatJid=m,l.getMappingRowForThreadKeyOrJid=p,l.subscribeToMappingDeletion=f}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(t==="pending"||t==="other")return o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+t+", contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)),!0;var i=o("LSContactBitOffset").hasWithDefault(64,a,!0);return t==="inbox"&&(e||(e=o("I64"))).equal(a.contactViewerRelationship,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").NOT_CONTACT))&&!i?(n&&o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true"),n):!1}function c(e){return e==="pending"||e==="other"}function d(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?c(e.folderName):!1}function m(t,n){return n!=null?u(t.folderName,(e||(e=o("I64"))).gt(t.lastActivityTimestampMs,e.zero),n[1]):!1}function p(e,t){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?m(e,t):!1}function _(e){return o("LSMessagingThreadTypeUtil").isGroup(e.threadType)?c(e.folderName):!1}var f=[8,18,19,34,24,25,122],g=[21,48];l.isMessageRequestV2=u,l.isOneOnOneMessageRequest=d,l.isOneOnOneMessageRequestV2=p,l.isGroupMessageRequest=_,l.disabledThreadCapabilitiesForIncomingRequest=f,l.enabledThreadCapabilitiesForIncomingRequest=g}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(t,n,r,o,a,i){"use strict";var e=[0,31,35,55,56,58,24,25,35,19],l=e;i.default=l}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","ReQL","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=o("MAWCurrentUser").getID(),d=(e||(e=o("I64"))).of_string(c);function m(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t)).then(function(t){if(t==null)return Promise.resolve();var n=o("LSBitOffset").set((u||(u=o("LSIntEnum"))).ofNumber(27),t.capabilities),r=babelHelpers.extends({},t,{capabilities:n});return e.threads.put(r)}).then(r("emptyFunction"))}function p(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t)).then(function(t){if(t==null)return Promise.resolve();var n=o("LSBitOffset").clear((u||(u=o("LSIntEnum"))).ofNumber(27),t.capabilities),r=babelHelpers.extends({},t,{capabilities:n});return e.threads.put(r)}).then(r("emptyFunction"))}function _(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n)).then(function(r){if(r==null)return Promise.resolve([void 0,void 0]);var a=o("ReQL").firstAsync(o("LSMessagingThreadTypeUtil").isOneToOne(r.threadType)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants).getKeyRange(n),o("ReQL").fromTableAscending(t.contacts)).filter(function(t){var n=t[1];return!(e||(e=o("I64"))).equal(n.id,d)}).map(function(e){var t=e[1];return t}):o("ReQL").empty());return Promise.all([Promise.resolve(r),a])}).then(function(n){var a=n[0];if(a==null)return Promise.resolve();var i=n[1];if(i==null)return Promise.resolve();var l=(e||(e=o("I64"))).equal(i.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),s=e.equal(i.blockedByViewerStatus,u.ofNumber(r("LSContactBlockedByViewerStatus").FULLY_BLOCKED)),c=o("LSContactBitOffset").has(66,i),d=s?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedFbBlockCapabilities,a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):l?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedMnBlockCapabilities,a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):c?o("LSThreadBitOffset").clear(r("clearedMAWMnRestrictCapabilities"),a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):[a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5],m=d[0],p=d[1],_=d[2],f=d[3],g=d[4];return t.threads.put(babelHelpers.extends({},a,{capabilities:m,capabilities2:p,capabilities3:_,capabilities4:f,capabilities5:g})).then(r("emptyFunction"))})}async function f(e,t){var n=e.threads,r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n).getKeyRange(t));if(r==null)return Promise.resolve();var a=o("LSThreadBitOffset").set.apply(o("LSThreadBitOffset"),[o("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(o("LSThreadBitOffset").clear(o("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5))),i=a[0],l=a[1],s=a[2],u=a[3],c=a[4];await n.put(babelHelpers.extends({},r,{additionalThreadContext:void 0,capabilities:i,capabilities2:l,capabilities3:s,capabilities4:u,capabilities5:c}))}async function g(e,t,n){var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(r!=null){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.contacts,["name"]).getKeyRange(n));if(a!=null){var i=s._(/*BTDS*/"{Inviter Name} invited you to join",[s._param("Inviter Name",a.name)]).toString(),l=o("LSThreadBitOffset").set([105],r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5),u=l[0],c=l[1],d=l[2],m=l[3],p=l[4];await e.threads.put(babelHelpers.extends({},r,{capabilities:u,capabilities2:c,capabilities3:d,capabilities4:m,capabilities5:p,snippet:i}))}}}async function h(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(n!=null){var r=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.group_invites).getKeyRange(t)),a=o("LSThreadBitOffset").clear([105],n.capabilities,n.capabilities2,n.capabilities3,n.capabilities4,n.capabilities5),i=a[0],l=a[1],s=a[2],u=a[3],c=a[4];await e.threads.put(babelHelpers.extends({},n,{capabilities:i,capabilities2:l,capabilities3:s,capabilities4:u,capabilities5:c,snippet:void 0})),await r.map(async function(t){await e.group_invites.delete(t.threadKey,t.inviterId,t.inviteeId)})}}l.enableAddMembersTxn=m,l.disableAddMembersTxn=p,l.disableBlockerCapabilitiesTxn=_,l.updateNonMessageRequestThreadTxn=f,l.setGroupInviteTxn=g,l.clearGroupInviteTxn=h}),226);
__d("uniqueArray",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(t,n){var r=n!=null?n:e,o=[],a=new Set;return t.forEach(function(e){var t=r(e);a.has(t)||(a.add(t),o.push(e))}),o}i.default=l}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","uniqueArray"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=o("MAWCurrentUser").getID(),d=(e||(e=o("I64"))).of_string(c);function m(e,t){var n=t.map(function(e){var t=e.chatJid,n=e.type,r=e.userJid;return babelHelpers.extends({chatJid:t},b(n),{userJid:r})});return _(e,n)}function p(e,t){var n=t.participants.map(function(e){return{chatJid:e.threadJid,isAdmin:e.isAdmin,isInvited:e.isInvited,isSuperAdmin:e.isSuperAdmin,userJid:o("MAWJids").toUserJid(e.fbid)}});return _(e,n)}async function _(e,t){var n=await g(e,t);await Promise.all(n.map(function(t){var n=t.mawParticipant,r=t.threadKey,a=o("MAWJids").convertChatJidToIntJid(n.userJid);return[e.participants.get(r,a).then(function(t){var o=y(t,n,r);return t!=null?e.participants.put(o):Promise.all([e.participants.add(o),f(e,a)])}),h(e,a,r,n.isAdmin)]}).flat(1/0))}async function f(t,n){await r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(t),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:u.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:u.ofNumber(r("LSContactIdType").FBID),contactType:u.ofNumber(r("LSContactType").USER),contactViewerRelationship:u.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:u.ofNumber(r("LSContactGender").UNKNOWN),id:n,isBlocked:!1,isMemorialized:!1,isSelf:c===(e||(e=o("I64"))).to_string(n),workForeignEntityType:u.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}async function g(e,t){var n=r("uniqueArray")(t.map(function(e){return e.chatJid})),a=new Map;return await Promise.all(n.map(function(t){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(e,t).then(function(e){return e!=null&&a.set(t,e)})})),t.map(function(e){var t=a.get(e.chatJid);return t==null?null:{mawParticipant:e,threadKey:t}}).filter(Boolean)}async function h(t,n,r,a){await o("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(t,r),(e||(e=o("I64"))).equal(d,n)&&(a?await o("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(t,r):await o("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(t,r))}function y(t,n,r){return t==null?babelHelpers.extends({},C(n),{authorityLevel:(e||(e=o("I64"))).zero,contactId:o("MAWJids").convertChatJidToIntJid(n.userJid),deliveredWatermarkTimestampMs:e.zero,isSuperAdmin:n.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:e.zero,readWatermarkTimestampMs:e.zero,threadKey:r,threadRoles:e.zero}):babelHelpers.extends({},t,C(n))}function C(e){return{groupParticipantJoinState:e.isInvited?(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").INVITED):(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").MEMBER),isAdmin:e.isAdmin,isModerator:!1,subscribeSource:e.isSuperAdmin?s._(/*BTDS*/"Group creator").toString():void 0}}function b(e){return{isAdmin:e==="superadmin"||e==="admin",isInvited:e==="invitedParticipant",isSuperAdmin:e==="superadmin"}}l.callFromMainThread=m,l.call=p,l.mawToLsParticipantTypeConversion=b}),226);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWorkerEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(t),i=(r==null?void 0:r.isLoggingDisabled)!==!0,l=o("MAWTimedBridge").bridgeTimeout(function(){return i&&o("MAWBridgeLoggingUtils").routeStart("sendAndReceive",e,t,a),o("MAWBridge").getBridge().sendAndReceive(e,t,n,r==null?void 0:r.isLoggingDisabled,{onAck:function(n){i&&o("MAWWorkerEvent").logAck(a,t,n)},onSend:function(n){var e=n.queueMsgs,r=n.queueSize;i&&(o("MAWWorkerEvent").logSend(a,t,"sendAndReceive"),o("MAWWorkerEvent").logAnnotations(a,{int:{bridgeSize:r},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:a}).then(function(n){return i&&o("MAWBridgeLoggingUtils").routeSuccess(e,t,a),n}).catch(function(n){throw i&&o("MAWBridgeLoggingUtils").routeFail(e,t,n.message,a),n})},e,t,a,r==null?void 0:r.timeoutMs);return l}l.sendAndReceive=e}),98);
__d("MAWBundleResource",["MAWMainWebWorkerV2Resource"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MAWMainWebWorkerV2Resource")}),98);
__d("WAShiftTimer",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$2=0,this.$3=0,this.ts=0,this.$4=0,this.$5=0,this.$6=0,this.$7=void 0,this.$8=function(){var e=t.$7,n=t.$1;t.$3=0,t.$2=0,t.ts=0,t.$4=0,t.$5=0,t.$6=0,t.$7=void 0,n(e)},this.onOrBefore=function(e,n){s(e);var r=Date.now(),o=r+e,a=t.$5;if(!(a!==0&&a<o)){var i=t.$6;i!==0&&o<i||(t.$5=o,!t.$3&&(!t.$2||o<t.ts)&&t.$9(o,e,n))}},this.forceRunNow=function(e){t.$2&&clearTimeout(t.$2),t.$3&&cancelAnimationFrame(t.$3),t.$7=e,t.$8()},this.cancel=function(){t.$2&&clearTimeout(t.$2),t.$3&&cancelAnimationFrame(t.$3),t.$2=0,t.$3=0,t.ts=0,t.$4=0,t.$5=0,t.$6=0,t.$7=void 0},this.$1=e}var t=e.prototype;return t.onOrBeforeRepaint=function(t){if(!this.$3){var e=Date.now(),n=this.$6;if(!(n!==0&&e<n)){var r=this.$5;(r===0||e<r)&&(this.$5=e),this.$2&&(clearTimeout(this.$2),this.$2=0),(!this.ts||this.ts>e)&&(this.ts=e),this.$7=t,this.$3=requestAnimationFrame(this.$8)}}},t.onOrAfter=function(t,n){s(t);var e=Date.now(),r=e+t,o=this.$6;if(!(o!==0&&r<o)){var a=this.$5;a!==0&&a<r||(this.$6=r,(!this.$2||this.ts<r)&&this.$9(r,t,n))}},t.debounce=function(t,n){s(t),this.$10(Date.now(),t,n)},t.debounceAndCap=function(t,n,r){s(t),s(n);var e=Date.now(),o=e+n,a=this.$6,i=this.$5;(a===0||a<=o)&&(i===0||o<i)&&(this.$5=o),this.$10(e,t,r)},t.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())},t.isScheduled=function(){return this.$2!==0||this.$3!==0},t.$10=function(t,n,r){var e=t+n,o=this.$6;if(!(o!==0&&e<o)){var a=this.ts,i=this.$5;i!==0&&i<e?a<i&&this.$9(i,i-t,r):a<e&&this.$9(e,n,r)}},t.$9=function(t,n,r){if(this.$3&&(cancelAnimationFrame(this.$3),this.$3=0),this.$7=r,this.ts=t,this.$2){var e=t-this.$4;if(-16<e&&e<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,n),this.$4=t},e})();function s(e){if(!(e>=0))throw r("err")("ShiftTimer must be given delayMs >= 0")}l.ShiftTimer=e}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=1e3,u=(function(){function t(t,n,r){var a=this;this.$1=null,this.$6=Date.now(),this.$7=new(o("WAShiftTimer")).ShiftTimer(function(){var e=a.$1;e!=null&&(a.$1=null,a.$2(e))}),this.$2=n,this.$3=t,this.$5=r!=null?r:e,this.$4=this.$5}var n=t.prototype;return n.addEvent=function(t){var e=this.$1;if(this.$1=e?this.$3(e,t):[t],!this.$7.isScheduled()){var n=this.$4;if(n<1){var r=Date.now(),o=Math.max(r-this.$6,0)/s;n=Math.min(n+o,this.$5),this.$4=n,this.$6=r}var a;n>=1?(a=0,this.$4=n-1):(a=Math.ceil(s*(1-n)),this.$4=0),this.$7.onOrBefore(a)}},n.cancel=function(){this.$1=null,this.$7.cancel()},t})();l.BridgeBatcher=u}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){this.key=t,this.value=n,this.prev=null,this.next=null},u=(function(){function t(e){var t=this,n;this.$2=new Map,this.purgeNow=function(){for(var e=t.$6.prev;t.$4>t.$3&&e!==t.$5;e=e?e.prev:null){if(e==null)throw r("err")("The linked list is not constructed properly.");var n=e,o=n.key,a=n.value;t.$9(o,a)&&(t.delete(o),t.$10&&t.$10(o,a))}t.$8&&t.$8(t.$2)},this.$3=e.sizeLimit,this.$7=e.getSize,this.$8=e.onPurge,this.$9=(n=e.shouldEvict)!=null?n:function(){return!0},this.$10=e.onEvict,this.$11=e.onAdd,this.$12=e.onDelete,this.$4=0,this.$5=new s("placeholder-head",null),this.$6=new s("placeholder-tail",null),this.$5.next=this.$6,this.$6.prev=this.$5,this.$1=new(o("WAShiftTimer")).ShiftTimer(function(){return t.purgeNow()})}var n=t.prototype;return n.get=function(t){if(!this.$2.has(t))return null;var e=this.$2.get(t);if(e==null)return null;var n=e.prev,o=e.next;n&&(n.next=o),o&&(o.prev=n);var a=this.$5.next;if(a==null)throw r("err")("The linked list is not constructed properly.");return this.$5.next=e,a.prev=e,e.prev=this.$5,e.next=a,e.value},n.has=function(t){return this.$2.has(t)},n.touch=function(t){this.get(t)},n.put=function(n,r){if(this.$3!==0){if(this.$7(r)>this.$3){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."])));return}this.delete(n),this.$14(n,r),this.schedulePurge()}},n.$14=function(t,n){var e=new s(t,n);this.$2.set(t,e);var o=this.$5.next;if(o==null)throw r("err")("The linked list is not constructed properly.");this.$5.next=e,o.prev=e,e.prev=this.$5,e.next=o,this.$4+=this.$7(n),this.$11&&this.$11(t,n)},n.delete=function(t){if(this.$2.has(t)){var e=this.$2.get(t);if(e!=null){this.$4-=this.$7(e.value);var n=e.prev,r=e.next;n&&(n.next=r),r&&(r.prev=n),this.$2.delete(t),this.$12&&this.$12(t,e.value)}}},n.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()},n.schedulePurge=function(){this.$1.onOrBefore(1e3)},n.getCurrentSize=function(){return this.$4},n.getPlaceholderHead=function(){return this.$5},n.forEach=function(t){if(this.$4!==0){var e=this.$6.prev;if(e==null)throw r("err")("The linked list is not constructed properly.");for(;e!=null&&e!==this.$5;)t(e.value),e=e.prev}},t})();l.LruCache=u}),98);
__d("WACrossWorkerPortal",["FBLogger","Promise","WABridgeBatcher","WALogger","WALruCache","WAPromiseManagement","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b=(function(){function t(e,t,n,r,a){var i=this,l;if(this.port=null,this.$2=1,this.openRequests=new Map,this.listeners=new Set,(a==null?void 0:a.useLRUCache)===!0){var s,u=new(o("WALruCache")).LruCache({sizeLimit:(s=a.portalCacheSize)!=null?s:100,getSize:function(){return 1}});this.processedRequests={has:function(t){return u.has(t)},add:function(t){u.put(t,!0)}}}else{var c=new Set;this.processedRequests={has:function(t){return c.has(t)},add:function(t){c.add(t)}}}this.$1=e,this.clientId=r,this.config=a,this.sendStream=new(o("WABridgeBatcher")).BridgeBatcher(t,function(e){i.$3(e)},(l=this.config)==null?void 0:l.bridgeBatcherMaxTokens),n.forEach(function(t){e.setNamespaceHandler(t,i.$4(t))})}var a=t.prototype;return a.$5=function(){var e=this.clientId!=null?this.clientId+"_":"";return""+e+this.$2++},a.$6=function(t){var e=t.split("_");return e.length!==2?null:e[0]},a.addListener=function(t){var e=this;return this.listeners.add(t),function(){return e.listeners.delete(t)}},a.setPort=function(n){var t=this;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]))),this.port=n,this.sendStream.cancel(),n.onmessage=function(e){if(t.port!==n){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]))).devConsole(e.data);return}var r=e.data;!r||!Array.isArray(r)||r.forEach(function(e){t.$7(e,"incoming"),t.$8(n,e)})},this.openRequests.forEach(function(e){var n=e.request;o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"])),n.name),t.sendStream.addEvent({type:"request",content:n})})},a.getBridge=function(){return this.$1},a.$4=function(t){var e=this;return function(n,r,o,a,i,l){e.$9(t,n,r,o,a,i,l)}},a.$9=function(t,n,o,a,i,l,s){var e,u,d=this.$5(),m=babelHelpers.extends({fromClientId:(e=this.clientId)!=null?e:void 0},s),p={requestId:d,expectsResponse:!!a,namespace:t,name:n,arg:o,silentLog:i,opts:m};if(((u=this.config)==null?void 0:u.onSendAcross)!=null)try{this.config.onSendAcross(t,n,p.expectsResponse,o)}catch(e){var _=r("getErrorSafe")(e);r("FBLogger")("wmi").catching(_).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onSendAcross"])))}this.openRequests.set(d,{request:p,resolver:a,eventCallbacks:l}),this.sendStream.addEvent({type:"request",content:p})},a.$10=function(t,n){t===this.port&&this.sendStream.addEvent({type:"result",content:n})},a.$3=function(t){var e=this,n=this.port;if(!n){o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"])),t.length);return}n.postMessage(t);var r=t.map(function(e){var t,n,r,o=(t=(n=e.content.arg)==null?void 0:n.type)!=null?t:"";return""+((r=e.content.name)!=null?r:"")+(o?":"+o:"")}).filter(Boolean);t.forEach(function(n){var o;e.$7(n,"outgoing");var a=e.openRequests.get(n.content.requestId);(a==null||(o=a.eventCallbacks)==null?void 0:o.onSend)!=null&&a.eventCallbacks.onSend({queueSize:t.length,queueMsgs:r})})},a.$7=function(t,n){this.listeners.forEach(function(e){return e(t,n)})},a.$8=function(t,a){var e=this;if(a.type==="request"){var i=a.content,l=i.namespace,s=i.name,u=i.requestId,c=i.arg,d=i.expectsResponse,y=i.silentLog,b=i.opts;if(y||o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""])),u,s),(b==null?void 0:b.toClientId)!=null&&b.toClientId!==this.clientId){y||o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," not intended for client ",""])),u,this.clientId);return}var v=this.$1,S={type:"result",content:{requestId:u,type:"handled",result:{payload:v.getAckPayoad(),timestamp:Date.now()},silentLog:y,opts:b}};if(this.$7(S,"outgoing"),t.postMessage([S]),d){var R=v.sendAndReceive(l,s,c,y,void 0,b).then(function(n){e.$10(t,{requestId:u,type:"success",result:n,silentLog:y,opts:b})},function(n){e.$10(t,{requestId:u,type:"error",result:String(n),silentLog:y,opts:b})});o("WAPromiseManagement").preventGarbageCollection(R)}else v.fireAndForget(l,s,c,y,void 0,b)}else{a.type;var L=a.content,E=L.requestId,k=L.type,I=L.result,T=L.silentLog;T||o("WALogger").DEV(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""])),E,k);var D=this.$6(E);if(D!==this.clientId||this.processedRequests.has(E))return;var x=this.openRequests.get(E);if(!x){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""])),E);return}switch(k){case"success":case"error":{this.openRequests.delete(E),this.processedRequests.add(E);var $=x.resolver;$?$(k==="success"?I:(C||(C=n("Promise"))).reject(r("err")(I!=null?I:""))):o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast: ",""])),I);break}case"handled":try{var P;(P=x.eventCallbacks)==null||P.onAck==null||P.onAck(I)}catch(e){var N=r("getErrorSafe")(e);o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onAck: ",""])),N.message)}x.resolver||(this.openRequests.delete(E),this.processedRequests.add(E));break}}},t})();function v(e,t,n,r,o){return new b(e,n,t,r,o)}function S(e){var t;(t=e.port)==null||t.close(),e.port=null,e.sendStream.cancel();var n=e.openRequests;e.openRequests=new Map;var r=e.getBridge();n.forEach(function(e){var t=e.request,n=e.resolver,a=t.namespace,i=t.name,l=t.arg,s=t.silentLog;o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""])),t.requestId),n?n(r.sendAndReceive(a,i,l,s)):r.fireAndForget(a,i,l,s)})}l.CrossWorkerPortal=b,l.attachPortal=v,l.killPortalAndSendPendingToBridge=S}),98);
__d("MAWCrossWorkerPortal",["FBLogger","MAWBridgeODSLogger","WACrossWorkerPortal","justknobx","pageID"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){if(e!=null)return e;var l=babelHelpers.extends({},i);return r("justknobx")._("5256")&&(l=babelHelpers.extends({},i,{onSendAcross:o("MAWBridgeODSLogger").logCrossWorkerPortalODS})),e=o("WACrossWorkerPortal").attachPortal(t,n,a,r("pageID"),l),e}function u(){if(e==null){r("FBLogger")("messenger_web").warn("Trying to kill portal before its setup");return}o("WACrossWorkerPortal").killPortalAndSendPendingToBridge(e)}l.getOrCreateCrossWorkerPortal=s,l.killPortalWhenWorkerTerminating=u}),98);
__d("MAWMiActGetMappingWithMawTypes",["I64","MAWJids","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=(e||(e=o("I64"))).to_string(t.jid),a=n?o("WAJids").toGroupJid(r):o("MAWJids").toUserJid(r);return{clientThreadPk:t.clientThreadPk,jid:a,serverThreadKey:t.serverThreadKey}}l.default=s}),98);
__d("MAWMiActThreadLifecycleState__DO_NOT_USE",[],(function(t,n,r,o,a,i){"use strict";var e={AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:"AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW",AUTHORITATIVE_THREAD_ONLY:"AUTHORITATIVE_THREAD_ONLY",CLIENT_PARTIAL_MI_THREAD:"CLIENT_PARTIAL_MI_THREAD",CLIENT_PARTIAL_MI_THREAD_WITH_ACT:"CLIENT_PARTIAL_MI_THREAD_WITH_ACT",JID_MISSING_MAPPING_ROW:"JID_MISSING_MAPPING_ROW",JID_MISSING_MI_THREAD:"JID_MISSING_MI_THREAD",MI_AND_ACT_THREAD_COMPLETE:"MI_AND_ACT_THREAD_COMPLETE",OPTIMISTIC_THREAD_NO_ACT:"OPTIMISTIC_THREAD_NO_ACT",OPTIMISTIC_THREAD_WITH_ACT:"OPTIMISTIC_THREAD_WITH_ACT",SERVER_PARTIAL_MI_THREAD:"SERVER_PARTIAL_MI_THREAD",THREAD_KEY_ONLY:"THREAD_KEY_ONLY"};i.MiActThreadStatesEnum=e}),66);
__d("MWLogSendToSentFailedError",["FBLogger","QuickPerformanceLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,o,a,i){var l,s,u,c,d,m,p,_,f=t.qplEventType,g=t.qplInstanceKey,h=(e||(e=r("QuickPerformanceLogger"))).getMarker(f,g),y=h==null||(l=h.annotations)==null||(l=l.bool)==null?void 0:l.is_secure;r("FBLogger")("messenger_web_messaging","send_to_sent_failed").blameToPreviousFrame().blameToPreviousFrame().warn("send_to_sent failed with reason: %s. Caught error message: %s. Additional description: %s. Secure? %s. Error Code: %s. Application Error: %s.",n,(s=o==null?void 0:o.message)!=null?s:"",(u=(c=h==null||(d=h.annotations)==null||(d=d.string)==null?void 0:d.error_description)!=null?c:h==null||(m=h.annotations)==null||(m=m.string)==null?void 0:m.errorType)!=null?u:"",y===!0?"secure":y===!1?"open":"unknown",(p=a==null?void 0:a.toString())!=null?p:"",(_=i==null?void 0:i.toString())!=null?_:"")}l.default=s}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share",NoteReply:"note_reply"});function l(t){var n=t.hasFile,r=n===void 0?!1:n,o=t.hasGif,a=o===void 0?!1:o,i=t.hasHotEmoji,l=i===void 0?!1:i,s=t.hasImage,u=s===void 0?!1:s,c=t.hasLinks,d=c===void 0?!1:c,m=t.hasNoteReply,p=m===void 0?!1:m,_=t.hasShare,f=_===void 0?!1:_,g=t.hasSticker,h=g===void 0?!1:g,y=t.hasVideo,C=y===void 0?!1:y,b=t.hasVoiceClip,v=b===void 0?!1:b,S=e.None;return u?S=e.Image:C?S=e.Video:l?S=e.HotEmoji:h?S=e.Sticker:a?S=e.Gif:v?S=e.Audio:r?S=e.File:f?S=e.Share:d?S=e.Link:p&&(S=e.NoteReply),S}i.AttachmentType=e,i.getAttachmentType=l}),66);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,i,l,s=o("MWChatInteraction").get((e||(e=o("I64"))).to_string(t)),u=s!=null?r("InteractionTracingMetrics").get(s):null,c=(n=u==null||(a=u.annotations.string)==null?void 0:a.inboxEntrypoint)!=null?n:u==null||(i=u.annotations.string)==null?void 0:i.entrypoint;if(c!=null&&c!=="unknown")return c;var d=o("MWChatInteraction").get("inbox_init");if(d!=null&&(e||(e=o("I64"))).equal(t,(e||(e=o("I64"))).of_string(d)))return"initInbox";var m=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN),p=m!=null?(l=r("InteractionTracingMetrics").get(m))==null||(l=l.annotations.string)==null?void 0:l.thread_id:null;return p===(e||(e=o("I64"))).to_string(t)?"auto_open":"unknown"}l.default=s}),98);
__d("MWMsgActionLogUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting",Edit:"edit",Bump:"bump",Retry:"retry"});function l(t){var n=t.hasEphemeralSetting,r=n===void 0?!1:n,o=t.hasGroupInvite,a=o===void 0?!1:o,i=t.hasReaction,l=i===void 0?!1:i,s=t.hasReply,u=s===void 0?!1:s,c=t.hasSenderKeyDistribution,d=c===void 0?!1:c,m=t.hasStoryReply,p=m===void 0?!1:m,_=t.isBump,f=_===void 0?!1:_,g=t.isEdit,h=g===void 0?!1:g,y=t.isForward,C=y===void 0?!1:y,b=t.isRetry,v=b===void 0?!1:b,S=t.isUnsend,R=S===void 0?!1:S,L=e.Send;return u?L=e.Reply:p?L=e.StoryReply:R?L=e.Unsend:l?L=e.Reaction:a?L=e.GroupInvite:r?L=e.EphemeralSetting:d?L=e.SenderKeyDistribution:h?L=e.Edit:C?L=e.Forward:f?L=e.Bump:v&&(L=e.Retry),L}i.ActionType=e,i.getActionType=l}),66);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("isStringNullOrEmpty")(e)?!1:r("URLMatcher").match(e)!=null}l.getHasLinks=e}),98);
__d("MWVersion",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("2");l.v2=s}),98);
__d("MWSharedS2SBaseAnnotations",["$InternalEnum","I64","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MWHasLinksUtil","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWPreloadableQueries","MWVersion","MultipleTabsLogger","ReQL","gkx","isStringNullOrEmpty","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e=["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isBump","isEdit","isForward","isRetry","isUnsend"],s=["db","threadKey"],u,c=n("$InternalEnum")({Text:"text",NonText:"non-text"});async function d(t,n,a,i,l){var s=t.hasAttachment,d=s===void 0?!1:s,p=t.hasEphemeralSetting,_=t.hasGroupInvite,f=t.hasReaction,g=t.hasReply,h=t.hasSenderKeyDistribution,y=t.hasStoryReply,C=t.hasText,b=C===void 0?!1:C,v=t.isBump,S=t.isEdit,R=t.isForward,L=t.isRetry,E=t.isUnsend,k=babelHelpers.objectWithoutPropertiesLoose(t,e);l===void 0&&(l=!1);var I=o("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:p,hasGroupInvite:_,hasReaction:f,hasReply:g,hasSenderKeyDistribution:h,hasStoryReply:y,isBump:v,isEdit:S,isForward:R,isRetry:L,isUnsend:E}),T=o("MWMsgMediaTypeLogUtils").getAttachmentType(k),D=b&&(!T||T===o("MWMsgMediaTypeLogUtils").AttachmentType.None)?c.Text:c.NonText,x=i!=null?parseInt(i,10):void 0;return isNaN(x)&&(x=void 0),{bool:{has_attachment:d,has_sticker:k.hasSticker,has_text:b,is_attachments_grouped:k.isAttachmentsGrouped,is_pdb:!!r("gkx")("8483"),is_pwa:l,is_tlc_public_user:r("gkx")("24028"),use_maw_shared_worker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},int:{number_of_attachments:k.numberOfAttachments,number_of_grouped_attachments:k.numberOfGroupedAttachments,offline_threading_id:x},string:{action_type:I,attachment_type:T,entrypoint:m(n),message_type:D,multipleTabs:await o("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(u||(u=o("I64"))).to_string(o("MWVersion").v2),offline_threading_id:i,root_component:a}}}function m(e){var t;return(t=Object.keys(r("LSMessagingThreadAttributionType")).find(function(t){return r("LSMessagingThreadAttributionType")[t]===e}))!=null?t:"UNKNOWN"}async function p(e){var t=e.db,n=e.threadKey,r=babelHelpers.objectWithoutPropertiesLoose(e,s),a=t!=null&&n!=null?await o("ReQL").toArrayAsync(o("MWPreloadableQueries").getMediaStagingQuery(t,n)):[];return{mediaStagings:a,messageTypeParams:_(babelHelpers.extends({},r,{mediaStagings:a}))}}function _(e){var t=e.externalAttachmentUrl,n=e.hotEmojiSize,a=e.isBump,i=e.isEdit,l=e.isEphemeralSetting,s=e.isForward,u=e.isGroupInvite,c=e.isReaction,d=e.isRetry,m=e.isSenderKeyDistribution,p=e.isUnsend,_=e.mediaGroupInfo,f=e.mediaStagings,g=e.messageText,h=e.reply,y=e.sentFromShareSheet,C=e.sticker,b=e.threadType,v=e.voiceClip,S=!r("isStringNullOrEmpty")(g),R=o("MWHasLinksUtil").getHasLinks(g),L=!1,E=v!=null;(E||t!=null)&&(L=!0);var k=!1,I=!1,T=!1,D=0,x=0,$;if(f!=null&&f.length>0){L=!0;for(var P of f){var N=P.mimeType;N.indexOf("image")!==-1&&(k=!0),N.indexOf("video")!==-1&&(I=!0),N.indexOf("application")!==-1&&(T=!0)}if(k&&b!=null){var M=o("LSMessagingThreadTypeUtil").isArmadilloSecure(b);$=!M}D=f.length}_!=null&&($=!0,x=_.messagesAndAttachments.length);var w=n!=null,A=h!=null,F=h!=null,O=C!=null&&!w,B=!O&&t!=null,W=y===!0,q=c===!0,U=u===!0,V=l===!0,H=m===!0;return{hasAttachment:L,hasEphemeralSetting:V,hasFile:T,hasGif:B,hasGroupInvite:U,hasHotEmoji:w,hasImage:k,hasLinks:R,hasReaction:q,hasReply:A,hasSenderKeyDistribution:H,hasShare:W,hasSticker:O,hasStoryReply:F,hasText:S,hasVideo:I,hasVoiceClip:E,isAttachmentsGrouped:$,isBump:a!=null?a:!1,isEdit:i!=null?i:!1,isForward:s!=null?s:!1,isRetry:d!=null?d:!1,isUnsend:p!=null?p:!1,numberOfAttachments:D,numberOfGroupedAttachments:x}}l.MsgType=c,l.getSendToSentBaseAnnotations=d,l.getEntrypointAnnotation=m,l.queryMediaStagingAndGetMessageTypeParams=p,l.getMessageTypeParams=_}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWSharedS2SBaseAnnotations","MultipleTabsLogger","cr:6985","gkx","isArmadillo","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({Text:"text",NonText:"non-text"});async function c(t){var a=t.attachmentTypeParams,i=t.composerEntrypoint,l=t.isPwa,s=t.messageOfflineThreadingId,u=t.source,c=t.thread,d=n("cr:6985")!=null?await n("cr:6985").isCutoverThreadKey(c.threadKey):!1,m=await o("MWSharedS2SBaseAnnotations").getSendToSentBaseAnnotations(a,u,i,s,l);return{bool:babelHelpers.extends({},m.bool,o("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(c),{is_community_event:c.eventStartTimestampMs!=null,is_cutover:r("isArmadillo")()&&d,is_message_request:o("LSMessagingThreadTypeUtil").isMessageRequest(c),is_secure:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType)}),int:babelHelpers.extends({},m.int),string:babelHelpers.extends({},m.string,{consistent_thread_fbid:c.consistentThreadFbid!=null?(e||(e=o("I64"))).to_string(c.consistentThreadFbid):null,original_entrypoint:r("MWGetOriginalEntrypoint")(c.threadKey),thread_id:(e||(e=o("I64"))).to_string(c.threadKey),thread_subtype:c.threadSubtype!=null?(e||(e=o("I64"))).to_string(c.threadSubtype):null,thread_type:e.to_string(c.threadType)})}}function d(e,t,n,a){m(e,t,r("MWGetOriginalEntrypoint")(n.threadKey),n.threadKey,n.consistentThreadFbid,n.threadType,n.threadSubtype,a),o("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(n,e)}function m(t,a,i,l,s,c,d,m){var p=a.hasEphemeralSetting,_=p===void 0?!1:p,f=a.hasFile,g=f===void 0?!1:f,h=a.hasGif,y=h===void 0?!1:h,C=a.hasGroupInvite,b=C===void 0?!1:C,v=a.hasHotEmoji,S=v===void 0?!1:v,R=a.hasImage,L=R===void 0?!1:R,E=a.hasLinks,k=E===void 0?!1:E,I=a.hasReaction,T=I===void 0?!1:I,D=a.hasReply,x=D===void 0?!1:D,$=a.hasSenderKeyDistribution,P=$===void 0?!1:$,N=a.hasShare,M=N===void 0?!1:N,w=a.hasSticker,A=w===void 0?!1:w,F=a.hasStoryReply,O=F===void 0?!1:F,B=a.hasText,W=B===void 0?!1:B,q=a.hasVideo,U=q===void 0?!1:q,V=a.hasVoiceClip,H=V===void 0?!1:V,G=a.isAttachmentsGrouped,z=a.isBump,j=z===void 0?!1:z,K=a.isEdit,Q=K===void 0?!1:K,X=a.isForward,Y=X===void 0?!1:X,J=a.isRetry,Z=J===void 0?!1:J,ee=a.isUnsend,te=ee===void 0?!1:ee,ne=a.numberOfAttachments,re=ne===void 0?0:ne,oe=a.numberOfGroupedAttachments,ae=oe===void 0?0:oe,ie=o("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:_,hasGroupInvite:b,hasReaction:T,hasReply:x,hasSenderKeyDistribution:P,hasStoryReply:O,isBump:j,isEdit:Q,isForward:Y,isRetry:Z,isUnsend:te}),le=o("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:g,hasGif:y,hasHotEmoji:S,hasImage:L,hasLinks:k,hasShare:M,hasSticker:A,hasVideo:U,hasVoiceClip:H,numberOfAttachments:re,numberOfGroupedAttachments:ae}),se=W&&(!le||le===o("MWMsgMediaTypeLogUtils").AttachmentType.None)?u.Text:u.NonText;o("MultipleTabsLogger").addAnnotationWithInteractionUuid(t.getTraceId()),t.addAnnotation("attachment_type",le),t.addAnnotation("action_type",ie),t.addAnnotation("message_type",se),t.addAnnotation("original_entrypoint",i),m!=null&&t.addAnnotation("root_component",m),t.addAnnotationInt("number_of_attachments",re),G!=null&&t.addAnnotationBoolean("is_attachments_grouped",G),t.addAnnotation("thread_id",(e||(e=o("I64"))).to_string(l)),s!=null&&t.addAnnotation("consistent_thread_fbid",(e||(e=o("I64"))).to_string(s)),t.addAnnotation("thread_type",e.to_string(c)),d!=null&&t.addAnnotation("thread_subtype",(e||(e=o("I64"))).to_string(d)),n("cr:6985")!=null&&r("promiseDone")(n("cr:6985").isCutoverThreadKey(l),function(e){t.addAnnotationBoolean("is_cutover",e)}),t.addAnnotationBoolean("is_secure",o("LSMessagingThreadTypeUtil").isArmadilloSecure(c)),t.addAnnotationBoolean("is_eb_enabled",r("MAWEBSwitch").isEnabled()),t.addAnnotationBoolean("use_maw_shared_worker",o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()),t.addAnnotationBoolean("is_pdb",!!r("gkx")("8483"))}function p(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2))?"media":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4))?"audio":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4096))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(134217728))?"sticker":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16384))?"gif":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(64))?"file":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1))?"text":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1024))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(536870912))?"XMA":"unknown"}l.MsgType=u,l.getSendToSentAnnotations=c,l.addSendMessageMetadataForInteractionTrace=d,l.addSendMessageMetadataForInteractionTraceWithThreadMetadata=m,l.getMessageTypeFromDisplayedContentType=p}),98);
__d("sendToSentQPLLogger",["LSDatabaseSingleton","LSIntEnum","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MWLogSendToSentFailedError","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","Network","QPLEvent","QPLUserFlow","QuickPerformanceLogger","Random","ReQL","WAExceededStorageQuota","WAGetSafeQPLError","WAGetStorageQplAnnotations","gkx","interaction-tracing","justknobx","mergeDeep","pageID","performance","promiseDone","qpl","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=r("requireDeferred")("MAWWebWorkerSingleton").__setRef("sendToSentQPLLogger"),p=r("qpl")._(25313175,"1551"),_=new Map;function f(e,t){r("QPLUserFlow").addAnnotations(p,t,{instanceKey:e})}function g(e,t){r("QPLUserFlow").endCancel(p,{annotations:t!=null?t:{},instanceKey:e}),S(e)}function h(e,t,n,a){var i=a!=null?a.type:t;r("MWLogSendToSentFailedError")({qplEventType:p,qplInstanceKey:e},i,n,a==null?void 0:a.errorCode,a==null?void 0:a.applicationErrorCode),r("QPLUserFlow").endFailure(p,i,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),useSentBytesCache:r("gkx")("33008"),wasBackendSetupReset:o("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:o("WAGetSafeQPLError").getSafeQPLErrorMessage(n)},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},error:n,instanceKey:e}),S(e)}function y(e,t,n,o){e!=null&&r("QPLUserFlow").addPoint(p,t,{data:o,debugInfo:n,instanceKey:e})}function C(e){(c||(c=r("QuickPerformanceLogger"))).markerEnd(p,160,e),S(e)}function b(e,t){y(e,t?"network_connection_online":"network_connection_offline"),t||C(e)}function v(e){var t=r("interaction-tracing").NetworkStatusTracker.onChange(function(t){var n=t.online;b(e,n)});if(_.set(e,t),b(e,r("interaction-tracing").NetworkStatusTracker.isOnline()),r("Network").containsNetworkInformation()){var n=r("Network").getRTT();n!=null&&f(e,{int:{network_rtt:n}});var o=r("Network").getEffectiveType();o!=null&&f(e,{string:{network_effective_type:String(o)}});var a=r("Network").getBandwidth();a!=null&&f(e,{int:{network_bandwidth:a}});var i=r("Network").getType();i!=null&&f(e,{string:{network_connectivity_type:String(i)}})}}function S(e){var t;(t=_.get(e))==null||t.remove(),_.delete(e)}function R(e){window.navigator&&window.navigator.hardwareConcurrency&&f(e,{int:{hardware_concurrency:window.navigator.hardwareConcurrency}})}function L(t,n){t===void 0&&(t=!0);var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);return r("QPLUserFlow").start(E(n),{annotations:{bool:{backendSetupReady:o("MAWWaitForBackendSetup").isBackendSetupSuccessful(),wasBackendSetupReset:o("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{timeMsSinceSessionStart:(d||(d=r("performance"))).now()},string:{hostname:window.location.hostname,pageID:r("pageID"),workerHeartbeatsOnStart:o("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a}),r("promiseDone")(o("MAWMIC").getState().then(function(e){f(a,{string:{mic_state:e}})})),t&&r("promiseDone")(o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){f(a,e)})),r("promiseDone")((e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.tables.connectivity_status)).then(function(e){e&&f(a,{int:{connection_state_ls_transport:(s||(s=o("LSIntEnum"))).toNumber(e.internetConnectionState)}})})})),r("promiseDone")(m.load().then(function(e){return e.getWorkerHealthStatus().then(function(e){f(a,{string:{workerHealthStatusOnStart:e.tag}})})})),v(a),R(a),a}function E(e){if((u||(u=o("QPLEvent"))).getSamplingMethod(p)!==1||!k(e))return p;var t=(u||(u=o("QPLEvent"))).getSampleRate(p),n=r("justknobx")._("3946"),a=Math.max(1,Math.min(n,t));return{i:u.getMarkerId(p),m:u.getSamplingMethod(p),r:a}}function k(e){return e===o("MWMsgMediaTypeLogUtils").AttachmentType.Application||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Audio||e===o("MWMsgMediaTypeLogUtils").AttachmentType.File||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Gif||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Image||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Link||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Sticker||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Video||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Share}function I(e){r("QPLUserFlow").endSuccess(p,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota()}},instanceKey:e}),S(e)}function T(e,t,n,a,i,l){i===void 0&&(i=!0);var s=L(i);if(e==null)return s;var u=o("MWSharedS2SBaseAnnotations").getMessageTypeParams(babelHelpers.extends({},t,{threadType:e.threadType}));return r("promiseDone")(o("MWSharedMsgLogUtils").getSendToSentAnnotations({attachmentTypeParams:u,messageOfflineThreadingId:l,source:n,thread:e}),function(e){var t=r("mergeDeep")(e,a);f(s,t)}),s}var D=async function(t,n,o){var e=t+"_start",a=t+"_end";r("QPLUserFlow").addPoint(p,e,{instanceKey:n});var i=await o();return r("QPLUserFlow").addPoint(p,a,{instanceKey:n}),i};l.addSendToSentAnnotations=f,l.markSendToSentCancel=g,l.markSendToSentFail=h,l.markSendToSentPoint=y,l.markSendToSentStart=L,l.markSendToSentSuccess=I,l.markSendToSentStartWithAnnotation=T,l.measureSendToSentPerformance=D}),98);
__d("MAWMiActGetThreadLifecycleState__DO_NOT_USE",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActGetMappingWithMawTypes","MAWMiActMappingTableAPI","MAWMiActThreadLifecycleState__DO_NOT_USE","MAWThreadLoadingState","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){var i=(e||(e=o("LSIntEnum"))).toNumber(t.authorityLevel);if(i===r("LSAuthorityLevel").OPTIMISTIC)return n!=null?babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT}):{serverThreadKey:t.threadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT};if(i===r("LSAuthorityLevel").CLIENT_PARTIAL)return n!=null?babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT}):{serverThreadKey:t.threadKey,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD};if(i===r("LSAuthorityLevel").SERVER_PARTIAL)return{serverThreadKey:t.threadKey,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD};if(i===r("LSAuthorityLevel").AUTHORITATIVE){if(n==null)return{serverThreadKey:t.threadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW};var l=o("MAWThreadLoadingState").getActState(n)===o("MAWThreadLoadingState").ActState.IN_PROGRESS;if(l){var u=r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType));return{jid:u.jid,jidInt64:n.jid,serverThreadKey:u.serverThreadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY}}else return babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE})}throw r("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unknown thread lifecycle state for threadKey: %s, authorityLevel: %s, thread action: %s",(s||(s=o("I64"))).to_string(t.threadKey),i,a)}async function c(e,t,n){var r=await o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,t);if(r==null)return{jidInt64:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW};var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(r.serverThreadKey));return a==null?{jidInt64:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MI_THREAD}:u(a,r,n)}async function d(e,t,n){var r,a=await Promise.all([(r=o("ReQL")).firstAsync(r.fromTableAscending(e.threads).getKeyRange(t)),r.firstAsync(r.fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))]),i=a[0],l=a[1];return i==null?{serverThreadKey:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.THREAD_KEY_ONLY}:u(i,l,n)}async function m(e,t,n,r){var a=await c(e,t,r);return a.type===o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW&&n!=null?d(e,(s||(s=o("I64"))).of_string(n),"MAWBridgeOccamadilloVerifyThreadExistsHandler"):a}l.getThreadLifecycleStateByJid=c,l.getThreadLifecycleStateByThreadKey=d,l.getThreadLifecycleStateByJidOrThreadKey=m}),98);
__d("MAWMiActOnActThreadReadyInstrumentation",["QPLUserFlow","Random","WAHashStringToNumber","isOfflineThreadingId","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function s(e,t,n,o){r("QPLUserFlow").start(r("qpl")._(1056846543,"1530"),{annotations:{bool:{is_otid:r("isOfflineThreadingId")(n)},string:{apiName:o,description:t}},instanceKey:e})}function u(e,t){r("QPLUserFlow").addPoint(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function c(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function d(e){r("QPLUserFlow").endSuccess(r("qpl")._(1056846543,"1530"),{instanceKey:e})}function m(e,t){r("QPLUserFlow").endFailure(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}l.getOnActThreadReadyInstanceKey=e,l.startQPL=s,l.addPointQPL=u,l.addAnnotationsQPL=c,l.endSuccessQPL=d,l.endFailureQPL=m}),98);
__d("MAWVerifyThreadExistsUtils",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","isOfflineThreadingId"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=6e4,d=1e4;function m(e){if(u.size>d){r("FBLogger")("messenger_web").mustfix("MAWVerifyThreadExistsUtils: requestedThreadKeys size exceeded limit");return}u.has(e)&&(window.clearTimeout(u.get(e)),u.delete(e)),u.set(e,window.setTimeout(function(){u.delete(e)},c))}function p(e){return u.has(e)}function _(t,n,a){var i=n.threadKey;return i!=null&&m((e||(e=o("I64"))).to_string(i)),i!=null&&r("isOfflineThreadingId")(i)&&(e||(e=o("I64"))).equal(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&r("FBLogger")("messenger_web").warn("MAWVerifyThreadExistsUtils: runVerifyThreadExistsSproc called with offline thread key - callsite: %s",a),r("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(t,n)}l.isThreadRequested=p,l.runVerifyThreadExistsSproc=_}),98);
__d("MAWMiActOnActThreadReadyQueue",["ExecutionEnvironment","I64","LSPlatformLsInitLog","MAWInit","MAWMIC","MAWMiActOnActThreadReadyInstrumentation","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils","MWChatInteraction","MWFBLogger","clearTimeout","getErrorSafe","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]),p=new Map,_=3e4;function f(t,n,a,i,l,s){var u;if((d||(d=r("ExecutionEnvironment"))).isInBrowser){o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(s,"enqueue_by_thread_key_start");var f=(c||(c=o("I64"))).to_string(t),g=(u=p.get(f))!=null?u:[],h=r("setTimeout")(function(){var n=o("MWChatInteraction").getInteractionTraceForThreadKey((c||(c=o("I64"))).to_string(t));n==null||n.addMarkerPoint("timeout_when_waiting_for_act_thread","AppTiming"),n==null||n.addAnnotation("callsite_waiting_for_act_thread",i),n==null||n.addAnnotation("initial_thread_state",l),n==null||n.addAnnotationBoolean("is_mi_thread_requested",o("MAWVerifyThreadExistsUtils").isThreadRequested(f)),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(s,{bool:{during_mic:o("MAWMIC").duringMIC(),is_thread_requested:o("MAWVerifyThreadExistsUtils").isThreadRequested(f),ls_sync_has_ended:o("LSPlatformLsInitLog").LsSync.hasEnded(),maw_init_completed:o("MAWInit").MAWInitState.isCompleted()}}),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(s,"enqueue_by_thread_key_timeout"),m.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Took longer than "," ms to execute: "," in threadState: "," for threadKey: ",", onActThreadReady"])),_,i,l,f),a(l)},_);g.push({callback:n,description:i,telemetryInstanceKey:s,threadState:l,timeoutId:h}),p.set(f,g)}}function g(e,t,n,r){var a,i,l,s;if(!(e==null&&t==null)){var u=e!=null?t!=null?"both":"clientThreadKey":"authoritativeThreadKey",c=e==null?0:(a=(i=p.get(e))==null?void 0:i.length)!=null?a:0,d=t==null?0:(l=(s=p.get(t))==null?void 0:s.length)!=null?l:0;o("MAWThreadMappingQPL").addAnnotations({int:{authorativeThreadKeyCallbacksNum:d,clientThreadKeyCallbacksNum:c},string:{flushBasedOnKey:u,flushReason:r}},n),o("MAWThreadMappingQPL").addPoint("flush_awaiting_callbacks",n)}}async function h(e,t,n,a){var i=(c||(c=o("I64"))).to_string(e),l=p.get(i);if(!(l==null||l.length===0)){for(;l.length!==0;){var d=l.shift();if(d!=null){var _=d.callback,f=d.description,g=d.telemetryInstanceKey,h=d.threadState,y=d.timeoutId;o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(g,"enqueue_by_thread_key_end"),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(g,{string:{caller_identifier:n,processed_based_on_key:a}});try{m.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing queued "," for threadKey: ",""])),f,i),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(g),await _(e,t),r("clearTimeout")(y)}catch(e){r("clearTimeout")(y),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(g,"process_queue_on_act_thread_ready_failure"),m.catching(r("getErrorSafe")(e)).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error executing callback on ACT thread ready: ",", original threadState: ",", threadKey: ",""])),f,h,i)}}}p.delete(i)}}l.enqueueByThreadKey=f,l.logOnFlushQueue=g,l.processQueueOnActThreadReady=h}),98);
__d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE",["MAWThreadLoadingState","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]);async function c(t,n,r,a){var i=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(t,n);if(i==null)throw u.mustfixThrow("Missing thread key or MI mapping for jid: %s, thread action: %s, MI mapping state %s",r,n);return u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Executing ",", jid: ",""])),r,n),a(t,i)}async function d(e,t,n,r){var a=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t);if(a!=null)return u.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing ",", jid: ",""])),n,t),r(e,a)}l.onMiThreadExistsForJid__DO_NOT_USE=c,l.onMiThreadExistsForJidNoThrow__DO_NOT_USE=d}),98);
__d("hasDefaultThreadOneToOneCapabilityDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("hasDefaultThreadOneToOneCapability").__setRef("hasDefaultThreadOneToOneCapabilityDeferred");l.default=e}),98);
__d("useCometMessengerhasDefaultThreadOneToOneCapability",["FBLogger","hasDefaultThreadOneToOneCapabilityDeferred","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(7),a=c(!1),i=a[0],l=a[1],s;n[0]!==e||n[1]!==t?(s=function(){r("hasDefaultThreadOneToOneCapabilityDeferred").load().then(function(n){t==null?l(!1):n(t,e).then(function(e){l(e)}).catch(p)}).catch(m)},n[0]=e,n[1]=t,n[2]=s):s=n[2];var d;return n[3]!==e||n[4]!==i||n[5]!==t?(d=[e,i,t],n[3]=e,n[4]=i,n[5]=t,n[6]=d):d=n[6],u(s,d),i}function m(e){r("FBLogger")("messenger_web").warn("Error loading hasDefaultThreadOneToOneCapability. %s",e)}function p(){}l.default=d}),98);
__d("MAWThreadCutover",["I64","LSAuthorityLevel","LSContactBitOffset","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","WAJids","react-compiler-runtime","useCometMessengerhasDefaultThreadOneToOneCapability","useMAWCanThreadBeCutoverOnDemand","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=(u||(u=r("useReStore")))(),a=R(e),i=r("useCometMessengerhasDefaultThreadOneToOneCapability")(n,e),l=t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t);return l?!0:a||i}async function d(e){return await $(e)!=null}function m(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a,l;return t[0]!==n||t[1]!==e?(a=function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]),o("ReQLSuspense").useFirst(a,l,i.id+":62")!=null}function p(e){var t,n=(u||(u=r("useReStore")))(),a=(t=o("ReQLSuspense").useFirst(function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},[n,e],i.id+":74"))==null?void 0:t.showOpenMessageHistory;return a===!1}function _(e){var t=S(e);return p(t)}function f(e,t){return o("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(t)}function g(t,n){return o("ReQL").fromTableAscending(t.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,n)})}function h(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():f(n,e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":112"),c,d;return t[4]!==n||t[5]!==s?(c=function(){return s==null?o("ReQL").empty():g(n,s.jid)},d=[n,s],t[4]=n,t[5]=s,t[6]=c,t[7]=d):(c=t[6],d=t[7]),o("ReQLSuspense").useFirst(c,d,i.id+":120")}function y(e,t){return o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t.openThreadId)}function C(t){var n=b(t);if(!(n==null||(e||(e=o("I64"))).lt(n.authorityLevel,(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").SERVER_PARTIAL))))return n}function b(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a=h(e),l,s;return t[0]!==a||t[1]!==n?(l=function(){return a==null?o("ReQL").empty():y(n,a)},s=[n,a],t[0]=a,t[1]=n,t[2]=l,t[3]=s):(l=t[2],s=t[3]),o("ReQLSuspense").useFirst(l,s,i.id+":162")}function v(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():f(n,e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":174"),c=s==null?void 0:s.jid,d,m;t[4]!==n.tables.threads||t[5]!==c?(d=function(){return c!=null?o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(c):o("ReQL").empty()},m=[n.tables.threads,c],t[4]=n.tables.threads,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":183"),_=r("useMAWCanThreadBeCutoverOnDemand")(c);return _?p:void 0}function S(e){var t=h(e);if(t!=null)return t.openThreadId}function R(e){return h(e)!=null}function L(t,n){var r=o("WAJids").threadIdForChatJid(n);return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange((e||(e=o("I64"))).of_string(r))).then(function(e){return e!=null})}function E(){var e=o("react-compiler-runtime").c(3),t=(u||(u=r("useReStore")))(),n=o("MWPActor.react").useActor(),a;if(e[0]!==n||e[1]!==t.tables.contacts){var l,s=o("ReQLSuspense").first(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(n),i.id+":223");a=s!=null&&((l=o("LSContactBitOffset").has(75,s))!=null?l:!1),e[0]=n,e[1]=t.tables.contacts,e[2]=a}else a=e[2];return a}function k(){var e=o("react-compiler-runtime").c(4),t=(u||(u=r("useReStore")))(),n;e[0]!==t.tables.experiences_shared_state?(n=function(){return o("ReQL").fromTableAscending(t.tables.experiences_shared_state).getKeyRange(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},e[0]=t.tables.experiences_shared_state,e[1]=n):n=e[1];var a;e[2]!==t?(a=[t],e[2]=t,e[3]=a):a=e[3];var l=o("ReQLSuspense").useFirst(n,a,i.id+":238"),s=o("MWEncryptedBackupsSharedState").getEntryValue({db:t,sharedStateRow:l,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});return s!=null}function I(t){var n=o("react-compiler-runtime").c(7),a=(u||(u=r("useReStore")))(),l;n[0]!==t?(l=t!=null?(e||(e=o("I64"))).of_string(t):void 0,n[0]=t,n[1]=l):l=n[1];var s=l,c=m(s),d,p;return n[2]!==a||n[3]!==c||n[4]!==s?(d=function(){return c&&s!=null?o("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).filter(function(t){return(e||(e=o("I64"))).equal(t.jid,s)}).map(T):o("ReQL").empty()},p=[a,s,c],n[2]=a,n[3]=c,n[4]=s,n[5]=d,n[6]=p):(d=n[5],p=n[6]),o("ReQLSuspense").useFirst(d,p,i.id+":259")}function T(t){return(e||(e=o("I64"))).to_string(t.serverThreadKey)}function D(){return!0}function x(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":286"),c=s==null?void 0:s.armadilloThreadId,d,m;t[4]!==n.tables.mi_act_mapping_table||t[5]!==c?(d=function(){return c!=null?o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table.index("jid")).getKeyRange(c):o("ReQL").empty()},m=[c,n.tables.mi_act_mapping_table],t[4]=n.tables.mi_act_mapping_table,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":297");return p==null?void 0:p.serverThreadKey}async function $(t){var n=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t));if(r!=null){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,r.jid)}));return a}}l.useShouldHideE2eeAttribution=c,l.isCutoverThreadKey=d,l.useIsCutoverOpenThread=m,l.useIsDualThreadCutoverOpenThread=p,l.useIsDualThreadCutoverSecureThread=_,l.getMiActMappings=f,l.getCutoverThreadsByJid=g,l.useGetCutoverMapping=h,l.getThreadByCutoverThread=y,l.useOpenThreadIfExistsFromCutoverThread=C,l.useCutoverOpenThread=b,l.useODCutoverEligibleOpenOneToOneThread=v,l.useGetCutoverOpenThreadKey=S,l.useIsCutoverSecureThread=R,l.isCutoverSecureThreadFromChatJid=L,l.useIsCurrentUserCutoverUser=E,l.useGetHasUserRestoredBefore=k,l.useGetCutoverSecureThreadKey=I,l.useSupportedCutoverEnvironment=D,l.useCutoverSecureThreadKeyForOpenThreadKey=x,l.getCutoverThreadBySecureThreadKey=$}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,l=o("react-compiler-runtime").c(12),s=(e||(e=r("useReStore")))(),u,c;l[0]!==s||l[1]!==t?(u=function(){return t!=null?o("ReQL").fromTableAscending(s.tables.contacts,o("LSContactBitOffset").contactCapabilityFields).getKeyRange(t):o("ReQL").empty()},c=[s,t],l[0]=s,l[1]=t,l[2]=u,l[3]=c):(u=l[2],c=l[3]);var d=o("ReQLSuspense").useFirst(u,c,i.id+":34"),m;l[4]!==d?(m=d!=null&&o("LSContactBitOffset").has(76,d),l[4]=d,l[5]=m):m=l[5];var p=m,_,f;l[6]!==s||l[7]!==t?(_=function(){return t!=null?o("ReQL").fromTableAscending(s.tables.threads,["threadType"]).getKeyRange(t):o("ReQL").empty()},f=[s,t],l[6]=s,l[7]=t,l[8]=_,l[9]=f):(_=l[8],f=l[9]);var g=o("ReQLSuspense").useFirst(_,f,i.id+":53"),h;l[10]!==g?(h=g?o("LSMessagingThreadTypeUtil").isOpenOneToOne(g.threadType):!1,l[10]=g,l[11]=h):h=l[11];var y=h,C=((n=(a=o("ReQLSuspense").useFirst(function(){return t!=null?o("ReQL").fromTableAscending(s.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(t):o("ReQL").empty()},[s,t],i.id+":67"))==null?void 0:a.minMessageId)!=null?n:"")==="",b=o("MAWThreadCutover").useIsCutoverOpenThread(t),v=o("MAWThreadCutover").useIsCutoverSecureThread(t),S=b||v;return p&&y&&!C&&!S}l.default=s}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){s=e}function c(){if(s==null)throw r("err")("WaMsgr api called before set");return s}function d(){var e;return(e=c().myJids)==null?void 0:e.deviceJid}function m(){var e;return(e=c().myJids)==null?void 0:e.userJid}function p(e){return o("WAJids").extractUserJid(e)===o("WAJids").extractUserJid(d())}function _(){return c().config}function f(){return c().dependencies}var g="WAOneQueue is not defined";function h(){var t=c().waOneQueue;if(t==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),g),r("err")(g);return t}function y(){return c().hmacKey}l.setGlobals=u,l.getMyDeviceJid=d,l.getMyUserJid=m,l.isPeerDevice=p,l.getConfig=_,l.getDependencies=f,l.getWaOneQueue=h,l.getHMACKey=y}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID());if((e||(e=r("ExecutionEnvironment"))).isInWorker){var n=o("WAGlobals").getMyUserJid();return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:n===t?"same":"different"}),n}return t}l.getMyUserJid=s}),98);
__d("WADbContact",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3;i.NON_CONTACT=e,i.ONE_WAY_CONTACT=l,i.REVERSED_ONE_WAY_CONTACT=s,i.TWO_WAY_CONTACT=u}),66);
__d("WADevToolMessageChannel",[],(function(t,n,r,o,a,i){"use strict";var e=new MessageChannel,l,s=function(){return e=new MessageChannel,l(e),e},u=function(){return e},c=function(n){l=n,l(e)};i.createNewChannel=s,i.getMostRecentChannel=u,i.onCreateNewChannel=c}),66);/*FB_PKG_DELIM*/
__d("EARInitType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]),l=e;i.default=l}),66);
__d("EphemeralMediaViewMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});i.default=e}),66);
__d("IndexedDbPolyfills",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.emit=function(t){for(var e=this.$1.get(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(e!==void 0)for(var a of e)a.apply(void 0,r);var i=this["on"+t];i!=null&&i.apply(void 0,r)},t.addEventListener=function(t,n,r){var e=this;r===void 0&&(r={});var o=r,a=o.signal,i=this.$1.get(t);i===void 0&&(i=new Set,this.$1.set(t,i)),i.add(n),a!=null&&(a.onabort=function(){e.removeEventListener(t,n)})},t.removeEventListener=function(t,n){var e=this.$1.get(t);e!==void 0&&e.delete(n)},e})(),l=function(){return function(t,n){var r=this.openCursor(t!=null?t:null),o=[],a=new e;return r.onsuccess=function(e){var t=e.target.result;if(t!=null&&(n===void 0||o.length<n))o.push(t.value),t.continue();else{a.result=o,a.onsuccess==null||a.onsuccess({target:{readyState:"done",result:o}});return}},r.onerror=function(e){a.onerror==null||a.onerror(e)},a}},s=typeof window!="undefined"?window:self;typeof s.IDBObjectStore!="undefined"&&s.IDBObjectStore.prototype.getAll===void 0&&(s.IDBObjectStore.prototype.getAll=l()),i.IDBRequest=e,i.getAll=l}),66);
__d("LSDataTraceTag",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=4,d=5,m=6,p=7,_=20,f=21,g=22,h=23,y=24,C=25,b=26,v=27,S=28,R=29,L=30,E=31,k=32,I=33,T=34,D=35,x=36,$=37,P=38,N=39,M=40,w=41,A=42;i.none=e,i.sticker=l,i.image=s,i.animatedImage=u,i.video=c,i.audio=d,i.file=m,i.xma=p,i.messageTypeNone=_,i.messageTypeText=f,i.messageTypeFutureproof=g,i.messageTypeCiphertext=h,i.messageTypeUnavailable=y,i.messageTypeImage=C,i.messageTypeVideo=b,i.messageTypePtt=v,i.messageTypeAdmin=S,i.messageTypeRevoked=R,i.messageTypeGif=L,i.messageTypeSticker=E,i.messageTypeExpiredEphemeral=k,i.messageTypeEphemeralSettingAdmin=I,i.messageTypeEphemeralSyncResponse=T,i.messageTypeEphemeralScreenshotAction=D,i.messageTypeDeleteForMe=x,i.messageTypeEphemeralSettingChangeFromCurrentDevice=$,i.messageTypeAlertICDC=P,i.messageTypeGroupInvite=N,i.messageTypeXMA=M,i.messageTypeReaction=w,i.messageTypeSenderKeyDistribution=A}),66);
__d("LSThreadMediaGalleryGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});i.default=e}),66);
__d("MAWAdminAddParticipantMsg",["MAWLocalizationType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER}}function d(e,t){switch(e){case 1:return{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU};case 2:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER}}return{adminMsgContent:[(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER}}function m(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER};case 2:return{adminMsgContent:[t,n],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER}}return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER}}function p(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?d(t.length,r===n?l:i):m(t.length,i,l);if(e===n)return u(t.length,i,l);var p=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,p,r===n?l:i):c(t.length,p,i,l)}function _(t,n){return babelHelpers.extends({},p(t,n),{version:e})}l.createAddParticipantsAdminMessage=_}),98);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e="Facebook User",s=1;function u(t){return t==null||t===""?e:t}function c(t){return t!=null?o("WAJids").userIdFromJid(t):e}function d(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function m(e,t,n,r){return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:o("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(n==="@me"?o("WAGlobals").getMyUserJid():n,t),serverTs:r,ts:r,type:"Admin"}}function p(e,t){return babelHelpers.extends({},_(e,t),{version:s})}function _(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n={adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserPromotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotPromoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantPromotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:"participantPromotedParticipant"}}return n}function f(e,t,n,r){var a=_(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function g(e,t){return babelHelpers.extends({},h(e,t),{version:s})}function h(e,t){var n,r=o("WAGlobals").getMyUserJid(),a=t==="@me"?r:t;if(a===r)n=e===r?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"currentUserDemotedParticipant"};else if(a==null)n=e===r?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[o("WAJids").userIdFromJid(e)],adminType:"participantGotDemoted"};else{var i=o("WAJids").userIdFromJid(a);n=e===r?{adminMsgContent:[i],adminType:"participantDemotedYou"}:{adminMsgContent:[i,o("WAJids").userIdFromJid(e)],adminType:a===e?"participantSelfDemoted":"participantDemotedParticipant"}}return n}function y(e,t,n,r){var a=h(t,n);return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}function C(e,t,n,r){var a,i=[],l=t.subject.content;if(l!=null)return t.subject.user===o("WAGlobals").getMyUserJid()?(a="currentUserNamedGroup",i.push(l)):n==null?(a="unkonwnUserNamedGroup",i.push(l)):(a="participantNamedGroup",i.push(n,l)),{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:i,adminType:a},serverTs:r,ts:r,type:"Admin"}}function b(e,t){var n=v(e,t);if(n!=null)return babelHelpers.extends({},n,{version:s})}function v(e,t){var n,r=[];if(e===o("WAGlobals").getMyUserJid())switch(t){case"all_member_add":n="currentUserSetAddModeAllMembers";break;case"admin_add":n="currentUserSetAddModeAdminOnly";break}else if(e!=null)switch(r.push(o("WAJids").userIdFromJid(e)),t){case"all_member_add":n="participantSetAddModeAllMembers";break;case"admin_add":n="participantSetAddModeAdminOnly";break}else switch(t){case"all_member_add":n="serverSetAddModeAllMembers";break;case"admin_add":n="serverSetAddModeAdminOnly";break}if(n!=null)return{adminMsgContent:r,adminType:n}}function S(e,t,n,r){var a=v(n,t);if(a!=null)return{ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:e,externalId:o("MAWExternalId").generateExternalId()},msgContent:a,serverTs:r,ts:r,type:"Admin"}}l.UNKNOWN_USER=e,l.maybeUnknownParticipantName=u,l.createAdminMsgContactId=c,l.createParticipantAddAdminMessage=d,l.createParticipantRemoveAdminMsg=m,l.createParticipantPromoteAdminMessage=p,l.createParticipantPromoteAdminMsg=f,l.createParticipantDemoteAdminMessage=g,l.createParticipantDemoteAdminMsg=y,l.createGroupNameChangeAdminMsg=C,l.createMemberAddModeChangeAdminMessage=b,l.createMemberAddModeChangeAdminMsg=S}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function u(e,t,n,r){switch(e){case 1:return{adminMsgContent:[t,n],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantAddedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c)):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(d),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c))}l.createParticipantAdminMessage=c}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[t,n],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[t,e.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function s(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[t],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[t,n],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[t,e.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function u(e,t,n,r,o){switch(e){case 1:return o?{adminMsgContent:[t],adminType:"participantLeftGroup"}:{adminMsgContent:[t,n],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[t,n,r],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[t,n,e.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function c(t,n,r,a){var i=a==null?n.map(o("MAWAdminMsgHelpers").createAdminMsgContactId):a,l=i[0],c=i[1],d=r==null?o("MAWAdminMsgHelpers").createAdminMsgContactId(t):o("MAWAdminMsgHelpers").maybeUnknownParticipantName(r);return t===o("WAGlobals").getMyUserJid()?s(n.length,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===o("WAGlobals").getMyUserJid()):n.includes(o("WAGlobals").getMyUserJid())?e(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(n[0]===o("WAGlobals").getMyUserJid()?c:l)):u(n.length,d,o("MAWAdminMsgHelpers").maybeUnknownParticipantName(l),o("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),n[0]===t)}l.removeParticipantAdminMessage=c}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE],u=[e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,e.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN],c=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,e.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,e.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE],d=[e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS],m=[e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,e.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER],p=[e.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,e.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,e.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,e.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],_=[e.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],f=[e.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,e.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],g=[e.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,e.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,e.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,e.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],h=[e.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],y=[e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,e.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],C=[e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,e.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],b=[e.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],v=[e.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,e.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],S=[e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,e.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],R=[e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],L=[e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,e.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],E=[e.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,e.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],k=[e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],I=[e.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,e.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,e.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,e.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],T=[e.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,e.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,e.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],D=[e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,e.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,e.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,e.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,e.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,e.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT],x=[e.LOCALIZATION_TYPE.EMPTY_SNIPPET];l.cutoverAdminMsgs=s,l.dualThreadCutoverAdminMsgs=u,l.deviceChanges=c,l.currentUserAddRemoveParticipant=d,l.otherUserAddRemoveParticipant=m,l.groupPermissionsChanged=p,l.participantLeftGroup=_,l.chatCustomizedByCurrentUser=f,l.chatCustomizedByOtherUser=g,l.pinnedMessageUpdate=h,l.limitSharingUpdate=y,l.twoUsersConnected=C,l.fallbackMsgFromCurrentUser=b,l.fallbackMsgFromOtherUser=v,l.currentUserBumpsMessage=S,l.otherUserBumpsMessage=R,l.ephemeralSettingChanges=L,l.icdcAlerts=E,l.callActionToNotifyAbout=k,l.callActionNotToNotifyAbout=I,l.otherNonAdminMsgToBeBumped=T,l.otherNonAdminMsgToBeMarkedAsUnread=D,l.otherNonAdminMsgToNotTriggerUpdate=x}),98);
__d("MAWAdminRemoveParticipantMsg",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(e,t,n){switch(e){case 1:return{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS}}}function u(e,t,n,r){switch(e){case 1:return r?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LEFT_GROUP}:{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT};case 2:return{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS};default:return{adminMsgContent:[t,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS}}}function c(e,t,n,r,a){switch(e){case 1:return a?{adminMsgContent:[t],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LEFT_GROUP}:{adminMsgContent:[t,n],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_ONE_USER};case 2:return{adminMsgContent:[t,n,r],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_TWO_USER}}return{adminMsgContent:[t,n,(e-1).toString()],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER}}function d(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r=t[0],a=t[1],i=o("WAJids").userIdFromJid(r),l=a!=null?o("WAJids").userIdFromJid(a):"";if(e==null)return t.includes(n)?{adminMsgContent:[],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_YOU}:{adminMsgContent:[i],adminType:o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_REMOVED_ONE_USER};if(e===n)return u(t.length,i,l,r===n);var d=o("WAJids").userIdFromJid(e);return t.includes(n)?s(t.length,d,r===n?l:i):c(t.length,d,i,l,r===e)}function m(t,n){return babelHelpers.extends({},d(t,n),{version:e})}l.createRemoveParticipantsAdminMessage=m}),98);
__d("MAWAdminWriteGroupNameChangeAdminMsgContent",["MAWAdminMsgType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWUserJidWrapper").getMyUserJid(),r,a=[];return e===n?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_NAMED_GROUP,a.push(t)):e==null?(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.UNKNOWN_USER_NAMED_GROUP,a.push(t)):(r=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_NAMED_GROUP,a.push(o("WAJids").userIdFromJid(e),t)),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{return(e||(e=o("I64"))).of_string(t)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).mustfix("Cannot convert string to i64: %s",t)}}l.stringToI64Opt=s}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return r("LSXmaContentType").FB_FEED_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return r("LSXmaContentType").FB_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return r("LSXmaContentType").FB_STORY_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return r("LSXmaContentType").FB_STORY_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return r("LSXmaContentType").FB_FEED_VIDEO_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return r("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return r("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return r("LSXmaContentType").FB_EVENT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return r("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return r("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return r("LSXmaContentType").FB_SHORT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return r("LSXmaContentType").MSG_LOCATION_SHARING;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return r("LSXmaContentType").MSG_LOCATION_SHARING_V2;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return r("LSXmaContentType").FB_POST_MENTION;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:return r("LSXmaContentType").FB_FEED_POST_REACTION_REPLY;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return r("LSXmaContentType").MSG_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return r("LSXmaContentType").MSG_AI_CONTACT;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return r("LSXmaContentType").MSG_MEMORIES_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return r("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return r("LSXmaContentType").RTC_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return r("LSXmaContentType").RTC_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return r("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return r("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return r("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}l.convertExtendedContentTypeToLSXmaContentType=e}),98);
__d("MNLSXMALayoutType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28,CONDENSED_LINK:29,DOODLE_SPACE:30});i.default=e}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21,FUBS_EXCLUSIVE_CONTENT_TEASER:22});i.default=e}),66);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Random","ReQL","WAArmadilloXMA.pb","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t,n,r,a,i,l){var s=n.ctas,u=n.defaultCTA,c=d(n.targetId,n.targetType),p=(e||(e=o("I64"))).of_int32(o("Random").uint32());if(u!=null){var h=_(u,p,a,r,i,c,n.targetType);await g(t,h,p,l.defaultCta)}var y=o("MAWXMAUtils").isFBXMAPostMention(n.targetType)&&n.author===o("WAJids").AUTHOR_ME,C=[];return s!=null&&!y&&(C=await Promise.all(s.map(function(e,n){var o=m(p,n),s=f(e,o,a,r,i,c),u=n===0?l.attachmentCta1:n===1?l.attachmentCta2:n===2?l.attachmentCta3:void 0;return g(t,s,o,u)}))),{attachmentCta1Id:C.length>0?C[0]:void 0,attachmentCta2Id:C.length>1?C[1]:void 0,attachmentCta3Id:C.length>2?C[2]:void 0,defaultCtaId:u==null?void 0:p}}function c(e){var t="xma_web_url";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:t="xma_rtc_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:t="xma_rtc_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:t="xma_rtc_missed_audio";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:t="xma_rtc_missed_video";break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:t="igd_web_post_share";break}return t}function d(e,t){if(!o("MAWXMAUtils").isFBXMAPostMention(t))return e!=null?o("MAWBridgeUIEventDataValidation").stringToI64Opt(e):void 0}function m(t,n){return(e||(e=o("I64"))).add(t,e.of_int32(n+1))}function p(t,n,r,a,i,l,s){var u;s===void 0&&(s="xma_web_url");var c=t.actionUrl,d=t.nativeUrl;return{actionContentBlob:void 0,actionUrl:c!=null?c:d,attachmentFbid:i,attachmentIndex:(e||(e=o("I64"))).zero,ctaId:n,enableExtensions:!1,extensionHeightType:void 0,messageId:r,nativeUrl:d!=null?d:c,platformToken:void 0,targetId:l!=null?l:void 0,threadKey:a,title:(u=t.title)!=null?u:"Tap to view status update",type_:s!=null?s:"xma_web_url",urlWebviewType:void 0}}function _(e,t,n,r,o,a,i){var l=c(i);return p(e,t,n,r,o,a,l)}function f(e,t,n,r,o,a){var i;switch(e.ctaType){case"contact_sharing_profile":i="contact_sharing_profile";break;case"contact_sharing_message":i="contact_sharing_message";break}return p(e,t,n,r,o,a,i)}async function g(e,t,n,r){return r!=null?await e.attachment_ctas.upsert([r.ctaId],t):await e.attachment_ctas.add(t),n}async function h(e,t,n){var r=null,a={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};return r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n)),r!=null&&(a.defaultCta=await y(e,r.defaultCtaId),a.attachmentCta1=await y(e,r.attachmentCta1Id),a.attachmentCta2=await y(e,r.attachmentCta2Id),a.attachmentCta3=await y(e,r.attachmentCta3Id)),[r,a]}function y(e,t){var n;return t==null?Promise.resolve(void 0):(n=o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachment_ctas).getKeyRange(t)))!=null?n:void 0}function C(t,n,a,i,l,u,c,d,m){var p,_,f,g,h,y,C,E,k=(e||(e=o("I64"))).zero,I=b(t),T=o("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(t.targetType),D=T?(e||(e=o("I64"))).of_int32(T):void 0,x=(p=t==null||(_=t.defaultCTA)==null?void 0:_.actionUrl)!=null?p:t==null||(f=t.defaultCTA)==null?void 0:f.nativeUrl;t.defaultPreviewMediaId!=null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+t.targetType+"."+(t.defaultPreviewMediaPlaintextHash!=null?"true":"false"));var $=o("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:x!=null?x:void 0,attachmentCta1Id:l,attachmentCta2Id:u,attachmentCta3Id:c,attachmentFbid:a,attachmentIndex:e.zero,attachmentLoggingType:void 0,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:e.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:S(t.ctas,1),cta1Type:v(t.ctas,1),cta2Title:S(t.ctas,2),cta2Type:v(t.ctas,2),cta3Title:S(t.ctas,3),cta3Type:v(t.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:d,defaultCtaTitle:(g=t.defaultCTA)==null?void 0:g.title,defaultCtaType:I.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:t.filesize!=null?(e||(e=o("I64"))).of_int32(t.filesize):void 0,gatingTitle:t.overlayTitle,gatingType:t.overlayIconGlyph!=null?String(t.overlayIconGlyph):void 0,hasMedia:t.hasMedia!=null?t.hasMedia:!1,hasXma:!0,hasXmaFavicon:$?t.faviconPlaintextHash!=null:t.faviconMediaId!=null,hasXmaHeaderImage:$?t.headerMediaPlaintextHash!=null:t.headerMediaId!=null,hasXmaPreview:$?t.defaultPreviewMediaPlaintextHash!=null:t.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:t.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:t.maxSubtitleNumOfLines!=null?(e||(e=o("I64"))).of_int32(t.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:t.maxTitleNumOfLines!=null?(e||(e=o("I64"))).of_int32(t.maxTitleNumOfLines):void 0,messageId:i,miniPreview:void 0,offlineAttachmentId:(h=t.offlineAttachmentId)!=null?h:a,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:I.height,previewHeightLarge:t.previewHeightLarge!=null?(e||(e=o("I64"))).of_int32(t.previewHeightLarge):void 0,previewImageDecorationType:L(t.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:I.width,previewWidthLarge:t.previewWidthLarge!=null?(e||(e=o("I64"))).of_int32(t.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:t.subtitleText,targetId:void 0,threadKey:n,timestampMs:k,titleText:t.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:D,xmaDataclass:t.xmaDataclass,xmaFaviconFbid:$?t.faviconPlaintextHash:(y=t.faviconMediaId)==null?void 0:y.toString(),xmaHeaderImageFbid:$?t.headerMediaPlaintextHash:(C=t.headerMediaId)==null?void 0:C.toString(),xmaLayoutType:t.xmaLayoutType!=null?R(t.xmaLayoutType):void 0,xmaPreviewFbid:$?t.defaultPreviewMediaPlaintextHash:(E=t.defaultPreviewMediaId)==null?void 0:E.toString(),xmasTemplateType:t.xmaLayoutType!=null?R(t.xmaLayoutType):void 0}}function b(t){var n;switch(t.targetType){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:n={height:(e||(e=o("I64"))).of_int32(108),width:(e||(e=o("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:n={xmaContentType:"xma_rtc_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:n={xmaContentType:"xma_rtc_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:n={xmaContentType:"xma_rtc_missed_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:n={xmaContentType:"xma_rtc_missed_video"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:n={xmaContentType:"xma_rtc_missed_group_audio"};break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:n={xmaContentType:"xma_rtc_missed_group_video"};break;default:n={height:t.previewHeight!=null?(e||(e=o("I64"))).of_int32(t.previewHeight):void 0,width:t.previewWidth!=null?(e||(e=o("I64"))).of_int32(t.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return n}function v(e,t){if(e!=null){var n=e[t-1];if(n!=null){var r=n.buttonType,a=n.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return r===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}}}function S(e,t){if(e!=null){var n=e[t-1];if(n!=null)return n.title}}function R(e){return e===0||e!==3?(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").SINGLE):(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)}function L(e){switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").COLLAGE);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").REEL);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("MNXMAPreviewImageDecorationType").DEFAULT)}}l.addAttachmentCtas=u,l.maybeBridgeToLSTargetId=d,l.getCtaIdFromDefaultCtaId=m,l.composeDefaultAttachmentCta=_,l.composeAttachmentCta=f,l.getExistingAttachmentAndAttachmentCtas=h,l.composeAttachmentXMA=C}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e!=null)switch(e){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function u(t,n,r){var a,i,l,u,c=n.author,d=n.contentRef,m=n.ctas,p=n.defaultCTA,_=n.defaultPreviewMediaId,f=n.defaultPreviewMediaPlaintextHash,g=n.faviconMediaId,h=n.faviconPlaintextHash,y=n.headerMediaId,C=n.headerMediaPlaintextHash,b=n.headerTitle,v=n.maxSubtitleNumOfLines,S=n.maxTitleNumOfLines,R=n.msgId,L=n.offlineAttachmentId,E=n.overlayIconGlyph,k=n.overlayTitle,I=n.subtitleText,T=n.targetId,D=n.targetType,x=n.targetUsername,$=n.threadJid,P=n.titleText,N=n.xmaDataclass,M=n.xmaId,w=n.xmaLayoutType;t!=null&&t.mediaType!==o("MAWDbMedia").MEDIA_TYPE.IMAGE&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),t.mediaType),T!=null&&o("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(T,D);var A=r.hasMedia,F=r.hasXmaFaviconMedia,O=r.hasXmaHeaderMedia;return{author:c,contentRef:d,ctas:m==null?void 0:m.filter(function(e){return e.ctaType!=null}),defaultCTA:p,defaultPreviewMediaId:_,defaultPreviewMediaPlaintextHash:f,duration:null,faviconMediaId:g,faviconPlaintextHash:h,filesize:t==null?void 0:t.size,hasMedia:A,hasXmaFaviconMedia:F,hasXmaHeaderMedia:O,headerMediaId:y,headerMediaPlaintextHash:C,headerTitle:b,maxSubtitleNumOfLines:v,maxTitleNumOfLines:S,mediaType:t==null?void 0:t.mediaType,msgId:R,offlineAttachmentId:L,overlayIconGlyph:E,overlayTitle:k,playableUrlMimeType:s(t==null?void 0:t.mediaType),previewHeight:t==null||(a=t.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,previewHeightLarge:t==null||(i=t.validatedImageInfo)==null?void 0:i.height,previewUrlMimeType:s(t==null?void 0:t.mediaType),previewWidth:t==null||(l=t.validatedImageInfo)==null?void 0:l.jpegThumbnailWidth,previewWidthLarge:t==null||(u=t.validatedImageInfo)==null?void 0:u.width,subtitleText:I,targetId:T,targetType:D,targetUsername:x,threadJid:$,titleText:P,ts:t==null?void 0:t.ts,xmaDataclass:N,xmaId:M,xmaLayoutType:w}}function c(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}function d(e,t){var n=e.msgId,r=e.threadJid;return{msgId:n,threadJid:r,xmaId:t}}l.mediaTypeToMimeType=s,l.createBridgeXMA=u,l.createBridgeXMAShareExpired=c,l.createBridgeXMAShareTombstoned=d}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(t){return(e||(e=o("I64"))).of_float(t)}function c(t){return(e||(e=o("I64"))).to_float(t)}l.unsafeCoerceToEditMsgHistoryId=s,l.convertToEditMsgHistoryId64=u,l.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e,t){var n=(e+t).split("");return Math.abs(n.reduce(function(e,t){var n=t.charCodeAt(0),r=(e<<5)-e+n;return r&=r,r},0))}i.convertStringToOptionHash=e,i.convertOptionHashToString=l,i.generateStableIdFromOptionHash=s}),66);
__d("MAWDbXMA",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e}function u(e){return e}function c(t){return(e||(e=o("I64"))).to_float(t)}l.convertNumbersToXMAIds=s,l.convertNumberToXMAId=u,l.convertXMAId64ToXMAId=c}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){try{var e,t=o("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),n=(await(e=o("MAWKeychainCrypto")).getAccountKeys(t))[0],a=e.genBrowserEncryptionKeyString(),i=e.genDatabaseEncryptionSeed(),l=await e.encryptDataToStringBuffer(n,i),s=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+o("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:await e.generateHashString(o("MAWWebInitDataHelpers").getAccountKeysString(t)[0]),appIdOrigin:r("MessengerWebInitData").appId,expiration:s,formatVersion:t,key:a,seed:l,userKeyBaseString:await e.generateHashString(r("MessengerWebInitData").userKeyBase)}}catch(e){var u=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(u).mustfixThrow("Failed to generateNewKey")}}l.default=e}),98);
__d("MAWEARKeychainDecryptionError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWEARKeychainDecryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={NONE:0,GIPHY:1,TENOR:2},c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4},d={UNKNOWN:0,OPUS:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={};m.name="WAMediaTransport",m.internalSpec={integral:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,g],ancillary:[2,e.TYPES.MESSAGE,p]},p.name="WAMediaTransport$Ancillary",p.internalSpec={fileLength:[1,e.TYPES.UINT64],mimetype:[2,e.TYPES.STRING],thumbnail:[3,e.TYPES.MESSAGE,_],objectId:[4,e.TYPES.STRING]},_.name="WAMediaTransport$Ancillary$Thumbnail",_.internalSpec={jpegThumbnail:[1,e.TYPES.BYTES],downloadableThumbnail:[2,e.TYPES.MESSAGE,f],thumbnailWidth:[3,e.TYPES.UINT32],thumbnailHeight:[4,e.TYPES.UINT32]},f.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail",f.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],thumbnailScansSidecar:[7,e.TYPES.BYTES],thumbnailScanLengths:[8,e.FLAGS.REPEATED|e.TYPES.UINT32]},g.name="WAMediaTransport$Integral",g.internalSpec={fileSha256:[1,e.TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64]},h.name="ImageTransport",h.internalSpec={integral:[1,e.TYPES.MESSAGE,C],ancillary:[2,e.TYPES.MESSAGE,y]},y.name="ImageTransport$Ancillary",y.internalSpec={height:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],scansSidecar:[3,e.TYPES.BYTES],scanLengths:[4,e.FLAGS.REPEATED|e.TYPES.UINT32],midQualityFileSha256:[5,e.TYPES.BYTES],hdType:[6,e.TYPES.ENUM,s],memoriesConceptScores:[7,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.FLOAT],memoriesConceptIds:[8,e.FLAGS.REPEATED|e.FLAGS.PACKED|e.TYPES.UINT32]},C.name="ImageTransport$Integral",C.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},b.name="VideoTransport",b.internalSpec={integral:[1,e.TYPES.MESSAGE,S],ancillary:[2,e.TYPES.MESSAGE,v]},v.name="VideoTransport$Ancillary",v.internalSpec={seconds:[1,e.TYPES.UINT32],caption:[2,e.TYPES.MESSAGE,o("WACommon.pb").MessageTextSpec],gifPlayback:[3,e.TYPES.BOOL],height:[4,e.TYPES.UINT32],width:[5,e.TYPES.UINT32],sidecar:[6,e.TYPES.BYTES],gifAttribution:[7,e.TYPES.ENUM,u],accessibilityLabel:[8,e.TYPES.STRING],isHd:[9,e.TYPES.BOOL]},S.name="VideoTransport$Integral",S.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},R.name="AudioTransport",R.internalSpec={integral:[1,e.TYPES.MESSAGE,I],ancillary:[2,e.TYPES.MESSAGE,L]},L.name="AudioTransport$Ancillary",L.internalSpec={seconds:[1,e.TYPES.UINT32],avatarAudio:[2,e.TYPES.MESSAGE,E],waveformData:[3,e.TYPES.STRING],waveform:[4,e.TYPES.BYTES]},E.name="AudioTransport$Ancillary$AvatarAudio",E.internalSpec={poseId:[1,e.TYPES.UINT32],avatarAnimations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,k]},k.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations",k.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING],animationsType:[7,e.TYPES.ENUM,c]},I.name="AudioTransport$Integral",I.internalSpec={transport:[1,e.TYPES.MESSAGE,m],audioFormat:[2,e.TYPES.ENUM,d]},T.name="DocumentTransport",T.internalSpec={integral:[1,e.TYPES.MESSAGE,x],ancillary:[2,e.TYPES.MESSAGE,D]},D.name="DocumentTransport$Ancillary",D.internalSpec={pageCount:[1,e.TYPES.UINT32]},x.name="DocumentTransport$Integral",x.internalSpec={transport:[1,e.TYPES.MESSAGE,m]},$.name="StickerTransport",$.internalSpec={integral:[1,e.TYPES.MESSAGE,N],ancillary:[2,e.TYPES.MESSAGE,P]},P.name="StickerTransport$Ancillary",P.internalSpec={pageCount:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],width:[3,e.TYPES.UINT32],firstFrameLength:[4,e.TYPES.UINT32],firstFrameSidecar:[5,e.TYPES.BYTES],mustacheText:[6,e.TYPES.STRING],isThirdParty:[7,e.TYPES.BOOL],receiverFetchId:[8,e.TYPES.STRING],accessibilityLabel:[9,e.TYPES.STRING]},N.name="StickerTransport$Integral",N.internalSpec={transport:[1,e.TYPES.MESSAGE,m],isAnimated:[2,e.TYPES.BOOL],receiverFetchId:[3,e.TYPES.STRING]},M.name="ContactTransport",M.internalSpec={integral:[1,e.TYPES.MESSAGE,A],ancillary:[2,e.TYPES.MESSAGE,w]},w.name="ContactTransport$Ancillary",w.internalSpec={displayName:[1,e.TYPES.STRING]},A.name="ContactTransport$Integral",A.internalSpec={vcard:[1,e.TYPES.STRING],downloadableVcard:[2,e.TYPES.MESSAGE,m],__oneofs__:{contact:["vcard","downloadableVcard"]}},l.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=s,l.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=u,l.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c,l.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=d,l.WAMediaTransportSpec=m,l.WAMediaTransport$AncillarySpec=p,l.WAMediaTransport$Ancillary$ThumbnailSpec=_,l.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f,l.WAMediaTransport$IntegralSpec=g,l.ImageTransportSpec=h,l.ImageTransport$AncillarySpec=y,l.ImageTransport$IntegralSpec=C,l.VideoTransportSpec=b,l.VideoTransport$AncillarySpec=v,l.VideoTransport$IntegralSpec=S,l.AudioTransportSpec=R,l.AudioTransport$AncillarySpec=L,l.AudioTransport$Ancillary$AvatarAudioSpec=E,l.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=k,l.AudioTransport$IntegralSpec=I,l.DocumentTransportSpec=T,l.DocumentTransport$AncillarySpec=D,l.DocumentTransport$IntegralSpec=x,l.StickerTransportSpec=$,l.StickerTransport$AncillarySpec=P,l.StickerTransport$IntegralSpec=N,l.ContactTransportSpec=M,l.ContactTransport$AncillarySpec=w,l.ContactTransport$IntegralSpec=A}),98);
__d("WAMediaHdType",[],(function(t,n,r,o,a,i,l){"use strict";var e=0,s=1,u=2,c={HD_TYPE_NONE:e,HD_TYPE_LQ_4K:s,HD_TYPE_HQ_4K:u};l.HD_TYPE_NONE=e,l.HD_TYPE_LQ_4K=s,l.HD_TYPE_HQ_4K=u,l.HD_TYPE=c}),98);
__d("MAWEncodeMediaTransportProtocol",["MAWDbMedia","WAMediaHdType","WAMediaTransport.pb","encodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="image/webp",u="video/mp4",c="audio/wav",d="audio/ogg",m="image/gif",p="application/octet-stream";function _(e){switch(e){case o("WAMediaHdType").HD_TYPE_NONE:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE;case o("WAMediaHdType").HD_TYPE_LQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K;case o("WAMediaHdType").HD_TYPE_HQ_4K:return o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K;default:return}}function f(t,n,r){var a,i,l,s,u,c,d,m,p={ancillary:{hdType:_((a=r==null?void 0:r.hdType)!=null?a:(i=t.validatedImageInfo)==null?void 0:i.hdType),height:(l=t.validatedImageInfo)==null?void 0:l.height,scanLengths:((s=n.progressiveJpegDetails)==null?void 0:s.scanLengths)||[],scansSidecar:(u=n.progressiveJpegDetails)==null?void 0:u.sidecar,width:(c=t.validatedImageInfo)==null?void 0:c.width},integral:{transport:{ancillary:{fileLength:t.size,mimetype:e,objectId:n.objectId,thumbnail:{downloadableThumbnail:n.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:(d=t.validatedImageInfo)==null?void 0:d.jpegThumbnailHeight,thumbnailWidth:(m=t.validatedImageInfo)==null?void 0:m.jpegThumbnailWidth}},integral:{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,p).readBuffer()}function g(e,t,n){var r=f(e,t,n);return{payload:{content:{imageMessage:{caption:{mentionedJid:[]},image:{payload:r,version:1}}}}}}function h(e,t){var n,r,a,i,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:(n=e.validatedImageInfo)==null?void 0:n.height,width:(r=e.validatedImageInfo)==null?void 0:r.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:s,objectId:t.objectId,thumbnail:{thumbnailHeight:(a=e.validatedImageInfo)==null?void 0:a.jpegThumbnailHeight,thumbnailWidth:(i=e.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,l).readBuffer()}function y(e,t){var n=h(e,t);return{payload:{content:{stickerMessage:{sticker:{payload:n,version:1}}}}}}function C(e,t){var n,r=e.mediaType===o("MAWDbMedia").MEDIA_TYPE.GIF,a=e.isVideoGif===!0,i=r?e.validatedImageInfo:e.validatedVideoInfo,l={ancillary:{accessibilityLabel:e.accessibilitySummaryText,gifPlayback:r||a,height:i==null?void 0:i.height,seconds:r||(n=e.validatedVideoInfo)==null?void 0:n.duration,sidecar:t.sidecar,width:i==null?void 0:i.width},integral:{transport:{ancillary:{fileLength:e.size,mimetype:r?m:u,objectId:t.objectId,thumbnail:r?{thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}:{downloadableThumbnail:t.downloadableThumbnail,jpegThumbnail:void 0,thumbnailHeight:i==null?void 0:i.jpegThumbnailHeight,thumbnailWidth:i==null?void 0:i.jpegThumbnailWidth}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,l).readBuffer()}function b(e,t){var n=C(e,t);return{payload:{content:{videoMessage:{caption:{mentionedJid:[]},video:{payload:n,version:1}}}}}}var v=new ArrayBuffer(0);function S(e,t){var n,a,i={ancillary:{seconds:(n=e.validatedAudioInfo)==null?void 0:n.duration,waveform:(a=e.validatedAudioInfo)==null?void 0:a.waveform},integral:{audioFormat:r("gkx")("3053")?o("WAMediaTransport.pb").AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT.OPUS:void 0,transport:{ancillary:{fileLength:e.size,mimetype:r("gkx")("3053")?d:c,objectId:t.objectId,thumbnail:{jpegThumbnail:v}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,i).readBuffer()}function R(e,t){var n=S(e,t);return{payload:{content:{audioMessage:{audio:{payload:n,version:1},ptt:!0}}}}}function L(e,t){var n={ancillary:{},integral:{transport:{ancillary:{fileLength:e.size,mimetype:p,objectId:t.objectId,thumbnail:{jpegThumbnail:new ArrayBuffer(1),thumbnailHeight:1,thumbnailWidth:1}},integral:{directPath:t.directPath,fileEncSha256:t.fileEncSha256,fileSha256:t.fileSha256,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp}}}};return o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,n).readBuffer()}function E(e,t){var n,r=L(e,t);return{payload:{content:{documentMessage:{document:{payload:r,version:1},fileName:(n=e.validatedDocumentFileInfo)==null?void 0:n.filename}}}}}l.IMAGE_MIME_TYPE=e,l.STICKER_MIME_TYPE=s,l.VIDEO_MIME_TYPE=u,l.AUDIO_WAV_MIME_TYPE=c,l.AUDIO_OGG_MIME_TYPE=d,l.GIF_MIME_TYPE=m,l.FILE_MIME_TYPE=p,l.encodeMediaHdType=_,l.encodeValidatedMediaToImageTransport=f,l.encodeValidatedImageMessage=g,l.encodeValidatedMediaToStickerTransport=h,l.encodeValidatedStickerMessage=y,l.encodeValidatedMediaToVideoTransport=C,l.encodeValidatedVideoMessage=b,l.emptyAudioFileArrayBuffer=v,l.encodeValidatedMediaToAudioTransport=S,l.encodeValidatedAudioMessage=R,l.encodeValidatedMediaToDocumentTransport=L,l.encodeValidatedFileMessage=E}),98);
__d("MAWWorkerSetupArgs",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}function u(){e=null}i.setWorkerSetupArgs=l,i.getWorkerSetupArgs=s,i.resetWorkerSetupArgs=u}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a,i,l,s,u){i===void 0&&(i=1);try{var c=await o("MAWKeychainCrypto").getAccountKeys(i),d=await Promise.all([o("MAWKeychainCrypto").importBrowserEncryptionKey(t),Promise.all(c.map(function(e){return o("MAWKeychainCrypto").decryptDataToArrayBuffer(e,n).catch(function(){return null})}))]),m=d[0],p=d[1],_=await Promise.all(p.filter(Boolean).map(function(e){return o("MAWKeychainCrypto").genDatabaseEncryptionKey(m,e).catch(function(){return null})})),f=_.filter(Boolean);if(f.length===0)throw new(r("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:f,version:a}}catch(t){var g=null,h=null,y=o("MAWWorkerSetupArgs").getWorkerSetupArgs();(e||(e=r("ExecutionEnvironment"))).isInWorker&&y!=null&&(g=y.userKeyBase===r("MessengerWebInitData").userKeyBase,h=y.fbId===o("MAWCurrentUser").getID());var C=o("MAWWebInitDataHelpers").getAccountKeysString(i),b=C&&C[0]!=null?await o("MAWKeychainCrypto").generateHashString(C[0]):null;throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(t)).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",l!=null,C!=null,l===b,s!=null,r("MessengerWebInitData").userKeyBase!=null,s===await o("MAWKeychainCrypto").generateHashString(r("MessengerWebInitData").userKeyBase),u,r("MessengerWebInitData").appId,o("MAWCurrentUser").getID()===String(r("MessengerWebInitData").userId),(e||(e=r("ExecutionEnvironment"))).isInWorker,g,h,i),t}}l.default=s}),98);
__d("MWEARKeychainV3Errors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="EARKeychainNotFoundError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.EARKeychainNotFoundError=e}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof window!="undefined"?window:self;function s(e){var t=o("MAWLocalStorage").getStorage(),n=function(r){o("MAWLocalStorage").setItemGuarded(t,e,JSON.stringify(r))},r=function(r){window.removeEventListener("storage",r),o("MAWLocalStorage").removeItemGuarded(t,e)},a=function(t){window.addEventListener("storage",t)},i=function(n){return n!=null&&n.key===e&&typeof n.newValue=="string"?JSON.parse(n.newValue):null};return{getMessage:i,onRequestReceived:function(t){var e=function(n){var e=i(n);e!=null&&t(e)};return a(e),{release:function(){r(e)}}},sendMessage:n,stopWaitingForReply:r,waitForReply:a}}function u(t){var n=new e.BroadcastChannel(t),r=new Set;n.addEventListener("message",function(e){r.forEach(function(t){t(e)})});var o=function(t){r.add(t)},a=function(t){r.delete(t)},i=function(t){n.postMessage(JSON.stringify(t))},l=function(t){return t!=null&&typeof t.data=="string"?JSON.parse(t.data):null};return{getMessage:l,onRequestReceived:function(t){var e=function(n){var e=l(n);e!=null&&t(e)};return o(e),{release:function(){a(e)}}},sendMessage:i,stopWaitingForReply:a,waitForReply:o}}function c(t){return e.BroadcastChannel!=null?u(t):s(t)}l.getChannel=c}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=this;this.$2=null,this.$5=function(e){var t=n.$4.getMessage(e);t!=null&&t.a==="sb"&&t.t!==n.tabID()&&t.r===n.tabID()&&t.k!=null&&(n.$2&&n.$2(t.k),n.$4.stopWaitingForReply(n.$5),n.$2=null)},this.$1=e,this.$3=t!=null?t:500,this.$4=o("MWTabCommunicationChannel").getChannel(e)}var a=t.prototype;return a.tabID=function(){return r("pageID")},a.$6=function(){var e={a:"r",t:this.tabID()};this.$4.sendMessage(e)},a.listenToRequest=function(r){return this.listenToRequestAsync(function(){return(e||(e=n("Promise"))).resolve(r())})},a.listenToRequestAsync=function(t){var e=this,n=function(o){o.a==="r"&&o.t!==e.tabID()&&r("promiseDone")(t().then(function(t){var n={a:"sb",k:t,r:o.t,t:e.tabID()};e.$4.sendMessage(n)}))};return this.$4.onRequestReceived(n)},a.$7=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.$2=e,t.$4.waitForReply(t.$5),t.$6()})},a.request=function(o,a){var t=this,i,l=function(){i!=null&&r("clearTimeout")(i)};return(e||(e=n("Promise"))).race([this.$7().then(function(e){return t.$4.stopWaitingForReply(t.$5),o(e)}),new e(function(e){i=r("setTimeout")(function(){e(a()),t.$4.stopWaitingForReply(t.$5)},t.$3)})]).then(function(e){return l(),e})},t})();l.MWTabCommunication=s}),98);
__d("MWEARKeychainV3",["$InternalEnum","Deferred","ExecutionEnvironment","FBLogger","LSPlatformLsInitLog","MAWCryptoConsts","MAWCurrentUser","MAWEARGenNewKeychainCryptoKey","MAWGenKeychainCryptoKeyWithVersion","MAWQplProxy","MAWReliabilityMonitor","MWEARKeychainV3Errors","MWTabCommunication","QPLUserFlow","Random","ReStoreTabNotifier","WAArrayBufferUtils","WAResultOrError","WATimeUtils","getErrorSafe","gkx","memoizeOneWithArgs","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return{accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION}},u={global_ear:s(),maw_ear:s()},c=null,d=(function(){var e=Object.keys(u).reduce(function(e,t){return e[t]="none",e},{});return{get:function(n){return e[n]},is:function(n,r){return e[n]===r},set:function(n,r){var t;e[n]=r,(t=c)==null||t.updateState()}}})();function m(e){u[e]=s(),d.set(e,"none")}function p(e,t){d.set(e,t)}function _(e){for(var t=o("Random").uint32();e.some(function(e){return e.randomisedVersion===t});)t=o("Random").uint32();return t}var f={global_ear:function(){return null},maw_ear:function(){return null}},g=function(t){return f[t]()},h=function(t,n){f[t]=function(){return n}},y=function(t,n){h(t,n),L(t).dbReady.resolve()},C={global_ear:"browserEncryptionMetaV2",maw_ear:"encryptionMetaV3"},b=r("memoizeOneWithArgs")(function(e,t){return new(o("MWTabCommunication")).MWTabCommunication("ear_keys_"+t+"_"+e)});async function v(t,n,a){var i;if(a===void 0&&(a=B),r("gkx")("9396")&&r("FBLogger")("messenger_web").info("Initialise EAR keychain: %s",t),c=F(t),d.is(t,"success")&&L(t).databaseEncryptionKeys.size!==0)return o("WAResultOrError").makeResult(R(t));var l=o("MAWCurrentUser").getID(),s=r("ReStoreTabNotifier")("channel-ear-keychain-v3-"+l);s.onEventReceive("notifyEarKeychainV2",N);var u=(e||(e=r("ExecutionEnvironment"))).isInWorker?"Worker":"UI";a(t+"_ear_init_start",{string:(i={},i["initFlow_"+t+"_"+u]=n,i)});try{var m,p=await O(s,t,void 0,a);a(t+"_ear_import_end");for(var _ of p)L(t).databaseEncryptionKeys.set(_.result.version,{dbEntry:_.entry,keys:_.result.keys});return P(t),b(t,l).listenToRequest(function(){return JSON.stringify(Array.from(L(t).databaseEncryptionKeys.entries()).map(function(e){var t=e[0],n=e[1],r=n.dbEntry,a=n.keys;return[t,{dbEntry:r,keys:a.map(function(e){return o("WAArrayBufferUtils").arrayBufferToString(e)})}]}))}),a(t+"_ear_init_end",{string_array:(m={},m[t+"_randomisedVersionKeys"+u]=S(t).map(function(e){var t=e[0],n=e[1].dbEntry;return String(n.randomisedVersion)}),m)}),d.set(t,"success"),o("WAResultOrError").makeResult(R(t))}catch(e){return d.set(t,"failure"),a(t+"_ear_init_error"),r("gkx")("9396")&&r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Failed to setup EAR Keychain V3. Namespace: %s",t),o("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",r("getErrorSafe")(e))}}function S(e){return Array.from(L(e).databaseEncryptionKeys.entries())}function R(e){return L(e).latestVersion}function L(e){return u[e]}function E(t,n){var a=n!=null?n:R(t),i=L(t).databaseEncryptionKeys.get(a);if(i==null){r("promiseDone")(D(t).then(function(e){var t=e.map(function(e){return e.version}).includes(a);r("FBLogger")("messenger_web").info("EAR Keychain DB match found: %s. Version = %s. NumberVersions = %s",t,a,e.length)}));var l=R(t),s=Array.from(L(t).databaseEncryptionKeys.keys());throw r("FBLogger")("messenger_web").mustfix("EAR Key v%s was null. Latest version: %s has key: %s, keychain length: %s, currentLatestVersion: %s, init status %s, in worker %s",a,l,L(t).databaseEncryptionKeys.get(l)==null,L(t).databaseEncryptionKeys.size,Math.max.apply(Math,s),d.get(t),(e||(e=r("ExecutionEnvironment"))).isInWorker),new(o("MWEARKeychainV3Errors")).EARKeychainNotFoundError("EAR Key "+a+" was null.")}return{dbEntry:i.dbEntry,keys:i.keys,randomisedVersion:i.dbEntry.randomisedVersion,version:a}}function k(e){return r("MAWGenKeychainCryptoKeyWithVersion")(e.key,e.seed,e.version,e.formatVersion,e.accountKeyString,e.userKeyBaseString,e.appIdOrigin)}var I=n("$InternalEnum")({UNKNOWN:-1,NO_KEY:0,EBSM_EARV2_UPGRADE:1,RANDOMISED_VERSION_UPGRADE:2,EXPIRED_KEY:3,FORCE_KEY_ROTATION:4});function T(e){if(e.length===0)return{reason:I.NO_KEY,result:!0};var t=e[e.length-1];return o("WATimeUtils").isInFuture(t.expiration)?{result:!1}:{reason:I.EXPIRED_KEY,result:!0}}function D(e){var t=$(e,"readonly");return new Promise(function(n,r){t.onabort=function(){return r(t.error)},t.onerror=function(){return r(t.error)};var o=t.objectStore(C[e]).getAll();o.onsuccess=function(){return n(o.result)},o.onerror=function(){return r(o.error)}}).then(x)}function x(e){var t=e.find(function(e){return e.version==null});t!=null&&r("FBLogger")("messenger_web").mustfix("EAR Keychain Rotation null version: fields nonnull: %s %s %s %s %s %s",t.id==null,t.key==null,t.seed==null,t.formatVersion==null,t.accountKeyString==null,t.userKeyBaseString==null);var n=e.filter(function(e){return e.version!=null});return n.sort(function(e,t){return e.version-t.version})}function $(e,t){var n=g(e);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Encryption IndexDB should've been initialized. Namespace: %s",e);return n.transaction(C[e],t,{durability:"strict"})}var P=function(t){var e=Array.from(L(t).databaseEncryptionKeys.keys());e.length>0?L(t).latestVersion=Math.max.apply(Math,e):r("FBLogger")("messenger_web").mustfix("EAR latest version does not exist")},N=function(n){var t=n.namespace,o=n.version;r("promiseDone")((async function(){try{r("FBLogger")("messenger_web").info("Received key rotation notification. Namespace: %s",t),await L(t).dbReady.getPromise();var n=(await D(t)).find(function(e){return e.version===o});if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Notified new Ear Key but missing in DB");var a=await k(n);L(t).databaseEncryptionKeys.set(a.version,{dbEntry:n,keys:a.keys}),P(t),r("FBLogger")("messenger_web").info("Rotated key successfully. Namespace: %s",t)}catch(n){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(n)).mustfix("Failed to handleNewVersion. In worker %s. Namespace: %s.",(e||(e=r("ExecutionEnvironment"))).isInWorker,t)}})())};function M(e){return d.get(e)!=="none"}function w(e){return d.get(e)}function A(e){return d.is(e,"success")?(L(e).databaseEncryptionKeys.size===0&&r("FBLogger")("messenger_web").mustfix("Keychain initialised but no keys present"),!0):!1}function F(e){return o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("EARv3",function(){return{extra:{isKeychainInitialised:A(e).toString(),latestVersion:R(e).toString()},reason:d.get(e),state:(function(){switch(d.get(e)){case"none":return o("MAWReliabilityMonitor").HealthReportState.PENDING;case"success":return o("MAWReliabilityMonitor").HealthReportState.OK;case"failure":return o("MAWReliabilityMonitor").HealthReportState.ERROR;default:return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN}})()}})}async function O(t,n,o,a){var i=await r("MAWEARGenNewKeychainCryptoKey")();a(n+"_ear_raw_key_generated");var l=await new Promise(function(l,s){var u=$(n,"readwrite");u.onerror=function(){return s(u.error)},u.onabort=function(){return s(u.error)};var c=u.objectStore(C[n]).getAll();c.onerror=function(){return s(c.error)},c.onsuccess=function(){var d;a(n+"_ear_keys_fetched");var m=x(c.result),p=T(m),f=p.reason,g=p.result;if((o==null?void 0:o.forceKeyRotation)!==!0&&!g)return l(m);var h=(o==null?void 0:o.forceKeyRotation)===!0?I.FORCE_KEY_ROTATION:f!=null?f:I.UNKNOWN,y=m.map(function(e){return e.version}),b=(d=y[y.length-1])!=null?d:0;r("FBLogger")("messenger_web").info("Key rotation. EAR versions: %s. Latest version: %s. Namespace: %s, Worker: %s",y.toString(),b,n,(e||(e=r("ExecutionEnvironment"))).isInWorker);var v=babelHelpers.extends({},i,{randomisedVersion:_(m),source:h,version:b+1});a(n+"_ear_adding_new_key"),u.oncomplete=function(){m.push(babelHelpers.extends({},v,{id:v.version})),t.postMessage("notifyEarKeychainV2",{namespace:n,version:v.version}),a(n+"_ear_gen_key_end"),l(m)};var S=u.objectStore(C[n]).add(v);S.onerror=function(){return s(r("FBLogger")("messenger_web").catching(S.error).mustfixThrow("Failed to rotate EAR key"))}}});a(n+"_ear_import_start");var s=await Promise.allSettled(l.map(function(e){return k(e).then(function(t){return{entry:e,result:t}})})),u=s[s.length-1];if(u.status==="rejected"){var c,d=(c=o==null?void 0:o.corruptedEARRetryCount)!=null?c:0;if(d>=1)throw u.reason;return O(t,n,{corruptedEARRetryCount:d+1,forceKeyRotation:!0},a)}return s.map(function(e){if(e.status==="fulfilled")return e.value}).filter(Boolean)}var B=function(t,n){o("LSPlatformLsInitLog").addPoint(t,n),W(t,n)},W=function(n,a){var t=r("qpl")._(25310776,"6155");(e||(e=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(t,"backend_"+n,{annotations:a}):(r("QPLUserFlow").addPoint(t,"ui_"+n),a!=null&&r("QPLUserFlow").addAnnotations(t,a))},q=function(t,n){return b(t,n).request(function(e){var n=JSON.parse(e);return n.forEach(function(e){var n=e[0],r=e[1],a=r.keys.map(o("WAArrayBufferUtils").stringToArrayBuffer);L(t).databaseEncryptionKeys.set(n,{dbEntry:r.dbEntry,keys:a})}),P(t),d.set(t,"success"),!0},function(){return!1})};l.InitStatus=d,l.resetKeychain__TEST_ONLY_DO_NOT_USE=m,l.setInitStatus__TEST_ONLY_DO_NOT_USE=p,l.generateNewRandomisedVersionNumber=_,l.setNamespaceSourceDbWithoutMarkingDbReady=h,l.setNamespaceSourceDbAndMarkAsReady=y,l.getEncryptionKeysTabCommunication=b,l.init=v,l.getLatestVersion=R,l.getKeychain=L,l.getDbEncryptionKey=E,l.isKeychainSettled=M,l.getKeychainInitStatus=w,l.isKeychainInitialised=A,l.logMawInitPoint=W,l.importKeysFromOtherTab=q}),98);
__d("WAWorkerGlobalScope",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){return typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:self})();i.workerGlobalScope=e}),66);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("IndexedDbPolyfills");var c="browserEncryptionMetaV2",d="version",m=1,p=6e4,_=null,f=null,g=null;function h(){return _}function y(){return _!=null}var C=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function b(e,t){t===void 0&&(t=0);var a=o("MAWCurrentUser").getID();return t>m?(L(e,"ear_idb_retry_failed_max_reached"),(u||(u=n("Promise"))).reject(new C)):_!=null?(L(e,"ear_db_exists"),(u||(u=n("Promise"))).resolve()):indexedDB==null?(L(e,"ear_idb_unavailable"),(u||(u=n("Promise"))).reject(r("err")("IndexedDB API not available"))):(L(e,"ear_db_open_start",{bool:{browserLockEnabled:r("BrowserLockManager")!=null}}),new(u||(u=n("Promise")))(function(n,i){var l=function(o){b(e,t+1).then(n).catch(function(e){if(e instanceof C)return i(o);i(e)})};try{g=o("MAWIndexedDbMetadata").encryptionDbName(a);var u=indexedDB.open(g),m=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(e),(s||(s=r("ExecutionEnvironment"))).isInWorker?"true":"false",u.readyState))},p);u.onupgradeneeded=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),L(e,"ear_db_upgrade_start");var n=t.target.result;if(!n.objectStoreNames.contains(c)){var r=n.createObjectStore(c,{autoIncrement:!0,keyPath:"id"});r.createIndex(d,d,{unique:!0})}L(e,"ear_db_upgrade_end")},u.onblocked=function(){L(e,"ear_db_open_blocked"),o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){i(r("err")("EAR Open timed out while blocked"))},2e3)},u.onsuccess=function(t){o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var a=t.target.result;if(!a.objectStoreNames.contains(c)){var s=u.result.objectStoreNames.contains(c);return r("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",s),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),S(a,"missing_encryption_meta_table").then(function(){l(r("err")("Malformed encryption DB"))}).catch(function(t){return L(e,"ear_idb_retry_failed_delete_failed"),i(r("err")("Failed to delete malformed encryption DB: "+t.message))})}a.onversionchange=function(){a.close(),r("FBLogger")("messenger_web").info("EAR onversionchange triggered"),o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),f==null||f()},L(e,"ear_db_open_end"),_=a,o("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",_),n()},u.onerror=function(){if(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),u.error.name==="UnknownError")return L(e,"ear_db_open_error_unknown_error"),l(u.error);L(e,"ear_db_open_error"),i(u.error)}}catch(t){L(e,"ear_db_error"),i(t)}}))}function v(e){f=f==null?e:f}function S(e,t){return e===void 0&&(e=_),r("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",t),e!=null&&e.close(),o("MAWIndexedDBDeletion").deleteDB(g,"ear")}function R(t){switch(t){case r("EARInitType").EB_INIT:return r("qpl")._(521477507,"1406");case r("EARInitType").MAW_INIT:return r("qpl")._(25310776,"6155");case r("EARInitType").MAW_RP_INIT:return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]))),r("qpl")._(25310776,"6155");case r("EARInitType").LS_INIT:return r("qpl")._(25305590,"1127");case r("EARInitType").MAW_IN_UI_INIT:return null}}function L(e,t,n){var a=R(e);a!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+t,{annotations:n}):(r("QPLUserFlow").addPoint(a,t),n!=null&&r("QPLUserFlow").addAnnotations(a,n)))}l.storeName=c,l.ENCRYPTION_MAW_STORES_INDEX=d,l.getEncryptionDB=h,l.isEncryptionDBInited=y,l.makeEncryptionDB=b,l.maybeSetEncryptionDbOnVersionChange=v,l.deleteEncryptionDB_UNSAFE=S}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={ES_OPEN:1,ES_CLOSE:2},c={UNKNOWN:0,NUDE:1,NOT_NUDE:2},d={TAKEDOWN:0,RESTORE:1},m={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23},p={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2},_={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},g={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={};h.name="Armadillo",h.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,C],metadata:[2,e.TYPES.MESSAGE,y]},y.name="Armadillo$Metadata",y.internalSpec={},C.name="Armadillo$Payload",C.internalSpec={content:[1,e.TYPES.MESSAGE,B],applicationData:[2,e.TYPES.MESSAGE,L],signal:[3,e.TYPES.MESSAGE,v],subProtocol:[4,e.TYPES.MESSAGE,b],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},b.name="Armadillo$SubProtocolPayload",b.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},v.name="Armadillo$Signal",v.internalSpec={encryptedBackupsSecrets:[1,e.TYPES.MESSAGE,S],__oneofs__:{signal:["encryptedBackupsSecrets"]}},S.name="Armadillo$Signal$EncryptedBackupsSecrets",S.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},R.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch",R.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.ENUM,u]},L.name="Armadillo$ApplicationData",L.internalSpec={metadataSync:[1,e.TYPES.MESSAGE,O],aiBotResponse:[2,e.TYPES.MESSAGE,k],messageHistoryDocumentMessage:[3,e.TYPES.MESSAGE,E],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}},E.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage",E.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},k.name="Armadillo$ApplicationData$AIBotResponseMessage",k.internalSpec={summonToken:[1,e.TYPES.STRING],messageText:[2,e.TYPES.STRING],serializedExtras:[3,e.TYPES.STRING]},I.name="Armadillo$ApplicationData$MetadataSyncAction",I.internalSpec={actionTimestamp:[1,e.TYPES.INT64],chatAction:[101,e.TYPES.MESSAGE,P],messageAction:[102,e.TYPES.MESSAGE,x],spectraAction:[103,e.TYPES.MESSAGE,D],attachmentInterventionAction:[104,e.TYPES.MESSAGE,T],__oneofs__:{actionType:["chatAction","messageAction","spectraAction","attachmentInterventionAction"]}},T.name="Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionAction",T.internalSpec={messageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],interventionType:[2,e.TYPES.ENUM,c]},D.name="Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraAction",D.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionType:[2,e.TYPES.ENUM,d],takedownActionId:[3,e.TYPES.INT64],config:[4,e.TYPES.STRING]},x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction",x.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],messageDelete:[101,e.TYPES.MESSAGE,$],__oneofs__:{action:["messageDelete"]}},$.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete",$.internalSpec={},P.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction",P.internalSpec={chatId:[1,e.TYPES.STRING],chatArchive:[101,e.TYPES.MESSAGE,w],chatDelete:[102,e.TYPES.MESSAGE,M],chatRead:[103,e.TYPES.MESSAGE,N],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}},N.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead",N.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],read:[2,e.TYPES.BOOL]},M.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete",M.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F]},w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive",w.internalSpec={messageRange:[1,e.TYPES.MESSAGE,F],archived:[2,e.TYPES.BOOL]},A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage",A.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],timestamp:[2,e.TYPES.INT64]},F.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange",F.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,A]},O.name="Armadillo$ApplicationData$MetadataSyncNotification",O.internalSpec={actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,I]},B.name="Armadillo$Content",B.internalSpec={commonSticker:[1,e.TYPES.MESSAGE,Q],screenshotAction:[3,e.TYPES.MESSAGE,G],extendedContentMessage:[4,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,e.TYPES.MESSAGE,K],ravenActionNotifMessage:[6,e.TYPES.MESSAGE,j],extendedMessageContentWithSear:[7,e.TYPES.MESSAGE,z],imageGalleryMessage:[8,e.TYPES.MESSAGE,H],paymentsTransactionMessage:[10,e.TYPES.MESSAGE,W],bumpExistingMessage:[11,e.TYPES.MESSAGE,V],noteReplyMessage:[13,e.TYPES.MESSAGE,U],ravenMessageMsgr:[14,e.TYPES.MESSAGE,K],networkVerificationMessage:[15,e.TYPES.MESSAGE,q],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}},W.name="Armadillo$Content$PaymentsTransactionMessage",W.internalSpec={transactionId:[1,e.TYPES.UINT64],amount:[2,e.TYPES.STRING],currency:[3,e.TYPES.STRING],paymentStatus:[4,e.TYPES.ENUM,m],extendedContentMessage:[5,e.TYPES.MESSAGE,o("WAArmadilloXMA.pb").ExtendedContentMessageSpec]},q.name="Armadillo$Content$NetworkVerificationMessage",q.internalSpec={codeText:[1,e.TYPES.STRING]},U.name="Armadillo$Content$NoteReplyMessage",U.internalSpec={noteId:[1,e.TYPES.STRING],noteText:[2,e.TYPES.MESSAGE,s.MessageTextSpec],noteTimestampMs:[3,e.TYPES.INT64],textContent:[4,e.TYPES.MESSAGE,s.MessageTextSpec],stickerContent:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],videoContent:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}},V.name="Armadillo$Content$BumpExistingMessage",V.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},H.name="Armadillo$Content$ImageGalleryMessage",H.internalSpec={images:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s.SubProtocolSpec]},G.name="Armadillo$Content$ScreenshotAction",G.internalSpec={screenshotType:[1,e.TYPES.ENUM,p]},z.name="Armadillo$Content$ExtendedContentMessageWithSear",z.internalSpec={searId:[1,e.TYPES.STRING],payload:[2,e.TYPES.BYTES],nativeUrl:[3,e.TYPES.STRING],searAssociatedMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],searSentWithMessageId:[5,e.TYPES.STRING]},j.name="Armadillo$Content$RavenActionNotifMessage",j.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],actionTimestamp:[2,e.TYPES.INT64],actionType:[3,e.TYPES.ENUM,_]},K.name="Armadillo$Content$RavenMessage",K.internalSpec={ephemeralType:[1,e.TYPES.ENUM,f],imageMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],videoMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}},Q.name="Armadillo$Content$CommonSticker",Q.internalSpec={stickerType:[1,e.TYPES.ENUM,g]},l.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=u,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_ATTACHMENT_INTERVENTION_ACTION_INTERVENTION_TYPE=c,l.ARMADILLO_APPLICATION_DATA_METADATA_SYNC_ACTION_SYNC_SPECTRA_ACTION_SPECTRA_ACTION_TYPE=d,l.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=m,l.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=p,l.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=_,l.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f,l.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=g,l.ArmadilloSpec=h,l.Armadillo$MetadataSpec=y,l.Armadillo$PayloadSpec=C,l.Armadillo$SubProtocolPayloadSpec=b,l.Armadillo$SignalSpec=v,l.Armadillo$Signal$EncryptedBackupsSecretsSpec=S,l.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=R,l.Armadillo$ApplicationDataSpec=L,l.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=E,l.Armadillo$ApplicationData$AIBotResponseMessageSpec=k,l.Armadillo$ApplicationData$MetadataSyncActionSpec=I,l.Armadillo$ApplicationData$MetadataSyncAction$SyncAttachmentInterventionActionSpec=T,l.Armadillo$ApplicationData$MetadataSyncAction$SyncSpectraActionSpec=D,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=x,l.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=$,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=P,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=N,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=M,l.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=w,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=A,l.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=F,l.Armadillo$ApplicationData$MetadataSyncNotificationSpec=O,l.Armadillo$ContentSpec=B,l.Armadillo$Content$PaymentsTransactionMessageSpec=W,l.Armadillo$Content$NetworkVerificationMessageSpec=q,l.Armadillo$Content$NoteReplyMessageSpec=U,l.Armadillo$Content$BumpExistingMessageSpec=V,l.Armadillo$Content$ImageGalleryMessageSpec=H,l.Armadillo$Content$ScreenshotActionSpec=G,l.Armadillo$Content$ExtendedContentMessageWithSearSpec=z,l.Armadillo$Content$RavenActionNotifMessageSpec=j,l.Armadillo$Content$RavenMessageSpec=K,l.Armadillo$Content$CommonStickerSpec=Q}),98);
__d("MAWEphemeralUtils",["MAWLocalizationType","MAWUserJidWrapper","WAArmadilloApplication.pb","WAJids","err"],(function(t,n,r,o,a,i,l){"use strict";var e=60,s=60*e,u=24*s;function c(t,n,r,a){var i,l=[],c=n===u,d=t===o("MAWUserJidWrapper").getMyUserJid();if(a)i=o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET;else if(t==null)n===0?i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:n<e?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(n.toString())):n<s?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push((n/e).toString())):n<u||c?(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,l.push((n/s).toString())):(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,l.push((n/u).toString()));else{var m=o("WAJids").extractUserId(t).toString();n===0?d?i=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,l.push(m)):n<e?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,l.push(m)),l.push(n.toString())):n<s?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,l.push(m)),l.push((n/e).toString())):n<u||c?(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,l.push(m)),l.push((n/s).toString())):(d?i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:(i=r?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,l.push(m)),l.push((n/u).toString()))}return{adminMsgContent:l,adminType:i,version:1}}function d(e,t,n){var a,i=[],l=o("WAJids").extractUserId(t).toString();switch(e){case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,i.push(l));break;case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:n?a=o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,i.push(l));break;default:throw r("err")("Received unexpected screenshot action type")}return{ephemeralScreenshotActionContent:i,ephemeralScreenshotActionType:a}}l.getEphemeralSettingChangeData=c,l.getEphemeralScreenshotActionData=d}),98);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case"add":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":return t?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}l.getUserDeviceAdminType=e}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWDbMsg","MAWJids","WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){if(o("WAJids").isAuthorSystem(e)||t==null||n==null){r("FBLogger")("messenger_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",n);return}return{author:e,chat:t,externalId:n}}function c(e){var t;return u(e.author,e.threadJid,(t=e.externalId)!=null?t:e.editExternalId)}function d(e){return o("WAJids").isAuthorMe(e)?o("WAGlobals").getMyUserJid():e}function m(t,n){var r=(e||(e=o("I64"))).to_string(t),a=(s||(s=o("LSIntEnum"))).unwrapIntEnum(n);switch(a){case 15:return o("MAWJids").jidUtils.toUserJid(r);case 16:return o("WAJids").toGroupJid(r);default:return null}}function p(e){return g(e.threadJid,e.externalId)}function _(e){return f(e.threadJid,e.externalId)}function f(e,t){var n=o("MAWDbMsg").toMsgId(g(e,t));if(n==null)throw r("FBLogger")("messenger_e2ee_web").mustfixThrow("formatProtocolMsgIdFromExternalId: Failed to create protocolMsgId with externalId %s for a msg",t);return n}function g(e,t){return e+"."+t}l.maybeToProtocolMsgId=u,l.toProtocolMsgId=c,l.getAuthorJid=d,l.LSJidtoChatJid=m,l.toProtocolMsgIdStringForMAWStorage=p,l.formatProtocolMsgIdFromMsg=_,l.formatProtocolMsgIdFromExternalId=f}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",["MSGDataclassTypes.flow","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s(e)!=null}function s(e){if(e!=null){var t=e.content;if(!(t==null||(t==null?void 0:t.__typename)!=="XMSGXmaSingleContent")){var n=t.custom_template_data;if(!(n==null||(n==null?void 0:n.__typename)!=="XMSGXmaLocationTemplateData")){var r=n.location_metadata;if(!(r==null||(r==null?void 0:r.__typename)!=="XMSGXmaLiveLocationMetadata"))return r}}}}var u=1e3;function c(e,t){var n,a=r("justknobx")._("4207"),i=Math.floor(Date.now()/u)-a;return t!=null&&t<i&&((n=s(e))==null?void 0:n.session_state)===o("MSGDataclassTypes.flow").XmsgXmaLiveLocationSessionState.Started}l.isDataclassLiveLocationXMA=e,l.getLiveLocationMetadata=s,l.isExpiredLiveLocationStarted=c}),98);
__d("MAWParseCollapsibleIdFromXMADataClass",["FBLogger","MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("xmaDataclass is missing or invalid");var t=o("MWXMAV2IsDataclassLiveLocationXMA").getLiveLocationMetadata(e);if(t!=null)return parseInt(t.session_id,10);if((e==null?void 0:e.layout_config)==null||typeof(e==null?void 0:e.layout_config.collapsible_id)!="number")throw r("FBLogger")("messenger_web").mustfixThrow("Layout config or collapsible_id is missing or invalid");return e.layout_config.collapsible_id}l.parseCollapsibleIdFromXMADataClass=e}),98);
__d("MWXMAV2XmaDataClass",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)try{return JSON.parse(e)}catch(e){r("FBLogger")("messenger_web_sharing").mustfix("Error parsing xma dataclass")}}l.parseXmaDataClass=e}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(n===void 0&&(n=!1),e==null)return null;if(n)return"paymentsTransactionMessage";switch(e){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(o("MWXMAV2XmaDataClass").parseXmaDataClass(t))?"liveLocationMessage":"locationMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}l.getXMAUnsupportedMessageType=e}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="Subprotocol",e.internalSpec={payload:[1,o("WAProtoConst").TYPES.BYTES],version:[2,o("WAProtoConst").TYPES.INT32]},l.SubprotocolSpec=e}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={};s.name="BackupMessage",s.internalSpec={metadata:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,u],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,o("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}},u.name="BackupMessage$Metadata",u.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]},c.name="BackupMessage$Metadata$FrankingMetadata",c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]},l.BackupMessageSpec=s,l.BackupMessage$MetadataSpec=u,l.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={},s={};e.name="LocallyTransformedMessage",e.internalSpec={pollUpdateMessage:[1,o("WAProtoConst").TYPES.MESSAGE,s],__oneofs__:{content:["pollUpdateMessage"]}},s.name="LocallyTransformedMessage$PollUpdateAdminMessage",s.internalSpec={pollCreationMessageId:[1,o("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,o("WAProtoConst").TYPES.STRING]},l.LocallyTransformedMessageSpec=e,l.LocallyTransformedMessage$PollUpdateAdminMessageSpec=s}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2}),c=s({UNSET:0,CHANGED:1,REMOVED:2}),d=s({UNSET:0,PINNED:1,UNPINNED:2}),m=s({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2}),p=s({UNSET:0,ADDED:1,REMOVED:2}),_=s({UNSET:0,ADDED:1,REMOVED:2}),f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={},G={},z={},j={},K={},Q={},X={};f.name="MiTransportAdminMessage",f.internalSpec={skipBumpThread:[34,(e=o("WAProtoConst")).TYPES.BOOL],skipSnippetUpdate:[35,e.TYPES.BOOL],chatThemeChanged:[1,e.TYPES.MESSAGE,X],nicknameChanged:[2,e.TYPES.MESSAGE,Q],groupParticipantChanged:[3,e.TYPES.MESSAGE,K],groupAdminChanged:[4,e.TYPES.MESSAGE,j],groupNameChanged:[5,e.TYPES.MESSAGE,z],groupMembershipAddModeChanged:[6,e.TYPES.MESSAGE,G],messagePinned:[7,e.TYPES.MESSAGE,H],groupImageChanged:[8,e.TYPES.MESSAGE,V],quickReactionChanged:[9,e.TYPES.MESSAGE,U],linkCta:[10,e.TYPES.MESSAGE,W],iconChanged:[11,e.TYPES.MESSAGE,B],disappearingSettingChanged:[12,e.TYPES.MESSAGE,O],limitSharingChanged:[13,e.TYPES.MESSAGE,F],xmatDisappearingSetting:[14,e.TYPES.MESSAGE,A],xmatFriendRequestConfirmedEncrypted:[15,e.TYPES.MESSAGE,w],xmatInstantGameEncryptedDynamicCustomUpdate:[16,e.TYPES.MESSAGE,M],xmatLinkCta:[17,e.TYPES.MESSAGE,N],xmatMagicWords:[18,e.TYPES.MESSAGE,P],xmatMessagingLimitSharing:[19,e.TYPES.MESSAGE,$],xmatMessengerQrCodeScanned:[20,e.TYPES.MESSAGE,x],xmatMessengerSharedAlbumAddition:[21,e.TYPES.MESSAGE,D],xmatMessengerSharedAlbumContentRemoval:[22,e.TYPES.MESSAGE,I],xmatMessengerSharedAlbumDeletion:[23,e.TYPES.MESSAGE,k],xmatMessengerSharedAlbumRename:[24,e.TYPES.MESSAGE,E],xmatMessengerSharedAlbum:[25,e.TYPES.MESSAGE,L],xmatThemeColor:[26,e.TYPES.MESSAGE,R],xmatThreadIcon:[27,e.TYPES.MESSAGE,S],xmatThreadNickname:[28,e.TYPES.MESSAGE,v],xmatThreadQuickReaction:[29,e.TYPES.MESSAGE,b],xmatUpdatePayments:[30,e.TYPES.MESSAGE,C],xmatPinMessageV2:[31,e.TYPES.MESSAGE,y],xmatUnpinMessageV2:[32,e.TYPES.MESSAGE,h],xmatGenaiTaskAdd:[33,e.TYPES.MESSAGE,g],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2","xmatGenaiTaskAdd"]}},g.name="MiTransportAdminMessage$XmatGenAITaskAdd",g.internalSpec={taskId:[1,e.TYPES.INT64]},h.name="MiTransportAdminMessage$XmatUnpinMessageV2",h.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},y.name="MiTransportAdminMessage$XmatPinMessageV2",y.internalSpec={pinnedMessageId:[1,e.TYPES.STRING]},C.name="MiTransportAdminMessage$XmatUpdatePayments",C.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING],amount:[3,e.TYPES.FLOAT],transactionId:[4,e.TYPES.INT64],transactionStatus:[5,e.TYPES.INT32]},b.name="MiTransportAdminMessage$XmatThreadQuickReaction",b.internalSpec={threadQuickReactionEmoji:[1,e.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,e.TYPES.STRING]},v.name="MiTransportAdminMessage$XmatThreadNickname",v.internalSpec={participantId:[1,e.TYPES.INT64],nickname:[2,e.TYPES.STRING]},S.name="MiTransportAdminMessage$XmatThreadIcon",S.internalSpec={threadIcon:[1,e.TYPES.STRING]},R.name="MiTransportAdminMessage$XmatThemeColor",R.internalSpec={themeId:[1,e.TYPES.STRING],themeColor:[2,e.TYPES.STRING],gradient:[3,e.FLAGS.REPEATED|e.TYPES.STRING],shouldShowIcon:[4,e.TYPES.BOOL],themeType:[5,e.TYPES.INT32],accessibilityLabel:[6,e.TYPES.STRING],themeNameWithSubtitle:[7,e.TYPES.STRING],themeEmoji:[8,e.TYPES.STRING]},L.name="MiTransportAdminMessage$XmatMessengerSharedAlbum",L.internalSpec={xmaDataclass:[1,e.TYPES.STRING]},E.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename",E.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],oldAlbumTitle:[2,e.TYPES.STRING],newAlbumTitle:[3,e.TYPES.STRING]},k.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion",k.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING]},I.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval",I.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],removedContentMap:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,T],removedContentCount:[3,e.TYPES.INT64],albumTitle:[4,e.TYPES.STRING]},T.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple",T.internalSpec={key:[1,e.TYPES.INT64],value:[2,e.TYPES.STRING]},D.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition",D.internalSpec={sharedAlbumId:[1,e.TYPES.INT64],albumTitle:[2,e.TYPES.STRING],numOfAttachments:[3,e.TYPES.INT64],isAlbumCreation:[4,e.TYPES.BOOL]},x.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned",x.internalSpec={receiverName:[1,e.TYPES.STRING],senderName:[2,e.TYPES.STRING]},$.name="MiTransportAdminMessage$XmatMessagingLimitSharing",$.internalSpec={senderName:[1,e.TYPES.STRING],senderId:[2,e.TYPES.STRING],limitSharingType:[3,e.TYPES.STRING]},P.name="MiTransportAdminMessage$XmatMagicWords",P.internalSpec={newMagicWordCount:[1,e.TYPES.INT64],removedMagicWordCount:[2,e.TYPES.INT64],magicWord:[3,e.TYPES.STRING],emojiEffect:[4,e.TYPES.STRING],isAllEdited:[5,e.TYPES.BOOL],themeName:[6,e.TYPES.STRING]},N.name="MiTransportAdminMessage$XmatLinkCTA",N.internalSpec={linkCtaXmatPrimaryText:[1,e.TYPES.STRING],linkCtaXmatCtaText:[2,e.TYPES.STRING],linkCtaXmatCtaUrl:[3,e.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,e.TYPES.STRING],androidUri:[5,e.TYPES.STRING],asyncUrl:[6,e.TYPES.STRING],wwwIsAsyncUrl:[7,e.TYPES.BOOL],msiteEnabled:[8,e.TYPES.BOOL],hideUriInFallback:[9,e.TYPES.BOOL],showConfirmationDialog:[10,e.TYPES.BOOL],graphPayload:[11,e.TYPES.STRING],identifierName:[12,e.TYPES.STRING],threadId:[13,e.TYPES.STRING],hideCtaInFallback:[14,e.TYPES.BOOL],ctxAdConversationStarterInfo:[15,e.TYPES.STRING],fbmUri:[16,e.TYPES.STRING],initiatorUserId:[17,e.TYPES.STRING]},M.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate",M.internalSpec={senderName:[1,e.TYPES.STRING],muteManagementAdminTextType:[2,e.TYPES.STRING],gameName:[3,e.TYPES.STRING]},w.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted",w.internalSpec={otherUserName:[1,e.TYPES.STRING],isTurnOnCohort:[2,e.TYPES.STRING],userWhoAcceptedFriendRequest:[3,e.TYPES.STRING]},A.name="MiTransportAdminMessage$XmatDisappearingSetting",A.internalSpec={disappearingSettingTime:[1,e.TYPES.INT64],oldDisappearingSettingTime:[2,e.TYPES.INT64],disappearingSettingActorFbid:[3,e.TYPES.INT64],newEphemeralityType:[4,e.TYPES.INT64],oldEphemeralityType:[5,e.TYPES.INT64]},F.name="MiTransportAdminMessage$LimitSharingChanged",F.internalSpec={sharingType:[1,e.TYPES.ENUM,u]},O.name="MiTransportAdminMessage$DisappearingSettingChanged",O.internalSpec={disappearingSettingDurationSeconds:[1,e.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,e.TYPES.INT32]},B.name="MiTransportAdminMessage$IconChanged",B.internalSpec={threadIcon:[1,e.TYPES.STRING]},W.name="MiTransportAdminMessage$LinkCta",W.internalSpec={ukOsaAdminText:[1,e.TYPES.MESSAGE,q],__oneofs__:{content:["ukOsaAdminText"]}},q.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText",q.internalSpec={initiatorUserId:[2,e.TYPES.STRING]},U.name="MiTransportAdminMessage$QuickReactionChanged",U.internalSpec={emojiName:[1,e.TYPES.STRING]},V.name="MiTransportAdminMessage$GroupImageChanged",V.internalSpec={action:[1,e.TYPES.ENUM,c]},H.name="MiTransportAdminMessage$MessagePinned",H.internalSpec={action:[1,e.TYPES.ENUM,d]},G.name="MiTransportAdminMessage$GroupMembershipAddModeChanged",G.internalSpec={mode:[1,e.TYPES.ENUM,m]},z.name="MiTransportAdminMessage$GroupNameChanged",z.internalSpec={groupName:[1,e.TYPES.STRING]},j.name="MiTransportAdminMessage$GroupAdminChanged",j.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,p]},K.name="MiTransportAdminMessage$GroupParticipantChanged",K.internalSpec={targetUserId:[1,e.FLAGS.REPEATED|e.TYPES.STRING],action:[2,e.TYPES.ENUM,_]},Q.name="MiTransportAdminMessage$NicknameChanged",Q.internalSpec={targetUserId:[1,e.TYPES.STRING],nickname:[2,e.TYPES.STRING]},X.name="MiTransportAdminMessage$ChatThemeChanged",X.internalSpec={themeName:[1,e.TYPES.STRING],themeEmoji:[2,e.TYPES.STRING],themeType:[3,e.TYPES.INT32]},l.MiTransportAdminMessage$LimitSharingChanged$SharingType=u,l.MiTransportAdminMessage$GroupImageChanged$Action=c,l.MiTransportAdminMessage$MessagePinned$Action=d,l.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=m,l.MiTransportAdminMessage$GroupAdminChanged$Action=p,l.MiTransportAdminMessage$GroupParticipantChanged$Action=_,l.MiTransportAdminMessageSpec=f,l.MiTransportAdminMessage$XmatGenAITaskAddSpec=g,l.MiTransportAdminMessage$XmatUnpinMessageV2Spec=h,l.MiTransportAdminMessage$XmatPinMessageV2Spec=y,l.MiTransportAdminMessage$XmatUpdatePaymentsSpec=C,l.MiTransportAdminMessage$XmatThreadQuickReactionSpec=b,l.MiTransportAdminMessage$XmatThreadNicknameSpec=v,l.MiTransportAdminMessage$XmatThreadIconSpec=S,l.MiTransportAdminMessage$XmatThemeColorSpec=R,l.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=L,l.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=E,l.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=k,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=I,l.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=T,l.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=D,l.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=x,l.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=$,l.MiTransportAdminMessage$XmatMagicWordsSpec=P,l.MiTransportAdminMessage$XmatLinkCTASpec=N,l.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=M,l.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=w,l.MiTransportAdminMessage$XmatDisappearingSettingSpec=A,l.MiTransportAdminMessage$LimitSharingChangedSpec=F,l.MiTransportAdminMessage$DisappearingSettingChangedSpec=O,l.MiTransportAdminMessage$IconChangedSpec=B,l.MiTransportAdminMessage$LinkCtaSpec=W,l.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=q,l.MiTransportAdminMessage$QuickReactionChangedSpec=U,l.MiTransportAdminMessage$GroupImageChangedSpec=V,l.MiTransportAdminMessage$MessagePinnedSpec=H,l.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=G,l.MiTransportAdminMessage$GroupNameChangedSpec=z,l.MiTransportAdminMessage$GroupAdminChangedSpec=j,l.MiTransportAdminMessage$GroupParticipantChangedSpec=K,l.MiTransportAdminMessage$NicknameChangedSpec=Q,l.MiTransportAdminMessage$ChatThemeChangedSpec=X}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2}),u=n("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3}),c=n("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2}),d={},m={},p={},_={},f={};d.name="TransportEvent",d.internalSpec={placeholder:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],event:[2,e.TYPES.MESSAGE,m],__oneofs__:{content:["placeholder","event"]}},m.name="TransportEvent$Event",m.internalSpec={deviceChange:[1,e.TYPES.MESSAGE,_],icdcAlert:[2,e.TYPES.MESSAGE,p],__oneofs__:{event:["deviceChange","icdcAlert"]}},p.name="TransportEvent$Event$IcdcAlert",p.internalSpec={type:[1,e.TYPES.ENUM,s]},_.name="TransportEvent$Event$DeviceChange",_.internalSpec={type:[1,e.TYPES.ENUM,u],deviceName:[2,e.TYPES.STRING],devicePlatform:[3,e.TYPES.STRING],deviceModel:[4,e.TYPES.STRING]},f.name="TransportEvent$Placeholder",f.internalSpec={type:[1,e.TYPES.ENUM,c]},l.TransportEvent$Event$IcdcAlert$Type=s,l.TransportEvent$Event$DeviceChange$Type=u,l.TransportEvent$Placeholder$Type=c,l.TransportEventSpec=d,l.TransportEvent$EventSpec=m,l.TransportEvent$Event$IcdcAlertSpec=p,l.TransportEvent$Event$DeviceChangeSpec=_,l.TransportEvent$PlaceholderSpec=f}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={SMALL:1,MEDIUM:2,LARGE:3},c={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5},d={NONE:0,VIDEO:1},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={},P={},N={},M={},w={},A={},F={},O={},B={},W={},q={},U={},V={},H={};m.name="ConsumerApplication",m.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,p],metadata:[2,e.TYPES.MESSAGE,f]},p.name="ConsumerApplication$Payload",p.internalSpec={content:[1,e.TYPES.MESSAGE,y],applicationData:[2,e.TYPES.MESSAGE,h],signal:[3,e.TYPES.MESSAGE,g],subProtocol:[4,e.TYPES.MESSAGE,_],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}},_.name="ConsumerApplication$SubProtocolPayload",_.internalSpec={futureProof:[1,e.TYPES.ENUM,(s=o("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]},f.name="ConsumerApplication$Metadata",f.internalSpec={specialTextSize:[1,e.TYPES.ENUM,u]},g.name="ConsumerApplication$Signal",g.internalSpec={},h.name="ConsumerApplication$ApplicationData",h.internalSpec={revoke:[1,e.TYPES.MESSAGE,I],__oneofs__:{applicationContent:["revoke"]}},y.name="ConsumerApplication$Content",y.internalSpec={messageText:[1,e.TYPES.MESSAGE,s.MessageTextSpec],imageMessage:[2,e.TYPES.MESSAGE,W],contactMessage:[3,e.TYPES.MESSAGE,P],locationMessage:[4,e.TYPES.MESSAGE,w],extendedTextMessage:[5,e.TYPES.MESSAGE,M],statusTextMessage:[6,e.TYPES.MESSAGE,N],documentMessage:[7,e.TYPES.MESSAGE,F],audioMessage:[8,e.TYPES.MESSAGE,B],videoMessage:[9,e.TYPES.MESSAGE,O],contactsArrayMessage:[10,e.TYPES.MESSAGE,$],liveLocationMessage:[11,e.TYPES.MESSAGE,x],stickerMessage:[12,e.TYPES.MESSAGE,A],groupInviteMessage:[13,e.TYPES.MESSAGE,D],viewOnceMessage:[14,e.TYPES.MESSAGE,T],reactionMessage:[16,e.TYPES.MESSAGE,k],pollCreationMessage:[17,e.TYPES.MESSAGE,L],pollUpdateMessage:[18,e.TYPES.MESSAGE,R],editMessage:[19,e.TYPES.MESSAGE,C],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}},C.name="ConsumerApplication$EditMessage",C.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],message:[2,e.TYPES.MESSAGE,s.MessageTextSpec],timestampMs:[3,e.TYPES.INT64]},b.name="ConsumerApplication$PollAddOptionMessage",b.internalSpec={pollOption:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E]},v.name="ConsumerApplication$PollVoteMessage",v.internalSpec={selectedOptions:[1,e.FLAGS.REPEATED|e.TYPES.BYTES],senderTimestampMs:[2,e.TYPES.INT64]},S.name="ConsumerApplication$PollEncValue",S.internalSpec={encPayload:[1,e.TYPES.BYTES],encIv:[2,e.TYPES.BYTES]},R.name="ConsumerApplication$PollUpdateMessage",R.internalSpec={pollCreationMessageKey:[1,e.TYPES.MESSAGE,s.MessageKeySpec],vote:[2,e.TYPES.MESSAGE,S],addOption:[3,e.TYPES.MESSAGE,S]},L.name="ConsumerApplication$PollCreationMessage",L.internalSpec={encKey:[1,e.TYPES.BYTES],name:[2,e.TYPES.STRING],options:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,E],selectableOptionsCount:[4,e.TYPES.UINT32]},E.name="ConsumerApplication$Option",E.internalSpec={optionName:[1,e.TYPES.STRING]},k.name="ConsumerApplication$ReactionMessage",k.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec],text:[2,e.TYPES.STRING],groupingKey:[3,e.TYPES.STRING],senderTimestampMs:[4,e.TYPES.INT64],reactionMetadataDataclassData:[5,e.TYPES.STRING],style:[6,e.TYPES.INT32]},I.name="ConsumerApplication$RevokeMessage",I.internalSpec={key:[1,e.TYPES.MESSAGE,s.MessageKeySpec]},T.name="ConsumerApplication$ViewOnceMessage",T.internalSpec={imageMessage:[1,e.TYPES.MESSAGE,W],videoMessage:[2,e.TYPES.MESSAGE,O],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}},D.name="ConsumerApplication$GroupInviteMessage",D.internalSpec={groupJid:[1,e.TYPES.STRING],inviteCode:[2,e.TYPES.STRING],inviteExpiration:[3,e.TYPES.INT64],groupName:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],caption:[6,e.TYPES.MESSAGE,s.MessageTextSpec]},x.name="ConsumerApplication$LiveLocationMessage",x.internalSpec={location:[1,e.TYPES.MESSAGE,V],accuracyInMeters:[2,e.TYPES.UINT32],speedInMps:[3,e.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,e.TYPES.UINT32],caption:[5,e.TYPES.MESSAGE,s.MessageTextSpec],sequenceNumber:[6,e.TYPES.INT64],timeOffset:[7,e.TYPES.UINT32]},$.name="ConsumerApplication$ContactsArrayMessage",$.internalSpec={displayName:[1,e.TYPES.STRING],contacts:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,P]},P.name="ConsumerApplication$ContactMessage",P.internalSpec={contact:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},N.name="ConsumerApplication$StatusTextMesage",N.internalSpec={text:[1,e.TYPES.MESSAGE,M],textArgb:[6,e.TYPES.FIXED32],backgroundArgb:[7,e.TYPES.FIXED32],font:[8,e.TYPES.ENUM,c]},M.name="ConsumerApplication$ExtendedTextMessage",M.internalSpec={text:[1,e.TYPES.MESSAGE,s.MessageTextSpec],matchedText:[2,e.TYPES.STRING],canonicalUrl:[3,e.TYPES.STRING],description:[4,e.TYPES.STRING],title:[5,e.TYPES.STRING],thumbnail:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],previewType:[7,e.TYPES.ENUM,d]},w.name="ConsumerApplication$LocationMessage",w.internalSpec={location:[1,e.TYPES.MESSAGE,V],address:[2,e.TYPES.STRING]},A.name="ConsumerApplication$StickerMessage",A.internalSpec={sticker:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},F.name="ConsumerApplication$DocumentMessage",F.internalSpec={document:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],fileName:[2,e.TYPES.STRING]},O.name="ConsumerApplication$VideoMessage",O.internalSpec={video:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},B.name="ConsumerApplication$AudioMessage",B.internalSpec={audio:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],ptt:[2,e.TYPES.BOOL]},W.name="ConsumerApplication$ImageMessage",W.internalSpec={image:[1,e.TYPES.MESSAGE,s.SubProtocolSpec],caption:[2,e.TYPES.MESSAGE,s.MessageTextSpec]},q.name="ConsumerApplication$InteractiveAnnotation",q.internalSpec={polygonVertices:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,U],location:[2,e.TYPES.MESSAGE,V],__oneofs__:{action:["location"]}},U.name="ConsumerApplication$Point",U.internalSpec={x:[1,e.TYPES.DOUBLE],y:[2,e.TYPES.DOUBLE]},V.name="ConsumerApplication$Location",V.internalSpec={degreesLatitude:[1,e.TYPES.DOUBLE],degreesLongitude:[2,e.TYPES.DOUBLE],name:[3,e.TYPES.STRING]},H.name="ConsumerApplication$MediaPayload",H.internalSpec={protocol:[1,e.TYPES.MESSAGE,s.SubProtocolSpec]},l.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=u,l.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=c,l.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=d,l.ConsumerApplicationSpec=m,l.ConsumerApplication$PayloadSpec=p,l.ConsumerApplication$SubProtocolPayloadSpec=_,l.ConsumerApplication$MetadataSpec=f,l.ConsumerApplication$SignalSpec=g,l.ConsumerApplication$ApplicationDataSpec=h,l.ConsumerApplication$ContentSpec=y,l.ConsumerApplication$EditMessageSpec=C,l.ConsumerApplication$PollAddOptionMessageSpec=b,l.ConsumerApplication$PollVoteMessageSpec=v,l.ConsumerApplication$PollEncValueSpec=S,l.ConsumerApplication$PollUpdateMessageSpec=R,l.ConsumerApplication$PollCreationMessageSpec=L,l.ConsumerApplication$OptionSpec=E,l.ConsumerApplication$ReactionMessageSpec=k,l.ConsumerApplication$RevokeMessageSpec=I,l.ConsumerApplication$ViewOnceMessageSpec=T,l.ConsumerApplication$GroupInviteMessageSpec=D,l.ConsumerApplication$LiveLocationMessageSpec=x,l.ConsumerApplication$ContactsArrayMessageSpec=$,l.ConsumerApplication$ContactMessageSpec=P,l.ConsumerApplication$StatusTextMesageSpec=N,l.ConsumerApplication$ExtendedTextMessageSpec=M,l.ConsumerApplication$LocationMessageSpec=w,l.ConsumerApplication$StickerMessageSpec=A,l.ConsumerApplication$DocumentMessageSpec=F,l.ConsumerApplication$VideoMessageSpec=O,l.ConsumerApplication$AudioMessageSpec=B,l.ConsumerApplication$ImageMessageSpec=W,l.ConsumerApplication$InteractiveAnnotationSpec=q,l.ConsumerApplication$PointSpec=U,l.ConsumerApplication$LocationSpec=V,l.ConsumerApplication$MediaPayloadSpec=H}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2},c={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={};d.name="MessageApplication",d.internalSpec={payload:[1,(e=o("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,e.TYPES.MESSAGE,m]},m.name="MessageApplication$Metadata",m.internalSpec={forwardingScore:[5,e.TYPES.UINT32],isForwarded:[6,e.TYPES.BOOL],businessMetadata:[7,e.TYPES.MESSAGE,(s=o("WACommon.pb")).SubProtocolSpec],frankingKey:[8,e.TYPES.BYTES],frankingVersion:[9,e.TYPES.INT32],quotedMessage:[10,e.TYPES.MESSAGE,p],threadType:[11,e.TYPES.ENUM,u],readonlyMetadataDataclass:[12,e.TYPES.STRING],groupId:[13,e.TYPES.STRING],groupSize:[14,e.TYPES.UINT32],groupIndex:[15,e.TYPES.UINT32],botResponseId:[16,e.TYPES.STRING],collapsibleId:[17,e.TYPES.STRING],secondaryOtid:[18,e.TYPES.STRING],chatEphemeralSetting:[1,e.TYPES.MESSAGE,b],ephemeralSettingList:[2,e.TYPES.MESSAGE,_],ephemeralSharedSecret:[3,e.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}},p.name="MessageApplication$Metadata$QuotedMessage",p.internalSpec={stanzaId:[1,e.TYPES.STRING],remoteJid:[2,e.TYPES.STRING],participant:[3,e.TYPES.STRING],payload:[4,e.TYPES.MESSAGE,f]},_.name="MessageApplication$Metadata$EphemeralSettingMap",_.internalSpec={chatJid:[1,e.TYPES.STRING],ephemeralSetting:[2,e.TYPES.MESSAGE,b]},f.name="MessageApplication$Payload",f.internalSpec={coreContent:[1,e.TYPES.MESSAGE,C],signal:[2,e.TYPES.MESSAGE,y],applicationData:[3,e.TYPES.MESSAGE,h],subProtocol:[4,e.TYPES.MESSAGE,g],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}},g.name="MessageApplication$SubProtocolPayload",g.internalSpec={futureProof:[1,e.TYPES.ENUM,s.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,e.TYPES.MESSAGE,s.SubProtocolSpec],businessMessage:[3,e.TYPES.MESSAGE,s.SubProtocolSpec],paymentMessage:[4,e.TYPES.MESSAGE,s.SubProtocolSpec],multiDevice:[5,e.TYPES.MESSAGE,s.SubProtocolSpec],voip:[6,e.TYPES.MESSAGE,s.SubProtocolSpec],armadillo:[7,e.TYPES.MESSAGE,s.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}},h.name="MessageApplication$ApplicationData",h.internalSpec={},y.name="MessageApplication$Signal",y.internalSpec={},C.name="MessageApplication$Content",C.internalSpec={},b.name="MessageApplication$EphemeralSetting",b.internalSpec={ephemeralExpiration:[2,e.TYPES.UINT32],ephemeralSettingTimestamp:[3,e.TYPES.INT64],ephemeralityType:[5,e.TYPES.ENUM,c],isEphemeralSettingReset:[4,e.TYPES.BOOL]},l.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=u,l.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=c,l.MessageApplicationSpec=d,l.MessageApplication$MetadataSpec=m,l.MessageApplication$Metadata$QuotedMessageSpec=p,l.MessageApplication$Metadata$EphemeralSettingMapSpec=_,l.MessageApplication$PayloadSpec=f,l.MessageApplication$SubProtocolPayloadSpec=g,l.MessageApplication$ApplicationDataSpec=h,l.MessageApplication$SignalSpec=y,l.MessageApplication$ContentSpec=C,l.MessageApplication$EphemeralSettingSpec=b}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.payload;if(a==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(o("decodeProtobuf").getUnknownFields(e.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};var i=a.subProtocol;if(i==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(o("decodeProtobuf").getUnknownFields(i)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:i.futureProof};var l=[],s=(t=e.payload)==null||(t=t.subProtocol)==null?void 0:t.consumerMessage,u=(n=e.payload)==null||(n=n.subProtocol)==null?void 0:n.armadillo,c=(r=e.payload)==null||(r=r.subProtocol)==null?void 0:r.multiDevice;if(s!=null){if(s.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};l.push({payload:new Uint8Array(s.payload),type:"success",subprotocolType:"consumerMessage"})}if(u!=null){if(u.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};l.push({payload:new Uint8Array(u.payload),type:"success",subprotocolType:"armadillo"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};l.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"multiDevice"})}return l.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+l.length}:l[0]}l.parseMessageApplication=e}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}function s(e){return e instanceof ArrayBuffer?e:o("WAByteArray").uint8ArrayToBuffer(e)}var u=function(t){var e;this.kind="imageTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(e=t.image)==null?void 0:e.payload)},c=function(t){var e;this.kind="audioTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(e=t.audio)==null?void 0:e.payload),this.ptt=t.ptt},d=function(t){var e;this.kind="videoTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(e=t.video)==null?void 0:e.payload),this.caption=t.caption},m=function(t){var e;this.kind="documentTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(e=t.document)==null?void 0:e.payload),this.fileName=t.fileName},p=function(t){var e;this.kind="stickerTransport",this.payload=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(e=t.sticker)==null?void 0:e.payload)},_=function(t){var e=this,n;this.kind="extendedContentMessage",this.favicon=(n=r("memoize"))(function(){var t,n;return((t=e.payload)==null||(t=t.favicon)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.favicon)==null?void 0:n.payload)}),this.headerImage=n(function(){var t,n;return((t=e.payload)==null||(t=t.headerImage)==null?void 0:t.payload)==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(n=e.payload)==null||(n=n.headerImage)==null?void 0:n.payload)}),this.previews=n(function(){var t,n;return(t=(n=e.payload)==null||(n=n.previews)==null?void 0:n.map(function(e){return o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,e.payload)}))!=null?t:[]}),this.associatedMessage=n(function(){var t=e.payload.associatedMessage;return(t==null?void 0:t.payload)==null?null:new y(t.payload)}),this.payload=t},f=function(t){var e=this;this.stickerContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.stickerContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,n.payload)}),this.videoContent=r("memoize")(function(){var t,n=(t=e.payload)==null?void 0:t.videoContent;return n==null?null:o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,n.payload)}),this.payload=t},g=(function(){function e(e){this.kind="armadillo",this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.extendedContentMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},t.noteReply=function(){var e,t=(e=this.payload)==null||(e=e.content)==null?void 0:e.noteReplyMessage;return t==null?null:new f(t)},t.paymentsTransactionMessage=function(){var e,t=(e=this.payload)==null||(e=e.content)==null||(e=e.paymentsTransactionMessage)==null?void 0:e.extendedContentMessage;return t==null?null:new _(t)},e})(),h=(function(){function e(e){var t=this,n;this.kind="consumerApplication",this.imageMessage=(n=r("memoize"))(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.imageMessage;if(n!=null)return new u(n)}),this.audioMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.audioMessage;if(n!=null)return new c(n)}),this.videoMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.videoMessage;if(n!=null)return new d(n)}),this.documentMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.documentMessage;if(n!=null)return new m(n)}),this.stickerMessage=n(function(){var e,n=(e=t.payload)==null||(e=e.content)==null?void 0:e.stickerMessage;if(n!=null)return new p(n)}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,e),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var t=e.prototype;return t.attachmentMessage=function(){var e,t,n,r;return(e=(t=(n=(r=this.imageMessage())!=null?r:this.audioMessage())!=null?n:this.videoMessage())!=null?t:this.documentMessage())!=null?e:this.stickerMessage()},e})(),y=(function(){function e(e){var t=this;this.kind="messageApplication",this.subProtocol=r("memoize")(function(){var e=o("WAParseMessageApplication").parseMessageApplication(t.proto);if(e.payload!=null){var n=e.payload;switch(e.subprotocolType){case"consumerMessage":return new h(n);case"armadillo":return new g(n);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:e.subprotocolType}}}),this.bytes=s(e),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e)}var t=e.prototype;return t.consumerMessage=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="consumerApplication"?null:e},t.armadillo=function(){var e=this.subProtocol();return(e==null?void 0:e.kind)!=="armadillo"?null:e},e})(),C=function(t){this.kind="transportEvent",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,t)},b=function(t){this.kind="locallyTransformedMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,t)},v=function(t){this.kind="adminMessage",this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,t)},S="SKIP_CACHE",R=(function(){function e(e,t){var n=this;this.payload=r("memoize")(function(){if(n.proto.encryptedTransportEvent!=null)return new C(r("nullthrows")(n.proto.encryptedTransportEvent.payload));if(n.proto.encryptedTransportLocallyTransformedMessage!=null)return new b(r("nullthrows")(n.proto.encryptedTransportLocallyTransformedMessage.payload));if(n.proto.encryptedTransportMessage!=null)return new y(r("nullthrows")(n.proto.encryptedTransportMessage));if(n.proto.miTransportAdminMessage!=null)return new v(r("nullthrows")(n.proto.miTransportAdminMessage.payload));throw r("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")}),this.proto=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e)}var t=e.prototype;return t.encryptedTransportMessage=function(){var e=this.payload();if(e.kind==="messageApplication")return e},t.encryptedTransportEvent=function(){var e=this.payload();if(e.kind==="transportEvent")return e},t.locallyTransformedMessage=function(){var e=this.payload();if(e.kind==="locallyTransformedMessage")return e},t.adminMessage=function(){var e=this.payload();if(e.kind==="adminMessage")return e},e})();R.create=r("memoizeWithArgsWeak")(function(e){return new R(e,S)}),l.DeserializedImageMessage=u,l.DeserializedAudioMessage=c,l.DeserializedVideoMessage=d,l.DeserializedDocumentMessage=m,l.DeserializedStickerMessage=p,l.DeserializedExtendedContentMessage=_,l.DeserializedNoteReply=f,l.DeserializedArmadilloApplication=g,l.DeserializedConsumerApplication=h,l.DeserializedMessageApplication=y,l.DeserializedTransportEvent=C,l.DeserializedLocallyTransformedMessage=b,l.DeserializedAdminMessage=v,l.DeserializedBackupMessage=R}),98);
__d("MAWWriteLimitSharingAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r;return t?(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED?[e]:[]):(n=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED,r=n===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED?[e]:[]),{adminMsgContent:r,adminType:n,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWritePinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_PINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e===o("MAWCurrentUser").getID(),r=n?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a=[];return r===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?a.push(t):a.push(e,t),{adminMsgContent:a,adminType:r,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("MAWCurrentUser").getID(),a=e===r&&e!==t,i=t===r&&t!==e,l=t===e&&r===t,s=t===e&&r!==t,u;l&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:l&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:s&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:s&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:a&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:a&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:i&&n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:i&&n.length===0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:n.length>0?u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:u=o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;var c=[];switch(u){case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:c.push(t,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:c.push(e,n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:c.push(n);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:c.push(t);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:c.push(e);break;case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:c.push(e,t,n);break;default:break}return{adminMsgContent:c,adminType:u,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteThreadPhotoCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MessengerThreadThemeType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({COLOR_GRADIENT:1,THEME:2,THIRD_PARTY:3,INTERACTIVE:4,IGD_CHANNEL_CUSTOMIZED_THEME:5,AI_AGENT:6,AI_GENERATED_THEME:7,AI_STUDIO_GENERATED_THEME:8,AI_INTERACTIVE_THEME:9,AI_INTERACTIVE_THEME_GENERATED:10,MSGR_CUSTOM_THEME:11,AI_SCROLLABLE_THEME:12}),l=e;i.default=l}),66);
__d("MAWWriteThreadThemeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser","MessengerThreadThemeType","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r){var a=e===o("MAWCurrentUser").getID(),i=u(a,r),l=[];return i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME||i===o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME?l.push(n):l.push(e,n),t!=null&&l.push(t),{adminMsgContent:l,adminType:i,version:1}}function u(t,n){if(n!=null)try{var a=r("MessengerThreadThemeType").cast(parseInt(n,10))===7;if(a)return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert theme type to integer: ",""])),t)}return t?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_THEME}l.getAdminMsgContent=s}),98);
__d("MAWWriteUKOSAAdminMsgContent",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MAWAdminMsgType").ADMIN_MSG_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE,n=[e];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MAWWriteUnpinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===o("MAWCurrentUser").getID()?o("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_UNPINNED_MESSAGE:o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE,n=t===o("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[e]:[];return{adminMsgContent:n,adminType:t,version:1}}l.getAdminMsgContent=e}),98);
__d("MWXMAV2IsCollapsibleXMA",["MWXMAV2IsDataclassLiveLocationXMA"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;return!(e==null||((t=e.layout_config)==null?void 0:t.collapsible_id)==null&&!o("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(e))}l.isCollapsibleXMA=e}),98);
__d("MpsAdminMsgToBridge",["FBLogger","MAWAckLevel","MAWAdminAddParticipantMsg","MAWAdminMsgHelpers","MAWAdminRemoveParticipantMsg","MAWAdminWriteGroupNameChangeAdminMsgContent","MAWEphemeralUtils","MAWJids","MAWWriteLimitSharingAdminMsgContent","MAWWritePinMessageAdminMsgContent","MAWWriteThreadHotlikeCustomizationAdminMsgContent","MAWWriteThreadNicknameCustomizationAdminMsgContent","MAWWriteThreadPhotoCustomizationAdminMsgContent","MAWWriteThreadThemeCustomizationAdminMsgContent","MAWWriteUKOSAAdminMsgContent","MAWWriteUnpinMessageAdminMsgContent","WAArmadilloMiTransportAdminMessage.pb","WAMsgType","err","getErrorSafe","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["$$unknownFieldCount","skipBumpThread","skipSnippetUpdate"],s=["type"],u=["type"],c=["type"],d=["type"],m=["type"],p=["type"],_=["type"],f=["type"],g=["type"],h=["type"],y=["type"],C=["type"],b=["type"],v=["type"],S=["type"],R=["type"],L=["type"],E=["type"],k=["type"],I=["type"];function T(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.emojiName,"emojiName is null"))}function D(e,t){return o("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.threadIcon,"threadIcon is null"))}function x(e,t){var n;return o("MAWWriteThreadThemeCustomizationAdminMsgContent").getAdminMsgContent(e,t.themeEmoji,r("nullthrows")(t.themeName,"themeName is null"),""+((n=t.themeType)!=null?n:""))}function $(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED?o("MAWWritePinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED?o("MAWWriteUnpinMessageAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNSET||t.action===null||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function P(e,t){return o("MAWWriteThreadNicknameCustomizationAdminMsgContent").getAdminMsgContent(e,r("nullthrows")(t.targetUserId,"targetUserId is null"),r("nullthrows")(t.nickname,"nickname is null"))}function N(e){var t;return o("MAWWriteUKOSAAdminMsgContent").getAdminMsgContent(r("nullthrows")((t=e.ukOsaAdminText)==null?void 0:t.initiatorUserId,"initiatorUserId is null"))}function M(e,t){var n,r;return o("MAWEphemeralUtils").getEphemeralSettingChangeData(o("MAWJids").toUserJid(e),(n=t.disappearingSettingDurationSeconds)!=null?n:0,((r=t.oldDisappearingSettingDurationSeconds)!=null?r:0)===0,!1)}function w(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.CHANGED||t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.REMOVED?o("MAWWriteThreadPhotoCustomizationAdminMsgContent").getAdminMsgContent(e):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupImageChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function A(e,t){return t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!0):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED?o("MAWWriteLimitSharingAdminMsgContent").getAdminMsgContent(e,!1):t.sharingType===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET||t.sharingType===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.sharingType)})()}function F(e,t){return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.ADDED?o("MAWAdminAddParticipantMsg").createAddParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.REMOVED?o("MAWAdminRemoveParticipantMsg").createRemoveParticipantsAdminMessage(o("MAWJids").toUserJid(e),(t.targetUserId||[]).map(function(e){return o("MAWJids").toUserJid(e)})):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupParticipantChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function O(e,t){return o("MAWAdminWriteGroupNameChangeAdminMsgContent").getAdminMsgContent(o("MAWJids").toUserJid(e),r("nullthrows")(t.groupName))}function B(e,t){var n,a;return t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.ADDED?o("MAWAdminMsgHelpers").createParticipantPromoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((n=t.targetUserId)==null?void 0:n[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.REMOVED?o("MAWAdminMsgHelpers").createParticipantDemoteAdminMessage(o("MAWJids").toUserJid(r("nullthrows")((a=t.targetUserId)==null?void 0:a[0])),o("MAWJids").toUserJid(e)):t.action===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupAdminChanged$Action.UNSET||t.action===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.action)})()}function W(e,t){return t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ADMINS_ONLY?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"admin_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.ALL_MEMBERS?o("MAWAdminMsgHelpers").createMemberAddModeChangeAdminMessage(o("MAWJids").toUserJid(e),"all_member_add"):t.mode===o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode.UNSET||t.mode===void 0?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t.mode)})()}function q(e,t){return M(e,{disappearingSettingDurationSeconds:t.disappearingSettingTime!=null?Number(t.disappearingSettingTime):0,oldDisappearingSettingDurationSeconds:t.oldDisappearingSettingTime!=null?Number(t.oldDisappearingSettingTime):0})}function U(e){return e.initiatorUserId!=null?N({ukOsaAdminText:{initiatorUserId:e.initiatorUserId}}):null}function V(e,t){return A(e,{sharingType:t.limitSharingType==="disabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.DISABLED:t.limitSharingType==="enabled"?o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.ENABLED:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$LimitSharingChanged$SharingType.UNSET})}function H(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED})}function G(e){return $(e,{action:o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.UNPINNED})}function z(e,t){return x(e,{themeEmoji:t.themeEmoji,themeName:t.themeNameWithSubtitle,themeType:t.themeType})}function j(e,t){return t.threadIcon!=null?D(e,{threadIcon:t.threadIcon}):null}function K(e,t){return t.participantId!=null&&t.nickname!=null?P(e,{nickname:t.nickname,targetUserId:""+t.participantId}):null}function Q(e,t){return t.threadQuickReactionEmoji!=null?T(e,{emojiName:t.threadQuickReactionEmoji}):null}function X(e){var t=Object.keys(e);if(t.length!==1)throw r("err")("Expected exactly one key");var n=t[0];return babelHelpers.extends({type:n},e[n])}function Y(t,n){var r=n.$$unknownFieldCount,o=n.skipBumpThread,a=n.skipSnippetUpdate,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=X(i);return(function(e){if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="quickReactionChanged"){var n=e.type,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return T(t,r)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="iconChanged"){var o=e.type,a=babelHelpers.objectWithoutPropertiesLoose(e,u);return D(t,a)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="chatThemeChanged"){var i=e.type,l=babelHelpers.objectWithoutPropertiesLoose(e,c);return x(t,l)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="messagePinned"){var X=e.type,Y=babelHelpers.objectWithoutPropertiesLoose(e,d);return $(t,Y)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="nicknameChanged"){var J=e.type,Z=babelHelpers.objectWithoutPropertiesLoose(e,m);return P(t,Z)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="linkCta"){var ee=e.type,te=babelHelpers.objectWithoutPropertiesLoose(e,p);return N(te)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="disappearingSettingChanged"){var ne=e.type,re=babelHelpers.objectWithoutPropertiesLoose(e,_);return M(t,re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupImageChanged"){var oe=e.type,ae=babelHelpers.objectWithoutPropertiesLoose(e,f);return w(t,ae)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="limitSharingChanged"){var ie=e.type,le=babelHelpers.objectWithoutPropertiesLoose(e,g);return A(t,le)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupParticipantChanged"){var se=e.type,ue=babelHelpers.objectWithoutPropertiesLoose(e,h);return F(t,ue)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupNameChanged"){var ce=e.type,de=babelHelpers.objectWithoutPropertiesLoose(e,y);return O(t,de)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupAdminChanged"){var me=e.type,pe=babelHelpers.objectWithoutPropertiesLoose(e,C);return B(t,pe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="groupMembershipAddModeChanged"){var _e=e.type,fe=babelHelpers.objectWithoutPropertiesLoose(e,b);return W(t,fe)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatDisappearingSetting"){var ge=e.type,he=babelHelpers.objectWithoutPropertiesLoose(e,v);return q(t,he)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatLinkCta"){var ye=e.type,Ce=babelHelpers.objectWithoutPropertiesLoose(e,S);return U(Ce)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessagingLimitSharing"){var be=e.type,ve=babelHelpers.objectWithoutPropertiesLoose(e,R);return V(t,ve)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatPinMessageV2")return H(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUnpinMessageV2")return G(t);if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThemeColor"){var Se=e.type,Re=babelHelpers.objectWithoutPropertiesLoose(e,L);return z(t,Re)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadIcon"){var Le=e.type,Ee=babelHelpers.objectWithoutPropertiesLoose(e,E);return j(t,Ee)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadNickname"){var ke=e.type,Ie=babelHelpers.objectWithoutPropertiesLoose(e,k);return K(t,Ie)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatThreadQuickReaction"){var Te=e.type,De=babelHelpers.objectWithoutPropertiesLoose(e,I);return Q(t,De)}if((typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatFriendRequestConfirmedEncrypted"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatInstantGameEncryptedDynamicCustomUpdate"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMagicWords"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerQrCodeScanned"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumAddition"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumContentRemoval"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumDeletion"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbumRename"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatMessengerSharedAlbum"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatGenaiTaskAdd"||(typeof e=="object"&&e!==null||typeof e=="function")&&e.type==="xmatUpdatePayments")return null;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})(l)}function J(e){var t,n,a,i,l=(t=e.deserialize().adminMessage())==null?void 0:t.proto;if(l!=null){var s;try{s=Y(e.message.senderId,l)}catch(e){r("FBLogger")("mps").catching(r("getErrorSafe")(e)).warn("Failed to get admin message content")}var u={ack:o("MAWAckLevel").ACK.received,adminContent:(n=s)==null?void 0:n.adminMsgContent,adminType:(a=s)==null?void 0:a.adminType,adminVersion:(i=s)==null?void 0:i.version,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:u}}}l.getMessageContent=Y,l.adminMsgToBridgeMsg=J}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWJidUtils").formatProtocolMsgIdFromExternalId(o("WAJids").unsafeCoerceToChatJid(e),o("WAStanzaUtils").toStanzaId(t))}function s(e){var t=e.lastIndexOf("."),n=e.substring(0,t),r=e.substring(t+1);return{messageId:o("MpsTypes").toMessageId(r),threadId:o("MpsTypes").toThreadId(n)}}l.mpsToBridgeMsgId=e,l.bridgeMsgIdToMps=s}),98);
__d("MpsBumpMessageToBridgeMsg",["MAWAckLevel","MAWMsgType","MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.bumpExistingMessage;if(i==null||((n=i.key)==null?void 0:n.id)==null||a==null)return null;var l=o("MpsTypes").toMessageId(i.key.id),s={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),replyContent:{isBumpMsg:!0,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(e.message.threadId,l),replyType:"MESSAGE"},replySourceId:(r=i.key)==null?void 0:r.id,sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return{kind:"bridgeMsg",value:s}}l.bumpMessageToBridgeMsg=e}),98);
__d("MpsEditToBridge",["LSMessageSendStatus","MAWDbEditMsgHistory","MAWMpsGating","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(o("MAWDbEditMsgHistory").unsafeCoerceToEditMsgHistoryId(Number(e.getExternalId()))),a=e.topLevelMetadata(),i={author:e.getAuthor(),editExternalId:o("WAStanzaUtils").toStanzaId(e.getExternalId()),editMsgHistoryId:n,editTs:e.getUnixTs(),msgContent:t,originalMsgExternalId:o("WAStanzaUtils").toStanzaId(a.getExternalId()),originalMsgId:a.getMsgId(),sendStatus:r("LSMessageSendStatus").SENDING_TO_SERVER,threadJid:e.getChatJid()};return{kind:"bridgeEditHistoryMsg",value:i}}function s(t){var n,r,a=(n=t.deserialize().encryptedTransportMessage())==null||(n=n.consumerMessage())==null||(n=n.payload)==null||(n=n.content)==null||(n=n.editMessage)==null?void 0:n.message;if(a!=null)return e(t,{commands:a==null?void 0:a.commands,content:((r=a==null?void 0:a.text)!=null?r:"")+(o("MAWMpsGating").isFullMpsEnabled()?" *":""),mentionedJids:a==null?void 0:a.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean)})}function u(t){var n,r,o,a,i=t.supplementals,l=t.topLevel;if(l.kind!=="bridgeMsg")return t;var s=i.map(function(e){return e.kind==="bridgeEditHistoryMsg"?e.value:null}).filter(Boolean).sort(function(e,t){return t.editTs-e.editTs});if(s.length===0)return t;i.push(e(t.message,{commands:l.value.commands&&[].concat(l.value.commands),content:(n=l.value.content)!=null?n:"",mentionedJids:l.value.mentionedJids&&[].concat(l.value.mentionedJids)}));var u=s[0].msgContent;return l.value=babelHelpers.extends({},l.value,{commands:(r=u.commands)!=null?r:l.value.commands,content:(o=u.content)!=null?o:l.value.content,editCount:s.length,mentionedJids:(a=u.mentionedJids)!=null?a:l.value.mentionedJids}),babelHelpers.extends({},t,{supplementals:i,topLevel:l})}l.editMessageToBridgeMsg=s,l.processEditedMessage=u}),98);
__d("MpsEphemeralMessageToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.supplementals,r=e.topLevel,a=(t=e.message.deserialize().encryptedTransportMessage())==null||(t=t.proto.metadata)==null||(t=t.chatEphemeralSetting)==null?void 0:t.ephemeralExpiration;if(a==null||a===0)return e;var i=o("WATimeUtils").castToUnixTime(e.message.getUnixTs()+a),l=o("WATimeUtils").cappedMillisecondsUntil(i);return l<=0?e:(r.kind==="bridgeMsg"&&(r.value=babelHelpers.extends({},r.value,{ephemeralDurationInSec:a})),e.supplementals.push({kind:"bridgeMsgsStartCountdown",value:{msgs:[{countdownTs:i,millisecondsUntilCountdownTs:l,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),babelHelpers.extends({},e,{supplementals:n,topLevel:r}))}l.processEphemeralMessage=e}),98);
__d("MpsForwardToBridge",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o,a,i=e.message,l=e.topLevel,s=i.deserialize().encryptedTransportMessage();return s==null||l.kind!=="bridgeMsg"||((t=s.proto.metadata)==null?void 0:t.isForwarded)!==!0||(l.value=babelHelpers.extends({},l.value,{forwardingScore:(n=(r=s.proto.metadata)==null?void 0:r.forwardingScore)!=null?n:0,isForwarded:(o=(a=s.proto.metadata)==null?void 0:a.isForwarded)!=null?o:!1,replyContent:{replyType:"FORWARD"}})),e}i.processForwarding=e}),66);
__d("MpsFutureproofToBridge",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF};return{kind:"bridgeMsg",value:t}}l.futureproofBridgeMsg=e}),98);
__d("getMediaTypeFromConsumerMessage",["MAWEncodeMediaTransportProtocol","WAMediaTransport.pb","decodeProtobuf","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0||((n=e.ancillary)==null?void 0:n.gifAttribution)!=null;if(r("gkx")("5398")){var i,l=(i=e.integral)==null||(i=i.transport)==null||(i=i.ancillary)==null?void 0:i.mimetype;if(a&&l===o("MAWEncodeMediaTransportProtocol").GIF_MIME_TYPE)return"gif"}else if(a)return"gif";return"video"}function s(t){var n,r=t==null||(n=t.payload)==null?void 0:n.content;if((r==null?void 0:r.audioMessage)!=null)return"ptt";if((r==null?void 0:r.videoMessage)!=null){var a,i=r==null||(a=r.videoMessage)==null||(a=a.video)==null?void 0:a.payload,l=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,i);return e(l)}if((r==null?void 0:r.documentMessage)!=null)return"document";if((r==null?void 0:r.stickerMessage)!=null)return"sticker";if((r==null?void 0:r.imageMessage)!=null)return"image";if((r==null?void 0:r.extendedContentMessage)!=null)return"xma-image"}l.getMediaTypeForVideo=e,l.getMediaTypeFromConsumerMessage=s}),98);
__d("MpsMediaToBridge",["FBLogger","MAWAckLevel","MAWAudioUtils","MAWDbMedia","MAWImageUtils","MAWMsgType","WAHashUtils","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(e.proto);if(t!=null)return s(t)}function s(e){return e==="ptt"?o("MAWMsgType").MSG_TYPE.PTT:e==="image"?o("MAWMsgType").MSG_TYPE.IMAGE:e==="video"?o("MAWMsgType").MSG_TYPE.VIDEO:e==="gif"?o("MAWMsgType").MSG_TYPE.GIF:e==="sticker"?o("MAWMsgType").MSG_TYPE.STICKER:e==="document"?o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:e==="xma-image"?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function u(t){var n,r,a,i=t.deserialize().encryptedTransportMessage(),l=i==null?void 0:i.consumerMessage();if(!(i==null||l==null)){var s=e(l);if(s!=null){var u={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),externalId:t.getExternalId(),forwardingScore:0,groupId:(n=i.proto.metadata)==null?void 0:n.groupId,groupIndex:(r=i.proto.metadata)==null?void 0:r.groupIndex,groupSize:(a=i.proto.metadata)==null?void 0:a.groupSize,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:s};return{kind:"bridgeMsg",value:u}}}}function c(e,t,n){var r,a,i={height:n==null||(r=n.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.thumbnailHeight,width:n==null||(a=n.transport)==null||(a=a.ancillary)==null||(a=a.thumbnail)==null?void 0:a.thumbnailWidth},l={height:t==null?void 0:t.height,width:t==null?void 0:t.width};if(e==="Sticker"){var s;i=(s=o("MAWImageUtils")).boundHeightWidth(i.height,i.width,s.STICKER_THUMBNAIL_MAX_SIZE),l=s.boundHeightWidth(l.height,l.width,s.STICKER_THUMBNAIL_MAX_SIZE)}return{previewHeight:i.height,previewHeightLarge:l.height,previewWidth:i.width,previewWidthLarge:l.width}}function d(e,t,n,r){var a,i,l,s,u,d,m,p,_,f=e.ancillary,g=e.integral;if(!(f==null||g==null)&&!(f.receiverFetchId!=null||(g==null?void 0:g.receiverFetchId)!=null)){var h=n.getMsgId(),y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.mediaKeyTimestamp,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,b=C!=null?o("WAHashUtils").toPlaintextHash(C):void 0,v=f.waveform!=null?o("MAWAudioUtils").serializeWaveform(f.waveform):void 0;return babelHelpers.extends({accessibilitySummaryText:f.accessibilityLabel,defaultFilename:r,duration:((l=f.seconds)!=null?l:0)*1e3,filenames:r!=null?(s={},s[h]=r,s):void 0,filesize:o("WALongInt").numberOrThrowIfTooLarge((u=g==null||(d=g.transport)==null||(d=d.ancillary)==null?void 0:d.fileLength)!=null?u:0),gifPlayback:f.gifPlayback,hasMedia:!0,hasPreviewMedia:(g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.thumbnail)!=null},f.hdType!=null?{hdTypes:(p={},p[h]=f.hdType,p)}:{},{mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:t,messagesSortOrderMs:(_={},_[h]=n.topLevel.timestampMs,_),msgIds:[h],offlineAttachmentId:b,plaintextHash:b},c(t,f,g),{sortOrderMs:y!=null?o("WATimeUtils").castLongIntToMillisTime(y):void 0,threadJid:n.getChatJid(),transportKey:"WhatsApp",ts:n.getUnixTs(),waveformData:v})}}function m(t,n){var o,a,i=(o=t.documentMessage())==null?void 0:o.fileName,l=(a=t.attachmentMessage())==null?void 0:a.payload;if(l!=null){var s=e(t);if(s==null){r("FBLogger")("mps").mustfix("media type is null for attachment message");return}return d(l,s,n,i)}}function p(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=m(n,e.message);return r==null||e.supplementals.push({kind:"bridgeMedia",value:r}),e}l.getMediaTypeForMessage=e,l.getMediaTypeForServerMediaType=s,l.mediaToBridge=u,l.getBridgeFromAttachmentTransport=d,l.getBridgeMediaFromConsumerMessage=m,l.processAttachment=p}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(t,n,r,o,a,i,l){function e(e){if(e==null||e.text==null||e.mentions==null||e.mentions.length===0)return e;var t=e.text,n=[],r=[],a=0;for(var i of e.mentions){var l=i.offset,s=i.length,u=i.mentionedJid,c=i.mentionType;c!==o("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||l==null||s==null||u==null||(r.push(u+"@msgr"),n.push(t.substring(a,l)),n.push("@"+u+"@msgr"),a=l+s)}return r.length===0?e:(n.push(t.substring(a)),babelHelpers.extends({},e,{text:n.join(""),mentionedJid:r,mentions:[]}))}l.default=e}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e=/^[ \r\n\s]*$/;function s(t,n){if(t==null)return!1;var r=o("ReStoreVaulting").maybeUnvault(t),a=o("EmojiRenderer").parse(r).map(function(e){return{length:e.length,offset:e.offset}}),i=n?o("EmoticonRenderer").parse(r).map(function(e){return{length:e.chars.length,offset:e.offset}}):[],l=a.concat(i);if(l.length===0)return!1;var s=l.sort(function(e,t){return e.offset-t.offset|0}),u={contents:0},c={contents:0},d=s.some(function(t){u.contents===t.offset?(u.contents=u.contents+t.length|0,c.contents=u.contents):c.contents=t.offset;var n=r.substring(u.contents,c.contents);return u.contents=t.offset+t.length|0,e.test(n)===!1}),m=u.contents!==r.length&&!e.test(r.substring(c.contents));return d?!1:!m}l.default=s}),98);
__d("MpsMessageTextToBridge",["MAWAckLevel","MAWMpsGating","MAWVault","WAJids","WAMsgType","maybeConvertMessageTextMentionsV2ToV1","mwv2MessageIsEmojiOnly"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s=e.deserialize().encryptedTransportMessage(),u=s==null?void 0:s.consumerMessage(),c=(u==null||(t=u.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(u==null||(n=u.payload)==null||(n=n.content)==null?void 0:n.messageText);if(!(u==null||c==null||s==null)){var d=(a=c.text)!=null?a:"";o("MAWMpsGating").isFullMpsEnabled()&&!r("mwv2MessageIsEmojiOnly")(d,!0)&&(d+="*"),d=o("MAWVault").vault(d);var m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),commands:c.commands,content:d,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,mentionedJids:c.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,specialTextSize:(i=(l=u.metadata)==null?void 0:l.specialTextSize)!=null?i:void 0,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.TEXT};return{kind:"bridgeMsg",value:m}}}l.messageTextToBridgeMsg=e}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAJids").createJidUtils({platform:"msgr"}),s=(function(){function t(e,t){this.message=e,this.topLevel=t}t.fromTopLevel=function(n){return new t(n,n)},t.fromSupplemental=function(n,a){var e,i=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(n.payload),l={messageId:n.messageId,payload:n.payload,senderId:r("nullthrows")((e=i.proto.metadata)==null?void 0:e.senderId),threadId:a.threadId,timestampMs:n.timestampMs};return new t(l,a)};var n=t.prototype;return n.getChatJid=function(){return o("WAJids").unsafeCoerceToChatJid(this.message.threadId)},n.getExternalId=function(){return this.message.messageId},n.getMsgId=function(){return o("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)},n.getSenderJid=function(){return e.toUserJid(this.message.senderId)},n.topLevelMetadata=function(){return t.fromTopLevel(this.topLevel)},n.isAuthorMe=function(){return o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())===this.message.senderId},n.getAuthor=function(){return this.isAuthorMe()?o("WAJids").AUTHOR_ME:this.getSenderJid()},n.getUnixTs=function(){return o("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)},n.deserialize=function(){return o("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)},t})();l.MpsMessageToBridgeWrapper=s}),98);
__d("MpsReceiverFetchInfoToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a,i,l=e.ancillary,s=e.integral,u=(n=s==null?void 0:s.receiverFetchId)!=null?n:l==null?void 0:l.receiverFetchId,c=s==null||(r=s.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(!(u==null||c==null)){var d=(a=l==null?void 0:l.width)!=null?a:0,m=(i=l==null?void 0:l.height)!=null?i:0;return{accessibilitySummaryText:l==null?void 0:l.accessibilityLabel,mimetype:c,msgId:t.getMsgId(),previewHeight:m,previewWidth:d,receiverFetchId:u,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(t.message.timestampMs),threadJid:t.getChatJid(),transportKey:"WhatsApp",type:"sticker"}}}function s(t,n){var r,o=(r=t.stickerMessage())==null?void 0:r.payload;if(o!=null)return e(o,n)}function u(e){var t,n=(t=e.message.deserialize().encryptedTransportMessage())==null?void 0:t.consumerMessage();if(n==null)return e;var r=s(n,e.message);return r==null||e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:r}),e}l.getReceiverFetchInfoForAttachmentTransport=e,l.getReceiverFetchInfoFromConsumerMessage=s,l.processReceiverFetchInfo=u}),98);
__d("WAMedia",[],(function(t,n,r,o,a,i){"use strict";var e="Image",l="Video",s="Ptt",u="Gif",c="Sticker",d="DocumentFile",m={IMAGE:e,VIDEO:l,PTT:s,GIF:u,STICKER:c,DOCUMENT_FILE:d};i.IMAGE=e,i.VIDEO=l,i.PTT=s,i.GIF=u,i.STICKER=c,i.DOCUMENT_FILE=d,i.MEDIA_TYPE=m}),66);
__d("MpsXmaToBridge",["MAWAckLevel","MAWBridgeXMA","MAWDbMedia","MAWDbXMA","MAWParseCollapsibleIdFromXMADataClass","MAWXMAUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2XmaDataClass","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","WAArmadilloXMA.pb","WAHashUtils","WAJids","WALongInt","WAMedia","WATimeUtils","maybeConvertMessageTextMentionsV2ToV1","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["actionContentBlob"];function s(e){var t,n,o;if(((t=(n=e.payload.messageText)==null?void 0:n.length)!=null?t:0)>0)return r("maybeConvertMessageTextMentionsV2ToV1")({commands:e.payload.commands,mentionedJid:e.payload.mentionedJid,mentions:e.payload.mentions,text:e.payload.messageText});var a=(o=e.associatedMessage())==null||(o=o.consumerMessage())==null||(o=o.payload)==null||(o=o.content)==null?void 0:o.messageText;if(a!=null&&a.text!=null)return r("maybeConvertMessageTextMentionsV2ToV1")(a)}function u(e){if(e!=null){var t=o("WATimeUtils").castLongIntToUnixTime(e);if(t!=null){var n=o("WATimeUtils").cappedMillisecondsUntil(t);if(n!=null){var r=n<=0;return{countdownTs:t,isExpiredXmaMsg:r,millisecondsUntilCountdownTs:n}}}}}function c(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage();if(!(n==null||r==null||o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType))){var a,i=o("MWXMAV2XmaDataClass").parseXmaDataClass(r.payload.xmaDataclass);o("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(i)&&(a=o("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(i));var l=s(r),c=u(r==null?void 0:r.payload.targetExpiringAtSec),d=babelHelpers.extends({ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid()},a!=null?{collapsibleId:a}:{},{commands:l==null?void 0:l.commands,content:l==null?void 0:l.text,externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isExpiredXmaMsg:c==null?void 0:c.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(r.payload.targetType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(r.payload.targetType),isForwarded:!1,isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(r.payload.targetType),isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(r.payload.targetType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(r.payload.targetType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(r.payload.targetType),isPostPrivateReply:o("MAWXMAUtils").isXMAPostPrivateReply(r.payload.targetType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(r.payload.targetType),isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(r.payload.targetType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(r.payload.targetType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(r.payload.targetType),isStoryShare:o("MAWXMAUtils").isXMAStoryShare(r.payload.targetType),mentionedJids:l==null?void 0:l.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:"XMA",xmaMessageType:r.payload.targetType});return{kind:"bridgeMsg",value:d}}}function d(t){var n,a,i,l,s,u,c,d,m,p,_=t.message,f=t.topLevel;if(f.value.type_!=="XMA")return t;var g=_.deserialize().encryptedTransportMessage(),h=g==null||(n=g.armadillo())==null?void 0:n.extendedContentMessage();if(g==null||h==null)return t;var y=h.payload.ctas.map(function(t){var n=t.actionContentBlob,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}),C=r("nullthrows")(h.payload.targetType),b=C===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT,v=b?[null,h.previews().at(0)]:[h.previews().at(0),h.favicon()],S=v[0],R=v[1],L=S==null||(a=S.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.fileSha256,E=L!=null?o("WAHashUtils").toPlaintextHash(L):void 0,k=R==null||(i=R.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256,I=k!=null?o("WAHashUtils").toPlaintextHash(k):void 0,T=(l=h.headerImage())==null||(l=l.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.fileSha256,D=T!=null?o("WAHashUtils").toPlaintextHash(T):void 0,x=o("WAMedia").MEDIA_TYPE.IMAGE,$=o("MAWBridgeXMA").mediaTypeToMimeType(x),P={author:_.getAuthor(),contentRef:h.payload.contentRef,ctas:y.slice(1),defaultCTA:y.at(0),defaultPreviewMediaId:o("MAWDbMedia").convertNumberToMediaId(0),defaultPreviewMediaPlaintextHash:E,duration:null,faviconMediaId:o("MAWDbMedia").convertNumberToMediaId(0),faviconPlaintextHash:I,filesize:o("WALongInt").numberOrThrowIfTooLarge((s=S==null||(u=S.integral)==null||(u=u.transport)==null||(u=u.ancillary)==null?void 0:u.fileLength)!=null?s:0),hasMedia:E!=null,hasXmaFaviconMedia:k!=null,hasXmaHeaderMedia:T!=null,headerMediaId:o("MAWDbMedia").convertNumberToMediaId(0),headerMediaPlaintextHash:D,headerTitle:h.payload.headerTitle,maxSubtitleNumOfLines:h.payload.maxSubtitleNumOfLines,maxTitleNumOfLines:h.payload.maxTitleNumOfLines,mediaType:x,msgId:t.message.getMsgId(),offlineAttachmentId:E,overlayIconGlyph:h.payload.overlayIconGlyph,overlayTitle:h.payload.overlayTitle,playableUrlMimeType:$,previewHeight:S==null||(c=S.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,previewHeightLarge:S==null||(d=S.ancillary)==null?void 0:d.height,previewUrlMimeType:$,previewWidth:S==null||(m=S.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null||(m=m.thumbnail)==null?void 0:m.thumbnailWidth,previewWidthLarge:S==null||(p=S.ancillary)==null?void 0:p.width,subtitleText:h.payload.subtitleText,targetId:h.payload.targetId,targetType:C,targetUsername:h.payload.targetUsername,threadJid:t.message.getChatJid(),titleText:h.payload.titleText,ts:t.message.getUnixTs(),xmaDataclass:h.payload.xmaDataclass,xmaId:o("MAWDbXMA").convertNumberToXMAId(0),xmaLayoutType:h.payload.xmaLayoutType};return t.supplementals.push({kind:"bridgeXMA",value:P}),t}function m(e){var t,n,r=e.message.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null?void 0:t.extendedContentMessage(),i=a==null||(n=a.associatedMessage())==null?void 0:n.consumerMessage();if(i==null)return e;var l=o("MpsMediaToBridge").getBridgeMediaFromConsumerMessage(i,e.message);l!=null&&e.supplementals.push({kind:"bridgeMedia",value:l});var s=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoFromConsumerMessage(i,e.message);return s!=null&&e.supplementals.push({kind:"bridgeReceiverFetchInfo",value:s}),e}function p(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage(),o=u(r==null?void 0:r.payload.targetExpiringAtSec);if(o==null)return e;var a=o.countdownTs,i=o.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeXMAStartCountdown",value:{msgs:[{countdownTs:a,millisecondsUntilCountdownTs:i,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}l.computeXmaContent=s,l.getExpiredXMAParams=u,l.xmaToBridge=c,l.processXmaAttachment=d,l.processXmaAssociatedMessageAttachment=m,l.processXmaExpiration=p}),98);
__d("MpsNoteReplyToBridge",["MAWAckLevel","MAWVault","MpsMediaToBridge","MpsReceiverFetchInfoToBridge","MpsXmaToBridge","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e==null?void 0:e.videoContent(),n=e==null?void 0:e.stickerContent(),a=t!=null?t:n;if(a!=null){var i=t!=null?o("getMediaTypeFromConsumerMessage").getMediaTypeForVideo(t):void 0,l=n!=null?"sticker":void 0,s=r("nullthrows")(i!=null?i:l);return o("MpsMediaToBridge").getMediaTypeForServerMediaType(s)}}function s(t){var n,r,a=t.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply();if(!(a==null||i==null)){var l=i.payload,s=l.noteText,u=l.noteTimestampMs,c=l.textContent,d=i.payload.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(i.payload.noteTimestampMs)):void 0,m=o("MpsXmaToBridge").getExpiredXMAParams(d),p=t.message.senderId,_=e(i),f={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:(c==null?void 0:c.text)==null?void 0:o("MAWVault").vault(c.text),editCount:0,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isExpiredMsg:!1,isForwarded:!1,isNoteReply:!0,msgId:t.getMsgId(),replyContent:{noteContent:m!=null&&m.isExpiredXmaMsg?void 0:o("MAWVault").vault((r=s==null?void 0:s.text)!=null?r:""),replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(o("WALongInt").numberOrThrowIfTooLarge(u)):void 0,replyToMsgId:t.getMsgId(),replyToUserId:p,replyType:"LIGHTWEIGHT_STATUS"},sender:p,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:_!=null?_:"Text"};return{kind:"bridgeMsg",value:f}}}function u(e){var t,n=e.message.deserialize().encryptedTransportMessage(),r=n==null||(t=n.armadillo())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.noteReplyMessage;if(n==null||r==null)return e;var a=r.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(r.noteTimestampMs)):void 0,i=o("MpsXmaToBridge").getExpiredXMAParams(a);if(i==null)return e;var l=i.countdownTs,s=i.millisecondsUntilCountdownTs;return e.supplementals.push({kind:"bridgeNoteReplyStartCountdown",value:{msgs:[{countdownTs:l,millisecondsUntilCountdownTs:s,msgId:e.message.getMsgId(),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()}]}}),e}function c(t){var n,r=t.message,a=r.deserialize().encryptedTransportMessage(),i=a==null||(n=a.armadillo())==null?void 0:n.noteReply(),l=i==null?void 0:i.videoContent(),s=i==null?void 0:i.stickerContent(),u=l!=null?l:s,c=e(i);if(u==null||c==null)return t;var d=o("MpsMediaToBridge").getBridgeFromAttachmentTransport(u,c,r);if(d!=null&&t.supplementals.push({kind:"bridgeMedia",value:d}),s!=null){var m=o("MpsReceiverFetchInfoToBridge").getReceiverFetchInfoForAttachmentTransport(s,r);m!=null&&t.supplementals.push({kind:"bridgeReceiverFetchInfo",value:m})}return t}l.noteReplyToBridge=s,l.processNoteReply=u,l.processNoteReplyAttachment=c}),98);
__d("RavenMessagingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});i.default=e}),66);
__d("MpsRavenToBridge",["EphemeralMediaViewMode","FBLogger","MAWAckLevel","MAWDbMedia","MAWProtobufDeserializers","RavenMessagingState","WAArmadilloApplication.pb","WAHashUtils","WAMsgType","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,o=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr;return!!o}function s(t){if(e(t)){var n={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),content:"",externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,msgId:t.getMsgId(),sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.RAVEN};return{kind:"bridgeMsg",value:n}}}function u(e){var t,n,a,i=e.message,l=(t=i.deserialize().encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content,s=(n=l==null?void 0:l.ravenMessage)!=null?n:l==null?void 0:l.ravenMessageMsgr;if(s==null)return e;var u,c;e.supplementalMessages.forEach(function(e){var t,n,r=(t=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.payload).encryptedTransportMessage())==null||(t=t.armadillo())==null||(t=t.payload)==null?void 0:t.content;u=(n=r==null?void 0:r.ravenMessage)!=null?n:r==null?void 0:r.ravenMessageMsgr,c=r==null?void 0:r.ravenActionNotifMessage});var d=(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.videoMessage=="object"&&u.videoMessage!==null||typeof u.videoMessage=="function")?o("WAMsgType").MSG_TYPE.VIDEO:(typeof u=="object"&&u!==null||typeof u=="function")&&(typeof u.imageMessage=="object"&&u.imageMessage!==null||typeof u.imageMessage=="function")?o("WAMsgType").MSG_TYPE.IMAGE:null;if(d==null&&c==null)return r("FBLogger")("mps").mustfix("Unsupported Raven type"),e;var m=e.message.getMsgId(),p=s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.VIEW_ONCE?r("EphemeralMediaViewMode").READ_ONCE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.ALLOW_REPLAY?r("EphemeralMediaViewMode").REPLAYABLE:s.ephemeralType===o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE.KEEP_IN_CHAT?r("EphemeralMediaViewMode").PERMANENT:s.ephemeralType===void 0?void 0:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s.ephemeralType)})(),_={duration:null,ephemeralMediaState:c==null?r("RavenMessagingState").UNSEEN:r("RavenMessagingState").SEEN,ephemeralMediaViewMode:p,filesize:100,hasMedia:!1,hasPreviewMedia:!1,mediaId:o("MAWDbMedia").convertNumberToMediaId(0),mediaType:d||o("WAMsgType").MSG_TYPE.IMAGE,messagesSortOrderMs:(a={},a[m]=e.message.topLevel.timestampMs,a),msgIds:[e.message.getMsgId()],plaintextHash:o("WAHashUtils").stringToPlaintextHash("aaa"),previewHeight:1,previewHeightLarge:1,previewWidth:1,previewWidthLarge:1,sortOrderMs:o("WATimeUtils").castLongIntToMillisTime(e.message.topLevel.timestampMs),threadJid:e.message.getChatJid(),ts:e.message.getUnixTs()};return e.supplementals.push({kind:"bridgeMedia",value:_}),e}l.isRavenMsg=e,l.ravenToBridge=s,l.processRavenAttachment=u}),98);
__d("MpsReactionToBridge",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null||(t=t.consumerMessage())==null||(t=t.payload)==null||(t=t.content)==null?void 0:t.reactionMessage;if(r!=null){var a=r.senderTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WATimeUtils").castLongIntToMillisTime(r.senderTimestampMs)):e.getUnixTs(),i=(n=r.text)!=null?n:"",l=i===""?{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId()},type:"delete"}:{reaction:{actorId:e.message.senderId,chatJid:e.getChatJid(),messageId:e.topLevelMetadata().getMsgId(),reaction:i,ts:a},type:"upsert"};return{kind:"bridgeReactionAction",value:l}}}l.reactionMessageToBridgeMsg=e}),98);
__d("MpsReplyToBridge",["MpsToBridgeMessageId","MpsTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage();if(r.kind!=="bridgeMsg"||a==null)return e;var i=(t=a.proto.metadata)==null?void 0:t.quotedMessage;if(i==null||i.stanzaId==null||r.value.replyContent!=null)return e;var l=o("MpsTypes").toMessageId(i.stanzaId);return r.value=babelHelpers.extends({},r.value,{replyContent:{isBumpMsg:!1,replyToMsgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(n.message.threadId,l),replyType:"MESSAGE"}}),babelHelpers.extends({},e,{topLevel:r})}l.processReplyMessage=e}),98);
__d("MpsRevokeMessageToBridgeMsg",["MAWAckLevel","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportMessage(),r=n==null||(t=n.consumerMessage())==null||(t=t.payload)==null||(t=t.applicationData)==null?void 0:t.revoke;if(!(n==null||r==null))return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.REVOKED}}}l.revokeMessageToBridgeMsg=e}),98);
__d("MpsScreenshotActionToBridgeMsg",["MAWAckLevel","MAWEphemeralUtils","WAArmadilloApplication.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r=e.deserialize().encryptedTransportMessage(),a=r==null||(t=r.armadillo())==null||(t=t.proto.payload)==null||(t=t.content)==null?void 0:t.screenshotAction;if(!(a==null||r==null)){var i=o("MAWEphemeralUtils").getEphemeralScreenshotActionData((n=a.screenshotType)!=null?n:o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,e.getSenderJid(),e.isAuthorMe()),l={ack:o("MAWAckLevel").ACK.received,adminContent:i.ephemeralScreenshotActionContent,adminType:i.ephemeralScreenshotActionType,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:l}}}l.screenshotActionToBridgeMsg=e}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if((e==null?void 0:e.readonlyMetadataDataclass)!=null)try{var t=JSON.parse(e==null?void 0:e.readonlyMetadataDataclass);return t}catch(e){throw r("err")("Failed to parse readonly metadata dataclass JSON")}return null}function s(t){var n,r=e(t);return(r==null||(n=r.power_up)==null?void 0:n.power_up_style)!=null}function u(t){var n,r=e(t);return(r==null||(n=r.note_metadata)==null?void 0:n.message_type)==="MENTION"}l.isPowerUp=s,l.isNoteMention=u}),98);
__d("MpsUnsupportedMessagesToBridge",["MAWAckLevel","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","WACommon.pb","WAMsgType","WAParseReadOnlyMetadataDataclassUtils","gkx","justknobx","maybeConvertMessageTextMentionsV2ToV1"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l,s,u,c=e.deserialize().encryptedTransportMessage();if(c!=null){var d=c==null?void 0:c.consumerMessage(),m={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.FUTUREPROOF},p=(d==null||(t=d.payload)==null||(t=t.content)==null?void 0:t.messageText)&&r("maybeConvertMessageTextMentionsV2ToV1")(d==null||(n=d.payload)==null||(n=n.content)==null?void 0:n.messageText);if(p!=null){var _,f=((_=p.commands)==null?void 0:_.some(function(e){return e.commandType===o("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(f&&!r("gkx")("12661"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"metaAiMessage"})}}var g=c==null||(a=c.armadillo())==null?void 0:a.paymentsTransactionMessage(),h=g!=null?g:c==null||(i=c.armadillo())==null?void 0:i.extendedContentMessage();if(h!=null){var y=h.payload,C=y.targetType,b=y.xmaDataclass;if(C==null||!o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:C,xmaDataclass:b})){var v=g!=null;return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:o("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(C,b,v)})}}}var S=d==null||(l=d.stickerMessage())==null?void 0:l.payload;if(S!=null){var R,L,E=((R=S.integral)==null?void 0:R.receiverFetchId)!=null||((L=S.ancillary)==null?void 0:L.receiverFetchId)!=null;if(E&&!r("justknobx")._("3677"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"stickerReceiverFetchMessage"})}}var k=d==null||(s=d.documentMessage())==null?void 0:s.payload;if(k!=null&&r("gkx")("23924"))return{kind:"bridgeMsg",value:babelHelpers.extends({},m)};if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(c.proto.metadata))return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"noteMention"})};var I=d==null||(u=d.payload)==null||(u=u.content)==null?void 0:u.pollCreationMessage;if(I!=null)return{kind:"bridgeMsg",value:babelHelpers.extends({},m,{unsupportedType:"pollCreationMessage"})}}}l.unsupportedMessagesBridgeMsg=e}),98);
__d("MpsWaAdminMsgToBridge",["MAWAckLevel","MAWGetUserDeviceChangeAdminType","MAWJids","MAWLocalizationType","MAWUserJidWrapper","WAArmadilloTransportEvent.pb","WAJids","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,r,a=e.deserialize(),i=(t=a.encryptedTransportEvent())==null?void 0:t.proto.event;if(i){var l=i.deviceChange,s=i.icdcAlert;if(((n=a.proto.metadata)==null?void 0:n.senderId)!=null){var u=o("WAJids").unsafeCoerceToUserJid((r=a.proto.metadata)==null?void 0:r.senderId),c=o("MAWJids").toUserJid(u),d=c===o("MAWUserJidWrapper").getMyUserJid()?[]:[o("WAJids").userIdFromJid(c)];if(s)return{kind:"bridgeMsg",value:{ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ICDC_ALERT}};if(l){var m,p,_=(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED?"add":(typeof l=="object"&&l!==null||typeof l=="function")&&"type"in l&&l.type===o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED?"remove":typeof l=="object"&&l!==null||typeof l=="function"?"update":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)})();if(((m=a.proto.metadata)==null?void 0:m.senderId)==null)return;var f=o("WAJids").unsafeCoerceToUserJid((p=a.proto.metadata)==null?void 0:p.senderId),g=o("MAWJids").toUserJid(f),h=o("MAWGetUserDeviceChangeAdminType").getUserDeviceAdminType(_,g===o("MAWUserJidWrapper").getMyUserJid()),y={ack:o("MAWAckLevel").ACK.received,adminContent:d,adminType:h,adminVersion:1,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:o("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:y}}}}}l.waAdminMsgToBridgeMsg=e}),98);
__d("MpsWaPlaceholderToBridge",["MAWAckLevel","WAArmadilloTransportEvent.pb","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.deserialize().encryptedTransportEvent(),r=n==null||(t=n.proto.placeholder)==null?void 0:t.type;if(!(n==null||r==null)){var a={ack:o("MAWAckLevel").ACK.received,chatJid:e.getChatJid(),externalId:e.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:e.isAuthorMe(),isForwarded:!1,msgId:e.getMsgId(),sender:e.message.senderId,sortOrderMs:e.message.timestampMs,ts:e.getUnixTs(),type_:r===o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.UNAVAILABLE_MESSAGE?o("WAMsgType").MSG_TYPE.UNAVAILABLE:o("WAMsgType").MSG_TYPE.CIPHERTEXT};return{kind:"bridgeMsg",value:a}}}l.waPlaceholderToBridgeMsg=e}),98);
__d("MpsXmaMentionToBridge",["MAWUserJidWrapper","MAWXMAUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.message,r=e.topLevel,a=n.deserialize().encryptedTransportMessage(),i=a==null||(t=a.armadillo())==null?void 0:t.extendedContentMessage(),l=i==null?void 0:i.payload.targetType,s=o("MAWXMAUtils").isXMAStoryMention(l)||o("MAWXMAUtils").isFBXMAPostMention(l);if(a==null||i==null||!s||r.kind!=="bridgeMsg")return e;var u=o("MAWXMAUtils").isFBXMAPostMention(l),c=o("WAJids").interpretAsUserJid(n.getChatJid()),d=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),m=c==null?d:o("WAJids").userIdFromJid(c),p={mentionedUserId:m!=null?m:d,timestampMs:o("WATimeUtils").castToMillisTime(n.message.timestampMs)},_=u?babelHelpers.extends({},p,{replyType:"FB_POST_MENTION"}):babelHelpers.extends({},p,{replyType:"FB_STORY_MENTION"});return r.value=babelHelpers.extends({},r.value,{replyContent:_}),e}l.processXmaMention=e}),98);
__d("MpsXmaStoryReplyToBridge",["MAWAckLevel","MAWDbMedia","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MpsMediaToBridge","MpsXmaToBridge","WAHashUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WAJids").interpretAsUserJid(t.getChatJid()))!=null?n:t.getSenderJid(),a=o("MAWUserJidWrapper").getMyUserJid();return o("MAWXMAUtils").isXMAStoryProducerReply(e.targetType)?t.isAuthorMe()?a:r:t.isAuthorMe()?r:a}function s(t){var n,r,a,i,l=t.deserialize().encryptedTransportMessage(),s=l==null||(n=l.armadillo())==null?void 0:n.extendedContentMessage();if(!(l==null||s==null||!o("MAWXMAUtils").isXMAStoryReply(s.payload.targetType))){var u=o("MpsXmaToBridge").computeXmaContent(s),c=s.previews().at(0),d=c==null||(r=c.integral)==null||(r=r.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,m=d!=null?o("WAHashUtils").toPlaintextHash(d):void 0,p=(a=s.payload.ctas.at(0))==null?void 0:a.nativeUrl,_=e(s.payload,t),f=o("MAWXMAUtils").isXMAStoryProducerReply(s.payload.targetType),g=(i=s.associatedMessage())==null?void 0:i.consumerMessage(),h=g!=null?o("MpsMediaToBridge").getMediaTypeForMessage(g):null,y=o("MpsXmaToBridge").getExpiredXMAParams(s==null?void 0:s.payload.targetExpiringAtSec),C=f?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:o("MAWDbMedia").convertNumberToMediaId(1),storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyMsgType:o("MAWMsgType").MSG_TYPE.IMAGE,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)}:{replyType:"STORY",storyMediaPlaintextHash:y!=null&&y.isExpiredXmaMsg?void 0:m,storyOwnerId:o("WAJids").extractUserId(_),storyUrl:p!=null?p:"",timestampMs:o("WATimeUtils").castToMillisTime(t.message.timestampMs)},b={ack:o("MAWAckLevel").ACK.received,chatJid:t.getChatJid(),commands:u==null?void 0:u.commands,content:u==null?void 0:u.text,externalId:t.getExternalId(),forwardingScore:0,isAdminMessage:!1,isAuthorMe:t.isAuthorMe(),isForwarded:!1,isStoryReply:!0,mentionedJids:u==null?void 0:u.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),msgId:t.getMsgId(),replyContent:C,sender:t.message.senderId,sortOrderMs:t.message.timestampMs,ts:t.getUnixTs(),type_:h!=null?h:"Text"};return{kind:"bridgeMsg",value:b}}}l.storyReplyToBridge=s}),98);
__d("MpsMessageToBridge",["FBLogger","MAWMsgType","MpsAdminMsgToBridge","MpsBumpMessageToBridgeMsg","MpsEditToBridge","MpsEphemeralMessageToBridge","MpsForwardToBridge","MpsFutureproofToBridge","MpsMediaToBridge","MpsMessageTextToBridge","MpsMessageToBridgeWrapper","MpsNoteReplyToBridge","MpsRavenToBridge","MpsReactionToBridge","MpsReceiverFetchInfoToBridge","MpsReplyToBridge","MpsRevokeMessageToBridgeMsg","MpsScreenshotActionToBridgeMsg","MpsUnsupportedMessagesToBridge","MpsWaAdminMsgToBridge","MpsWaPlaceholderToBridge","MpsXmaMentionToBridge","MpsXmaStoryReplyToBridge","MpsXmaToBridge","WAGetPlatformFromStanzaId","WAJids","WAStanzaUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MpsUnsupportedMessagesToBridge").unsupportedMessagesBridgeMsg,o("MpsMessageTextToBridge").messageTextToBridgeMsg,o("MpsMediaToBridge").mediaToBridge,o("MpsAdminMsgToBridge").adminMsgToBridgeMsg,o("MpsScreenshotActionToBridgeMsg").screenshotActionToBridgeMsg,o("MpsRevokeMessageToBridgeMsg").revokeMessageToBridgeMsg,o("MpsBumpMessageToBridgeMsg").bumpMessageToBridgeMsg,o("MpsWaAdminMsgToBridge").waAdminMsgToBridgeMsg,(e=o("MpsXmaToBridge")).xmaToBridge,o("MpsXmaStoryReplyToBridge").storyReplyToBridge,o("MpsRavenToBridge").ravenToBridge,o("MpsNoteReplyToBridge").noteReplyToBridge,o("MpsWaPlaceholderToBridge").waPlaceholderToBridgeMsg,o("MpsFutureproofToBridge").futureproofBridgeMsg],u=[o("MpsEditToBridge").editMessageToBridgeMsg,o("MpsReactionToBridge").reactionMessageToBridgeMsg],c=[o("MpsEditToBridge").processEditedMessage,o("MpsReplyToBridge").processReplyMessage,o("MpsMediaToBridge").processAttachment,o("MpsEphemeralMessageToBridge").processEphemeralMessage,o("MpsReceiverFetchInfoToBridge").processReceiverFetchInfo,e.processXmaAttachment,e.processXmaAssociatedMessageAttachment,o("MpsXmaMentionToBridge").processXmaMention,o("MpsRavenToBridge").processRavenAttachment,o("MpsForwardToBridge").processForwarding,o("MpsNoteReplyToBridge").processNoteReply,o("MpsNoteReplyToBridge").processNoteReplyAttachment,e.processXmaExpiration];function d(e,t){for(var n of e)try{var a=n(t);if(a!=null)return a}catch(e){var i=o("WAStanzaUtils").toStanzaId(t.getExternalId()),l=o("WAJids").interpretAsGroupJid(t.getChatJid())!=null;throw r("FBLogger")("mps").catching(r("getErrorSafe")(e)).mustfixThrow("mpsMessagetoBridge failed to create a bridge object for message from platform: %s, is_group: %s",o("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(i),l)}}function m(e){var t=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(e.toplevelProtobuf),n=d(s,t);if(n!=null&&!(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.ADMIN&&n.value.adminType==null)){if(n.kind==="bridgeMsg"&&n.value.type_===o("MAWMsgType").MSG_TYPE.FUTUREPROOF)return{supplementals:[],topLevel:n};var r=e.supplementalProtobufs.values().toArray().map(function(t){return d(u,o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromSupplemental(t,e.toplevelProtobuf))}).filter(Boolean),a=c.reduce(function(e,t){return t(e)},{message:t,supplementalMessages:e.supplementalProtobufs,supplementals:r,topLevel:n});return{supplementals:a.supplementals,topLevel:a.topLevel}}}l.mpsFullMessagetoBridge=m}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("4194303");function u(){return(e||(e=o("I64"))).to_string(c())}function c(){var t=o("XPlatReactCrypto").getRandomValues(new Uint8Array(8)),n=new DataView(t.buffer),r=(e||(e=o("I64"))).add(e.lsl_(e.of_int32(n.getUint32(0)),32),e.of_int32(n.getUint32(4)));return d(Date.now(),r)}function d(t,n){return(e||(e=o("I64"))).and_(e.or_(e.lsl_(e.of_float(t),22),e.and_(n,s)),e.max_int)}function m(t){for(var n=c(),r=[],a=0;a<t.length;a++)r.push([t[a],(e||(e=o("I64"))).to_string(n)]),n=p(n);return r}function p(t,n){n===void 0&&(n=(e||(e=o("I64"))).one);var r=_(t),a=f(t);return d(r,(e||(e=o("I64"))).add(a,n))}function _(t){return(e||(e=o("I64"))).to_float(e.lsr_(t,22))}function f(t){return(e||(e=o("I64"))).and_(t,s)}l.createOfflineThreadingID=u,l.createForItemsInOrder=m,l.createNewFromExisting=p,l.extractTimestamp=_}),98);
__d("WACryptoCurve25519Dependencies",["Promise","WACryptoPrimitives","WASignalKeys","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=n("Promise"))).resolve().then(function(){return o("WASignalKeys").makeKeyPair()})}function u(t,r){return(e||(e=n("Promise"))).resolve().then(function(){return o("WACryptoPrimitives").scalarMult(o("WASignalOther").ensureSize(r,32),o("WASignalOther").ensureSize(t,32)).buffer})}var c={generateIdentityKeyPair:s,calculateAgreement:u};l.calculateAgreement=u,l.CURVE25519_SIGNAL_DEPENDENCIES=c}),98);
__d("WorkerSchedulerError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,"Task execution exceeds timeout "+t+":"+n)||this,r.name="WorkerSchedulerTimeoutError",r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.WorkerSchedulerTimeoutError=e}),66);
__d("WorkerSchedulerPriority",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=1,s=0;i.BACKGROUND_PRIORITY=e,i.REGULAR_PRIORITY=l,i.BLOCKING_PRIORITY=s}),66);
__d("WorkerScheduler",["$InternalEnum","Promise","QPLFlow","QuickPerformanceLogger","WAGetSafeQPLError","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerSchedulerError","WorkerSchedulerPriority","err","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v=o("WATagsLogger").TAGS(["WorkerScheduler"]),S=0,R=100,L=3e4,E=10,k=6e4,I=n("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),T=(function(){function t(e,t){var n;this.$3=!1,this.$4=new Map,this.$5=new Map,this.$6=new Map,this.$7=[new Set,new Set,new Set],this.$8=[new(n=o("WAResolvable")).Resolvable,new n.Resolvable,new n.Resolvable],this.$9=new n.Resolvable,this.$1=e,this.config=t,this.$2=v.TAGS([e])}var a=t.prototype;return a.waitUntilEndReached=function(){return this.$9.promise},a.waitUntilBlockingEnded=function(){return this.$8[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].promise},a.waitUntilRegularEnded=function(){return this.$8[o("WorkerSchedulerPriority").REGULAR_PRIORITY].promise},a.waitUntilBackgroundEnded=function(){return this.$8[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].promise},a.getDebugState=function(){var e=this,t=Date.now();return{activeTasks:Array.from(this.$6.entries()).map(function(n){var r=n[0],o=n[1],a=e.$5.get(r);return!a||a.startTime==null?null:{executionTimeMs:t-a.startTime,priority:o,task:a.name,waitTimeMs:t-a.scheduledTime}}).filter(Boolean),pendingTasksByPriority:this.$7.map(function(n){var r=[];return n.forEach(function(n){var o=e.$5.get(n);o&&r.push({task:o.name,waitTimeMs:t-o.scheduledTime})}),r})}},a.$10=function(){if(this.$6.size<this.config.maxTaskLimit){var e=this.pendingTasksTick({increaseCounter:!1,lowestTier:this.$3?o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:o("WorkerSchedulerPriority").BLOCKING_PRIORITY,tasksToPick:1,tickDelta:0}),t=e.candidates,n=x.getHighestActivePriority();t.length>0&&this.maybeStartTask(t[0].id,n)}},a.runTask=function(t){return this.task(t).run()},a.task=function(t){var e,n=this.$1+":"+t.name+":"+S++,r=(e=t.priority)!=null?e:o("WorkerSchedulerPriority").REGULAR_PRIORITY,a=this.$11(n,{annotations:t.annotations,customFlags:t.customFlags,eventSamplingRate:t.eventSamplingRate,fn:t.fn,name:t.name,priority:r});return this.$4.set(n,a),a.publicApi},a.$12=function(t){var e=this.$4.get(t);return e==null?(b||(b=n("Promise"))).reject(r("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled")):(e.publicApi.status=I.SCHEDULED,this.$5.set(t,e),this.$7[e.priority].add(t),this.$13(e.priority),e.metric.addPoint("schedule_start"),x.scheduleTimerIfNeeded(),this.$10(),e.resolvable.promise)},a.$11=function(n,r){var t,a,i,l=this,s=new(o("WAResolvable")).Resolvable,u=o("QPLFlow").startQplFlowWithCoinflip($,r.eventSamplingRate!=null?r.eventSamplingRate:this.config.defaultSamplingRate,{annotations:{bool:babelHelpers.extends({},(t=r.annotations)==null?void 0:t.bool,r.customFlags),int:babelHelpers.extends({},(a=r.annotations)==null?void 0:a.int,{originalPriority:r.priority}),string:babelHelpers.extends({},(i=r.annotations)==null?void 0:i.string,{name:r.name,scheduler:this.$1,workerID:self!=null&&"worker_id"in self?self.worker_id:void 0})}}),c={fn:r.fn,id:n,loggingParams:{},maxTickDelta:0,metric:u,name:r.name,priority:r.priority,publicApi:{cancel:function(){return c.publicApi.status!==I.CREATED&&c.publicApi.status!==I.SCHEDULED?!1:(l.$14(n,I.CANCELLED),l.$4.delete(n))},id:n,name:r.name,promise:s.promise,promote:function(n){return l.$2.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Promoting "," from "," to ",""])),c.id,c.priority,n),(c.publicApi.status===I.CREATED||c.publicApi.status===I.SCHEDULED)&&c.priority>n?(l.$15(c,n),!0):!1},run:function(){return l.$12(n)},status:I.CREATED},resolvable:s,scheduledTime:Date.now(),startTime:null,tickCounter:0,waitCounter:0};return c},a.$14=function(t,n){var e=this.$5.get(t),r=e==null?void 0:e.publicApi.status;if(!(e==null||r===I.COMPLETED||r===I.FAILED||r===I.STUCK)){this.$5.delete(t),this.$6.delete(t),e.publicApi.status=n;var a=[this.$7[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").REGULAR_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].size===0];this.$6.forEach(function(e){a[e]=!1}),a[o("WorkerSchedulerPriority").BLOCKING_PRIORITY]&&a[o("WorkerSchedulerPriority").REGULAR_PRIORITY]&&a[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY]&&this.$9.resolve();for(var i=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;i<=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY;i++)a[i]&&this.$8[i].resolve()}},a.maybeStartTask=function(t,n){var e=this.$5.get(t);if(e==null){this.$2.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""])),t,this.$1);return}if(n==null||this.$3===!0)return this.$16(e);if(!(n<e.priority))return this.$16(e)},a.$16=function(t){var e=this;this.$7[t.priority].delete(t.id),this.$6.set(t.id,t.priority),this.$2.TAGS([t.name]).LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Started: ",""])),t.id),t.startTime=Date.now(),t.publicApi.status=I.RUNNING,t.metric.addPoint("schedule_end",{int:{priorityTier:t.priority,waitTicks:t.waitCounter}}),t.metric.addPoint("run_start",{int:{startPriority:t.priority}});var r;try{r=t.fn({metric:t.metric})}catch(e){r=(b||(b=n("Promise"))).reject(e)}this.config.warnTaskLimit!=null&&this.$6.size>=this.config.warnTaskLimit&&this.$6.entries().forEach(function(t){var n=t[0],r=t[1],o=e.$5.get(n);o!=null&&o.metric.addAnnotations({bool:{exceedsWarnLimit:!0}})}),r.then(function(n){t.resolvable.resolve(n),e.$2.TAGS([t.name]).LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""])),t.id),t.metric.addPoint("run_end",{int:{executionTicks:t.tickCounter}}),e.$14(t.id,I.COMPLETED),t.metric.endSuccess({int:{maxTickDeltaMs:t.maxTickDelta}}),e.$10()}).catch(function(n){t.resolvable.reject(n),e.$2.TAGS([t.name]).WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""])),t.id),t.metric.addPoint("run_fail"),e.$2.TAGS([t.name]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Debug params: "," failed: ",""])),t.loggingParams,n),e.$14(t.id,I.FAILED),t.metric.endFail("runtime",{int:{maxTickDeltaMs:t.maxTickDelta},string:{jsError:o("WAGetSafeQPLError").getSafeQPLErrorMessage(n)}}),e.$10()})},a.$13=function(t){for(var e=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;e<=t;e++)this.$8[e].resolveWasCalled()&&(this.$8[e]=new(o("WAResolvable")).Resolvable);this.$9.resolveWasCalled()&&(this.$9=new(o("WAResolvable")).Resolvable)},a.getHighestActivePriority=function(){var e=this,t=null;return this.$6.forEach(function(n,r){var o=e.$5.get(r);if(o==null){v.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),r,e.$1),e.$6.delete(r);return}(t==null||t>o.priority)&&(t=o.priority)}),t},a.activeTasksTick=function(t){var e=this,n=null;return this.$6.forEach(function(r,a){var i=e.$5.get(a);if(i==null){v.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),a,e.$1),e.$6.delete(a);return}i.tickCounter++,i.maxTickDelta=Math.max(t,i.maxTickDelta),(n==null||n>i.priority)&&(n=i.priority),i.tickCounter>e.config.ticksToTimeout&&i.publicApi.status===I.RUNNING&&(v.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""])),i.name),e.$14(i.id,I.STUCK),e.config.shouldContinueAfterTimeout||i.resolvable.reject(new(o("WorkerSchedulerError")).WorkerSchedulerTimeoutError(e.$1,i.id)),i.metric.endCancel(113,{int:{maxTickDeltaMs:i.maxTickDelta}}))}),n},a.$15=function(t,n){function e(){switch(r){case o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:return o("WorkerSchedulerPriority").REGULAR_PRIORITY;case o("WorkerSchedulerPriority").REGULAR_PRIORITY:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY;default:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY}}var r=t.priority,a=n!=null?n:e();a!==r&&(t.metric.addPoint("promote_to_"+a),this.$7[r].delete(t.id),t.priority=a,this.$7[a].add(t.id))},a.pendingTasksTick=function(t){for(var e=this,n=t.increaseCounter,r=t.lowestTier,a=t.tasksToPick,i=t.tickDelta,l=[],s=!0,u=function(r){s&&(s=e.$7[r].size===0),e.$7[r].forEach(function(t){var s=e.$5.get(t);if(s==null){v.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""])),t,e.$1),e.$7[r].delete(t);return}n&&(s.waitCounter++,s.maxTickDelta=Math.max(i,s.maxTickDelta),s.priority>o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=e.config.throttleTicks&&e.$15(s),s.priority===o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=x.maxWaitTicksMultiplierForFinalPromotion*e.config.throttleTicks&&(v.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"])),e.$1,s.name),e.$15(s))),!(l.length>=a)&&(e.$6.size+l.length>=e.config.maxTaskLimit||l.push(s))})},c=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;c<=r;c++)u(c);return{candidates:l.map(function(e){return{id:e.id,priority:e.priority}}),isEmpty:s}},a.TEST_ONLY_ignore_delays=function(){this.$3=!0},t})(),D=(function(){function e(){var e=this;this.$1=new Map,this.tickFrequencyMs=R,this.maxThrottleMs=k,this.maxWaitTicksMultiplierForFinalPromotion=E,this.$2=null,this.$3=new(o("WAShiftTimer")).ShiftTimer(function(){var t=!1;try{var n,r=o("WATimeUtils").performanceAbsoluteNow();t=e.$4(r-((n=e.$2)!=null?n:r))}catch(e){v.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""])),e)}finally{t===!1?(e.$2=o("WATimeUtils").performanceAbsoluteNow(),e.$3.onOrBefore(e.tickFrequencyMs)):e.$2=null}}),this.$5=new Map}var t=e.prototype;return t.getHighestActivePriority=function(){var e=null;return this.$5.forEach(function(t){var n=t.getHighestActivePriority();e!=null&&n!=null&&e<n&&(e=n),e==null&&n!=null&&(e=n)}),e},t.$4=function(t){var e,n=!0,r=null;this.$5.forEach(function(e){var n=e.activeTasksTick(t);r!=null&&n!=null&&r<n&&(r=n),r==null&&n!=null&&(r=n)});var a=[[],[],[]];this.$5.forEach(function(e){var r=e.pendingTasksTick({increaseCounter:!0,lowestTier:o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,tasksToPick:e.config.concurrency,tickDelta:t}),i=r.candidates,l=r.isEmpty;n&&(n=l),i.forEach(function(t){a[t.priority].push({id:t.id,scheduler:e})})});var i=(e=a.find(function(e){return e.length>0}))!=null?e:[];for(var l of i){var s=l.id,u=l.scheduler;u.maybeStartTask(s,r)}return n},t.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)},t.newScheduler=function(t,n){var e=this.$5.get(t);return e||(e=new T(t,n),this.$5.set(t,e),e)},t.TEST_ONLY_reset=function(){this.$5=new Map,this.$1=new Map},e})(),x=new D,$=r("qpl")._(1056838280,"1566");function P(e,t){var n,r,o,a,i;return x.newScheduler(e,{concurrency:(n=t.concurrency)!=null?n:1,defaultSamplingRate:(r=t.defaultSamplingRate)!=null?r:1e4,maxTaskLimit:t.maxTaskLimit,shouldContinueAfterTimeout:(o=t.shouldContinueAfterTimeout)!=null?o:!1,throttleTicks:Math.round(((a=t.maxThrottleMs)!=null?a:x.maxThrottleMs)/x.tickFrequencyMs),ticksToTimeout:Math.round(((i=t.timeoutMs)!=null?i:L)/x.tickFrequencyMs),warnTaskLimit:t.warnTaskLimit})}function N(e){e.tickFrequencyMs!=null&&(x.tickFrequencyMs=e.tickFrequencyMs),e.maxThrottleMs!=null&&(x.maxThrottleMs=e.maxThrottleMs),e.maxWaitTicksMultiplierForFinalPromotion!=null&&(x.maxWaitTicksMultiplierForFinalPromotion=e.maxWaitTicksMultiplierForFinalPromotion),e.qplEventType!=null&&($=e.qplEventType),(C||(C=r("QuickPerformanceLogger"))).setAlwaysOnSampleRate($,1)}function M(){x.TEST_ONLY_reset()}l.BACKGROUND_PRIORITY=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,l.BLOCKING_PRIORITY=o("WorkerSchedulerPriority").BLOCKING_PRIORITY,l.REGULAR_PRIORITY=o("WorkerSchedulerPriority").REGULAR_PRIORITY,l.SchedulerExecutionState=I,l.makeScheduler=P,l.configWorkerScheduler=N,l.TEST_ONLY_reset=M}),98);
__d("last",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;if(Array.isArray(e)||typeof e=="string")e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;return t?t.value:null}i.default=e}),66);/*FB_PKG_DELIM*/
__d("I64MigrationHelper",["I64","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return r("nullthrows")((e||(e=o("I64"))).cast(t))}l.cast=s}),98);
__d("LSDatascriptRuntimeTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UI","BROKER"]);i.TopLevelCallOrigin=e}),66);
__d("LSClientDependencies",[],(function(t,n,r,o,a,i){}),null);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","ODS","SiteData","clearTimeout","cr:19620","err","justknobx","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=babelHelpers.extends({},n("cr:19620"));function u(e){Object.assign(s,e)}var c={_tombstone:!0};function d(t){var n=new Map;for(var a of t){var i=a.name;i!=null&&!_(i)&&n.set(i,r("nullthrows")(a.value))}if(n.size===0)return Promise.resolve();var l=new Promise(function(t){var a={},i=[],u=function(){var t=c[0],n=c[1],r=n==null?void 0:n.__dr;a[r]={be:1,r:[]},i.push(r),(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",r),s[t]={load:async function(){return await l,s[t]}}};for(var c of n)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}}),m(r("Bootloader"),i,function(e){Array.from(n.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()})});return l}function m(e,t,n){return e.loadModules.call(e,t,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)})}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e){return e in s&&s[e]!==c}var f=r("justknobx")._("2800");function g(t,n,a){var i=new Map;for(var l of t!=null?t:[])_(l)||i.set(l,"LS"+p(l));for(var u of n!=null?n:[])_(u+".bs")?u+".nop"in s||i.set(u+".nop","LS"+p(u)+".nop"):i.set(u+".bs","LS"+p(u)+".nop");for(var d of a!=null?a:[])d in s||i.set(d,"LS"+p(d));if(i.size===0)return Promise.resolve();var g=new Promise(function(t,n){var a={},l=[],u=function(){var t=d[0],n=d[1];(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",n),o("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(n),a[n]={be:1,r:[]},l.push(n),s[t]={load:async function(){try{await g}catch(e){throw s[t]=c,e}return s[t]}}};for(var d of i)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}});var p=m(r("Bootloader"),l,function(e){r("clearTimeout")(_),Array.from(i.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()}),_=r("setTimeout")(function(){p.remove();var e=r("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",f,Array.from(i.keys()));e.name="dynamic_sproc_loading_timeout",n(e)},f)});return g}l.cachedModules=s,l.addToCachedModules=u,l.TOMBSTONE=c,l.downloadRelayDependencies=d,l.downloadBootloaderDependencies=g}),98);
__d("XPlatReactCrypto",["err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=self.crypto)==null?void 0:e.subtle;function u(e){var t;if(typeof((t=self.crypto)==null?void 0:t.getRandomValues)!="function")throw r("err")("crypto.getRandomValues: Not implemented");return self.crypto.getRandomValues(e),e}function c(){var e;if(typeof((e=self.crypto)==null?void 0:e.randomUUID)!="function")return null;var t=self.crypto.randomUUID();return typeof t=="string"?t:null}function d(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.importKey: Not implemented");return s.importKey(e,t,n,o,a)}function m(e,t){if(s==null)throw r("err")("crypto.subtle.exportKey: Not implemented");return s.exportKey(e,t)}function p(e,t,n){if(s==null)throw r("err")("crypto.subtle.generateKey: Not implemented");return s.generateKey(e,t,n)}function _(e,t,n){if(s==null)throw r("err")("crypto.subtle.encrypt: Not implemented");return s.encrypt(e,t,n)}function f(e,t,n){if(s==null)throw r("err")("crypto.subtle.decrypt: Not implemented");return s.decrypt(e,t,n)}function g(e,t,n){if(s==null)throw r("err")("crypto.subtle.sign: Not implemented");return s.sign(e,t,n)}function h(e,t){if(s==null)throw r("err")("crypto.subtle.digest: Not implemented");return s.digest(e,t)}function y(e,t,n){if(s==null)throw r("err")("crypto.subtle.deriveBits: Not implemented");return s.deriveBits(e,t,n)}function C(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.deriveKey: Not implemented");return s.deriveKey(e,t,n,o,a)}l.getRandomValues=u,l.randomUUID=c,l.subtleImportKey=d,l.subtleExportKey=m,l.subtleGenerateKey=p,l.subtleEncrypt=_,l.subtleDecrypt=f,l.subtleSign=g,l.subtleDigest=h,l.subtleDeriveBits=y,l.subtleDeriveKey=C}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e||(e=o("I64"))).add,and_:e.and_,asr_:e.asr_,cast:function(n){return(e||(e=o("I64"))).mk(n[1],n[0])},div:e.div,eq:function(n,r){return n==null&&r==null||n!=null&&r!=null&&(e||(e=o("I64"))).equal(n,r)},from_string:function(n){try{return(e||(e=o("I64"))).of_string(n)}catch(e){throw r("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',n)}},ge:e.ge,gt:e.gt,le:e.le,lsl_:e.lsl_,lsr_:e.lsr_,lt:e.lt,max:e.max,min:e.min,mod_:e.mod_,mul:e.mul,neq:function(n,r){return n==null&&r!=null||n!=null&&r==null||n!=null&&r!=null&&!(e||(e=o("I64"))).equal(n,r)},of_float:e.of_float,of_int32:e.of_int32,or_:e.or_,random:function(){var t=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return t[0]>>>=1,(e||(e=o("I64"))).add(e.lsl_(e.of_float(t[0]),32),e.of_float(t[1]))},sub:e.sub,to_float:e.to_float,to_int32:e.to_int32,to_string:function(n){return n==null?n:(e||(e=o("I64"))).to_string(n)},xor:e.xor};l.default=s}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={__val__:"__stop_iteration__"};function u(e){return{__val__:"__next_value__",next:e}}function c(e){return e!=null&&typeof e=="object"&&e.__val__==="__next_value__"}function d(t,n,a){for(var i=m(t,a);!(e||(e=r("isPromise")))(i);){if(i.done)return o("LSSynchronousPromise").makeSynchronousPromise(i);var l=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(n(i));if((e||(e=r("isPromise")))(l))return l.then(function(e){if(e===s)return i;var r=c(e)?e.next:void 0;return d(t,n,r)});if(l===s)return o("LSSynchronousPromise").makeSynchronousPromise(i);var u=c(l)?l.next:void 0;i=m(t,u)}var _=p(n);return i.then(function(e){return e.done?e:_(e).then(function(r){if(r===s)return e;var o=c(r)?r.next:void 0;return d(t,n,o)})})}function m(t,n){var a=t.next(n);return(e||(e=r("isPromise")))(a)?o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a):a}function p(e){return function(t){var n=e(t);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(n)}}l.STOP_ITERATION=s,l.wrapNextValue=u,l.iteratorLoop=d}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return u(e,t)},n.next=function(){var n={done:!0},r=function(r){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t(r.value.item)).then(function(e){if(e)return n=r,o("LSMaybeSyncIteration").STOP_ITERATION})};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){return n})},n}function c(e,t,n){var r,a=0;return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return c(e,t,n)},r.next=function(){if(a>=n)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});var r={done:!0},i=function(n){if(!(a++<t))return r=n,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,i).then(function(){return r})},r}function d(e,t){return m(e).then(function(e){return e.reduce(function(e,n){return e.then(function(){return t(n)})},o("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function m(e){var t=[],n=function(n){t.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return t})}function p(t,n,r){var a;r===void 0&&(r=[]);var i={ASC:1,DESC:-1},l=function(r,a){for(var t=r.item,l=a.item,s=0;s<n.length;s++){var u=n[s],c=u[0],d=t[c],m=l[c],p=0;if(d==null&&m==null?p=0:d==null&&m!=null?p=-1:d!=null&&m==null?p=1:p=(e||(e=o("ReStoreKeyComparer"))).compareValue(d,m),p!==0)return p*i[n[s][1]]}return 0},s,u=[],c=[],d=function(t){for(var e=[],n=r.length-1;n>=0;n--)e.push(t[r[n]]);return e},m=function(){c=u,c.sort(l),u=[]};return a={},a[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(t,n,r)},a.next=function(){if(c.length)return o("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:c.shift()});var n=function(n){var t=d(n.value.item);if(s!=null&&(e||(e=o("ReStoreKeyComparer"))).compareKey(s,t)!==0)return m(),u.push(n.value),s=t,o("LSMaybeSyncIteration").STOP_ITERATION;s=t,u.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(t,n).then(function(){return!c.length&&u.length&&m(),c.length?{done:!1,value:c.shift()}:{done:!0}})},a}function _(e){var t=0,n=function(){t++};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return(s||(s=o("I64"))).of_int32(t)})}function f(e,t){return{forEach:function(a){return m(e).then(function(e){var n=e.reduce(function(e,n){var r=n.item[t],o=(e.get(r)||0)+1;return e.set(r,o)},new(r("LSDict"))),i=o("LSSynchronousPromise").makeSynchronousPromise(void 0),l=function(){var e=u[0],n=u[1];i=i.then(function(){var r;return a((r={},r[t]=e,r.group_count=(s||(s=o("I64"))).of_int32(n),r))})};for(var u of n.entries())l();return i})}}}l.filter=u,l.slice=c,l.forEach=d,l.toArray=m,l.sortBy=p,l.count=_,l.groupBy=f}),98);
__d("LSPendingTasksPluginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});i.default=e}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(t,n,r,o,a,i,l){"use strict";var e,s="4",u="16",c=new Set([r("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function d(t){var n=c.has((e||(e=o("I64"))).to_float(t.pluginType)),r=t.context===u||t.context===s;return n||r}l.default=d}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set(["messages","attachments","reactions"]);function c(e){return u.has(e)}function d(e,t,n){return e&&t.name==="pending_tasks"&&n!=null&&r("isNativeTask")(n)}function m(e){for(var t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function p(e,t,n){n===void 0&&(n="asc");var r=e.entries(new WeakMap,n);function a(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,e.next=function(){var e={done:!0},a=0,i="start",l=[],u=function(u){for(var r=function(){var e=a,r=t[e]||{},c=r.end,d=r.start,m=u.value[0];if(d&&i==="start"){var p=(s||(s=o("ReStoreKeyComparer"))).compareValue(m[e],d[0]),_=p*(n==="asc"?1:-1)<d[1];if(_){if(i="start_verify",l=m.slice(0,e),e===m.length-1&&p===0)return{v:void 0};var f=[].concat(l,[d[0]],d[1]&&n==="asc"||!d[1]&&n==="desc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:o("LSMaybeSyncIteration").wrapNextValue(f)}}else i="check_end"}if(d&&i==="start_verify"&&!l.every(function(e,t){return(s||(s=o("ReStoreKeyComparer"))).compareValue(e,m[t])===0}))return a=0,i="start",{v:void 0};if(c&&(s||(s=o("ReStoreKeyComparer"))).compareValue(c[0],m[e])*(n==="asc"?1:-1)<c[1])return a=0,i="start",{v:o("LSMaybeSyncIteration").wrapNextValue([].concat(m.slice(0,e),n==="asc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]))};a++,i="start"},c;a<t.length;)if(c=r(),c)return c.v;return e=u,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(r,u).then(function(){return e})},e}return a()}function _(e,t,n,o,a){return{delete:function(){return n.delete.apply(n,e)},item:t,update:function(l){var i=a&&c(o.name)?{transportKey:"FBBroker"}:{},s=babelHelpers.extends({},t,l,i);if(d(a,o,s))throw r("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return n.upsert(e,m(s))}}}function f(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return f(e,t)},n.next=function(){var n={done:!0},r=function(t){return n=t,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){if(n.done)return o("LSMaybeSyncIteration").iteratorLoop(t,r)}).then(function(){return n})},n}function g(e,t,n){var r,a=[{done:!0},{done:!0}],i=function(t){var e=a[t];return a[t]={done:!0},e};return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return g(e,t,n)},r.next=function(){var r=function(t){return function(e){return t==="a"?a[0]=e:a[1]=e,o("LSMaybeSyncIteration").STOP_ITERATION}},l=o("LSSynchronousPromise").makeSynchronousPromise();return a[0].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(e,r("a"))})),a[1].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(t,r("b"))})),l.then(function(){if(a[0].done&&a[1].done)return{done:!0};if(a[0].done)return i(1);if(a[1].done)return i(0);var e=(s||(s=o("ReStoreKeyComparer"))).compareKey(a[0].value[0],a[1].value[0]);return e===0||e*(n==="asc"?1:-1)<0?i(0):i(1)})},r}var h=(e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return h},e.next=function(){return o("LSSynchronousPromise").makeSynchronousPromise({done:!0})},e);function y(e,t,n,a,i,l,s,u){var m=new Set,y=e.length>1,C=e.length===1&&e[0][1]==null,b=e.map(function(e){var r=e[0],s=e[1];return r.map(function(e){a.key_lookup===!0&&e.length!==0&&(s==null?"primary":"index "+s)+""+n.name+(JSON.stringify(e)||""),a.table_scan===!0&&e.length===0&&""+n.name;var r=e.map(function(e){return l(e,t)}),u=r.length===(s==null?n.primaryKeyIds:n.indexes[s]).length&&r.every(function(e){var t=e.end,n=e.start;return n&&t&&n[0]===t[0]&&n[1]===0&&t[1]===0});if(u){var c=function(){var e,t=!1;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=c,e.next=function(){var e;if(t)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});t=!0;var a=r.map(function(e){var t=e.start;return t[0]});return(e=s==null?i:i.index(s)).get.apply(e,a).then(function(e){if(!e)return{done:!0};var t=o("ReStoreVaulting").maybeUnvaultDbRow(e,n.name);return{done:!1,value:[a,t]}})},e};return c()}return p(s==null?i:i.index(s),r,t)})}).flat().reduce(function(n,r,o){var a=o===0&&n==null?h:n;return e.length>1?f(a,r):g(a,r,t)});function v(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,e.next=function(){var e=!0,t,a,l,p,f=function(i){e=!1;var r=i.value;if(a=r[0],l=r[1],t=C?a:n.primaryKeyIds.map(function(e){return l[e]}),d(s,n,l)){p=i,e=!0;return}if(c(n.name)&&s&&l!=null&&l.transportKey!=="FBBroker"){p=i,e=!0;return}if(y){var u=JSON.stringify(t);if(m.has(u)){e=!0;return}m.add(u)}return o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(b,f).then(function(){if(p!=null){var o=p.value[1].transportKey;r("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',u,o)}return e||t==null||l==null?{done:!0}:{done:!1,value:_(t,l,i,n,s)}})},e}return v()}l.isTranportKeyEnforcedTable=c,l.isNativePendingTaskViolation=d,l.stripUndefinedProperties=m,l.unionIterators=f,l.mergeIterators=g,l.fetch=y}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.name.match(/secure_|inbox(?!_)/i)}function s(t,n,o,a,i,l,s){return{metadata:o,table:function(d){var c=o.tableNames[o.tableIds[d]];if(n===0&&e(c))throw r("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return u(t,c,a,i,l,s)},transactionId:t.__internal__transaction_id}}function u(e,t,n,a,i,l){var s=e.transactionTable(t.name,a[a.length-1]);return{add:function(n){l==null||l.logTableOperation(t.name,"add"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker");var e=s.add(n);return r("gkx")("6636")?e:Promise.resolve(e)},fetch:function(){l==null||l.logTableOperation(t.name,"fetch"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"asc",t,n,s,c,i,a.join(", "))},fetchDesc:function(){l==null||l.logTableOperation(t.name,"fetchDesc"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"desc",t,n,s,c,i,a.join(", "))},peekNextAutoIncrementId:function(){return l==null||l.logTableOperation(t.name,"peekNextAutoIncrementId"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),s.peekNextAutoIncrementId()},put:function(n){if(l==null||l.logTableOperation(t.name,"put"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker"),o("LSIterationHelpers").isNativePendingTaskViolation(i,t,n))throw r("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=t.primaryKeyIds.map(function(e){if(n[e]!==void 0)return n[e];throw r("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")}),a=s.delete.apply(s,e).then(function(){return s.add(o("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},n)))});return r("gkx")("6636")?a:Promise.resolve(a)}}}function c(e,t){if(typeof e=="object"&&!Array.isArray(e)){var n,o;if(t==="asc"){if(Object.prototype.hasOwnProperty.call(e,"gt")&&(n=[e.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");n=[e.gte,0]}if(Object.prototype.hasOwnProperty.call(e,"lt")&&(o=[e.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");o=[e.lte,0]}}else{if(Object.prototype.hasOwnProperty.call(e,"lt")&&(n=[e.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");n=[e.lte,0]}if(Object.prototype.hasOwnProperty.call(e,"gt")&&(o=[e.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");o=[e.gte,0]}}return{end:o,start:n}}return{end:[e,0],start:[e,0]}}l.LSRuntimeDb=s,l.parseConstraint=c}),98);
__d("XPlatReactTextDecoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextDecoder;i.TextDecoder=e}),66);
__d("XPlatReactTextEncoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextEncoder;i.TextEncoder=e}),66);
__d("base64Binary",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){for(var t="",n=0;n<e.byteLength;n+=3){var r=e.subarray(n,n+3);t+=m(r)}var o=(e.byteLength+2)%3;return t.slice(0,t.length+o-2)+"==".slice(o)}function u(e){var t,n;e.length%4===0||s(0,51156);for(var r=e.length/4,o=(t=(n=e.match(/={0,2}$/))==null?void 0:n[0].length)!=null?t:0,a=new Uint8Array(r*3-o),i=0;i<r;i++){var l=p(e.slice(i*4,i*4+4));a.set(l.subarray(0,a.byteLength-i*3),i*3)}return a}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=">___?456789:;<=___\0___\0\x07\b	\n\v\f\r______\x1B !\"#$%&'()*+,-./0123";function m(e){var t,n,r=e[0]<<16|((t=e[1])!=null?t:0)<<8|((n=e[2])!=null?n:0);return String.fromCharCode(c.charCodeAt(r>>>18),c.charCodeAt(r>>>12&63),c.charCodeAt(r>>>6&63),c.charCodeAt(r&63))}function p(e){var t=d.charCodeAt(e.charCodeAt(0)-43)<<18|d.charCodeAt(e.charCodeAt(1)-43)<<12|d.charCodeAt(e.charCodeAt(2)-43)<<6|d.charCodeAt(e.charCodeAt(3)-43);return new Uint8Array([t>>>16,t>>>8&255,t&255])}l.encode=e,l.decode=u}),98);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDatascriptRuntimeTypes","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MWFBLogger","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h="LS_WEB",y=o("MessengerLogHistory").getInstance("ls");function C(e){return o("base64Binary").decode(e).buffer}var b={compareTo:function(t,n){for(var e=new Uint8Array(t),r=new Uint8Array(n),o=Math.min(e.length,r.length),a=0;a<o;a++){var i=e[a]-r[a];if(i!==0)return i}return e.length===r.length?0:e.length-r.length},eq:function(t,n){if(t==null&&n==null)return!0;if(t==null||n==null)return!1;var e=new Uint8Array(t),r=new Uint8Array(n);if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0},ge:function(t,n){return b.compareTo(t,n)>=0},gt:function(t,n){return b.compareTo(t,n)>0},le:function(t,n){return b.compareTo(t,n)<=0},lt:function(t,n){return b.compareTo(t,n)<0},neq:function(t,n){return!b.eq(t,n)},of_string:function(t){if(t!=null){var e=new(o("XPlatReactTextEncoder")).TextEncoder;return e.encode(t).buffer}},to_string:function(t){if(t!=null){var e=new(o("XPlatReactTextDecoder")).TextDecoder;return e.decode(t)}}};function v(e){if(e.length!==1)throw r("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");var t=e[0],n=parseInt(t.substr(-8),16),a=parseInt(t.substr(0,t.length-8),16);return(g||(g=o("I64"))).mk((n>>>1)+(a&1)*2147483648^-(n&1),a>>>1^-(n&1))}function S(e){var t,n;return(t=(n=e.__sproc_name__)!=null?n:e.__debugModuleSource)!=null?t:"<unknown_sproc>"}var R=(function(){var e=0;function t(t){var o=t.args,a=t.shouldLog,i=t.sprocName;if(n("cr:1088")==null||n("cr:1088").logStoredProcedureCall(i,o),!(!a||!n("cr:4790"))){var l=++e;return n("cr:4790").markerStart(r("qpl")._(25302991,"143"),l),n("cr:4790").markerAnnotate(r("qpl")._(25302991,"143"),{string:{name:i}},{instanceKey:l}),l}}function o(e,t,o){var a=e.shouldLog;!a||t==null||n("cr:4790")==null||n("cr:4790").markerEnd(r("qpl")._(25302991,"143"),o,t)}function a(e){return Math.random()*r("MetaConfig")._("10")<1}return{call:t,logSprocDone:o,shouldLogSproc:a}})(),L="Native operation timeout; transaction blocked",E=30*1e3;function k(t,n,a,i,l,g,I,T){l===void 0&&(l={}),g===void 0&&(g=void 0);var D=[],x=o("LSRuntimeDb").LSRuntimeDb(i,t,n,l,D,I,T),$=function(n,l){for(var e=arguments.length,s=new Array(e>2?e-2:0),u=2;u<e;u++)s[u-2]=arguments[u];var c;if(typeof l=="string"){if(c=a[l.toString()],c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",n,l);if(c===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",l);c.load&&(c=c.load())}else c=l;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(c).then(function(e){return e.call.apply(e,[i,t].concat(s))})},P=function(n){for(var e=arguments.length,l=new Array(e>1?e-1:0),s=1;s<e;s++)l[s-1]=arguments[s];var u;if(typeof n=="string"){if(u=a[n+".bs"]||a[n+".nop"],u==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",n);if(u===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",n);u.load&&(u=u.load())}else u=n;var c,d;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(u).then(function(e){var n,a;c=(n=(a=e.__nop_name__)!=null?a:e==null?void 0:e.toString().slice(0,250))!=null?n:"<unknown nop name>",d=T==null?void 0:T.logNativeOperationStart(c);var s=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e.apply(void 0,[i,t].concat(l)));return(m||(m=r("isPromise")))(s)&&r("justknobx")._("3895")&&(f||(f=r("ExecutionEnvironment"))).isInBrowser?Promise.race([s,new Promise(function(e,t){return r("setTimeout")(function(){return t(r("err")(L))},E)})]):s}).then(function(e){var t;return(t=d)==null||t.end(),e},function(e){var t;(t=d)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"NATIVE_OP_ID",c).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",c,(e==null?void 0:e.message)===L,(f||(f=r("ExecutionEnvironment"))).isInWorker)})},N=function(t){return t.slice(1).reduce(function(e,n){return typeof n!="function"?(r("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",n,typeof n,JSON.stringify(t.map(function(e){return typeof e}))),e):e.then(n)},t[0]())},M=function(t,n){return t.slice(n)};return{Map:r("LSDict"),blob:C,blobs:b,constructor:{n:v},count:o("LSIterationOperations").count,createArray:function(){return r("LSVec").ofArray([])},createArrayWithElements:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("LSVec").ofArray(t)},db:x,filter:o("LSIterationOperations").filter,forEach:o("LSIterationOperations").forEach,groupBy:o("LSIterationOperations").groupBy,i64:r("LSInt64Lite"),islc:o("LSIterationOperations").slice,like:function(t,n){var e=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(e).test(t)},logger:function(t){if(g)return{debug:g,info:g,mustfix:g,warn:g};var e=o("MWFBLogger").MWLogger(),n=t.startsWith("epoch mismatch"),a=t.startsWith("cursor mismatch");if(n||a){var i=function(t){y.error(t,"error");var e=(function(){return n?"epoch_mismatch":a?"cursor_mismatch":"fixme_could_not_produce_key"})();(p||(p=o("ODS"))).bumpEntityKey(3185,"lsplatform",e)};return{debug:function(t){return y.debug(t)},info:function(t){return y.debug(t)},mustfix:i,warn:i}}else return r("gkx")("26382")||(e.info=r("emptyFunction")),e},loopAsync:function(n,a){function t(i){if(r("LSInt64Lite").lt(i,n)){for(var l=i,u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l));!(m||(m=r("isPromise")))(u);){if(l=r("LSInt64Lite").add(l,v(e||(e=babelHelpers.taggedTemplateLiteralLoose(["2"])))),!r("LSInt64Lite").lt(l,n))return o("LSSynchronousPromise").makeSynchronousPromise(void 0);u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l))}return u.then(function(){return t(r("LSInt64Lite").add(l,v(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))})}return o("LSSynchronousPromise").makeSynchronousPromise(void 0)}return t(v(u||(u=babelHelpers.taggedTemplateLiteralLoose(["0"]))))},loopSync:function(t,n){for(var e=v(c||(c=babelHelpers.taggedTemplateLiteralLoose(["0"])));r("LSInt64Lite").lt(e,t);e=r("LSInt64Lite").add(e,v(d||(d=babelHelpers.taggedTemplateLiteralLoose(["2"])))))n(e)},merge:function(){function e(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue(e,t)>0?e:t}function t(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue([e[0],-e[1]],[t[0],-t[1]])<0?e:t}for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.reduce(function(n,r){var a=o("LSRuntimeDb").parseConstraint(r,"asc");return{end:n.end&&a.end?t(a.end,n.end):a.end||n.end,start:n.start&&a.start?e(a.start,n.start):a.start||n.start}},{});return babelHelpers.extends({},i.start?i.start[1]?{gt:i.start[0]}:{gte:i.start[0]}:null,i.end?i.end[1]?{lt:i.end[0]}:{lte:i.end[0]}:null)},n:v,nativeOperation:P,nativeTypeOperation:$,notnull:function(t){if(t===null)throw r("FBLogger")("messenger_web").mustfixThrow("value should not be null");return t},print:function(t){},resolve:function(t){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t)},resolveGuaranteeAsync:function(t){var e;return((e=self.Promise)!=null?e:Promise).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(t))},rm:r("LSInt64Lite").of_int32(t),sequence:N,slice:M,sortBy:o("LSIterationOperations").sortBy,storedProcedure:function(s){for(var e=arguments.length,u=new Array(e>1?e-1:0),c=1;c<e;c++)u[c-1]=arguments[c];var d;if(typeof s=="string"){if(d=a[s],d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",s);if(d===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent sproc loading failed for: %s (retryable)",s);d.load&&(d=d.load())}else d=s;var m=this;switch(t){case 0:m=k(2,n,a,i,l,g,I);break;case 2:m=k(1,n,a,i,l,g,I);break}var p,_,f,y;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(d).then(function(e){return _=S(e),f=R.shouldLogSproc(_),D.push(_),p=R.call({args:u,shouldLog:f,sprocName:_}),y=T==null?void 0:T.logSprocCallStart(_,o("LSDatascriptRuntimeTypes").TopLevelCallOrigin.UI),i.reportUsedTablesForSyncAccess(e.__tables__),e.apply(void 0,u.concat([m]))}).then(function(e){var t;return D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,2),(t=y)==null||t.end(),e},function(e){var t;throw D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,3),(t=y)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"SPROC_STACK",D.join(`
`)).warn("Sproc %s failed",_),e})},throw:function(t){throw r("FBLogger")("messenger_web").mustfixThrow(t)},toArray:o("LSIterationOperations").toArray,toJSON:function(t){return o("LSJson").stringify(t)}}}k.n=v,l.default=k}),98);
__d("LSClientSchemaType",[],(function(t,n,r,o,a,i){"use strict";var e="maw";i.MAW_SCHEMA_NAME=e}),66);
__d("LSConstants",[],(function(t,n,r,o,a,i){"use strict";var e="ls";i.LS_SCHEMA_NAME=e}),66);
__d("LSContactBlockedByViewerStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});i.default=e}),66);
__d("LSContactGender",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});i.default=e}),66);
__d("LSContactIdType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});i.default=e}),66);
__d("LSContactType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});i.default=e}),66);
__d("LSContactWorkForeignEntityType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});i.default=e}),66);
__d("LSDbV1.upgrade",[],(function(t,n,r,o,a,i){"use strict";var e={};i.afterUpgrade=e}),66);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={c:"string",t:"string"};for(var n in t){if(!Object.prototype.hasOwnProperty.call(e,n)||e[n]==null)return r("FBLogger")("messenger_web").warn('Malformed default values data, missing key "%s"',n),null;var o=e[n],a=t[n],i=typeof o;if(i!==a)return r("FBLogger")("messenger_web").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',n,i,a),null}if(typeof e.c!="string"||typeof e.t!="string")return null;var l=[],s=e.t;try{l=JSON.parse(e.c);for(var u of l)if(typeof u!="string")return null}catch(e){return null}return{columns:l,tableName:s}}function s(e){return{c:JSON.stringify(e.columns),t:e.tableName}}var u="_db_defaults_meta";l.tryParseDefaultValuesData=e,l.defaultValuesColumnToValue=s,l.defaultValuesTableName=u}),98);
__d("ReStoreCommonUtils",["isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){function o(n){return n.done?n.value:(e||(e=r("isPromise")))(n.value)?n.value.then(function(e){return o(t.next(e))}):o(t.next(n.value))}return o(t.next(n))}l.gen=s}),98);
__d("ReStoreOperationLock",["ReStoreCommonUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==="\u2757"}var s=(function(){function e(e){var t=this;this.isSync=!1,this.waitFor=null,this.waitFor=e.then(function(e){return t.waitFor=null})}var t=e.prototype;return t.chainPromiseOrValue=function(t){return this.waitFor!=null?this.waitFor.then(function(){return t("\u{1F512}")}):t("\u{1F512}")},e})(),u=(function(){function e(){this.isSync=!0}var t=e.prototype;return t.chainPromiseOrValue=function(t){return t("\u2757")},e})(),c=(function(){function e(){this.isSync=!1,this.$1=Promise.resolve()}var t=e.prototype;return t.chainPromiseOrValue=function(t){var e=this;return new Promise(function(n,r){e.$1=e.$1.then(async function(){try{n(await t("\u{1F512}"))}catch(e){r(e)}})})},e})();function d(e,t){return{next:function(r){return t.chainPromiseOrValue(function(t){return o("ReStoreCommonUtils").gen(e.next(t,r))})}}}l.isNoopLockProof=e,l.WaitForPromiseLock=s,l.NoopLock=u,l.ReStoreOperationLock=c,l.lockIterator=d}),98);
__d("ReStoreIndex",["ReQLBounds","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e,t,n,r,a){var i=this;this.entries=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").entries(i.$5,e,i.$1,i.$3,t,n,i.$2),i.$4)},this.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.$4.chainPromiseOrValue(function(e){return o("ReStoreUtils").getLocked(i.$5,new WeakMap,i.$1.name,i.$3,t,e,i.$2)})},this.getKey=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.$4.chainPromiseOrValue(function(e){return i.$6(i.$5,new WeakMap,t,e)})},this.keys=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").keys(i.$5,e,i.$1,i.$3,t,n),i.$4)},this.$3=e,this.keyFields=t.indexes[e],this.$1=t,this.$2=n,this.$4=r,this.$5=a}var t=e.prototype;return t.$6=function(t,n,r,a){var e=this,i=o("ReStoreUtils").getLocked(t,n,this.$1.name,this.$3,r,a,this.$2);return i.then(function(t){if(t!==void 0)return o("ReStoreUtils").searchKey(e.$1,t)})},e})(),u=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(t){function n(n,r,a,i,l,s){var u;return u=t.call(this,n,r,a,i,l)||this,u.subscribe=function(t,n,r){return u.$ReStoreIndex$p_3.subscribeIndex(u.$ReStoreIndex$p_1.name,u.$ReStoreIndex$p_2,t,(e||(e=o("ReQLBounds"))).extendBounds(n,u.$ReStoreIndex$p_1.indexes[u.$ReStoreIndex$p_2].length),r)},u.$ReStoreIndex$p_2=n,u.$ReStoreIndex$p_1=r,u.$ReStoreIndex$p_3=s,u}return babelHelpers.inheritsLoose(n,t),n})(s);l.ReStoreTransactionIndex=u,l.ReStoreIndex=c}),98);
__d("ReStoreTable",["FBLogger","I64","JSONStringifyBigIntSafe","LSSynchronousPromise","PromiseOrValue","ReQLBounds","ReStoreCommonUtils","ReStoreIndex","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=(e||(e=o("I64"))).cast(t);if(n===void 0)throw r("FBLogger")("messenger_web").mustfixThrow("Expected int64");return e.to_float(n)}function d(e,t,n,o,a){var i=r("JSONStringifyBigIntSafe")([t,n]),l=e.get(i);e.set(i,[l==null?o:l[0],a])}var m=(function(){function t(t,n,a,i){var l=this;this.entries=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").entries(l.$4,e,l.$1,void 0,t,n,l.$2),l.$3)},this.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.$3.chainPromiseOrValue(function(e){return o("ReStoreUtils").getLocked(l.$4,new WeakMap,l.$1.name,void 0,t,e,l.$2)})},this.keys=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").keys(l.$4,e,l.$1,void 0,t,n),l.$3)},this.peekNextAutoIncrementId=function(){return l.$5(l.$3.chainPromiseOrValue(function(t){var n=l.$1.autoIncrement;if(!n)throw r("FBLogger")("messenger_web").mustfixThrow("only supported for auto-incrementing tables");return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(o("ReStoreCommonUtils").gen(l.$4.table(l.$1.name).readSeed(new WeakMap))).then(function(t){if(t===void 0)throw r("FBLogger")("messenger_web").mustfixThrow("unexpected undefined autoIncrementSeed");return(e||(e=o("I64"))).of_float(t)})}))},this.keyFields=t.primaryKeyIds,this.$1=t,this.$2=n,this.$3=a,this.$4=i}var n=t.prototype;return n.$5=function(t){return this.$3.isSync?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t):Promise.resolve(t)},t})(),p=(function(t){function n(e,n,r,a,i,l,u,c,d,m){var p,_=n.tableNames[e];return p=t.call(this,_,r,a,i)||this,p.$ReStoreTransactionTable$p_1=new Map,p.$ReStoreTransactionTable$p_10=new Map,p.add=function(e){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(s.map(p.$ReStoreTransactionTable$p_4.beforeAdd({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r;return(r=p.$ReStoreTransactionTable$p_9)==null||r.recordLogicalWrite(),o("ReStoreCommonUtils").gen(p.$ReStoreTransactionTable$p_14(p.$ReStoreTransactionTable$p_10,n,new WeakMap,p.$ReStoreTransactionTable$p_3.name,e,t))})}),function(t){return(s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.afterAdd({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(){return t})}))},p.delete=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.beforeDelete({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r=p;return o("ReStoreCommonUtils").gen((function*(a){(a=r.$ReStoreTransactionTable$p_9)==null||a.recordLogicalWrite(),yield*o("ReStoreUtils").deleteItemLocked(r.$ReStoreTransactionTable$p_2,r.$ReStoreTransactionTable$p_10,n,new WeakMap,r.$ReStoreTransactionTable$p_3.name,e,t),yield*o("ReStoreUtils").cascadeKeyUpdatesLocked(r.$ReStoreTransactionTable$p_2,r.$ReStoreTransactionTable$p_10,n,new WeakMap,r.$ReStoreTransactionTable$p_3.name,e,void 0,r.$ReStoreTransactionTable$p_4,t,r.$ReStoreTransactionTable$p_11)})())})}))},p.put=function(e){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(s.map(p.$ReStoreTransactionTable$p_4.beforePut({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r;return(r=p.$ReStoreTransactionTable$p_9)==null||r.recordLogicalWrite(),o("ReStoreCommonUtils").gen(o("ReStoreUtils").putLocked(p.$ReStoreTransactionTable$p_2,p.$ReStoreTransactionTable$p_10,n,new WeakMap,p.$ReStoreTransactionTable$p_3.name,e,p.$ReStoreTransactionTable$p_4,t,p.$ReStoreTransactionTable$p_11))})}),function(t){return(s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.afterPut({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(){return t})}))},p.upsert=function(e,t){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.beforeUpsert({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:t}),function(n){return p.$ReStoreTransactionTable$p_13(function(r,a){var i=p;return o("ReStoreCommonUtils").gen((function*(l){(l=i.$ReStoreTransactionTable$p_9)==null||l.recordLogicalWrite(),yield*o("ReStoreUtils").upsertLocked(i.$ReStoreTransactionTable$p_2,i.$ReStoreTransactionTable$p_10,a,new WeakMap,i.$ReStoreTransactionTable$p_3.name,e,n,i.$ReStoreTransactionTable$p_4,r,i.$ReStoreTransactionTable$p_11),yield*o("ReStoreUtils").cascadeKeyUpdatesLocked(i.$ReStoreTransactionTable$p_2,i.$ReStoreTransactionTable$p_10,a,new WeakMap,i.$ReStoreTransactionTable$p_3.name,e,o("ReStoreUtils").searchKey(i.$ReStoreTransactionTable$p_3,t),i.$ReStoreTransactionTable$p_4,r,i.$ReStoreTransactionTable$p_11)})())})}))},p.index=function(e){return o("ReStoreUtils").getOrCreate(p.$ReStoreTransactionTable$p_1,e,function(){return new(o("ReStoreIndex")).ReStoreTransactionIndex(e,p.$ReStoreTransactionTable$p_3,p.$ReStoreTransactionTable$p_4,p.$ReStoreTransactionTable$p_5,p.$ReStoreTransactionTable$p_6)})},p.$ReStoreTransactionTable$p_3=_,p.$ReStoreTransactionTable$p_2=n,p.$ReStoreTransactionTable$p_4=r,p.$ReStoreTransactionTable$p_5=a,p.$ReStoreTransactionTable$p_6=i,p.$ReStoreTransactionTable$p_7=l,p.$ReStoreTransactionTable$p_8=u,p.$ReStoreTransactionTable$p_9=c,p.$ReStoreTransactionTable$p_10=d,p.$ReStoreTransactionTable$p_11=m,p}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$ReStoreTransactionTable$p_12=function(t){return this.$ReStoreTransactionTable$p_5.isSync?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t):Promise.resolve(t)},r.$ReStoreTransactionTable$p_13=function(t){var e=this;return this.$ReStoreTransactionTable$p_5.chainPromiseOrValue(function(n){var r=e.$ReStoreTransactionTable$p_6.createNested(e.$ReStoreTransactionTable$p_9);return(s||(s=o("PromiseOrValue"))).map(t(n,r),function(e){return r.flush(),e})})},r.$ReStoreTransactionTable$p_14=function*(n,r,a,i,l,s){var t=r.table(i),u=this.$ReStoreTransactionTable$p_2.tableNames[i];if(u.autoIncrement){var m=l[u.primaryKeyIds[0]],p=(e||(e=o("I64"))).of_float(yield*t.incrementSeed(a,m===void 0?m:c(m)));l[u.primaryKeyIds[0]]=p}var _=o("ReStoreUtils").appendDefaultValues(l,u.name,this.$ReStoreTransactionTable$p_11),f=o("ReStoreUtils").searchKey(u,_);if(f==null)throw new Error("Evaluating the object store's key path did not yield a value");if((yield*t.tableGet(a,f))==null){var g=o("ReStoreUtils").indicesWithKeyForValue(this.$ReStoreTransactionTable$p_3,Object.keys(u.indexes),_);yield*o("ReStoreUtils").deconflictIndicesLocked(this.$ReStoreTransactionTable$p_2,n,r,a,i,g,this.$ReStoreTransactionTable$p_4,s,this.$ReStoreTransactionTable$p_11);var h=yield*t.tableSet(a,f,_),y=h[0];yield*o("ReStoreUtils").addIdToIndices(r,a,i,y,g),d(n,i,f,void 0,_)}return f},n})(m),_=(function(e){function t(t,n,r,a,i){var l;return l=e.call(this,t,n,r,a)||this,l.$ReStoreTable$p_1=new Map,l.index=function(e){return o("ReStoreUtils").getOrCreate(l.$ReStoreTable$p_1,e,function(){return new(o("ReStoreIndex")).ReStoreIndex(e,l.$ReStoreTable$p_2,l.$ReStoreTable$p_3,l.$ReStoreTable$p_4,l.$ReStoreTable$p_5,l.$ReStoreTable$p_6)})},l.subscribe=function(e,t,n){return l.$ReStoreTable$p_6.subscribeTable(l.$ReStoreTable$p_2.name,e,(u||(u=o("ReQLBounds"))).extendBounds(t,l.$ReStoreTable$p_2.primaryKeyIds.length),n)},l.$ReStoreTable$p_2=t,l.$ReStoreTable$p_3=n,l.$ReStoreTable$p_4=r,l.$ReStoreTable$p_5=a,l.$ReStoreTable$p_6=i,l}return babelHelpers.inheritsLoose(t,e),t})(m);l.ReStoreTransactionTable=p,l.ReStoreTable=_}),98);
__d("LSStorage",["ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return(e||(e=o("ReStoreKeyComparer"))).compareKey(t,n)===0}l.areKeysEqual=s}),98);
__d("ReStoreUtils",["FBLogger","I64","JSONStringifyBigIntSafe","LSStorage","LSSynchronousPromise","Random","ReQLBounds","ReStoreCommonUtils","ReStoreKeyComparer","ReStoreOperationLock","ReStoreTable","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=500;async function d(e){for(var t=[],n=await e.next();!n.done;)t.push(n.value),n=await e.next();return t}function m(e,t,n){var o=e.indexes,a=e.primaryKeyIds,i=n==null?a:o[n];return i.map(function(e){if(t[e]!==void 0||n!=null)return t[e];throw r("FBLogger")("maw_db").mustfixThrow("primary key must be defined on object")})}function p(e,t,n){var r=n[t];return r?Object.keys(r).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(e,t)||(e[t]=r[t]),e},babelHelpers.extends({},e)):e}function _(t,n,r,a,i,l,s){function u(){var c,d=t.table(r.name),m=babelHelpers.extends({},(e||(e=o("ReQLBounds"))).extendBounds(l,(a===void 0?r.primaryKeyIds:r.indexes[a]).length),{dir:i}),p=a==null?d.tableEntries(n,m):d.indexEntries(n,a,m);return c={next:function*(t,n){var e=yield*p.next(n);if(e.done)return{done:!0};var o=e.value[1];return{done:!1,value:[e.value[0],s==null?o:s.afterEntriesNext({tableName:r.name,value:o})]}}},c[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]=u,c}return u()}function f(t,n,r,a,i,l){function s(){var u,c=t.table(r.name),d=c.keys(n,a,babelHelpers.extends({},(e||(e=o("ReQLBounds"))).extendBounds(l,(a===void 0?r.primaryKeyIds:r.indexes[a]).length),{dir:i}));return u={next:function*(t,n){return yield*d.next(n)}},u[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]=s,u}return s()}function g(e,t,n,r,a,i,l){var s=e.table(n),u=o("ReStoreOperationLock").isNoopLockProof(i)?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise:Promise.resolve.bind(Promise),c;return r!=null?c=u(o("ReStoreCommonUtils").gen(s.indexGet(t,r,a))):c=u(o("ReStoreCommonUtils").gen(s.tableGet(t,a))),c.then(function(e){if(e!==void 0)return l.afterGet({tableName:n,value:e})})}function h(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function y(e){var t=(s||(s=o("I64"))).cast(e);if(t===void 0)throw r("FBLogger")("maw_db").mustfixThrow("Expected int64");return s.to_float(t)}function C(e,t,n,o,a){var i=r("JSONStringifyBigIntSafe")([t,n]),l=e.get(i);(l==null?o:l[0])==null&&a==null?e.delete(i):e.set(i,[l==null?o:l[0],a])}function*b(e,t,n,r,a,i,l,s,c,d){function p(e,t){return e.length>=t?e:[].concat(e,[(u||(u=o("ReStoreKeyComparer"))).MAX_KEY])}if(!(l!=null&&(u||(u=o("ReStoreKeyComparer"))).compareKey(i,l)===0)){var f=e.tableNames[a],g=f.cascadeUpdates,h=f.primaryKeyIds,y=function*(){for(var o=C.indexName,a=C.tableName,u=e.tableNames[a],f=u.indexes,g=u.primaryKeyIds,y=o==null?g:f[o],v={gte:i,lte:p(i,y.length)},L=_(n,r,u,o,"asc",v),E=[],k=yield*L.next(c);!k.done;)E.push(k.value),k=yield*L.next(c);for(var I of E){var T=I[0],D=I[1],x=m(e.tableNames[a],D);if(l===void 0)yield*R(e,t,n,r,a,x,c),yield*b(e,t,n,r,a,x,void 0,s,c,d);else{var $=h.reduce(function(e,t,n){return n>=l.length||(e[y[n]]=l[n]),e},babelHelpers.extends({},D));yield*S(e,t,n,r,a,x,$,s,c,d),yield*b(e,t,n,r,a,x,m(e.tableNames[a],$),s,c,d)}}};for(var C of g)yield*y()}}function*v(e,t,n,r,a,i,l,c,d){var _=n.table(a),f=e.tableNames[a];if(f.autoIncrement){var g=i[f.primaryKeyIds[0]],h=(s||(s=o("I64"))).of_float(yield*_.incrementSeed(r,g===void 0?g:y(g)));i[f.primaryKeyIds[0]]=h}var b=m(f,i),v={},S=yield*_.tableGet(r,b),R=i;S!==void 0?v=L(f,Object.keys(f.indexes),S):R=p(i,f.name,d);var I=yield*_.tableSet(r,b,R),T=I[0],D=I[1],x=L(f,Object.keys(f.indexes),R),$=babelHelpers.extends({},x);for(var P of Object.keys($))v[P]!==void 0&&(u||(u=o("ReStoreKeyComparer"))).compareKey(v[P],$[P])===0&&(delete $[P],delete v[P]);yield*E(e,t,n,r,a,$,l,c,d),yield*k(n,r,a,T,D?x:$);for(var N of Object.keys(v))yield*_.indexDelete(r,N,v[N]);return C(t,a,b,S,R),b}function*S(e,t,n,r,a,i,l,s,u,c){var d=m(e.tableNames[a],l);o("LSStorage").areKeysEqual(i,d)||(yield*R(e,t,n,r,a,i,u)),yield*v(e,t,n,r,a,l,s,u,c)}function*R(e,t,n,r,o,a,i){var l=n.table(o),s=e.tableNames[o],u=yield*l.tableGet(r,a);if(u!==void 0){if(Object.keys(s.indexes).length)for(var c of Object.keys(s.indexes)){var d=m(s,u,c);d!=null&&(yield*l.indexDelete(r,c,d))}yield*l.tableDelete(r,a),C(t,o,a,u,void 0)}}function L(e,t,n){return t.reduce(function(t,r){var o,a=(o=e.indexPredicates)==null?void 0:o[r];if(a!=null&&!a(n))return t;var i=m(e,n,r);return t[r]=i,t},{})}function*E(e,t,n,r,o,a,i,l,s){var u=n.table(o);for(var c of Object.keys(a)){var d=a[c],p=yield*u.indexGet(r,c,d);if(p!=null){var _=m(e.tableNames[o],p);yield*R(e,t,n,r,o,_,l),yield*b(e,t,n,r,o,_,void 0,i,l,s)}}}function*k(e,t,n,r,o){var a=e.table(n);for(var i of Object.keys(o)){var l=o[i];l===void 0?yield*a.indexDelete(t,i,l):yield*a.indexSet(t,i,l,r)}}function*I(e,t,n,o,a,i,l,s,u,d){var m=n.table(s),p=i.tableNames[s];for(var f of u)yield*m.clearIds(o,f);var g=u.filter(function(e){return(p==null?void 0:p.indexes[e])!=null});if(g.length!==0)for(var h=_(n,o,p,void 0,"asc",void 0,a),y=[],C=yield*h.next(d);!C.done;){for(;!C.done&&y.length<=c;)y.push(C.value),C=yield*h.next(d);for(var b of y){var v=b[0],S=b[1],R=L(i.tableNames[s],g,S);yield*E(i,e,n,o,s,R,a,d,l);var I=r("nullthrows")(yield*m.getId(o,v));yield*k(n,o,s,I,R)}y.length=0,t==null||t()}}var T="__internal__transaction_id";function D(e,t,n,a,i,l,s){var u,c=null,d=new(o("ReStoreOperationLock")).NoopLock,m=new(o("ReStoreOperationLock")).ReStoreOperationLock,p=s==null?void 0:s.qplFlow,_=new Map,f=(u={},u[T]=r("Random").uint32(),u.reportUsedTablesForSyncAccess=function(t){c=t&&t.every(function(e){return i.tablePermitsSynchronousIO(e)})&&c!==!1},u.table=function(s){return new(o("ReStoreTable")).ReStoreTransactionTable(s,e,n,m,i,a,f,p,l,t)},u.transactionTable=function(s,u){var r=u!=null?s+"::"+u:s;return h(_,r,function(){return new(o("ReStoreTable")).ReStoreTransactionTable(s,e,n,c===!0&&u!=null?d:m,i,a,f,p,l,t)})},u),g=function(t){Object.defineProperty(f,t,{get:function(){return f.transactionTable(t)}})};for(var y of Object.keys(e.tableNames))g(y);return f}function x(e){return e.types.includes("indexeddb")}l.collectIterator=d,l.searchKey=m,l.appendDefaultValues=p,l.entries=_,l.keys=f,l.getLocked=g,l.getOrCreate=h,l.cascadeKeyUpdatesLocked=b,l.putLocked=v,l.upsertLocked=S,l.deleteItemLocked=R,l.indicesWithKeyForValue=L,l.deconflictIndicesLocked=E,l.addIdToIndices=k,l.rebuildIndicesLocked=I,l.createReStoreTransaction=D,l.isPDB=x}),98);
__d("ReStoreDefaultValueMigration",["LSPlatformLsInitLog","ReStoreDefaultValuesMetadata","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n={},r=await o("ReStoreUtils").collectIterator(t[o("ReStoreDefaultValuesMetadata").defaultValuesTableName].entries(e));for(var a of r){var i=a[0],l=a[1];if(i!=null){var s,u=o("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(l);if(u==null)continue;var c=u.columns,d=u.tableName;n[d]=(s=n[d])!=null?s:new Set;for(var m of c)n[d].add(m)}}return n}async function s(t,n,r,o){var a=await e(t,n),i={};for(var l in r.tableNames){var s=o[l];if(s!=null)for(var u in s){var c,d=(c=a[l])==null?void 0:c.has(u);if(!d){var m;i[l]=(m=i[l])!=null?m:{},i[l][u]=s[u]}}}return i}async function u(e,t,n){for(var r in t){var a=Object.keys(n[r]||{}),i={columns:a,tableName:r};await e[o("ReStoreDefaultValuesMetadata").defaultValuesTableName].put(o("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(i))}}async function c(e,t,n,r){var a=new WeakMap;o("LSPlatformLsInitLog").addPoint("default_values_update_start");var i=function(t,n){o("LSPlatformLsInitLog").addPoint("default_values_update_end_failure",{string:{default_values_update_failure_point:n,default_values_update_failure_reason:String(t)}})};try{var l=await s(a,e,t,r);try{if(n===!1)for(var c in l)for(var d=e[c].entries(a),m=await d.next();!m.done;){var p=babelHelpers.extends({},m.value[1]),_=o("ReStoreUtils").appendDefaultValues(p,c,r);await e[c].put(_),m=await d.next()}await u(e,l,r),o("LSPlatformLsInitLog").addPoint("default_values_update_end")}catch(e){i(e,"setDefaultValues")}}catch(e){i(e,"findDefaultValuesToUpdate")}}l.runMigrationForTableDefaultValuesIfNeeded=c}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=typeof e=="string"?e:null;if(t==null)return null;try{var n=JSON.parse(t);for(var r of n)if(typeof r!="string")return null;return n}catch(e){return null}}function s(t){var n={indexName:"string",keyIds:"string","predicate?":"string",tableName:"string"};for(var o in n){var a=void 0,i=o.endsWith("?");if(i)a=t[o.slice(0,-1)];else{if(!Object.prototype.hasOwnProperty.call(t,o)||t[o]==null)return r("FBLogger")("messenger_web").warn('Malformed index data, missing key "%s"',o),null;a=t[o]}var l=n[o],s=typeof a;if(a!=null&&s!==l)return r("FBLogger")("messenger_web").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',o,s,l),null}var u=e(t.keyIds);return u==null?(r("FBLogger")("messenger_web").warn('Malformed index data, key IDs "%s" are invalid',typeof t.keyIds=="string"?t.keyIds:"<"+typeof t.keyIds+">"),null):typeof t.indexName!="string"||typeof t.tableName!="string"||typeof t.predicate!="string"&&t.predicate!=null?null:babelHelpers.extends({data:u,indexName:t.indexName,tableName:t.tableName},t.predicate==null?{}:{predicate:t.predicate})}function u(e,t){if(e[0]==null||e[0].length!==t[0].length)return!0;for(var n=0;n<e[0].length;n++)if(e[0][n]!==t[0][n])return!0;return e[1]!==t[1]}function c(e){return babelHelpers.extends({indexName:e.indexName,keyIds:JSON.stringify(e.data),tableName:e.tableName},e.predicate==null?{}:{predicate:e.predicate})}var d="_db_indices_meta";l.tryParseIndexData=s,l.indicesDiffer=u,l.indexDataToValue=c,l.indicesTableName=d}),98);
__d("ReStoreIndicesMigration",["LSPlatformLsInitLog","ReStoreCommonUtils","ReStoreIndexMetadata","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n={},r=await o("ReStoreUtils").collectIterator(t[o("ReStoreIndexMetadata").indicesTableName].entries(e));for(var a of r){var i=a[0],l=a[1];if(i!=null){var s,u=o("ReStoreIndexMetadata").tryParseIndexData(l);if(u==null)continue;var c=u.indexName,d=u.tableName;n[d]=(s=n[d])!=null?s:{},n[d][c]=babelHelpers.extends({index:u.data,key:i},u.predicate==null?{}:{predicate:u.predicate})}}return n}async function s(t,n,r){var a=await e(t,n),i={};for(var l in r.tableNames){var s=r.tableNames[l];for(var u in s.indexes){var c,d,m=[s.indexes[u],(c=s.indexPredicates)==null||(c=c[u])==null?void 0:c.toString()],p=(d=a[l])==null?void 0:d[u];if(o("ReStoreIndexMetadata").indicesDiffer([p==null?void 0:p.index,p==null?void 0:p.predicate],m)){var _;i[l]=(_=i[l])!=null?_:{},i[l][u]=m}}}var f={};for(var g in r.tableNames)if(g in a){var h=a[g];for(var y in h){var C,b=h[y],v=(C=r.tableNames[g])==null||(C=C.indexes)==null?void 0:C[y];if(v==null){var S;f[g]=(S=f[g])!=null?S:{},f[g][y]=b}}}return{toRemove:f,toUpdate:i}}async function u(e,t){for(var n in t){var r=t[n];for(var a in r){var i=r[a],l=i[0],s=i[1],u=babelHelpers.extends({data:l,indexName:a,tableName:n},s==null?{}:{predicate:s});await e[o("ReStoreIndexMetadata").indicesTableName].put(o("ReStoreIndexMetadata").indexDataToValue(u))}}}async function c(e,t){for(var n in t){var r=t[n];for(var a in r){var i,l=r[a].key;await(i=e[o("ReStoreIndexMetadata").indicesTableName]).delete.apply(i,l)}}}function d(e,t,n,r,a){return new(o("ReStoreOperationLock")).ReStoreOperationLock().chainPromiseOrValue(function(i){return o("ReStoreCommonUtils").gen(o("ReStoreUtils").rebuildIndicesLocked(e.changedKeys,e.clearCache,e.storeTx,new WeakMap,e.hooksManager,n,r,t,a,i))})}function m(e,t,n,r){var a=new WeakMap;o("LSPlatformLsInitLog").addPoint("index_migration_start");var i=function(t,n){o("LSPlatformLsInitLog").addPoint("index_migration_end_failure",{string:{index_migration_failure_point:n,index_migration_failure_reason:String(t)}})};return s(a,e.transaction,t).then(async function(a){var i=a.toRemove,l=a.toUpdate,s=Array.from(new Set([].concat(Object.keys(l),Object.keys(i))));if(o("LSPlatformLsInitLog").addAnnotations({int:{index_migration_rebuild_tables_count:s.length}}),r===!1){for(var m of s)if(t.tableNames[m]!=null){var p,_,f=Array.from(new Set([].concat(Object.keys((p=l[m])!=null?p:{}),Object.keys((_=i[m])!=null?_:{}))));await d(e,m,t,n,f)}}await u(e.transaction,l),await c(e.transaction,i),o("LSPlatformLsInitLog").addPoint("index_migration_end")},function(e){return i(e,"findIndicesToUpdateOrRemove")}).catch(function(e){return i(e,"rebuildIndices")})}l.runMigrationForIndicesIfNeeded=m}),98);
__d("ReStoreMigrateUtil",["$InternalEnum","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["UPDATE_METADATA","UPGRADE_COMPLETE","NO_UPGRADE_NEEDED"]);function s(e,t){var n="V"+t;return n in e?n:null}function u(e,t){return c.apply(this,arguments)}function c(){return c=babelHelpers.wrapAsyncGenerator(function*(e,t){for(var n=e.iterator(new WeakMap),r=[],o=yield babelHelpers.awaitAsyncGenerator(n.next());!o.done;){var a=o.value,i=a[0],l=a[1];r.push(l),r.length===t&&(yield r,r=[]),o=yield babelHelpers.awaitAsyncGenerator(n.next())}r.length&&(yield r)}),c.apply(this,arguments)}async function d(e,t,n){var r=!1,a=!1,i;try{for(var l=babelHelpers.asyncIterator(u(o("ReQL").fromTableAscending(e),100)),s;r=!(s=await l.next()).done;r=!1){var c=s.value;await Promise.all(c.map(function(n){return t(n).then(e.put)})),n==null||n()}}catch(e){a=!0,i=e}finally{try{r&&l.return!=null&&await l.return()}finally{if(a)throw i}}}function m(e,t){function n(t){if(t!=null){var n={};for(var r in t)n[e+"_"+r]=t[r];return n}}return{bool:n(t.bool),int:n(t.int),string:n(t.string)}}l.ReStoreMigrateResult=e,l.getVersionFromNumber=s,l.fetchReQLBatch=u,l.upgradeTableEntries=d,l.prefixAnnotations=m}),98);
__d("ReStoreHashMigration",["JSONStringifyBigIntSafe","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.values(e.tableNames).map(function(e){var t;return babelHelpers.extends({},e,{indexPredicates:Object.entries((t=e.indexPredicates)!=null?t:{}).map(function(e){var t=e[0],n=e[1];return[t,n.toString()]})})});return r("JSONStringifyBigIntSafe")(t)}async function s(e,t,n,r){var a,i,l=r.loggers,s=l.logHistory,u=l.userFlow,c=r.storeTx,d=r.transaction,m=o("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(n),p=o("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash(t);u==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(e,{int:{defaultValuesVersion:m,schemaVersion:p}}));var _=new(o("ReStorePersistedMetadata")).ReStorePersistedSchemaVersion(e),f=new(o("ReStorePersistedMetadata")).ReStorePersistedDefaultValuesVersion(e),g=(a=await _.read(c))==null?void 0:a.schemaVersion,h=(i=await f.read(c))==null?void 0:i.defaultValuesVersion;if(s==null||s.debug("storeSchemaVersion: "+(g!=null?g:"null")),s==null||s.debug("storeDefaultValuesVersion: "+(h!=null?h:"null")),g!=null&&(u==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(e,{int:{storeDefaultValuesVersion:h,storeSchemaVersion:g}}))),g===p&&h===m)return o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED;var y=g==null;return await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(d,t,y,n),s==null||s.debug("migration default values finished"),await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(r,t,n,y),s==null||s.debug("migration indices finished"),_.write(c,{schemaVersion:p}),f.write(c,{defaultValuesVersion:m}),s==null||s.debug("version is written"),s==null||s.debug("migration hash end"),u==null||u.addPoint("migration_hash_end"),y?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE}l.serializeTableData=e,l.runHashMigration=s}),98);
__d("ReStorePersistenceIds",[],(function(t,n,r,o,a,i){"use strict";var e="nextId",l="seed";function s(e){return e}i.idForNextId=e,i.idForSeed=l,i.castPersistenceId=s}),66);
__d("ReStorePersistedMetadata",["JSONStringifyBigIntSafe","ReStoreCommonUtils","ReStoreHashMigration","ReStorePersistenceIds","hashString"],(function(t,n,r,o,a,i,l){"use strict";var e="_db_schema_meta",s=(function(){function t(e){this.$1=o("ReStorePersistenceIds").castPersistenceId(e)}var n=t.prototype;return n.read=async function(n){var t=await o("ReStoreCommonUtils").gen(n.table(e).readData(new WeakMap,this.$1));return t},n.write=function(n,r){n.table(e).writeData(new WeakMap,this.$1,r)},n.getId=function(){return this.$1},t})(),u=(function(e){function t(t){return e.call(this,t+"_schema_version")||this}return babelHelpers.inheritsLoose(t,e),t.hash=function(t){return r("hashString")(o("ReStoreHashMigration").serializeTableData(t))},t})(s),c=(function(e){function t(){return e.call(this,"custom_migration_value_version")||this}return babelHelpers.inheritsLoose(t,e),t})(s),d=(function(e){function t(t){return e.call(this,t+"_default_value_version")||this}return babelHelpers.inheritsLoose(t,e),t.hash=function(t){return r("hashString")(r("JSONStringifyBigIntSafe")(t))},t})(s);l.schemaMetadataTableName=e,l.ReStorePersistedMetadata=s,l.ReStorePersistedSchemaVersion=u,l.ReStorePersistedCustomMigrationVersion=c,l.ReStorePersistedDefaultValuesVersion=d}),98);
__d("ReStoreMetadata",["ReStoreDefaultValuesMetadata","ReStoreIndexMetadata","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return!0}function u(e){var t=e.reduce(function(e,t){return function(n){return n[t]!=null&&e(n)}},s);return t.toString=function(){return"dynamic predicate on ["+e.join(",")+"]"},t}function c(e){return function(n){var t={},r={};for(var o of n)for(var a of o){var i,l,s,u,c;a.id!=null&&(t[a.id]=a.name),r[a.name]={autoIncrement:(i=a.auto_increment)!=null?i:!1,cascadeUpdates:(l=e[a.name])!=null?l:[],indexes:(s=Object.fromEntries(Object.entries((u=a.indexes)!=null?u:{}).map(function(e){var t=e[0],n=e[1].columns;return[t,n]})))!=null?s:{},indexPredicates:Object.fromEntries(Object.entries((c=a.indexes)!=null?c:{}).filter(function(e){var t=e[0],n=e[1];return n.predicate}).map(function(e){var t=e[0],n=e[1];return[t,n.predicate]})),name:a.name,primaryKeyIds:a.primary_key}}return{tableIds:t,tableNames:r}}}var d=(e={},e[o("ReStoreDefaultValuesMetadata").defaultValuesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]},e[o("ReStoreIndexMetadata").indicesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]},e[o("ReStorePersistedMetadata").schemaMetadataTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStorePersistedMetadata").schemaMetadataTableName,primaryKeyIds:[]},e);l.createPredicate=u,l.getBuildTableData=c,l.RESTORE_METADATA_TABLES=d}),98);
__d("ReStoreVersionedSchemaProviderUtil",["ReStoreMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n={tableIds:{},tableNames:o("ReStoreMetadata").RESTORE_METADATA_TABLES},r={};for(var a of Object.keys(e)){var i,l=e[a],s={},u={};for(var c in l.indexes)s[c]=l.indexes[c].fields,l.indexes[c].ignoreNulls.length>0&&(u[c]=o("ReStoreMetadata").createPredicate(l.indexes[c].ignoreNulls));n.tableNames[a]={autoIncrement:l.autoIncrement,cascadeUpdates:(i=t==null?void 0:t[a])!=null?i:[],indexes:s,indexPredicates:u,name:a,primaryKeyIds:l.primaryKey.fields},l.id!=null&&(n.tableIds[l.id]=a),Object.keys(l.defaults).length>0&&(r[a]=l.defaults)}return{defaults:r,tableData:n}}l.getTableData=e}),98);
__d("LSDbV1",["I64MigrationHelper","LSDbV1.upgrade","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreVersionedSchemaProviderUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({_user_info:{autoIncrement:!1,defaults:{},id:4,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},acs_request_context:{autoIncrement:!1,defaults:{},id:310,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},ad_context:{autoIncrement:!1,defaults:{},id:160,indexes:{},primaryKey:{fields:["adId"],ignoreNulls:[]}},admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:(e=o("I64MigrationHelper")).cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ai_bot_feedback_submission_status:{autoIncrement:!1,defaults:{},id:315,indexes:{},primaryKey:{fields:["botResponseId"],ignoreNulls:[]}},ai_bot_search_metadata:{autoIncrement:!1,defaults:{contactViewerRelationship:e.cast([0,0]),displayName:"",score:0},id:298,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},anonymous_task_context:{autoIncrement:!1,defaults:{failureCount:e.cast([0,0])},id:311,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},attachment_conversion:{autoIncrement:!1,defaults:{},id:164,indexes:{},primaryKey:{fields:["attachmentFbid"],ignoreNulls:[]}},attachment_ctas:{autoIncrement:!1,defaults:{},id:19,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}},attachments_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,mediaGroup:e.cast([0,0])},id:17,indexes:{},primaryKey:{fields:["threadKey","mediaGroup","minTimestampMs"],ignoreNulls:[]}},audio_channel_events:{autoIncrement:!1,defaults:{},id:238,indexes:{},primaryKey:{fields:["eventId","roomId"],ignoreNulls:[]}},available_reactions:{autoIncrement:!1,defaults:{},id:188,indexes:{},primaryKey:{fields:["emojiIdx"],ignoreNulls:[]}},avatar_settings:{autoIncrement:!1,defaults:{enableAvatarHotlike:!1},id:209,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},bot_profile_info_v2:{autoIncrement:!1,defaults:{hasEmbodiment:!1},id:299,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},bots:{autoIncrement:!1,defaults:{},id:230,indexes:{},primaryKey:{fields:["threadKey","botId"],ignoreNulls:[]}},business_comm_items:{autoIncrement:!1,defaults:{},id:234,indexes:{},primaryKey:{fields:["threadKey","entId"],ignoreNulls:[]}},business_support_case_details:{autoIncrement:!1,defaults:{},id:222,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},business_support_notification_settings:{autoIncrement:!1,defaults:{},id:236,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},business_thread_suggestions:{autoIncrement:!1,defaults:{},id:290,indexes:{},primaryKey:{fields:["threadKey","suggestionType"],ignoreNulls:[]}},client_accounts:{autoIncrement:!0,defaults:{},id:272,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_message_translation_info:{autoIncrement:!1,defaults:{},id:324,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_messages:{autoIncrement:!0,defaults:{disabledActionsReason:e.cast([0,0]),isForwarded:!1,isHidden:!1,isReadonly:!1,isReplyOnly:!1,isTombstoned:!1,messageContentSubtype:e.cast([0,0]),messageContentType:e.cast([0,0]),messageCreationType:e.cast([0,0]),messageEphemeralityType:e.cast([0,0]),messageSource:e.cast([0,0]),replyMessageTextSize:e.cast([0,0]),replyStatus:e.cast([0,0]),replyVicinityStatus:e.cast([0,0]),sendStatus:e.cast([0,0]),shouldHideInSnippet:!1,shouldPersist:!1,textSize:e.cast([0,0])},id:273,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_participants:{autoIncrement:!0,defaults:{capabilities1:e.cast([0,0]),capabilities2:e.cast([0,0]),isPending:!1,readActionTsMs:e.cast([0,0])},id:274,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}},client_threads:{autoIncrement:!0,defaults:{capabilities1:e.cast([0,0]),capabilities2:e.cast([0,0]),groupMemberAddMode:e.cast([0,0]),isAdminSnippet:!1,isHidden:!1,isHotlikeSnippet:!1,isPending:!1,isShadowThread:!1,isTombstoned:!1,pinnedMessagesCount:e.cast([0,0])},id:276,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_web_pinned_messages:{autoIncrement:!1,defaults:{},id:328,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","offlineThreadingId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","offlineThreadingId","pinnedTimestampMs"],ignoreNulls:[]}},client_xmas:{autoIncrement:!0,defaults:{},id:314,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},cm_category_list:{autoIncrement:!1,defaults:{},id:182,indexes:{},primaryKey:{fields:["communityId","categoryId"],ignoreNulls:[]}},cm_channel_events:{autoIncrement:!1,defaults:{},id:201,indexes:{eventsInThread:{fields:["threadId","eventId"],ignoreNulls:[]}},primaryKey:{fields:["eventId","threadId"],ignoreNulls:[]}},cm_channel_list:{autoIncrement:!1,defaults:{},id:167,indexes:{threadIdCommunityId:{fields:["threadId","communityId"],ignoreNulls:[]}},primaryKey:{fields:["communityId","threadId"],ignoreNulls:[]}},cm_community_list:{autoIncrement:!1,defaults:{},id:166,indexes:{},primaryKey:{fields:["communityId"],ignoreNulls:[]}},cm_search_nullstate_metadata:{autoIncrement:!1,defaults:{score:0},id:289,indexes:{},primaryKey:{fields:["threadKey","scoreType"],ignoreNulls:[]}},community_chat_admin_assist_command_sequences:{autoIncrement:!1,defaults:{},id:291,indexes:{},primaryKey:{fields:["commandSequenceId"],ignoreNulls:[]}},community_chat_message_seen_count:{autoIncrement:!1,defaults:{},id:221,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},community_chat_poll_options:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:e.cast([0,0]),sortKeyVotingTimestamp:e.cast([0,0]),voteCount:e.cast([0,0])},id:224,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},community_chat_poll_votes:{autoIncrement:!1,defaults:{},id:225,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},community_chat_poll_votes_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:244,indexes:{},primaryKey:{fields:["pollId","optionId","minTimestampMs"],ignoreNulls:[]}},community_chat_polls:{autoIncrement:!1,defaults:{pollType:e.cast([0,0])},id:223,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},community_direct_invites_presets:{autoIncrement:!1,defaults:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:e.cast([0,0]),pictureUrlExpirationTimestampMs2:e.cast([0,0]),presetTypeV2:"ALL_MEMBERS"},id:199,indexes:{},primaryKey:{fields:["communityId","presetType","source"],ignoreNulls:[]}},community_events:{autoIncrement:!1,defaults:{},id:202,indexes:{},primaryKey:{fields:["eventId","communityId"],ignoreNulls:[]}},community_folders:{autoIncrement:!1,defaults:{capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),inviteStatus:e.cast([0,0]),notificationMutedUntil:e.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_members:{autoIncrement:!1,defaults:{adminActions:e.cast([0,0]),channelBadges:e.cast([0,0]),contactCapabilities:e.cast([0,0]),requestId:"",source:e.cast([0,0]),threadRoles:e.cast([0,0])},id:170,indexes:{communityContact:{fields:["communityId","contactId","requestId","source","name"],ignoreNulls:[]},communitySource:{fields:["communityId","source","requestId","contactId","name"],ignoreNulls:[]}},primaryKey:{fields:["communityId","contactId","source","requestId"],ignoreNulls:[]}},community_members_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:189,indexes:{},primaryKey:{fields:["communityId","isAdmin","minName","source","requestId"],ignoreNulls:[]}},community_messaging_aggregated_copresence_counts_for_chat:{autoIncrement:!1,defaults:{},id:204,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},community_messaging_aggregated_user_presence_counts_for_community:{autoIncrement:!1,defaults:{},id:203,indexes:{},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_rules:{autoIncrement:!1,defaults:{},id:254,indexes:{},primaryKey:{fields:["communityId","ruleId"],ignoreNulls:[]}},community_surface_ranges:{autoIncrement:!1,defaults:{},id:253,indexes:{},primaryKey:{fields:["surfaceType","communityKey"],ignoreNulls:[]}},community_thread_sync_info:{autoIncrement:!1,defaults:{},id:294,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},connectivity_status:{autoIncrement:!0,defaults:{},id:114,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},contact_upload_settings:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:74,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},contextual_profile_v1:{autoIncrement:!1,defaults:{},id:216,indexes:{associatedEntityIdAndOwner:{fields:["associatedEntityId","ownerId"],ignoreNulls:[]}},primaryKey:{fields:["ownerId","associatedEntityId"],ignoreNulls:[]}},cowatch_sessions:{autoIncrement:!1,defaults:{},id:80,indexes:{},primaryKey:{fields:["cowatchSessionId"],ignoreNulls:[]}},ctas:{autoIncrement:!1,defaults:{},id:15,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},custom_thread_commands:{autoIncrement:!1,defaults:{isOpenPersistentMenu:!1},id:296,indexes:{commandId:{fields:["commandId"],ignoreNulls:[]},rank:{fields:["threadKey","rank"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","commandId"],ignoreNulls:[]}},cutover_threads:{autoIncrement:!1,defaults:{isMigrated:!1,showOpenMessageHistory:!1},id:193,indexes:{},primaryKey:{fields:["openThreadId"],ignoreNulls:[]}},data_trace_addon:{autoIncrement:!0,defaults:{timestampMs:e.cast([0,0])},id:154,indexes:{traceIdAddonId:{fields:["traceId","addonId"],ignoreNulls:[]}},primaryKey:{fields:["addonId"],ignoreNulls:[]}},data_trace_meta:{autoIncrement:!1,defaults:{foregroundTimestampMs:e.cast([0,0]),initTimestampMs:e.cast([0,0]),shouldFlush:!1,traceType:e.cast([0,0])},id:153,indexes:{shouldFlushInitTimestampMsTraceId:{fields:["shouldFlush","initTimestampMs","traceId"],ignoreNulls:[]}},primaryKey:{fields:["traceId"],ignoreNulls:[]}},device_metadata:{autoIncrement:!0,defaults:{},id:185,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},discoverable_chat_participants:{autoIncrement:!1,defaults:{source:e.cast([0,0])},id:248,indexes:{},primaryKey:{fields:["threadId","contactId","source"],ignoreNulls:[]}},discoverable_chat_participants_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:249,indexes:{},primaryKey:{fields:["threadId","source","minName"],ignoreNulls:[]}},discoverable_chats_personal_inbox_info:{autoIncrement:!1,defaults:{},id:326,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}},e2ee_dummy_table_for_sync:{autoIncrement:!1,defaults:{},id:171,indexes:{},primaryKey:{fields:["placeholder"],ignoreNulls:[]}},edit_message_history:{autoIncrement:!0,defaults:{sendStatus:e.cast([0,0])},id:322,indexes:{originalMsgPkEditTs:{fields:["originalMessagePk","serverAdjustedEditTsMs"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},emoji_sets:{autoIncrement:!1,defaults:{},id:151,indexes:{},primaryKey:{fields:["categoryIdx","emojiIdx","type_"],ignoreNulls:[]}},encrypted_backup_restore_task_payload_context:{autoIncrement:!1,defaults:{},id:190,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},encrypted_backups:{autoIncrement:!0,defaults:{authorityLevel:e.cast([0,0]),hasOtcEligibleDevices:!1},id:172,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_client_restore_status:{autoIncrement:!1,defaults:{},id:231,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},encrypted_backups_debug_metadata:{autoIncrement:!1,defaults:{},id:206,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:217,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_dyi_backup_restore_status:{autoIncrement:!0,defaults:{},id:208,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata:{autoIncrement:!1,defaults:{},id:207,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:218,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_message_backup_status:{autoIncrement:!1,defaults:{},id:213,indexes:{},primaryKey:{fields:["messagePk"],ignoreNulls:[]}},encrypted_backups_metadata:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:196,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},encrypted_backups_otc_notification_sending_status:{autoIncrement:!0,defaults:{},id:285,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_status_trigger:{autoIncrement:!0,defaults:{},id:195,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_virtual_devices:{autoIncrement:!0,defaults:{removalStatus:e.cast([0,1]),requiresHsmMigration:!1,virtualDeviceType:e.cast([0,1])},id:184,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},epd_cookie_settings:{autoIncrement:!1,defaults:{},id:163,indexes:{},primaryKey:{fields:[],ignoreNulls:[]}},experiences_shared_state:{autoIncrement:!1,defaults:{},id:282,indexes:{},primaryKey:{fields:["stateKey"],ignoreNulls:[]}},fb_events:{autoIncrement:!1,defaults:{},id:200,indexes:{},primaryKey:{fields:["eventId"],ignoreNulls:[]}},fb_transport_contacts:{autoIncrement:!0,defaults:{},id:240,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},feature_limits:{autoIncrement:!1,defaults:{},id:150,indexes:{},primaryKey:{fields:["type_"],ignoreNulls:[]}},filtered_messages_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:211,indexes:{},primaryKey:{fields:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"],ignoreNulls:[]}},filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0]),secondaryThreadRangeFilter:e.cast([0,0]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}},focus_mode_ctas:{autoIncrement:!1,defaults:{},id:30,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},folder_metadata:{autoIncrement:!1,defaults:{},id:35,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},forward_content:{autoIncrement:!1,defaults:{},id:129,indexes:{},primaryKey:{fields:["value","type_"],ignoreNulls:[]}},gdpr_settings:{autoIncrement:!1,defaults:{},id:75,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},gradient_colors:{autoIncrement:!1,defaults:{},id:117,indexes:{},primaryKey:{fields:["themeFbid","gradientIndex"],ignoreNulls:[]}},group_invitations_pending:{autoIncrement:!1,defaults:{communityJoinRequestStatus:e.cast([0,0]),communityParticipationControlRequestStatus:e.cast([0,0]),communityParticipationControlSetting:e.cast([0,0])},id:235,indexes:{},primaryKey:{fields:["linkHash"],ignoreNulls:[]}},group_invites:{autoIncrement:!1,defaults:{},id:197,indexes:{},primaryKey:{fields:["threadKey","inviterId","inviteeId"],ignoreNulls:[]}},group_membership_approval_requests:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:26,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},horizon_contact_info:{autoIncrement:!1,defaults:{},id:323,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_contact_info:{autoIncrement:!1,defaults:{e2eeEligibility:e.cast([0,0])},id:176,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:e.cast([0,0]),igDmSettingsTtlSec:e.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},ig_thread_labels:{autoIncrement:!1,defaults:{labelTimestampMs:e.cast([0,0])},id:318,indexes:{},primaryKey:{fields:["threadKey","labelType"],ignoreNulls:[]}},igd_xma_receiver_fetch:{autoIncrement:!1,defaults:{},id:316,indexes:{},primaryKey:{fields:["messageId"],ignoreNulls:[]}},in_thread_banner:{autoIncrement:!1,defaults:{},id:118,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},in_thread_banner_ctas:{autoIncrement:!1,defaults:{},id:119,indexes:{},primaryKey:{fields:["bannerId","ctaId"],ignoreNulls:[]}},in_thread_banner_overflow_menu:{autoIncrement:!1,defaults:{},id:120,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},inbox_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:198,indexes:{},primaryKey:{fields:["syncGroup"],ignoreNulls:[]}},inbox_view_state:{autoIncrement:!1,defaults:{value:""},id:277,indexes:{},primaryKey:{fields:["interface_","configName"],ignoreNulls:[]}},inbox_view_state_v2:{autoIncrement:!1,defaults:{value:""},id:281,indexes:{},primaryKey:{fields:["configName"],ignoreNulls:[]}},lightspeed_task_context:{autoIncrement:!1,defaults:{requiresAuthentication:!1},id:306,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},linked_groups:{autoIncrement:!1,defaults:{},id:130,indexes:{threadKey:{fields:["threadKey"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},live_location_sharers:{autoIncrement:!1,defaults:{},id:149,indexes:{},primaryKey:{fields:["threadKey","userId"],ignoreNulls:[]}},local_message_persistence_store:{autoIncrement:!0,defaults:{},id:301,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_deleted_messages:{autoIncrement:!0,defaults:{},id:303,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_supplemental:{autoIncrement:!0,defaults:{},id:302,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_tag_index:{autoIncrement:!0,defaults:{},id:304,indexes:{offlineThreadingId:{fields:["offlineThreadingId","threadId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},m_suggestions:{autoIncrement:!1,defaults:{},id:21,indexes:{},primaryKey:{fields:["threadKey","timestampMs","suggestionId"],ignoreNulls:[]}},mailbox_metadata:{autoIncrement:!1,defaults:{},id:25,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mailbox_task_completion_api_tasks:{autoIncrement:!1,defaults:{},id:233,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},mailbox_task_completion_notification_context:{autoIncrement:!1,defaults:{},id:232,indexes:{},primaryKey:{fields:["notificationScopeKey"],ignoreNulls:[]}},media_send_jobs:{autoIncrement:!1,defaults:{},id:51,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},message_requests:{autoIncrement:!1,defaults:{},id:34,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},message_search_queries:{autoIncrement:!1,defaults:{},id:70,indexes:{},primaryKey:{fields:["type_","query","threadKeyV2"],ignoreNulls:[]}},message_search_results:{autoIncrement:!1,defaults:{},id:69,indexes:{},primaryKey:{fields:["type_","query","threadKey","globalIndex"],ignoreNulls:[]}},messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},messages_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1},id:13,indexes:{},primaryKey:{fields:["threadKey","minTimestampMs","minMessageId"],ignoreNulls:[]}},messages_status:{autoIncrement:!1,defaults:{timestampMs:e.cast([0,0])},id:33,indexes:{},primaryKey:{fields:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"],ignoreNulls:[]}},messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:e.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},messaging_settings:{autoIncrement:!1,defaults:{},id:83,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mi_act_mapping_table:{autoIncrement:!1,defaults:{},id:173,indexes:{chat_id:{fields:["clientThreadPk"],ignoreNulls:[]},fk_threads:{fields:["serverThreadKey"],ignoreNulls:[]},jid:{fields:["jid"],ignoreNulls:[]}},primaryKey:{fields:["serverThreadKey","clientThreadPk","jid"],ignoreNulls:[]}},msg_pinned_messages_v2:{autoIncrement:!1,defaults:{},id:205,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","pinnedTimestampMs"],ignoreNulls:[]}},msgr_quiet_time:{autoIncrement:!1,defaults:{},id:317,indexes:{quietTimeId:{fields:["quietTimeId"],ignoreNulls:[]}},primaryKey:{fields:["quietTimeId"],ignoreNulls:[]}},mwb_safety_interventions:{autoIncrement:!1,defaults:{},id:327,indexes:{},primaryKey:{fields:["interventionId","interventionEntId"],ignoreNulls:[]}},network_requests:{autoIncrement:!1,defaults:{},id:3,indexes:{},primaryKey:{fields:["taskQueueName","syncDatabaseId"],ignoreNulls:[]}},new_payment_credential_option:{autoIncrement:!1,defaults:{},id:90,indexes:{},primaryKey:{fields:["credentialType"],ignoreNulls:[]}},notification_settings:{autoIncrement:!1,defaults:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},id:175,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},offline_queue_thread_status:{autoIncrement:!1,defaults:{},id:295,indexes:{},primaryKey:{fields:["threadJid"],ignoreNulls:[]}},ohai_gateway_key_configs:{autoIncrement:!1,defaults:{},id:313,indexes:{},primaryKey:{fields:["keyId"],ignoreNulls:[]}},p2m_charge:{autoIncrement:!1,defaults:{},id:97,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice:{autoIncrement:!1,defaults:{},id:94,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice_attachment:{autoIncrement:!1,defaults:{},id:95,indexes:{},primaryKey:{fields:["orderId","productItemId"],ignoreNulls:[]}},p2p_request_v2:{autoIncrement:!1,defaults:{},id:100,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},p2p_transfer_v2:{autoIncrement:!1,defaults:{},id:101,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}},participant_list_queries:{autoIncrement:!1,defaults:{},id:219,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},participant_search_queries:{autoIncrement:!1,defaults:{},id:214,indexes:{},primaryKey:{fields:["query","threadKey"],ignoreNulls:[]}},participants:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),deliveredWatermarkTimestampMs:e.cast([0,0]),groupParticipantJoinState:e.cast([0,0]),readActionTimestampMs:e.cast([0,0]),readWatermarkTimestampMs:e.cast([0,0]),threadRoles:e.cast([0,0])},id:14,indexes:{contactIdThreadKey:{fields:["contactId","threadKey"],ignoreNulls:[]},threadKeyDeliveredWatermarkTimestampMs:{fields:["threadKey","deliveredWatermarkTimestampMs","contactId"],ignoreNulls:[]},threadKeyReadWatermarkTimestampMs:{fields:["threadKey","readWatermarkTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},payment_auth_request_results:{autoIncrement:!1,defaults:{},id:108,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_client_auth_token:{autoIncrement:!1,defaults:{},id:107,indexes:{},primaryKey:{fields:["userId","deviceId","appId"],ignoreNulls:[]}},payment_method:{autoIncrement:!1,defaults:{},id:89,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_p2p_risk_verification:{autoIncrement:!1,defaults:{},id:98,indexes:{},primaryKey:{fields:["requestId","transactionId"],ignoreNulls:[]}},payment_pin_verification_results:{autoIncrement:!1,defaults:{},id:113,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_price_list_item:{autoIncrement:!1,defaults:{},id:96,indexes:{},primaryKey:{fields:["orderId","id"],ignoreNulls:[]}},payment_server_request_results:{autoIncrement:!1,defaults:{},id:109,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_transaction_v2:{autoIncrement:!1,defaults:{},id:99,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},payment_type_bank_v2:{autoIncrement:!1,defaults:{},id:88,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_type_card:{autoIncrement:!1,defaults:{},id:86,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_type_paypal:{autoIncrement:!1,defaults:{},id:85,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_user_auth:{autoIncrement:!1,defaults:{},id:106,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_eligibility:{autoIncrement:!1,defaults:{},id:92,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_ofac_blacklisted_countries:{autoIncrement:!1,defaults:{},id:93,indexes:{},primaryKey:{fields:["isoCountryCode"],ignoreNulls:[]}},payments_transaction_details_core:{autoIncrement:!1,defaults:{},id:103,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},payments_transaction_details_ctas:{autoIncrement:!1,defaults:{},id:104,indexes:{},primaryKey:{fields:["transactionId","ctaId"],ignoreNulls:[]}},payments_transaction_details_rows:{autoIncrement:!1,defaults:{},id:105,indexes:{},primaryKey:{fields:["transactionId","rowOrder"],ignoreNulls:[]}},paypal_funding_options:{autoIncrement:!1,defaults:{},id:91,indexes:{},primaryKey:{fields:["optionId"],ignoreNulls:[]}},pending_backups_context_v2:{autoIncrement:!0,defaults:{isInstamadillo:!1},id:177,indexes:{fk_pending_tasks:{fields:["pendingBackupTaskId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_fire_and_forget_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:e.cast([0,0]),priority:e.cast([0,0])},id:5,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:e.cast([0,0]),failureCount:e.cast([0,0]),firstExecutedTimestampMs:e.cast([0,0]),minTimeToSyncTimestampMs:e.cast([0,0]),pluginType:e.cast([0,0]),priority:e.cast([0,0]),taskDispatchPriority:e.cast([0,0])},id:2,indexes:{queueNameTaskId:{fields:["queueName","taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},persistent_menu_ctas:{autoIncrement:!1,defaults:{ctaType:"fallback"},id:251,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},persistent_menu_items:{autoIncrement:!1,defaults:{},id:77,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},pinned_messages_v2:{autoIncrement:!1,defaults:{},id:155,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},pinned_threads:{autoIncrement:!1,defaults:{},id:82,indexes:{pinnedTimestamp:{fields:["pinnedTimestamp","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},poll_options_v2:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:e.cast([0,0]),sortKeyVotingTimestamp:e.cast([0,0]),voteCount:e.cast([0,0])},id:39,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},poll_votes_v2:{autoIncrement:!1,defaults:{},id:40,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},polls:{autoIncrement:!1,defaults:{pollType:e.cast([0,0])},id:38,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},presence_settings:{autoIncrement:!1,defaults:{hasConvertedToViewSideSettings:!1,isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1},id:187,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},presence_states:{autoIncrement:!1,defaults:{},id:186,indexes:{statusContactId:{fields:["status","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId"],ignoreNulls:[]}},profile_sheet_information:{autoIncrement:!1,defaults:{},id:256,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},quick_reply_ctas:{autoIncrement:!1,defaults:{},id:20,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ranking_requests:{autoIncrement:!1,defaults:{},id:135,indexes:{},primaryKey:{fields:["scoreType"],ignoreNulls:[]}},ranking_scores:{autoIncrement:!1,defaults:{score:0,scoreIndex:e.cast([0,0])},id:134,indexes:{scoreTypeContactId:{fields:["scoreType","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId","scoreType"],ignoreNulls:[]}},reachability_settings:{autoIncrement:!1,defaults:{},id:148,indexes:{},primaryKey:{fields:["audience"],ignoreNulls:[]}},reaction_v2_types:{autoIncrement:!1,defaults:{},id:229,indexes:{},primaryKey:{fields:["reactionFbid"],ignoreNulls:[]}},reactions:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),reactionCreationTimestampMs:e.cast([0,0]),timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:8,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","actorId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","actorId"],ignoreNulls:[]}},reactions_v2:{autoIncrement:!1,defaults:{lastUpdatedTimestampMs:e.cast([0,0]),viewerReactionTimestampMs:e.cast([0,0])},id:226,indexes:{optimistic:{fields:["threadKey","messageId","reactionFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","reactionFbid","messageTimestamp"],ignoreNulls:[]}},reactions_v2_details:{autoIncrement:!1,defaults:{},id:239,indexes:{},primaryKey:{fields:["threadId","messageId","reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:243,indexes:{},primaryKey:{fields:["threadId","messageId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},reactions_v2_details_users:{autoIncrement:!1,defaults:{},id:227,indexes:{},primaryKey:{fields:["reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_users_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:228,indexes:{},primaryKey:{fields:["reactorId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},roll_call_contributions_v2:{autoIncrement:!1,defaults:{contributionSource:e.cast([0,0]),contributorId:e.cast([0,0])},id:255,indexes:{optimistic:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs","threadKey"],ignoreNulls:[]}},roll_calls:{autoIncrement:!1,defaults:{canViewWithoutContributing:!1,isBlurred:!1,viewerCanEditPrompt:!1,viewerHasContributed:!1},id:250,indexes:{},primaryKey:{fields:["rollCallId","threadKey"],ignoreNulls:[]}},room_participants:{autoIncrement:!1,defaults:{},id:64,indexes:{optimistic:{fields:["roomId","participantId"],ignoreNulls:[]}},primaryKey:{fields:["roomId","participantId","type_"],ignoreNulls:[]}},rooms:{autoIncrement:!1,defaults:{notificationMutedUntilMs:e.cast([0,0])},id:63,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["roomId"],ignoreNulls:[]}},rtc_call_events:{autoIncrement:!0,defaults:{isProcessed:!1},id:245,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},rtc_multiway_call_initiation_conference_names:{autoIncrement:!1,defaults:{},id:24,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_rooms_on_threads:{autoIncrement:!1,defaults:{},id:181,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_signals:{autoIncrement:!1,defaults:{},id:22,indexes:{},primaryKey:{fields:["timestampMs","type_"],ignoreNulls:[]}},saved_messages:{autoIncrement:!1,defaults:{},id:165,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},screen_time:{autoIncrement:!0,defaults:{},id:321,indexes:{},primaryKey:{fields:["recordId"],ignoreNulls:[]}},search_queries:{autoIncrement:!1,defaults:{surfaceType:e.cast([0,1])},id:67,indexes:{},primaryKey:{fields:["query","surfaceType"],ignoreNulls:[]}},secure_acs_blinded_tokens:{autoIncrement:!0,defaults:{},id:308,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_acs_configurations:{autoIncrement:!1,defaults:{},id:307,indexes:{},primaryKey:{fields:["configId"],ignoreNulls:[]}},secure_acs_tokens:{autoIncrement:!1,defaults:{},id:309,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_encrypted_backups_client_state:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),encryptionVersion:e.cast([0,0]),revisionVersion:e.cast([0,0])},id:168,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},secure_encrypted_backups_device_supported_versions:{autoIncrement:!1,defaults:{},id:192,indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},primaryKey:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},secure_encrypted_backups_devices:{autoIncrement:!1,defaults:{},id:191,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}},secure_encrypted_backups_generated_recovery_code:{autoIncrement:!1,defaults:{virtualDeviceType:e.cast([0,1])},id:174,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_encrypted_backups_message_thread_id_context:{autoIncrement:!1,defaults:{},id:180,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId","listId"],ignoreNulls:[]}},secure_encrypted_backups_recovery_code_status:{autoIncrement:!1,defaults:{},id:178,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_get_secrets_context:{autoIncrement:!1,defaults:{},id:259,indexes:{},primaryKey:{fields:["deviceRegistrationId"],ignoreNulls:[]}},secure_recovery_code_data:{autoIncrement:!1,defaults:{},id:179,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},self_profile:{autoIncrement:!1,defaults:{},id:81,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}},server_search_sections:{autoIncrement:!1,defaults:{},id:66,indexes:{},primaryKey:{fields:["query","globalIndex"],ignoreNulls:[]}},shared_album_contributions:{autoIncrement:!1,defaults:{creationTimestampMs:e.cast([0,0]),creatorId:e.cast([0,0])},id:280,indexes:{},primaryKey:{fields:["sharedAlbumId","sharedAlbumContributionId","threadKey","messageId"],ignoreNulls:[]}},shared_albums:{autoIncrement:!1,defaults:{contributionCount:e.cast([0,0]),lastActivityTimestampMs:e.cast([0,0])},id:279,indexes:{},primaryKey:{fields:["sharedAlbumId","threadKey"],ignoreNulls:[]}},shared_albums_multimedia_upload_jobs:{autoIncrement:!1,defaults:{},id:283,indexes:{},primaryKey:{fields:["offlineThreadingId"],ignoreNulls:[]}},shared_albums_multimedia_upload_subjobs_status:{autoIncrement:!1,defaults:{},id:284,indexes:{},primaryKey:{fields:["offlineThreadingId","jobId"],ignoreNulls:[]}},status:{autoIncrement:!1,defaults:{},id:62,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["statusId"],ignoreNulls:[]}},sticker_pack_details:{autoIncrement:!1,defaults:{},id:127,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_packs:{autoIncrement:!1,defaults:{},id:122,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_search_featured_tags:{autoIncrement:!1,defaults:{},id:125,indexes:{},primaryKey:{fields:["tagIndex"],ignoreNulls:[]}},sticker_search_queries:{autoIncrement:!1,defaults:{},id:124,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},sticker_search_results:{autoIncrement:!1,defaults:{},id:123,indexes:{},primaryKey:{fields:["resultIndex","query","type_"],ignoreNulls:[]}},sticker_store_pack_indices:{autoIncrement:!1,defaults:{},id:128,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_to_collection:{autoIncrement:!1,defaults:{},id:126,indexes:{},primaryKey:{fields:["stickerId","collectionId"],ignoreNulls:[]}},stickers:{autoIncrement:!1,defaults:{},id:121,indexes:{stickerPackId:{fields:["stickerPackId","stickerId"],ignoreNulls:[]}},primaryKey:{fields:["stickerId"],ignoreNulls:[]}},stories:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:54,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["storyId"],ignoreNulls:[]}},story_ad_card:{autoIncrement:!1,defaults:{},id:58,indexes:{},primaryKey:{fields:["adPosition","clientToken","cardId"],ignoreNulls:[]}},story_ad_ctas:{autoIncrement:!1,defaults:{},id:59,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},story_ad_unit:{autoIncrement:!1,defaults:{shouldShowAdChoice:!1},id:57,indexes:{},primaryKey:{fields:["adPosition","clientToken"],ignoreNulls:[]}},story_buckets:{autoIncrement:!1,defaults:{pageNum:e.cast([0,0]),readState:e.cast([0,0])},id:53,indexes:{optimistic:{fields:["ownerId","bucketType"],ignoreNulls:[]}},primaryKey:{fields:["bucketId"],ignoreNulls:[]}},story_buckets_paginated_queries:{autoIncrement:!1,defaults:{},id:61,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}},story_overlays:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:60,indexes:{},primaryKey:{fields:["storyId","storyOverlayId"],ignoreNulls:[]}},story_reactions:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:56,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["reactionId"],ignoreNulls:[]}},story_viewers:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),interactionType:e.cast([0,1])},id:55,indexes:{},primaryKey:{fields:["storyId","viewerContactId","interactionType"],ignoreNulls:[]}},supervision_edge:{autoIncrement:!1,defaults:{},id:319,indexes:{},primaryKey:{fields:["edgeId"],ignoreNulls:[]}},supervision_metadata:{autoIncrement:!1,defaults:{},id:320,indexes:{},primaryKey:{fields:["supervisionMetadataId"],ignoreNulls:[]}},support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}},sync_group_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:220,indexes:{},primaryKey:{fields:["syncGroup","parentThreadKey"],ignoreNulls:[]}},sync_groups:{autoIncrement:!1,defaults:{canIgnoreTimestamp:!1,lastSyncCompletedTimestampMs:e.cast([0,0]),lastSyncRequestTimestampMs:e.cast([0,0]),minTimeToSyncTimestampMs:e.cast([0,0]),priority:e.cast([0,0]),sendSyncParams:!1,syncChannel:e.cast([0,1]),syncStatus:e.cast([0,0])},id:1,indexes:{},primaryKey:{fields:["groupId"],ignoreNulls:[]}},taken_down_threads:{autoIncrement:!1,defaults:{},id:212,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},third_party_id_store:{autoIncrement:!1,defaults:{},id:242,indexes:{},primaryKey:{fields:["platform"],ignoreNulls:[]}},thread_bans:{autoIncrement:!1,defaults:{},id:297,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},thread_creation_status:{autoIncrement:!1,defaults:{},id:278,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:e.cast([0,0])},id:237,indexes:{},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}},thread_labels:{autoIncrement:!1,defaults:{},id:215,indexes:{},primaryKey:{fields:["labelId"],ignoreNulls:[]}},thread_limits:{autoIncrement:!1,defaults:{},id:287,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate:{autoIncrement:!1,defaults:{ctaType:e.cast([0,0]),privacyTextCtaType:e.cast([0,0])},id:28,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate_ctas:{autoIncrement:!1,defaults:{},id:29,indexes:{threadKeyCtaId:{fields:["threadKey","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},thread_point_query_ttrc:{autoIncrement:!1,defaults:{},id:286,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:183,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_seen_heads_queries:{autoIncrement:!1,defaults:{},id:325,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_themes:{autoIncrement:!1,defaults:{backgroundUrl:"",iconUrl:"",iconUrlFallback:"",isDeprecated:!1},id:116,indexes:{},primaryKey:{fields:["fbid"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_optimistic_context:{autoIncrement:!1,defaults:{},id:32,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},threads_optimistic_metadata:{autoIncrement:!1,defaults:{},id:312,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:10,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"],ignoreNulls:[]}},transaction_history:{autoIncrement:!1,defaults:{timestampMs:e.cast([0,0])},id:102,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},typing_indicator:{autoIncrement:!1,defaults:{},id:52,indexes:{},primaryKey:{fields:["threadKey","senderId"],ignoreNulls:[]}},universal_search_recent_searches:{autoIncrement:!1,defaults:{lastAccessedTimestampMs:e.cast([0,0])},id:68,indexes:{},primaryKey:{fields:["resultId"],ignoreNulls:[]}},user_visible_errors:{autoIncrement:!0,defaults:{},id:6,indexes:{},primaryKey:{fields:["errorId"],ignoreNulls:[]}},user_visible_network_connectivity_error:{autoIncrement:!0,defaults:{},id:115,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},value_model_features:{autoIncrement:!1,defaults:{},id:137,indexes:{},primaryKey:{fields:["feature"],ignoreNulls:[]}},value_model_output:{autoIncrement:!1,defaults:{},id:138,indexes:{},primaryKey:{fields:["product","contactId"],ignoreNulls:[]}},value_model_rules:{autoIncrement:!1,defaults:{},id:136,indexes:{},primaryKey:{fields:["product","ruleIndex"],ignoreNulls:[]}},video_chat_links_attempted_joiners:{autoIncrement:!1,defaults:{},id:79,indexes:{},primaryKey:{fields:["userId","url"],ignoreNulls:[]}},video_chat_links_joining:{autoIncrement:!1,defaults:{canAnonymousUsersJoin:!1},id:78,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["url","optimisticClientToken"],ignoreNulls:[]}},work_contact_info:{autoIncrement:!1,defaults:{},id:210,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},work_genai:{autoIncrement:!1,defaults:{},id:293,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},workroom_creation_requests:{autoIncrement:!1,defaults:{},id:252,indexes:{},primaryKey:{fields:["creationId"],ignoreNulls:[]}},workroom_invites:{autoIncrement:!1,defaults:{},id:257,indexes:{},primaryKey:{fields:["inviteId"],ignoreNulls:[]}},workrooms_co_presence_states:{autoIncrement:!1,defaults:{},id:246,indexes:{userCoPresence:{fields:["userId","coPresenceObjectId"],ignoreNulls:[]}},primaryKey:{fields:["userId"],ignoreNulls:[]}}}),u=Object.freeze(babelHelpers.extends({},s,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),c=Object.freeze(babelHelpers.extends({},u,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),d=Object.freeze(babelHelpers.extends({},c,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{fetchTimestamp:{fields:["fetchTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),m=Object.freeze(babelHelpers.extends({},d,{messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),p=Object.freeze(babelHelpers.extends({},m,{auto_restore_opt_out:{autoIncrement:!1,defaults:{},id:330,indexes:{},primaryKey:{fields:["optOutKey"],ignoreNulls:[]}}})),_=Object.freeze(babelHelpers.extends({},p,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),f=Object.freeze(babelHelpers.extends({},_,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:e.cast([-1,4294967295]),status:e.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},messenger_fts_threads_queries:{autoIncrement:!1,defaults:{sessionId:""},id:332,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}}})),g=Object.freeze(babelHelpers.extends({},f,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:e.cast([-1,4294967295]),status:e.cast([0,0]),threadType:e.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}}})),h=Object.freeze(babelHelpers.extends({},g,{filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0]),secondaryThreadRangeFilter:e.cast([0,0]),syncGroup:e.cast([0,1]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}}})),y=Object.freeze(babelHelpers.extends({},h,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),C=Object.freeze(babelHelpers.extends({},y,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),b=Object.freeze(babelHelpers.extends({},C,{media_receiver_fetch_transport_mappings:{autoIncrement:!1,defaults:{},id:333,indexes:{},primaryKey:{fields:["receiverFetchId"],ignoreNulls:[]}}})),v=Object.freeze(babelHelpers.extends({},b,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),S=Object.freeze(babelHelpers.extends({},v,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),R=Object.freeze(babelHelpers.extends({},S,{attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),L=Object.freeze(babelHelpers.extends({},R,{client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}}})),E=Object.freeze(babelHelpers.extends({},L,{pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}}})),k=Object.freeze(babelHelpers.extends({},E,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),I=Object.freeze(babelHelpers.extends({},k,{contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),T=Object.freeze(babelHelpers.extends({},I,{encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}}})),D=Object.freeze(babelHelpers.extends({},T,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),x=Object.freeze(babelHelpers.extends({},D,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),$=Object.freeze(babelHelpers.extends({},x,{account_synced_fields:{autoIncrement:!1,defaults:{},id:334,indexes:{},primaryKey:{fields:["accountId","syncedField"],ignoreNulls:[]}}})),P=Object.freeze(babelHelpers.extends({},$,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),N=Object.freeze(babelHelpers.extends({},P,{encrypted_backup_user_preferences:{autoIncrement:!0,defaults:{},id:335,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),M=Object.freeze(babelHelpers.extends({},N,{support_translation_feedback:{autoIncrement:!1,defaults:{},id:336,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),w=Object.freeze(babelHelpers.extends({},M,{support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),A=Object.freeze(babelHelpers.extends({},w,{ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:e.cast([0,0]),igDmSettingsTtlSec:e.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),F=Object.freeze(babelHelpers.extends({},A,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),O=Object.freeze(babelHelpers.extends({},F,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),B=Object.freeze(babelHelpers.extends({},O,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),W=Object.freeze(babelHelpers.extends({},B,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),q=Object.freeze(babelHelpers.extends({},W,{admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:e.cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}}})),U=Object.freeze(babelHelpers.extends({},q,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,isVideoQuickSend:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),V=Object.freeze(babelHelpers.extends({},U,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),H=Object.freeze(babelHelpers.extends({},V,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),G=Object.freeze(babelHelpers.extends({},H,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),z=Object.freeze(babelHelpers.extends({},G,{messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeHdMediaEnabled:!1,e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:e.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}}})),j=Object.freeze(babelHelpers.extends({},z,{media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}}})),K=Object.freeze(babelHelpers.extends({},j,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Q=Object.freeze(babelHelpers.extends({},K,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),X=Object.freeze(babelHelpers.extends({},Q,{community_folders:{autoIncrement:!1,defaults:{capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),inviteStatus:e.cast([0,0]),notificationMutedUntil:e.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}}})),Y=Object.freeze(babelHelpers.extends({},X,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),J=Object.freeze(babelHelpers.extends({},Y,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),Z=Object.freeze(babelHelpers.extends({},J,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),ee=Object.freeze(babelHelpers.extends({},Z,{horizon_groups_key_mapping:{autoIncrement:!1,defaults:{},id:338,indexes:{},primaryKey:{fields:["threadKey","groupKey"],ignoreNulls:[]}}})),te=Object.freeze(babelHelpers.extends({},ee,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),ne=Object.freeze(babelHelpers.extends({},te,{rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),re=Object.freeze(babelHelpers.extends({},ne,{horizon_party_members:{autoIncrement:!1,defaults:{},id:339,indexes:{},primaryKey:{fields:["partyKey","userId"],ignoreNulls:[]}}})),oe=Object.freeze(babelHelpers.extends({},re,{thread_theme_search_queries:{autoIncrement:!1,defaults:{},id:340,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},thread_theme_search_results:{autoIncrement:!1,defaults:{},id:341,indexes:{},primaryKey:{fields:["resultIndex","query"],ignoreNulls:[]}}})),ae=Object.freeze(babelHelpers.extends({},oe,{client_media_status:{autoIncrement:!1,defaults:{},id:342,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}}})),ie=Object.freeze(babelHelpers.extends({},ae,{secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}}})),le=Object.freeze(babelHelpers.extends({},ie,{contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),friendshipStatus:e.cast([0,5]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),se=Object.freeze(babelHelpers.extends({},le,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ue=Object.freeze(babelHelpers.extends({},se,{encrypted_backups_reenrollment_trigger:{autoIncrement:!0,defaults:{},id:343,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ce=Object.freeze(babelHelpers.extends({},ue,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),de=Object.freeze(babelHelpers.extends({},ce,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),me=Object.freeze(babelHelpers.extends({},de,{thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:e.cast([0,0])},id:237,indexes:{labelId:{fields:["labelId","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}}})),pe=Object.freeze(babelHelpers.extends({},me,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),_e=Object.freeze(babelHelpers.extends({},pe,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),fe=Object.freeze(babelHelpers.extends({},_e,{pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ge=Object.freeze(babelHelpers.extends({},fe,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,draftMessage:"",hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),he=Object.freeze(babelHelpers.extends({},ge,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),ye=Object.freeze(babelHelpers.extends({},he,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ce=Object.freeze(babelHelpers.extends({},ye,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),be=Object.freeze(babelHelpers.extends({},Ce,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},subthread_message_ranges:{autoIncrement:!1,defaults:{},id:347,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}},subthread_ranges:{autoIncrement:!1,defaults:{},id:346,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},subthread_senders:{autoIncrement:!1,defaults:{},id:345,indexes:{},primaryKey:{fields:["subthreadParentMessageId","contactId"],ignoreNulls:[]}},subthreads:{autoIncrement:!1,defaults:{},id:344,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}}})),ve=Object.freeze(babelHelpers.extends({},be,{subthread_senders:{autoIncrement:!1,defaults:{},id:345,indexes:{lastActivityTimestampMsOrder:{fields:["subthreadParentMessageId","lastActivityTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["subthreadParentMessageId","contactId"],ignoreNulls:[]}}})),Se=Object.freeze(babelHelpers.extends({},ve,{subthreads:{autoIncrement:!1,defaults:{},id:344,indexes:{lastActivityTimestampMsOrder:{fields:["parentThreadKey","lastActivityTimestampMs","parentMessageId"],ignoreNulls:[]}},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}}})),Re=Object.freeze(babelHelpers.extends({},Se,{subthread_message_ranges_v2:{autoIncrement:!1,defaults:{},id:348,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId","minTimestampMs"],ignoreNulls:[]}}})),Le=Object.freeze(babelHelpers.extends({},Re,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyMessageHiddenState:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ee=Object.freeze(babelHelpers.extends({},Le,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ke=Object.freeze(babelHelpers.extends({},Ee,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyMessageHiddenState:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{collapsibleId:{fields:["collapsibleId","messageId"],ignoreNulls:["collapsibleId"]},ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ie=Object.freeze(babelHelpers.extends({},ke,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),Te=Object.freeze(babelHelpers.extends({},Ie,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),De=Object.freeze(babelHelpers.extends({},Te,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),xe=Object.freeze(babelHelpers.extends({},De,{multi_step_replies:{autoIncrement:!1,defaults:{},id:349,indexes:{},primaryKey:{fields:["threadKey","messageId","automationRuleId","mailboxType"],ignoreNulls:[]}}})),$e=Object.freeze({afterUpgrade:o("LSDbV1.upgrade").afterUpgrade,revision:76,tables:xe,upgrade:{1:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(u),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},2:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(c),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},3:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(d),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},4:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(m),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},5:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(p),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},6:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(_),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},7:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(f),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},8:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(g),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},9:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(h),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},10:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(y),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},11:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(C),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},12:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(b),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},13:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(v),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},14:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(S),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},15:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(R),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},16:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(L),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},17:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(E),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},18:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(k),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},19:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(I),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},20:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(T),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},21:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(D),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},22:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(x),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},23:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData($),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},24:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(P),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},25:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(N),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},26:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(M),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},27:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(w),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},28:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(A),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},29:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(F),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},30:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(O),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},31:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(B),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},32:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(W),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},33:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(q),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},34:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(U),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},35:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(V),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},36:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(H),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},37:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(G),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},38:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(z),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},39:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(j),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},40:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(K),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},41:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Q),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},42:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(X),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},43:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Y),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},44:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(J),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},45:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Z),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},46:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ee),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},47:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(te),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},48:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ne),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},49:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(re),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},50:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(oe),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},51:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ae),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},52:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ie),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},53:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(le),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},54:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(se),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},55:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ue),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},56:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ce),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},57:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(de),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},58:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(me),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},59:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(pe),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},60:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(_e),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},61:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(fe),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},62:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ge),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},63:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(he),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},64:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ye),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},65:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ce),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},66:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(be),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},67:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ve),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},68:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Se),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},69:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Re),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},70:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Le),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},71:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ee),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},72:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ke),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},73:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ie),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},74:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Te),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},75:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(De),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},76:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(xe),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)}}});l.LSDbV1=$e}),98);
__d("ReStoreDbVersion",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return e}function u(e,t){if(t in e)return e[t];throw r("FBLogger")("restore_db_migrations").mustfixThrow("Cannot find version: %s",t)}l.cast=e,l.uncast=s,l.castVersion=u}),98);
__d("LSDb",["LSDbV1","ReStoreDbVersion","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({V1:o("ReStoreDbVersion").cast("V1")}),u={targetVersion:o("ReStoreDbVersion").castVersion(s,"V"+((e=r("justknobx")._("2392"))!=null?e:0)),versions:{V1:o("LSDbV1").LSDbV1},legacyVersions:{},versionOrder:["V1"]};l.LSDbVersion=s,l.Versions=u}),98);
__d("LSDbForeignKeys",[],(function(t,n,r,o,a,i){"use strict";var e={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],data_trace_meta:[{indexName:"traceIdAddonId",tableName:"data_trace_addon"}],messages:[{indexName:"fk_messages",tableName:"attachments"},{indexName:"fk_messages",tableName:"reactions"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"},{tableName:"messages_optimistic_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"attachments_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"},{tableName:"group_invites"}]},l=e;i.default=l}),66);
__d("MAWDbVersionList",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}var l={V21:21,V22:22,V23:23,V24:24,V25:25,V26:26,V27:27,V28:28,V29:29,V30:30,V31:31,V32:32,V33:33,V34:34,V35:35,V36:36,V37:37,V38:38,V39:39,V40:40,V41:41,V42:42,V43:43,V44:44,V45:45,V46:46,V47:47,V48:48,V49:49,V50:50,V51:51,V52:52,V53:53,V54:54,V55:55,V56:56,V57:57,V58:58,V59:59,V60:60,V61:61,V62:62,V63:63,V64:64,V65:65,V66:66,V67:67,V68:68,V69:69,V70:70,V71:71,V72:72,V73:73,V74:74,V75:75,V76:76,V77:77,V78:78,V79:79,V80:80,V81:81,V82:82,V83:83,V84:84,V85:85,V86:86,V87:87,V88:88,V89:89,V90:90,V91:91,V92:92,V93:93,V94:94,V95:95,V96:96,V97:97,V98:98,V99:99,V100:100,V101:101,V102:102,V103:103,V104:104,V105:105,V106:106,V107:107,V108:108,V109:109,V110:110,V111:111,V112:112,V113:113,V114:114,V115:115,V116:116,V117:117,V118:118,V119:119,V120:120,V121:121,V122:122,V123:123,V124:124,V125:125,V126:126};i.toVersion=e,i.VERSION=l}),66);
__d("MAWDbSchema",["MAWDbVersionList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"]}},name:"e2ee_appData",primaryKey:["appDataId"]},{autoIncrement:!1,indexes:{},name:"e2ee_appMeta",primaryKey:["key"]},{autoIncrement:!1,indexes:{},name:"e2ee_tasks",primaryKey:["taskName"]},{autoIncrement:!1,indexes:{},name:"e2ee_personalSenderKeyStatuses",primaryKey:["groupJid"]},{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_receipts",primaryKey:["msgId"]},{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_media",primaryKey:["mediaId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_chunk",primaryKey:["chunkId"]},{autoIncrement:!0,indexes:{jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]},{autoIncrement:!1,indexes:{},name:"e2ee_existingUsers",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_pendingReceipts",primaryKey:["id"]},{autoIncrement:!0,indexes:{version:{columns:["version"]}},name:"e2ee_browserEncryptionMeta",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],u=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],c=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],d=[{autoIncrement:!0,indexes:{},name:"e2ee_isDualSend",primaryKey:["rowId"]}],m=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeSecretKey",primaryKey:["key"]}],p=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],_=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],f=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId"]}],g=[{autoIncrement:!0,indexes:{deleteTs:{columns:["deleteTs"],unique:!1},externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]}],h=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"]},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"]}},name:"e2ee_media",primaryKey:["mediaId"]}],y=[{autoIncrement:!0,indexes:{},name:"e2ee_dualSendMedia",primaryKey:["id"]}],C=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],b=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeData",primaryKey:["rowId"]}],v=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},externalId:{columns:["externalId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],S=[{autoIncrement:!0,indexes:{},name:"e2ee_dyiBatch",primaryKey:["batchId"]}],R=[{autoIncrement:!1,indexes:{correspondingOpenThreadKey:{columns:["correspondingOpenThreadKey"],unique:!1},threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],L=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"],removed:!0}],E=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],k=[{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],I=[{autoIncrement:!1,indexes:{"[modelId+modelType+actionState]":{columns:["modelId","modelType","actionState"],unique:!1},action:{columns:["action"],unique:!1},actionState:{columns:["actionState"],unique:!1},collection:{columns:["collection"],unique:!1},indexMac:{columns:["indexMac"],unique:!1}},name:"e2ee_syncActions",primaryKey:["index"]}],T=[{autoIncrement:!1,indexes:{},name:"e2ee_missingKeys",primaryKey:["keyHex"]}],D=[{autoIncrement:!0,indexes:{action:{columns:["action"],unique:!1},collection:{columns:["collection"],unique:!1},index:{columns:["index"],unique:!1}},name:"e2ee_pendingMutations",primaryKey:["id"]}],x=[{autoIncrement:!0,indexes:{collection:{columns:["collection"]}},name:"e2ee_collectionVersions",primaryKey:["id"]}],$=[{autoIncrement:!0,indexes:{keyEpoch:{columns:["keyEpoch"],unique:!1},keyId:{columns:["keyId"]}},name:"e2ee_syncKeys",primaryKey:["id"]}],P=[],N=[{autoIncrement:!1,indexes:{externalId:{columns:["externalId"],unique:!1},lastRetryTs:{columns:["lastRetryTs"],unique:!1},traceId:{columns:["traceId"],unique:!1}},name:"e2ee_uploadRetryStatus",primaryKey:["externalId","lastRetryTs"]}],M=[{autoIncrement:!0,indexes:{jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],w=[{autoIncrement:!0,indexes:{},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]}],A=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"]}],F=[{autoIncrement:!0,indexes:{deduplicationKey:{columns:["deduplicationKey"],predicate:function(t){return t.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],O=[{autoIncrement:!0,indexes:{mediaId:{columns:["mediaId"],unique:!1},msgId:{columns:["msgId"],unique:!1},objectId:{columns:["objectId"]}},name:"e2ee_mediaBackup",primaryKey:["mediaBackupId"]}],B=[{autoIncrement:!0,indexes:{authoritativeThreadKey:{columns:["authoritativeThreadKey"]},deduplicationKey:{columns:["deduplicationKey"],predicate:function(t){return t.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],W=[{autoIncrement:!0,indexes:{"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],q=[{autoIncrement:!0,indexes:{originalMsgExternalId:{columns:["originalMsgExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],U=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"],removed:!0},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"],removed:!0},{autoIncrement:!0,indexes:{},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],V=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],H=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],G=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],z=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],j=[],K=[{autoIncrement:!0,indexes:{},name:"e2ee_danglingQueue",primaryKey:["queueId"]}],Q=[{autoIncrement:!0,indexes:{dbVersion:{columns:["dbVersion"],unique:!1}},name:"e2ee_staleQueue",primaryKey:["staleQueueId"]}],X=[{autoIncrement:!0,indexes:{"[offlineThreadingId+backupActionType]":{columns:["offlineThreadingId","backupActionType"],unique:!1},"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},offlineThreadingId:{columns:["offlineThreadingId"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],Y=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]}],J=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],Z=[{autoIncrement:!0,indexes:{},name:"e2ee_pendingMessageStanzaQueue",primaryKey:["pendingMessageStanzaQueueId"]}],ee=[{autoIncrement:!0,indexes:{author:{columns:["author"],unique:!1},chat:{columns:["chat"],unique:!1},externalId:{columns:["externalId"],unique:!1}},name:"e2ee_deletedMessages",primaryKey:["rowId"]}],te=[{autoIncrement:!0,indexes:{threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_ebMsgRanges",primaryKey:["rangeId"]}],ne=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1},threadJid:{columns:["threadJid","inviteeJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],re=[{autoIncrement:!1,indexes:{waMsgId:{columns:["waMsgId"]}},name:"e2ee_receipts",primaryKey:["msgId"]}],oe=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],ae=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ie=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(t){return t.serverTs!=null},unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],le=[{autoIncrement:!1,dexieOnly_primaryKeyUnique:!0,indexes:{ts:{columns:["ts"],unique:!1}},name:"e2ee_sentBytesCache",primaryKey:["waMsgId"]}],se=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(t){return t.serverTs!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ue=[{autoIncrement:!0,indexes:{"[originalMsgExternalId+threadJid]":{columns:["originalMsgExternalId","threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],ce=[{autoIncrement:!0,indexes:{deviceJid:{columns:["deviceJid"],unique:!1},displayOrder:{columns:["isArchived","ts"],unique:!1},isConfirmedActionTs:{columns:["isConfirmed","action","ts"],unique:!1},isNotifiedTs:{columns:["isNotified","ts"],unique:!1}},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],de=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],me=[{autoIncrement:!1,indexes:{},name:"e2ee_ephemeralSettings",primaryKey:["userJid"]}],pe=[{autoIncrement:!1,indexes:{ebClientRequired:{columns:["ebClientRequired","timestampMs"],unique:!1},restorable:{columns:["restorable","timestampMs"],unique:!1}},name:"e2ee_ebMessageRestoreTasks",primaryKey:["messageId"]}],_e=[{autoIncrement:!1,indexes:{},name:"e2ee_igMessageAuxiliaryInfo",primaryKey:["messageId"]}],fe=[{autoIncrement:!1,indexes:{plaintextHash:{columns:["plaintextHash"],unique:!1}},name:"e2ee_mediaKeys",primaryKey:["ciphertextHash"]}],ge=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],he=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],ye=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],Ce=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]}],be=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeBacklog",primaryKey:["externalId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeThreadBacklog",primaryKey:["chatJid"]}],ve=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Se=[{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],Re=[{autoIncrement:!0,indexes:{fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],Le=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"],removed:!0}],Ee=[{autoIncrement:!1,indexes:{},name:"e2ee_uploadRetryStatus",primaryKey:[],removed:!0}],ke=[{autoIncrement:!1,indexes:{},name:"e2ee_receiverFetchInfo",primaryKey:["receiverFetchId"]}],Ie=[{autoIncrement:!0,indexes:{"[threadJid+ts]":{columns:["threadJid","ts"],unique:!1},externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},ts:{columns:["ts"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]}],Te=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],De=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],xe=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],$e=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Pe=[{autoIncrement:!0,indexes:{version:{columns:["version"],unique:!0}},name:"e2ee_encryptionMetaV3",primaryKey:["id"]}],Ne=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages_deduped",primaryKey:["rowId"]}],Me=[{autoIncrement:!1,indexes:{},name:"e2ee_poll",primaryKey:["chatJid","pollStanzaId"]}],we=[{autoIncrement:!0,indexes:{"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(t){return t.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Ae=[{autoIncrement:!0,indexes:{"[threadJid+collapsibleId+sortOrderMs]":{columns:["threadJid","collapsibleId","sortOrderMs"],unique:!1},"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(t){return t.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Fe=[{autoIncrement:!1,indexes:{},name:"e2ee_messages_deduped",primaryKey:[],removed:!0}],Oe=new Map([[(e=o("MAWDbVersionList")).VERSION.V21,s],[e.VERSION.V22,u],[e.VERSION.V23,c],[e.VERSION.V24,d],[e.VERSION.V25,m],[e.VERSION.V30,p],[e.VERSION.V31,_],[e.VERSION.V32,f],[e.VERSION.V33,g],[e.VERSION.V34,h],[e.VERSION.V35,y],[e.VERSION.V36,C],[e.VERSION.V37,b],[e.VERSION.V38,v],[e.VERSION.V39,S],[e.VERSION.V40,R],[e.VERSION.V41,L],[e.VERSION.V42,E],[e.VERSION.V45,k],[e.VERSION.V48,I],[e.VERSION.V49,T],[e.VERSION.V50,D],[e.VERSION.V51,x],[e.VERSION.V52,$],[e.VERSION.V57,P],[e.VERSION.V59,N],[e.VERSION.V61,M],[e.VERSION.V62,w],[e.VERSION.V63,A],[e.VERSION.V64,F],[e.VERSION.V65,O],[e.VERSION.V67,B],[e.VERSION.V69,W],[e.VERSION.V70,q],[e.VERSION.V73,U],[e.VERSION.V74,V],[e.VERSION.V75,H],[e.VERSION.V77,G],[e.VERSION.V78,z],[e.VERSION.V79,j],[e.VERSION.V80,K],[e.VERSION.V81,Q],[e.VERSION.V83,X],[e.VERSION.V84,Y],[e.VERSION.V85,J],[e.VERSION.V86,Z],[e.VERSION.V88,ee],[e.VERSION.V89,te],[e.VERSION.V90,ne],[e.VERSION.V91,re],[e.VERSION.V92,oe],[e.VERSION.V93,ae],[e.VERSION.V94,ie],[e.VERSION.V95,le],[e.VERSION.V96,se],[e.VERSION.V97,ue],[e.VERSION.V98,ce],[e.VERSION.V99,de],[e.VERSION.V100,me],[e.VERSION.V102,pe],[e.VERSION.V103,_e],[e.VERSION.V104,fe],[e.VERSION.V105,ge],[e.VERSION.V106,he],[e.VERSION.V107,ye],[e.VERSION.V108,Ce],[e.VERSION.V109,be],[e.VERSION.V110,ve],[e.VERSION.V111,Se],[e.VERSION.V112,Re],[e.VERSION.V113,Le],[e.VERSION.V114,Ee],[e.VERSION.V115,ke],[e.VERSION.V116,Ie],[e.VERSION.V117,Te],[e.VERSION.V118,De],[e.VERSION.V119,xe],[e.VERSION.V120,$e],[e.VERSION.V121,Pe],[e.VERSION.V122,Ne],[e.VERSION.V123,Me],[e.VERSION.V124,we],[e.VERSION.V125,Ae],[e.VERSION.V126,Fe]]),Be=["messages","unrenderedMessages","groupInfo","receipts","pendingReceipts","threads","participants","tasks","personalSenderKeyStatuses","appData","appMeta","chunk","mediaBackup","media","reactions","groupInvites","dyiBatch","syncActions","missingKeys","pendingMutations","collectionVersions","syncKeys","deviceChangeAlerts","xma","editMsgHistory","deletedMessages","ebMsgRanges","receiverFetchInfo","poll"];l.dbSchema=Oe,l.TABLES_TO_ENCRYPT=Be}),98);
__d("MAWGetDbVersion",["MAWDbVersionList","justknobx","objectValues"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return e!=null?e:o("MAWDbVersionList").toVersion(r("justknobx")._("1716"))}function u(t){if(r("justknobx")._("1495")){if(t==null||t==="current")return e=null,e;var n=Math.max.apply(Math,r("objectValues")(o("MAWDbVersionList").VERSION));if(t==="latest")return e=o("MAWDbVersionList").toVersion(n),e;if(!Number.isInteger(t))return e;if(t<0)return e=o("MAWDbVersionList").toVersion(n+t),e;e=o("MAWDbVersionList").toVersion(t)}}l.getArmadilloDbVersion=s,l.setArmadilloDbVersionForTest=u}),98);
__d("MAWDbSchema.restore",["MAWDbSchema","MAWGetDbVersion","objectEntries","sortBy"],(function(t,n,r,o,a,i,l){"use strict";var e={e2ee_appData:!0,e2ee_appMeta:!0,e2ee_browserEncryptionMeta:!0,e2ee_chunk:!0,e2ee_collectionVersions:!0,e2ee_deletedMessages:!0,e2ee_deviceChangeAlerts:!0,e2ee_dyiBatch:!0,e2ee_ebMessageRestoreTasks:!0,e2ee_ebMsgRanges:!0,e2ee_ebUploadQueue:!0,e2ee_editMsgHistory:!0,e2ee_encryptionMetaV3:!0,e2ee_ephemeralSettings:!0,e2ee_existingUsers:!0,e2ee_ftsBackloggedMessages:!0,e2ee_ftsEncryptionMeta:!0,e2ee_ftsIndexV3:!0,e2ee_ftsPurgeBacklog:!0,e2ee_ftsPurgeThreadBacklog:!0,e2ee_groupInfo:!0,e2ee_groupInvites:!0,e2ee_historySyncQRCodeData:!0,e2ee_historySyncQRCodeSecretKey:!0,e2ee_igMessageAuxiliaryInfo:!0,e2ee_media:!0,e2ee_mediaBackup:!0,e2ee_messages:!0,e2ee_missingKeys:!0,e2ee_participants:!0,e2ee_pendingMessageStanzaQueue:!0,e2ee_pendingMutations:!0,e2ee_pendingReceipts:!0,e2ee_pendingStanzas:!0,e2ee_poll:!0,e2ee_reactions:!0,e2ee_receiverFetchInfo:!0,e2ee_syncActions:!0,e2ee_syncKeys:!0,e2ee_threads:!0,e2ee_unrenderedMessages:!0,e2ee_xma:!0};function s(e){var t=Object.fromEntries(r("objectEntries")(e.indexes).filter(function(e){var t=e[1];return t.multiEntry_DO_NOT_USE!==!0}).map(function(t){var n=t[0],r=t[1];return[n,{columns:[].concat(r.columns,r.unique!==!1?[]:e.primaryKey),predicate:r.predicate}]})),n={auto_increment:e.autoIncrement===!0,indexes:t,name:e.name,primary_key:e.primaryKey};return n}var u=r("sortBy")(Array.from(o("MAWDbSchema").dbSchema.entries()),function(e){var t=e[0];return t}).map(function(e){var t=e[0],n=e[1];return{schema:n,version:t}}),c=function(t){return Array.from(u.filter(function(e){return e.version<=t&&e.schema!=null}).reduce(function(e,t){var n;return(n=t.schema)==null||n.forEach(function(t){if(t.removed===!0){e.delete(t.name);return}e.set(t.name,s(t))}),e},new Map).values())},d=c(o("MAWGetDbVersion").getArmadilloDbVersion());l.msgrDbStores=e,l.getSchemaForVersion=c,l.clientSchema=d}),98);
__d("LSDbSchema",["MAWDbSchema.restore"],(function(t,n,r,o,a,i){"use strict";var e=importNamespace("MAWDbSchema.restore").clientSchema;i.clientSchema=e}),66);
__d("ReStoreVersionedSchemaProvider",["FBLogger","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata","ReStoreVersionedSchemaProviderUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.defaults={},this.$1="",this.$1=e,this.$2=t;var r=t.versions[t.targetVersion],a=o("ReStoreVersionedSchemaProviderUtil").getTableData(r.tables,n),i=a.defaults,l=a.tableData;this.tableNames=l.tableNames,this.tableIds=l.tableIds,this.defaults=i}var t=e.prototype;return t.$3=async function(t,n){var e,r,a,i;(e=n.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from scratch..."),(r=n.loggers.userFlow)==null||r.addPoint(this.$1+"_migration_versioned_from_scratch");var l={tableIds:this.tableIds,tableNames:this.tableNames};return await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(n.transaction,l,t,this.defaults),(a=n.loggers.logHistory)==null||a.debug("migration default values finished"),await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(n,l,this.defaults,t),(i=n.loggers.logHistory)==null||i.debug("migration indices finished"),t?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE},t.$4=function(t){var e=this,n=this.$2.versionOrder.indexOf(t);if(n===-1)throw r("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot resolve version %s",this.$1,t);return Promise.all(this.$2.versionOrder.slice(n,this.$2.versionOrder.indexOf(this.$2.targetVersion)+1).map(async function(t){if(t in e.$2.versions)return{meta:e.$2.versions[t],version:t};if(t in e.$2.legacyVersions)return{meta:await e.$2.legacyVersions[t].load(),version:t};throw r("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot find version %s in either versions or legacyVersions",e.$1,t)}))},t.$5=async function(t,n,a){var e,i,l,s=this.$2.targetVersion,u=this.$2.versions[s].revision;if((e=a.loggers)==null||(e=e.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] currentVersion: "+t+"R"+n+", targetVersion: "+s+"R"+u),s===t&&u===n){var c;return(c=a.loggers)==null||(c=c.logHistory)==null||c.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] DB already up to date, skipping migration"),o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED}(i=a.loggers.logHistory)==null||i.debug("migration versioned incremental"),(l=a.loggers.userFlow)==null||l.addPoint(this.$1+"_migration_versioned_incremental");var d=await this.$4(t);if(d.length===0||n>u)return r("FBLogger")("ReStoreVersionedSchemaProvider","migrate").mustfix("[%s][ReStoreVersionedSchemaProvider][DANGEROUS] Backward migration required from %sR%s to %sR%s, running #migrateFromScratch",this.$1,t,""+n,s,""+u),this.$3(!1,a);for(var m of d)for(var p=m.meta,_=m.version,f=_===t?n+1:0;f<=p.revision;f++){var g,h,y,C,b,v,S;(g=a.loggers)==null||(g=g.logHistory)==null||g.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating to "+_+"R"+f),(h=a.loggers.userFlow)==null||h.addPoint(this.$1+"_migration_versioned_"+_+"{$revision}_start"),await((y=(C=p.upgrade)[f])==null?void 0:y.call(C,a)),await((b=(v=p.afterUpgrade)[f])==null?void 0:b.call(v,a.transaction)),(S=a.loggers.userFlow)==null||S.addPoint(this.$1+"_migration_versioned_"+_+"{$revision}_end")}return o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE},t.$6=function(t,n,r,a,i){var e;if((e=i.loggers.userFlow)==null||e.addPoint(this.$1+"_migration_versioned_hash_start"),n===r&&t===a){var l,s;return(l=i.loggers.userFlow)==null||l.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"no_changes"}})),(s=i.loggers)==null||(s=s.logHistory)==null||s.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, no changes are detected"),Promise.resolve(o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA)}else{var u,c;return(u=i.loggers.userFlow)==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"changes"}})),(c=i.loggers)==null||(c=c.logHistory)==null||c.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, changed detected, calling #migrateFromScratch"),this.$3(!1,i)}},t.migrate=async function(t){var e,n,r,a,i,l,s,u,c;(e=t.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Start migration"),(n=t.loggers.userFlow)==null||n.addPoint(this.$1+"_migration_versioned_start");var d=o("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(this.defaults),m=o("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash({tableIds:this.tableIds,tableNames:this.tableNames}),p=new(o("ReStorePersistedMetadata")).ReStorePersistedSchemaVersion(this.$1),_=new(o("ReStorePersistedMetadata")).ReStorePersistedDefaultValuesVersion(this.$1),f=await p.read(t.storeTx),g=(r=await _.read(t.storeTx))==null?void 0:r.defaultValuesVersion,h=this.$2.versions[this.$2.targetVersion];(a=t.loggers.userFlow)==null||a.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{int:{defaultValuesVersion:d,schemaVersion:m,storeDefaultValuesVersion:g,storeRevision:f==null?void 0:f.revision,storeSchemaVersion:f==null?void 0:f.schemaVersion,targetRevision:h.revision},string:{schemaProviderType:"versioned",storeVersion:f==null?void 0:f.version,targetVersion:this.$2.targetVersion}})),(i=t.loggers.logHistory)==null||i.debug("storeSchemaVersion: "+((l=f==null?void 0:f.schemaVersion)!=null?l:"null")),(s=t.loggers.logHistory)==null||s.debug("storeDefaultValuesVersion: "+(g!=null?g:"null"));var y=await(f!=null&&f.revision!=null&&f.version!=null?this.$5(f.version,f.revision,t):(f==null?void 0:f.schemaVersion)!=null?this.$6(g,f.schemaVersion,m,d,t):this.$3(!0,t));if(y!==o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED){var C;p.write(t.storeTx,{revision:h.revision,schemaVersion:m,version:this.$2.targetVersion}),_.write(t.storeTx,{defaultValuesVersion:d}),(C=t.loggers.logHistory)==null||C.debug("version is written")}return(u=t.loggers.logHistory)==null||u.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] End Migration. Result: "+y+", SchemaVersion: "+m+", Version: "+this.$2.targetVersion+", Revision: "+h.revision),(c=t.loggers.userFlow)==null||c.addPoint(this.$1+"_migration_versioned_end"),y},e})();l.default=e}),98);
__d("LSVersionedSchemaProvider",["LSConstants","LSDb","LSDbForeignKeys","ReStoreVersionedSchemaProvider"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("ReStoreVersionedSchemaProvider"))(o("LSConstants").LS_SCHEMA_NAME,o("LSDb").Versions,r("LSDbForeignKeys"));l.schemaProvider=e}),98);
__d("ReStoreHashSchemaProvider",["ReStoreHashMigration","ReStoreMetadata","ReStoreMigrateUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var r=t.tableIds,a=t.tableNames;n===void 0&&(n={}),this.$1=e,this.tableNames=babelHelpers.extends({},a,o("ReStoreMetadata").RESTORE_METADATA_TABLES),this.tableIds=r,this.defaults=n!=null?n:{}}var t=e.prototype;return t.migrate=async function(t){var e,n,r,a,i;(e=t.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreHashSchemaProvider] Start migration"),(n=t.loggers.userFlow)==null||n.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{schemaProviderType:"hash"}})),(r=t.loggers.userFlow)==null||r.addPoint(this.$1+"_migration_hash_start");var l=await o("ReStoreHashMigration").runHashMigration(this.$1,{tableIds:this.tableIds,tableNames:this.tableNames},this.defaults,t);return(a=t.loggers.logHistory)==null||a.debug("["+this.$1+"][ReStoreHashSchemaProvider] End migration. Result: "+l),(i=t.loggers.userFlow)==null||i.addPoint(this.$1+"_migration_hash_end"),l},e})();l.default=e}),98);
__d("ReStoreSchemaProvider",["ReStoreMigrateUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return{defaults:babelHelpers.extends({},e.defaults,t.defaults),migrate:async function(r){var n=await e.migrate(r),a=await t.migrate(r);return n===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE||a===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE:n===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA||a===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED},tableIds:babelHelpers.extends({},e.tableIds,t.tableIds),tableNames:babelHelpers.extends({},e.tableNames,t.tableNames)}}l.mergeSchemaProviders=e}),98);
__d("LSMetadata",["LSClientSchemaType","LSDbSchema","LSVersionedSchemaProvider","ReStoreHashSchemaProvider","ReStoreMetadata","ReStoreSchemaProvider"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("ReStoreSchemaProvider").mergeSchemaProviders(e,s)}var s=new(r("ReStoreHashSchemaProvider"))(o("LSClientSchemaType").MAW_SCHEMA_NAME,o("ReStoreMetadata").getBuildTableData({})([o("LSDbSchema").clientSchema])),u=e(o("LSVersionedSchemaProvider").schemaProvider);l.buildSchema=e,l.schema=u}),98);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(t,n,r,o,a,i,l){"use strict";var e,s={dynamic:!1};function u(t,a){a===void 0&&(a=s);var i=r("LS")(1,o("LSMetadata").schema,o("LSDynamicDependencies").cachedModules,t,void 0,void 0,a.dynamic,a.lsRuntimeLogger);return n("cr:8709")!=null&&(e||(e=r("ExecutionEnvironment"))).isInBrowser?n("cr:8709").wrapSprocInvocationWithProfiler(i):i}l.default=u}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyContactRowExists"),a.id,a.contactIdType,a.profilePictureUrl,a.name,a.contactType,a.profilePictureFallbackUrl,a.profilePictureUrlExpirationTimestampMs,a.urlExpirationTimestampMs,a.normalizedNameForSearch,a.isMemorialized,a.isBlocked,a.blockedByViewerStatus,a.canViewerMessage,a.isSelf,a.authorityLevel,a.capabilities,a.capabilities2,a.workForeignEntityType,a.gender,a.contactViewerRelationship,a.secondaryName,a.firstName,a.friendshipStatus);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWFolderTypes",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=10,d=15,m={ARCHIVED:c,INBOX:e,OTHER:s,PENDING:l,RESTRICTED:d,SPAM:u};i.INBOX=e,i.PENDING=l,i.OTHER=s,i.SPAM=u,i.ARCHIVED=c,i.RESTRICTED=d,i.FOLDER_ID=m}),66);
__d("WAArrayZip",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=Math.min(e.length,t.length);return e.slice(0,n).map(function(e,n){return[e,t[n]]})}i.zip=e}),66);/*FB_PKG_DELIM*/
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t){var n=o("react-compiler-runtime").c(9),r=e.dataSource,a=t===void 0?!1:t,i=m(a),l=i[0],s=i[1],u=d(null),p;n[0]!==r?(p=function(t){var e,n=t.onResolvePayload,o=t.requestParams;(e=u.current)==null||e.unsubscribe(),u.current=r.fetchNetwork(o).subscribe({complete:function(){s(!1)},error:function(t){s(!1)},next:function(t){return n(t)},start:function(t){s(!0)},unsubscribe:function(){s(!1)}})},n[0]=r,n[1]=p):p=n[1];var _=p,f,g;n[2]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return function(){var e;(e=u.current)==null||e.unsubscribe()}},g=[],n[2]=f,n[3]=g):(f=n[2],g=n[3]),c(f,g);var h;n[4]!==l?(h={isLoading:l},n[4]=l,n[5]=h):h=n[5];var y;return n[6]!==_||n[7]!==h?(y=[h,_],n[6]=_,n[7]=h,n[8]=y):y=n[8],y}l.default=p}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolver",["FBLogger","cometTypeaheadODSLogFetchNetworkEvent","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=o("react-compiler-runtime").c(17),a=e.dataSource,i=e.dataSourceFetchConfigParams,l=e.onResolvePayload,s;n[0]!==i?(s=i===void 0?{}:i,n[0]=i,n[1]=s):s=n[1];var u=s,m=u.requestFlow,p=u.shouldDebounceNetwork,_=p===void 0?!0:p,f;n[2]!==a?(f={dataSource:a},n[2]=a,n[3]=f):f=n[3];var g=r("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")(f),h=g[0],y=g[1],C=h.isLoading,b=r("useDebouncedComet")(y),v;n[4]!==l?(v=function(t,n){var e=n.isTraceComplete,o=n.source;try{l(t,{isTraceComplete:e,source:o})}catch(e){r("FBLogger")("search").mustfix("Failed to resolve fetched payload")}return o},n[4]=l,n[5]=v):v=n[5];var S=v,R=d(m),L;n[6]!==S?(L=function(t){S(t,{isTraceComplete:!0,source:t.entries.length>0?"network":"network-no-results"}),r("cometTypeaheadODSLogFetchNetworkEvent")&&r("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},n[6]=S,n[7]=L):L=n[7];var E=L,k,I;n[8]!==y||n[9]!==b||n[10]!==t||n[11]!==E||n[12]!==_?(k=function(){var e=function(t){var e=t.requestParams,n=e.requestFlow;n!=null&&(R.current=n);var r={onResolvePayload:E,requestParams:babelHelpers.extends({},e,{requestFlow:R.current})};_?b(r):y(r)};t!=null&&e(t)},I=[y,b,t,E,_],n[8]=y,n[9]=b,n[10]=t,n[11]=E,n[12]=_,n[13]=k,n[14]=I):(k=n[13],I=n[14]),c(k,I);var T;return n[15]!==C?(T=[{isLoading:C}],n[15]=C,n[16]=T):T=n[16],T}l.default=m}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetch",["FBLogger","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolver"],(function(t,n,r,o,a,i,l){"use strict";var e=["loggingEventTrace"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useState;function m(t){var n,a=o("react-compiler-runtime").c(9),i=d(null),l=i[0],s=i[1],u=r("useBaseTypeaheadSubscriptionDataSourceFetchResolver")(t,l),c=u[0],m=c.isLoading,p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=function(t,n){var e=n===void 0?"all":n;s({requestParams:t,source:e})},a[0]=p):p=a[0];var _=p,f;a[1]!==l?(f=function(n){var t=n||{},o=t.requestFlow,a=t.source;if(l==null){r("FBLogger")("search").mustfix("Refetch cannot be called with undefined `fetchParams`");return}var i=l.requestParams,s=i.loggingEventTrace,u=babelHelpers.objectWithoutPropertiesLoose(i,e),c=babelHelpers.extends({loggingEventTrace:babelHelpers.extends({},s,{sequenceID:String(Date.now())}),requestFlow:o},u);_(c,a)},a[1]=l,a[2]=f):f=a[2];var g=f,h=(n=l==null?void 0:l.source)!=null?n:"all",y;a[3]!==m||a[4]!==h?(y={isLoading:m,source:h},a[3]=m,a[4]=h,a[5]=y):y=a[5];var C;return a[6]!==g||a[7]!==y?(C=[y,_,g],a[6]=g,a[7]=y,a[8]=C):C=a[8],C}l.default=m}),98);
__d("TypeaheadLoggingFetchRequestFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1880031"),s=o("FalcoLoggerInternal").create("typeahead_logging_fetch_request",e),u=s;l.default=u}),98);
__d("CometTypeaheadVolumeLoggingProvider",["FBLogger","TypeaheadLoggingFetchRequestFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return Math.random().toString()},s=(function(){function t(t){this.$2=null,this.$1=t,this.$2=e()}var n=t.prototype;return n.getContext=function(){return this.$1},n.getSessionID=function(){return this.$2==null&&r("FBLogger")("search").mustfix("Logging sessionID requested from %s surface does not exist.",this.getContext()),this.$2},n.logRequest=function(t){var e={context:this.getContext(),requestType:t,sessionID:this.getSessionID()};r("TypeaheadLoggingFetchRequestFalcoEvent").log(function(){return{fetchRequest:e}})},t})();l.default=s}),98);
__d("useCometTypeaheadVolumeLoggingProvider",["CometTypeaheadVolumeLoggingProvider","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(2),n=e===void 0?"UNKNOWN":e,a,i;return t[0]!==n?(i=new(r("CometTypeaheadVolumeLoggingProvider"))(n),t[0]=n,t[1]=i):i=t[1],a=i,a}l.default=u}),98);
__d("CometInternalTypeaheadSubscriptionProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","useBaseTypeaheadSubscriptionDataSourceFetch","useCometInternalTypeaheadStateDispatcher","useCometTypeaheadVolumeLoggingProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo;function m(e){var t=e.children,n=e.dataSource,o=e.dataSourceFetchConfigParams,a=e.loggingContext,i=e.onFetchEntries_DO_NOT_USE,l=e.traceProvider,u=r("useCometInternalTypeaheadStateDispatcher")(),m=u.dispatchActiveEntries,p=r("useCometTypeaheadVolumeLoggingProvider")(a),_=r("useBaseTypeaheadSubscriptionDataSourceFetch")({dataSource:n,dataSourceFetchConfigParams:o,onResolvePayload:c(function(e,t){var n=e.entries,r=t.isTraceComplete,o=t.source;m(n!=null?n:[]),p.logRequest(h),i&&i(n),l&&!l.isResolved()&&r&&(o==="cache"&&n.length>=l.getEntriesCountForVisualComplete()?l.setEndReason("max_suggestions_reached"):o==="network"?l.setEndReason("all_queries_completed"):o==="network-no-results"&&l.setEndReason("all_queries_completed_no_network_results"),l.resolve())},[m,i,l])}),f=_[0],g=f.isLoading,h=f.source,y=_[1],C=_[2],b=d(function(){return{fetch:y,isLoading:g,refetch:C,source:h}},[y,g,C,h]);return s.jsx(r("CometInternalTypeaheadFetchContext").Provider,{value:b,children:s.jsx(r("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:g,source:h,children:t})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("BaseSubscriptionTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadStateProvider","CometInternalTypeaheadSubscriptionProvider","emptyFunction","react","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(t,n,r,o,a,i,l){"use strict";var e=["autoOpen","autoFocus","isDisabled","errorMessage","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","inputRef","viewRole","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useId,p=c.useMemo;function _(t){var n=t.autoOpen,o=n===void 0?!1:n,a=t.autoFocus,i=a===void 0?!1:a,l=t.isDisabled,s=l===void 0?!1:l,c=t.errorMessage,_=c===void 0?null:c,f=t.inputStrategyRenderer,g=t.dataSource,h=t.dataSourceFetchConfigParams,y=t.decorators,C=y===void 0?[]:y,b=t.emptyEntries_DO_NOT_USE,v=t.id,S=t.label,R=S===void 0?"":S,L=t.loggingContext,E=t.onBackspace,k=E===void 0?r("emptyFunction"):E,I=t.onBlur,T=I===void 0?r("emptyFunction"):I,D=t.onChange,x=t.onClose,$=x===void 0?r("emptyFunction"):x,P=t.onEnter,N=P===void 0?r("emptyFunction"):P,M=t.onEscape,w=M===void 0?r("emptyFunction"):M,A=t.onFetchEntries_DO_NOT_USE,F=t.onFocus,O=F===void 0?r("emptyFunction"):F,B=t.onOpen,W=B===void 0?r("emptyFunction"):B,q=t.onPressEntry,U=t.placeholder,V=U===void 0?"":U,H=t.shouldQueryStringFollowHighlightedEntry,G=H===void 0?!0:H,z=t.shouldQueryStringUpdateFromSelectedEntryOnClick,j=z===void 0?!0:z,K=t.testid,Q=K===void 0?"":K,X=t.traceProvider,Y=t.inputRef,J=t.viewRole,Z=J===void 0?"listbox":J,ee=t.viewStrategyRenderer,te=babelHelpers.objectWithoutPropertiesLoose(t,e),ne=m(),re=p(function(){var e=r("CometInternalTypeahead.react");return C.forEach(function(t){var n=t.decorate,r=t.params;e=n(e,r)}),e},[C]),oe=d(function(e){j&&D(e.label),q&&q(e)},[D,q,j]),ae=p(function(){return r("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(f,{shouldQueryStringFollowHighlightedEntry:G})},[f,G]),ie=R||V;return u.jsx(r("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:u.jsx(r("CometInternalTypeaheadStateProvider"),{autoOpen:o,emptyEntries_DO_NOT_USE:b,onClose:$,onOpen:W,children:u.jsx(r("CometInternalTypeaheadSubscriptionProvider"),{dataSource:g,dataSourceFetchConfigParams:h,loggingContext:L,onFetchEntries_DO_NOT_USE:A,traceProvider:X,children:u.jsx(re,babelHelpers.extends({},te,{autoFocus:i,errorMessage:_,id:v!=null?v:ne,inputRef:Y,inputStrategyRenderer:ae,isDisabled:s,label:ie,onBackspace:k,onBlur:T,onChange:D,onDownArrow:r("emptyFunction"),onEnter:N,onEscape:w,onFocus:O,onHighlightEntry:r("emptyFunction"),onPressEntry:oe,onShiftTab:r("emptyFunction"),onTab:r("emptyFunction"),onUpArrow:r("emptyFunction"),placeholder:V,testid:void 0,viewRole:Z,viewStrategyRenderer:ee}))})})})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("CancellablePromise",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s="CancellationToken.TokenCancelled";function u(t,o,a){return a.then(function(a){return t.isCancelled()?(e||(e=n("Promise"))).reject(r("err")(s)):o(a)})}function c(t,o){return o.catch(function(o){return o instanceof Error&&o.message===s?(e||(e=n("Promise"))).resolve(t):(e||(e=n("Promise"))).reject(r("err"))})}l.then_=u,l.ignoreFailed=c}),98);
__d("CancellationToken",[],(function(t,n,r,o,a,i){"use strict";function e(){var e={contents:!1};return{cancel:function(){e.contents=!0},isCancelled:function(){return e.contents}}}i.default=e}),66);
__d("MWTopNavListDropdownTitle.react",["fbt","BaseHeading.react","Locale","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=[];function d(e){var t=o("react-compiler-runtime").c(16),n=e.actions,a=e.onReturn,i=e.testid,l=e.title,d=n===void 0?c:n,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x6s0dn4 x78zum5 x2lah0s x1qughib x21xpn4 x1whwgri x1hndj7l xdwfu72 xnx504b"},t[0]=p):p=t[0];var _;t[1]!==a?(_=a!=null?u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Back"),icon:o("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),iconRatio:"large",onPress:a,size:32,type:"deemphasized"})}):null,t[1]=a,t[2]=_):_=t[2];var f;t[3]!==l?(f=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("BaseHeading.react"),{isPrimaryHeading:!0,children:u.jsx(r("MWXText.react"),{type:"headlineEmphasized1",children:l})})}),t[3]=l,t[4]=f):f=t[4];var g;t[5]!==_||t[6]!==f?(g=u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:[_,f]}),t[5]=_,t[6]=f,t[7]=g):g=t[7];var h;t[8]!==d?(h=d.map(m),t[8]=d,t[9]=h):h=t[9];var y;t[10]!==h?(y=u.jsx(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:h}),t[10]=h,t[11]=y):y=t[11];var C;return t[12]!==g||t[13]!==y||t[14]!==i?(C=u.jsxs("header",babelHelpers.extends({},p,{"data-testid":void 0,children:[g,y]})),t[12]=g,t[13]=y,t[14]=i,t[15]=C):C=t[15],C}function m(e,t){return u.jsx(r("MWXRowItem.react"),{children:e},t)}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),226);
__d("CometMessagingJewelDropdownContentGlimmer.react",["FDSListCellGlimmer.react","MWTopNavListDropdownTitle.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.isFullHeight,a=e.title,i=e.withBackButton,l=n===void 0?!1:n,u=i===void 0?!1:i,c;t[0]!==l?(c={0:{},1:{className:"x9f619 x20eyyc xvv7f4i x1cvmir6"}}[!!l<<0],t[0]=l,t[1]=c):c=t[1];var d;t[2]!==a||t[3]!==u?(d=a!=null&&s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:u?r("emptyFunction"):void 0,title:a}),t[2]=a,t[3]=u,t[4]=d):d=t[4];var m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(r("FDSListCellGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:Math.max(Math.ceil((window.innerHeight-72-45)/76),1)}),t[5]=m):m=t[5];var p;return t[6]!==c||t[7]!==d?(p=s.jsxs("div",babelHelpers.extends({},c,{children:[d,m]})),t[6]=c,t[7]=d,t[8]=p):p=t[8],p}l.default=u}),98);
__d("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql",["CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsJewelNuxWrapper_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelDropdownQPBannerContainer_viewer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},e,t],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[t],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null},e],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],storageKey:null},{if:null,kind:"Defer",label:"MWEncryptedBackupsJewelNuxWrapper_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{if:null,kind:"Defer",label:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},e],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],storageKey:null}]}]}]},params:{id:n("CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation"),metadata:{},name:"CometMessagingJewelDropdownEBUpsellContainerQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:n("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownQPBannerContainer_viewer",selections:[{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer.react",["CometMessagingJewelDropdownQPBannerContainer_viewer.graphql","CometMessagingJewelDropdownQPBannerPlaceholder.react","CometPageletWithDiv.react","CometQuickPromotionLoggerContext.react","CometRelay","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a,i,l=o("react-compiler-runtime").c(9),s=t.viewer,c=o("CometRelay").useFragment(e!==void 0?e:e=n("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql"),s),m;l[0]===Symbol.for("react.memo_cache_sentinel")?(m={context_surface_id:8439,context_trigger:"messaging_jewel_open"},l[0]=m):m=l[0];var p=r("useQuickPromotionFalcoEvent")(m),_;if(l[1]!==(c==null||(a=c.jewel_qp)==null?void 0:a.nodes)){var f,g;_=c==null||(f=c.jewel_qp)==null||(f=f.nodes)==null?void 0:f.find(d),l[1]=c==null||(g=c.jewel_qp)==null?void 0:g.nodes,l[2]=_}else _=l[2];var h=_,y=h==null||(i=h.comet_qp_sections)==null?void 0:i.renderer_strategy;if(y==null)return null;var C;l[3]===Symbol.for("react.memo_cache_sentinel")?(C=u.jsx(r("CometMessagingJewelDropdownQPBannerPlaceholder.react"),{}),l[3]=C):C=l[3];var b;l[4]!==y?(b=u.jsx(o("CometRelay").MatchContainer,{match:y}),l[4]=y,l[5]=b):b=l[5];var v;return l[6]!==p||l[7]!==b?(v=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:C,name:"CometMessagingJewelDropdownQPBannerContainer",children:u.jsx(r("CometQuickPromotionLoggerContext.react").Provider,{value:p,children:b})}),l[6]=p,l[7]=b,l[8]=v):v=l[8],v}function d(e){var t;return((t=e.comet_qp_sections)==null?void 0:t.renderer_strategy)!=null}l.default=c}),98);
__d("MWEncryptedBackupsJewelNuxWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWEncryptedBackupsJewelNuxWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapperDeferred.react"));function c(e){return s.jsx(u,babelHelpers.extends({},e))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWInboxQuickPromotionWrapper.react",["CometErrorBoundary.react","CometPageletWithDiv.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MWInboxQuickPromotionWrapper.react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.onError,i;t[0]!==n?(i=s.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWInboxQuickPromotionWrapper",children:s.jsx(u,{children:n})}),t[0]=n,t[1]=i):i=t[1];var l;return t[2]!==a||t[3]!==i?(l=s.jsx(r("CometErrorBoundary.react"),{onError:a,children:i}),t[2]=a,t[3]=i,t[4]=l):l=t[4],l}l.default=c}),98);
__d("CometMessagingJewelDropdownEBUpsellContainer.react",["CometMessagingJewelDropdownEBUpsellContainerQuery.graphql","CometMessagingJewelDropdownQPBannerContainer.react","CometRelay","FBLogger","MWEncryptedBackupsJewelNuxWrapperDeferred.react","MWInboxContextSwitcherUtils","MWInboxQuickPromotionWrapper.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.ebSoftblockUpsell,a=e.ebUpsellContainerQueryRef,i=e.selectedFilterTab,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(i)&&n==null?u.jsx(r("MWInboxQuickPromotionWrapper.react"),{onError:d,children:u.jsx(m,{ebUpsellContainerQueryRef:a})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function d(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}function m(t){var a=o("react-compiler-runtime").c(5),i=t.ebUpsellContainerQueryRef,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql"),i),s;a[0]!==l.viewer?(s=u.jsx(r("CometMessagingJewelDropdownQPBannerContainer.react"),{viewer:l.viewer}),a[0]=l.viewer,a[1]=s):s=a[1];var c;return a[2]!==l||a[3]!==s?(c=u.jsx(r("MWEncryptedBackupsJewelNuxWrapperDeferred.react"),{query:l,children:s}),a[2]=l,a[3]=s,a[4]=c):c=a[4],c}l.default=c}),98);
__d("MWInboxContextSwitcherDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxContextSwitcher.react").__setRef("MWInboxContextSwitcherDeferred.react"));function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(u,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=c}),98);
__d("MWInboxContextSwitcherGlimmer.react",["MDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={tabPlaceholder:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"x78zum5 xu0aao5 x1y1aw1k xwib8y2 xf7dkkf xv54qhq x3bhodz",children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:u.tabPlaceholder})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("useMWJewelSettingsButtonBadge",["cr:4042","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e,t=(e=n("cr:4042")==null?void 0:n("cr:4042")())!=null?e:{},r=t.badge,o=r===void 0?null:r;return{badge:o,onButtonPress:function(){}}}l.default=u}),98);
__d("MWJewelDropdownHeader.react",["fbt","CometHomeChatSettings.entrypoint","FDSCircleButton.react","FDSComposeFilled16Icon","FDSDots3HorizontalFilled20Icon","FDSEntryPointPopoverTrigger.react","FDSTooltip.react","LSThreadAttributionStore","MWJewelDropdownHeaderSeeAllButton.react","MWJewelPopoverDialogContext.react","MWPSearchSystem","MWTopNavListDropdownTitle.react","MessengerWebUXLogger","emptyFunction","react","react-compiler-runtime","useCometPreloader","useMWChatOpenNewTab","useMWJewelSettingsButtonBadge","useMWNewChatTabContainerPreload","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext;function _(e){var t=o("react-compiler-runtime").c(13),n=e.onOpenArchivedChats,a=e.onOpenMessageRequests,i=e.onOpenRestrictedAccountsList,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Options"),t[0]=l):l=t[0];var u=l,d=p(r("MWJewelPopoverDialogContext.react")),m=d.setIsOpenForDialog,_=r("useMWJewelSettingsButtonBadge")(),f=_.badge,g=_.onButtonPress,h;t[1]===Symbol.for("react.memo_cache_sentinel")?(h={},t[1]=h):h=t[1];var y=n!=null?n:void 0,C=a!=null?a:void 0,b=i!=null?i:void 0,v;t[2]!==y||t[3]!==C||t[4]!==b?(v={onOpenArchivedChats:y,onOpenMessageRequests:C,onOpenRestrictedAccountsList:b},t[2]=y,t[3]=C,t[4]=b,t[5]=v):v=t[5];var S;t[6]!==f||t[7]!==g||t[8]!==m?(S=function(t,n,o,a,i,l){return c.jsxs(r("FDSTooltip.react"),{align:"end",tooltip:u,children:[f,c.jsx(r("FDSCircleButton.react"),{"aria-label":u,color_DEPRECATED:"secondary",icon:r("FDSDots3HorizontalFilled20Icon"),onHoverIn:a,onHoverOut:i,onPress:function(){m(!1),n(),g()},onPressIn:l,ref:t,size:32,testid:void 0,type_DEPRECATED:"deemphasized"})]})},t[6]=f,t[7]=g,t[8]=m,t[9]=S):S=t[9];var R;return t[10]!==v||t[11]!==S?(R=c.jsx(r("FDSEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:h,otherProps:v,popoverEntryPoint:r("CometHomeChatSettings.entrypoint"),position:"below",preloadTrigger:"button",children:S}),t[10]=v,t[11]=S,t[12]=R):R=t[12],R}function f(t){var n=o("react-compiler-runtime").c(35),a=t.inboxUrl,i=t.onClose,l=t.onOpenArchivedChats,u=t.onOpenMessageRequests,d=t.onOpenRestrictedAccountsList,m=t.onReturn,p=t.title,f=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g=r("useMWChatOpenNewTab")("jewelNewMessage"),h=r("MessengerWebUXLogger").useInteractionLogger(),y;n[0]!==f||n[1]!==h||n[2]!==i||n[3]!==g?(y=function(){o("LSThreadAttributionStore").setSourceForNewThread("jewelNewMessage"),f&&(g(!1),i()),h==null||h({eventName:"create_thread"})},n[0]=f,n[1]=h,n[2]=i,n[3]=g,n[4]=y):y=n[4];var C=y,b=r("useMWNewChatTabContainerPreload")(),v=b[0],S=b[1],R=(e||(e=r("useReStore")))(),L;n[5]!==R?(L=function(){return o("MWPSearchSystem").makeAll(R)},n[5]=R,n[6]=L):L=n[6];var E=L,k=r("useCometPreloader")("button_aggressive",r("emptyFunction"),E),I=k.onHoverInPreloader,T=k.onHoverMovePreloader,D=k.onHoverOutPreloader,x;n[7]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"New message"),n[7]=x):x=n[7];var $=x,P;n[8]!==l||n[9]!==u||n[10]!==d?(P=c.jsx(_,{onOpenArchivedChats:l,onOpenMessageRequests:u,onOpenRestrictedAccountsList:d},"mw-jewel-settings"),n[8]=l,n[9]=u,n[10]=d,n[11]=P):P=n[11];var N;n[12]!==a||n[13]!==i?(N=c.jsx(r("MWJewelDropdownHeaderSeeAllButton.react"),{onClose:i,testid:void 0,url:a},"mw-jewel-see-all-button"),n[12]=a,n[13]=i,n[14]=N):N=n[14];var M;n[15]!==v||n[16]!==I?(M=function(t){v(t),I(t)},n[15]=v,n[16]=I,n[17]=M):M=n[17];var w;n[18]!==S||n[19]!==D?(w=function(){S(),D()},n[18]=S,n[19]=D,n[20]=w):w=n[20];var A;n[21]!==C||n[22]!==E||n[23]!==T||n[24]!==M||n[25]!==w?(A=c.jsx(r("FDSTooltip.react"),{align:"end",tooltip:$,children:c.jsx(r("FDSCircleButton.react"),{"aria-label":$,color_DEPRECATED:"secondary",icon:r("FDSComposeFilled16Icon"),onFocusIn:E,onHoverIn:M,onHoverMove:T,onHoverOut:w,onPress:C,role:"button",size:32,testid:void 0,type_DEPRECATED:"deemphasized"})},"mw-jewel-new-message"),n[21]=C,n[22]=E,n[23]=T,n[24]=M,n[25]=w,n[26]=A):A=n[26];var F;n[27]!==P||n[28]!==N||n[29]!==A?(F=[P,N,A].filter(Boolean),n[27]=P,n[28]=N,n[29]=A,n[30]=F):F=n[30];var O;return n[31]!==m||n[32]!==F||n[33]!==p?(O=c.jsx(r("MWTopNavListDropdownTitle.react"),{actions:F,onReturn:m,title:p}),n[31]=m,n[32]=F,n[33]=p,n[34]=O):O=n[34],O}l.default=f}),226);
__d("MWJewelNestedFolderThreadListHeader.react",["MWTopNavListDropdownTitle.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.onReturn,a=e.title,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:n,title:a}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWXListCellStrict.react",["cr:1357","cr:2004","cr:321","cr:3296","cr:6221","cr:842","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(22),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:1357")!=null){var l;return r[3]!==a||r[4]!==i?(l=u.jsx(n("cr:1357"),babelHelpers.extends({},a,{ref:i})),r[3]=a,r[4]=i,r[5]=l):l=r[5],l}if(n("cr:321")!=null&&n("cr:6221")!=null&&n("cr:3296")!=null&&n("cr:842")!=null&&n("cr:2004")!=null){var s=a,c=s.addOnStart,d=s.disabled,m=s.headline,p=s.linkProps,_=s.onHoverIn,f=s.onHoverOut,g=s.onPress,h=s.onPressIn,y=s.selected,C=s.testid,b;r[6]!==c||r[7]!==d?(b=c!=null?u.jsx(n("cr:3296"),{addOnStart:c,disabled:d!=null?d:!1}):void 0,r[6]=c,r[7]=d,r[8]=b):b=r[8];var v=b,S;r[9]!==m?(S=u.jsx(n("cr:6221"),{type:"headline4",children:m}),r[9]=m,r[10]=S):S=r[10];var R;return r[11]!==p||r[12]!==_||r[13]!==f||r[14]!==g||r[15]!==h||r[16]!==i||r[17]!==y||r[18]!==S||r[19]!==C||r[20]!==v?(R=u.jsx(n("cr:842"),{paddingHorizontal:8,paddingVertical:0,children:u.jsx(n("cr:2004"),{children:u.jsx(n("cr:321"),{addOnStart:v,content:S,linkProps:p,onHoverIn:_,onHoverOut:f,onPress:g,onPressIn:h,ref:i,selected:y,size:"medium",testid:void 0})})}),r[11]=p,r[12]=_,r[13]=f,r[14]=g,r[15]=h,r[16]=i,r[17]=y,r[18]=S,r[19]=C,r[20]=v,r[21]=R):R=r[21],R}return null}l.default=c}),98);
__d("MWJewelMessageRequestsThread.react",["fbt","FDSChevronLeftFilled16Icon","FDSChevronRightFilled16Icon","FDSIcon.react","FDSMessagesFilled24Icon","I64","LSIntEnum","Locale","MWJewelThreadSnippet.react","MWXListCellStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));function p(){var t=o("react-compiler-runtime").c(5),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.contacts||t[1]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(-1)).filter(_).map(function(e){var t=e.snippetSenderContactId;if(t!=null){var r=o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(t),i.id+":51");return r?r.name:void 0}})},t[0]=n.tables.contacts,t[1]=n.tables.threads,t[2]=a):a=t[2];var l;return t[3]!==n?(l=[n],t[3]=n,t[4]=l):l=t[4],o("ReQLSuspense").useFirst(a,l,i.id+":36")}function _(e){return(c||(c=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function f(e){var t=o("react-compiler-runtime").c(17),n=e.onOpenMessageRequests,a=e.unreadRequestsCount,i;t[0]!==a?(i=s._(/*BTDS*/"_j{\"*\":\"New message requests\",\"_1\":\"New message request\"}",[s._plural(a)]),t[0]=a,t[1]=i):i=t[1];var l=i,u;t[2]!==a?(u=s._(/*BTDS*/"_j{\"someone\":\"From someone you may know\",\"people\":\"From people you may know\"}",[s._enum(a===1?"someone":"people",{someone:"someone",people:"people"})]),t[2]=a,t[3]=u):u=t[3];var c=u,d=p();if(d!=null)if(a===1){var _;t[4]!==d?(_=s._(/*BTDS*/"From {name}",[s._param("name",d)]),t[4]=d,t[5]=_):_=t[5],c=_}else{var f;t[6]!==d||t[7]!==a?(f=s._(/*BTDS*/"From {name} and {count} more",[s._param("name",d),s._param("count",a-1)]),t[6]=d,t[7]=a,t[8]=f):f=t[8],c=f}var g,h;t[9]===Symbol.for("react.memo_cache_sentinel")?(g={addOn:m.jsx(r("FDSIcon.react"),{color:"secondary",icon:o("Locale").isRTL()?r("FDSChevronLeftFilled16Icon"):r("FDSChevronRightFilled16Icon")}),type:"body"},h={icon:r("FDSMessagesFilled24Icon"),size:56,type:"contained-icon"},t[9]=g,t[10]=h):(g=t[9],h=t[10]);var y;t[11]!==c?(y=m.jsx(r("MWJewelThreadSnippet.react"),{isUnread:!0,text:c}),t[11]=c,t[12]=y):y=t[12];var C;return t[13]!==n||t[14]!==y||t[15]!==l?(C=m.jsx(r("MWXListCellStrict.react"),{addOnEnd:g,addOnStart:h,body:y,headline:l,level:4,onPress:n}),t[13]=n,t[14]=y,t[15]=l,t[16]=C):C=t[16],C}l.default=f}),226);
__d("useMWLSJewelLoadMoreThreads",["Int64Hooks","loadMoreLSThreads","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),l,s;return n[0]!==t||n[1]!==a?(l=function(){return function(){var e=a.runInTransaction(function(e){return r("loadMoreLSThreads")(e,t)},"readwrite",void 0,void 0,i.id+":26");r("promiseDone")(e)}},s=[a,t],n[0]=t,n[1]=a,n[2]=l,n[3]=s):(l=n[2],s=n[3]),o("Int64Hooks").useMemoInt64(l,s)}l.default=s}),98);
__d("useMWLSLoadThreadFolderIfNotPresent",["CancellablePromise","CancellationToken","I64","Int64Hooks","ReQL","promiseDone","react-compiler-runtime","useMWLSJewelLoadMoreThreads","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(8),a=(s||(s=r("useReStore")))(),i=r("useMWLSJewelLoadMoreThreads")(t),l;n[0]!==a.tables.threads_ranges_v2__generated||n[1]!==i||n[2]!==t?(l=function(){var n=r("CancellationToken")();return r("promiseDone")(o("CancellablePromise").ignoreFailed(void 0,o("CancellablePromise").then_(n,function(e){e==null&&i()},o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads_ranges_v2__generated).filter(function(n){return(e||(e=o("I64"))).equal(n.parentThreadKey,t)}))))),n.cancel},n[0]=a.tables.threads_ranges_v2__generated,n[1]=i,n[2]=t,n[3]=l):l=n[3];var u;n[4]!==a||n[5]!==i||n[6]!==t?(u=[i,a,t],n[4]=a,n[5]=i,n[6]=t,n[7]=u):u=n[7],o("Int64Hooks").useEffectInt64(l,u)}l.default=u}),98);
__d("MWLSJewelMessageRequestsThreadContainer.react",["I64","LSIntEnum","MWJewelMessageRequestsThread.react","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","useMWLSLoadThreadFolderIfNotPresent","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react"));function m(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(-1)).filter(p)},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var u=o("ReQLSuspense").useArray(a,l,i.id+":27");return u.length}function p(e){return(u||(u=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function _(e){var t=o("react-compiler-runtime").c(4),n=e.onOpenMessageRequests,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(s||(s=o("LSIntEnum"))).ofNumber(-1),t[0]=a):a=t[0],r("useMWLSLoadThreadFolderIfNotPresent")(a);var i=m();if(n==null||i===0||r("gkx")("17132"))return null;var l;return t[1]!==n||t[2]!==i?(l=d.jsx(r("MWJewelMessageRequestsThread.react"),{onOpenMessageRequests:n,unreadRequestsCount:i}),t[1]=n,t[2]=i,t[3]=l):l=t[3],l}l.default=_}),98);
__d("LSFilteredThreadsRangesQuery",["LSGetCursor","LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.neq(e[10],void 0)?r[0]=e[10]:r[0]=t.i64.cast([0,0]),e[11]!==void 0?r[1]=e[11]:r[1]="",(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)||e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))&&!(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)&&e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))?t.sequence([function(o){return r[3]=e[4]==null?t.i64.cast([-2147483648,0]):e[4],r[4]=e[7]==null?t.i64.cast([0,1]):e[7],r[10]=t.i64.gt(r[4],t.i64.cast([0,1]))&&t.i64.gt(r[3],t.i64.cast([-2147483648,0])),t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,1])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(o){return r[5]=new t.Map,r[5].set("cursor",r[2]),r[5].set("filter",e[1]),r[5].set("is_after",e[3]),r[5].set("parent_thread_key",e[0]),r[5].set("reference_activity_timestamp",e[3]?e[6]:e[7]),r[5].set("reference_thread_key",e[3]?e[5]:e[4]),r[5].set("secondary_filter",r[0]),r[5].set("filter_value",r[1]),r[5].set("sync_group",t.i64.cast([0,1])),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[6]=t.i64.add(r[11],t.i64.cast([0,0]))):r[6]=t.i64.cast([0,0]),r[7]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),"trq",t.i64.cast([0,313]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[8]=t[0],t})},function(n){return t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}).next().then(function(n,o){var a=n.done,i=n.value;return a?t.db.table(247).add({folderName:"",parentThreadKey:e[0],minThreadKey:r[3]==null?t.i64.cast([-2147483648,0]):r[3],minLastActivityTimestampMs:r[4]==null?t.i64.cast([0,1]):r[4],threadRangeFilter:e[1],secondaryThreadRangeFilter:r[0],threadRangeFilterValue:r[1],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1,syncGroup:t.i64.cast([0,1])}):(o=i.item,t.forEach(t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}),function(e){var t=e.update,n=e.item;return t({isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1})}))})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFilteredThreadsRangesQueryStoredProcedure",e.__tables__=["filtered_threads_ranges_v3__generated"],a.exports=e}),null);
__d("LSFilteredThreadsRangesQueryStoredProcedure",["LSFilteredThreadsRangesQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFilteredThreadsRangesQuery"),a.parentThreadKey,a.filter,a.isLoadingBefore,a.isLoadingAfter,a.minThreadKey,a.maxThreadKey,a.maxLastActivityTimestampMs,a.minLastActivityTimestampMs,a.numThreads,a.numMessages,a.secondaryFilter,a.filterValue);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWPBaseThreadListUtils",["I64","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,l,u,c){c===void 0&&(c=!1);var d=(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE));r("promiseDone")((async function(){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(1)));m!=null&&(e||(e=o("I64"))).equal(m.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))&&await t.runInTransaction(function(t){return u==null||u(),d?r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{additionalPagesToFetch:(e||(e=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:e.max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,shouldSkipE2eeThreadsRanges:c}):r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{filter:a,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:(e||(e=o("I64"))).max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,secondaryFilter:l})},"readwrite","ui",void 0,i.id+":56")})())}l.loadMoreThreadsForEmptyRangeDefault=u}),98);
__d("ReQLScrollAnchored.react",["BaseScrollableAreaContext","BaseThemeProvider.react","CometPlaceholder.react","CometSSRSuspendOnServer.react","MWXScrollableAreaStyles","intersectionObserverEntryIsIntersecting","react","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useImperativeHandle,f=c.useLayoutEffect,g=c.useMemo,h=c.useRef,y=c.useState,C=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.render=function(){return t.props.children},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidUpdate=function(t,n,r){var e=t.children;this.props.componentDidUpdate(e,r)},n.getSnapshotBeforeUpdate=function(t){var e=t.children;return this.props.getSnapshotBeforeUpdate(e)},t})(u.PureComponent),b={hideScrollbar:{MsOverflowStyle:"x1pq812k",scrollbarWidth:"x1rohswg","::-webkit-scrollbar_height":"x1yqm8si","::-webkit-scrollbar_width":"xjx87ck",$$css:!0},overscrollBehaviorContain:{overscrollBehavior:"xish69e",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowAnchor:"x1xzczws",overflowX:"x6ikm8r",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0}},v=typeof ResizeObserver!="undefined";function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e,t){return e-t.scrollTop>t.clientHeight*2}var L=5;function E(t){var n=t.ref,o=t.hasReachedBottom,a=o===void 0?!0:o,i=t.hasReachedTop,l=i===void 0?!0:i,s=t.setScrollTopInResetForBottomAnchor,c=s===void 0?!0:s,E=t.initialAnchor,k=t.initialRenderComplete,I=t.onReachingBottom,T=t.onReachingTop,D=t.onScroll,x=t.onUserScroll,$=t.renderEmptyContent,P=t.renderFooter,N=t.renderHeader,M=t.renderHeaderContentSpacer,w=t.renderLoadingAnimation,A=t.isSufficientContentLoadedAbove,F=A===void 0?S:A,O=t.isSufficientContentLoadedBelow,B=O===void 0?R:O,W=t.headerStyle,q=t.hideScrollbar,U=t.snapThreshold,V=U===void 0?5:U,H=t.xstyle,G=t.shouldOverscrollBehaviourContain,z=t.elements,j=m(r("BaseScrollableAreaContext")),K=h(),Q=g(function(){return[].concat(j,[{getDOMNode:function(){return K==null?void 0:K.current}}])},[j]),X=h(),Y=h(),J=y(E),Z=J[0],ee=J[1],te=h(E),ne=h(null),re=d(function(){var e=K.current,t=Y.current;if(!(e==null||t==null||e.offsetParent===null||t.offsetParent===null)){var n=B(t.clientHeight,e);if(ne.current=e.scrollTop,!n&&!a&&I!=null){I();return}var r=F(e);ne.current=e.scrollTop,!r&&!l&&T!=null&&T()}},[a,l,F,B,I,T]);p(re,[re,z.length]);var oe=d(function(e){if(e.scrollHeight!==e.clientHeight){var t=e.scrollHeight-e.clientHeight-e.scrollTop<V&&a?"bottom":"top";ee(te.current=t),ne.current=e.scrollTop}},[a,V]),ae=d(function(){var e=K.current,t=ne.current;t==null||e==null||e.scrollTop!==t&&(e.scrollTop=t,D&&D(e))},[D]),ie=d(function(){var e=K.current,t=Y.current;e==null||t==null||(E==="bottom"?(c&&(e.scrollTop=e.scrollHeight),D&&D(e)):l||(e.scrollTop=t.offsetTop,D&&D(e)),a&&e.scrollHeight-e.clientHeight-e.scrollTop<V?ee(te.current="bottom"):ee(te.current=E),ne.current=e.scrollTop)},[a,l,E,D,V,c]),le=h(!1);f(function(){le.current||(ie(),le.current=!0)},[ie]);var se=d(function(){var e=K.current;e!=null&&(k&&e.scrollHeight>e.clientHeight&&k(),te.current==="bottom"&&(e.scrollTop=e.scrollHeight,D&&D(e)),ne.current=e.scrollTop)},[k,D]),ue=d(function(){var e=K.current;e!=null&&(D&&D(e),e.scrollTop!==ne.current&&(ne.current=null,re(),oe(e),x&&x()))},[re,D,x,oe]),ce=d(function(){se(),re()},[se,re]),de=d(function(){return se()},[se]),me=r("useResizeObserver")(de),pe=r("useResizeObserver")(ce),_e=d(function(e){me(e),Y.current=e},[me]),fe=d(function(e){pe(e),K.current=e},[pe]),ge=d(function(e,t){if(t!=null){var n=t.element,r=t.height,o=t.scrollAreaElement,a=n.clientHeight;ne.current=o.scrollTop,a!==r&&!(a<=r&&te.current==="bottom")&&(o.scrollTop+=a-r,ne.current=o.scrollTop,D&&D(o))}},[D]),he=d(function(){if(K.current!=null){var e=K.current;e.scrollTop=e.scrollHeight,ne.current=e.scrollTop,D&&D(e)}ee(te.current=a?"bottom":"top")},[a,D]);function ye(){if(K.current!=null){var e=K.current,t=e.scrollHeight-e.scrollTop-e.clientHeight<L;return ne.current=e.scrollTop,t}else return!1}var Ce=h(null),be=d(function(e,t){var n=Ce.current,o=K.current;if(n!=null&&o!=null){var a=new IntersectionObserver(function(e){var n=e[0];(n.boundingClientRect.height!==0||n.boundingClientRect.width!==0)&&t(r("intersectionObserverEntryIsIntersecting")(n))},{root:o,rootMargin:e+"px"});return a.observe(n),function(){return a.disconnect()}}},[]),ve=d(function(){var e=K.current;if(e!=null){var t=e.scrollHeight-e.clientHeight>0;return ne.current=e.scrollTop,t}return!1},[]);function Se(){var e=K.current;if(e==null)return null;var t={clientHeight:e.clientHeight,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop};return ne.current=e.scrollTop,t}_(n,function(){return{doesContentFillScroll:ve,getScrollAreaElement:function(){return K.current},getScrollerMeasurements:Se,isAtBottom:ye,onCloseToBottom:be,resetScrollPosition:ie,restoreScrollPosition:ae,scrollToBottom:he}},[ve,be,ie,ae,he]);var Re=g(function(){return u.jsx(C,{componentDidUpdate:ge,getSnapshotBeforeUpdate:function(t){var e=Y.current,n=K.current;if(e!=null&&n!=null&&!(l&&n.scrollTop===0)&&(!t.length||z.length&&t[0].key!==z[0].key&&t.length!==z.length)){var r=e.clientHeight;return ne.current=n.scrollTop,{element:e,height:r,scrollAreaElement:n}}return null},children:z})},[z,ge,l]);return u.jsx(r("BaseScrollableAreaContext").Provider,{value:Q,children:u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(H),{children:u.jsx("div",babelHelpers.extends({},{0:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6 x1xzczws"}}[(Z==="bottom")<<0],{children:u.jsx(r("BaseThemeProvider.react"),{children:function(n,o){return u.jsxs("div",{className:(e||(e=r("stylex")))(b.scrollArea,G===!0&&b.overscrollBehaviorContain,q===!0&&b.hideScrollbar,r("MWXScrollableAreaStyles").themed,n),"data-testid":void 0,onScroll:ue,ref:fe,style:o,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.ScrollArea",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=ce)}})})}),u.jsxs(C,{componentDidUpdate:ge,getSnapshotBeforeUpdate:function(){var e=X.current,t=K.current;if(e!=null&&t!=null&&(ne.current=t.scrollTop,ne.current!==0)){var n=e.clientHeight;return{element:e,height:n,scrollAreaElement:t}}return null},children:[u.jsx("div",babelHelpers.extends({},e.props(W),{ref:X,children:l?N&&N():w&&w("onTop",z.length)})),$!=null?$():null]}),M!=null&&M(),u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x1us19tq"}}[(z.length!==0&&!l&&!a)<<0],{children:u.jsxs("div",{className:"x1n2onr6",ref:_e,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.elementsHOC",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=se)}})})}),Re,u.jsx("div",{className:"x1ey2m1c xjm9jq1 x1y332i5 x47corl x10l6tqk",ref:Ce}),a?P&&P():w&&w("onBottom",z.length)]})}))]})}})}))}))})}E.displayName=E.name+" [from "+i.id+"]",l.default=E}),98);
__d("useStableValue",["I64","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useRef;function c(e){return d(e,(s||(s=o("I64"))).equal)}function d(e,t){var n=u(e);return t(n.current,e)||(n.current=e),n.current}l.useStableI64=c,l.useStableValue=d}),98);
__d("useStableBounds",["deepEquals","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("useStableValue").useStableValue(e,r("deepEquals"))}l.default=e}),98);
__d("ReQLPaginatedList.react",["FBLogger","I64","PromiseOrValue","ReQL","ReQLScrollAnchored.react","ReQLSuspense","SortedAsyncIterable","deepEquals","getErrorSafe","promiseDone","react","useMergeRefs","useStableBounds","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useLayoutEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=d.useTransition;function C(e,t){return t==null?e:e.bounds(t)}function b(e){if(e instanceof Promise)throw e;return e}function v(e){return{direction:e.direction,iterator:function(n,r){var t=e.iterator(n,r);return{next:function(n){return(s||(s=o("PromiseOrValue"))).map(t.next(n),function(e){return e.done?e:{done:!1,value:[e.value[0],e.value]}})}}},keyLength:e.keyLength,subscribe:function(n,r){return e.subscribe(async function(e,t,r){t.operation==="delete"?await n(e,t,r):t.operation==="add"?await n(e,{operation:"add",value:[e,t.value]},r):t.operation==="put"&&await n(e,{operation:"put",value:[e,t.value]},r)},r)}}}function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e){var t=e.bounds,n=e.direction,a=n===void 0?"asc":n,l=e.hasReachedBottom,s=l===void 0?!0:l,u=e.hasReachedTop,d=u===void 0?!0:u,R=e.imperativeRef,E=e.initialAnchor,k=e.initialRenderComplete,I=e.onDataLoaded,T=e.onPageLoaded,D=e.onReachingBottom,x=e.onReachingTop,$=e.onScroll,P=e.onUserScroll,N=e.pageSize,M=N===void 0?15:N,w=e.renderEmptyContent,A=e.renderFooter,F=e.renderHeader,O=e.renderHeaderContentSpacer,B=e.renderItem,W=e.renderLoadingAnimation,q=e.headerStyle,U=e.isSufficientContentLoadedAbove,V=U===void 0?S:U,H=e.isSufficientContentLoadedBelow,G=e.snapThreshold,z=G===void 0?5:G,j=e.setScrollTopInResetForBottomAnchor,K=j===void 0?!0:j,Q=e.data,X=Q.ascending,Y=Q.descending,J=e.xstyle,Z=e.isLogDuplicatedItemEnabled,ee=Z===void 0?!1:Z,te=e.shouldOverscrollBehaviourContain,ne=y(),re=ne[0],oe=ne[1],ae=r("useStableBounds")(t);if(E!=null&&E!=="top"&&E!=="bottom"){var ie=C(Y,ae).bounds({lt:E}).iterator(new WeakMap).next();if(ie instanceof Promise)throw ie;E=ie.done?"top":ie.value[0]}var le=o("useStableValue").useStableValue(E,r("deepEquals")),se=f(function(){var e,t;return le==="top"||le==null?(e=o("ReQL").empty(),t=a==="asc"?X:Y):le==="bottom"?(e=a==="asc"?Y:X,t=o("ReQL").empty()):(e=a==="asc"?Y.bounds({lt:le}):X.bounds({gt:le}),t=a==="asc"?X.bounds({gte:le}):Y.bounds({lte:le})),{after:t,before:e}},[le,X,Y,a]),ue=g(!1),ce=f(function(){var e,t,n,r=b(o("SortedAsyncIterable").toArray(C(se.before,ae).take(le==="bottom"?M:0),i.id+":204")).reverse(),a=b(o("SortedAsyncIterable").toArray(C(se.after,ae).take(M),i.id+":211")),l=le==="bottom"?!0:a.length<M,s=le==="top"||le==null?!0:le==="bottom"?r.length<M:!1;return{firstKey:s?void 0:le==="bottom"?(e=r[0])==null?void 0:e[0]:(t=a[0])==null?void 0:t[0],lastKey:l||(n=a[a.length-1])==null?void 0:n[0]}},[le,ae,se.after,se.before,M]),de=h(function(){return{anchor:le,iterables:se,values:ce}}),me=de[0],pe=de[1],_e=me.iterables===se&&me.anchor===le,fe=_e?me.values:ce,ge=fe.firstKey,he=fe.lastKey,ye=o("ReQLSuspense").useArray(function(){return v(ge==null?C(se.before,ae).take(M):C(se.before,ae).bounds(a==="asc"?{gte:ge}:{lte:ge}))},[ae,a,ge,se.before,M],i.id+":246"),Ce=f(function(){return[].concat(ye).reverse()},[ye]);p(function(){Ce.length===M&&ge==null&&oe(function(){return pe({anchor:le,iterables:se,values:{firstKey:Ce[0][0],lastKey:he}})})},[Ce,ge,le,se,he,M]);var be=o("ReQLSuspense").useArray(function(){return v(he==null?C(se.after,ae).take(M):C(se.after,ae).bounds(a==="asc"?{lte:he}:{gte:he}))},[ae,a,se.after,he,M],i.id+":273");p(function(){be.length===M&&he==null&&oe(function(){return pe({anchor:le,iterables:se,values:{firstKey:ge,lastKey:be[be.length-1][0]}})})},[be,ge,le,se,he,M]);var ve=f(function(){return[].concat(Ce,be)},[Ce,be]);p(function(){I==null||I(ve)},[ve,I]);var Se=o("ReQLSuspense").useFirst(function(){return ve.length===0?o("ReQL").empty():C(se.before,ae).bounds(a==="asc"?{lt:ve[0][0]}:{gt:ve[0][0]})},[ve,ae,a,se.before],i.id+":305")==null,Re=o("ReQLSuspense").useFirst(function(){return ve.length===0?o("ReQL").empty():C(se.after,ae).bounds(a==="asc"?{gt:ve[ve.length-1][0]}:{lt:ve[ve.length-1][0]})},[ve,ae,a,se.after],i.id+":315")==null,Le=y(),Ee=Le[0],ke=Le[1],Ie=m(function(){if(!(ue.current||Ee))if(Re){if(!s&&D!=null)return D()}else{ue.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(a==="asc"?X:Y,ae).bounds(a==="asc"?{gt:ve[ve.length-1][0]}:{lt:ve[ve.length-1][0]}).take(M),i.id+":342")),function(e){ue.current=!1,T!=null&&T("bottom",ve[ve.length-1][1],e.map(function(e){return e[1]})),ke(function(){var t,n;return pe({anchor:le,iterables:se,values:{firstKey:ge,lastKey:(t=(n=e[e.length-1])==null?void 0:n[0])!=null?t:ve[ve.length-1][0]}})})});return}},[Ee,Re,s,D,a,X,Y,ae,ve,M,T,ge,se,le]),Te=y(),De=Te[0],xe=Te[1],$e=g(!0),Pe=m(function(){if(!(ue.current||De)){if(Se)return d||x==null?void 0:x();ue.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(a==="asc"?Y:X,ae).bounds(a==="asc"?{lt:ve[0][0]}:{gt:ve[0][0]}).take(M),i.id+":414")),function(e){ue.current=!1,T!=null&&($e.current?($e.current=!1,T("top",null,ve.slice(0,M).map(function(e){return e[1]}).reverse())):T("top",ve[0][1],e.map(function(e){return e[1]}))),e.reverse(),xe(function(){var t,n;return pe({anchor:le,iterables:se,values:{firstKey:(t=(n=e[0])==null?void 0:n[0])!=null?t:ve[0][0],lastKey:he}})})})}},[De,Se,d,x,a,Y,X,ae,ve,M,T,he,se,le]),Ne=Se&&d?0:1,Me=ve.length-(Re&&s?0:1),we=f(function(){for(var e=new Array(Me>Ne?Me-Ne:0),t=Ne;t<Me;t++){var n,r;e[t-Ne]=B(ve[t][1],{nextItem:(n=ve[t+1])==null?void 0:n[1],previousItem:(r=ve[t-1])==null?void 0:r[1]},Me-Ne-t)}return e},[ve,Ne,B,Me]),Ae=g(null),Fe=r("useMergeRefs")(Ae,R);_(function(){var e;(e=Ae.current)==null||e.resetScrollPosition()},[le]);var Oe=m(function(){return A==null?void 0:A(ve.length>0?ve[ve.length-1][1]:void 0)},[ve,A]);return L(ee,ve),c.jsx(r("ReQLScrollAnchored.react"),{elements:we,hasReachedBottom:Re&&s,hasReachedTop:Se&&d,headerStyle:q,initialAnchor:le==="bottom"?"bottom":"top",initialRenderComplete:k,isSufficientContentLoadedAbove:V,isSufficientContentLoadedBelow:H,onReachingBottom:Ie,onReachingTop:Pe,onScroll:$,onUserScroll:P,pageSize:M,ref:Fe,renderEmptyContent:w,renderFooter:Oe,renderHeader:F,renderHeaderContentSpacer:O,renderLoadingAnimation:W,setScrollTopInResetForBottomAnchor:K,shouldOverscrollBehaviourContain:te,snapThreshold:z,xstyle:J})}R.displayName=R.name+" [from "+i.id+"]";function L(e,t){var n=h(!1),a=n[0],i=n[1];p(function(){try{if(e&&!a){var n=new Set,l=[];for(var s of t){var c=s[1];if(typeof c=="object"&&(c==null?void 0:c.threadKey)!=null&&(u||(u=o("I64"))).isI64(c==null?void 0:c.threadKey)){var d=(u||(u=o("I64"))).to_string(c==null?void 0:c.threadKey);n.has(d)&&l.push(d),n.add(d)}}n.size!==t.length&&(i(!0),r("FBLogger")("messenger_web").warn("Duplicated thread item detected in ReQLPaginatedList %s",l.join(",")))}}catch(e){var m=r("getErrorSafe")(e);r("FBLogger")("messenger_web").warn("Duplicated thread item error",m.message)}},[t,a,e])}l.default=R}),98);
__d("useMWCMMarkBumpedThreadsSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWCMMarkBumpedThreadsSeen").__setRef("useMWCMMarkBumpedThreadsSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return function(e){return n.MWCMMarkBumpedThreadsSeen(t,e)}}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMarkSeenWhenVisible",["CometDebounce","Int64Hooks","ReQL","UserActivity","promiseDone","react","useMWCMMarkBumpedThreadsSeen","useMWPMarkSeen","useMWPWatchFolderFocusChanges","useReStore","useSimpleImpression","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef;function m(t){var n=(e||(e=r("useReStore")))(),a=d(!1),l=r("useMWCMMarkBumpedThreadsSeen")(t),s=r("useVisibilityObserver")({onHidden:function(){a.current=!1},onVisible:function(){a.current=!0}}),u=r("useMWPMarkSeen")(t),m=r("CometDebounce")(c(function(){r("promiseDone")((async function(){var e=await Promise.all([u.load(),l.load()]),t=e[0],r=e[1];await n.runInTransaction(async function(e){await t(e),await r(e)},"readwrite",void 0,void 0,i.id+":56")})())},[u,l,n]),{leading:!0,wait:500});return r("useMWPWatchFolderFocusChanges")(m,a),r("useSimpleImpression")(m),o("Int64Hooks").useEffectInt64(function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),[]).getKeyRange(t).take(1).subscribe(function(){r("UserActivity").isOnTab()&&a.current===!0&&m()})},[n,t,m]),s}l.default=m}),98);
__d("MWPBaseThreadList.react",["Box.react","FBLogger","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","MAWMaybeWithTimeout","MWPBaseThreadListHooks","MWPBaseThreadListUtils","MWThreadListFocusableTable.react","ReQL","ReQLPaginatedList.react","ReQLSuspense","react","react-compiler-runtime","useMarkSeenWhenVisible","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=s,p=m.useCallback,_=m.useEffect,f={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},g=1e4;function h(e,t,n,a){a===void 0&&(a=!1),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var i,l=await(i=e.threads_ranges_v2__generated).get.apply(i,t);if(!(l==null||l.isLoadingBefore))return n&&n(),r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{additionalPagesToFetch:(u||(u=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:l.maxLastActivityTimestampMs,maxThreadKey:l.maxThreadKey,minLastActivityTimestampMs:l.minLastActivityTimestampMs,minThreadKey:l.minThreadKey,parentThreadKey:l.parentThreadKey,shouldSkipE2eeThreadsRanges:a})},"readwrite","ui",void 0,i.id+":91"),g,function(){r("FBLogger")("messenger_web").warn("Paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2]))})}function y(e,t,n,a,l){a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var o,i=await(o=e.filtered_threads_ranges_v3__generated).get.apply(o,t);if(!(i==null||i.isLoadingBefore))return l&&l(),r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{filter:n,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:i.maxLastActivityTimestampMs,maxThreadKey:i.maxThreadKey,minLastActivityTimestampMs:i.minLastActivityTimestampMs,minThreadKey:i.minThreadKey,parentThreadKey:i.parentThreadKey,secondaryFilter:a})},"readwrite","ui",void 0,i.id+":150"),g,function(){r("FBLogger")("messenger_web").warn("Filtered paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2])+`
        thread_range_filter: `+u.to_string(t[3])+`
        secondary_thread_range_filter: `+u.to_string(t[5]))})}function C(e,t,n,a,i,l){if(a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l===void 0&&(l=!1),t!=null)if(t.threadRangeFilter){var u=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs,t.threadRangeFilter,t.folderName,t.secondaryThreadRangeFilter,t.threadRangeFilterValue];y(e,u,n,a,i)}else{var s=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs];h(e,s,i,l)}}function b(e,t,n,a){var l=o("react-compiler-runtime").c(14),s;l[0]!==n?(s=(u||(u=o("I64"))).equal(n,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l[0]=n,l[1]=s):s=l[1];var d=s,m,p;l[2]!==e||l[3]!==d||l[4]!==t?(m=function(){return d?o("ReQL").fromTableDescending(e.tables.threads_ranges_v2__generated).getKeyRange(t):o("ReQL").empty()},p=[e,t,d],l[2]=e,l[3]=d,l[4]=t,l[5]=m,l[6]=p):(m=l[5],p=l[6]);var _=o("ReQLSuspense").useFirst(m,p,i.id+":250"),f,g;l[7]!==e||l[8]!==n||l[9]!==d||l[10]!==t||l[11]!==a?(f=function(){return d?o("ReQL").empty():o("ReQL").fromTableDescending(e.tables.filtered_threads_ranges_v3__generated).getKeyRange(t).filter(function(e){return(u||(u=o("I64"))).equal(e.threadRangeFilter,n)&&(a==null||(u||(u=o("I64"))).equal(e.secondaryThreadRangeFilter,a))})},g=[e,n,t,a,d],l[7]=e,l[8]=n,l[9]=d,l[10]=t,l[11]=a,l[12]=f,l[13]=g):(f=l[12],g=l[13]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":257");return d?_:h}function v(t){var n=o("react-compiler-runtime").c(71),a=t.afterContent,l=t.beforeContent,s=t.containerStyle,m=t.customThreadFilter,p=t.emptyContent,g=t.filter,h=t.gridLabel,y=t.imperativeRef,v=t.isSufficientContentLoadedBelow,S=t.loadMoreThreads,R=t.loadMoreThreadsForEmptyRange,L=t.onDataLoaded,E=t.onLoadMoreThreads,k=t.onReachingTop,I=t.onScroll,T=t.onThreadsLoaded,D=t.pageSize,x=t.parentThreadKey,$=t.renderItem,P=t.renderLoadingAnimation,N=t.role,M=t.secondaryFilter,w=t.setIsEmptyInbox,A=t.shouldSkipE2eeThreadsRanges,F;n[0]!==g?(F=g===void 0?(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE):g,n[0]=g,n[1]=F):F=n[1];var O=F,B=S===void 0?C:S,W=R===void 0?o("MWPBaseThreadListUtils").loadMoreThreadsForEmptyRangeDefault:R,q=N===void 0?"grid":N,U=A===void 0?!1:A,V=(e||(e=r("useReStore")))(),H=b(V,x,O,M);H!=null&&!H.isLoadingBefore&&T&&T();var G=o("MWPBaseThreadListHooks").useMWPBaseThreadListBounds(H),z;n[2]!==m||n[3]!==V||n[4]!==x?(z={customThreadFilter:m,db:V,parentThreadKey:x},n[2]=m,n[3]=V,n[4]=x,n[5]=z):z=n[5];var j=o("MWPBaseThreadListHooks").useMWPBaseThreadListFilteredData(z),K;n[6]!==G||n[7]!==j.descending?(K=function(){return j.descending.bounds(G)},n[6]=G,n[7]=j.descending,n[8]=K):K=n[8];var Q;n[9]!==G||n[10]!==j?(Q=[G,j],n[9]=G,n[10]=j,n[11]=Q):Q=n[11];var X=o("ReQLSuspense").useFirst(K,Q,i.id+":345")==null,Y,J;n[12]!==X||n[13]!==w?(Y=function(){w&&w(X)},J=[X,w],n[12]=X,n[13]=w,n[14]=Y,n[15]=J):(Y=n[14],J=n[15]),_(Y,J);var Z,ee;n[16]!==V||n[17]!==H||n[18]!==O||n[19]!==W||n[20]!==E||n[21]!==x||n[22]!==M?(Z=function(){H==null&&W(V,x,O,M,E)},ee=[x,H,V,O,M,E,W],n[16]=V,n[17]=H,n[18]=O,n[19]=W,n[20]=E,n[21]=x,n[22]=M,n[23]=Z,n[24]=ee):(Z=n[23],ee=n[24]),o("Int64Hooks").useEffectInt64(Z,ee);var te=r("useMarkSeenWhenVisible")(x),ne;n[25]!==V||n[26]!==H||n[27]!==O||n[28]!==B||n[29]!==E||n[30]!==M||n[31]!==U?(ne=function(){B(V,H,O,M,E,U)},n[25]=V,n[26]=H,n[27]=O,n[28]=B,n[29]=E,n[30]=M,n[31]=U,n[32]=ne):ne=n[32];var re=ne,oe;n[33]!==$?(oe=function(t){return d.jsx(d.Fragment,{children:$(t)},(u||(u=o("I64"))).to_string(t.threadKey))},n[33]=$,n[34]=oe):oe=n[34];var ae=oe,ie;if(H==null){var le;n[35]!==P?(le=P!=null?P("nullState",0):null,n[35]=P,n[36]=le):le=n[36],ie=le}else{var se=!H.hasMoreBefore,ue=!H.hasMoreAfter,ce;n[37]!==H.isLoadingAfter||n[38]!==H.isLoadingBefore||n[39]!==p||n[40]!==X?(ce=function(){return X&&!H.isLoadingAfter&&!H.isLoadingBefore?d.jsx(r("Box.react"),{xstyle:f.emptyContentContainer,children:p}):null},n[37]=H.isLoadingAfter,n[38]=H.isLoadingBefore,n[39]=p,n[40]=X,n[41]=ce):ce=n[41];var de;n[42]!==a?(de=function(){return a},n[42]=a,n[43]=de):de=n[43];var me;n[44]!==l?(me=function(){return l},n[44]=l,n[45]=me):me=n[45];var pe;n[46]!==G||n[47]!==j||n[48]!==y||n[49]!==v||n[50]!==L||n[51]!==re||n[52]!==k||n[53]!==I||n[54]!==D||n[55]!==ae||n[56]!==P||n[57]!==se||n[58]!==ue||n[59]!==ce||n[60]!==de||n[61]!==me?(pe=d.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:d.jsx(r("ReQLPaginatedList.react"),{bounds:G,data:j,direction:"desc",hasReachedBottom:se,hasReachedTop:ue,imperativeRef:y,isLogDuplicatedItemEnabled:!0,isSufficientContentLoadedBelow:v,onDataLoaded:L,onReachingBottom:re,onReachingTop:k,onScroll:I,pageSize:D,renderEmptyContent:ce,renderFooter:de,renderHeader:me,renderItem:ae,renderLoadingAnimation:P,shouldOverscrollBehaviourContain:!0,xstyle:f.list})}),n[46]=G,n[47]=j,n[48]=y,n[49]=v,n[50]=L,n[51]=re,n[52]=k,n[53]=I,n[54]=D,n[55]=ae,n[56]=P,n[57]=se,n[58]=ue,n[59]=ce,n[60]=de,n[61]=me,n[62]=pe):pe=n[62],ie=pe}var _e;n[63]!==s?(_e=[f.container,s],n[63]=s,n[64]=_e):_e=n[64];var fe;return n[65]!==ie||n[66]!==h||n[67]!==q||n[68]!==_e||n[69]!==te?(fe=d.jsx(r("Box.react"),{"aria-label":h,"data-testid":void 0,ref:te,role:q,xstyle:_e,children:ie}),n[65]=ie,n[66]=h,n[67]=q,n[68]=_e,n[69]=te,n[70]=fe):fe=n[70],fe}l.default=v}),98);
__d("MWPParentThreadKeyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("MWThreadListFolderItem.react",["BaseView.react","CometTextWithEntities.react","I64","MAWVault","MWAddOnCircleContainer.react","MWCMThreadTypes.react","MWChatTextTransform","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListLastMessage.react","MWXListCellPressable.react","MWXTextPairing.react","react","react-compiler-runtime","useMatchMedia"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo;function p(e){var t=o("react-compiler-runtime").c(28),n=e.icon,a=e.onClick,i=e.responsive,l=e.selected,c=e.size,d=e.thread,m=e.threadName,p=r("useMatchMedia")("(min-width: 900px)")||!i,_,f;t[0]!==d.snippet?(f=d.snippet!=null?o("MAWVault").unvault(d.snippet):null,t[0]=d.snippet,t[1]=f):f=t[1],_=f;var g=_,h;t[2]!==d.lastActivityTimestampMs?(h=(s||(s=o("I64"))).to_float(d.lastActivityTimestampMs),t[2]=d.lastActivityTimestampMs,t[3]=h):h=t[3];var y=h,C=o("MWPIsThreadUnread").useIsThreadUnread(d.threadKey),b,v;t[4]!==n||t[5]!==c?(v=u.jsx(r("MWAddOnCircleContainer.react"),{size:c,children:n}),t[4]=n,t[5]=c,t[6]=v):v=t[6],b=v;var S=b,R;R=m!=null?m:d.threadName;var L=R,E;t[7]!==a?(E=function(){return a()},t[7]=a,t[8]=E):E=t[8];var k=E,I;t[9]===Symbol.for("react.memo_cache_sentinel")?(I={className:"xmzvs34 xf159sx"},t[9]=I):I=t[9];var T;t[10]!==p||t[11]!==C||t[12]!==y||t[13]!==g||t[14]!==d.threadType?(T=p?u.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:!1,isUnread:C,lastMessageCtaType:null,lastMessageTimestamp:y,showTimestamp:!o("MWCMThreadTypes.react").isUnjoinedCMThread(d.threadType),snippet:g}):null,t[10]=p,t[11]=C,t[12]=y,t[13]=g,t[14]=d.threadType,t[15]=T):T=t[15];var D;t[16]!==L||t[17]!==p?(D=p?u.jsx(r("CometTextWithEntities.react"),{text:L.toString(),transforms:o("MWChatTextTransform").textTransforms}):null,t[16]=L,t[17]=p,t[18]=D):D=t[18];var x=!C,$;t[19]!==D||t[20]!==x||t[21]!==T?($=u.jsx(r("MWXTextPairing.react"),{body:T,bodyLineLimit:1,headline:D,headlineLineLimit:1,level:4,reduceEmphasis:x}),t[19]=D,t[20]=x,t[21]=T,t[22]=$):$=t[22];var P;return t[23]!==S||t[24]!==k||t[25]!==l||t[26]!==$?(P=u.jsx(r("BaseView.react"),{testid:void 0,children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:u.jsx("div",{role:"row",children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:u.jsx("div",babelHelpers.extends({},I,{role:"gridcell",children:u.jsx(r("MWXListCellPressable.react"),{addOnStart:S,content:$,onPress:k,selected:l,size:"large"})}))})})})}),t[23]=S,t[24]=k,t[25]=l,t[26]=$,t[27]=P):P=t[27],P}l.default=p}),98);
__d("MWThreadListJobsItem.react",["fbt","ix","LSIntEnum","MWThreadListFolderItem.react","MWXIcon_DEPRECATED.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(11),n=e.onClick,a=e.responsive,i=e.selected,l=e.size,m=e.thread,p;t[0]!==n?(p=function(){return n((c||(c=o("LSIntEnum"))).ofNumber(-13))},t[0]=n,t[1]=p):p=t[1];var _=p,f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(r("MWXIcon_DEPRECATED.react"),{color:"primary",icon:o("fbicon")._(u("512668"),32),size:48}),t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=(c||(c=o("LSIntEnum"))).ofNumber(-13),t[3]=g):g=t[3];var h;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=s._(/*BTDS*/"Jobs").toString(),t[4]=h):h=t[4];var y;return t[5]!==_||t[6]!==a||t[7]!==i||t[8]!==l||t[9]!==m?(y=d.jsx(r("MWThreadListFolderItem.react"),{icon:f,onClick:_,responsive:a,selected:i,size:l,systemFolder:g,thread:m,threadName:h}),t[5]=_,t[6]=a,t[7]=i,t[8]=l,t[9]=m,t[10]=y):y=t[10],y}l.default=m}),226);
__d("MAWThreadAPI",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.tables.threads.subscribe(function(e,n){n.operation==="delete"&&t(n.prevValue)})}i.subscribeToThreadsDeletion=e}),66);
__d("useClearDraftOnThreadDelete",["MAWMiActMappingTableAPI","MAWThreadAPI","MAWUIPersistedDataServices","Promise","gkx","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(t,r){return o("MAWMiActMappingTableAPI").getChatJidForThreadKey(t.tables,r.threadKey,r.threadType).then(function(t){return t!=null?o("MAWUIPersistedDataServices").getMAWUIPersistedDataServices().sendUpdateFor("messageComposerDrafts",[{key:t,timestamp:0,value:{draftText:""}}]):(e||(e=n("Promise"))).resolve()})}function d(e){var t=o("react-compiler-runtime").c(3),n,a;t[0]!==e?(n=function(){r("gkx")("16991")&&o("MAWThreadAPI").subscribeToThreadsDeletion(e,function(t){return r("promiseDone")(c(e,t))})},a=[e],t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),u(n,a)}l.default=d}),98);
__d("MWThreadList.react",["CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","CometPageletWithDiv.react","CometRouterFocusRegion.react","CometTransientDialogProvider.react","CometVisualCompletion","CurrentEnvironment","FBLogger","FocusRegion.react","FocusRegionType","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSThreadBitOffset","MWCMGetValidId","MWCreatorMessagingUtils","MWJewelPopoverThreadlistContext.react","MWLSJewelMessageRequestsThreadContainer.react","MWPBaseThreadList.react","MWPBumpEntityKey","MWPParentThreadKeyContext","MWPThreadIsPage.react","MWPThreadsForThreadList","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWThreadKey.react","MWThreadListEmptyContainer.react","MWThreadListGlimmer.react","MWThreadListItem.react","MWThreadListJobsItem.react","MWThreadListSupportedThreadTypes","MWXacGating","MessagingFolderTag","MessengerWebUXLogger","QPLUserFlow","ReQL","ReQLSuspense","VirtualizationContainerContext","cr:12043","cr:13568","cr:21161","cr:21162","cr:2261","cr:6055","emptyFunction","focusScopeQueries","gkx","isMWXacGroupThread","mwCMIsThreadBumped","qpl","react","react-compiler-runtime","useClearDraftOnThreadDelete","useCommunityFolder","useEmptyFunction","useGroupsCometIsInCCNegativeTest","useMWGetInboxFocusTargetFromRoute","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=d||(d=o("react")),f=d,g=f.useCallback,h=f.useContext,y=f.useId,C=f.useMemo,b=f.useRef;function v(e){var t=o("react-compiler-runtime").c(1),n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n={computeInboxFollowUps:S,reminders:[]},t[0]=n):n=t[0],n}function S(){}var R=(e=n("cr:12043"))!=null?e:{useInboxFollowUps:v},L=(s=(u=n("cr:21162"))==null?void 0:u.useFilterPinnedThreads)!=null?s:r("useEmptyFunction"),E=n("cr:6055")||r("useEmptyFunction");function k(e){return(m||(m=o("I64"))).equal(e.threadType,(p||(p=o("LSIntEnum"))).ofNumber(15))&&(m||(m=o("I64"))).equal(e.authorityLevel,(p||(p=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&(m||(m=o("I64"))).equal(e.lastReadWatermarkTimestampMs,(m||(m=o("I64"))).of_int32(-1))&&(m||(m=o("I64"))).equal(e.lastActivityTimestampMs,(m||(m=o("I64"))).of_int32(-1))}var I=5;function T(e){var t=e.lsEntryPoint,a=e.lsSubEntryPoint,i=e.messagingEntrypoint,l=e.onClickNestedFolderThread,s=e.onClose,u=e.responsive,c=e.selected,d=e.showFollowUpReminder,f=e.thread,g=h(r("MWJewelPopoverThreadlistContext.react")),y=r("useCommunityFolder")({parentThreadKey:(m||(m=o("I64"))).equal(f.threadType,(p||(p=o("LSIntEnum"))).ofNumber(17))?f.threadKey:f.parentThreadKey}),C=h(r("MWResponsiveLayoutContext.react")),v=C.pushCard,S=f.threadKey;o("Int64Hooks").useEffectInt64(function(){if(n("cr:2261")!=null)return g==null||g.add(S),function(){g==null||g.delete(S)}},[g,S]);var R=b({loggingTimeout:null,threadKey:(m||(m=o("I64"))).of_int32(-1)}),L=b(m.of_int32(-1)),E=h(r("MWPParentThreadKeyContext"));o("Int64Hooks").useEffectInt64(function(){if(E!=null){var e=(m||(m=o("I64"))).to_string(f.parentThreadKey),t=m.to_string(E);!(m||(m=o("I64"))).equal(L.current,S)&&f.folderName!==r("MessagingFolderTag").COMMUNITY&&e!==t&&r("FBLogger")("messenger_threadlist_folder_inconsistency").mustfix("Render thread item expected folder %s but receive %s",t,e)}k(f)?(m||(m=o("I64"))).equal(R.current.threadKey,S)||(R.current.threadKey=S,R.current.loggingTimeout=window.setTimeout(function(){r("FBLogger")("messenger_web").mustfix("Thread ID %s showing up as ghost",(m||(m=o("I64"))).to_string(S)),R.current.loggingTimeout=null},5e3)):(m||(m=o("I64"))).equal(R.current.threadKey,S)&&R.current.loggingTimeout!=null&&window.clearTimeout(R.current.loggingTimeout)},[E,f,S]);var I=o("Int64Hooks").useCallbackInt64(function(){o("MWCreatorMessagingUtils").isAPPlusMessageRequest(f)&&r("QPLUserFlow").start(r("qpl")._(421070823,"2981"),{annotations:{string:{entrypoint:o("MWCreatorMessagingUtils").fetchQPLEntrypoint(f)}},instanceKey:(m||(m=o("I64"))).to_int32(f.threadKey)}),r("mwCMIsThreadBumped")({secondaryParentThreadKey:f.secondaryParentThreadKey,threadType:f.threadType})&&o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_bumped:"true"},community_id:y?(m||(m=o("I64"))).to_string(y.folderId):(m||(m=o("I64"))).to_string(f.parentThreadKey),event:"thread_open",group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(y==null?void 0:y.fbGroupId)?(m||(m=o("I64"))).to_string(y.fbGroupId):null,source:"chat_row",surface:t==="jewel"?"jewel_tray":"messenger_inbox",thread_id:(m||(m=o("I64"))).to_string(S)}),c&&v(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL)},[f.secondaryParentThreadKey,f.threadType,f.parentThreadKey,y,t,S,c,v]);return(m||(m=o("I64"))).equal(f.threadType,(p||(p=o("LSIntEnum"))).ofNumber(6))?(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-13))?_.jsx(r("MWThreadListJobsItem.react"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):n("cr:2261")!=null&&(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-12))&&!r("gkx")("17132")?_.jsx(n("cr:2261"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):n("cr:13568")!=null&&(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-18))?_.jsx(n("cr:13568"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):null:_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:_.jsx(r("MWThreadListGlimmer.react"),{parentComponentForDebug:"MWThreadListItem"}),name:"MWThreadListThreadListRow",children:_.jsx(o("MWPThreadIsPage.react").Provider,{threadKey:f.threadKey,children:_.jsx(o("MWThreadKey.react").MWThreadKeyProvider,{id:f.threadKey,children:_.jsx(r("CometTransientDialogProvider.react"),{children:_.jsx(r("MWThreadListItem.react"),{lsEntryPoint:t,lsSubEntryPoint:a,messagingEntrypoint:i,onClose:s,onThreadSelected:I,selected:c,showFollowUpReminder:d,size:56,thread:f})})})})})}T.displayName=T.name+" [from "+i.id+"]";var D=_.memo(T);function x(e){var t=e.gridLabel,a=e.filter,l=e.customThreadFilter,s=e.header,u=e.lsEntryPoint,d=e.onOpenMessageRequests,f=e.lsSubEntryPoint,h=e.parentThreadKey,v=e.responsive,S=e.selectedThreadKey,k=e.setHasScrolled,T=e.setIsEmptyInbox,x=e.threadListMessagingEntrypoint,P=e.onClose,N=P===void 0?r("emptyFunction"):P,M=e.onClickNestedFolderThread,w=M===void 0?r("emptyFunction"):M,A=e.preamble,F=(c||(c=r("useReStore")))(),O=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(F.tables.threads_ranges_v2__generated).getKeyRange(h)},[F,h],i.id+":386");r("useClearDraftOnThreadDelete")(F);var B=o("ReQLSuspense").useArray(function(){return o("MWPThreadsForThreadList").createIterable(F,h,O,["lastActivityTimestampMs","threadType"].concat(o("LSThreadBitOffset").threadCapabilityFields)).filter(function(e){return r("MWThreadListSupportedThreadTypes").some(function(t){return(m||(m=o("I64"))).equal(e.threadType,t)})?o("MWXacGating").isGroupsEnabled()?!0:!r("isMWXacGroupThread")(e):!1}).take(5)},[F,h,O],i.id+":401").pop(),W=y(),q=o("ReQLSuspense").useFirst(function(){return S!=null?o("ReQL").fromTableAscending(F.tables.threads,["parentThreadKey"]).getKeyRange(S):o("ReQL").empty()},[F,S],i.id+":427");E(W);var U=o("useGroupsCometIsInCCNegativeTest").useShouldDisableBumpToInboxForNegativeTest(),V=R.useInboxFollowUps(F),H=V.computeInboxFollowUps,G=V.reminders,z=g(function(e){if(e==null)return _.jsx("div",{});if(o("CurrentEnvironment").facebookdotcom&&r("mwCMIsThreadBumped")({secondaryParentThreadKey:e.secondaryParentThreadKey,threadType:e.threadType})&&U)return _.jsx("div",{});var t;return(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-13))||(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-12))||(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-18))?t=q!=null&&(m||(m=o("I64"))).equal(e.threadKey,q.parentThreadKey):t=S!=null&&(m||(m=o("I64"))).equal(S,e.threadKey),e!=null?_.jsx(r("CometHideableComponentExperiment.react"),{callingSurface:"thread_list",disableHiding:!0,children:_.jsx(D,{lsEntryPoint:u==="inboxThreadList"?B!=null&&(m||(m=o("I64"))).le(e.lastActivityTimestampMs,B.lastActivityTimestampMs)?"inboxRecentThreads":"inboxRemainingThreads":u,lsSubEntryPoint:f,messagingEntrypoint:x!=null?x:"jewel",onClickNestedFolderThread:w,onClose:N,responsive:v,selected:t,showFollowUpReminder:G.find(function(t){return(m||(m=o("I64"))).equal(t,e.threadKey)})!=null,thread:e})}):_.jsx("div",{})},[u,B,x,w,N,v,q,S,U,G]),j=g(function(e){k&&k(function(t){return e.scrollTop>0})},[k]),K=r("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"threadlist_impression"}),Q=b(null),X=C(function(){return{rootElementRef:Q}},[Q]),Y=g(function(e){var t;Q.current=(t=e==null?void 0:e.getScrollAreaElement())!=null?t:null},[]),J=L(),Z=g(function(e){return(J!=null?J(e):!0)&&(l!=null?l(e):!0)},[J,l]),ee=r("useMWGetInboxFocusTargetFromRoute")(),te=ee===1,ne=_.jsx(o("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xmz0i5r x6ikm8r x10wlt62",fallback:null,name:"MWThreadList",children:_.jsx(r("MWPParentThreadKeyContext").Provider,{value:h,children:_.jsx(r("VirtualizationContainerContext").Provider,{value:X,children:_.jsx(r("MWPBaseThreadList.react"),{beforeContent:_.jsxs(_.Fragment,{children:[_.jsx(r("MWLSJewelMessageRequestsThreadContainer.react"),{onOpenMessageRequests:d}),A,n("cr:21161")&&_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWPinnedThreadsList",children:_.jsx(n("cr:21161"),{customThreadFilter:l,parentThreadKey:h,renderItem:z})})]}),customThreadFilter:Z,emptyContent:_.jsx(r("MWThreadListEmptyContainer.react"),{filter:a,parentThreadKey:h}),filter:a,gridLabel:t,imperativeRef:Y,onDataLoaded:H,onLoadMoreThreads:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.threadlist","load_more_threads"),r("CometVisualCompletion").addFirstMarkerPoint("threadListLoadMoreThreads")},onScroll:j,pageSize:15,parentThreadKey:h,renderItem:z,renderLoadingAnimation:function(t,n){var e=t==="onBottom"&&n>I;return _.jsxs("div",{children:[_.jsx(r("MWThreadListGlimmer.react"),{numberOfItems:2,parentComponentForDebug:"MWThreadListLoadingAnimation",vcIgnore:e}),_.jsx(r("CometHeroHoldTrigger.react"),{description:"ThreadListLoadingMoreItems."+t,hold:!e})]})},setIsEmptyInbox:T})})})});return _.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",id:W,ref:K,children:[s!=null?_.jsx(o("FocusRegion.react").FocusRegion,{children:s}):null,_.jsx($,{autoFocusQuery:o("focusScopeQueries").tabbableScopeQuery,enabled:te,children:_.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:te?o("focusScopeQueries").tabbableScopeQuery:void 0,recoverFocusQuery:o("focusScopeQueries").tabbableScopeQuery,recoverFocusStrategy:o("FocusRegionType").RecoverFocusStrategy.Nearest,children:ne})})]})}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=o("react-compiler-runtime").c(3),n=e.autoFocusQuery,a=e.children,i=e.enabled;if(!i)return a;var l;return t[0]!==n||t[1]!==a?(l=_.jsx(r("CometRouterFocusRegion.react"),{autoFocusQuery:n,children:a}),t[0]=n,t[1]=a,t[2]=l):l=t[2],l}l.default=x}),98);
__d("MWJewelNestedFolderThreadList.react",["CometScrollView.react","CometTopNavListDropdownCard.react","MWJewelNestedFolderThreadListHeader.react","MWThreadList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.folder,a=e.onClose,i=e.onReturn,l=e.title,u;t[0]!==i||t[1]!==l?(u=s.jsx(r("MWJewelNestedFolderThreadListHeader.react"),{onReturn:i,title:l}),t[0]=i,t[1]=l,t[2]=u):u=t[2];var c;t[3]!==l?(c=typeof l=="string"?l:l.toString(),t[3]=l,t[4]=c):c=t[4];var d;t[5]!==n||t[6]!==a||t[7]!==c?(d=s.jsx(r("MWThreadList.react"),{gridLabel:c,lsEntryPoint:"jewelNestedFolder",onClose:a,parentThreadKey:n,responsive:!1}),t[5]=n,t[6]=a,t[7]=c,t[8]=d):d=t[8];var m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("div",{className:"x1qx5ct2"}),t[9]=m):m=t[9];var p;return t[10]!==u||t[11]!==d?(p=s.jsx(r("CometTopNavListDropdownCard.react"),{useMaxHeight:!0,children:s.jsxs(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[u,d,m]})}),t[10]=u,t[11]=d,t[12]=p):p=t[12],p}l.default=u}),98);
__d("MWSearchLoggingTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Jewel:"jewel",Inbox:"inbox"});i.SearchSurface=e}),66);
__d("UniversalSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("843"),s=o("FalcoLoggerInternal").create("universal_search_query_changed",e),u=s;l.default=u}),98);
__d("UniversalSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("840"),s=o("FalcoLoggerInternal").create("universal_search_start",e),u=s;l.default=u}),98);
__d("MWJewelLightspeedSearchTypeaheadViewList.react",["CometScrollView.react","MWChatSearchLightspeedTypeaheadViewList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["xstyle"],s,u=s||(s=o("react")),c={scroll:{maxHeight:"x1wxkln1",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(10),a,i;n[0]!==t?(i=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i?(l=[c.scroll,i],n[3]=i,n[4]=l):l=n[4];var s;n[5]!==a?(s=u.jsx(r("MWChatSearchLightspeedTypeaheadViewList.react"),babelHelpers.extends({showActionItems:!1},a)),n[5]=a,n[6]=s):s=n[6];var d;return n[7]!==l||n[8]!==s?(d=u.jsx(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,xstyle:l,children:s}),n[7]=l,n[8]=s,n[9]=d):d=n[9],d}l.default=d}),98);
__d("MWJewelSearchEmptyState.react",["fbt","MWXText.react","react","react-compiler-runtime","useCometTypeaheadEmptyState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(3),n=e.queryString,a=r("useCometTypeaheadEmptyState")(),i;return t[0]!==a||t[1]!==n?(i=a?u.jsxs("div",{className:"xz9dl7a xpdmqnj xsag5q8 x1g0dm76",children:[u.jsx(r("MWXText.react"),{align:"center",type:"body2",children:s._(/*BTDS*/"Nothing found")}),u.jsx("br",{}),u.jsx(r("MWXText.react"),{align:"center",color:"tertiary",type:"body3",children:s._(/*BTDS*/"We couldn't find any matches for \"{query}.\" Try checking for typos or using complete words.",[s._param("query",n)])})]}):null,t[0]=a,t[1]=n,t[2]=i):i=t[2],i}l.default=c}),226);
__d("createMWJewelSearchTypeaheadViewStrategy.react",["CometTypeaheadProgressGlimmer.react","MWJewelLightspeedSearchTypeaheadViewList.react","MWJewelSearchEmptyState.react","MWJewelSearchTypeaheadViewItem.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE"],s,u=s||(s=o("react"));function c(t,n){return function(a){var o=a.ariaProps,i=a.entries,l=a.extraViewProps,s=a.highlightedEntry,c=a.isLoading,d=a.onAbandonTypeahead_DO_NOT_USE,m=babelHelpers.objectWithoutPropertiesLoose(a,e),p=i.length===0&&m.queryString.length>0,_=i.length>0&&c,f=i.length===0&&c&&m.queryString.length===0&&r("gkx")("15587");return f?u.jsx(r("CometTypeaheadProgressGlimmer.react"),{}):p?u.jsx(r("MWJewelSearchEmptyState.react"),{queryString:m.queryString}):u.jsxs(u.Fragment,{children:[u.jsx(r("MWJewelLightspeedSearchTypeaheadViewList.react"),{ariaProps:o,entries:i,highlightedEntry:s,xstyle:t,children:function(t){var e=t.entry,o=t.isActive,a=t.itemRole;return u.createElement(r("MWJewelSearchTypeaheadViewItem.react"),babelHelpers.extends({},m,{entry:e,extraViewItemProps:{loggingSessionId:n},isActive:o,key:e.key,role:a}))}}),_&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})}}l.default=c}),98);
__d("MWJewelSearchSubscriptionTypeahead.react",["fbt","BaseSubscriptionTypeahead.react","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWFacebookUserWithoutMessengerAccess","MWInboxRouteBuilder","MWLSSearchIssueSearchQuerySupportedTypes","MWLSThreadDisplayContext","MWPConversationSearchLogger","MWSearchLogging","MWSearchLoggingTypes","MWSearchQPLLogger","UniversalSearchEndFalcoEvent","UniversalSearchQueryChangedFalcoEvent","UniversalSearchStartFalcoEvent","cr:2012305","cr:8414","createMWJewelSearchTypeaheadViewStrategy.react","gkx","isArmadillo","react","useCometRouterDispatcher","useReStore","uuidv4","xplatToDOMRef"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onChange","onFocus","onPressEntry","onSelectFreeformQuery"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=m.useMemo,g=m.useRef,h=m.useState,y={searchInput:{marginTop:"x1xmf6yo",marginInlineEnd:"x14z9mp",marginBottom:"x1e56ztr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},searchView:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"xphu8jj",$$css:!0}},C=function(t){return r("createMWJewelSearchTypeaheadViewStrategy.react")(null,t)},b=r("gkx")("23390");function v(t){var a=t.onChange,i=t.onFocus,l=t.onPressEntry,c=t.onSelectFreeformQuery,m=babelHelpers.objectWithoutPropertiesLoose(t,e),v=h(null),S=v[0],R=v[1],L=g(null),E=(u||(u=r("useReStore")))(),k=g(!1),I=n("cr:8414")();_(function(){var e=L.current;return n("cr:2012305")!==null&&e!=null&&n("cr:2012305").trackTypingPerf(e,"MWJewelSearchTypeahead"),function(){n("cr:2012305")!==null&&e!=null&&n("cr:2012305").unregisterTypingPerf(e)}},[L]);var T=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),D=f(function(){return new(r("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:E,excludedIDs:[],includeGroupSearch:T!=="ChatTab",includeMessageSearchEntry:r("gkx")("5801"),includeRecommendations:!0,lightspeedSupportedTypes:o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,source:r("MWChatSearchSurfaces").universal})},[E,T]),x=p(function(){R(null),S!=null&&(k.current||(r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:8,is_epd:b,session_id:S,transport_type:null}}),k.current=!0)),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon"),a("")},[a,S]),$=r("useCometRouterDispatcher")(),P=p(function(e){var t=e.rawData.resultType;if(t===r("MWChatSearchResultType").MESSAGE&&e.rawData.query!=null&&r("gkx")("5801")){var n=o("MWInboxRouteBuilder").buildMultiThreadMesageSearchURL({search:e.rawData.query});$!=null&&n!=null&&(r("MWPConversationSearchLogger").logUniversalMessageSearch(),$.go(n,{}))}else I==null||I(e);var a=function(){l!=null&&l(e)};if(S==null){a();return}o("MWSearchLogging").logResultSelected(S,m.queryString,e,k),a()},[l,S,m.queryString,$,I]);_(function(){return function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon")}},[]);var N=p(function(){var e=r("uuidv4")();R(e),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:"",sessionInstanceId:e,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel}),k.current=!1,r("UniversalSearchStartFalcoEvent").log(function(){return{is_epd:b,search_surface:0,session_id:e}}),r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:"0",query_string:null,session_id:e}})},[E]),M=p(function(e){S!=null&&(r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:e.length.toString(),query_string:e,session_id:S}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:e,sessionInstanceId:S,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel})),a(e)},[a,S]),w=function(){i()},A=o("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),F=s._(/*BTDS*/"Search Messenger"),O=s._(/*BTDS*/"Search messages"),B=A?O:F;return d.jsx(r("BaseSubscriptionTypeahead.react"),{dataSource:D,dataSourceFetchConfigParams:r("isArmadillo")()?{requestFlow:"network-upon-approve"}:void 0,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputRef:o("xplatToDOMRef").xplatToInputRef(L),inputStartContent:S!=null?d.jsx(r("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:r("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:r("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onChange:M,onClose:x,onFocus:w,onOpen:N,onPressEntry:P,onSelectFreeformQuery:c,placeholder:B,queryString:m.queryString,shouldCloseOnEnter:!1,shouldHandleCloseAfterHandlePressEntry:!0,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:C(S),xstyles:{inputXStyle:y.searchInput,viewXStyle_DO_NOT_USE:y.searchView}})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),226);
__d("MWJewelThreadListSearchTypeahead.react",["CometRelay","FBLogger","I64","MWChatSearchFilteringUtils","MWChatSearchResultType","MWJewelSearchSubscriptionTypeahead.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWPSearchSystem","MWThreadCreationUtil","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","setTimeoutCometSpeculative","useCometPreloader","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useState;function f(t){var n=o("react-compiler-runtime").c(25),a=t.onClose,i=_(""),l=i[0],u=i[1],d=r("useMWChatOpenTabForGroup")("jewelSearch"),m=d[0],f=r("useMWChatOpenTabForPage")("jewelSearch"),h=r("useMWChatOpenTabForUser")("jewelSearch"),y=h.openTabByThreadKey,C=h.openTabForUserWithoutPreloadedNavigationData,b=(e||(e=r("useReStore")))(),v=o("CometRelay").useRelayEnvironment(),S;n[0]!==b?(S=function(){return o("MWPSearchSystem").makeAll(b)},n[0]=b,n[1]=S):S=n[1];var R=S,L;n[2]!==R?(L=function(){r("setTimeoutCometSpeculative")(R,1e4)},n[2]=R,n[3]=L):L=n[3],p(L,void 0);var E;n[4]!==b||n[5]!==v||n[6]!==y||n[7]!==C?(E=function(t,n){var e=o("MWChatSearchFilteringUtils").getIsE2ee(n.rawData);if(e)return y(t,!0);o("MWThreadCreationUtil").getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2(n,v,b).then(async function(e){var r=e.isSecureThread,a=e.reason;if(a==="default_e2ee")C({unpreloadedReason:"jewelsearch_not_support_gql",userId:t});else{var i,l,u,c,d=await b.tables.threads.get((s||(s=o("I64"))).of_string(t));C({isSecureThread:r,reason:"MWJewelThreadListSearchTypeahead, FBID: "+t+", reason: "+(a!=null?a:"")+", searchSource: "+((i=n.rawData.searchSource)!=null?i:"")+", otherUserId: "+((l=n.rawData.otherUserId)!=null?l:"")+", hasCutoverThread: "+((u=(c=n.rawData.hasCutoverThread)==null?void 0:c.toString())!=null?u:"false")+", threadAuthorityLevel: "+(d!=null?(s||(s=o("I64"))).to_string(d.authorityLevel):"null"),unpreloadedReason:"jewelsearch_not_support_gql",userId:t})}}).catch(g)},n[4]=b,n[5]=v,n[6]=y,n[7]=C,n[8]=E):E=n[8];var k=E,I;n[9]!==a||n[10]!==m||n[11]!==f||n[12]!==k?(I=function(t){var e=t.rawData,n=e.id,o=e.resultType;e:switch(o){case r("MWChatSearchResultType").MESSAGE:break e;case r("MWChatSearchResultType").GROUP:{m(n);break e}case r("MWChatSearchResultType").USER:case r("MWChatSearchResultType").AI_BOT:{k(n,t);break e}case r("MWChatSearchResultType").PAGE:f(n)}a()},n[9]=a,n[10]=m,n[11]=f,n[12]=k,n[13]=I):I=n[13];var T=I,D=r("useCometPreloader")("button_aggressive",r("emptyFunction"),R),x=D.onHoverInPreloader,$=D.onHoverMovePreloader,P=D.onHoverOutPreloader,N;n[14]!==R?(N=function(){o("MWLogInteraction").logPopoverOpenCancel("initiate_search"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_search"),R(),r("QPLUserFlow").start(r("qpl")._(25312244,"1683"))},n[14]=R,n[15]=N):N=n[15];var M;n[16]!==T||n[17]!==l||n[18]!==N?(M=c.jsx(r("MWJewelSearchSubscriptionTypeahead.react"),{onChange:u,onFocus:N,onPressEntry:T,queryString:l}),n[16]=T,n[17]=l,n[18]=N,n[19]=M):M=n[19];var w;return n[20]!==x||n[21]!==$||n[22]!==P||n[23]!==M?(w=c.jsx("div",{onMouseEnter:x,onMouseLeave:P,onMouseMove:$,children:M}),n[20]=x,n[21]=$,n[22]=P,n[23]=M,n[24]=w):w=n[24],w}function g(e){r("FBLogger")("messenger_search").mustfix("Error fetching contact capabilities: %s",e)}var h=c.memo(f);l.default=h}),98);
__d("CometMessagingJewelDropdownContent.react",["fbt","CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometMessagingJewelDropdownContentGlimmer.react","CometMessagingJewelDropdownEBUpsellContainer.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","CometTopNavListDropdownCard.react","FBLogger","I64","InteractionTracing","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSPlatformErrorsCatcher.react","LSThreadRangeFilter","MAWUnrecoverableErrorBoundary.react","MWCMJewelContext","MWInboxContextSwitcherDeferred.react","MWInboxContextSwitcherGlimmer.react","MWInboxContextSwitcherUtils","MWJewelDropdownHeader.react","MWJewelMessengerLink.react","MWJewelNestedFolderThreadList.react","MWJewelPopoverDialogContext.react","MWJewelThreadListSearchTypeahead.react","MWThreadList.react","ODS","ReQL","ReQLSuspense","WebUXLoggingEntryPointContextProvider","XCometMessengerControllerRouteBuilder","gkx","lazyLoadComponent","qpl","react","react-compiler-runtime","useCometInteractionTracing","useMWChatSearchClearSearchResults","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p=m||(m=o("react")),_=m,f=_.memo,g=_.useCallback,h=_.useContext,y=_.useEffect,C=_.useState,b=r("lazyLoadComponent")(r("JSResourceForInteraction")("MAWJewelMessageRequestsAndSpamDropdownWithTab.react").__setRef("CometMessagingJewelDropdownContent.react")),v=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWRestrictedAccountsList.react").__setRef("CometMessagingJewelDropdownContent.react")),S=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWJewelArchivedChatsDropdown.react").__setRef("CometMessagingJewelDropdownContent.react")),R=r("lazyLoadComponent")(r("JSResourceForInteraction")("CometMessagingJewelDropdownErrorState.react").__setRef("CometMessagingJewelDropdownContent.react")),L=s._(/*BTDS*/"Chats");function E(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}var k=r("gkx")("22839")===!0;function I(t){var n=o("react-compiler-runtime").c(94),a=t.ebSoftblockUpsell,l=t.ebUpsellContainerQueryRef,m=t.onClose,_=t.pushPage,f=h(r("MWJewelPopoverDialogContext.react")),g=f.setIsOpenForDialog,R=r("useMWChatSearchClearSearchResults")(),I;n[0]!==R||n[1]!==m?(I=function(){R(),m()},n[0]=R,n[1]=m,n[2]=I):I=n[2];var D=I,x,$;n[3]!==R?(x=function(){return R},$=[R],n[3]=R,n[4]=x,n[5]=$):(x=n[4],$=n[5]),y(x,$);var P;n[6]===Symbol.for("react.memo_cache_sentinel")?(P=r("XCometMessengerControllerRouteBuilder").buildURL({}),n[6]=P):P=n[6];var N=P,M=h(r("MWCMJewelContext")),w=M.MWCMBlendedThreadListEntrypointRef,A=M.selectedFilterTab,F=M.setSelectedFilterTab,O=C(),B=O[0],W=O[1],q;n[7]===Symbol.for("react.memo_cache_sentinel")?(q=r("qpl")._(30610001,"3003"),n[7]=q):q=n[7];var U=r("useCometInteractionTracing")(q,"fast","INTERACTION"),V=(e||(e=r("useReStore")))(),H;n[8]!==V.tables._user_info?(H=function(){return o("ReQL").fromTableAscending(V.tables._user_info).map(T)},n[8]=V.tables._user_info,n[9]=H):H=n[9];var G;n[10]!==V?(G=[V],n[10]=V,n[11]=G):G=n[11];var z=o("ReQLSuspense").useFirst(H,G,i.id+":148"),j;n[12]!==V.tables.contacts||n[13]!==z?(j=function(){return z!=null?o("ReQL").fromTableAscending(V.tables.contacts,["capabilities","capabilities2"]).getKeyRange(z):o("ReQL").empty()},n[12]=V.tables.contacts,n[13]=z,n[14]=j):j=n[14];var K;n[15]!==V||n[16]!==z?(K=[V,z],n[15]=V,n[16]=z,n[17]=K):K=n[17];var Q=o("ReQLSuspense").useFirst(j,K,i.id+":152"),X;n[18]!==D||n[19]!==_?(X=function(){var e=r("InteractionTracing").startInteraction({interactionClass:"fast",qplEvent:r("qpl")._(30607516,"756"),tracePolicy:"comet.jewel.message_requests",traceType:"INTERACTION"});_(function(t){var n=t.onReturn;return p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!1,title:L,withBackButton:!0}),name:"MAWJewelMessageRequestsAndSpamDropdownWithTab",children:p.jsx(b,{interactionID:e,onClose:D,onReturn:n})})})},n[18]=D,n[19]=_,n[20]=X):X=n[20];var Y=X,J;n[21]!==Y||n[22]!==A?(J=o("MWInboxContextSwitcherUtils").shouldShowMessageRequestsFromFilter(A)?Y:void 0,n[21]=Y,n[22]=A,n[23]=J):J=n[23];var Z=J,ee;n[24]!==D||n[25]!==_?(ee=function(){_(function(e){var t=e.onReturn;return p.jsx(v,{hidePage:t,onClose:D})})},n[24]=D,n[25]=_,n[26]=ee):ee=n[26];var te=ee,ne;n[27]!==D||n[28]!==_?(ne=function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"mw_jewel","archived_chats"),_(function(e){var t=e.onReturn;return p.jsx(S,{onClose:D,onReturn:t})})},n[27]=D,n[28]=_,n[29]=ne):ne=n[29];var re=ne,oe;n[30]!==D||n[31]!==_||n[32]!==Q?(oe=function(t){_(function(e){var n=e.onReturn;switch((c||(c=o("I64"))).to_int32(t)){case-13:return p.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:s._(/*BTDS*/"Jobs")});case-12:{var a=Q!=null&&o("LSContactBitOffset").has(86,Q),i=s._(/*BTDS*/"Marketplace");return a&&(i=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"6a9a0529abd169ff91b49b4022dbf5a5\",1]")),p.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:i})}default:return r("FBLogger")("messenger_web_entrypoints").mustfix("Attempted to show an unimplemented nested system folder"),null}})},n[30]=D,n[31]=_,n[32]=Q,n[33]=oe):oe=n[33];var ae=oe,ie;n[34]!==a||n[35]!==l||n[36]!==A?(ie=p.jsx(r("CometMessagingJewelDropdownEBUpsellContainer.react"),{ebSoftblockUpsell:a,ebUpsellContainerQueryRef:l,selectedFilterTab:A}),n[34]=a,n[35]=l,n[36]=A,n[37]=ie):ie=n[37];var le=ie,se;n[38]!==A?(se=o("MWInboxContextSwitcherUtils").getCustomThreadFilter(A),n[38]=A,n[39]=se):se=n[39];var ue=se,ce;n[40]!==A?(ce=o("MWInboxContextSwitcherUtils").getParentThreadKeyFromFilter(A),n[40]=A,n[41]=ce):ce=n[41];var de=ce,me=!(a!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(A)),pe;n[42]!==D||n[43]!==re||n[44]!==Y||n[45]!==te?(pe=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelDropdownHeader",children:p.jsx(r("MWJewelDropdownHeader.react"),{inboxUrl:N,onClose:D,onOpenArchivedChats:re,onOpenMessageRequests:Y,onOpenRestrictedAccountsList:te,title:L})}),n[42]=D,n[43]=re,n[44]=Y,n[45]=te,n[46]=pe):pe=n[46];var _e;n[47]===Symbol.for("react.memo_cache_sentinel")?(_e={className:"x1c4vz4f"},n[47]=_e):_e=n[47];var fe;n[48]!==D||n[49]!==_?(fe=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelThreadListSearchTypeahead",children:p.jsx(r("MWJewelThreadListSearchTypeahead.react"),{onClose:D,pushPage:_})}),n[48]=D,n[49]=_,n[50]=fe):fe=n[50];var ge;n[51]===Symbol.for("react.memo_cache_sentinel")?(ge=p.jsx(r("MWInboxContextSwitcherGlimmer.react"),{}),n[51]=ge):ge=n[51];var he;n[52]!==U||n[53]!==g||n[54]!==F?(he=function(t){U(function(e){W(e.getTraceId())},void 0,void 0,"comet.jewel.messenger."+o("MWInboxContextSwitcherUtils").getTracePolicyFromFilter(t)),g(!1),F==null||F(t)},n[52]=U,n[53]=g,n[54]=F,n[55]=he):he=n[55];var ye;n[56]!==ae||n[57]!==Y||n[58]!==de||n[59]!==A||n[60]!==he?(ye=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:ge,name:"MWInboxContextSwitcher",children:p.jsx(r("MWInboxContextSwitcherDeferred.react"),{entryPoint:"jewel",onTabChange:he,parentThreadKey:de,selectedFilterTab:A,showMessageRequests:Y,showNestedFolderThreads:ae})}),n[56]=ae,n[57]=Y,n[58]=de,n[59]=A,n[60]=he,n[61]=ye):ye=n[61];var Ce;n[62]!==fe||n[63]!==ye?(Ce=p.jsxs("div",babelHelpers.extends({},_e,{children:[fe,ye]})),n[62]=fe,n[63]=ye,n[64]=Ce):Ce=n[64];var be=me&&le,ve;n[65]!==pe||n[66]!==Ce||n[67]!==be?(ve=p.jsxs(p.Fragment,{children:[pe,Ce,be]}),n[65]=pe,n[66]=Ce,n[67]=be,n[68]=ve):ve=n[68];var Se=ve,Re;n[69]!==A?(Re=o("MWInboxContextSwitcherUtils").getJewelEntryPointFromFilter(A),n[69]=A,n[70]=Re):Re=n[70];var Le=Re,Ee;n[71]!==A?(Ee=o("MWInboxContextSwitcherUtils").getJewelLsSubEntryPointFromFilter(A),n[71]=A,n[72]=Ee):Ee=n[72];var ke=Ee,Ie;n[73]!==w||n[74]!==ue||n[75]!==a||n[76]!==ke||n[77]!==ae||n[78]!==D||n[79]!==Z||n[80]!==de||n[81]!==A?(Ie=a!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(A)?p.jsx(p.Fragment,{children:a}):p.jsxs(p.Fragment,{children:[k&&(c||(c=o("I64"))).equal(A,(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES))?p.jsx(r("CometPlaceholder.react"),{fallback:p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0}),name:"CometMessagingJewelDropdownContent.MWCMBlendedThreadList",children:w!=null?p.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:w,props:{filter:A,gridLabel:L.toString(),header:null,lsEntryPoint:"jewel",lsSubEntryPoint:ke,onDropdownClose:D,onError:E,parentThreadKey:de}}):null}):p.jsx(r("MWThreadList.react"),{customThreadFilter:ue,filter:A,gridLabel:L.toString(),lsEntryPoint:"jewel",lsSubEntryPoint:ke,onClickNestedFolderThread:ae,onClose:D,onOpenMessageRequests:Z,parentThreadKey:de,responsive:!1},(c||(c=o("I64"))).to_string(A)),p.jsx(r("MWJewelMessengerLink.react"),{onClick:D,url:N})]}),n[73]=w,n[74]=ue,n[75]=a,n[76]=ke,n[77]=ae,n[78]=D,n[79]=Z,n[80]=de,n[81]=A,n[82]=Ie):Ie=n[82];var Te;n[83]!==Se||n[84]!==Ie?(Te=p.jsxs(r("CometTopNavListDropdownCard.react"),{testid:void 0,useFullHeight:!0,useMaxHeight:!0,children:[Se,Ie]}),n[83]=Se,n[84]=Ie,n[85]=Te):Te=n[85];var De=Te,xe;n[86]===Symbol.for("react.memo_cache_sentinel")?(xe=p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0,title:L}),n[86]=xe):xe=n[86];var $e;n[87]!==B||n[88]!==A||n[89]!==De?($e=B!=null?p.jsx(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"JewelThreadList."+o("MWInboxContextSwitcherUtils").getInteractionDescFromFilter(A),interactionUUID:B,children:De}):De,n[87]=B,n[88]=A,n[89]=De,n[90]=$e):$e=n[90];var Pe;return n[91]!==$e||n[92]!==Le?(Pe=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:xe,name:"MWJewelDropdownContent",children:p.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:Le,children:$e})}),n[91]=$e,n[92]=Le,n[93]=Pe):Pe=n[93],Pe}function T(e){return e.facebookUserId}function D(e){var t=o("react-compiler-runtime").c(2),n=x,a;return t[0]!==e?(a=p.jsx(r("MAWUnrecoverableErrorBoundary.react"),{fallback:n,children:p.jsx(r("CometErrorBoundary.react"),{fallback:n,children:p.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:n,children:p.jsx(I,babelHelpers.extends({},e))})})}),t[0]=e,t[1]=a):a=t[1],a}function x(e){return p.jsx(R,{error:e})}x.displayName=x.name+" [from "+i.id+"]";var $=f(D);l.default=$}),226);
__d("CometMessagingJewelDropdown.react",["fbt","BaseMultiStepContainer.react","BasePopoverReflowSheetContext","CometMessagingJewelDropdownContent.react","CometTopNavListDropdown.react","MWLogInboxFiltersInteraction","MWLogInteraction","justknobx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(9),n=e.props,a=e.queries,i=n.onClose,l=a.ebUpsellContainerQueryRef,c=o("MWLogInteraction").getPopoverTrace();c==null||c.addAnnotation("PopoverEntrypoint","CometMessagingJewelDropdown");var d=m(r("BasePopoverReflowSheetContext")),p=d.isReflowSheet,f=_,g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Messenger"),t[0]=g):g=t[0];var h;t[1]!==p?(h={0:{className:"x1cvmir6"},1:{className:"x14atkfc"}}[!!p<<0],t[1]=p,t[2]=h):h=t[2];var y;t[3]!==l||t[4]!==i?(y=u.jsx(r("BaseMultiStepContainer.react"),{fitContentWidth:!0,onPageChange:f,children:function(t){return u.jsx(r("CometMessagingJewelDropdownContent.react"),{ebUpsellContainerQueryRef:l,onClose:i,pushPage:t})}}),t[3]=l,t[4]=i,t[5]=y):y=t[5];var C;return t[6]!==h||t[7]!==y?(C=u.jsx(r("CometTopNavListDropdown.react"),{label:g,name:"MWJewelDropdown",children:u.jsx("div",babelHelpers.extends({},h,{children:y}))}),t[6]=h,t[7]=y,t[8]=C):C=t[8],C}function _(e){e>0&&r("justknobx")._("3802")&&(o("MWLogInteraction").logPopoverOpenCancel("popover_page_change"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("popover_page_change"))}l.default=p}),226);
__d("FDSResizeFreeFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("580260"),20),u=e;l.default=u}),98);
__d("MWEncryptedBackupsQPWithPinPlaceholder.react",["MWXColumn.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("gkx")("23433"),c={logoGlimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",width:"xvy4d1p",$$css:!0},pinInputGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"xc9qbxq",$$css:!0},root:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xjf5wm9",boxSizing:"x9f619",minWidth:"xeuugli",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},textGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"x1qx5ct2",$$css:!0}};function d(){var e=o("react-compiler-runtime").c(6),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x1l90r2v xyamay9"},1:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x2lwn1j xsag5q8 xz9dl7a"}}[!!u<<0],e[0]=t):t=e[0];var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.logoGlimmer})}),e[1]=n):n=e[1];var a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsxs(r("MWXRow.react"),{spacingVertical:0,verticalAlign:"center",children:[n,s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})]}),e[2]=a):a=e[2];var i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x16ngw23 xwib8y2",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})}),e[3]=i):i=e[3];var l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("MWXRow.react"),{direction:"forward",wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:c.pinInputGlimmer})})}),e[4]=l):l=e[4];var d;return e[5]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("div",babelHelpers.extends({},t,{children:s.jsxs(r("MWXColumn.react"),{spacing:8,style:c.root,children:[a,i,l,s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x18xe386 xpdvgm7 x1y1aw1k",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})})]})})),e[5]=d):d=e[5],d}l.default=d}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query"}]}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useMWEBIsUpsellDeferred",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var n=o("react-compiler-runtime").c(18),a=t.upsellType,l=(e||(e=r("useReStore")))(),s,u;n[0]!==a?(u=o("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(a),n[0]=a,n[1]=u):u=n[1],s=u;var c=s,d=c.countdownInMS,m=c.impressionsCountKey,p=c.lastImpressionTimeKey,_=c.maxImpressionLimit,f;n[2]!==d||n[3]!==l.tables.experiences_shared_state||n[4]!==p?(f=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(p).map(function(e){var t=e.stateValue;return t!=null&&+t+d>Date.now()})},n[2]=d,n[3]=l.tables.experiences_shared_state,n[4]=p,n[5]=f):f=n[5];var g;n[6]!==d||n[7]!==l||n[8]!==p?(g=[d,l,p],n[6]=d,n[7]=l,n[8]=p,n[9]=g):g=n[9];var h=o("ReQLSuspense").useFirst(f,g,i.id+":41"),y;n[10]!==l.tables.experiences_shared_state||n[11]!==m||n[12]!==_?(y=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(m).map(function(e){var t=e.stateValue;return!(_===o("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+t<_)})},n[10]=l.tables.experiences_shared_state,n[11]=m,n[12]=_,n[13]=y):y=n[13];var C;n[14]!==l||n[15]!==m||n[16]!==_?(C=[l,m,_],n[14]=l,n[15]=m,n[16]=_,n[17]=C):C=n[17];var b=o("ReQLSuspense").useFirst(y,C,i.id+":56");return h===!0||b===!0}l.default=c}),98);
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","react","react-compiler-runtime","useMWEBIsUpsellDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(e){var t=o("react-compiler-runtime").c(5),n=e.upsellType,a=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),i=s(!1),l=i[0],u=i[1],c;t[0]!==n?(c={upsellType:n},t[0]=n,t[1]=c):c=t[1];var d=r("useMWEBIsUpsellDeferred")(c),m=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),p=m.virtualDeviceInfo,_=p.doesUserHaveOtcEligibleDevices;if(a&&n===o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL&&!_){var f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(f=[!0,u],t[2]=f):f=t[2],f}var g=d===!0||l,h;return t[3]!==g?(h=[g,u],t[3]=g,t[4]=h):h=t[4],h}l.default=u}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react",["CometPlaceholder.react","CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBVestaUserInfoContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsQPWithPinPlaceholder.react","MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferred")("MWEncryptedBackupsThreadListRestoreQPWrapper.react").__setRef("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react")),d=r("gkx")("3952");function m(t){var a=o("react-compiler-runtime").c(15),i=t.children,l=t.fragmentKey,s=t.trigger,m=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql"),l),p=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),_=r("useMWEBGetUpsellState")(),f=_.isRestoreUpsellsDismissed,g;a[0]===Symbol.for("react.memo_cache_sentinel")?(g={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL},a[0]=g):g=a[0];var h=r("useMWEncryptedBackupsIsUpsellDismissed")(g),y=h[0],C=h[1],b;a[1]===Symbol.for("react.memo_cache_sentinel")?(b={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL},a[1]=b):b=a[1];var v=r("useMWEncryptedBackupsIsUpsellDismissed")(b),S=v[0],R=v[1],L;a[2]===Symbol.for("react.memo_cache_sentinel")?(L={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL},a[2]=L):L=a[2];var E=r("useMWEncryptedBackupsIsUpsellDismissed")(L),k=E[0],I=E[1],T;a[3]!==p?(T={backupState:4,isCooldownOrLockOutState:p},a[3]=p,a[4]=T):T=a[4];var D=r("useHasRestoreInterstitialSoftblockBeenDismissed")(T),x=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),$=y||S;if(f||$&&!d||$&&d&&k)return i;var P;a[5]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("MWEncryptedBackupsQPWithPinPlaceholder.react"),{}),a[5]=P):P=a[5];var N;a[6]!==i||a[7]!==x||a[8]!==m||a[9]!==$||a[10]!==I||a[11]!==C||a[12]!==R||a[13]!==s?(N=u.jsx(r("CometPlaceholder.react"),{fallback:P,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred",children:u.jsx(c,{children:i,currentSupportedPlatform:x,fragmentKey:m,hasDismissedQps:$,setHasDismissedBanner:I,setHasDismissedQp:C,setHasDismissedQpWithPin:R,trigger:s})}),a[6]=i,a[7]=x,a[8]=m,a[9]=$,a[10]=I,a[11]=C,a[12]=R,a[13]=s,a[14]=N):N=a[14];var M=N;switch(x){case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:return D?M:i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return M}}l.default=m}),98);
__d("MWFDSMarketplace.svg.react",["cr:21707"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21707")}),98);
__d("MWXIconMarketplace",["MWXSvgIcon","SVGIcon","cr:22393","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22393")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadListMarketplaceItem.react",["fbt","CometMarketplaceLogger","LSContactBitOffset","LSIntEnum","MWPBumpEntityKey","MWThreadListFolderItem.react","MWXIconGroup","MWXIconMarketplace","MWXIconStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useLogMarketplaceClick","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var n=o("react-compiler-runtime").c(27),a=t.onClick,l=t.responsive,c=t.selected,p=t.size,g=t.thread,h=r("useLogMarketplaceClick")("marketplace_inbox_folder"),y=(e||(e=r("useReStore")))(),C;n[0]!==y.tables._user_info?(C=function(){return o("ReQL").fromTableAscending(y.tables._user_info).map(f)},n[0]=y.tables._user_info,n[1]=C):C=n[1];var b;n[2]!==y?(b=[y],n[2]=y,n[3]=b):b=n[3];var v=o("ReQLSuspense").useFirst(C,b,i.id+":51"),S;n[4]!==y.tables.contacts||n[5]!==v?(S=function(){return v!=null?o("ReQL").fromTableAscending(y.tables.contacts,[].concat(o("LSContactBitOffset").contactCapabilityFields)).getKeyRange(v):o("ReQL").empty()},n[4]=y.tables.contacts,n[5]=v,n[6]=S):S=n[6];var R;n[7]!==y||n[8]!==v?(R=[y,v],n[7]=y,n[8]=v,n[9]=R):R=n[9];var L=o("ReQLSuspense").useFirst(S,R,i.id+":56"),E=L!=null&&o("LSContactBitOffset").has(86,L),k;n[10]===Symbol.for("react.memo_cache_sentinel")?(k=[],n[10]=k):k=n[10],m(_,k);var I;n[11]===Symbol.for("react.memo_cache_sentinel")?(I=s._(/*BTDS*/"Marketplace").toString(),n[11]=I):I=n[11];var T=I,D=r("MWXIconMarketplace");if(E===!0){var x;n[12]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"3a9a1e192465754ec4427995fe1cffb4\",1]").toString(),n[12]=x):x=n[12],T=x,D=r("MWXIconGroup")}var $;n[13]!==D?($=d.jsx(r("MWXIconStrict.react"),{color:"primary",icon:D,size:36}),n[13]=D,n[14]=$):$=n[14];var P;n[15]!==h||n[16]!==a?(P=function(){return h(),a((u||(u=o("LSIntEnum"))).ofNumber(-12)),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","marketplace_threads")},n[15]=h,n[16]=a,n[17]=P):P=n[17];var N;n[18]===Symbol.for("react.memo_cache_sentinel")?(N=(u||(u=o("LSIntEnum"))).ofNumber(-12),n[18]=N):N=n[18];var M;return n[19]!==l||n[20]!==c||n[21]!==p||n[22]!==$||n[23]!==P||n[24]!==g||n[25]!==T?(M=d.jsx(r("MWThreadListFolderItem.react"),{icon:$,onClick:P,responsive:l,selected:c,size:p,systemFolder:N,thread:g,threadName:T}),n[19]=l,n[20]=c,n[21]=p,n[22]=$,n[23]=P,n[24]=g,n[25]=T,n[26]=M):M=n[26],M}function _(){return o("CometMarketplaceLogger").logImpression("marketplace_inbox_folder")}function f(e){return e.facebookUserId}l.default=p}),226);
__d("useHasUnjoinedCMThreads",["LSIntEnum","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t=o("react-compiler-runtime").c(4),n=(s||(s=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").union(o("ReQL").fromTableDescending(n.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange((e||(e=o("LSIntEnum"))).ofNumber(24)),o("ReQL").fromTableDescending(n.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange(e.ofNumber(19)))},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;return t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3],!!o("ReQLSuspense").useFirst(a,l,i.id+":22")}l.default=u}),98);/*FB_PKG_DELIM*/
__d("CometFeedInlineComposerQuery.graphql",["CometFeedInlineComposerQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"scale"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null},a=[r,o];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometFeedInlineComposerQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[t,{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerWOYM_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerPressableProfilePic_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsList_profile"},{kind:"InlineFragment",selections:a,type:"User",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Page",abstractKey:null}],storageKey:null},action:"THROW",path:"viewer.actor"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"FeedCometComposer",kind:"LinkedField",name:"feed_comet_composer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsList_composer"}],storageKey:null},action:"THROW",path:"viewer.feed_comet_composer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometFeedInlineComposerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[t,{kind:"TypeDiscriminator",abstractKey:"__isActor"},r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},o],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:40},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"}],type:"Profile",abstractKey:"__isProfile"},{kind:"InlineFragment",selections:[o],type:"Page",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FeedCometComposer",kind:"LinkedField",name:"feed_comet_composer",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"1ggQ2r"}],concreteType:null,kind:"LinkedField",name:"inline_sprouts",plural:!0,selections:[t,{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"InlineComposerLiveProducerSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerLiveProducerSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMediaSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerUploadMediaSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMagicUploadsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMagicUploadsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerWithTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerLocationTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerLocationTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerFeelingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMinutiaeSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetWhatsAppMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetWhatsAppMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerReelsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerReelsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerBroadcastChannelSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerBroadcastChannelSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMarketplaceJobsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMarketplaceJobsSprout",abstractKey:null}],storageKey:'inline_sprouts(supported:"1ggQ2r")'}],type:"ICometComposer",abstractKey:"__isICometComposer"}],storageKey:null}],storageKey:null}]},params:{id:n("CometFeedInlineComposerQuery_facebookRelayOperation"),metadata:{},name:"CometFeedInlineComposerQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometFeedInlineComposerSproutsList_composer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerSproutsList_composer",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"1ggQ2r"}],concreteType:null,kind:"LinkedField",name:"inline_sprouts",plural:!0,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"InlineComposerLiveProducerSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerLiveProducerSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMediaSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerUploadMediaSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMagicUploadsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMagicUploadsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerWithTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerLocationTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerLocationTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerFeelingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMinutiaeSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetWhatsAppMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetWhatsAppMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerReelsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerReelsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerBroadcastChannelSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerBroadcastChannelSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMarketplaceJobsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMarketplaceJobsSprout",abstractKey:null}],storageKey:'inline_sprouts(supported:"1ggQ2r")'}],type:"ICometComposer",abstractKey:"__isICometComposer"};a.exports=e}),null);
__d("CometFeedInlineComposerSproutsList_profile.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerSproutsList_profile",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"Profile",abstractKey:"__isProfile"};a.exports=e}),null);
__d("CometFeedInlineComposerSproutsList.react",["CometFeedInlineComposerSproutsList_composer.graphql","CometFeedInlineComposerSproutsList_profile.graphql","CometFeedInlineComposerStylesContext","CometInlineComposerSproutListMatcher.react","RelayHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u.useContext;function m(t){var a=o("react-compiler-runtime").c(16),i=t.composer,l=t.onHoverInPrerenderer,u=t.onHoverOutPrerenderer,m=t.onPressInPrerenderer,p=t.profile$key,_=t.showFeedComposerDialog,f=t.triggerRef;o("RelayHooks").useFragment(e!==void 0?e:e=n("CometFeedInlineComposerSproutsList_profile.graphql"),p);var g=d(r("CometFeedInlineComposerStylesContext")),h=g.isOneLineSimplified,y=g.isTwoLineSimplified,C=o("RelayHooks").useFragment(s!==void 0?s:s=n("CometFeedInlineComposerSproutsList_composer.graphql"),i),b;if(a[0]!==(C==null?void 0:C.inline_sprouts)){var v;b=(v=C==null?void 0:C.inline_sprouts)!=null?v:[],a[0]=C==null?void 0:C.inline_sprouts,a[1]=b}else b=a[1];var S=b,R=!h&&!y,L;a[2]!==R||a[3]!==h||a[4]!==y?(L={0:{className:"x78zum5 x1vqgdyp"},8:{className:"x78zum5 x1vqgdyp x13fj5qh"},4:{className:"x78zum5 x1vqgdyp x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3"},12:{className:"x78zum5 x1vqgdyp x13fj5qh x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3"},2:{className:"x78zum5 x1vqgdyp x1iorvi4"},10:{className:"x78zum5 x1vqgdyp x13fj5qh x1iorvi4"},6:{className:"x78zum5 x1vqgdyp x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3 x1iorvi4"},14:{className:"x78zum5 x1vqgdyp x13fj5qh x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3 x1iorvi4"},1:{className:"x78zum5 x1vqgdyp xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},9:{className:"x78zum5 x1vqgdyp x13fj5qh xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},5:{className:"x78zum5 x1vqgdyp x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3 xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},13:{className:"x78zum5 x1vqgdyp x13fj5qh x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3 xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},3:{className:"x78zum5 x1vqgdyp xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},11:{className:"x78zum5 x1vqgdyp x13fj5qh xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},7:{className:"x78zum5 x1vqgdyp x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3 xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"},15:{className:"x78zum5 x1vqgdyp x13fj5qh x1a02dak x1l1ennw x6ikm8r x10wlt62 xh8yej3 xqmpxtq x13fuv20 x178xt8z x14vqqas x1y1aw1k"}}[!!h<<3|!h<<2|!!y<<1|!!R<<0],a[2]=R,a[3]=h,a[4]=y,a[5]=L):L=a[5];var E;a[6]!==l||a[7]!==u||a[8]!==m||a[9]!==_||a[10]!==S||a[11]!==f?(E=c.jsx(o("CometInlineComposerSproutListMatcher.react").CometInlineComposerSproutListMatcher,{onHoverIn:l,onHoverOut:u,onPressIn:m,showComposerDialog:_,sprouts:S,triggerRef:f}),a[6]=l,a[7]=u,a[8]=m,a[9]=_,a[10]=S,a[11]=f,a[12]=E):E=a[12];var k;return a[13]!==L||a[14]!==E?(k=c.jsx("div",babelHelpers.extends({},L,{children:E})),a[13]=L,a[14]=E,a[15]=k):k=a[15],k}l.default=m}),98);
__d("CometFeedInlineComposer.react",["fbt","CometComposerAttachmentPluginTypes","CometComposerDraftingUtils","CometComposerFooterAttachmentPluginTypes","CometFeedInlineComposerPressableProfilePic.react","CometFeedInlineComposerQuery.graphql","CometFeedInlineComposerSproutsList.react","CometFeedInlineComposerStylesContext","CometFeedInlineComposerWOYM.react","CometRelay","CometScreenReaderHeading.react","CometUnifiedVideoAndReelsGating","FBLogger","FDSCard.react","cometComposerLexicalCreateEditor","cometGetKeyCommandConfig","cr:1993522","getComposerUnsavedChangesAlert","getComposerViewStateWithAdditionalMedia","gkx","react","useComposerTerminalEventLog","useFeedComposerCometDialog","useLayerKeyCommands","useNullthrowsViolation","useOnBeforeUnload","usePostInProgress","useResumableComposerViewState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useMemo,f=d.useRef,g={current:null};function h(t){var a=t.feedInlineComposerQueryReference,i=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometFeedInlineComposerQuery.graphql"),a),l=i.viewer,u=r("useNullthrowsViolation")(l.actor.id,"Unable to render CometFeedInlineComposer with null viewerID and type "+l.actor.__typename),d=l.actor.has_professional_features_for_watch===!0,h=d&&r("gkx")("23264"),y=f(!1),C=f(!1),b=f([]),v=r("useResumableComposerViewState")(),S=v.clearResumableViewState,R=v.getResumableViewState,L=v.saveResumableViewState,E=r("usePostInProgress")(),k=E.postPlainText,I=E.updatePostPlainText,T=f(!1),D=f(null);p(function(){var e=!0;return D.current==null&&o("CometComposerDraftingUtils").canFriendsAndFamilyUsersDraftPostsSilentExposure()&&o("CometComposerDraftingUtils").shouldShowDraftsInline()&&o("CometComposerDraftingUtils").getDraftFromIndexedDB(u,"post_draft").then(function(t){if(e&&t!=null){var n=t==null?void 0:t.draftedPostText;n!=null&&n!==""&&I(t),D.current=t}}).catch(function(e){return o("CometComposerDraftingUtils").logDraftRetrievalError(e)}),function(){e=!1}},[]),r("useOnBeforeUnload")(function(){if(b.current!=null&&b.current.forEach(function(e){return e()}),T.current===!0&&!o("CometComposerDraftingUtils").canFriendsAndFamilyUsersDraftPostsSilentExposure())return r("getComposerUnsavedChangesAlert")(R())}),r("useComposerTerminalEventLog")(function(){return T.current},function(){return R().creationSessionID});var x=m(function(e){if(y.current===!0||C.current===!0||!o("CometComposerDraftingUtils").shouldShowDraftsInline())T.current=!1,S(),I(R());else{var t;T.current=(t=e==null?void 0:e.isDirty)!=null?t:!1,L(e),I(R())}},[S,I,R,L]),$=function(t,n){y.current=!1,n!=null&&(b.current=[].concat(b.current,[n]))},P=function(){T.current=!0,y.current=!1},N=function(){y.current=!0},M=function(){C.current=!0,D.current=null,o("CometComposerDraftingUtils").deleteDraftFromIndexedDB(u,"post_draft").catch(function(e){r("FBLogger")("comet_composer").mustfix("Experienced error when trying to delete draft: "+e)})},w=function(){C.current=!1,D.current=null},A=s._(/*BTDS*/"Create post"),F=r("useFeedComposerCometDialog")({composerEntryPointName:"inline_composer",composerSourceSurface:"newsfeed",composerType:"feed",onBeforeClose:x,onDeleteDraft:M,onSave:$,onSaveDraft:w,onSaveError:P,onSubmit:N,profileID:u,title:A,tracePolicy:"comet.composer.feed"}),O=F[0],B=F[1],W=F[2],q=F[3],U=F[4],V=m(function(e){T.current=!1,o("CometComposerDraftingUtils").canFriendsAndFamilyUsersDraftPostsSilentExposure()?D.current!=null?Q(e,D.current):o("CometComposerDraftingUtils").getDraftFromIndexedDB(u,"post_draft").then(function(t){t!=null?Q(e,t):X(e)}).catch(function(t){o("CometComposerDraftingUtils").logDraftRetrievalError(t),X(e)}):X(e)},[]),H=_(function(){return[o("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("newsfeed","newPost",V)]},[V]);r("useLayerKeyCommands")(H);var G=s._(/*BTDS*/"Create a post"),z=_(function(){return{isOneLineSimplified:r("gkx")("10611"),isTwoLineSimplified:!1}},[]),j=c.jsx(r("CometFeedInlineComposerStylesContext").Provider,{value:z,children:c.jsx(r("CometFeedInlineComposerSproutsList.react"),{composer:l.feed_comet_composer,onHoverInPrerenderer:W,onHoverOutPrerenderer:q,onPressInPrerenderer:U,profile$key:l.actor,showFeedComposerDialog:V,triggerRef:B})}),K=c.jsx(r("FDSCard.react"),{background:"default",dropShadow:1,children:c.jsxs("div",babelHelpers.extends({"aria-label":G},{0:{className:"x6s0dn4 x78zum5 x1a02dak x1a8lsjc xv54qhq xf7dkkf xz9dl7a"},1:{className:"x6s0dn4 x78zum5 x1a02dak xv54qhq xf7dkkf xz9dl7a xjkvuk6"}}[!!z.isTwoLineSimplified<<0],{role:"region",children:[c.jsxs("div",{className:"x1cy8zhl x78zum5 x1iyjqo2 xs83m0k xh8yej3",children:[c.jsx(r("CometScreenReaderHeading.react"),{children:G}),c.jsx(r("CometFeedInlineComposerPressableProfilePic.react"),{profile$key:l.actor}),c.jsx(r("CometFeedInlineComposerWOYM.react"),{onHoverInPrerenderer:W,onHoverOutPrerenderer:q,onPress:function(){return V()},onPressInPrerenderer:U,postPlainText:k,profile$key:l.actor,triggerRef:B}),z.isOneLineSimplified&&j]}),!z.isOneLineSimplified&&j]}))});if(n("cr:1993522")==null)return K;return c.jsx(n("cr:1993522"),{enableFeature:!1,fallback:c.jsx(r("FDSCard.react"),{background:"default",dropShadow:1,children:c.jsxs("div",babelHelpers.extends({"aria-label":G},{0:{className:"x6s0dn4 x78zum5 x1a02dak x1a8lsjc xv54qhq xf7dkkf xz9dl7a"},1:{className:"x6s0dn4 x78zum5 x1a02dak xv54qhq xf7dkkf xz9dl7a xjkvuk6"}}[!!z.isTwoLineSimplified<<0],{role:"region",children:[c.jsx(r("CometScreenReaderHeading.react"),{children:G}),c.jsx(r("CometFeedInlineComposerPressableProfilePic.react"),{profile$key:l.actor}),c.jsx(r("CometFeedInlineComposerWOYM.react"),{onPress:function(){},profile$key:l.actor,triggerRef:g}),c.jsx(r("CometFeedInlineComposerSproutsList.react"),{composer:null,showFeedComposerDialog:function(){},triggerRef:g})]}))}),children:K});function Q(e,t){var n=t==null?void 0:t.serializedLexicalEditorState;if(t!=null&&n!=null){var a=r("cometComposerLexicalCreateEditor")();a.setEditorState(a.parseEditorState(n));var i=babelHelpers.extends({},t,{lexicalEditor:a}),l=t==null?void 0:t.mediaAttachments,s=l==null?void 0:l.some(function(e){return(e==null?void 0:e.fileType)==="VIDEO"});if(l!=null&&s===!0){var u=o("CometComposerDraftingUtils").createNewObjectURLsForVideosAndThumbnails(l);u!=null&&(i=babelHelpers.extends({},i,{mediaAttachments:u}))}X(e,i)}else X(e)}function X(e,t){var n=r("gkx")("20836"),a=r("getComposerViewStateWithAdditionalMedia")({draftViewState:t,entryPointData:e,getResumableViewState:R,startWithHeaderTextStyle:n});a=babelHelpers.extends({},a,{characterLimit:63206,mediaAttachmentsLimit:80,supportedSubmissionFlows:["ASYNC_SILENT","ASYNC_NOTIF","FALLBACK"],videoComposerData:{shouldOpenVideoSpecificComposer:h,targetID:u,wasCreatedViaUnifiedVideoFlow:o("CometUnifiedVideoAndReelsGating").shouldShowUnifiedVideoEditor()}}),(e==null?void 0:e.pushedPageOnLoad)==="get_messages"&&(a=babelHelpers.extends({},a,{attachmentArea:babelHelpers.extends({},a.attachmentArea,{activeAttachmentType:r("CometComposerAttachmentPluginTypes").GET_MESSAGES}),isGetMessagesPost:!0,isGetMessagesPostAttachmentOptional:!0})),(e==null?void 0:e.pushedPageOnLoad)==="get_whatsapp_messages"&&(a=babelHelpers.extends({},a,{footerAttachmentArea:{activeFooterAttachmentType:o("CometComposerFooterAttachmentPluginTypes").CometComposerFooterAttachmentPluginTypes.GET_WHATSAPP_MESSAGES},isGetWhatsAppMessagePost:!0,isGetWhatsappMessagesPostAttachmentOptional:!0})),O({beginningViewState:a,pushedPageOnLoad:e==null?void 0:e.pushedPageOnLoad})}}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),226);
__d("CometFeedMostRecentHeader.react",["fbt","CometPressable.react","CometRouteParams","FDSText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(7),t=o("CometRouteParams").useRouteParams(),n=t.sk;if(n!=="h_chr")return null;var a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Back to top posts"),e[0]=a):a=e[0];var i=a,l,c;e[1]===Symbol.for("react.memo_cache_sentinel")?(l={className:"x8cjs6t x13fuv20 x178xt8z x78zum5 xdj266r x11t971q xat24cr xvc5jky xyamay9 xyri2b x1l90r2v x1c1uobl"},c={className:"x1iyjqo2"},e[1]=l,e[2]=c):(l=e[1],c=e[2]);var d,m;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx("div",babelHelpers.extends({},c,{children:u.jsx(r("FDSText.react"),{type:"headlineEmphasized3",children:s._(/*BTDS*/"Most Recent")})})),m={className:"xs83m0k"},e[3]=d,e[4]=m):(d=e[3],m=e[4]);var p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p={url:"/"},e[5]=p):p=e[5];var _;return e[6]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsxs("div",babelHelpers.extends({},l,{children:[d,u.jsx("div",babelHelpers.extends({},m,{children:u.jsx(r("CometPressable.react"),{display:"inline",label:i,linkProps:p,overlayDisabled:!0,children:u.jsx(r("FDSText.react"),{color:"blueLink",type:"body3",children:i})})}))]})),e[6]=_):_=e[6],_}l.default=c}),226);
__d("CometHomeContactChannels_refetchable_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9468131563309177"}),null);
__d("CometHomeContactChannels_refetchable.graphql",["CometHomeContactChannels_refetchable_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeContactChannels_refetchable",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometHomeContactChannels_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometHomeContactChannels_refetchable",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_broadcast_channel_creation",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"recent_broadcast_channels",plural:!0,selections:[e,{kind:"TypeDiscriminator",abstractKey:"__isMessengerPinnableDiscoverablePublicChannelThread"},t,{alias:null,args:null,kind:"ScalarField",name:"join_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_count",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],type:"User",abstractKey:null},t],storageKey:null}],storageKey:null}]},params:{id:n("CometHomeContactChannels_refetchable_facebookRelayOperation"),metadata:{},name:"CometHomeContactChannels_refetchable",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("CometHomeContactChannels_viewer.graphql",["CometHomeContactChannels_refetchable.graphql"],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["viewer"],operation:n("CometHomeContactChannels_refetchable.graphql")}},name:"CometHomeContactChannels_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_broadcast_channel_creation",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"recent_broadcast_channels",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"useMWOpenBroadcastChannelFromProfile_channel"},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],type:"User",abstractKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometHomeCreateChannelButton.react",["fbt","FDSListCellPressable.react","FDSListCellText.react","FDSPlusFilled20Icon","FDSSkittleIcon.react","FDSText.react","react","react-compiler-runtime","useMWAPPlusOpenBroadcastChannelCreationDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(7),n=e.refetchChannelList,a=r("useMWAPPlusOpenBroadcastChannelCreationDialog")(),i;t[0]!==a||t[1]!==n?(i=function(){return a("public_chats:channels_gutter",n)},t[0]=a,t[1]=n,t[2]=i):i=t[2];var l=i,c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("FDSSkittleIcon.react"),{color:"gray",icon:r("FDSPlusFilled20Icon"),size:36}),t[3]=c):c=t[3];var d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("FDSListCellText.react"),{headline:u.jsx(r("FDSText.react"),{type:"headline4",children:s._(/*BTDS*/"Create channel")})}),t[4]=d):d=t[4];var m;return t[5]!==l?(m=u.jsx(r("FDSListCellPressable.react"),{addOnStart:c,addOnStartMarginTop:0,content:d,onPress:l,paddingHorizontal:8}),t[5]=l,t[6]=m):m=t[6],m}l.default=d}),226);
__d("CometHomeContactChannels.react",["fbt","CometHomeContactChannels_viewer.graphql","CometHomeCreateChannelButton.react","CometHomeRightRailUnit.react","CometRelay","FBLogger","FDSListCellPressable.react","FDSProfilePhoto.react","FDSTextPairing.react","FDSUnitHeader.react","I64","LSContactListConversionAttributionStore","MWInboxRouteBuilder","MWLogBroadcastChannelFalcoEvent","MWPActor.react","MessengerSidebarClickImpressionEventsLoggerImpl","intlSummarizeNumber","react","react-compiler-runtime","useBroadcastChannelImpressionLogger","useMWOpenBroadcastChannelFromProfile","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=u.useMemo;function p(t){var a,i=o("react-compiler-runtime").c(25),l=t.viewer$key,u;i[0]===Symbol.for("react.memo_cache_sentinel")?(u=o("MWPActor.react").isAPPlus(),i[0]=u):u=i[0];var c=u,m;i[1]===Symbol.for("react.memo_cache_sentinel")?(m=o("MWPActor.react").isPromode(),i[1]=m):m=i[1];var p=m,g=p,h=o("CometRelay").useRefetchableFragment(e!==void 0?e:e=n("CometHomeContactChannels_viewer.graphql"),l),y=h[0],C=h[1],b;i[2]!==C?(b=function(){C({},{fetchPolicy:"store-and-network"})},i[2]=C,i[3]=b):b=i[3];var v=b,S,R,L,E,k;if(i[4]!==(y==null||(a=y.actor)==null?void 0:a.recent_broadcast_channels)||i[5]!==(y==null?void 0:y.is_eligible_for_broadcast_channel_creation)){var I,T,D=(y==null||(I=y.actor)==null||(I=I.recent_broadcast_channels)==null?void 0:I.map(f).filter(Boolean))||[];S=D.map(_),R=(y==null?void 0:y.is_eligible_for_broadcast_channel_creation)===!0&&(c||g&&D.length<1),k=r("useBroadcastChannelImpressionLogger"),i[11]===Symbol.for("react.memo_cache_sentinel")?(L=(!c).toString(),i[11]=L):L=i[11],E=D.length.toString(),i[4]=y==null||(T=y.actor)==null?void 0:T.recent_broadcast_channels,i[5]=y==null?void 0:y.is_eligible_for_broadcast_channel_creation,i[6]=S,i[7]=R,i[8]=L,i[9]=E,i[10]=k}else S=i[6],R=i[7],L=i[8],E=i[9],k=i[10];var x;i[12]!==L||i[13]!==E?(x={clientExtras:{is_promode:L,num_channels:E},event:253,parentSurface:11,source:127,surface:91},i[12]=L,i[13]=E,i[14]=x):x=i[14];var $=k(x);if(S.length<1&&!R||!c&&!g)return null;var P;i[15]===Symbol.for("react.memo_cache_sentinel")?(P=d.jsx(r("FDSUnitHeader.react"),{headline:s._(/*BTDS*/"Channels"),headlineColor:"secondary",level:3}),i[15]=P):P=i[15];var N;i[16]!==R||i[17]!==v?(N=R?d.jsx(r("CometHomeCreateChannelButton.react"),{refetchChannelList:v}):null,i[16]=R,i[17]=v,i[18]=N):N=i[18];var M;i[19]!==S||i[20]!==N?(M=d.jsxs(r("CometHomeRightRailUnit.react"),{header:P,children:[S,N]}),i[19]=S,i[20]=N,i[21]=M):M=i[21];var w;return i[22]!==$||i[23]!==M?(w=d.jsx("div",{"data-testid":void 0,ref:$,children:M}),i[22]=$,i[23]=M,i[24]=w):w=i[24],w}function _(e,t){return d.jsx(g,{channel$key:e.channel,image:e.imageUri,memberCount:e.memberCount,position:t,threadId:e.id,threadName:e.threadName},e.id)}_.displayName=_.name+" [from "+i.id+"]";function f(e){if(e==null)return r("FBLogger")("cm_web_mg").warn("channel is unavailable"),null;var t=e.id,n=e.image,o=e.participant_count,a=e.thread_name;return t==null||a==null||(n==null?void 0:n.uri)==null?(r("FBLogger")("cm_web_mg").warn("channel data is unavailable"),null):{channel:e,id:t,imageUri:n.uri,memberCount:parseInt(o,10),threadName:a}}function g(e){var t=o("react-compiler-runtime").c(27),n=e.channel$key,a=e.image,i=e.memberCount,l=e.position,u=e.threadId,m=e.threadName,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=o("MWPActor.react").isAPPlus(),t[0]=p):p=t[0];var _=p,f,g;t[1]===Symbol.for("react.memo_cache_sentinel")?(g={entry_point:"comet_home_sidebar",major_surface:"comet_home",minor_surface:"sidebar_broadcast_channels"},t[1]=g):g=t[1];var h;t[2]!==l||t[3]!==u?(h={id:u,position:l,surface:g,targetType:"broadcast_channel"},t[2]=l,t[3]=u,t[4]=h):h=t[4],f=h;var y=f,C;t[5]!==y||t[6]!==u?(C=function(){return o("MessengerSidebarClickImpressionEventsLoggerImpl").logClickEvent(y),o("LSContactListConversionAttributionStore").setAttribution(u,y),o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({event:1,parentSurface:11,source:58,surface:91,threadFbid:(c||(c=o("I64"))).of_string(u)})},t[5]=y,t[6]=u,t[7]=C):C=t[7];var b=r("useMWOpenBroadcastChannelFromProfile")(n,"homeChannelsGutterUnit",C),v;if(t[8]!==i){var S=r("intlSummarizeNumber")(i);v=s._(/*BTDS*/"_j{\"*\":\"{memberCount} members\",\"_1\":\"{memberCount} member\"}",[s._plural(i),s._param("memberCount",S)]),t[8]=i,t[9]=v}else v=t[9];var R=v,L;t[10]!==b||t[11]!==u?(L=_?[{onNavigate_DEPRECATED_FIXME:b,url:o("MWInboxRouteBuilder").buildURL({thread_key:u})},void 0]:[void 0,b],t[10]=b,t[11]=u,t[12]=L):L=t[12];var E=L,k=E[0],I=E[1],T;t[13]!==y?(T={onVisible:function(){o("MessengerSidebarClickImpressionEventsLoggerImpl").logImpressionEvent(y)},options:o("MessengerSidebarClickImpressionEventsLoggerImpl").IMPRESSION_LOG_OPTIONS},t[13]=y,t[14]=T):T=t[14];var D=r("useVisibilityObserver")(T),x;t[15]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"Profile photo"),t[15]=x):x=t[15];var $;t[16]!==a?($=d.jsx(r("FDSProfilePhoto.react"),{"aria-label":x,shape:"circle",size:36,source:{uri:a}}),t[16]=a,t[17]=$):$=t[17];var P;t[18]!==R||t[19]!==m?(P=d.jsx(r("FDSTextPairing.react"),{body:R,bodyLineLimit:1,headline:m,headlineLineLimit:1,level:4}),t[18]=R,t[19]=m,t[20]=P):P=t[20];var N;return t[21]!==k||t[22]!==I||t[23]!==D||t[24]!==$||t[25]!==P?(N=d.jsx(r("FDSListCellPressable.react"),{addOnStart:$,addOnStartVerticalAlign:"center",content:P,linkProps:k,onPress:I,paddingHorizontal:8,ref:D}),t[21]=k,t[22]=I,t[23]=D,t[24]=$,t[25]=P,t[26]=N):N=t[26],N}l.default=p}),226);
__d("CometHomeContactChannelsContainerQuery.graphql",["CometHomeContactChannelsContainerQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeContactChannelsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometHomeContactChannels_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometHomeContactChannelsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_broadcast_channel_creation",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"recent_broadcast_channels",plural:!0,selections:[e,{kind:"TypeDiscriminator",abstractKey:"__isMessengerPinnableDiscoverablePublicChannelThread"},t,{alias:null,args:null,kind:"ScalarField",name:"join_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_count",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],type:"User",abstractKey:null},t],storageKey:null}],storageKey:null}]},params:{id:n("CometHomeContactChannelsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactChannelsContainerQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometHomeContactChannelsContainer.react",["CometHomeContactChannels.react","CometHomeContactChannelsContainerQuery.graphql","CometRelay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(2),i=t.homeContactChannelsQueryReference,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometHomeContactChannelsContainerQuery.graphql"),i),s=l.viewer,c;return a[0]!==s?(c=u.jsx(r("CometHomeContactChannels.react"),{viewer$key:s}),a[0]=s,a[1]=c):c=a[1],c}l.default=c}),98);
__d("CometHomeContactCommunityChats_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"numChatsToFetch"}],kind:"Fragment",metadata:null,name:"CometHomeContactCommunityChats_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"CommunityMessagingViewerFields",kind:"LinkedField",name:"community_messaging",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"last",variableName:"numChatsToFetch"}],concreteType:"CommunityMessagingViewerFieldsRecentChannelsConnection",kind:"LinkedField",name:"recent_channels",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGlobalFBGroupChat",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"RequiredField",field:e,action:"LOG",path:"community_messaging.recent_channels.nodes.id"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},action:"LOG",path:"community_messaging.recent_channels.nodes.thread_name"},{alias:null,args:[{kind:"Literal",name:"height",value:36},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"MessengerCommunity",kind:"LinkedField",name:"community",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"LOG",path:"community_messaging.recent_channels.nodes.community.group.name"},e],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null}})();a.exports=e}),null);
__d("CometHomeContactCommunityChats.react",["fbt","CometHomeContactCommunityChats_viewer.graphql","CometHomeContactsPresenceAwareList.react","CometHomeRightRailUnit.react","CometRelay","FDSListCellPressable.react","FDSProfilePhoto.react","FDSTextPairing.react","FDSUnitHeader.react","GroupsCometChatsEngagementLogger","JSResourceForInteraction","JSScheduler","LSContactListConversionAttributionStore","MessengerSidebarClickImpressionEventsLoggerImpl","gkx","react","react-compiler-runtime","useCometPreloader","useGroupsCometIsInCCNegativeTest","useMWChatOpenTabForGroup","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useMemo,f=r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("CometHomeContactCommunityChats.react"),g=r("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("CometHomeContactCommunityChats.react"),h=s._(/*BTDS*/"Community chats");function y(t){var a,i,l=o("react-compiler-runtime").c(8),s=t.viewer$key,u=o("CometRelay").useFragment(e!==void 0?e:e=n("CometHomeContactCommunityChats_viewer.graphql"),s),c=o("useGroupsCometIsInCCNegativeTest").useShouldDisableCMInCometHomeForNegativeTest();if(c||(u==null?void 0:u.chat_sidebar_is_collapsed)===!0||(u==null||(a=u.actor)==null?void 0:a.should_hide_group_conversations_list)===!0)return null;var m=(u==null?void 0:u.chat_visibility)===!0,p;if(l[0]!==(u==null||(i=u.community_messaging)==null||(i=i.recent_channels)==null?void 0:i.nodes)){var _,f,g=u==null||(_=u.community_messaging)==null||(_=_.recent_channels)==null||(_=_.nodes)==null?void 0:_.map(b).filter(Boolean);p=g!=null?g.map(C):[],l[0]=u==null||(f=u.community_messaging)==null||(f=f.recent_channels)==null?void 0:f.nodes,l[1]=p}else p=l[1];var y=p;if(y==null||y.length<1)return null;var v;l[2]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(r("FDSUnitHeader.react"),{headline:h,headlineColor:"secondary",level:3}),l[2]=v):v=l[2];var S;l[3]!==y?(S=d.jsx(d.Fragment,{children:y}),l[3]=y,l[4]=S):S=l[4];var R;return l[5]!==m||l[6]!==S?(R=d.jsx("div",{children:d.jsx(r("CometHomeRightRailUnit.react"),{header:v,children:d.jsx(r("CometHomeContactsPresenceAwareList.react"),{active:m,children:S})})}),l[5]=m,l[6]=S,l[7]=R):R=l[7],R}function C(e,t){return d.jsx(v,{communityId:e.communityId,groupId:e.groupId,groupName:e.groupName,image:e.imageUri,name:e.threadName,position:t,threadId:e.id},e.id)}C.displayName=C.name+" [from "+i.id+"]";function b(e){var t,n;if(e==null)return null;var r=e.community,o=e.id,a=e.image,i=e.thread_name,l=r==null||(t=r.group)==null?void 0:t.name;if(l==null||a==null||a.uri==null)return null;var s=r==null||(n=r.group)==null?void 0:n.id,u=r==null?void 0:r.id;return{communityId:u,groupId:s,groupName:l,id:o,imageUri:a.uri,threadName:i}}function v(e){var t=o("react-compiler-runtime").c(28),n=e.communityId,a=e.groupId,i=e.groupName,l=e.image,c=e.name,m=e.position,p=e.threadId,_=r("useMWChatOpenTabForGroup")("sidebarCommunityChatsList"),f=_[0],g=_[1],h;t[0]!==g||t[1]!==p?(h=function(){(u||(u=r("JSScheduler"))).scheduleSpeculativeCallback(S),g(p)},t[0]=g,t[1]=p,t[2]=h):h=t[2];var y=h,C=r("useCometPreloader")("button",y,y),b=C.onHoverInPreloader,v=C.onHoverOutPreloader,R,L;t[3]===Symbol.for("react.memo_cache_sentinel")?(L={entry_point:"comet_home_sidebar",major_surface:"comet_home",minor_surface:"sidebar_community_chats"},t[3]=L):L=t[3];var E;t[4]!==m||t[5]!==p?(E={id:p,position:m,surface:L,targetType:"community"},t[4]=m,t[5]=p,t[6]=E):E=t[6],R=E;var k=R,I;t[7]!==k?(I={onVisible:function(){o("MessengerSidebarClickImpressionEventsLoggerImpl").logImpressionEvent(k)},options:o("MessengerSidebarClickImpressionEventsLoggerImpl").IMPRESSION_LOG_OPTIONS},t[7]=k,t[8]=I):I=t[8];var T=r("useVisibilityObserver")(I),D;t[9]===Symbol.for("react.memo_cache_sentinel")?(D=s._(/*BTDS*/"Profile photo"),t[9]=D):D=t[9];var x;t[10]!==l?(x=d.jsx(r("FDSProfilePhoto.react"),{"aria-label":D,shape:"circle",size:36,source:{uri:l}}),t[10]=l,t[11]=x):x=t[11];var $;t[12]!==i||t[13]!==c?($=d.jsx(r("FDSTextPairing.react"),{body:i,bodyLineLimit:1,headline:c,headlineLineLimit:1,level:4}),t[12]=i,t[13]=c,t[14]=$):$=t[14];var P;t[15]!==n||t[16]!==a||t[17]!==k||t[18]!==f||t[19]!==p?(P=function(){o("MessengerSidebarClickImpressionEventsLoggerImpl").logClickEvent(k),o("LSContactListConversionAttributionStore").setAttribution(p,k),o("GroupsCometChatsEngagementLogger").log({action:"tap",community_id:n,event:"thread_open",group_id:a,source:"chat_row",surface:"right_nav_bar",thread_id:p}),f(p)},t[15]=n,t[16]=a,t[17]=k,t[18]=f,t[19]=p,t[20]=P):P=t[20];var N;return t[21]!==b||t[22]!==v||t[23]!==T||t[24]!==x||t[25]!==$||t[26]!==P?(N=d.jsx("li",{children:d.jsx(r("FDSListCellPressable.react"),{addOnStart:x,addOnStartVerticalAlign:"center",content:$,onHoverIn:b,onHoverOut:v,onPress:P,paddingHorizontal:8,ref:T})}),t[21]=b,t[22]=v,t[23]=T,t[24]=x,t[25]=$,t[26]=P,t[27]=N):N=t[27],N}function S(){var e=r("gkx")("16508");e===!0?g.preload():f.preload()}l.default=y}),226);
__d("CometHomeContactCommunityChatsContainerQuery.graphql",["CometHomeContactCommunityChatsContainerQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"numChatsToFetch"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometHomeContactCommunityChatsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometHomeContactCommunityChats_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometHomeContactCommunityChatsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null},t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"CommunityMessagingViewerFields",kind:"LinkedField",name:"community_messaging",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"last",variableName:"numChatsToFetch"}],concreteType:"CommunityMessagingViewerFieldsRecentChannelsConnection",kind:"LinkedField",name:"recent_channels",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGlobalFBGroupChat",kind:"LinkedField",name:"nodes",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:36},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"MessengerCommunity",kind:"LinkedField",name:"community",plural:!1,selections:[t,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("CometHomeContactCommunityChatsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactCommunityChatsContainerQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometHomeContactCommunityChatsContainer.react",["CometHomeContactCommunityChats.react","CometHomeContactCommunityChatsContainerQuery.graphql","CometRelay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(2),i=t.homeContactCommunityChatsQueryReference,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometHomeContactCommunityChatsContainerQuery.graphql"),i),s=l.viewer,c;return a[0]!==s?(c=u.jsx(r("CometHomeContactCommunityChats.react"),{viewer$key:s}),a[0]=s,a[1]=c):c=a[1],c}l.default=c}),98);
__d("CometHomeContactGroup.react",["fbt","FDSListCellPressable.react","FDSProfilePhoto.react","FDSTextPairing.react","JSResourceForInteraction","JSScheduler","LSContactListConversionAttributionStore","MWJewelThreadFacepile.react","MessengerSidebarClickImpressionEventsLoggerImpl","gkx","react","react-compiler-runtime","useCometPreloader","useMWChatOpenTabForGroup","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useMemo,_=r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("CometHomeContactGroup.react"),f=r("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("CometHomeContactGroup.react");function g(e){var t=o("react-compiler-runtime").c(34),n=e.activeStatusOn,a=e.images,i=e.isThreadActive,l=e.lastActiveTime,d=e.name,m=e.position,p=e.threadID,_=r("useMWChatOpenTabForGroup")("sidebarGroupsList"),f=_[0],g=_[1],y;t[0]!==g||t[1]!==p?(y=function(){(u||(u=o("JSScheduler"))).scheduleSpeculativeCallback(h),g(p)},t[0]=g,t[1]=p,t[2]=y):y=t[2];var C=y,b=r("useCometPreloader")("button",C,C),v=b.onHoverInPreloader,S=b.onHoverOutPreloader,R,L;t[3]===Symbol.for("react.memo_cache_sentinel")?(L={entry_point:"comet_home_sidebar",major_surface:"comet_home",minor_surface:"sidebar_group_chats"},t[3]=L):L=t[3];var E;t[4]!==i||t[5]!==m||t[6]!==p?(E={id:p,isOnline:i,position:m,surface:L,targetType:"group"},t[4]=i,t[5]=m,t[6]=p,t[7]=E):E=t[7],R=E;var k=R,I;t[8]!==k?(I={onVisible:function(){o("MessengerSidebarClickImpressionEventsLoggerImpl").logImpressionEvent(k)},options:o("MessengerSidebarClickImpressionEventsLoggerImpl").IMPRESSION_LOG_OPTIONS},t[8]=k,t[9]=I):I=t[9];var T=r("useVisibilityObserver")(I),D;t[10]!==k||t[11]!==f||t[12]!==p?(D=function(){o("MessengerSidebarClickImpressionEventsLoggerImpl").logClickEvent(k),o("LSContactListConversionAttributionStore").setAttribution(p,k),f(p)},t[10]=k,t[11]=f,t[12]=p,t[13]=D):D=t[13];var x=D,$;t[14]!==n||t[15]!==i||t[16]!==l?($=i?{type:"availabilityBadge"}:n&&l!=null?{border:"web-wash",time:l,type:"lastActiveTimeBadge"}:void 0,t[14]=n,t[15]=i,t[16]=l,t[17]=$):$=t[17];var P=$,N;t[18]!==P||t[19]!==a[0]||t[20]!==a[1]||t[21]!==a.length||t[22]!==d?(N=a.length>1?c.jsx(r("MWJewelThreadFacepile.react"),{addOn:P,primaryPhoto:{alt:d,source:{uri:a[0]}},secondaryPhoto:{alt:d,source:{uri:a[1]}},size:36}):a.length===1?c.jsx(r("FDSProfilePhoto.react"),{addOn:P,"aria-label":s._(/*BTDS*/"Profile photo"),shape:"circle",size:36,source:{uri:a[0]}}):void 0,t[18]=P,t[19]=a[0],t[20]=a[1],t[21]=a.length,t[22]=d,t[23]=N):N=t[23];var M=N,w;t[24]!==d?(w=c.jsx(r("FDSTextPairing.react"),{headline:d,level:4}),t[24]=d,t[25]=w):w=t[25];var A="sidebar_group_"+p,F;return t[26]!==M||t[27]!==v||t[28]!==S||t[29]!==x||t[30]!==T||t[31]!==A||t[32]!==w?(F=c.jsx(r("FDSListCellPressable.react"),{addOnStart:M,addOnStartVerticalAlign:"center",content:w,onHoverIn:v,onHoverOut:S,onPress:x,paddingHorizontal:8,ref:T,testid:void 0}),t[26]=M,t[27]=v,t[28]=S,t[29]=x,t[30]=T,t[31]=A,t[32]=w,t[33]=F):F=t[33],F}function h(){var e=r("gkx")("16508");e===!0?f.preload():_.preload()}l.default=g}),226);
__d("CometHomeContactGroupsContentWrapper.react",["fbt","CometHomeContactsPresenceAwareList.react","FDSListCellPressable.react","FDSPlusFilled20Icon","FDSSkittleIcon.react","FDSTextPairing.react","gkx","react","react-compiler-runtime","useMWChatOpenNewTab"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(7),n=e.activeStatusOn,a=e.groups,i=r("useMWChatOpenNewTab")("sidebarGroupsList");if(a.length>0){var l;t[0]!==a?(l=u.jsx(u.Fragment,{children:a}),t[0]=a,t[1]=l):l=t[1];var c;return t[2]!==n||t[3]!==l?(c=u.jsx(r("CometHomeContactsPresenceAwareList.react"),{active:n,children:l}),t[2]=n,t[3]=l,t[4]=c):c=t[4],c}else{var d;return t[5]!==i?(d=r("gkx")("23256")?null:u.jsx(r("FDSListCellPressable.react"),{addOnStart:u.jsx(r("FDSSkittleIcon.react"),{color:"gray",icon:r("FDSPlusFilled20Icon"),size:36}),addOnStartVerticalAlign:"center",content:u.jsx(r("FDSTextPairing.react"),{headline:s._(/*BTDS*/"Create New Group"),level:4}),onPress:function(){return i(!1)},paddingHorizontal:8}),t[5]=i,t[6]=d):d=t[6],d}}l.default=c}),226);
__d("CometHomeContactGroups_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={kind:"Literal",name:"height",value:36},n={kind:"Literal",name:"width",value:36},r=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__WebPixelRatiorelayprovider"},{kind:"RootArgument",name:"excludeBroadcastChannelThreads"},{kind:"RootArgument",name:"excludeCmThreads"}],kind:"Fragment",metadata:null,name:"CometHomeContactGroups_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:[{kind:"Variable",name:"exclude_broadcast_channel_threads",variableName:"excludeBroadcastChannelThreads"},{kind:"Variable",name:"exclude_cm_threads",variableName:"excludeCmThreads"},{kind:"Literal",name:"group_threads_only",value:!0},{kind:"Literal",name:"last",value:10}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_xac",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null}],storageKey:null},e,{alias:null,args:[t,n],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:r,storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[t,{kind:"Variable",name:"scale",variableName:"__relay_internal__pv__WebPixelRatiorelayprovider"},n],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:r,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null}})();a.exports=e}),null);
__d("MWParticipantListRenderer",["fbt","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(){function e(){var e=this;this.$6=function(t){var n=e.$5;if(n!=null){var r=t.id;if(r!=null&&n[r]!=null&&n[r]!=null)return n[r]}return e.$2?t.short_name:t.name},this.$1=!1,this.$2=!1,this.$3=!1,this.$4=0,this.$5=null}var t=e.prototype;return t.renderParticipantList=function(t){var e=t.map(this.$6);switch(e.length){case 0:return d(this.$1);case 1:return m(e);case 2:return this.$3?_(e):p(e);case 3:return this.$3?g(e):f(e);default:return this.$3?y(e,this.$4):h(e,this.$4)}},t.setIsNewThread=function(t){return this.$1=t,this},t.setNameRenderer=function(t){return this.$6=t,this},t.setUseShortName=function(t){return this.$2=t,this},t.setNickname=function(t){return this.$5=t,this},t.setUseAndSeparator=function(t){return this.$3=t,this},t.setTotalParticipantCount=function(t){return this.$4=t,this},e})();function d(e){return e?s._(/*BTDS*/"New message"):s._(/*BTDS*/"No participants")}function m(e){return e[0]}m.displayName=m.name+" [from "+i.id+"]";function p(e){return s._(/*BTDS*/"{participant1}, {participant2}",[s._param("participant1",e[0]),s._param("participant2",e[1])])}p.displayName=p.name+" [from "+i.id+"]";function _(e){return s._(/*BTDS*/"{participant1} and {participant2}",[s._param("participant1",e[0]),s._param("participant2",e[1])])}_.displayName=_.name+" [from "+i.id+"]";function f(e){return s._(/*BTDS*/"{participant1}, {participant2}, {participant3}",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("participant3",e[2])])}f.displayName=f.name+" [from "+i.id+"]";function g(e){return s._(/*BTDS*/"{participant1}, {participant2} and {participant3}",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("participant3",e[2])])}g.displayName=g.name+" [from "+i.id+"]";function h(e,t){return s._(/*BTDS*/"{participant1}, {participant2}, {participant3}, {others_link}",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("participant3",e[2]),s._param("others_link",C((t||e.length)-3))])}h.displayName=h.name+" [from "+i.id+"]";function y(e,t){return s._(/*BTDS*/"{participant1}, {participant2} and {others_link}",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("others_link",C((t||e.length)-2))])}y.displayName=y.name+" [from "+i.id+"]";function C(e){return e>1?s._(/*BTDS*/"_j{\"*\":\"{others_count} others\"}",[s._param("others_count",e,[0])]):s._(/*BTDS*/"1 other")}l.default=c}),226);
__d("MWUIThreadTitle",["CurrentUser","MWParticipantListRenderer"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={};return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t[n]=r}),t}function s(t,n,o,a,i){if(t!=="")return t;var l=e(o);return new(r("MWParticipantListRenderer"))().setUseShortName(i).setUseAndSeparator(a).setIsNewThread(!1).setNickname(l).renderParticipantList(n)}function u(e,t,n){var o=r("CurrentUser").getID(),a=Object.keys(t).length,i=Object.keys(t).map(function(e){if(!(e===o&&a>1)){var n=t[e];if(n!=null)return{id:n.id,name:n.name,short_name:n.short_name}}}).filter(Boolean);return s(e,i,n,!0,!0)}function c(e,t){if(e!=null)return[e];var n=r("CurrentUser").getID(),o=Object.keys(t),a=o.length;return o.map(function(e){if(!(e===n&&a!==1)){var r=t[e];return r!=null?r.image_src:void 0}}).filter(Boolean)}l.getTitleForGroup_=u,l.getProfileImages_=c}),98);
__d("CometHomeContactGroups.react",["fbt","CometHomeContactGroup.react","CometHomeContactGroupsContentWrapper.react","CometHomeContactGroups_viewer.graphql","CometHomeRightRailUnit.react","CometRelay","CometVisualCompletionAttributes","FDSUnitHeader.react","MWUIThreadTitle","MWXacGating","cr:809","filterNulls","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=s._(/*BTDS*/"Group chats");function m(e,t){var n=e.map(function(e){var n,a,i,l,s,u,c,d=e==null?void 0:e.node,m=d==null||(n=d.thread_key)==null?void 0:n.thread_fbid;if(d==null||m==null||d.is_xac===!0&&!o("MWXacGating").isGroupsEnabled())return null;var p=(a=(i=d.all_participants)==null?void 0:i.edges)!=null?a:[],_=!1,f=Object.fromEntries(p.map(function(e){var t,n,r,o=(t=e.node)==null?void 0:t.messaging_actor;if((o==null?void 0:o.id)==null)return null;var a=o.id;return(o==null?void 0:o.name)==null||((n=o.profile_picture)==null?void 0:n.uri)==null?null:(o.availability==="ACTIVE"&&(_=!0),[a,{id:a,image_src:o.profile_picture.uri,name:o.name,short_name:(r=o.short_name)!=null?r:o.name}])}).filter(Boolean)),g=(l=(s=d.customization_info)==null?void 0:s.participant_customizations)!=null?l:[],h=Object.fromEntries(g.map(function(e){return e==null||e.participant_id==null||e.nickname==null?null:[e.participant_id,e.nickname]}).filter(Boolean)),y=o("MWUIThreadTitle").getTitleForGroup_((u=d.name)!=null?u:"",f,h),C=r("filterNulls")(o("MWUIThreadTitle").getProfileImages_((c=d.image)==null?void 0:c.uri,f));return{activeStatusOn:t,id:m,images:C,isThreadActive:_,name:y,updatedTime:d.updated_time}}).filter(Boolean).slice(0,3);return n.map(function(e,t){return c.jsx("li",{children:c.jsx(r("CometHomeContactGroup.react"),{activeStatusOn:e.activeStatusOn,images:e.images,isThreadActive:e.isThreadActive,lastActiveTime:e.updatedTime,name:e.name,position:t,threadID:e.id})},e.id)})}function p(e){var t,n=o("react-compiler-runtime").c(8),a=e.activeStatusOn,i=e.viewer,l;if(n[0]!==(i==null||(t=i.message_threads)==null?void 0:t.edges)){var s,u,d;l=(s=i==null||(u=i.message_threads)==null?void 0:u.edges)!=null?s:[],n[0]=i==null||(d=i.message_threads)==null?void 0:d.edges,n[1]=l}else l=n[1];var p;n[2]!==a||n[3]!==l?(p=m(l,a),n[2]=a,n[3]=l,n[4]=p):p=n[4];var _=p,f;return n[5]!==a||n[6]!==_?(f=c.jsx(r("CometHomeContactGroupsContentWrapper.react"),{activeStatusOn:a,groups:_}),n[5]=a,n[6]=_,n[7]=f):f=n[7],f}function _(t){var a,i=o("react-compiler-runtime").c(7),l=t.viewer$key,s=o("CometRelay").useFragment(e!==void 0?e:e=n("CometHomeContactGroups_viewer.graphql"),l);if((s==null?void 0:s.chat_sidebar_is_collapsed)===!0||(s==null||(a=s.actor)==null?void 0:a.should_hide_group_conversations_list)===!0)return null;var u=(s==null?void 0:s.chat_visibility)===!0,m;i[0]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx(r("FDSUnitHeader.react"),{headline:d,headlineColor:"secondary",level:3}),i[0]=m):m=i[0];var _;i[1]!==u||i[2]!==s?(_=c.jsx(p,{activeStatusOn:u,viewer:s}),i[1]=u,i[2]=s,i[3]=_):_=i[3];var f;i[4]===Symbol.for("react.memo_cache_sentinel")?(f=n("cr:809")?c.jsx(n("cr:809"),{}):null,i[4]=f):f=i[4];var g;return i[5]!==_?(g=c.jsx("div",babelHelpers.extends({"data-testid":void 0},r("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:c.jsxs(r("CometHomeRightRailUnit.react"),{hasBottomDivider:!1,header:m,children:[_,f]})})),i[5]=_,i[6]=g):g=i[6],g}l.default=_}),226);
__d("CometHomeContactGroupsContainerQuery.graphql",["CometHomeContactGroupsContainerQuery_facebookRelayOperation","WebPixelRatio.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"excludeBroadcastChannelThreads"},t={defaultValue:null,kind:"LocalArgument",name:"excludeCmThreads"},r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={kind:"Literal",name:"height",value:36},l={kind:"Literal",name:"width",value:36},s=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"CometHomeContactGroupsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometHomeContactGroups_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__WebPixelRatiorelayprovider"}],kind:"Operation",name:"CometHomeContactGroupsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null},o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:[{kind:"Variable",name:"exclude_broadcast_channel_threads",variableName:"excludeBroadcastChannelThreads"},{kind:"Variable",name:"exclude_cm_threads",variableName:"excludeCmThreads"},{kind:"Literal",name:"group_threads_only",value:!0},{kind:"Literal",name:"last",value:10}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_xac",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null},o],storageKey:null},a,{alias:null,args:[i,l],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:s,storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[r,o,a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[i,{kind:"Variable",name:"scale",variableName:"__relay_internal__pv__WebPixelRatiorelayprovider"},l],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:s,storageKey:null}],storageKey:null},o],storageKey:null}],storageKey:null}],storageKey:null},o],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("CometHomeContactGroupsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactGroupsContainerQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__WebPixelRatiorelayprovider:n("WebPixelRatio.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometHomeContactGroupsContainer.react",["CometHomeContactGroups.react","CometHomeContactGroupsContainerQuery.graphql","CometRelay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(2),i=t.homeContactGroupsQueryReference,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometHomeContactGroupsContainerQuery.graphql"),i),s=l.viewer,c;return a[0]!==s?(c=u.jsx(r("CometHomeContactGroups.react"),{viewer$key:s}),a[0]=s,a[1]=c):c=a[1],c}l.default=c}),98);
__d("CometHomeContactsContainerQuery.graphql",["CometHomeContactsContainerQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"numContactsToFetch"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],t=[{kind:"Literal",name:"supported",value:"3qCwpv"}],r={kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeContactsContainerQuery",fragmentName:"CometHomeContactsDefaultRenderer_contactsHomeDefaultRenderer",fragmentPropName:"contactsHomeDefaultRenderer",kind:"ModuleImport"}],type:"XFBContactsHomeDefaultRenderer",abstractKey:null},o={kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeContactsContainerQuery",fragmentName:"CometHomeContactsMessagingSolutionForAPRenderer_contactsHomeMessagingSolutionForAPRenderer",fragmentPropName:"contactsHomeMessagingSolutionForAPRenderer",kind:"ModuleImport"}],type:"XFBContactsHomeMessagingSolutionForAPRenderer",abstractKey:null},a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometHomeContactsContainerQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"contacts_home_renderer",plural:!1,selections:[r,o],storageKey:'contacts_home_renderer(supported:"3qCwpv")'}],type:"User",abstractKey:null}],storageKey:null},action:"THROW",path:"viewer.actor"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometHomeContactsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"contacts_home_renderer",plural:!1,selections:[a,r,o],storageKey:'contacts_home_renderer(supported:"3qCwpv")'}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("CometHomeContactsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactsContainerQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometHomeContactsContainer.react",["CometHomeContactsConfig","CometHomeContactsContainerQuery$Parameters","CometHomeContactsContainerQuery.graphql","CometRelay","WebPixelRatio","react","react-compiler-runtime","useInterval","useRefetchablePreloadedQuery"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.startTransition,d=e!==void 0?e:e=n("CometHomeContactsContainerQuery.graphql");function m(e){var t=o("react-compiler-runtime").c(7),n=e.homeContactsQueryReference,a=r("useRefetchablePreloadedQuery")(r("CometHomeContactsContainerQuery$Parameters"),n),i=a[0],l=a[1],s=o("CometRelay").usePreloadedQuery(d,l),m=s.viewer,p;t[0]!==i?(p=function(){c(function(){i({numContactsToFetch:r("CometHomeContactsConfig").numContactsToFetch,scale:o("WebPixelRatio").get()})})},t[0]=i,t[1]=p):p=t[1],r("useInterval")(p,3e5);var _=m.actor.contacts_home_renderer;if(_==null){var f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(f=u.jsx("div",{}),t[2]=f):f=t[2],f}var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx("div",{}),t[3]=g):g=t[3];var h;t[4]===Symbol.for("react.memo_cache_sentinel")?(h={},t[4]=h):h=t[4];var y;return t[5]!==_?(y=u.jsx(o("CometRelay").MatchContainer,{fallback:g,match:_,props:h}),t[5]=_,t[6]=y):y=t[6],y}l.default=m}),98);
__d("CometHomeContactAndGroupContainer.react",["CometErrorBoundary.react","CometHomeContactChannelsContainer.react","CometHomeContactCommunityChatsContainer.react","CometHomeContactGroupsContainer.react","CometHomeContactsContainer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.homeContactChannelsQueryReference,a=e.homeContactCommunityChatsQueryReference,i=e.homeContactGroupsQueryReference,l=e.homeContactsQueryReference,u;t[0]!==l?(u=s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(r("CometHomeContactsContainer.react"),{homeContactsQueryReference:l})}),t[0]=l,t[1]=u):u=t[1];var c;t[2]!==n?(c=n!=null&&s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(r("CometHomeContactChannelsContainer.react"),{homeContactChannelsQueryReference:n})}),t[2]=n,t[3]=c):c=t[3];var d;t[4]!==a?(d=a!=null&&s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(r("CometHomeContactCommunityChatsContainer.react"),{homeContactCommunityChatsQueryReference:a})}),t[4]=a,t[5]=d):d=t[5];var m;t[6]!==i?(m=s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(r("CometHomeContactGroupsContainer.react"),{homeContactGroupsQueryReference:i})}),t[6]=i,t[7]=m):m=t[7];var p;return t[8]!==u||t[9]!==c||t[10]!==d||t[11]!==m?(p=s.jsxs(s.Fragment,{children:[u,c,d,m]}),t[8]=u,t[9]=c,t[10]=d,t[11]=m,t[12]=p):p=t[12],p}l.default=u}),98);
__d("CometHomeGQLCreateGroupButton.react",["fbt","FDSListCellPressable.react","FDSPlusFilled20Icon","FDSSkittleIcon.react","FDSTextPairing.react","react","react-compiler-runtime","useCometHomeOpenNewChatTab"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(){var e=o("react-compiler-runtime").c(6),t=r("useCometHomeOpenNewChatTab")("sidebarGroupsList"),n=t.onPress,a;e[0]!==n?(a=function(){n()},e[0]=n,e[1]=a):a=e[1];var i=a,l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("FDSSkittleIcon.react"),{color:"gray",icon:r("FDSPlusFilled20Icon"),size:36}),e[2]=l):l=e[2];var c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("FDSTextPairing.react"),{headline:s._(/*BTDS*/"Create group chat"),level:4}),e[3]=c):c=e[3];var d;return e[4]!==i?(d=u.jsx(r("FDSListCellPressable.react"),{addOnStart:l,addOnStartVerticalAlign:"center",content:c,onPress:i,paddingHorizontal:8,testid:void 0}),e[4]=i,e[5]=d):d=e[5],d}l.default=d}),226);
__d("CometHomeRightSideEgoRefetchQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="31593546656955646"}),null);
__d("CometHomeRightSideEgoRefetchQuery.graphql",["CometHomeRightSideEgoRefetchQuery_facebookRelayOperation","GHLShouldChangeRHCSideFeedFieldName.relayprovider","GHLShouldChangeRHCSideFeedFieldName.relayprovider","GHLShouldChangeRHCAdsFieldName.relayprovider","GHLShouldChangeRHCFieldName.relayprovider"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:0,kind:"LocalArgument",name:"refresh_num"},t={defaultValue:null,kind:"LocalArgument",name:"scale"},r={defaultValue:null,kind:"LocalArgument",name:"shouldChangeRHCSideFeedFieldName"},o={kind:"Variable",name:"refresh_num",variableName:"refresh_num"},a=[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!0},o],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],s={kind:"InlineFragment",selections:l,type:"Node",abstractKey:"__isNode"},u={kind:"InlineFragment",selections:l,type:"AdsSideFeedUnitItem",abstractKey:null};return{fragment:{argumentDefinitions:[e,t,r],kind:"Fragment",metadata:null,name:"CometHomeRightSideEgoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[o],kind:"FragmentSpread",name:"CometHomeRightSideEgo_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,r,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeRHCAdsFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeRHCFieldNamerelayprovider"}],kind:"Operation",name:"CometHomeRightSideEgoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:"sideFeed",args:a,concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer_sideFeedNodes",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},s,u],storageKey:null}],storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"sideFeedUnit",args:a,concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer_sideFeedUnitNodes",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},s,u],storageKey:null}],storageKey:null}]}],storageKey:null}]},params:{id:n("CometHomeRightSideEgoRefetchQuery_facebookRelayOperation"),metadata:{},name:"CometHomeRightSideEgoRefetchQuery",operationKind:"query",text:null,providedVariables:{shouldChangeRHCSideFeedFieldName:n("GHLShouldChangeRHCSideFeedFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider:n("GHLShouldChangeRHCSideFeedFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeRHCAdsFieldNamerelayprovider:n("GHLShouldChangeRHCAdsFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeRHCFieldNamerelayprovider:n("GHLShouldChangeRHCFieldName.relayprovider")}}}})();a.exports=e}),null);
__d("CometHomeRightSideEgo_viewer.graphql",["CometHomeRightSideEgoRefetchQuery.graphql"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!0},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider"},{defaultValue:0,kind:"LocalArgument",name:"refresh_num"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["viewer"],operation:n("CometHomeRightSideEgoRefetchQuery.graphql")}},name:"CometHomeRightSideEgo_viewer",selections:[{condition:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:"sideFeed",args:e,concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer_sideFeedNodes",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null}],storageKey:null}],storageKey:null}]},{condition:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"sideFeedUnit",args:e,concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer_sideFeedUnitNodes",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null}],storageKey:null}],storageKey:null}]}],type:"Viewer",abstractKey:null}})();a.exports=e}),null);
__d("CometSideAdsRefreshHandler",["CometDebounce","CometHomeRightSideEgoRefetchQuery.graphql","CometRHCRefreshConfig","CometRelay","ODS","WebPixelRatio","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(t,n,a,i,l){var s=this;(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.constructor"),this.$1=t,this.$2=!0,this.$9=1,this.$3=!1,this.$4=n,this.$6=!1,this.$7=!1,this.$8=!1,this.$10=!1,this.$11=!1,this.$5=Date.now(),this.$13=a,this.$14=i,this.$16=l,this.$15=!1,this.$12=r("CometDebounce")(function(){s.checkEligibilityAndRefreshIfAllowed()},{wait:r("CometRHCRefreshConfig").debounceDelay})}var n=t.prototype;return n.checkEligibilityAndRefreshIfAllowed=function(){this.checkRefreshEligibility()&&this.refresh()},n.checkRefreshEligibility=function(){return this.$14||this.$6||!this.$2||this.isAdBackgroundedOnHomeTab()||this.isAdHiddenOnHomeTab()?!1:this.$8||Date.now()-this.$5>=r("CometRHCRefreshConfig").refreshTimeout?(r("CometRHCRefreshConfig").enableTestMode&&o("CometRelay").fetchQuery(this.$1,r("CometHomeRightSideEgoRefetchQuery.graphql"),{refresh_num:this.$9,scale:o("WebPixelRatio").get(),shouldChangeRHCSideFeedFieldName:!0},{}).toPromise(),!0):!1},n.unregister=function(){this.$15&&(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_query_discarded"),this.$2=!1,this.handleActivityTracking()},n.refresh=function(){var t=this;if(!this.$6){(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refresh_triggered"),this.$6=!0;var n="store-or-network";this.$8&&this.$9!==0&&((e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_started"),n="network-only",this.$9=0,this.$15=!0),o("CometRelay").fetchQuery(this.$1,r("CometHomeRightSideEgoRefetchQuery.graphql"),{refresh_num:this.$9,scale:o("WebPixelRatio").get(),shouldChangeRHCSideFeedFieldName:!0},{fetchPolicy:n}).toPromise().then(function(n){if(t.$14||t.isAdBackgroundedOnHomeTab()||t.isAdHiddenOnHomeTab()||t.$7){(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refresh_cancelled");return}var r=t.isAdHiddenForRefresh();t.$8&&(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_finished."+(r?"hidden":"visible")),t.$8=!1,r?(t.$10=!0,t.$13(t.$9),t.$9++,(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refreshing_ui.hidden")):(t.$13(t.$9),t.$9++,t.$15=!1,t.$5=Date.now(),(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refreshing_ui.visible"))}).finally(function(){t.$6=!1,t.$7&&(t.$7=!1,window.setTimeout(t.checkEligibilityAndRefreshIfAllowed(),0))})}},n.restartInitialLoad=function(){if(this.$8||!this.$2){this.$2&&!this.$8&&(e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_opportunity_lost.not_refreshed");return}this.$8=!0,this.$6?this.$7=!0:this.checkEligibilityAndRefreshIfAllowed()},n.handleActivityTracking=function(){var e=this.$2&&this.$3&&!this.$4;e!==this.$11&&(e?this.enableActivityListeners():this.removeActivityListeners())},n.isAdHiddenForRefresh=function(){return this.$4&&!this.$3},n.isAdHiddenOnHomeTab=function(){return!this.$4&&!this.$3},n.isAdBackgroundedOnHomeTab=function(){return!this.$4&&this.$16()},n.handleAnyVisibilityChange=function(){this.$3&&!this.$4&&this.$10&&(this.$10=!1,this.$15=!1,this.$5=Date.now())},n.enableActivityListeners=function(){window.addEventListener("scroll",this.$12),window.addEventListener("resize",this.$12),this.$11=!0},n.removeActivityListeners=function(){window.removeEventListener("scroll",this.$12),window.removeEventListener("resize",this.$12),this.$11=!1},n.setHiddenSubtree=function(n){this.$4=n,n&&!r("gkx")("5780")&&((e||(e=o("ODS"))).bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_opportunity"),this.restartInitialLoad()),this.handleAnyVisibilityChange(),this.handleActivityTracking()},n.setAdUnitVisibility=function(t){this.$3=t,this.handleAnyVisibilityChange(),this.handleActivityTracking()},n.setEnvironment=function(t){this.$1=t},n.setRefetchCallback=function(t){this.$13=t},n.setIsHovered=function(t){this.$14=t},n.setGetIsBackgrounded=function(t){this.$16=t},t})();l.default=s}),98);
__d("useSideAdsRefreshHandler",["CometRelay","CometSideAdsRefreshHandler","HiddenSubtreePassiveContext","react","react-compiler-runtime","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useEffect,m=s.useRef;function p(e,t){var n=o("react-compiler-runtime").c(26),a=o("CometRelay").useRelayEnvironment(),i=m(null),l=m(null),s=c(r("HiddenSubtreePassiveContext")),u;n[0]!==s?(u=function(){return s.getCurrentState().backgrounded},n[0]=s,n[1]=u):u=n[1];var p=u,_,f;n[2]!==a?(_=function(){i.current!=null&&i.current.setEnvironment(a)},f=[a],n[2]=a,n[3]=_,n[4]=f):(_=n[3],f=n[4]),d(_,f);var g,h;n[5]!==e?(g=function(){i.current!=null&&i.current.setRefetchCallback(function(t){e(t)})},h=[e],n[5]=e,n[6]=g,n[7]=h):(g=n[6],h=n[7]),d(g,h);var y,C;n[8]!==p?(y=function(){i.current!=null&&i.current.setGetIsBackgrounded(p)},C=[p],n[8]=p,n[9]=y,n[10]=C):(y=n[9],C=n[10]),d(y,C);var b,v;n[11]!==t?(b=function(){i.current!=null&&i.current.setIsHovered(t)},v=[t],n[11]=t,n[12]=b,n[13]=v):(b=n[12],v=n[13]),d(b,v);var S;n[14]!==a||n[15]!==p||n[16]!==s||n[17]!==t||n[18]!==e?(S=function(){if(i.current==null){var n=s.getCurrentState();i.current=new(r("CometSideAdsRefreshHandler"))(a,n.hidden,function(t){e(t)},t,p),l.current!=null&&(l.current.remove(),l.current=null),l.current=s.subscribeToChanges(function(e){i.current!=null&&i.current.setHiddenSubtree(e.hidden)})}},n[14]=a,n[15]=p,n[16]=s,n[17]=t,n[18]=e,n[19]=S):S=n[19];var R=S,L;n[20]===Symbol.for("react.memo_cache_sentinel")?(L={onHidden:function(){i.current!=null&&i.current.setAdUnitVisibility(!1)},onVisible:function(){i.current!=null&&i.current.setAdUnitVisibility(!0)}},n[20]=L):L=n[20];var E=r("useVisibilityObserver")(L),k;n[21]!==R||n[22]!==E?(k=function(t){t!=null&&(R(),E(t))},n[21]=R,n[22]=E,n[23]=k):k=n[23];var I=k,T,D;return n[24]===Symbol.for("react.memo_cache_sentinel")?(T=function(){return function(){i.current!=null&&(i.current.unregister(),i.current=null),l.current!=null&&(l.current.remove(),l.current=null)}},D=[],n[24]=T,n[25]=D):(T=n[24],D=n[25]),d(T,D),I}l.default=p}),98);
__d("CometHomeRightSideEgo.react",["CometHomeRightSideEgo_viewer.graphql","CometRelay","GHLMitigationsGating","ODS","Random","react","react-compiler-runtime","useSideAdsRefreshHandler"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.startTransition,p=d.useCallback,_=d.useEffect,f=d.useState,g=e!==void 0?e:e=n("CometHomeRightSideEgo_viewer.graphql");function h(e){var t,n,a,i=o("react-compiler-runtime").c(14),l=e.viewerRef,s=o("CometRelay").useRefetchableFragment(g,l),d=s[0],p=s[1],h=(t=d==null||(n=d.sideFeed)==null?void 0:n.nodes)!=null?t:d==null||(a=d.sideFeedUnit)==null?void 0:a.nodes,y=f(null),C=y[0],b=y[1],v=f(!1),S=v[0],R=v[1],L,E;i[0]===Symbol.for("react.memo_cache_sentinel")?(L=function(){var e=function(){R(!1)};return window.addEventListener("blur",e),function(){window.removeEventListener("blur",e)}},E=[],i[0]=L,i[1]=E):(L=i[0],E=i[1]),_(L,E);var k,I;i[2]!==C?(k=function(){C==null&&o("Random").coinflip(2)&&(u||(u=o("ODS"))).bumpEntityKey(144,"feed_ads","CometHomeRightSideEgo.empty_first_unit",2)},I=[C],i[2]=C,i[3]=k,i[4]=I):(k=i[3],I=i[4]),_(k,I);var T;i[5]!==p?(T=function(t){m(function(){p({refresh_num:t},{fetchPolicy:"store-only"})})},i[5]=p,i[6]=T):T=i[6];var D=T,x=r("useSideAdsRefreshHandler")(D,S);if(h!=null&&h.length>=1&&C!==h[0])return b(h[0]),null;if(C==null||Object.keys(C).length===0)return null;var $,P;i[7]===Symbol.for("react.memo_cache_sentinel")?($=function(){R(!0)},P=function(){R(!1)},i[7]=$,i[8]=P):($=i[7],P=i[8]);var N;i[9]!==C?(N=c.jsx(o("CometRelay").MatchContainer,{match:C}),i[9]=C,i[10]=N):N=i[10];var M;return i[11]!==x||i[12]!==N?(M=c.jsx("div",{className:o("GHLMitigationsGating").getIsGHLRHCExtraClassEnabled()?"":void 0,onMouseEnter:$,onMouseLeave:P,ref:x,children:N}),i[11]=x,i[12]=N,i[13]=M):M=i[13],M}var y=h;l.default=y}),98);
__d("CometHomeRightSideEgoContainer_egoPanel.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeRightSideEgoContainer_egoPanel",selections:[{args:null,kind:"FragmentSpread",name:"CometHomeRightSideEgo_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometHomeRightSideEgoContainer.react",["CometHomeRightSideEgo.react","CometHomeRightSideEgoContainer_egoPanel.graphql","CometRelay","CometVisualCompletionAttributes","FBLogger","GHLMitigationsGating","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(2),i=t.egoPanel,l=o("CometRelay").useFragment(e!==void 0?e:e=n("CometHomeRightSideEgoContainer_egoPanel.graphql"),i);if(!l)return r("FBLogger")("feed_ads").mustfix("Expecting non-nullviewer"),null;var s=r("gkx")("20073"),c=s?r("CometVisualCompletionAttributes").IGNORE_LATE_MUTATION:void 0,d;return a[0]!==l?(d=u.jsx("div",babelHelpers.extends({},c,{children:o("GHLMitigationsGating").getIsGHLRhcRemoveExtraSpanEnabled()?u.jsx(r("CometHomeRightSideEgo.react"),{viewerRef:l}):u.jsx("span",{className:o("GHLMitigationsGating").getIsGHLRHCExtraClassEnabled()?"":void 0,children:u.jsx(r("CometHomeRightSideEgo.react"),{viewerRef:l})})})),a[0]=l,a[1]=d):d=a[1],d}l.default=c}),98);
__d("CometMegaphoneRootQuery.graphql",["CometMegaphoneRootQuery_facebookRelayOperation","FBReels_enable_view_dubbed_audio_type_gk.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:1,kind:"LocalArgument",name:"first"},t={defaultValue:null,kind:"LocalArgument",name:"scale"},r=[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"surface_nux_id",value:2646},{kind:"Literal",name:"trigger",value:"NEWSFEED"}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"CometMegaphoneRootQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"megaphonePromotions",args:r,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerEligibleQuickPromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMegaphoneQuickPromotionSection_quickPromotion"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider"}],kind:"Operation",name:"CometMegaphoneRootQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"megaphonePromotions",args:r,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerEligibleQuickPromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"2e5U5"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometPrimaryTestUserUpsellQP_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometPrimaryTestUserUpsellQP",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometStandardMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometStandardMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionNonprofitMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionNonprofitMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPDiglossiaSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPDiglossiaSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPRegularSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPRegularSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullImageMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullImageMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullBleedImageRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullBleedImageRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionTransparencyInformPlatformRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionTransparencyInformPlatformRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAPPlusCreateBroadcastChannelRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAPPlusCreateBroadcastChannelRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneMPWBulkMigrationRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWMPWBulkMigrationWarningRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"2e5U5")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("CometMegaphoneRootQuery_facebookRelayOperation"),metadata:{},name:"CometMegaphoneRootQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__FBReels_enable_view_dubbed_audio_type_gkrelayprovider:n("FBReels_enable_view_dubbed_audio_type_gk.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometMegaphoneRoot.react",["CometMegaphoneQuickPromotionSection.react","CometMegaphoneRootQuery.graphql","CometRelay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e!==void 0?e:e=n("CometMegaphoneRootQuery.graphql");function d(e){var t,n=o("react-compiler-runtime").c(2),a=e.megaphoneQueryReference,i=o("CometRelay").usePreloadedQuery(c,a),l=(t=i.viewer)==null||(t=t.megaphonePromotions)==null||(t=t.edges[0])==null?void 0:t.node;if(l==null)return null;var s;return n[0]!==l?(s=u.jsx(r("CometMegaphoneQuickPromotionSection.react"),{quickPromotion:l}),n[0]=l,n[1]=s):s=n[1],s}l.default=d}),98);
__d("CometRightSideHeaderCardsQuery.graphql",["CometRightSideHeaderCardsQuery_facebookRelayOperation","GHLShouldChangeRHCSideFeedFieldName.relayprovider","GHLShouldChangeRHCAdsFieldName.relayprovider","GHLShouldChangeRHCFieldName.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"refresh_num"},t={defaultValue:null,kind:"LocalArgument",name:"scale"},r={kind:"Literal",name:"environment",value:"COMET"},o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i=[a],l={kind:"InlineFragment",selections:i,type:"Node",abstractKey:"__isNode"},s={kind:"InlineFragment",selections:i,type:"AdsSideFeedUnitItem",abstractKey:null},u=[r,{kind:"Literal",name:"query_ego_units",value:!0},{kind:"Literal",name:"refresh_num",value:0}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"CometRightSideHeaderCardsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometRightSideHeaderCards_viewerSideFeed"},{args:null,kind:"FragmentSpread",name:"CometHomeRightSideEgoContainer_egoPanel"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PagesCometHomeAdminContainer_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeRHCAdsFieldNamerelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GHLShouldChangeRHCFieldNamerelayprovider"}],kind:"Operation",name:"CometRightSideHeaderCardsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[r,{kind:"Literal",name:"query_ego_units",value:!1},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"PagesCometHomeAdminContainer_pagesPanel",fragmentPropName:"pagesPanel",kind:"ModuleImport"}],type:"PagesSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"FriendingCometHomeInlineRHCContainer_friendsPanel",fragmentPropName:"friendsPanel",kind:"ModuleImport"}],type:"FriendingRequestsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRemindersContainer_reminderPanel",fragmentPropName:"reminderPanel",kind:"ModuleImport"}],type:"RemindersSideFeedUnit",abstractKey:null},l,s],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[o,a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"delegate_page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_manage_classic_page_in_pages_tab",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{condition:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:"sideFeed",args:u,concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer_sideFeedNodes",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},l,s],storageKey:null}],storageKey:'side_feed(environment:"COMET",query_ego_units:true,refresh_num:0)'}]},{condition:"__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:"sideFeedUnit",args:u,concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer_sideFeedUnitNodes",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},l,s],storageKey:null}],storageKey:'side_feed(environment:"COMET",query_ego_units:true,refresh_num:0)'}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:n("CometRightSideHeaderCardsQuery_facebookRelayOperation"),metadata:{},name:"CometRightSideHeaderCardsQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__GHLShouldChangeRHCSideFeedFieldNamerelayprovider:n("GHLShouldChangeRHCSideFeedFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeRHCAdsFieldNamerelayprovider:n("GHLShouldChangeRHCAdsFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeRHCFieldNamerelayprovider:n("GHLShouldChangeRHCFieldName.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometRightSideHeaderCards_viewerSideFeed.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"refresh_num"}],kind:"Fragment",metadata:null,name:"CometRightSideHeaderCards_viewerSideFeed",selections:[{alias:null,args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!1},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"PagesCometHomeAdminContainer_pagesPanel",fragmentPropName:"pagesPanel",kind:"ModuleImport"}],type:"PagesSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"FriendingCometHomeInlineRHCContainer_friendsPanel",fragmentPropName:"friendsPanel",kind:"ModuleImport"}],type:"FriendingRequestsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRemindersContainer_reminderPanel",fragmentPropName:"reminderPanel",kind:"ModuleImport"}],type:"RemindersSideFeedUnit",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometRightSideHeaderCards.react",["CometErrorBoundary.react","CometHomeRightSideEgoContainer.react","CometRelay","CometRightSideHeaderCardsQuery.graphql","CometRightSideHeaderCards_viewerSideFeed.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=e!==void 0?e:e=n("CometRightSideHeaderCardsQuery.graphql"),m=s!==void 0?s:s=n("CometRightSideHeaderCards_viewerSideFeed.graphql");function p(e){var t,n=o("react-compiler-runtime").c(8),a=e.rightSideHeaderCardsQueryReference,i=o("CometRelay").usePreloadedQuery(d,a),l=i.viewer,s=i,u=o("CometRelay").useFragment(m,l);if(l==null)return null;var p=u==null||(t=u.side_feed)==null?void 0:t.nodes,_;n[0]!==s||n[1]!==p?(_=p!=null?p.map(function(e,t){var n=(e==null?void 0:e.__typename)==="PagesSideFeedUnit";return c.jsx(r("CometErrorBoundary.react"),{children:c.jsx(o("CometRelay").MatchContainer,babelHelpers.extends({match:e},n?{props:{query$key:s}}:{}))},t)}).filter(Boolean):null,n[0]=s,n[1]=p,n[2]=_):_=n[2];var f=_,g;n[3]!==l?(g=c.jsx(r("CometHomeRightSideEgoContainer.react"),{egoPanel:l}),n[3]=l,n[4]=g):g=n[4];var h;return n[5]!==f||n[6]!==g?(h=c.jsxs("div",{children:[g,f]}),n[5]=f,n[6]=g,n[7]=h):h=n[7],h}function _(e){return c.jsx(r("CometErrorBoundary.react"),{children:c.jsx(p,babelHelpers.extends({},e))})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("TopOfFeedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={topOfFeedEnabled:!1},c=s.createContext(u);l.default=c}),98);
__d("StoriesTrayCreateCard.react",["fbt","CometListCellStrict_DEPRECATED.react","FDSCard.react","QuickPerformanceLogger","StoriesGating","StoriesPlusFilled24IconSVG.react","TopOfFeedContext","XCometStoriesCreateControllerRouteBuilder","gkx","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext;function _(){var e=o("react-compiler-runtime").c(9),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=r("XCometStoriesCreateControllerRouteBuilder").buildURL({}),e[0]=t):t=e[0];var n=t,a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={entryPoint:"add_to_story_persistent_button",sourceSurface:"newsfeed"},e[1]=a):a=e[1];var i=a,l=f,u=p(r("TopOfFeedContext")),d=u.topOfFeedEnabled,m=r("gkx")("19871"),_;e[2]===Symbol.for("react.memo_cache_sentinel")?(_={0:{className:"x1yztbdb"},1:{className:"xod5an3"}}[!!m<<0],e[2]=_):_=e[2];var g=d?0:1,h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h={className:"x1y1aw1k xwib8y2"},e[3]=h):h=e[3];var y,C;e[4]===Symbol.for("react.memo_cache_sentinel")?(y={color:"lightblue",icon:r("StoriesPlusFilled24IconSVG.react"),size:40,type:"contained-icon"},C=o("StoriesGating").getCreationDescription(),e[4]=y,e[5]=C):(y=e[4],C=e[5]);var b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx("div",babelHelpers.extends({},h,{children:c.jsx(r("CometListCellStrict_DEPRECATED.react"),{addOnStart:y,body:C,emphasized:!0,headline:s._(/*BTDS*/"Create story"),linkProps:{passthroughProps:i,url:n},onPress:l})})),e[6]=b):b=e[6];var v;return e[7]!==g?(v=c.jsx("div",babelHelpers.extends({},_,{children:c.jsx(r("FDSCard.react"),{background:"default",dropShadow:g,children:b})})),e[7]=g,e[8]=v):v=e[8],v}function f(){(e||(e=r("QuickPerformanceLogger"))).markerEnd(r("qpl")._(741087294,"2028"),4),e.markerStart(r("qpl")._(741087294,"2028"))}l.default=_}),226);
__d("StoriesTrayErrorCardLazyLoaded.react",["JSResourceForInteraction","lazyLoadComponent"],(function(t,n,r,o,a,i,l){"use strict";var e=r("lazyLoadComponent")(r("JSResourceForInteraction")("StoriesTrayErrorCard.react").__setRef("StoriesTrayErrorCardLazyLoaded.react"));l.default=e}),98);
__d("StoriesTrayTileHScrollScrollListener.react",["StoriesConstants","StoriesTrayTileGlimmer.react","react","react-compiler-runtime","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.onShow,a;t[0]!==n?(a={onVisible:n},t[0]=n,t[1]=a):a=t[1];var i=r("useVisibilityObserver")(a),l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("StoriesTrayTileGlimmer.react"),{aspectRatio:o("StoriesConstants").DEFAULT_ASPECT_RATIO}),t[2]=l):l=t[2];var u;return t[3]!==i?(u=s.jsx("div",{ref:i,children:l}),t[3]=i,t[4]=u):u=t[4],u}l.default=u}),98);
__d("StoriesTrayHScrollContainer.react",["fbt","CometOnRefresh","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","FBLogger","FDSHScroll.react","JSScheduler","StoriesGating","StoriesTrayTileHScrollScrollListener.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useLayoutEffect,f=d.useRef,g=d.useState,h={header:{alignItems:"x1cy8zhl",display:"x78zum5",marginInlineStart:"x1lziwak",marginInlineEnd:"x14z9mp",marginLeft:null,marginRight:null,marginTop:"x11xss2o",scrollSnapAlign:"x1q22t7g",width:"xnalus7",$$css:!0},hscrollListenerHidden:{display:"x1s85apg",$$css:!0}};function y(t){var n=o("react-compiler-runtime").c(39),a=t.cardWidth,i=t.children,l=t.hasNext,u=t.hideArrows,d=t.isLoadingNext,m=t.loadNext,y=t.peek,b=c.Children.map(i,C),v=g(!1),S=v[0],R=v[1],L=g(0),E=L[0],k=L[1],I=f(!1),T;n[0]===Symbol.for("react.memo_cache_sentinel")?(T=o("StoriesGating").getHScrollRefetchCount(),n[0]=T):T=n[0];var D=T,x=f(null),$;n[1]!==l||n[2]!==d||n[3]!==m?($=function(){D===0?r("FBLogger")("fbstories").warn("Stories to fetch = 0, yet the user is attempting to fetch more buckets"):l&&!d&&(x.current=m(D))},n[1]=l,n[2]=d,n[3]=m,n[4]=$):$=n[4];var P=$,N,M;n[5]===Symbol.for("react.memo_cache_sentinel")?(N=function(){return function(){var e;(e=x.current)==null||e.dispose()}},M=[],n[5]=N,n[6]=M):(N=n[5],M=n[6]),_(N,M);var w=f(P),A,F;n[7]!==P?(A=function(){w.current=P},F=[P],n[7]=P,n[8]=A,n[9]=F):(A=n[8],F=n[9]),_(A,F);var O,B;n[10]===Symbol.for("react.memo_cache_sentinel")?(O=function(){var t=w.current;if(t!=null){var n=(e||(e=r("JSScheduler"))).defer(function(){t(),n=null});return function(){n&&(e||(e=r("JSScheduler"))).cancelCallback(n)}}},B=[],n[10]=O,n[11]=B):(O=n[10],B=n[11]),p(O,B);var W;n[12]!==R?(W=function(){R(!0)},n[12]=R,n[13]=W):W=n[13];var q=W;o("CometOnRefresh").useOnRefresh(q);var U=(!l||S)&&h.hscrollListenerHidden,V;n[14]!==P?(V=c.jsx(r("StoriesTrayTileHScrollScrollListener.react"),{onShow:P}),n[14]=P,n[15]=V):V=n[15];var H;n[16]!==U||n[17]!==V?(H=c.jsx(o("FDSHScroll.react").Child,{xstyle:U,children:V},"visibility-placeholder"),n[16]=U,n[17]=V,n[18]=H):H=n[18],b.push(H);var G;n[19]!==S||n[20]!==E||n[21]!==R||n[22]!==k?(G=function(){S&&(I.current&&(k(E+1),I.current=!1),R(!1))},n[19]=S,n[20]=E,n[21]=R,n[22]=k,n[23]=G):G=n[23];var z;n[24]!==S||n[25]!==E?(z=[S,E],n[24]=S,n[25]=E,n[26]=z):z=n[26],p(G,z);var j;n[27]!==P?(j=function(){I.current=!0,P()},n[27]=P,n[28]=j):j=n[28];var K=j,Q;n[29]===Symbol.for("react.memo_cache_sentinel")?(Q=s._(/*BTDS*/"stories tray"),n[29]=Q):Q=n[29];var X;n[30]!==a?(X=a!=null?a:{minWidth:108,type:"responsive"},n[30]=a,n[31]=X):X=n[31];var Y;return n[32]!==u||n[33]!==b||n[34]!==K||n[35]!==y||n[36]!==E||n[37]!==X?(Y=c.jsx(o("FDSHScroll.react").Container,{accessibilityLabel:Q,cardWidth:X,children:b,gap:8,hideArrows:u,onPressNext:K,peek:y,peekPaddingEnd:0,peekPaddingStart:0,role:"grid"},E),n[32]=u,n[33]=b,n[34]=K,n[35]=y,n[36]=E,n[37]=X,n[38]=Y):Y=n[38],Y}function C(e){var t=r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).key,n=t==="header"||t==="sticky-header"||t==="collapsible-sticky-header",a=n||t==="tofu-null-card"||t==="divider";return c.jsx(o("FDSHScroll.react").Child,{type:a?"custom":"default",xstyle:n&&h.header,children:e},t)}C.displayName=C.name+" [from "+i.id+"]",l.default=y}),226);
__d("StoriesTrayRectangularBuckets_buckets.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"isFbNotesIncluded"}],kind:"Fragment",metadata:{plural:!0},name:"StoriesTrayRectangularBuckets_buckets",selections:[e,{alias:null,args:[{kind:"Variable",name:"include_fb_note",variableName:"isFbNotesIncluded"}],concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[e],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:t,storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"story_video_thumbnail",plural:!1,selections:t,storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayTilePrefetchProfileURI_profile"},{args:null,kind:"FragmentSpread",name:"useStoriesBucketsLogger_buckets"},{args:null,kind:"FragmentSpread",name:"useStoriesBucketsIndexer_buckets"},{args:null,kind:"FragmentSpread",name:"StoriesTrayTileSelf_bucket"},{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"StoriesTrayTile_bucket"}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("StoriesTrayRectangularBuckets_createTileUris.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularBuckets_createTileUris",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayCreateTile_imageUris"}],type:"User",abstractKey:null};a.exports=e}),null);
__d("StoriesTrayTile_LWRAnimations.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTile_LWRAnimations",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_LWRAnimations"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("StoriesTrayTile_bucket.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={kind:"Variable",name:"scale",variableName:"scale"},r={kind:"Literal",name:"width",value:40},o=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],a={alias:null,args:[n,r],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:o,storageKey:null},i=[{kind:"Literal",name:"height",value:277},n,{kind:"Literal",name:"width",value:156}],l={alias:"coverImage",args:i,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:o,storageKey:null},s=[t,a,l];return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"},{kind:"RootArgument",name:"scale"},{defaultValue:!1,kind:"LocalArgument",name:"shouldSkipCanViewerReply"}],kind:"Fragment",metadata:null,name:"StoriesTrayTile_bucket",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayProfileImpressionLogging_bucket"},e,{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:s,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[t,{alias:null,args:[{kind:"Literal",name:"height",value:40},n,r],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:o,storageKey:null},l],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:s,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[t,a,l,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_warningScreen"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:i,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_storyCardInfo"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_story"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[e,{condition:"shouldSkipCanViewerReply",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}]},{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePressable_story"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("useStoriesTrayProfileImpressionLogging_bucket.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={kind:"InlineFragment",selections:[e],type:"Node",abstractKey:"__isNode"};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStoriesTrayProfileImpressionLogging_bucket",selections:[e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[t],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("useStoriesTrayProfileImpressionLogging",["CometRelay","StoriesActorContext","StoriesLoggerHelper","TopOfFeedLoggingContext","react","react-compiler-runtime","requireDeferred","useImpressionLogger","useStoriesTrayProfileImpressionLogging_bucket.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useRef,p=r("requireDeferred")("StoryProfileImpressionFalcoEvent").__setRef("useStoriesTrayProfileImpressionLogging"),_=e!==void 0?e:e=n("useStoriesTrayProfileImpressionLogging_bucket.graphql");function f(e,t,n,a){var i,l,s,u,c=o("react-compiler-runtime").c(14),f=m(!1),g=o("CometRelay").useFragment(_,e),h=d(r("StoriesActorContext")),y=h.actorID,C=d(r("TopOfFeedLoggingContext")),b=C.tofuSessionID,v=g==null||(i=g.story_bucket_owner)==null?void 0:i.__typename,S=g==null||(l=g.story_bucket_owner)==null?void 0:l.id,R=(g==null||(s=g.story_bucket_owner)==null?void 0:s.is_viewer_friend)||!1,L;c[0]!==y||c[1]!==R||c[2]!==S||c[3]!==v?(L=o("StoriesLoggerHelper").getOwnerType(y,v,S,R),c[0]=y,c[1]=R,c[2]=S,c[3]=v,c[4]=L):L=c[4];var E=L,k=g==null||(u=g.thumbnail_story_to_show)==null||(u=u.attachments)==null||(u=u[0])==null||(u=u.media)==null?void 0:u.id,I;c[5]!==g||c[6]!==k||c[7]!==S||c[8]!==E||c[9]!==t||c[10]!==a||c[11]!==b||c[12]!==n?(I=function(r){f.current||g==null||(f.current=!0,r.log(function(){return{has_new_content:g.is_bucket_seen_by_viewer||!1,has_new_views:g.is_bucket_seen_by_viewer||!1,media_id:k,preview_type:"rectangle",source:t,story_index:a,story_owner:S,story_owner_type:E,tofu_tray_session_id:b,tracking_string:g==null?void 0:g.ranking_tracking_string,tray_session_id:n}}))},c[5]=g,c[6]=k,c[7]=S,c[8]=E,c[9]=t,c[10]=a,c[11]=b,c[12]=n,c[13]=I):I=c[13];var T=I;return r("useImpressionLogger")(p,T)}l.default=f}),98);
__d("useStoriesTrayTilePrefetchImageURI_story.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={kind:"Variable",name:"scale",variableName:"scale"},t=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"useStoriesTrayTilePrefetchImageURI_story",selections:[{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},e],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:t,storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},e,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:t,storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}})();a.exports=e}),null);
__d("useStoriesTrayTilePrefetchImageURI",["CometRelay","react-compiler-runtime","useStoriesTrayTilePrefetchImageURI_story.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r,a,i,l=o("react-compiler-runtime").c(3),s=o("CometRelay").useFragment(e!==void 0?e:e=n("useStoriesTrayTilePrefetchImageURI_story.graphql"),t),u=s==null||(r=s.attachments)==null||(r=r[0])==null?void 0:r.media,c=u==null||(a=u.image)==null?void 0:a.uri,d=s==null||(i=s.backdrop)==null||(i=i.media)==null||(i=i.image)==null?void 0:i.uri,m;return l[0]!==d||l[1]!==c?(m=c==null&&d==null?null:function(){if(c!=null){var e=new Image;if(e.src=c,d!=null){var t=new Image;t.src=d}}},l[0]=d,l[1]=c,l[2]=m):m=l[2],m}l.default=s}),98);
__d("useStoriesTrayTilePressable_story.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"}],kind:"Fragment",metadata:null,name:"useStoriesTrayTilePressable_story",selections:[{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePrefetchImageURI_story"}],type:"Story",abstractKey:null};a.exports=e}),null);
__d("useStoriesTrayTilePressable",["CometRelay","QPLUserFlow","StoriesLoggingConstants","qpl","react-compiler-runtime","useStoriesTrayTilePrefetchImageURI","useStoriesTrayTilePressable_story.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){var i=o("react-compiler-runtime").c(3);a===void 0&&r("StoriesLoggingConstants").ACTION_SOURCE.TRAY;var l=o("CometRelay").useFragment(e!==void 0?e:e=n("useStoriesTrayTilePressable_story.graphql"),t),s=r("useStoriesTrayTilePrefetchImageURI")(l),u;if(i[0]===Symbol.for("react.memo_cache_sentinel")){var c=r("qpl")._(741087294,"2028");u=function(){r("QPLUserFlow").start(c)},i[0]=u}else u=i[0];var d;return i[1]!==s?(d={onPress:u,onPressIn:function(t){s&&s()}},i[1]=s,i[2]=d):d=i[2],d}l.default=s}),98);
__d("StoriesTrayTile.react",["fbt","CometImage.react","CometRelay","GraphQLGender","StoriesEnums","StoriesLoggingConstants","StoriesTrayTileAvatar.react","StoriesTrayTileView.react","StoriesTrayTile_LWRAnimations.graphql","StoriesTrayTile_bucket.graphql","StoriesTrayUtils","XPlatReactEnvironment","isStringNullOrEmpty","react","react-compiler-runtime","react-strict-dom","useStoriesTrayProfileImpressionLogging","useStoriesTrayTilePressable"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["animations","bucketCount","bucketLength","bucketNode","gender","hasSelfBucket","isFirstVideoTile","isOnBizKit","traySessionID","source","storiesTrayType","index","trayBucketIDs","hasReactionIcon","onPress","onPressIn"],u,c,d,m=d||(d=o("react")),p={profileImagePlaceholder:{height:"x1vqgdyp",width:"x100vrsf",$$css:!0}};function _(t){var a,i,l,d,_,g,h,y,C,b,v,S=o("react-compiler-runtime").c(80),R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O,B;S[0]!==t?(R=t.animations,L=t.bucketCount,E=t.bucketLength,k=t.bucketNode,P=t.gender,I=t.hasSelfBucket,N=t.isFirstVideoTile,M=t.isOnBizKit,B=t.traySessionID,w=t.source,A=t.storiesTrayType,T=t.index,O=t.trayBucketIDs,F=t.hasReactionIcon,x=t.onPress,D=t.onPressIn,$=babelHelpers.objectWithoutPropertiesLoose(t,e),S[0]=t,S[1]=R,S[2]=L,S[3]=E,S[4]=k,S[5]=I,S[6]=T,S[7]=D,S[8]=x,S[9]=$,S[10]=P,S[11]=N,S[12]=M,S[13]=w,S[14]=A,S[15]=F,S[16]=O,S[17]=B):(R=S[1],L=S[2],E=S[3],k=S[4],I=S[5],T=S[6],D=S[7],x=S[8],$=S[9],P=S[10],N=S[11],M=S[12],w=S[13],A=S[14],F=S[15],O=S[16],B=S[17]);var W=P===void 0?"UNKNOWN":P,q=N===void 0?!1:N,U=M===void 0?!1:M,V=w===void 0?r("StoriesLoggingConstants").ACTION_SOURCE.UNKNOWN:w,H=A===void 0?"TOP_OF_FEED_TRAY":A,G=F===void 0?!1:F,z=o("CometRelay").useFragment(u!==void 0?u:u=n("StoriesTrayTile_bucket.graphql"),k),j=z==null?void 0:z.id,K=r("useStoriesTrayProfileImpressionLogging")(z,V,B,T),Q=r("useStoriesTrayTilePressable")(z==null?void 0:z.first_story_to_show,V),X=Q.onPress,Y=Q.onPressIn,J=o("CometRelay").useFragment(c!==void 0?c:c=n("StoriesTrayTile_LWRAnimations.graphql"),R);if(z==null||j==null)return null;var Z=z.story_bucket_owner,ee=z.first_story_to_show,te=z.thumbnail_story_to_show,ne=z.ranking_tracking_string,re=(a=z.should_show_close_friend_badge)!=null?a:!1,oe=z.story_bucket_type,ae=te==null?void 0:te.story_card_info,ie=(i=ee==null||(l=ee.story_card_info)==null?void 0:l.can_viewer_reply)!=null?i:!1,le=(d=(_=ae==null||(g=ae.story_thumbnail)==null?void 0:g.uri)!=null?_:Z==null||(h=Z.coverImage)==null?void 0:h.uri)!=null?d:"",se=ae==null||(y=ae.background_color_info)==null||(y=y.color_info)==null?void 0:y[0],ue=se==null?void 0:se.dominant_color,ce=Z==null||(C=Z.profile_picture)==null?void 0:C.uri,de;if(S[18]!==(Z==null?void 0:Z.name)){var me;de=(me=Z==null?void 0:Z.name)!=null?me:s._(/*BTDS*/"Story poster"),S[18]=Z==null?void 0:Z.name,S[19]=de}else de=S[19];var pe=de,_e=z.is_bucket_seen_by_viewer===!1,fe=(b=z==null?void 0:z.is_bucket_live)!=null?b:!1,ge=(v=Z==null?void 0:Z.availability)!=null?v:null,he=ge==="ACTIVE",ye;S[20]!==pe||S[21]!==ce?(ye=ce!=null?m.jsx(r("CometImage.react"),{alt:pe,height:40,src:ce,width:40}):m.jsx(o("react-strict-dom").html.div,{style:p.profileImagePlaceholder}),S[20]=pe,S[21]=ce,S[22]=ye):ye=S[22];var Ce=ye,be;S[23]!==Ce||S[24]!==_e||S[25]!==fe||S[26]!==he||S[27]!==re?(be=m.jsx(r("StoriesTrayTileAvatar.react"),{hasNew:_e,isLiveStreaming:fe,isOnline:he,isOpaqueBackground:!1,shouldShowCloseFriendsBadge:re,children:Ce}),S[23]=Ce,S[24]=_e,S[25]=fe,S[26]=he,S[27]=re,S[28]=be):be=S[28];var ve=be,Se;S[29]!==L||S[30]!==j||S[31]!==U||S[32]!==(ee==null?void 0:ee.id)||S[33]!==V?(Se=U||!o("XPlatReactEnvironment").isWeb()?null:o("StoriesTrayUtils").getBucketURL({bucketCount:L,bucketID:j,cardID:ee==null?void 0:ee.id,source:V}),S[29]=L,S[30]=j,S[31]=U,S[32]=ee==null?void 0:ee.id,S[33]=V,S[34]=Se):Se=S[34];var Re=Se,Le;S[35]!==W?(Le=new(r("GraphQLGender"))(W).toIntlVariationsEnum(),S[35]=W,S[36]=Le):Le=S[36];var Ee=Le,ke;S[37]!==Ee||S[38]!==pe?(ke=s._(/*BTDS*/"_j{\"*\":\"{Story owner's name (possesive)}'s story\"}",[s._name("Story owner's name (possesive)",pe,Ee)]),S[37]=Ee,S[38]=pe,S[39]=ke):ke=S[39];var Ie=ke,Te=r("isStringNullOrEmpty")(ue)?null:"#"+ue,De;if(S[40]!==(te==null?void 0:te.attachments)){var xe;De=te==null||(xe=te.attachments)==null||(xe=xe.find(f))==null||(xe=xe.media)==null||(xe=xe.cix_screen)==null?void 0:xe.view_model,S[40]=te==null?void 0:te.attachments,S[41]=De}else De=S[41];var $e=De,Pe;S[42]!==X||S[43]!==x?(Pe=function(t){X&&X(t),x&&x()},S[42]=X,S[43]=x,S[44]=Pe):Pe=S[44];var Ne;S[45]!==Y||S[46]!==D?(Ne=function(t){Y&&Y(t),D&&D()},S[45]=Y,S[46]=D,S[47]=Ne):Ne=S[47];var Me;S[48]!==E||S[49]!==I||S[50]!==V||S[51]!==H||S[52]!==ne||S[53]!==O||S[54]!==B?(Me={bucketLength:E,bucketType:o("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OTHER,hasSelfBucket:I,source:V,storiesTrayType:H,trackingString:ne,trayBucketIDs:O,traySessionID:B},S[48]=E,S[49]=I,S[50]=V,S[51]=H,S[52]=ne,S[53]=O,S[54]=B,S[55]=Me):Me=S[55];var we=ee==null?void 0:ee.id,Ae;S[56]!==J||S[57]!==ve||S[58]!==Te||S[59]!==oe||S[60]!==Re||S[61]!==ie||S[62]!==le||S[63]!==_e||S[64]!==G||S[65]!==q||S[66]!==Ie||S[67]!==pe||S[68]!==ae||S[69]!==$||S[70]!==Pe||S[71]!==Ne||S[72]!==Me||S[73]!==we||S[74]!==te||S[75]!==$e?(Ae=m.jsx(r("StoriesTrayTileView.react"),babelHelpers.extends({animations:J,avatar:ve,backgroundColor:Te,bucketType:oe,bucketUrl:Re,canViewerReply:ie,coverImage:le,hasNew:_e,hasReactionIcon:G,isFirstVideoTile:q,label:Ie,onPress:Pe,onPressIn:Ne,passthroughProps:Me,story:te,storyCardInfo:ae,storyId:we},$,{text:pe,warningScreenNode:$e})),S[56]=J,S[57]=ve,S[58]=Te,S[59]=oe,S[60]=Re,S[61]=ie,S[62]=le,S[63]=_e,S[64]=G,S[65]=q,S[66]=Ie,S[67]=pe,S[68]=ae,S[69]=$,S[70]=Pe,S[71]=Ne,S[72]=Me,S[73]=we,S[74]=te,S[75]=$e,S[76]=Ae):Ae=S[76];var Fe;return S[77]!==K||S[78]!==Ae?(Fe=m.jsx(o("react-strict-dom").html.div,{ref:K,children:Ae}),S[77]=K,S[78]=Ae,S[79]=Fe):Fe=S[79],Fe}function f(e){var t;return((t=e.media)==null?void 0:t.cix_screen)!=null}l.default=_}),226);
__d("StoriesTrayTileSelf_bucket.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={kind:"Variable",name:"scale",variableName:"scale"},n=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],r=[{kind:"Literal",name:"height",value:277},t,{kind:"Literal",name:"width",value:156}];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"StoriesTrayTileSelf_bucket",selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[t,{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null},{alias:"coverImage",args:r,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[e,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[e],type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_warningScreen"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:r,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:n,storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_story"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[e,{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePressable_story"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayProfileImpressionLogging_bucket"},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("StoriesTrayTileSelf.react",["fbt","CometImage.react","CometRelay","StoriesConstants","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayTileAvatar.react","StoriesTrayTileSelf_bucket.graphql","StoriesTrayTileView.react","StoriesTrayUtils","WebStorage","react","react-compiler-runtime","requireDeferred","useOnBeforeUnload","useStoriesTrayProfileImpressionLogging","useStoriesTrayTilePressable"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["bucketCount","bucketNode","bucketLength","hasSelfBucket","traySessionID","source","storiesTrayType","index","isUploading","optimisticStoryURI","onPressIn"],u,c,d,m=d||(d=o("react")),p=d,_=p.useCallback,f=p.useState,g=r("requireDeferred")("ODS").__setRef("StoriesTrayTileSelf.react");function h(t){var a,i,l,d,p,_,g,h=o("react-compiler-runtime").c(94),b,v,S,R,L,E,k,I,T,D,x,$;h[0]!==t?(b=t.bucketCount,S=t.bucketNode,v=t.bucketLength,R=t.hasSelfBucket,$=t.traySessionID,D=t.source,x=t.storiesTrayType,L=t.index,E=t.isUploading,I=t.optimisticStoryURI,k=t.onPressIn,T=babelHelpers.objectWithoutPropertiesLoose(t,e),h[0]=t,h[1]=b,h[2]=v,h[3]=S,h[4]=R,h[5]=L,h[6]=E,h[7]=k,h[8]=I,h[9]=T,h[10]=D,h[11]=x,h[12]=$):(b=h[1],v=h[2],S=h[3],R=h[4],L=h[5],E=h[6],k=h[7],I=h[8],T=h[9],D=h[10],x=h[11],$=h[12]);var P=D===void 0?r("StoriesLoggingConstants").ACTION_SOURCE.TRAY:D,N=x===void 0?"TOP_OF_FEED_TRAY":x,M=o("CometRelay").useFragment(u!==void 0?u:u=n("StoriesTrayTileSelf_bucket.graphql"),S),w=M==null?void 0:M.id,A=r("useStoriesTrayProfileImpressionLogging")(M,P,$,L),F=f(I),O=F[0],B=F[1],W=r("useStoriesTrayTilePressable")(M==null?void 0:M.first_story_to_show,P),q=W.onPress,U=W.onPressIn,V=C,H;if(h[13]!==E?(H=function(t){if(E===!0&&t==null)return{warnMessage:s._(/*BTDS*/"Story is uploading, leave this page will cancel the story")}},h[13]=E,h[14]=H):H=h[14],r("useOnBeforeUnload")(H),M==null||w==null)return null;var G=M.story_bucket_owner,z=(a=M.should_show_close_friend_badge)!=null?a:!1,j=M.first_story_to_show,K=M.thumbnail_story_to_show,Q=M.ranking_tracking_string,X=(K==null||(i=K.story_card_info)==null||(i=i.story_thumbnail)==null?void 0:i.uri)||(G==null||(l=G.coverImage)==null?void 0:l.uri),Y=M.is_bucket_seen_by_viewer===!1,J=(d=M==null?void 0:M.is_bucket_live)!=null?d:!1,Z;h[15]!==X||h[16]!==Y?(Z={coverImage:X,hasNew:Y},h[15]=X,h[16]=Y,h[17]=Z):Z=h[17];var ee=Z,te=(K==null||(p=K.story_card_info)==null?void 0:p.story_thumbnail)!=null,ne;h[18]===Symbol.for("react.memo_cache_sentinel")?(ne=s._(/*BTDS*/"Your story"),h[18]=ne):ne=h[18];var re=ne,oe;h[19]===Symbol.for("react.memo_cache_sentinel")?(oe=s._(/*BTDS*/"View your story"),h[19]=oe):oe=h[19];var ae=oe,ie;h[20]!==b||h[21]!==w||h[22]!==(j==null?void 0:j.id)||h[23]!==P?(ie=o("StoriesTrayUtils").getBucketURL({bucketCount:b,bucketID:w,cardID:j==null?void 0:j.id,source:P}),h[20]=b,h[21]=w,h[22]=j==null?void 0:j.id,h[23]=P,h[24]=ie):ie=h[24];var le=ie,se=G==null||(_=G.profile_picture)==null?void 0:_.uri,ue;if(h[25]!==(G==null?void 0:G.name)){var ce;ue=(ce=G==null?void 0:G.name)!=null?ce:s._(/*BTDS*/"Story poster"),h[25]=G==null?void 0:G.name,h[26]=ue}else ue=h[26];var de=ue,me;h[27]!==de||h[28]!==se?(me=se!=null?m.jsx(r("CometImage.react"),{alt:de,height:40,src:se,width:40}):m.jsx("div",{className:"x1vqgdyp x100vrsf"}),h[27]=de,h[28]=se,h[29]=me):me=h[29];var pe=me,_e;if(h[30]!==(K==null?void 0:K.attachments)){var fe;_e=K==null||(fe=K.attachments)==null||(fe=fe.find(y))==null||(fe=fe.media)==null||(fe=fe.cix_screen)==null?void 0:fe.view_model,h[30]=K==null?void 0:K.attachments,h[31]=_e}else _e=h[31];var ge=_e,he=K==null||(g=K.attachments)==null||(g=g[0])==null?void 0:g.media,ye=(he==null?void 0:he.__typename)==="Video"&&(he==null?void 0:he.video_status_type)!=="OK",Ce;h[32]!==pe||h[33]!==Y||h[34]!==J||h[35]!==E||h[36]!==z?(Ce=m.jsx(r("StoriesTrayTileAvatar.react"),{hasNew:Y,isLiveStreaming:J,isOpaqueBackground:!1,isUploading:E,shouldShowCloseFriendsBadge:z,children:pe}),h[32]=pe,h[33]=Y,h[34]=J,h[35]=E,h[36]=z,h[37]=Ce):Ce=h[37];var be=Ce;if(E===!0&&o("StoriesGating").shouldEnableOptimisticImprovements()||ye){if(I!=null&&(O===null||O!==I))B(I);else if(O==null&&ye){var ve,Se=he==null?void 0:he.id,Re=(c||(c=r("WebStorage"))).getSessionStorage(),Le=JSON.parse((ve=Re==null?void 0:Re.getItem(o("StoriesConstants").CACHED_STORY_THUMBNAIL_URI_SESSION_STORAGE_KEY))!=null?ve:"{}");Le[Se]!=null&&B(Le[Se])}var Ee;h[38]!==O?(Ee={coverImage:O},h[38]=O,h[39]=Ee):Ee=h[39];var ke=Ee,Ie;h[40]!==U||h[41]!==k?(Ie=function(t){U&&U(t),k&&k(),V()},h[40]=U,h[41]=k,h[42]=Ie):Ie=h[42];var Te;h[43]!==P||h[44]!==N||h[45]!==Q||h[46]!==$?(Te={source:P,storiesTrayType:N,trackingString:Q,traySessionID:$},h[43]=P,h[44]=N,h[45]=Q,h[46]=$,h[47]=Te):Te=h[47];var De;h[48]!==be||h[49]!==le||h[50]!==E||h[51]!==q||h[52]!==ke||h[53]!==T||h[54]!==Ie||h[55]!==Te||h[56]!==K||h[57]!==ge?(De=m.jsx(r("StoriesTrayTileView.react"),babelHelpers.extends({avatar:be,bucketUrl:le,isUploading:E,label:ae,onPress:q,onPressIn:Ie,passthroughProps:Te,story:K,text:re,warningScreenNode:ge},ke,T)),h[48]=be,h[49]=le,h[50]=E,h[51]=q,h[52]=ke,h[53]=T,h[54]=Ie,h[55]=Te,h[56]=K,h[57]=ge,h[58]=De):De=h[58];var xe;return h[59]!==A||h[60]!==De?(xe=m.jsx("div",{"data-testid":void 0,ref:A,children:De}),h[59]=A,h[60]=De,h[61]=xe):xe=h[61],xe}else if(te){var $e;h[62]!==U||h[63]!==k?($e=function(t){U&&U(t),k&&k(),V()},h[62]=U,h[63]=k,h[64]=$e):$e=h[64];var Pe;h[65]!==v||h[66]!==R||h[67]!==P||h[68]!==N||h[69]!==Q||h[70]!==$?(Pe={bucketLength:v,bucketType:o("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF,hasSelfBucket:R,source:P,storiesTrayType:N,trackingString:Q,traySessionID:$},h[65]=v,h[66]=R,h[67]=P,h[68]=N,h[69]=Q,h[70]=$,h[71]=Pe):Pe=h[71];var Ne;h[72]!==be||h[73]!==le||h[74]!==T||h[75]!==$e||h[76]!==Pe||h[77]!==K||h[78]!==ee||h[79]!==ge?(Ne=m.jsx(r("StoriesTrayTileView.react"),babelHelpers.extends({avatar:be,bucketUrl:le,label:ae,onPressIn:$e,passthroughProps:Pe,story:K,text:re,warningScreenNode:ge},ee,T)),h[72]=be,h[73]=le,h[74]=T,h[75]=$e,h[76]=Pe,h[77]=K,h[78]=ee,h[79]=ge,h[80]=Ne):Ne=h[80];var Me;return h[81]!==A||h[82]!==Ne?(Me=m.jsx("div",{"data-testid":void 0,ref:A,children:Ne}),h[81]=A,h[82]=Ne,h[83]=Me):Me=h[83],Me}else if(E===!0){var we;h[84]!==N?(we={storiesTrayType:N},h[84]=N,h[85]=we):we=h[85];var Ae;h[86]!==be||h[87]!==we||h[88]!==K||h[89]!==ge?(Ae=m.jsx(r("StoriesTrayTileView.react"),{avatar:be,isUploading:!0,label:ae,passthroughProps:we,story:K,text:re,warningScreenNode:ge}),h[86]=be,h[87]=we,h[88]=K,h[89]=ge,h[90]=Ae):Ae=h[90];var Fe;return h[91]!==A||h[92]!==Ae?(Fe=m.jsx("div",{ref:A,children:Ae}),h[91]=A,h[92]=Ae,h[93]=Fe):Fe=h[93],Fe}else return null}function y(e){var t;return((t=e.media)==null?void 0:t.cix_screen)!=null}function C(){g.onReady(b)}function b(e){e.bumpEntityKey(4329,"fb_stories_web","stories_tray.self_story_tile",1)}l.default=h}),226);
__d("useStoriesBucketsIndexer_buckets.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"isFbNotesIncluded"}],kind:"Fragment",metadata:{plural:!0},name:"useStoriesBucketsIndexer_buckets",selections:[{args:null,kind:"FragmentSpread",name:"useStoriesIsBucketEmpty_buckets"},e,{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:"unified_stories_with_notes",args:[{kind:"Variable",name:"include_fb_note",variableName:"isFbNotesIncluded"}],concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("useStoriesBucketsIndexer",["CometRelay","Env","StoriesActorContext","StoriesEnums","XPlatReactEnvironment","react","useStoriesBucketsIndexer_buckets.graphql","useStoriesIsBucketEmpty","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useContext,p=d.useEffect;function _(e){var t,n=(t=e.unified_stories_with_notes)==null?void 0:t.nodes;return n!=null?n.some(function(e){var t;return((t=e.story_card_info)==null?void 0:t.story_card_type)==="LIVE_STORY"}):!1}function f(e,t){var n;return e.can_viewer_post===!0&&((n=e.story_bucket_owner)==null?void 0:n.id)===t&&(e.story_bucket_type==="STORY"||e.story_bucket_type==="PROFILE_PLUS_STORY"||e.story_bucket_type==="ADMINED_ADDITIONAL_PROFILE_STORY")}function g(e,t){return f(e,t)?o("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF:o("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OTHER}function h(e,t,n){return f(e,n)?!0:!t&&!_(e)}function y(t){var a=(s||(s=r("useUnsafeRef_DEPRECATED")))(!0),i=m(r("StoriesActorContext")),l=i.actorID,c=o("CometRelay").useFragment(e!==void 0?e:e=n("useStoriesBucketsIndexer_buckets.graphql"),t);p(function(){a.current=!1},void 0);var d=r("useStoriesIsBucketEmpty")(c);return c!=null?c.map(function(e){var t,n,i,s=d(e==null?void 0:e.id,(a.current&&o("XPlatReactEnvironment").isWeb()?(u||(u=r("Env"))).start:Date.now())/1e3);return e!=null?{gender:(t=(n=e.story_bucket_owner)==null?void 0:n.gender)!=null?t:"UNKNOWN",isEmpty:s,isSeen:(i=e.is_bucket_seen_by_viewer)!=null?i:!1,shouldShow:h(e,s,l),type:g(e,l)}:null}):null}l.default=y}),98);
__d("useStoriesBucketsLogger_buckets.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[e];return{argumentDefinitions:[{kind:"RootArgument",name:"isFbNotesIncluded"}],kind:"Fragment",metadata:{plural:!0},name:"useStoriesBucketsLogger_buckets",selections:[{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},e,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},e],type:"User",abstractKey:null},{kind:"InlineFragment",selections:t,type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:[{kind:"Variable",name:"include_fb_note",variableName:"isFbNotesIncluded"}],concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:t,storageKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("useStoriesBucketsLogger",["CometRelay","StoriesActorContext","react","react-compiler-runtime","requireDeferred","useStoriesBucketsLogger_buckets.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=r("requireDeferred")("StoriesTrayLogger").__setRef("useStoriesBucketsLogger"),p=e!==void 0?e:e=n("useStoriesBucketsLogger_buckets.graphql");function _(e,t){var n=o("react-compiler-runtime").c(4),a=o("CometRelay").useFragment(p,t),i=d(r("StoriesActorContext")),l=i.actorID,s;return n[0]!==l||n[1]!==a||n[2]!==e?(s=function(n,r){m.onReady(function(t){t.logStoryTrayLoad({actorID:l,buckets:a,feedUnitTrackingString:r,sessionID:n,source:e})})},n[0]=l,n[1]=a,n[2]=e,n[3]=s):s=n[3],s}l.default=_}),98);
__d("useStoriesTrayTilePrefetchProfileURI_profile.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={kind:"Variable",name:"scale",variableName:"scale"},t={kind:"Literal",name:"width",value:40},n=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],r=[{alias:"profilePic",args:[e,t],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{plural:!0},name:"useStoriesTrayTilePrefetchProfileURI_profile",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:r,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:[{kind:"Literal",name:"height",value:40},e,t],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:r,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:r,type:"User",abstractKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}})();a.exports=e}),null);
__d("useStoriesTrayTilePrefetchProfileURI",["CometRelay","react-compiler-runtime","useStoriesTrayTilePrefetchProfileURI_profile.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=o("react-compiler-runtime").c(4),a=o("CometRelay").useFragment(e!==void 0?e:e=n("useStoriesTrayTilePrefetchProfileURI_profile.graphql"),t),i;r[0]!==a?(i=a!=null?a.map(c):[],r[0]=a,r[1]=i):i=r[1];var l=i,s;return r[2]!==l?(s=l.length===0?null:function(){l.map(u)},r[2]=l,r[3]=s):s=r[3],s}function u(e){if(e!=null){var t=new Image;t.src=e}}function c(e){var t;return e==null||(t=e.story_bucket_owner)==null||(t=t.profilePic)==null?void 0:t.uri}l.default=s}),98);
__d("StoriesTrayRectangularBuckets.react",["fbt","CometRelay","CometScreenReaderHeading.react","CometVisualCompletionAttributes","StoriesConstants","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayCreateCard.react","StoriesTrayCreateTile.react","StoriesTrayHScrollContainer.react","StoriesTrayRectangularBuckets_buckets.graphql","StoriesTrayRectangularBuckets_createTileUris.graphql","StoriesTrayTile.react","StoriesTrayTileSelf.react","gkx","react","requireDeferred","usePrevious","useStoriesBucketsIndexer","useStoriesBucketsLogger","useStoriesIsUploading","useStoriesTrayTilePrefetchProfileURI"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=m.useMemo,g=m.useState,h=m.useTransition,y=r("requireDeferred")("ODS").__setRef("StoriesTrayRectangularBuckets.react"),C=o("StoriesGating").shouldEnableSmallerStoriesTiles()?o("StoriesConstants").STORIES_TRAY_TILE_HEIGHT_MIN:o("StoriesConstants").STORIES_TRAY_TILE_HEIGHT_DEFAULT,b=r("gkx")("19871");function v(e,t){return t==null?[]:t.reduce(function(t,n){var r,o,a,i,l=n.id;if(l==null)return t;var s=e.find(function(e){return e.id===l});if(s==null)return t.concat(l);var u=(r=(o=n.unified_stories)==null||(o=o.nodes)==null?void 0:o.map(function(e){return e.id}))!=null?r:[],c=(a=(i=s.unified_stories)==null||(i=i.nodes)==null?void 0:i.map(function(e){return e.id}))!=null?a:[];if(u.length!==c.length)return t.concat(l);for(var d=0;d<c.length;d++)if(c[d]!==u[d])return t.concat(l);return t},[])}function S(e,t,n,a,i,l,s,u,c){var m,p=i==null?void 0:i.type;if(p==null)return null;var _=(m=e.id)!=null?m:s;return d.jsx(r("StoriesTrayTile.react"),{bucketCount:o("StoriesConstants").NAV_PANE_TOTAL_COUNT,bucketLength:t,bucketNode:e,gender:i.gender,hasSelfBucket:a,index:s,isFirstVideoTile:n,onPressIn:function(){u&&u(),R(s)},source:r("StoriesLoggingConstants").ACTION_SOURCE.TRAY,storiesTrayType:c,traySessionID:l},_)}S.displayName=S.name+" [from "+i.id+"]";function R(e){y.onReady(function(t){t.bumpEntityKey(4329,"fb_stories_web","stories_tray.pog_index_"+e,1)})}var L=e!==void 0?e:e=n("StoriesTrayRectangularBuckets_createTileUris.graphql");function E(e){var t,a=e.createTileRef,i=e.edges,l=e.hasNext,c=e.isLoadingNext,m=e.loadNext,y=e.refetch,R=e.storiesTrayType,E=e.traySessionID,k=o("CometRelay").useRelayEnvironment(),I=h(),T=I[0],D=I[1],x=o("CometRelay").useFragment(u!==void 0?u:u=n("StoriesTrayRectangularBuckets_buckets.graphql"),i),$=r("useStoriesTrayTilePrefetchProfileURI")(x),P=o("CometRelay").useFragment(L,a),N=g(!1),M=N[0],w=N[1],A=p(function(){!M&&!T&&(w(!0),D(function(){y(function(){w(!1)})}))},[T,M,y,D]),F=r("useStoriesIsUploading")(A),O=F||M||T,B=f(function(){for(var e=x||[],t=[],n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t},[x]),W=r("usePrevious")(B),q=f(function(){var e=B.find(function(e){var t,n,r,a,i=(t=e.first_story_to_show)==null?void 0:t.story_card_info;return(i==null?void 0:i.story_video_thumbnail)!=null&&!((n=(r=(a=e.first_story_to_show)==null?void 0:a.story_overlays)!=null?r:[])!=null&&n.some(function(e){return e.__typename===o("StoriesEnums").STORY_OVERLAY_TYPES.LIVE_VIDEO}))});return e==null?void 0:e.id},[B]);_(function(){var e=v(B,W);e.length!==0&&e.forEach(function(e){k.commitUpdate(function(t){var n=t.get(e);n!=null&&n.invalidateRecord()})})},[k,W,B]);var U=r("useStoriesBucketsIndexer")(B),V=f(function(){return U!=null?U:[]},[U]),H=r("usePrevious")(E),G=r("useStoriesBucketsLogger")(r("StoriesLoggingConstants").ACTION_SOURCE.TRAY,B),z=(t=V==null?void 0:V.length)!=null?t:0,j=!1;if(V!=null&&z>0){var K,Q,X=V[0],Y=(K=V[0])==null?void 0:K.type,J=(Q=X==null?void 0:X.isEmpty)!=null?Q:!0;Y===o("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF&&!J&&(j=!0)}var Z=5,ee=f(function(){for(var e=!0,t=[],n={entryPoint:"add_to_story_first_pog",sourceSurface:"newsfeed"},a=0;a<B.length;a++){var i=V[a];if((i==null?void 0:i.shouldShow)===!0){var l=i==null?void 0:i.type;if(l===o("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF){var s,u=B[a],c=(s=i==null?void 0:i.isEmpty)!=null?s:!0;t.splice(0,0,d.jsx(r("StoriesTrayCreateTile.react"),{fragmentProp:P,passthroughProps:n},a)),(!c||O)&&(t.splice(1,0,d.jsx(r("StoriesTrayTileSelf.react"),{bucketCount:o("StoriesConstants").NAV_PANE_TOTAL_COUNT,bucketLength:z,bucketNode:u,hasSelfBucket:j,index:a,isUploading:O,onPressIn:$,storiesTrayType:R,traySessionID:E},u.id)),e=!1)}else{var m=B[a],p=m.id===q,_=S(m,z,p,j,i,E,a,$,R);_!=null&&(t.push(_),(i==null?void 0:i.isEmpty)===!1&&(e=!1))}}}var f=Z-t.length;return{placeHoldersCount:f,shouldShowCreateCard:e,tiles:t}},[z,P,q,j,O,V,$,B,E]),te=ee.placeHoldersCount,ne=ee.shouldShowCreateCard,re=ee.tiles;_(function(){H!==E&&G(E)},[E,G,H]);var oe=s._(/*BTDS*/"Stories");if(ne)return r("StoriesTrayCreateCard.react")!=null?d.jsx(r("StoriesTrayCreateCard.react"),{}):null;var ae={type:"fixed",width:C*o("StoriesConstants").DEFAULT_ASPECT_RATIO};return d.jsxs("div",babelHelpers.extends({"aria-label":oe,className:{0:"x1n2onr6 xwya9rg x1y1aw1k xwib8y2",1:"x1n2onr6 xwya9rg x1y1aw1k xwib8y2 x4vbgl9"}[!!b<<0]},r("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{role:"region",style:{minHeight:C},children:[d.jsx(r("CometScreenReaderHeading.react"),{children:oe}),d.jsx(r("StoriesTrayHScrollContainer.react"),{cardWidth:ae,children:re,hasNext:l,hideArrows:te>0,isLoadingNext:c,loadNext:m,peek:!0})]}))}E.displayName=E.name+" [from "+i.id+"]",l.default=E}),226);
__d("StoriesTrayRectangularQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24955081580777517"}),null);
__d("StoriesTrayRectangularQuery.graphql",["VideoPlayerRelay_video$normalization.graphql","StoriesTrayRectangularQuery_facebookRelayOperation","StoriesShouldIncludeFbNotes.relayprovider","StoriesShouldEnableVideoAutoplay.relayprovider"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"blur"},t={defaultValue:null,kind:"LocalArgument",name:"bucketsToFetch"},r={defaultValue:null,kind:"LocalArgument",name:"cursor"},o={defaultValue:null,kind:"LocalArgument",name:"id"},a={defaultValue:null,kind:"LocalArgument",name:"isFbNotesIncluded"},i={defaultValue:null,kind:"LocalArgument",name:"scale"},l={defaultValue:null,kind:"LocalArgument",name:"trayType"},s=[{kind:"Variable",name:"id",variableName:"id"}],u={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"bucketsToFetch"},{kind:"Variable",name:"set_stories_tray_type",variableName:"trayType"}],m=[{kind:"Variable",name:"include_fb_note",variableName:"isFbNotesIncluded"}],p=[c],_={kind:"Variable",name:"scale",variableName:"scale"},f={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},g=[f],h={kind:"InlineFragment",selections:p,type:"Node",abstractKey:"__isNode"},y={kind:"InlineFragment",selections:p,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},C={kind:"InlineFragment",selections:p,type:"GenericAttachmentMedia",abstractKey:null},b={kind:"InlineFragment",selections:p,type:"MontageImage",abstractKey:null},v={kind:"InlineFragment",selections:p,type:"MontageVideo",abstractKey:null},S={kind:"Literal",name:"width",value:40},R=[_,S],L={alias:"profilePic",args:R,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:g,storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},k={alias:null,args:R,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:g,storageKey:null},I=[{kind:"Literal",name:"height",value:277},_,{kind:"Literal",name:"width",value:156}],T={alias:"coverImage",args:I,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:g,storageKey:null},D=[L,E,k,T],x=[{kind:"Literal",name:"height",value:40},_,S];return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularQuery",selections:[{alias:null,args:s,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"StoriesTrayRectangular_me"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,r,a,i,l,o,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider"}],kind:"Operation",name:"StoriesTrayRectangularQuery",selections:[{alias:null,args:s,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,c,{kind:"InlineFragment",selections:[{alias:null,args:d,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[u,{kind:"TypeDiscriminator",abstractKey:"__isStoryBucket"},c,{alias:null,args:m,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:p,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:[u],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"story_video_thumbnail",plural:!1,selections:[u,c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null},c,{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},_],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:g,storageKey:null}],type:"Photo",abstractKey:null},h,y,C,b,v],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},_,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:g,storageKey:null}],type:"Photo",abstractKey:null},h,y,C,b,v],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[u,{kind:"InlineFragment",selections:D,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:x,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:g,storageKey:null},E,{alias:null,args:x,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:g,storageKey:null},T],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:D,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[L,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},E,k,T,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:"unified_stories_with_notes",args:m,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},c],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null},c],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[c,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[u,h,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null},h],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null},y,C,b,v],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:I,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"thumbnail_frame_pts",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null},c],storageKey:null},{condition:"__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"story_video_thumbnail",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{args:[{kind:"Literal",name:"VideoPlayerRelay_video$playerSuborigin",value:"stories_video_preview"}],fragment:n("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},c],storageKey:null}]}],storageKey:null},{condition:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:[u,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileOverlays_story",fragmentName:"StoriesTrayTileNotesOverlay_overlay",fragmentPropName:"overlay",kind:"ModuleImport"}],type:"StoryOverlayFBNotesSticker",abstractKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:d,filters:["set_stories_tray_type"],handle:"connection",key:"StoriesTrayRectangular_unified_stories_buckets",kind:"LinkedHandle",name:"unified_stories_buckets"}],type:"User",abstractKey:null}],storageKey:null}]},params:{id:n("StoriesTrayRectangularQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider:n("StoriesShouldIncludeFbNotes.relayprovider"),__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider:n("StoriesShouldEnableVideoAutoplay.relayprovider")}}}})();a.exports=e}),null);
__d("StoriesTrayRectangular_me.graphql",["StoriesTrayRectangularQuery.graphql"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=["unified_stories_buckets"];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"bucketsToFetch"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{kind:"RootArgument",name:"isFbNotesIncluded"},{kind:"RootArgument",name:"scale"},{kind:"RootArgument",name:"trayType"}],kind:"Fragment",metadata:{connection:[{count:"bucketsToFetch",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"bucketsToFetch",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:n("StoriesTrayRectangularQuery.graphql"),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"StoriesTrayRectangular_me",selections:[{alias:"unified_stories_buckets",args:[{kind:"Variable",name:"set_stories_tray_type",variableName:"trayType"}],concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"__StoriesTrayRectangular_unified_stories_buckets_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_buckets"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"User",abstractKey:null}})();a.exports=e}),null);
__d("StoriesTrayRectangular.react",["CometRelay","FBLogger","StoriesTrayRectangularBuckets.react","StoriesTrayRectangular_me.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo,p=e!==void 0?e:e=n("StoriesTrayRectangular_me.graphql");function _(e){var t,n,a=o("react-compiler-runtime").c(13),i=e.storiesData,l=e.storiesTrayType,s=e.traySessionID;if(!i.me)throw r("FBLogger")("fb_stories_web").mustfixThrow("Expected current actor for StoriesRoot to be available");var c=i.me,d=o("CometRelay").usePaginationFragment(p,c),m=d.data,_=d.hasNext,g=d.isLoadingNext,h=d.loadNext,y=d.refetch,C=m,b;a[0]!==y?(b=function(t){y({},{fetchPolicy:"store-and-network",onComplete:t})},a[0]=y,a[1]=b):b=a[1];var v=b;C==null||(t=C.unified_stories_buckets)==null||t.edges;var S,R;if(a[2]!==(C==null||(n=C.unified_stories_buckets)==null?void 0:n.edges)){var L,E;R=((C==null||(L=C.unified_stories_buckets)==null?void 0:L.edges)||[]).map(f).filter(Boolean),a[2]=C==null||(E=C.unified_stories_buckets)==null?void 0:E.edges,a[3]=R}else R=a[3];S=R;var k=S,I;return a[4]!==_||a[5]!==g||a[6]!==h||a[7]!==c||a[8]!==k||a[9]!==v||a[10]!==l||a[11]!==s?(I=u.jsx(r("StoriesTrayRectangularBuckets.react"),{createTileRef:c,edges:k,hasNext:_,isLoadingNext:g,loadNext:h,refetch:v,storiesTrayType:l,traySessionID:s}),a[4]=_,a[5]=g,a[6]=h,a[7]=c,a[8]=k,a[9]=v,a[10]=l,a[11]=s,a[12]=I):I=a[12],I}function f(e){return e==null?void 0:e.node}l.default=_}),98);
__d("StoriesTrayRectangularRootQuery.graphql",["VideoPlayerRelay_video$normalization.graphql","StoriesTrayRectangularRootQuery_facebookRelayOperation","StoriesShouldIncludeFbNotes.relayprovider","StoriesShouldEnableVideoAutoplay.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:10,kind:"LocalArgument",name:"blur"},t={defaultValue:8,kind:"LocalArgument",name:"bucketsToFetch"},r={defaultValue:!1,kind:"LocalArgument",name:"isFbNotesIncluded"},o={defaultValue:null,kind:"LocalArgument",name:"scale"},a={defaultValue:null,kind:"LocalArgument",name:"trayType"},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l=[i],s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},u=[{kind:"Variable",name:"first",variableName:"bucketsToFetch"},{kind:"Variable",name:"set_stories_tray_type",variableName:"trayType"}],c=[{kind:"Variable",name:"include_fb_note",variableName:"isFbNotesIncluded"}],d=[s,i],m={kind:"Variable",name:"scale",variableName:"scale"},p={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},_=[p],f={kind:"InlineFragment",selections:l,type:"Node",abstractKey:"__isNode"},g={kind:"InlineFragment",selections:l,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},h={kind:"InlineFragment",selections:l,type:"GenericAttachmentMedia",abstractKey:null},y={kind:"InlineFragment",selections:l,type:"MontageImage",abstractKey:null},C={kind:"InlineFragment",selections:l,type:"MontageVideo",abstractKey:null},b={kind:"Literal",name:"width",value:40},v=[m,b],S={alias:"profilePic",args:v,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},L={alias:null,args:v,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},E=[{kind:"Literal",name:"height",value:277},m,{kind:"Literal",name:"width",value:156}],k={alias:"coverImage",args:E,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},I=[S,R,L,k],T=[{kind:"Literal",name:"height",value:40},m,b];return{fragment:{argumentDefinitions:[e,t,r,o,a],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularRootQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangular_me"},{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_createTileUris"}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:l,storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayRefresh_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,t,e,a,r,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider"}],kind:"Operation",name:"StoriesTrayRectangularRootQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[s,i,{kind:"InlineFragment",selections:[{alias:null,args:u,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s,{kind:"TypeDiscriminator",abstractKey:"__isStoryBucket"},i,{alias:null,args:c,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:[s],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"story_video_thumbnail",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null},i,{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},m],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:_,storageKey:null}],type:"Photo",abstractKey:null},f,g,h,y,C],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},m,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:_,storageKey:null}],type:"Photo",abstractKey:null},f,g,h,y,C],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[s,{kind:"InlineFragment",selections:I,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:T,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},R,{alias:null,args:T,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},k],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:I,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[S,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},R,L,k,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:"unified_stories_with_notes",args:c,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null},i],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[i,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[s,f,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null},f],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null},g,h,y,C],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:E,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"thumbnail_frame_pts",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null},i],storageKey:null},{condition:"__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"story_video_thumbnail",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{args:[{kind:"Literal",name:"VideoPlayerRelay_video$playerSuborigin",value:"stories_video_preview"}],fragment:n("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},i],storageKey:null}]}],storageKey:null},{condition:"__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:[s,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileOverlays_story",fragmentName:"StoriesTrayTileNotesOverlay_overlay",fragmentPropName:"overlay",kind:"ModuleImport"}],type:"StoryOverlayFBNotesSticker",abstractKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:u,filters:["set_stories_tray_type"],handle:"connection",key:"StoriesTrayRectangular_unified_stories_buckets",kind:"LinkedHandle",name:"unified_stories_buckets"},{alias:"profilePicture",args:[{kind:"Literal",name:"height",value:150},m,{kind:"Literal",name:"width",value:150}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:d,storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_refresh_stories_tray",storageKey:null}]}],storageKey:null}]},params:{id:n("StoriesTrayRectangularRootQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularRootQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__StoriesShouldIncludeFbNotesrelayprovider:n("StoriesShouldIncludeFbNotes.relayprovider"),__relay_internal__pv__StoriesShouldEnableVideoAutoplayrelayprovider:n("StoriesShouldEnableVideoAutoplay.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("useStoriesTrayRefresh_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStoriesTrayRefresh_viewer",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_refresh_stories_tray",storageKey:null}]}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("useStoriesTrayRefresh",["CometOnRefresh","CometRelay","react","react-compiler-runtime","useStoriesTrayRefresh_viewer.graphql","useStoriesTraySetShouldRefresh","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=u.useRef,p=u.useTransition,_=60*1e3;function f(t,a){var i=o("react-compiler-runtime").c(15),l=o("CometRelay").useFragment(e!==void 0?e:e=n("useStoriesTrayRefresh_viewer.graphql"),a),s=m(!1),u=p(),c=u[0],f=u[1],g;i[0]!==t?(g=function(){s.current!==!0&&(s.current=!0,window.setTimeout(function(){f(function(){t()})},0))},i[0]=t,i[1]=g):g=i[1];var h=g,y,C;i[2]!==c?(y=function(){s.current=c},C=[c],i[2]=c,i[3]=y,i[4]=C):(y=i[3],C=i[4]),d(y,C);var b=l==null?void 0:l.should_refresh_stories_tray,v=r("useStoriesTraySetShouldRefresh")(),S,R;i[5]!==h||i[6]!==v||i[7]!==b?(S=function(){b===!0&&(h(),v(!1))},R=[h,v,b],i[5]=h,i[6]=v,i[7]=b,i[8]=S,i[9]=R):(S=i[8],R=i[9]),d(S,R),o("CometOnRefresh").useOnRefresh(h);var L=m(!1),E=m(null),k;i[10]!==h?(k=function(){L.current&&h(),L.current=!1},i[10]=h,i[11]=k):k=i[11];var I=k,T;i[12]===Symbol.for("react.memo_cache_sentinel")?(T=function(){window.clearTimeout(E.current),E.current=window.setTimeout(function(){L.current=!0},_)},i[12]=T):T=i[12];var D=T,x;i[13]!==I?(x={onHidden:D,onVisible:I},i[13]=I,i[14]=x):x=i[14];var $=r("useVisibilityObserver")(x);return $}l.default=f}),98);
__d("StoriesTrayRectangularRoot.react",["CometErrorBoundary.react","CometHideableComponentExperiment.react","CometPlaceholder.react","CometRelay","FBUnifiedStoriesTrayTypeUtils.facebook","StoriesActorProvider.react","StoriesTrayErrorCardLazyLoaded.react","StoriesTrayRectangular.react","StoriesTrayRectangularRootQuery$Parameters","StoriesTrayRectangularRootQuery.graphql","WebPixelRatio","getCometNotesGating","justknobx","react","react-compiler-runtime","useRefetchablePreloadedQuery","useStoriesTrayRefresh","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useState,p=e!==void 0?e:e=n("StoriesTrayRectangularRootQuery.graphql");function _(e){var t,n=o("react-compiler-runtime").c(15),a=e.queries,l=m(g),s=l[0],c=r("useRefetchablePreloadedQuery")(r("StoriesTrayRectangularRootQuery$Parameters"),a.storiesTrayQueryReference),d=c[0],_=c[1],h=o("CometRelay").usePreloadedQuery(p,_),y=a.storiesTrayQueryReference.variables.trayType,C;n[0]!==y?(C=y!=null?o("FBUnifiedStoriesTrayTypeUtils.facebook").toJSEnum(y):null,n[0]=y,n[1]=C):C=n[1];var b=C,v;n[2]!==d||n[3]!==y?(v=function(){var e=o("WebPixelRatio").get(),t=r("justknobx")._("4943")?e*10:void 0;d({blur:t,bucketsToFetch:6,isFbNotesIncluded:o("getCometNotesGating").getIsNotesCreationDialogEnabled(),scale:e,trayType:y})},n[2]=d,n[3]=y,n[4]=v):v=n[4];var S=v,R=r("useStoriesTrayRefresh")(S,h==null?void 0:h.viewer),L=h==null||(t=h.viewer)==null||(t=t.actor)==null?void 0:t.id,E;n[5]!==h||n[6]!==b||n[7]!==s?(E=u.jsx(r("CometHideableComponentExperiment.react"),{callingSurface:"comet_tofu_stories_container",children:u.jsx(r("StoriesTrayRectangular.react"),{storiesData:h,storiesTrayType:b,traySessionID:s})}),n[5]=h,n[6]=b,n[7]=s,n[8]=E):E=n[8];var k;n[9]!==L||n[10]!==E?(k=u.jsx(r("CometErrorBoundary.react"),{fallback:f,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(r("StoriesActorProvider.react"),{actorID:L,children:E})})}),n[9]=L,n[10]=E,n[11]=k):k=n[11];var I;return n[12]!==k||n[13]!==R?(I=u.jsx("div",{ref:R,children:k}),n[12]=k,n[13]=R,n[14]=I):I=n[14],I}function f(){return u.jsx(r("StoriesTrayErrorCardLazyLoaded.react"),{})}f.displayName=f.name+" [from "+i.id+"]";function g(){return r("uuidv4")()}function h(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=u.jsx(_,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=h}),98);/*FB_PKG_DELIM*/
__d("AutoplayRulesEngine",[],(function(t,n,r,o,a,i){"use strict";var e=-2,l=-1,s=(function(){function t(t){this.$1=e,this.$2=t}var n=t.prototype;return n.evaluateAutoplay=function(t,n){var e=n(),r=l;if(t)for(var o=0;o<this.$2.length;o++){var a=this.$2[o](t);if(a!=="SKIP"){e=a,r=o;break}}return this.$1=r,e},n.getIndexOfLastWinningRule=function(){return this.$1},n.getRules=function(){return this.$2},t})();i.default=s}),66);
__d("CVCv3DisabledPlayerOrigins",[],(function(t,n,r,o,a,i){var e=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});i.default=e}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(t,n,r,o,a,i){var e=Object.freeze({LIVE_BEEPER:"live_beeper"});i.default=e}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1856513"),s=o("FalcoLoggerInternal").create("cvc_v3_http_event",e),u=s;l.default=u}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=r("guid")(),this.$3=(t!=null?t:"null")+"::"+(n!=null?n:"null"),this.$4=null,this.$5=null}var t=e.prototype;return t.isValidSubscription=function(){return!!this.$1},t.makeCVCv3StateUpdate=function(t,n,r,a){var e=null;t!=null&&!Number.isNaN(t)&&n!=null&&!Number.isNaN(n)&&(e={m:a,pf:Math.floor((n-t)*o("DateConsts").MS_PER_SEC),s:r,sa:Math.floor(t*o("DateConsts").MS_PER_SEC)});var i={pps:this.$4,ps:e,si:this.$2,so:this.$3,vi:this.$1};return this.$4=e,i},t.makeUnifiedVideoCVCUpdate=function(t,n,r,o,a){var e=this.makeCVCv3StateUpdate(t,n,r,o);return this.$5!=null&&(e.tk=this.$5),babelHelpers.extends({},e,a)},t.processUnifiedResponse=function(t){var e=t;return this.$5=e.tk,e},t.clearAnyPreviousContext=function(){this.$4=null},t.logHttpRequestSuccess=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:t!=null?t.toString():null,countable_id:e.$1}})},t.logHttpRequestFailure=function(t,n){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:t,duration_ms:n!=null?n.toString():null,countable_id:e.$1}})},t.logHttpRequestTimeout=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:t!=null?t.toString():null,countable_id:e.$1}})},t.logHttpResponseBad=function(t,n){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:t,duration_ms:n!=null?n.toString():null,countable_id:e.$1}})},t.logDebugInfo=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:t,countable_id:e.$1}})},e})();l.default=e}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("CometAudioManagerContexts").AudioApiContext);return e}l.useAudioApi=u}),98);
__d("CometFullScreen",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;return typeof r=="function"?r.call(t):(e||(e=n("Promise"))).reject()}function s(){var t=document.exitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitExitFullscreen;return typeof t=="function"?t.call(document):(e||(e=n("Promise"))).reject()}function u(){return(document.webkitFullscreenEnabled===!0||document.mozFullScreenEnabled===!0||document.msFullscreenEnabled===!0||document.fullscreenEnabled===!0)&&(typeof document.webkitExitFullscreen=="function"||typeof document.mozCancelFullScreen=="function"||typeof document.msExitFullscreen=="function"||typeof document.exitFullscreen=="function")}function c(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||null}function d(){return c()!=null}function m(){return["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"]}function p(e){var t=window.document,n=!1,r=!0;return m().forEach(function(o){t.addEventListener(o,e,{capture:n,passive:r})}),function(){m().forEach(function(r){t.removeEventListener(r,e,n)})}}i.requestFullScreen=l,i.exitFullScreen=s,i.isSupported=u,i.getFullScreenElement=c,i.isFullScreen=d,i.getFullScreenChangeEventNames=m,i.subscribeToFullScreenChangeEvent=p}),66);
__d("CometObjectFitContainer.react",["FBLogger","cr:964538","isStringNullOrEmpty","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={inner:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0},innerWithAspectRatio:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},outer:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0},outerWithAspectRatio:{height:"xt7dq6l",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(21),a=t.children,i=t.debugRole,l=t.innerInlineStyle,s=t.innerXStyle,d=t.outerInlineStyle,m=t.outerRef,p=t.outerXStyle,_=t.testid,f=r("isStringNullOrEmpty")(_)?void 0:_+"-outer",g=r("isStringNullOrEmpty")(_)?void 0:_+"-inner",h;n[0]!==i?(h={},n[0]=i,n[1]=h):h=n[1];var y;n[2]!==p?(y=(e||(e=r("stylex")))(c.outer,p),n[2]=p,n[3]=y):y=n[3];var C;n[4]!==i?(C={},n[4]=i,n[5]=C):C=n[5];var b;n[6]!==s?(b=(e||(e=r("stylex")))(c.inner,s),n[6]=s,n[7]=b):b=n[7];var v;n[8]!==a||n[9]!==l||n[10]!==C||n[11]!==b||n[12]!==g?(v=u.jsx("div",babelHelpers.extends({},C,{className:b,"data-testid":void 0,style:l,children:a})),n[8]=a,n[9]=l,n[10]=C,n[11]=b,n[12]=g,n[13]=v):v=n[13];var S;return n[14]!==d||n[15]!==m||n[16]!==h||n[17]!==y||n[18]!==v||n[19]!==f?(S=u.jsx("div",babelHelpers.extends({},h,{className:y,"data-testid":void 0,ref:m,style:d,children:v})),n[14]=d,n[15]=m,n[16]=h,n[17]=y,n[18]=v,n[19]=f,n[20]=S):S=n[20],S}function m(e){var t=o("react-compiler-runtime").c(13),n=e.children,a=e.contentAspectRatio,i=e.debugRole,l=e.objectFitMode,s=e.ref,m=e.testid,p=l===void 0?"CONTAINER_SIZE":l,_=a!=null&&isFinite(a)&&a>0?a:1.7777777777777777;if(p==="CONTAINER_WIDTH_BASED_ASPECT_RATIO"){var f=isFinite(_)&&_>0?100/_:100,g=f.toFixed(5)+"%",h;t[0]!==g?(h={paddingBottom:g},t[0]=g,t[1]=h):h=t[1];var y=h,C;return t[2]!==n||t[3]!==i||t[4]!==y||t[5]!==s||t[6]!==m?(C=u.jsx(d,{children:n,debugRole:i,innerXStyle:c.innerWithAspectRatio,outerInlineStyle:y,outerRef:s,outerXStyle:c.outerWithAspectRatio,testid:void 0}),t[2]=n,t[3]=i,t[4]=y,t[5]=s,t[6]=m,t[7]=C):C=t[7],C}else if(p==="CONTAINER_SIZE"){var b;return t[8]!==n||t[9]!==i||t[10]!==s||t[11]!==m?(b=u.jsx(d,{children:n,debugRole:i,outerRef:s,testid:void 0}),t[8]=n,t[9]=i,t[10]=s,t[11]=m,t[12]=b):b=t[12],b}else throw r("FBLogger")("comet_ui").mustfixThrow("Unsupported objectFitMode %s",p)}l.default=m}),98);
__d("CometVideoPlayerInstreamAdsFeedContextCardContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext({isWatchTab:!1,onNodeChangeFunc:null});function d(){return u(c)}l.CometVideoPlayerInstreamAdsFeedContextCardContext=c,l.useCometVideoPlayerInstreamAdsFeedContextCardContext=d}),98);
__d("VideoPlayerOnViewability.react",["DOMRectIsEqual","DOMRectReadOnly","VideoPlayerViewabilityConstants","emptyFunction","react","useIntersectionObserver","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo,p=c.useRef,_=10,f=[.25,.75,.99,1].concat(new Array(10).fill().map(function(e,t){return t/10}));function g(t){var n=t.viewportMargins,o=p(-1),a=p(-1),i=p(r("DOMRectReadOnly").fromRect({height:0,width:0,x:0,y:0})),l=p(null),s=p(null),c=-n.top+"px "+-n.right+"px "+-n.bottom+"px "+-n.left+"px",g=t.onVideoPlayerViewabilityInfoChange||r("emptyFunction"),h=_,y=d(function(e){if(e.time>a.current&&!r("DOMRectIsEqual")(e.boundingClientRect,i.current)){var t=e.boundingClientRect,n=t.height,o=t.width,s=t.x,u=t.y,c=l.current,d=r("DOMRectReadOnly").fromRect({height:n,width:o,x:s,y:u});if(i.current=d,a.current=e.time,c===null||c<=0||c<=r("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE)return;g({positionToViewport:d,visiblePercentage:c})}},[i,l,g]),C=d(function(e){if(e.time>o.current&&(e.intersectionRatio!==l.current||!r("DOMRectIsEqual")(e.boundingClientRect,i.current))){var t=e.boundingClientRect,n=t.height,u=t.width,c=t.x,d=t.y,m=e.intersectionRatio,p=r("DOMRectReadOnly").fromRect({height:n,width:u,x:c,y:d}),_=s.current,f=_,h=!1,y=Math.abs((_||0)*100-(m||0)*100);(m!==null&&y>=1||y>0&&m<(_||0))&&(f=m,s.current=m,h=!0),l.current=m,o.current=e.time;var C=i.current;if(i.current=p,a.current=e.time,!h&&r("DOMRectIsEqual")(C,p))return;f!==null&&g({positionToViewport:p,visiblePercentage:f})}},[a,i,l,g,o]),b=m(function(){for(var e=[],t=1;t<=h;t++)e.push("-"+(100-t/h*100)+"% 0% 0% 0%");return e},[h]),v=(e||(e=r("useUnsafeRef_DEPRECATED")))([]);v.current=[];for(var S=0;S<b.length;S++)v.current.push(d(r("useIntersectionObserver")(y,{root:null,rootMargin:b[S],threshold:f}),[b[S],f,r("useIntersectionObserver")]));var R=v.current.length,L=d(function(e){for(var t=0;t<R;t++)v.current[t](e)},[R,v]),E=d(r("useIntersectionObserver")(C,{root:null,rootMargin:c,threshold:f}),[C,c,f,r("useIntersectionObserver")]),k=d(function(e){E(e),L(e)},[E,L]);return u.jsx("div",{className:"x5yr21d x1uhb9sk xh8yej3",ref:k,children:u.Children.only(t.children)})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("renderVideoPlayerImplementation",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){if(e.typename==="VideoPlayerEmptyImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));if(e.typename==="VideoPlayerOzImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));if(e.typename==="VideoPlayerProgressiveImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));if(e.typename==="VideoPlayerNextgendashImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));throw e.typename,r("FBLogger")("comet_video_player").mustfixThrow('CoreVideoPlayer: Unrecognized implementation typename "%s".',e.typename)}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("useCreateVideoPlayerPassiveViewabilityInfo",["removeFromArray","useStable"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("useStable")(s)}function s(){var e=[],t=null;return{setVideoPlayerViewabilityInfo:function(r){t=r,e.forEach(u)},videoPlayerPassiveViewabilityInfo:{getCurrent:function(){return t},subscribe:function(n){return e.push(n),{remove:function(){r("removeFromArray")(e,n)}}}}}}function u(e){return e()}l.default=e}),98);
__d("useCometSize_DO_NOT_USE",["CometThrottle","ExecutionEnvironment","FBLogger","HiddenSubtreePassiveContext","react","useResizeObserver","useStable","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useContext,m=c.useEffect,p=c.useLayoutEffect,_=c.useRef,f=c.useState;function g(e){var t=e.setBoxStateStable,n=null,o=function(r){var e,o;((e=n)==null?void 0:e.height)===r.height&&((o=n)==null?void 0:o.width)===r.width||(n=r,t(r))},a=function(t){var e=t.getBoundingClientRect(),n=e.height,r=e.width;o({height:n,width:r})},i=r("CometThrottle")(function(e){var t=e.height,n=e.width;t===0&&n===0||o({height:t,width:n})},200,{leading:!0,trailing:!0});return{measure:a,onResizeThrottled:i}}function h(t,n){if(t===void 0&&(t=!1),n===void 0&&(n=!1),!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!t)throw r("FBLogger")("comet_ssr").blameToPreviousFile().mustfixThrow("useCometSize is not compatible with Server Rendering. This will break SSR! See https://fburl.com/wiki/xrzohrqb");var o=_(null),a=f(null),i=a[0],l=a[1],u=d(r("HiddenSubtreePassiveContext")),c=r("useStable")(function(){return g({setBoxStateStable:l})}),h=r("useResizeObserver")(c.onResizeThrottled),y=_(h);p(function(){y.current=h},[h]);var C=(s||(s=r("useUnsafeRef_DEPRECATED")))(function(e){e!==o.current&&(o.current=e,e!=null&&!n&&c.measure(e)),y.current(o.current)});return m(function(){if(u.getCurrentState().hidden){var e=u.subscribeToChanges(function(t){!t.hidden&&o.current!=null&&!n&&(c.measure(o.current),e.remove())});return function(){return e.remove()}}},[u,c]),m(function(){return function(){c.onResizeThrottled.cancel()}},[c]),[C.current,i]}l.default=h}),98);
__d("useObjectFitContainerDimensions",["CometObjectFitContainer.react","react","react-compiler-runtime","useCometSize_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=584;function c(e){return e==="video_home_inline"||e==="inline"?{height:u,width:u}:{height:1080,width:1920}}function d(e,t,n){var a=o("react-compiler-runtime").c(8),i=r("useCometSize_DO_NOT_USE")(t!=null?t:!1,n!=null?n:!1),l=i[0],u=i[1],d;a[0]!==u||a[1]!==e?(d=u!=null?u:c(e),a[0]=u,a[1]=e,a[2]=d):d=a[2];var m=d,p;a[3]!==l?(p=function(t){return s.jsx(r("CometObjectFitContainer.react"),{debugRole:null,objectFitMode:"CONTAINER_SIZE",ref:l,children:t})},a[3]=l,a[4]=p):p=a[4];var _;return a[5]!==m||a[6]!==p?(_=[m,p],a[5]=m,a[6]=p,a[7]=_):_=a[7],_}l.default=d}),98);
__d("videoPlayerUniqueID",["guid"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return"id-vpuid-"+(e!=null?e:r("guid")())}l.default=e}),98);
__d("CoreVideoPlayer.react",["ErrorMetadata","FBLogger","VideoPlayerOnViewability.react","VideoPlayerViewabilityContexts","cr:9824","createVideoStateHook","err","getVideoShareDownstreamSignalTracking","react","react-compiler-runtime","renderVideoPlayerImplementation","useCreateVideoPlayerPassiveViewabilityInfo","useObjectFitContainerDimensions","useStable","videoPlayerUniqueID"],(function(t,n,r,o,a,i,l){"use strict";var e=["implementations"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useRef;function p(e){var t=e.coreVideoPlayerProps,n=e.implementation,a=t.coreVideoPlayerMetaData,i=t.fullscreenController,l=t.isFullscreen,s=t.onCoreVideoStatesChanged,c=t.renderWithCoreVideoStates,p=t.trackingDataEncrypted,_=t.trackingNodes,f=t.viewportMarginsForViewability,g=r("useStable")(function(){return r("videoPlayerUniqueID")(a.videoPlayerUniqueIDOverride)});o("createVideoStateHook").useCleanupVideoStateHooks_INTERNAL(g);var h=m(0),y=r("useCreateVideoPlayerPassiveViewabilityInfo")(),C=y.setVideoPlayerViewabilityInfo,b=y.videoPlayerPassiveViewabilityInfo,v=r("useObjectFitContainerDimensions")(a.subOrigin,a.bypassUseCometSizeError,a.bypassMeasureOnMount),S=v[0],R=v[1],L=d(function(e){var t=e.implementationController,n=e.implementationExposedState;return c({implementationController:t,implementationExposedState:n,videoPlayerPassiveViewabilityInfo:b})},[c,b]),E=d(function(e){var t=e.implementationController,n=e.implementationExposedState;s&&s({implementationController:t,implementationExposedState:n,videoPlayerPassiveViewabilityInfo:b})},[s,b]),k=o("getVideoShareDownstreamSignalTracking").getVideoShareDownstreamSignalTrackingWithNumberStartTime(),I={accessToken:a.accessToken,dimensions:S,downstreamShareSignalTracking:k,instanceKey:g,playerImplementationInstanceCountRef:h,productAttribution:a.productAttribution,trackingDataEncrypted:p,trackingNodes:_},T={coreVideoPlayerMetaData:a,dimensions:S,fullscreenController:i,loggingMetaData:I,onExposedStateChanged:E,renderWithExposedState:L,videoPlayerPassiveViewabilityInfo:b};return R(u.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:l,children:u.jsx(r("VideoPlayerOnViewability.react"),{onVideoPlayerViewabilityInfoChange:C,viewportMargins:f,children:r("renderVideoPlayerImplementation")(n,T)})}))}p.displayName=p.name+" [from "+i.id+"]";function _(t){var a=o("react-compiler-runtime").c(6),i,l;if(a[0]!==t?(l=t.implementations,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]),l.length===0){var s,c,d,m,_=r("err")("No implementations given to CoreVideoPlayer");_.name="VideoPlayerNoImplementations",_.project="comet_video_player";var f=(s=_.metadata)!=null?s:new(r("ErrorMetadata"));_.metadata=f;var g=i.coreVideoPlayerMetaData.videoFBID;throw g!=null&&f.addEntry("COMET_VIDEO","VIDEO_ID",g),(c=r("FBLogger")("comet_video_player").catching(_)).mustfixThrow.apply(c,[(d=_.messageFormat)!=null?d:_.message].concat(_.messageFormat!=null?(m=_.messageParams)!=null?m:[]:[]))}var h;return a[3]!==i||a[4]!==l?(h=n("cr:9824")?u.jsx(n("cr:9824"),{CoreVideoPlayerWithOneImplementation:p,coreVideoPlayerProps:i,implementations:l}):u.jsx(p,{coreVideoPlayerProps:i,implementation:l[0]}),a[3]=i,a[4]=l,a[5]=h):h=a[5],h}l.default=_}),98);
__d("makeAudioSymbol",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t+"::"+e}i.default=e}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","createVideoStateHook","makeAudioSymbol","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useContext,d=u.useEffect,m=u.useId,p=u.useMemo,_=u.useRef,f=u.useState,g=o("createVideoStateHook").createVideoStateHook(),h=g.stateHook,y=.01;function C(){var e=o("react-compiler-runtime").c(5),t=(s||(s=o("VideoPlayerHooks"))).useController(),n;e[0]!==t?(n=function(){return t.getCurrentState().volume},e[0]=t,e[1]=n):n=e[1];var r=f(n),a=r[0],i=r[1],l,u;return e[2]!==t?(l=function(){var e=t.subscribe(function(){var e=t.getCurrentState().volume;i(function(t){return e===0||e===1||Math.abs(t-e)>y?e:t})});return i(t.getCurrentState().volume),function(){e.remove()}},u=[t],e[2]=t,e[3]=l,e[4]=u):(l=e[3],u=e[4]),d(l,u),a}function b(){"use no memo";var e=h(!1),t=e[0],n=e[1],a=m(),i=(s||(s=o("VideoPlayerHooks"))).useInstanceKey(),l=p(function(){return r("makeAudioSymbol")(a,i)},[a,i]),u=o("CometAudioManagerHooks").useAudioApi(),g=_(u);d(function(){g.current=u},[u]);var y=s.useController(),b=s.useLastPlayReason(),v=s.useLastMuteReason(),S=s.useMuted(),R=C(),L=r("usePrevious")(R),E=s.usePaused(),k=c(o("CometAudioManagerContexts").CometAudioLocalScopeContext),I=c(o("CometAudioManagerContexts").CometAudioGroupContext),T=o("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),D=s.useVolumeSetting(),x=p(function(){return(I==null?void 0:I.groupID)||o("CometAudioManagerContexts").makeAudioGroupID()},[I==null?void 0:I.groupID]),$=f(!0),P=$[0],N=$[1],M=_(!0),w=_(null),A=f(function(){return r("CometThrottle")(function(e){g.current&&g.current.update(e)},50,{leading:!0,trailing:!0})}),F=A[0],O=p(function(){return{audioLocalScope:k,controller:y,groupID:x,instanceKey:i,lastMuteReason:v,lastPlayReason:b,muted:S,paused:E,previousVolume:L,symbol:l,videoPlayerPortalingPlaceInfo:T,volume:R}},[k,y,x,i,v,b,S,E,L,l,T,R]);d(function(){if(D!=null&&!t){var e=w.current!==D;(M.current||e)&&(M.current=!1,w.current=D,y.setVolume(D),n(!0))}},[y,t,n,D]);var B=p(function(){return I||{allowSound:P,groupID:x,setAllowSound:N}},[I,P,x,N]),W=_(B),q=_(!1);d(function(){if(u&&!q.current){q.current=!0;try{u.register(O,W.current)}finally{q.current=!1}}return function(){u&&u.unregister(l,x)}},[u,O,x,l]),d(function(){u&&F(O)},[u,O,F]),d(function(){return function(){F&&F.cancel&&F.cancel()}},[F]);var U=_(!1),V=_(null);return d(function(){var e=V.current!==P;if(!P&&g.current&&!U.current&&e){U.current=!0;try{y.setMuted(!0,"audio_manager_initiated"),V.current=P}finally{U.current=!1}}},[P,g,y]),null}l.default=b}),98);
__d("VideoPlayerAutoplayHooks",["FBLogger","VideoPlayerAutoplayContexts","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("VideoPlayerAutoplayContexts").AutoplayApiContext);if(e==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?");return e}function c(){return s(o("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}l.useAutoplayApi=u,l.useVideoAutoplayLocalScope=c}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:1453865"))!=null?e:{useVideoPlayerDebugAPI:r("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:r("emptyFunction"),useVideoPlayerDebugInfo:r("emptyFunction").thatReturns(null)};l.default=s}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(t,n,r,o,a,i){"use strict";function e(){return"ALLOW"}e.displayName="evaluateVideoAutoplayDefaultRule",i.default=e}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t+"::"+e}i.default=e}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(8),n=c(e),a;t[0]!==e?(a=function(){return new(r("AutoplayRulesEngine"))(e)},t[0]=e,t[1]=a):a=t[1];var i=d(a),l=i[0],s=i[1],m,p;t[2]!==e?(m=function(){n.current!==e&&s(function(){return new(r("AutoplayRulesEngine"))(e)})},p=[e],t[2]=e,t[3]=m,t[4]=p):(m=t[3],p=t[4]),u(m,p);var _,f;return t[5]!==l?(_=function(){n.current=l.getRules()},f=[l],t[5]=l,t[6]=_,t[7]=f):(_=t[6],f=t[7]),u(_,f),l}l.default=m}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(t,n,r,o,a,i,l){"use strict";var e;l.useVideoPlayerExtendedPassiveViewabilityInfo=(e||(e=o("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo,l.useVideoPlayerPassiveViewabilityInfo=e.useVideoPlayerPassiveViewabilityInfo,l.useVideoPlayerViewabilityInfo=e.useVideoPlayerViewabilityInfo}),98);
__d("useEventCallbackOn",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){var r=o("react-compiler-runtime").c(5),a,i;r[0]!==n||r[1]!==t||r[2]!==e?(a=function(){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}},i=[e,t,n],r[0]=n,r[1]=t,r[2]=e,r[3]=a,r[4]=i):(a=r[3],i=r[4]),s(a,i)}l.default=u}),98);
__d("useIsBackgrounded",["emptyFunction","react","useEventCallbackOn"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState;function d(){var e=t.document;return typeof e.hidden!="undefined"?"visibilitychange":typeof e.mozHidden!="undefined"?"mozvisibilitychange":typeof e.msHidden!="undefined"?"msvisibilitychange":typeof e.webkitHidden!="undefined"?"webkitvisibilitychange":"visibilitychange"}function m(){var e=t.document;return typeof e.hidden!="undefined"?e.hidden:typeof e.mozHidden!="undefined"?e.mozHidden:typeof e.msHidden!="undefined"?e.msHidden:typeof e.webkitHidden!="undefined"?e.webkitHidden:!1}var p=d();function _(e){var n=t.document.hasFocus?t.document.hasFocus():!0,r=m();return r||(e?!1:!n)}function f(){return m()}function g(e){"use no memo";var n=(e==null?void 0:e.noPauseOnBlurOrFocus)===!0,o=c(function(){return _(n)}),a=o[0],i=o[1],l=c(function(){return f()}),s=l[0],d=l[1],m=!!e&&e.scrollTerminatesHiddenOrBlurred===!0,g=u(function(){i(_(n)),d(f())},[i,n]),h=g,y=u(function(){var e=_(n);e&&m&&a&&i(!1)},[a,n,m]);return n&&(h=r("emptyFunction")),r("useEventCallbackOn")(t.window,"blur",h),r("useEventCallbackOn")(t.window,"focus",h),r("useEventCallbackOn")(t.document,p,g),r("useEventCallbackOn")(t.window,"scroll",y),{isDocumentHidden:s,isDocumentHiddenOrBlurred:a}}l.default=g}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useInterval"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState,u=5e3;function c(){var e=o("react-compiler-runtime").c(2),t=d,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t(),e[0]=n):n=e[0];var a=s(n),i=a[0],l=a[1],c;return e[1]===Symbol.for("react.memo_cache_sentinel")?(c=function(){return l(t())},e[1]=c):c=e[1],r("useInterval")(c,u),i}function d(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidth(r("VideoPlayerOzWWWGlobalConfig"))}l.default=c}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.startTransition,d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useRef,f=u.useState;function g(e){"use no memo";var t=(s||(s=o("VideoPlayerHooks"))).useAdClientToken(),n=s.useAutoplayGatingResult(),a=s.useBroadcastStatus(),i=s.useEnded(),l=s.useIsFrozenPassive(),u=s.useLastPauseReason(),g=s.useLastPlayReason(),h=s.useMuted(),y=s.usePaused(),C=d(r("HiddenSubtreePassiveContext")),b=!t,v=(e==null?void 0:e.noPauseOnBlurOrFocus)===!0||o("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1),S=r("useIsBackgrounded")({noPauseOnBlurOrFocus:v,scrollTerminatesHiddenOrBlurred:b}),R=S.isDocumentHidden,L=S.isDocumentHiddenOrBlurred,E=r("useVideoPlayerBandwidthEstimate")(),k=o("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),I=o("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo(),T=f(C.getCurrentState().backgrounded),D=T[0],x=T[1],$=f(C.getCurrentState().hidden),P=$[0],N=$[1];m(function(){var e=function(){c(function(){var e=C.getCurrentState();N(e.hidden),x(e.backgrounded)})},t=C.subscribeToChanges(e);return e(),function(){t.remove()}},[C,x,N]);var M=f(function(){return l.getCurrentState()}),w=M[0],A=M[1];m(function(){var e=l.subscribeToChanges(function(e){A(e)}),t=l.getCurrentState();return A(t),function(){e.remove()}},[l,A]);var F=p(function(){return{adClientToken:t,autoplayGatingResult:n,bandwidthEstimate:E,broadcastStatus:a,controllerIsFrozen:w,currentSubtreeIsBackgrounded:D,currentSubtreeIsHidden:P,ended:i,hiddenSubtreePassive:C,isDocumentHidden:R,isDocumentHiddenOrBlurred:L,isFrozenPassive:l,lastPauseReason:u,lastPlayReason:g,muted:h,paused:y,videoPlayerExtendedPassiveViewabilityInfo:I,videoPlayerPassiveViewabilityInfo:k}},[t,n,E,a,w,D,P,i,C,R,L,l,u,g,h,y,I,k]),O=f(F),B=O[0],W=O[1],q=_(B);return m(function(){q.current=B},[B]),m(function(){var e=!1;for(var t in F)if(Object.prototype.hasOwnProperty.call(F,t)&&F[t]!==q.current[t]){e=!0;break}e&&W(F)},[F,W]),B}l.default=g}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","react-compiler-runtime","useAutoplayRulesEngine","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useId,_=u.useMemo,f=u.useRef,g=u.useState;function h(){var e=o("react-compiler-runtime").c(70),t=p(),n=(s||(s=o("VideoPlayerHooks"))).useCanAutoplay(),a=s.useInstanceKey(),i,l;e[0]!==t||e[1]!==a?(l=r("makeSelectedAutoplayVideoSymbol")(t,a),e[0]=t,e[1]=a,e[2]=l):l=e[2],i=l;var u=i,c=f(u),_,h;e[3]!==u?(_=function(){c.current=u},h=[u],e[3]=u,e[4]=_,e[5]=h):(_=e[4],h=e[5]),m(_,h);var y=d(r("HiddenSubtreePassiveContext")),C=s.useController(),b=f(!1),v=o("useConcurrentAutoplayManagementAPI").useAutoplayControlID(),S,R;e[6]!==v||e[7]!==C?(S=function(){o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[ASSUME CONTROL] "+v),C.registerControllingComponent(v)},R=[C,v],e[6]=v,e[7]=C,e[8]=S,e[9]=R):(S=e[8],R=e[9]),m(S,R);var L=s.useVideoPlayerPassiveViewabilityInfo(),E=s.usePaused(),k=f(E),I=o("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),T=f(I),D,x;e[10]!==I?(D=function(){T.current=I},x=[I],e[10]=I,e[11]=D,e[12]=x):(D=e[11],x=e[12]),m(D,x);var $;e[13]!==C||e[14]!==L?($=function(){var e=C.getCurrentState(),t=e.lastPlayReason,n=e.paused,o=k.current;k.current=n;var a=L==null?void 0:L.getCurrent();if(a){var i=a.visiblePercentage,l=!n&&n!==o,s=i<r("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&i>0;T.current.disableScrollBeforePlayWhenOffscreen!==!0&&l&&t==="user_initiated"&&s&&(b.current=!0)}},e[13]=C,e[14]=L,e[15]=$):$=e[15];var P=$,N=f(P),M,w;e[16]!==P?(w=function(){N.current=P},M=[P],e[16]=P,e[17]=M,e[18]=w):(M=e[17],w=e[18]),m(w,M);var A,F;e[19]!==C||e[20]!==P?(A=function(){var e=C.subscribe(function(){P()});return function(){e.remove()}},F=[C,P],e[19]=C,e[20]=P,e[21]=A,e[22]=F):(A=e[21],F=e[22]),m(A,F);var O;e[23]!==I.noPauseOnBlurOrFocus?(O={noPauseOnBlurOrFocus:I.noPauseOnBlurOrFocus},e[23]=I.noPauseOnBlurOrFocus,e[24]=O):O=e[24];var B=r("useVideoAutoplayState")(O),W=r("useAutoplayRulesEngine")(I.autoplayLocalRules),q=r(n==="allow"?"evaluateVideoAutoplayDefaultAllowRule":"evaluateVideoAutoplayDefaultIgnoreRule"),U;e[25]!==q?(U=function(){return q},e[25]=q,e[26]=U):U=e[26];var V=g(U),H=V[0],G=V[1],z=g(null),j=z[0],K=z[1],Q;e[27]!==W||e[28]!==q||e[29]!==B?(Q=function(){return W.evaluateAutoplay(B,q)},e[27]=W,e[28]=q,e[29]=B,e[30]=Q):Q=e[30];var X=g(Q),Y=X[0],J=X[1],Z=g(null),ee=Z[0],te=Z[1],ne=f(Y),re=o("VideoPlayerAutoplayHooks").useAutoplayApi(),oe=f(re),ae,ie;e[31]!==re?(ae=function(){oe.current=re},ie=[re],e[31]=re,e[32]=ae,e[33]=ie):(ae=e[32],ie=e[33]),m(ae,ie);var le=n!=="dangerously_disable_autoplay_management",se,ue;e[34]!==re||e[35]!==I||e[36]!==C||e[37]!==y||e[38]!==a||e[39]!==le||e[40]!==u?(se=function(){return re.register(u,a,I,C,y,le),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:ne.current}}),function(){re.unregister(u),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:ne.current}})}},ue=[re,I,C,y,a,le,u],e[34]=re,e[35]=I,e[36]=C,e[37]=y,e[38]=a,e[39]=le,e[40]=u,e[41]=se,e[42]=ue):(se=e[41],ue=e[42]),m(se,ue);var ce,de;e[43]!==re||e[44]!==v||e[45]!==W||e[46]!==C||e[47]!==q||e[48]!==y||e[49]!==j||e[50]!==ee||e[51]!==u||e[52]!==B||e[53]!==L?(ce=function(){var e=function(){var e=W.evaluateAutoplay(B,q);ne.current=e;var t=W.getRules(),n=W.getIndexOfLastWinningRule(),a=n>=0?t[n]:q,i=L&&L.getCurrent(),l=C.getCurrentState(),s=l.paused;if((ee===null||ee!==e)&&(J(e),te(e)),e==="PAUSE"&&!s&&C.isControllingComponent(v)){var d=!0;if(N.current(),b.current){b.current=!1;var m=i==null?void 0:i.positionToViewport;m&&C.scrollIntoView(m.top<0),d=!1}if(d){var p="[PAUSE] via short-circuit on "+(a.displayName||a.name)+".";o("CoreVideoPlayerAutoplayClientUtils").log(c.current,p),C.pause("autoplay_initiated"),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:e}})}}(j===null||j!==a)&&(G(function(){return a}),K(function(){return a}),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:e}})),o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[DECISION: "+e+"] from "+(a.displayName||a.name)),i&&re.update(u,e,i)},t=y.subscribeToChanges(function(e){y.getCurrentState().hidden||y.getCurrentState().backgrounded?C.isControllingComponent(v)||C.unregisterControllingComponent(v):C.registerControllingComponent(v)}),n=L?L.subscribe(function(){y.getCurrentState().hidden||y.getCurrentState().backgrounded?C.isControllingComponent(v)||C.unregisterControllingComponent(v):C.registerControllingComponent(v),e()}):null;return e(),function(){t.remove(),n&&n.remove()}},de=[re,v,W,C,q,y,j,ee,G,J,K,te,u,B,L],e[43]=re,e[44]=v,e[45]=W,e[46]=C,e[47]=q,e[48]=y,e[49]=j,e[50]=ee,e[51]=u,e[52]=B,e[53]=L,e[54]=ce,e[55]=de):(ce=e[54],de=e[55]),m(ce,de);var me,pe;e[56]!==v||e[57]!==Y||e[58]!==C?(me=function(){var e=C.isControllingComponent(v),t=C.getCurrentState(),n=t.paused;o("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(Y,ne.current,n,e)&&(o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[PAUSE] the video for "+Y),C.pause("autoplay_initiated"),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:oe.current.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:Y}}))},pe=[Y,C,v],e[56]=v,e[57]=Y,e[58]=C,e[59]=me,e[60]=pe):(me=e[59],pe=e[60]),m(me,pe);var _e,fe;e[61]!==v||e[62]!==C?(_e=function(){return function(){o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[RELEASE CONTROL] "+v),C.unregisterControllingComponent(v)}},fe=[C,v],e[61]=v,e[62]=C,e[63]=_e,e[64]=fe):(_e=e[63],fe=e[64]),m(_e,fe);var ge;return e[65]!==H||e[66]!==Y||e[67]!==I||e[68]!==u?(ge={applicableRule:H,autoplayApiRef:oe,autoplayDecision:Y,autoplayLocalScope:I,symbol:u},e[65]=H,e[66]=Y,e[67]=I,e[68]=u,e[69]=ge):ge=e[69],r("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition(ge),null}l.default=h}),98);
__d("DOMContainer.react",["invariant","isNode","react"],(function(t,n,r,o,a,i,l,s){var e=["display"],u,c=u||(u=o("react")),d=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.containerNode=null,e.setContainerNode=function(t){e.containerNode=t;var n=e.props.containerRef;typeof n=="function"&&n(t)},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getDOMChild=function(){var e=this.props.children;return r("isNode")(e)||s(0,1533),e},o.shouldComponentUpdate=function(t){return t.children!==this.props.children},o.componentDidMount=function(){var e=this.containerNode;e!=null&&e.appendChild(this.getDOMChild())},o.componentDidUpdate=function(t){var e=this.containerNode;if(e!=null){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(this.getDOMChild())}},o.render=function(){var t=this.props,n=t.display,r=babelHelpers.objectWithoutPropertiesLoose(t,e),o=n==="block"?"div":"span";return c.jsx(o,babelHelpers.extends({},r,{ref:this.setContainerNode,children:void 0}))},n})(c.Component);d.defaultProps={display:"inline"},l.default=d}),98);
__d("CoreVideoPlayerFitParentContainer.react",["DOMContainer.react","cr:964538","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.ref,r=e.children,a=e.debugRole,i=e.testid,l;t[0]!==a?(l=null,t[0]=a,t[1]=l):l=t[1];var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",t[2]=u):u=t[2];var c;return t[3]!==r||t[4]!==n||t[5]!==l||t[6]!==i?(c=s.jsx("div",babelHelpers.extends({},l,{className:u,"data-testid":void 0,ref:n,children:r})),t[3]=r,t[4]=n,t[5]=l,t[6]=i,t[7]=c):c=t[7],c}function c(e){var t=o("react-compiler-runtime").c(7),n=e.ref,a=e.debugRole,i=e.domElement,l;t[0]!==a?(l=null,t[0]=a,t[1]=l):l=t[1];var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",t[2]=u):u=t[2];var c;return t[3]!==i||t[4]!==n||t[5]!==l?(c=s.jsx(r("DOMContainer.react"),babelHelpers.extends({},l,{className:u,display:"block",ref:n,children:i})),t[3]=i,t[4]=n,t[5]=l,t[6]=c):c=t[6],c}function d(e){var t=e.debugRole,n=document.createElement("div");return n.className="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",n}l.CoreVideoPlayerFitParentContainer=u,l.CoreVideoPlayerFitParentDOMContainer=c,l.createFitParentContainerDiv=d}),98);
__d("normalizeVideoPlayerLoopCount",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o=0;if(e==null){var a=t!=null&&t&&n!=null?n:0;a===-1?o=-1:a<0||!Number.isFinite(a)||Math.floor(a)!==a?o=0:a===0&&t===!0?o=-1:o=a}else if(e===-1||e===Number.POSITIVE_INFINITY)o=-1;else{if(e<0||!Number.isFinite(e)||Math.floor(e)!==e)throw r("FBLogger")("comet_video_player").mustfixThrow("Invalid loopingCount: %s",e);o=e}return o}l.default=e}),98);
__d("CoreVideoPlayerMetaData",["VideoPlayerAudioAvailabilityInfo","normalizeVideoPlayerLoopCount"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!=null&&isFinite(e)&&e>0?e:0}var s=[];function u(t){var n,a,i,l,u=t.sideLoadCaptionsExpected===!0||t.sideLoadCaptionsUrl!=null,c=t.isLiveStreaming===!0;return babelHelpers.extends({},t,{audioAvailabilityInfo:(n=t.audioAvailabilityInfo)!=null?n:o("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault,autoplayGatingResult:t.autoplayGatingResult!=null?t.autoplayGatingResult:"unknown",canAutoplay:t.canAutoplay!=null?t.canAutoplay:"allow",desiredLatencyMs:(a=t.desiredLatencyMs)!=null?a:0,inbandCaptionsExpected:c,initialRepresentationIds:(i=t.initialRepresentationIds)!=null?i:s,isNCSR:!!t.isNCSR,isPremiumMusicVideo:!!t.isPremiumMusicVideo,latencyToleranceMs:(l=t.latencyToleranceMs)!=null?l:0,loopCount:r("normalizeVideoPlayerLoopCount")(t.loopCount),sideLoadCaptionsExpected:u,startTimestamp:e(t.startTimestamp)})}l.applyDefaultsToCoreVideoPlayerMetaData=u}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.children,r=e.isDesktopPictureInPicture,a=e.isFullscreen,i=e.videoPlayerPassiveViewabilityInfo,l;t[0]!==n||t[1]!==a?(l=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=l):l=t[2];var u;t[3]!==r||t[4]!==l?(u=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:r,children:l}),t[3]=r,t[4]=l,t[5]=u):u=t[5];var c;return t[6]!==u||t[7]!==i?(c=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:i,children:u}),t[6]=u,t[7]=i,t[8]=c):c=t[8],c}l.default=u}),98);
__d("useBlockCappedListItemWhenPlayingVideo",["CappedListItemContext","err","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e,t){var n,a=o("react-compiler-runtime").c(4),i=(n=u(r("CappedListItemContext")))==null?void 0:n.registerBlocker,l,s;a[0]!==e||a[1]!==i?(l=function(){if(i){var t=null,n=null,r=function(){var r=e.getCurrentState().playing;if(r!==t&&(t=r,n&&(n(),n=null),r)){var o;n=i({reason:"playing_video",source:o})}};r();var o=e.subscribe(r);return function(){o.remove(),n&&(n(),n=null)}}},s=[e,i],a[0]=e,a[1]=i,a[2]=l,a[3]=s):(l=a[2],s=a[3]),c(l,s)}l.default=d}),98);
__d("useDisableVirtualizationWhenPlayingVideo",["VirtualizationContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(5),a=u(r("VirtualizationContext")),i,l;n[0]!==a||n[1]!==e||n[2]!==t?(i=function(){if(a!=null){var n=a.createFlag,r=a.createPin,o=null,i=null,l=function(){i==null&&(i=n("HAS_PLAYER","playerInstanceKey: "+t));var a=e.getCurrentState();a.playing||a.stalling?o||(o=r("player "+t+" is playing")):a.isFullscreen?o||(o=r("player "+t+" is fullscreen")):(o==null||o(),o=null)};l();var s=e.subscribe(l);return function(){s.remove(),i==null||i(),i=null,o==null||o(),o=null}}},l=[e,t,a],n[0]=a,n[1]=e,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),c(i,l)}l.default=d}),98);
__d("wrapWithContextProviders",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){return t.reduceRight(function(e,t){return t(e)},e)}u.displayName=u.name+" [from "+i.id+"]";function c(e,t){return function(n){return s.jsx(e.Provider,{value:t,children:n})}}l.wrapWithContextProviders=u,l.makeRenderProviderFn=c}),98);
__d("VideoPlayerComponentContainer.react",["CometSSRRenderingStateHooks","CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:6094","react","react-compiler-runtime","setTimeout","stylex","useBlockCappedListItemWhenPlayingVideo","useDisableVirtualizationWhenPlayingVideo","wrapWithContextProviders"],(function(t,n,r,o,a,i,l){"use strict";var e=["children"],s,u,c,d,m=u||(u=o("react")),p=u,_=p.useCallback,f=p.useEffect,g=p.useRef,h=p.useState,y={default:{height:"x5yr21d",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},hiddenCursor:{cursor:"xjfk50j",$$css:!0}};function C(e){var t=o("react-compiler-runtime").c(10),n=g(e),a,i;t[0]!==e?(a=function(){n.current=e},i=[e],t[0]=e,t[1]=a,t[2]=i):(a=t[1],i=t[2]),f(a,i);var l=h(!1),s=l[0],u=l[1],c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=function(){var e=null;return{cleanup:function(){e&&e()},pingNotIdle:function(){e&&e(),u(!1);var t=r("setTimeout")(function(){u(!0)},n.current);e=function(){r("clearTimeout")(t),e=null}}}},t[3]=c):c=t[3];var d=h(c),m=d[0],p=m.cleanup,_=m.pingNotIdle,y,C;t[4]!==p?(y=function(){return p},C=[p],t[4]=p,t[5]=y,t[6]=C):(y=t[5],C=t[6]),f(y,C);var b;return t[7]!==s||t[8]!==_?(b={isIdle:s,pingNotIdle:_},t[7]=s,t[8]=_,t[9]=b):b=t[9],b}function b(){var e=o("react-compiler-runtime").c(18),t=h(!1),n=t[0],r=t[1],a=C(3e3),i=a.isIdle,l=a.pingNotIdle,s;e[0]!==l?(s=function(){r(!0),l()},e[0]=l,e[1]=s):s=e[1];var u=s,c;e[2]!==l?(c=function(){r(!1),l()},e[2]=l,e[3]=c):c=e[3];var d=c,m;e[4]!==l?(m=function(){r(!0),l()},e[4]=l,e[5]=m):m=e[5];var p=m,_;e[6]!==l?(_=function(){l()},e[6]=l,e[7]=_):_=e[7];var f=_,g;e[8]!==l?(g=function(){l()},e[8]=l,e[9]=g):g=e[9];var y=g,b;return e[10]!==n||e[11]!==i||e[12]!==f||e[13]!==u||e[14]!==d||e[15]!==p||e[16]!==y?(b={isHovering:n,isIdle:i,onMouseDown:f,onMouseEnter:u,onMouseLeave:d,onMouseMove:p,onMouseUp:y},e[10]=n,e[11]=i,e[12]=f,e[13]=u,e[14]=d,e[15]=p,e[16]=y,e[17]=b):b=e[17],b}function v(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=b(),i=a.isHovering,l=a.isIdle,u=a.onMouseDown,p=a.onMouseEnter,_=a.onMouseLeave,f=a.onMouseMove,g=a.onMouseUp,h=(d||(d=o("VideoPlayerHooks"))).useIsFullscreen(),C=h&&l&&y.hiddenCursor,v;t[0]!==C?(v=(s||(s=r("stylex")))(y.default,C),t[0]=C,t[1]=v):v=t[1];var S;t[2]!==n||t[3]!==l?(S=m.jsx((c||(c=o("VideoPlayerContexts"))).VideoPlayerMouseIdleContext.Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=S):S=t[4];var R;t[5]!==i||t[6]!==S?(R=m.jsx((c||(c=o("VideoPlayerContexts"))).VideoPlayerMouseHoverContext.Provider,{value:i,children:S}),t[5]=i,t[6]=S,t[7]=R):R=t[7];var L;return t[8]!==u||t[9]!==p||t[10]!==_||t[11]!==f||t[12]!==g||t[13]!==v||t[14]!==R?(L=m.jsx("div",babelHelpers.extends({className:v},r("CometVisualCompletionAttributes").IGNORE,{onMouseDown:u,onMouseEnter:p,onMouseLeave:_,onMouseMove:f,onMouseUp:g,children:R})),t[8]=u,t[9]=p,t[10]=_,t[11]=f,t[12]=g,t[13]=v,t[14]=R,t[15]=L):L=t[15],L}function S(t){var a=o("react-compiler-runtime").c(77),i,l;a[0]!==t?(i=t.children,l=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=l,u=s.implementationController,d=s.implementationExposedState,p=s.videoPlayerPassiveViewabilityInfo,_=d.activeCaptions,f=d.activeEmsgBoxes,g=d.availableAudioTracks,h=d.availableVideoQualities,y=d.availableVideoTracks,C=d.bufferEnd,b=d.captionDisplayStyle,S=d.captionsLoaded,R=d.captionsVisible,L=d.currentAudioTrackID,E=d.currentVideoQuality,k=d.currentVideoTrackID,I=d.duration,T=d.ended,D=d.error,x=d.inbandCaptionsAutogenerated,$=d.inPlayStalling,P=d.internal_coreVideoPlayerMetaData,N=d.isAbrEnabled,M=d.isDesktopPictureInPicture,w=d.isFullscreen,A=d.isLiveRewindActive,F=d.isLiveRewindAvailable,O=d.lastMuteReason,B=d.lastPauseReason,W=d.lastPlayedTimeMs,q=d.lastPlayReason,U=d.latencyLevel,V=d.loopCount,H=d.loopCurrent,G=d.muted,z=d.paused,j=d.playerInstanceKey,K=d.playerVersion,Q=d.playerViewportDimensions,X=d.playing,Y=d.seekableRanges,J=d.seeking,Z=d.selectedVideoQuality,ee=d.stalling,te=d.streamInterrupted,ne=d.targetAudioTrack,re=d.targetPlaybackRate,oe=d.targetVideoQuality,ae=d.videoFBID,ie=d.videoPixelsAspectRatio,le=d.volume,se=d.watchTimeMs,ue=P.adClientToken,ce=P.audioAvailabilityInfo,de=P.autoplayGatingResult,me=P.broadcastStatus,pe=P.canAutoplay,_e=P.disableDubbing,fe=P.initialTracePolicy,ge=P.isNCSR,he=P.isPremiumMusicVideo,ye=P.volumeSetting,Ce;a[3]!==i?(Ce=m.jsx(v,{children:i}),a[3]=i,a[4]=Ce):Ce=a[4];var be=Ce,ve;a[5]!==u||a[6]!==l||a[7]!==p?(ve={controller:u,coreVideoStates:l,videoPlayerPassiveViewabilityInfo:p},a[5]=u,a[6]=l,a[7]=p,a[8]=ve):ve=a[8],n("cr:6094")(j,ve);var Se;if(a[9]!==_||a[10]!==f||a[11]!==ue||a[12]!==ce||a[13]!==de||a[14]!==g||a[15]!==h||a[16]!==y||a[17]!==me||a[18]!==C||a[19]!==pe||a[20]!==b||a[21]!==S||a[22]!==R||a[23]!==u||a[24]!==L||a[25]!==E||a[26]!==k||a[27]!==Q||a[28]!==_e||a[29]!==I||a[30]!==T||a[31]!==D||a[32]!==$||a[33]!==x||a[34]!==fe||a[35]!==j||a[36]!==N||a[37]!==M||a[38]!==w||a[39]!==A||a[40]!==F||a[41]!==ge||a[42]!==he||a[43]!==O||a[44]!==B||a[45]!==q||a[46]!==W||a[47]!==U||a[48]!==V||a[49]!==H||a[50]!==G||a[51]!==z||a[52]!==K||a[53]!==X||a[54]!==Y||a[55]!==J||a[56]!==Z||a[57]!==ee||a[58]!==te||a[59]!==ne||a[60]!==re||a[61]!==oe||a[62]!==ae||a[63]!==ie||a[64]!==p||a[65]!==le||a[66]!==ye||a[67]!==se||a[68]!==be){var Re;a[70]!==M||a[71]!==w||a[72]!==p?(Re=function(t){return m.jsx(r("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:M,isFullscreen:w,videoPlayerPassiveViewabilityInfo:p,children:t})},a[70]=M,a[71]=w,a[72]=p,a[73]=Re):Re=a[73],Se=o("wrapWithContextProviders").wrapWithContextProviders(be,[o("wrapWithContextProviders").makeRenderProviderFn((c||(c=o("VideoPlayerContexts"))).VideoFBIDContext,ae),o("wrapWithContextProviders").makeRenderProviderFn(c.StallingContext,ee),o("wrapWithContextProviders").makeRenderProviderFn(c.PlayingContext,X),o("wrapWithContextProviders").makeRenderProviderFn(c.InPlayStallingContext,$),o("wrapWithContextProviders").makeRenderProviderFn(c.BufferEndContext,C),o("wrapWithContextProviders").makeRenderProviderFn(c.LastMuteReasonContext,O),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPlayReasonContext,q),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPauseReasonContext,B),o("wrapWithContextProviders").makeRenderProviderFn(c.PausedContext,z),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentAudioTrackIDContext,L),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentVideoTrackIDContext,k),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentVideoQualityContext,E),o("wrapWithContextProviders").makeRenderProviderFn(c.MutedContext,G),o("wrapWithContextProviders").makeRenderProviderFn(c.TargetAudioTrackContext,ne),o("wrapWithContextProviders").makeRenderProviderFn(c.VolumeContext,le),o("wrapWithContextProviders").makeRenderProviderFn(c.SelectedVideoQualityContext,Z),o("wrapWithContextProviders").makeRenderProviderFn(c.SeekingContext,J),o("wrapWithContextProviders").makeRenderProviderFn(c.DurationContext,I),o("wrapWithContextProviders").makeRenderProviderFn(c.EndedContext,T),o("wrapWithContextProviders").makeRenderProviderFn(c.ErrorContext,D),o("wrapWithContextProviders").makeRenderProviderFn(c.DimensionsContext,Q||null),o("wrapWithContextProviders").makeRenderProviderFn(c.InstanceKeyContext,j),o("wrapWithContextProviders").makeRenderProviderFn(c.ControllerContext,u),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableAudioTracksContext,g),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableVideoQualitiesContext,h),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableVideoTracksContext,y),o("wrapWithContextProviders").makeRenderProviderFn(c.PlayerVersionContext,K),o("wrapWithContextProviders").makeRenderProviderFn(c.IsAbrEnabledContext,N),o("wrapWithContextProviders").makeRenderProviderFn(c.TargetVideoQualityContext,oe),o("wrapWithContextProviders").makeRenderProviderFn(c.PlaybackRateContext,re),o("wrapWithContextProviders").makeRenderProviderFn(c.CanAutoplayContext,pe),o("wrapWithContextProviders").makeRenderProviderFn(c.VolumeSettingContext,ye),o("wrapWithContextProviders").makeRenderProviderFn(c.AutoplayGatingResultContext,de),o("wrapWithContextProviders").makeRenderProviderFn(c.BroadcastStatusContext,me),o("wrapWithContextProviders").makeRenderProviderFn(c.LoopCountContext,V),o("wrapWithContextProviders").makeRenderProviderFn(c.LoopCurrentContext,H),o("wrapWithContextProviders").makeRenderProviderFn(c.AdClientTokenContext,ue),o("wrapWithContextProviders").makeRenderProviderFn(c.ActiveCaptionsContext,_),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionsVisibleContext,R),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionDisplayStyleContext,b),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionsLoadedContext,S),o("wrapWithContextProviders").makeRenderProviderFn(c.InbandCaptionsAutogeneratedContext,x),o("wrapWithContextProviders").makeRenderProviderFn(c.StreamInterruptedContext,te),o("wrapWithContextProviders").makeRenderProviderFn(c.WatchTimeContext,se),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPlayedTimeContext,W),o("wrapWithContextProviders").makeRenderProviderFn(c.SeekableRangesContext,Y),o("wrapWithContextProviders").makeRenderProviderFn(c.LatencyLevelContext,U),o("wrapWithContextProviders").makeRenderProviderFn(c.IsLiveRewindActiveContext,A),o("wrapWithContextProviders").makeRenderProviderFn(c.IsLiveRewindAvailableContext,F),o("wrapWithContextProviders").makeRenderProviderFn(c.AudioAvailabilityInfoContext,ce),o("wrapWithContextProviders").makeRenderProviderFn(c.IsNCSRContext,ge),o("wrapWithContextProviders").makeRenderProviderFn(c.IsPremiumMusicVideoContext,he),o("wrapWithContextProviders").makeRenderProviderFn(c.InitialTracePolicyContext,fe),o("wrapWithContextProviders").makeRenderProviderFn(c.ActiveEmsgBoxesContext,f),o("wrapWithContextProviders").makeRenderProviderFn(c.VideoPixelsAspectRatioContext,ie!=null?ie:null),o("wrapWithContextProviders").makeRenderProviderFn(c.DisableDubbingContext,_e!=null?_e:!1),Re]),a[9]=_,a[10]=f,a[11]=ue,a[12]=ce,a[13]=de,a[14]=g,a[15]=h,a[16]=y,a[17]=me,a[18]=C,a[19]=pe,a[20]=b,a[21]=S,a[22]=R,a[23]=u,a[24]=L,a[25]=E,a[26]=k,a[27]=Q,a[28]=_e,a[29]=I,a[30]=T,a[31]=D,a[32]=$,a[33]=x,a[34]=fe,a[35]=j,a[36]=N,a[37]=M,a[38]=w,a[39]=A,a[40]=F,a[41]=ge,a[42]=he,a[43]=O,a[44]=B,a[45]=q,a[46]=W,a[47]=U,a[48]=V,a[49]=H,a[50]=G,a[51]=z,a[52]=K,a[53]=X,a[54]=Y,a[55]=J,a[56]=Z,a[57]=ee,a[58]=te,a[59]=ne,a[60]=re,a[61]=oe,a[62]=ae,a[63]=ie,a[64]=p,a[65]=le,a[66]=ye,a[67]=se,a[68]=be,a[69]=Se}else Se=a[69];var Le=Se;r("useBlockCappedListItemWhenPlayingVideo")(u,j),r("useDisableVirtualizationWhenPlayingVideo")(u,j);var Ee=o("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating(),ke=Ee?void 0:j,Ie;return a[74]!==Le||a[75]!==ke?(Ie=m.jsx("div",{"data-instancekey":ke,"data-testid":void 0,children:Le}),a[74]=Le,a[75]=ke,a[76]=Ie):Ie=a[76],Ie}var R=m.memo(S);l.default=R}),98);
__d("GlobalVideoPortsRenderers.react",["CoreVideoPlayer.react","VideoPlayerContexts","VideoPlayerPortalingPlaceInfoProvider.react","emptyFunction","fb-error","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useState,p=r("emptyFunction").thatReturns(null);function _(e){var t=o("react-compiler-runtime").c(14),n=e.coreVideoPlayerMetaData,a=e.currentPlaceID,i=e.currentVideoID,l=e.fullscreenController,s=e.implementations,c=e.isFullscreen,d=e.onCoreVideoStatesChanged,m=e.previousPlaceMetaData,_=e.trackingDataEncrypted,f=e.trackingNodes,g=e.viewportMarginsForViewability,h;t[0]!==n||t[1]!==l||t[2]!==s||t[3]!==c||t[4]!==d||t[5]!==_||t[6]!==f||t[7]!==g?(h=u.jsx(r("CoreVideoPlayer.react"),{coreVideoPlayerMetaData:n,fullscreenController:l,implementations:s,isFullscreen:c,onCoreVideoStatesChanged:d,renderWithCoreVideoStates:p,trackingDataEncrypted:_,trackingNodes:f,viewportMarginsForViewability:g}),t[0]=n,t[1]=l,t[2]=s,t[3]=c,t[4]=d,t[5]=_,t[6]=f,t[7]=g,t[8]=h):h=t[8];var y;return t[9]!==a||t[10]!==i||t[11]!==m||t[12]!==h?(y=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:a,currentVideoID:i,portalingEnabled:!0,previousPlaceMetaData:m,thisPlaceID:a,children:h}),t[9]=a,t[10]=i,t[11]=m,t[12]=h,t[13]=y):y=t[13],y}function f(e){var t=o("react-compiler-runtime").c(11),n=e.currentPlaceID,r=e.currentVideoID,a=e.previousPlaceMetaData,i=e.renderPlaceholder,l=e.thisPlaceID,c=e.videoPixelsAspectRatio,d;t[0]!==i?(d=i!=null?i():null,t[0]=i,t[1]=d):d=t[1];var m;t[2]!==d||t[3]!==c?(m=u.jsx((s||(s=o("VideoPlayerContexts"))).VideoPixelsAspectRatioContext.Provider,{value:c,children:d}),t[2]=d,t[3]=c,t[4]=m):m=t[4];var p;return t[5]!==n||t[6]!==r||t[7]!==a||t[8]!==m||t[9]!==l?(p=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:n,currentVideoID:r,portalingEnabled:!0,previousPlaceMetaData:a,thisPlaceID:l,children:m}),t[5]=n,t[6]=r,t[7]=a,t[8]=m,t[9]=l,t[10]=p):p=t[10],p}function g(e){var t=e.currentPlaceID,n=e.currentVideoID,a=e.injectCoreVideoStatesRef,i=e.previousPlaceMetaData,l=e.renderComponents,s=e.thisPlaceID,c=m(null),p=c[0],_=c[1],f=m(null),g=f[0],h=f[1];if(d(function(){return a.current=function(e,t){if(e!=null){var n,o,a=r("fb-error").getErrorSafe(e),i=r("fb-error").err.apply(r("fb-error"),[(n=a.messageFormat)!=null?n:a.message].concat(a.messageFormat!=null?(o=a.messageParams)!=null?o:[]:[]));i.name=i.errorName=a.name,i.metadata=a.metadata,i.stack=a.stack,i.taalOpcodes=a.taalOpcodes,i.cause=e,h(i)}_(t)},function(){a.current=null}},[a]),s===t){if(g!=null)throw g;return p!=null?u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:t,currentVideoID:n,portalingEnabled:!0,previousPlaceMetaData:i,thisPlaceID:s,children:l(p)}):null}else return null}g.displayName=g.name+" [from "+i.id+"]",l.GlobalVideoPortsPlayerRenderer=_,l.GlobalVideoPortsPlaceholderRenderer=f,l.GlobalVideoPortsVideoComponentsRenderer=g}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","FBLogger","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.current!=null&&o("CometFullScreen").getFullScreenElement()===e.current}function s(t){var n=[];function a(){n.forEach(function(e){e()})}var i=null;return{getIsFullscreen:function(){return e(t)},requestSetIsFullscreen:function(a,i){var n=t.current;if(n==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Requested full screen while the element is not present");o("CometFullScreen").isSupported()?a!==e(t)&&(a===!0?o("CometFullScreen").requestFullScreen(n):a===!1&&o("CometFullScreen").exitFullScreen()):a&&i!=null&&typeof i.webkitEnterFullScreen=="function"?i.webkitEnterFullScreen():!a&&i!=null&&typeof i.webkitExitFullScreen=="function"&&i.webkitExitFullscreen()},subscribe:function(t){return n.length===0&&i==null&&(i=o("CometFullScreen").subscribeToFullScreenChangeEvent(a)),n.push(t),{remove:function(){r("removeFromArray")(n,t),n.length===0&&i!=null&&(i(),i=null)}}}}}l.createFullscreenController=s}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(5),a=r("usePrevious")(e),i,l;n[0]!==e||n[1]!==a||n[2]!==t?(i=function(){e!==a&&a!==null&&a&&!e&&t(o("GlobalVideoPortsID").makeVideoID())},l=[e,a,t],n[0]=e,n[1]=a,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),u(i,l)}function m(e,t){var n=c(null),r=n[0],a=n[1];e!==r&&(r!==null&&r&&!e&&t(o("GlobalVideoPortsID").makeVideoID()),a(e))}var p=r("gkx")("24382")?m:d;function _(e){var t=o("react-compiler-runtime").c(11),n=e.portalingEnabled,r=e.portalingFromVideoID,a=o("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),i=o("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),l=o("GlobalVideoPortsContexts").useGlobalVideoPortsState(),s=i!=null&&l!=null,d=(s||a!=null)&&(n||r!=null),m=c(g),_=m[0],h=c(f),y=h[0],C=h[1],b=d&&n&&r!=null,v=b&&r!=null?r:y;p(b,C);var S,R;t[0]!==s||t[1]!==d||t[2]!==a?(S=function(){d&&!s&&a&&a()},R=[s,d,a],t[0]=s,t[1]=d,t[2]=a,t[3]=S,t[4]=R):(S=t[3],R=t[4]),u(S,R);var L;return t[5]!==d||t[6]!==v||t[7]!==i||t[8]!==l||t[9]!==_?(L={canBecomePortableLater:d,currentVideoID:v,globalVideoPortsManager:i,globalVideoPortsState:l,thisPlaceID:_},t[5]=d,t[6]=v,t[7]=i,t[8]=l,t[9]=_,t[10]=L):L=t[10],L}function f(){return o("GlobalVideoPortsID").makeVideoID()}function g(){return o("GlobalVideoPortsID").makePlaceID()}l.useRegenerateUniqueVideoID_exportedForTest=p,l.useVideoPlayerPortalingPlaceState=_}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","deepEquals","getOwnObjectValues","gkx","react","react-compiler-runtime","shallowEqual"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useRef,p=u.useState;function _(e){var t=e.coreVideoPlayerMetaData,n=e.currentVideoID,o=e.fullscreenController,a=e.globalVideoPortsManager,i=e.implementations,l=e.injectCoreVideoStatesRef,s=e.isFullscreen,u=e.portablePlaceContainer,c=e.portablePlaceMetaData,m=e.renderComponents,p=e.renderPlaceholder,_=e.thisPlaceID,f=e.trackingDataEncrypted,g=e.trackingNodes,h=e.viewportMarginsForViewability;d(function(){a.addOrUpdatePlace({coreVideoPlayerMetaData:t,fullscreenController:o,implementations:i,injectCoreVideoStatesRef:l,isFullscreen:s,portablePlaceContainer:u,portablePlaceID:_,portablePlaceMetaData:c,portableVideoID:n,renderComponents:m,renderPlaceholder:p,trackingDataEncrypted:f,trackingNodes:g,viewportMarginsForViewability:h})},[].concat(r("getOwnObjectValues")(t),[n,o,s,a,u],r("getOwnObjectValues")(c||{}),[m,p,_,f,g,h])),d(function(){return function(){a.removePlace({portablePlaceID:_})}},[a,_])}function f(e){var t=o("react-compiler-runtime").c(20),n=e.coreVideoPlayerMetaData,a=e.currentVideoID,i=e.fullscreenController,l=e.globalVideoPortsManager,s=e.implementations,u=e.injectCoreVideoStatesRef,c=e.isFullscreen,p=e.portablePlaceContainer,_=e.portablePlaceMetaData,f=e.renderComponents,g=e.renderPlaceholder,h=e.thisPlaceID,y=e.trackingDataEncrypted,C=e.trackingNodes,b=e.viewportMarginsForViewability,v=m(null),S=m(null),R;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==s||t[5]!==u||t[6]!==c||t[7]!==p||t[8]!==_||t[9]!==f||t[10]!==g||t[11]!==h||t[12]!==y||t[13]!==C||t[14]!==b?(R=function(){var e={coreVideoPlayerMetaData:n,implementations:s,isFullscreen:c,portablePlaceID:h,portablePlaceMetaData:_,portableVideoID:a,trackingDataEncrypted:y,trackingNodes:C,viewportMarginsForViewability:b},t={fullscreenController:i,injectCoreVideoStatesRef:u,portablePlaceContainer:p,renderComponents:f,renderPlaceholder:g};r("deepEquals")(e,v.current)&&r("shallowEqual")(t,S.current)||(v.current=e,S.current=t,l.addOrUpdatePlace(babelHelpers.extends({},e,t)))},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=s,t[5]=u,t[6]=c,t[7]=p,t[8]=_,t[9]=f,t[10]=g,t[11]=h,t[12]=y,t[13]=C,t[14]=b,t[15]=R):R=t[15],d(R);var L,E;t[16]!==l||t[17]!==h?(L=function(){return function(){v.current=null,S.current=null,l.removePlace({portablePlaceID:h})}},E=[l,h],t[16]=l,t[17]=h,t[18]=L,t[19]=E):(L=t[18],E=t[19]),d(L,E)}var g=r("gkx")("17097")?f:_;function h(e){var t,n,a,i,l=o("react-compiler-runtime").c(17),u=e.currentPlaceID,d=e.currentVideoID,_=e.globalVideoPortsManager,f=e.globalVideoPortsState_DEPRECATED,h=e.isFullscreen,C=e.previousPlaceMetaData,b=e.renderComponents,v=e.thisPlaceID,S=p(y),R=S[0],L=m(null),E;l[0]!==R||l[1]!==e?(E=babelHelpers.extends({},e,{injectCoreVideoStatesRef:L,portablePlaceContainer:R}),l[0]=R,l[1]=e,l[2]=E):E=l[2],g(E);var k=c(r("BaseContextualLayerAnchorRootContext")),I=m(null),T=h?I:k,D;l[3]!==R||l[4]!==v?(D=s.jsx(o("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:R},v),l[3]=R,l[4]=v,l[5]=D):D=l[5];var x=f!=null?(t=(n=_.getCurrentPlaceStateForVideo(f,d))==null?void 0:n.portablePlaceID)!=null?t:null:u,$=f!=null?(a=(i=_.getPortableVideoState(f,d))==null?void 0:i.previousPlaceMetaData)!=null?a:null:C,P;l[6]!==d||l[7]!==b||l[8]!==x||l[9]!==$||l[10]!==v?(P=s.jsx(o("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:x,currentVideoID:d,injectCoreVideoStatesRef:L,previousPlaceMetaData:$,renderComponents:b,thisPlaceID:v}),l[6]=d,l[7]=b,l[8]=x,l[9]=$,l[10]=v,l[11]=P):P=l[11];var N;l[12]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("div",{ref:I}),l[12]=N):N=l[12];var M;return l[13]!==T||l[14]!==D||l[15]!==P?(M=s.jsxs(r("BaseContextualLayerAnchorRootContext").Provider,{value:T,children:[D,P,N]}),l[13]=T,l[14]=D,l[15]=P,l[16]=M):M=l[16],M}function y(){return o("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})}l.default=h}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","FBLogger","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","react-compiler-runtime","useStable","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=c.useState,_={bottom:0,left:0,right:0,top:0};function f(e){var t=o("react-compiler-runtime").c(5),n=e.ref,r=e.children,a=e.debugRole,i=e.testid,l;return t[0]!==r||t[1]!==a||t[2]!==n||t[3]!==i?(l=u.jsx(o("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:a,ref:n,testid:void 0,children:r}),t[0]=r,t[1]=a,t[2]=n,t[3]=i,t[4]=l):l=t[4],l}function g(t){var n,a=o("react-compiler-runtime").c(69),i=t.coreVideoPlayerMetaData,l=t.implementations,s=t.portalingEnabled,c=t.portalingFromVideoID,g=t.portalingPlaceMetaData,y=t.renderComponents,C=t.renderPlaceholder,b;a[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0],m(h,b);var v;a[1]!==c?(v=c!=null?o("GlobalVideoPortsID").ensureVideoID(c):null,a[1]=c,a[2]=v):v=a[2];var S=v;c!=null&&S==null&&r("FBLogger")("comet_video_player").mustfix("The provided portalingFromVideoID (%s) does not look like such an ID. The video player will not use portaling until a valid ID is provided",String(c));var R;a[3]!==s||a[4]!==S?(R={portalingEnabled:s,portalingFromVideoID:S},a[3]=s,a[4]=S,a[5]=R):R=a[5];var L=o("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState(R),E=L.canBecomePortableLater,k=L.currentVideoID,I=L.globalVideoPortsManager,T=L.globalVideoPortsState,D=L.thisPlaceID,x=d(r("BaseViewportMarginsContext")),$=(e||(e=r("useUnsafeRef_DEPRECATED")))(null),P;a[6]!==$?(P=function(){return o("VideoPlayerFullscreenController").createFullscreenController($)},a[6]=$,a[7]=P):P=a[7];var N=r("useStable")(P),M;a[8]!==N?(M=N.getIsFullscreen(),a[8]=N,a[9]=M):M=a[9];var w=p(M),A=w[0],F=w[1],O,B;a[10]!==N?(O=function(){var e=N.subscribe(function(){var e=N.getIsFullscreen();F(e)});return F(N.getIsFullscreen()),function(){e.remove()}},B=[N,F],a[10]=N,a[11]=O,a[12]=B):(O=a[11],B=a[12]),m(O,B);var W=d(r("CometTrackingNodesContext")),q;a[13]!==W?(q=W.join(""),a[13]=W,a[14]=q):q=a[14];var U=q,V=d(r("CometTrackingCodeContext")),H=(n=V.encrypted_tracking[0])!=null?n:"",G=A?_:x,z="comet-video-player-place"+(i.videoFBID!=null?"-vid-"+i.videoFBID:"");if(!E){var j;a[15]!==i||a[16]!==G||a[17]!==N||a[18]!==l||a[19]!==A||a[20]!==y||a[21]!==H||a[22]!==U?(j=u.jsx(r("CoreVideoPlayer.react"),{coreVideoPlayerMetaData:i,fullscreenController:N,implementations:l,isFullscreen:A,renderWithCoreVideoStates:y,trackingDataEncrypted:H,trackingNodes:U,viewportMarginsForViewability:G}),a[15]=i,a[16]=G,a[17]=N,a[18]=l,a[19]=A,a[20]=y,a[21]=H,a[22]=U,a[23]=j):j=a[23];var K;a[24]!==k||a[25]!==j||a[26]!==D?(K=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:D,currentVideoID:k,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:D,children:j}),a[24]=k,a[25]=j,a[26]=D,a[27]=K):K=a[27];var Q;return a[28]!==K||a[29]!==z||a[30]!==$?(Q=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:K}),a[28]=K,a[29]=z,a[30]=$,a[31]=Q):Q=a[31],Q}if(I&&T){var X;if(a[32]!==k||a[33]!==I||a[34]!==T){var Y,J;X=(Y=(J=I.getCurrentPlaceStateForVideo(T,k))==null?void 0:J.portablePlaceID)!=null?Y:null,a[32]=k,a[33]=I,a[34]=T,a[35]=X}else X=a[35];var Z;if(a[36]!==k||a[37]!==I||a[38]!==T){var ee,te;Z=(ee=(te=I.getPortableVideoState(T,k))==null?void 0:te.previousPlaceMetaData)!=null?ee:null,a[36]=k,a[37]=I,a[38]=T,a[39]=Z}else Z=a[39];var ne;a[40]!==i||a[41]!==k||a[42]!==G||a[43]!==N||a[44]!==I||a[45]!==l||a[46]!==A||a[47]!==g||a[48]!==y||a[49]!==C||a[50]!==Z||a[51]!==X||a[52]!==D||a[53]!==H||a[54]!==U?(ne=u.jsx(r("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:i,currentPlaceID:X,currentVideoID:k,fullscreenController:N,globalVideoPortsManager:I,globalVideoPortsState_DEPRECATED:null,implementations:l,isFullscreen:A,portablePlaceMetaData:g,previousPlaceMetaData:Z,renderComponents:y,renderPlaceholder:C,thisPlaceID:D,trackingDataEncrypted:H,trackingNodes:U,viewportMarginsForViewability:G}),a[40]=i,a[41]=k,a[42]=G,a[43]=N,a[44]=I,a[45]=l,a[46]=A,a[47]=g,a[48]=y,a[49]=C,a[50]=Z,a[51]=X,a[52]=D,a[53]=H,a[54]=U,a[55]=ne):ne=a[55];var re;return a[56]!==ne||a[57]!==z||a[58]!==$?(re=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:ne}),a[56]=ne,a[57]=z,a[58]=$,a[59]=re):re=a[59],re}else{var oe,ae=(oe=i.videoPixelsAspectRatio)!=null?oe:null,ie;a[60]!==k||a[61]!==C||a[62]!==ae||a[63]!==D?(ie=u.jsx(o("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:k,previousPlaceMetaData:null,renderPlaceholder:C,thisPlaceID:D,videoPixelsAspectRatio:ae}),a[60]=k,a[61]=C,a[62]=ae,a[63]=D,a[64]=ie):ie=a[64];var le;return a[65]!==ie||a[66]!==z||a[67]!==$?(le=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:ie}),a[65]=ie,a[66]=z,a[67]=$,a[68]=le):le=a[68],le}}function h(){return y}function y(){}l.default=g}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={initialTracePolicy:null,routeTracePolicy:null},d=s.createContext(c);function m(){return u(d)}l.VideoPlayerTracePolicyContext=d,l.useVideoPlayerTracePolicy=m}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(12),n=e.children,r=e.initialTracePolicy,a=e.routeTracePolicy,i=d(r),l=i[0],u=i[1],m=d(a),p=m[0],_=m[1],f,g;t[0]!==r||t[1]!==a||t[2]!==l||t[3]!==p?(f=function(){l!==r&&u(r),p!==a&&_(a)},g=[r,a,l,p],t[0]=r,t[1]=a,t[2]=l,t[3]=p,t[4]=f,t[5]=g):(f=t[4],g=t[5]),c(f,g);var h;t[6]!==l||t[7]!==p?(h={initialTracePolicy:l,routeTracePolicy:p},t[6]=l,t[7]=p,t[8]=h):h=t[8];var y;return t[9]!==n||t[10]!==h?(y=s.jsx(o("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:h,children:n}),t[9]=n,t[10]=h,t[11]=y):y=t[11],y}l.default=m}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(14),n=e.children,a=e.coreVideoPlayerMetaData,i=e.implementations,l=e.portalingEnabled,u=e.portalingFromVideoID,c=e.portalingPlaceMetaData,d=e.portalingRenderPlaceholder,m;t[0]!==n?(m=function(t){return s.jsx(r("VideoPlayerComponentContainer.react"),babelHelpers.extends({},t,{children:n}))},t[0]=n,t[1]=m):m=t[1];var p=m,_;t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==p?(_=s.jsx(r("VideoPlayerPortalingPlace.react"),{coreVideoPlayerMetaData:a,implementations:i,portalingEnabled:l,portalingFromVideoID:u,portalingPlaceMetaData:c,renderComponents:p,renderPlaceholder:d}),t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=c,t[7]=d,t[8]=p,t[9]=_):_=t[9];var f;return t[10]!==a.initialTracePolicy||t[11]!==a.routeTracePolicy||t[12]!==_?(f=s.jsx(r("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:a.initialTracePolicy,routeTracePolicy:a.routeTracePolicy,children:_}),t[10]=a.initialTracePolicy,t[11]=a.routeTracePolicy,t[12]=_,t[13]=f):f=t[13],f}l.default=c}),98);
__d("FDSResizeUpFilled20Icon",["cr:14081"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14081")}),98);
__d("FDSResizeUpFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("517763"),20),u=e;l.default=u}),98);
__d("GraphQLVideoAutoplayGatingResult",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=e!=null?e:"unknown",o=t||null;return{autoplayGatingResult:r,autoplaySetting:o,canAutoplay:n!=null?n:!1}}i.makeGraphQLVideoAutoplayGatingResult=e}),66);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.values(r("CVCv3DisabledPlayerOrigins")),s=Object.values(r("CVCv3DisabledPlayerSubOrigins")),u=10,c=(function(){function t(t,n,o,a,i,l){var u=this;this.$1=new(r("CVCv3SubscriptionHelper"))(t,n,o),this.$5=i,this.$6=null,this.$9=null,this.$10=!this.$1.isValidSubscription(),this.$3=null,this.$2=null;var c=n!=null?e.includes(n):!1,d=o!=null?s.includes(o):!1;!c&&!d&&(this.$3=a,this.$11=l,this.$4=a.subscribe(function(){if(u.$3==null){u.$1.logDebugInfo("empty_video_controller");return}var e=u.$3.getCurrentState();e.playing?u.$12(e):u.$13()}))}var n=t.prototype;return n.$12=function(t){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(t.playing){if(this.$2==null){var e=this.$3.getPlayheadPosition();e>=0&&(this.$2=e)}}else this.$2=null;this.$14(0)},n.stopUnifiedCVC=function(){this.$13()},n.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null},n.$13=function(){r("clearTimeout")(this.$8),r("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null},n.$15=function(){r("clearTimeout")(this.$7),this.$7=null},n.$16=function(){this.$9=null,this.$15(),this.$14(0)},n.$14=function(t){var e=this;this.$3==null||this.$8!=null||this.$9!=null||this.$10||(this.$8=r("setTimeout")(function(){e.$8=null;var t=e.$17();if(t==null){e.$1.logDebugInfo("empty_request");return}e.$9=t;var n=Date.now(),a=!1;r("promiseDone")(t,function(r){if(t===e.$9)if(e.$9=null,r!=null){var o=e.$1.processUnifiedResponse(r);e.$18(o,n)}else e.$1.logHttpResponseBad("null payload",Date.now()-n)},function(t){a=!0,e.$1.logHttpRequestFailure(t!=null?JSON.stringify(t):null,Date.now()-n)}),e.$7=r("setTimeout")(function(){a||e.$1.logHttpRequestTimeout(Date.now()-n),e.$16()},u*o("DateConsts").MS_PER_SEC)},t))},n.$18=function(t,n){this.$15();var e=Date.now()-n;if(t.d!=null?(this.$1.logHttpRequestSuccess(e),this.$11!=null&&this.$11(t.d)):this.$1.logHttpResponseBad("no data field",e),t.a!=null){var r=t.a.t;switch(r){case"p":var a=t.a.pi;a==null&&(a=u),this.$14(a*o("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}},n.$17=function(){var e=this.$19();if(e==null)return null;var t={d:JSON.stringify(e)};return r("cometAsyncFetch")(r("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:t,method:"POST"})},n.$19=function(){if(this.$3==null)return null;var e={};this.$6!=null&&(e.lc=this.$6),this.$5&&(e.ls=!0);var t=0,n=0;this.$2!=null&&(t=this.$2,n=this.$3.getPlayheadPosition());var r=this.$3.getCurrentState(),o=this.$1.makeUnifiedVideoCVCUpdate(t,n,this.$20(r),r.muted,e);return o},n.$20=function(t){return t.playing||t.seeking?"playing":t.ended?"ended":t.paused?"paused":"unknown"},n.testing_setLastStartPosition=function(t){this.$2=t},n.testing_makeUnifiedStateUpdate=function(){return this.$19()},n.testing_handleUnifiedResponse=function(t){return this.$18(t,Date.now())},t})();l.default=c}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));l.default=e}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});l.default=u}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzErrorUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={error:null},t.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e),t.getDerivedStateFromError=function(t){return{error:r("getErrorSafe")(t)}};var n=t.prototype;return n.componentDidCatch=function(t,n){var e=n.componentStack,a=r("getErrorSafe")(t);a.componentStack=e;var i=this.props,l=i.description,s=i.onError,u=i.project,c=o("oz-player/utils/OzErrorUtils").isOzError(t)?t.getType():t!=null&&typeof t.name=="string"?t.name:a.name;try{a.name=c}catch(e){}var d="VideoPlayerErrorBoundary caught an "+c;l!=null&&(d=d+" ("+l+")");var m=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"],p=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha","OZ_DRM_MANAGER: Endpoint returned error: DEVICE_CERTIFICATE_REVOKED"],_=m.every(function(e){return a.name!==e})&&p.every(function(e){return!a.message.startsWith(e)}),f=r("FBLogger")(u==null?"comet_video_player":u).catching(a);["OZ_DRM_MANAGER","OZ_JAVASCRIPT_NATIVE","OZ_INITIALIZATION"].includes(a.name)&&(f=f.addToCategoryKey(a.message)),_?f.fatal(d):f.warn(d),s!=null&&s(a)},n.render=function(){var e=this.props,t=e.children,n=e.fallback,r=this.state.error;return r?typeof n=="function"?n(r):n:t},t})(s.PureComponent);l.default=u}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","FDSLink.react","FDSText.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(1),t=r("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list",n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:u.jsx(r("FDSLink.react"),{href:t,target:"_blank",children:s._(/*BTDS*/"Learn more")})}),e[0]=n):n=e[0],n}l.default=c}),226);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["FDSText.react","VideoPlayerFallbackLearnMoreLink.react","cr:2324","cr:4149","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(21),a=e.background,i=e.debugError,l=e.message,u=e.showDebugWithoutError,c=e.showLearnMoreLink,d=u===void 0?!0:u,m=c===void 0?!0:c,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x2vl965 x1a8lsjc xe2zdcy x1n2onr6 xh8yej3"},t[0]=p):p=t[0];var _;t[1]!==a?(_={0:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox"},1:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox x1vjfegm"}}[(a!=null)<<0],t[1]=a,t[2]=_):_=t[2];var f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w"},t[3]=f):f=t[3];var g;t[4]!==l?(g=s.jsx("div",babelHelpers.extends({},f,{children:s.jsx(r("FDSText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:l})})),t[4]=l,t[5]=g):g=t[5];var h;t[6]!==m?(h=m&&s.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w",children:s.jsx(r("VideoPlayerFallbackLearnMoreLink.react"),{})}),t[6]=m,t[7]=h):h=t[7];var y;t[8]!==i||t[9]!==d?(y=(i!=null||d)&&s.jsxs(s.Fragment,{children:[n("cr:4149")?s.jsx(n("cr:4149"),{error:i}):null,n("cr:2324")?s.jsx(n("cr:2324"),{error:i}):null]}),t[8]=i,t[9]=d,t[10]=y):y=t[10];var C;t[11]!==_||t[12]!==g||t[13]!==h||t[14]!==y?(C=s.jsxs("div",babelHelpers.extends({},_,{children:[g,h,y]})),t[11]=_,t[12]=g,t[13]=h,t[14]=y,t[15]=C):C=t[15];var b;t[16]!==a?(b=a!=null&&s.jsx("div",{className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy",children:a}),t[16]=a,t[17]=b):b=t[17];var v;return t[18]!==b||t[19]!==C?(v=s.jsxs("div",babelHelpers.extends({},p,{children:[C,b]})),t[18]=b,t[19]=C,t[20]=v):v=t[20],v}l.default=u}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.background,a=e.debugError,i=e.message,l=e.showDebugWithoutError,c=e.showLearnMoreLink,d;t[0]!==i?(d=i!=null?i:s._(/*BTDS*/"Sorry, we're having trouble playing this video."),t[0]=i,t[1]=d):d=t[1];var m=d,p;return t[2]!==n||t[3]!==a||t[4]!==m||t[5]!==l||t[6]!==c?(p=u.jsx(r("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:n,debugError:a,message:m,showDebugWithoutError:l,showLearnMoreLink:c}),t[2]=n,t[3]=a,t[4]=m,t[5]=l,t[6]=c,t[7]=p):p=t[7],p}l.default=c}),226);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(18),n=e.onPress,a=e.onUserInteraction,i=e.shouldUnmute,l=e.showTooltip,m=e.useOutlineIcons,p=l===void 0?!0:l,_=m===void 0?!1:m,f=(c||(c=o("VideoPlayerHooks"))).useController(),g=c.useIsFullscreen(),h=c.useLastMuteReason(),y;t[0]!==g?(y=g?s._(/*BTDS*/"Exit fullscreen"):s._(/*BTDS*/"Enter fullscreen"),t[0]=g,t[1]=y):y=t[1];var C=y,b;t[2]!==f||t[3]!==g||t[4]!==h||t[5]!==n||t[6]!==a||t[7]!==i?(b=function(){n&&n(),f.requestSetIsFullscreen(!g),i===!0&&h!=="user_initiated"&&f.setMuted(!1,"product_initiated"),a&&a({name:"video_fullscreen_button",type:"happened"})},t[2]=f,t[3]=g,t[4]=h,t[5]=n,t[6]=a,t[7]=i,t[8]=b):b=t[8];var v=b,S;t[9]!==_?(S=_?o("fbicon")._(u("528442"),20):o("fbicon")._(u("517758"),20),t[9]=_,t[10]=S):S=t[10];var R=S,L;t[11]!==_?(L=_?o("fbicon")._(u("595830"),20):o("fbicon")._(u("517763"),20),t[11]=_,t[12]=L):L=t[12];var E=L,k=g?R:E,I=p?C:null,T;return t[13]!==C||t[14]!==v||t[15]!==k||t[16]!==I?(T=d.jsx(r("VideoPlayerControlIcon.react"),{icon:k,label:C,onPress:v,tooltip:I}),t[13]=C,t[14]=v,t[15]=k,t[16]=I,t[17]=T):T=t[17],T}l.default=m}),226);
__d("VideoPlayerIMFMetadataContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={imfExpectedFromEmsg:!1,specInlineJson:null},d=s.createContext(c);d.displayName="VideoPlayerIMFMetadataContext";var m=d.Provider;function p(){var e=u(d);if(e===c)throw r("FBLogger")("comet_video_player").mustfixThrow("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.");return e}l.VideoPlayerIMFMetadataContextProvider=m,l.useVideoPlayerIMFMetadataFromContext=p}),98);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return/\.mpd(\?|$)/.test(e)}function s(t){var n=t.hdSrc,o=t.hdSrcPreferred,a=t.sdSrc;if(n==null&&a==null){var i=r("err")("Both HD and SD browser-native URLs are not available");return i.name="GotNoBrowserNativeURLs",i}var l=a!=null&&e(a),s=n!=null&&e(n);if(l||s){var u=r("err")("HD or SD browser-native URL points to a DASH manifest");return u.name="GotBrowserNativeURLsPointToDASH",u}return{hdSrc:n,hdSrcPreferred:o,sdSrc:a}}l.makeProgressiveImplementationData=s}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!==null&&e.indexOf(".m3u8")!==-1}function s(t){var n=t.getPlayingVideoInfo,o=t.setUserSelectedVideoQuality;function a(){var t=n(),r="progressive_SD",o="progressive_HD";return t==null||e(t.hdSrc)||e(t.sdSrc)?null:t.hdSrc!=null&&t.playingSrc===t.hdSrc?o:t.sdSrc!=null&&t.playingSrc===t.sdSrc?r:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){var e,t;return(e=(t=n())==null?void 0:t.availableAudioTracks)!=null?e:[]},getAvailableVideoQualities:function(){var e,t;return(e=(t=n())==null?void 0:t.availableQualities)!=null?e:[]},getAvailableVideoTracks:function(){var e,t;return(e=(t=n())==null?void 0:t.availableVideoTracks)!=null?e:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioRepresentationID:function(){return r("gkx")("440")?a():null},getCurrentPlayingAudioTrackID:function(){var e,t;return(e=(t=n())==null?void 0:t.playingAudioTrackID)!=null?e:null},getCurrentPlayingVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.targetQuality)!=null?e:""},getCurrentPlayingVideoRepresentationID:function(){return r("gkx")("440")?a():"oep_hd"},getCurrentTargetVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.targetQuality)!=null?e:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var t=n();return t==null?"progressive":e(t.hdSrc)||e(t.sdSrc)?"hls":"progressive"},getTargetAudioTrack:function(){return null},getUserSelectedVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.selectedQuality)!=null?e:"notselected"},getUserSelectedVideoVariant:function(){return null},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentations:function(){return null},isDrm:function(){var e;return((e=n())==null?void 0:e.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(t){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:o,setUserSelectedVideoVariant:function(t){}}}l.createVideoPlayerProgressiveImplementationEngineExtrasAPI=s}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(t,n,r,o,a,i){"use strict";var e="hd",l="sd";function s(t,n,r){return t?n!=null?e:l:r!=null?l:n!=null?e:l}function u(t){var n=[];t.sdSrc!=null&&n.push(l),t.hdSrc!=null&&n.push(e);var r=[],o=[],a=s(t.hdSrcPreferred,t.hdSrc,t.sdSrc);return babelHelpers.extends({},t,{availableAudioTracks:r,availableQualities:n,availableVideoTracks:o,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:a,targetQuality:a,targetSrc:null})}function c(t,n){var r=t.hdSrc,o=t.sdSrc,a,i;return n==="notselected"||n==="auto"?(a=o!=null?l:r!=null?e:l,i=o!=null?o:r!=null?r:null):n===e&&r!=null?(a=e,i=r):n===l&&o!=null?(a=l,i=o):(a=l,i=null),i===""&&(i=null),babelHelpers.extends({},t,{selectedQuality:n,targetQuality:a,targetSrc:i})}function d(e,t,n){return babelHelpers.extends({},e,{playingQuality:t,playingSrc:n})}i.createResolvedVideoInfoProgressive=u,i.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=c,i.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=d}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1607","cr:1680308","err","getErrorNameFromMediaErrorCode","getErrorSafe","getMoreGranularErrorNameFromHTMLVideoElementErrorMessage","gkx","promiseDone","videoUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=typeof e=="object"&&e!=null&&typeof e.name=="string"?e.name:null;return o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError(["PROGRESSIVE_JAVASCRIPT_NATIVE",r].filter(Boolean).join("/"),e,t,n)}function u(t){var a=t.initialProps,i={current:null},l={current:null},u={current:null},m={current:null},p=a.loggingMetaData.instanceKey,_=function(){var t=R(),i=l.current;if(!(t==null||i==null)){t.addEventListener("error",function(o){var i=t.error,l=i==null?void 0:i.code,s=r("getErrorNameFromMediaErrorCode")(l),u=i==null?void 0:i.message,c=u==null||u===""?"Unknown media error":u,d=[],m=u!=null?r("getMoreGranularErrorNameFromHTMLVideoElementErrorMessage")(u):null,p=t.src;if(!i&&t.poster!=null&&t.poster!==""&&(c+="(possible_poster_load_failure)"),p!==""){var _=null;(e||(e=n("Promise"))).resolve().then(function(){return a.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING==="use-credentials"&&r("gkx")("19391")?window.fetch(p,{credentials:"include",method:"GET"}):window.fetch(p)}).then(function(e){var t,n=e.status,r=(t=e.headers.get("Content-Type"))!=null?t:"unknown";if(c=c+". Fetched video content with Status:"+n+" Content-Type:"+r,_="URL_RESPONSE_HTTP_"+n,n<200||n>=300)return e.text().then(function(e){d.push(e.length.toString()),c+=" Body:%s:"+e.substr(0,200)+(e.length>200?"...":"")},function(){})}).catch(function(e){typeof e=="object"&&e!=null&&typeof e.name=="string"&&typeof e.message=="string"?(_=_!=null?_:"URL_RESPONSE_FETCH_FAILED/"+e.name,c=c+". Failed fetching video content with error: "+e.name+" "+e.message):(_=_!=null?_:"URL_RESPONSE_FETCH_FAILED",c=c+". Failed fetching video content with unknown error")}).finally(function(){var e=r("err").apply(void 0,[c].concat(d));e.name=[s,m,_].filter(Boolean).join("/"),E(e,"progressive_implementation_error_with_more_info")})}else{var f=r("err").apply(void 0,[c].concat(d));f.name=[s,m,"VIDEO_ELEMENT_SRC_EMPTY"].filter(Boolean).join("/"),E(f,"progressive_implementation_error_with_empty_src")}});try{var s,c=i.graphQLVideoDRMInfo,d=i.videoFBID,p=c&&(s=c.fairplayCert)!=null?s:null;if(n("cr:1680308")&&c&&p!=null&&d!=null)if(m.current=n("cr:1680308").newIfSupported(p,t,d,c.videoLicenseUriMap),m.current==null){var _=r("err")("Fairplay not supported");E(_,"progressive_player_fairplay_handler_missing")}else m.current.addListener("error",function(e){var t=r("err")(e.error);E(t,"progressive_player_fairplay_handler_error")});var f=r("gkx")("18183")?o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(I):I.current=o("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(t);u.current=i;{var g=S();L({inbandCaptionsAutogeneratedFromManifest:h.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:h.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:g==null?void 0:g.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:h.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:g==null?void 0:g.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:g==null?void 0:g.sideLoadCaptionsUrlFromProps})}k.dispatch({payload:{selectedVideoQuality:h.getUserSelectedVideoQuality(),streamingFormat:h.getStreamType()},type:"implementation_engine_initialized"});var y=function(){f.setPlayheadPosition(a.coreVideoPlayerMetaData.startTimestamp)};r("UserAgent").isBrowser("IE11")?r("promiseDone")(f.getDOMLoadedMetadataPromise().then(y)):y()}catch(e){E(e,"progressive_player_create_exception")}}},f=function(t,n){if(n==null)return!0;if(t.videoFBID!==n.videoFBID){var e=14;return o("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",e),!1}else if(t.hdSrc!==n.hdSrc||t.sdSrc!==n.sdSrc){var r=14;return o("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",r),!1}else return!1},g=function(t){var e,n,a,s={audioOnly:t.coreVideoPlayerMetaData.audioOnly,graphQLVideoDRMInfo:(e=t.coreVideoPlayerMetaData.graphQLVideoDRMInfo)!=null?e:null,hdSrc:t.hdSrc===""?null:(n=t.hdSrc)!=null?n:null,hdSrcPreferred:t.hdSrcPreferred,sdSrc:t.sdSrc===""?null:(a=t.sdSrc)!=null?a:null,videoFBID:t.coreVideoPlayerMetaData.videoFBID};if(!f(s,i.current))return!1;if(s.hdSrc==null&&s.sdSrc==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Empty hdSrc and sdSrc");return i.current=s,l.current=o("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(s),_(),!0},h=o("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(r("gkx")("440")){var e,t=u.current;if(!t)return null;var n=(e=I.current)==null?void 0:e.getUnderlyingVideoElement().currentSrc;return babelHelpers.extends({},t,{playingSrc:n!=null&&n!==""?n:null})}else return u.current},setUserSelectedVideoQuality:function(t){var e=u.current;if(!e)throw r("FBLogger")("comet_video_player").mustfixThrow("Attempt to switch quality when playingVideoInfo does not exist");var n=o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(I);u.current=o("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(e,t);var i=u.current.targetSrc;if(i===null){r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",a.coreVideoPlayerMetaData.videoFBID).warn("Received null targetSrc from setUserSelectedVideoQuality, selectedQuality: %s",String(t));return}c(i,a.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler).then(function(e){var t,r,o;if(((t=u.current)==null?void 0:t.targetSrc)===i){d(n.getUnderlyingVideoElement(),{crossOrigin:(r=a.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING)!=null?r:a.coreVideoPlayerMetaData.isSpherical===!0?"anonymous":null},e);var l=(o=k.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?o:0;l>0&&n.setPlayheadPosition(l),k.getCurrentState().controlledState.playbackState==="playing"&&n.play(),k.dispatch({payload:{},type:"representation_changed"})}}).catch(function(e){var t;if(((t=u.current)==null?void 0:t.targetSrc)===i){var n=r("getErrorSafe")(e);r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",a.coreVideoPlayerMetaData.videoFBID).catching(n).warn("Failed refreshing video URL with original error: %s",String(n))}})}}),y=function(){m.current&&(m.current.destroy(),m.current=null)},C=o("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(t){var e=t.getVideoElementAPI,r=t.loggerToVPL;return n("cr:1607")?n("cr:1607").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:h,getVideoElementAPI:e,loggerToVPL:r}):null},createVideoPlayerError:function(t,n){var e;return s(t,n,(e=u.current)==null?void 0:e.targetSrc)},destroyEngineParts:function(){y()},engineCreateArgs:t,engineExtrasAPI:h,engineMetadata:{isAbrEnabled:!1,playerInstanceKey:p,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleVideoElementChanged:function(t){t!=null&&_()},handleVideoInfoChange:g}),b=C.debugLog,v=C.engine,S=C.getCaptionsInfo,R=C.getVideoElement,L=C.handleCaptionsInfoChange,E=C.handleFatalImplementationError,k=C.machine,I=C.videoElementAPIRef;return v}function c(t,a){return a&&o("videoUrlUtils").isCdnUrlExpired(t)?a(t).then(function(t){var o;return(o=t.refreshedUrl)!=null?o:(e||(e=n("Promise"))).reject(r("err")("Failed refreshing URL"+(t.reason!==null?" with reason: "+t.reason:"")))}):(e||(e=n("Promise"))).resolve(t)}function d(e,t,n){var r=t.crossOrigin;if(n==null||n==="")e.removeAttribute("src");else{var o=e.playbackRate;e.setAttribute("src",n);var a=null;if(r!=null){try{a=new URL(n).origin}catch(e){}if(a!=null&&location.origin!==a)switch(r){case"anonymous":case"use-credentials":e.setAttribute("crossOrigin",r);break;default:e.removeAttribute("crossOrigin");break}}e.playbackRate=o}}l.createVideoPlayerProgressiveImplementationEngine=u,l.internal_setHTMLVideoElementSrc=d}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,o("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine),n=t.reactVideoFrameAndComponents;return n}l.default=e}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:13141","cr:913","setInterval"],(function(t,n,r,o,a,i,l){"use strict";var e=2e4,s=new Set,u=null;function c(t,a){a===void 0&&(a="extender"),s.add(t),u==null&&(o("WebSession").extend(Date.now()+e+2e3),n("cr:13141")==null||n("cr:13141").extend(),u=r("setInterval")(function(){o("WebSession").extend(Date.now()+e+2e3),n("cr:13141")==null||n("cr:13141").extend(),n("cr:913")&&new(n("cr:913"))().setClientTime(Date.now()).setWebsessionID(o("WebSession").getId()).setReason(a).log()},e))}function d(e){s.delete(e);var t=s.size;t===0&&u!=null&&(r("clearInterval")(u),u=null)}l.subscribe=c,l.unsubscribe=d}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useId;function m(){var e=o("react-compiler-runtime").c(4),t=(s||(s=o("VideoPlayerHooks"))).usePlaying(),n=d(),r,a;return e[0]!==t||e[1]!==n?(r=function(){if(t)return o("WebSessionExtender").subscribe(n,"video"),function(){o("WebSessionExtender").unsubscribe(n)}},a=[t,n],e[0]=t,e[1]=n,e[2]=r,e[3]=a):(r=e[2],a=e[3]),c(r,a),null}l.default=m}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=(e||(e=o("VideoPlayerHooks"))).useStalling(),r=e.useStreamInterrupted(),a=e.useIsLiveRewindActive(),i=r&&!a,l=n,s=i?"live_video_interrupted_overlay":l?"spinner":"none",u;return t[0]!==i||t[1]!==s||t[2]!==l?(u={liveVideoInterruptedOverlayVisible:i,loadingIndicatorType:s,spinnerVisible:l},t[0]=i,t[1]=s,t[2]=l,t[3]=u):u=t[3],u}l.default=s}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","once","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),c=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),d=r("once")(function(){return s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{})})});function m(){var e=o("react-compiler-runtime").c(6),t=r("useVideoPlayerDefaultLoadingIndicatorsLogic")(),n=t.loadingIndicatorType,a=t.spinnerVisible,i;e[0]!==a?(i=s.jsx(u,{isVisible:a}),e[0]=a,e[1]=i):i=e[1];var l=i,c;e:switch(n){case"spinner":{c=l;break e}case"live_video_interrupted_overlay":{var m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=d(),e[2]=m):m=e[2],c=m;break e}case"none":default:c=l}var p;return e[3]!==c||e[4]!==n?(p={loadingIndicatorElement:c,loadingIndicatorType:n},e[3]=c,e[4]=n,e[5]=p):p=e[5],p}l.default=m}),98);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.setterHook,m=o("createVideoStateHook").createVideoStateHook(null),p=m.setterHook,_=m.valueHook;function f(e){var t=o("react-compiler-runtime").c(12),n=e.disableSubscription,a=e.playerFormat,i=e.subOrigin,l=e.videoFBID,c=(s||(s=o("VideoPlayerHooks"))).useIsLive(),m=s.useIsFullscreen(),_=s.useIsDesktopPictureInPicture(),f=s.useController(),g=d(),h=p(),y,C;t[0]!==n||t[1]!==_||t[2]!==m||t[3]!==c||t[4]!==a||t[5]!==h||t[6]!==g||t[7]!==i||t[8]!==f||t[9]!==l?(y=function(){if(n===!0){r("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:l,name:"disable_subscription"}});return}var e=new(r("UnifiedVideoCVCSubscription"))(l,r("getPlayerFormatForLogData")({isDesktopPictureInPicture:_,isFullscreen:m},a),i,f,c,function(e){h(e)});return g(e),function(){e.destroy()}},C=[_,m,c,n,a,h,g,i,f,l],t[0]=n,t[1]=_,t[2]=m,t[3]=c,t[4]=a,t[5]=h,t[6]=g,t[7]=i,t[8]=f,t[9]=l,t[10]=y,t[11]=C):(y=t[10],C=t[11]),u(y,C)}var g=_;l.useVideoPlayerUnifiedCVCProvider=f,l.useVideoPlayerUnifiedCVCData=g}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerHooks","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:99","gkx","react","react-compiler-runtime","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.useImperativeHandle,m=(e=n("cr:99"))==null?void 0:e.VideoPlayerWithDebugOverlay;function p(e){var t=o("react-compiler-runtime").c(25),a=e.apiRef,i=e.children,l=e.disableCVCSubscription,s=e.disableLoadingIndicator,p=e.disableLogging,_=e.instreamVideoAdBreaksPlayer,f=e.playerFormat,g=e.subOrigin,h=e.videoFBID,y=e.videoPlayerIMFFromVideoMetadata,C=e.videoPlayerSpherical,b=s===void 0?!1:s,v=(u||(u=o("VideoPlayerHooks"))).useController(),S=o("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),R,L;t[0]!==v||t[1]!==S?(R=function(){return{controller:v,portalingPlaceInfo:S}},L=[v,S],t[0]=v,t[1]=S,t[2]=R,t[3]=L):(R=t[2],L=t[3]),d(typeof a=="function"?a:null,R,L);var E=p===!0||l===!0,k;t[4]!==f||t[5]!==g||t[6]!==E||t[7]!==h?(k={disableSubscription:E,playerFormat:f,subOrigin:g,videoFBID:h},t[4]=f,t[5]=g,t[6]=E,t[7]=h,t[8]=k):k=t[8],o("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider(k);var I=r("useVideoPlayerDefaultLoadingIndicators")(),T=I.loadingIndicatorElement,D=y!=null?y:null,x=b?null:T,$;t[9]===Symbol.for("react.memo_cache_sentinel")?($=r("gkx")("24328")?c.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,t[9]=$):$=t[9];var P;t[10]!==i||t[11]!==_?(P=c.jsxs(r("VideoPlayerCaptionsAreaDeferred.react"),{children:[i,_]}),t[10]=i,t[11]=_,t[12]=P):P=t[12];var N,M,w;t[13]===Symbol.for("react.memo_cache_sentinel")?(N=c.jsx(r("CoreVideoPlayerAutoplayClient.react"),{}),M=c.jsx(r("CoreVideoPlayerAudioClient.react"),{}),w=n("cr:1954434")?c.jsx(n("cr:1954434"),{}):null,t[13]=N,t[14]=M,t[15]=w):(N=t[13],M=t[14],w=t[15]);var A;t[16]!==g?(A=m?c.jsx(m,{subOrigin:g}):null,t[16]=g,t[17]=A):A=t[17];var F;t[18]===Symbol.for("react.memo_cache_sentinel")?(F=c.jsx(r("VideoPlayerWebSessionExtender.react"),{}),t[18]=F):F=t[18];var O;return t[19]!==A||t[20]!==D||t[21]!==x||t[22]!==P||t[23]!==C?(O=c.jsxs(o("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:D,children:[C,x,$,P,N,M,w,A,F]}),t[19]=A,t[20]=D,t[21]=x,t[22]=P,t[23]=C,t[24]=O):O=t[24],O}l.default=p}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerMetaData","CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","react","react-compiler-runtime","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e=["apiRef","children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(37),a,i,l,s,c,d,m,p,_,f,g,h;n[0]!==t?(a=t.apiRef,i=t.children,s=t.disableLoadingIndicator,c=t.implementations,d=t.instreamVideoAdBreaksPlayer,m=t.portalingEnabled,p=t.portalingFromVideoID,_=t.portalingPlaceMetaData,f=t.portalingRenderPlaceholder,g=t.videoPlayerIMFFromVideoMetadata,h=t.videoPlayerSpherical,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g,n[12]=h):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11],h=n[12]);var y=r("usePlayerOriginRouteTracePolicy")(),C=r("useRouteProductAttribution")();C||(C=l.productAttribution);var b;n[13]!==l||n[14]!==C||n[15]!==y?(b=o("CoreVideoPlayerMetaData").applyDefaultsToCoreVideoPlayerMetaData(babelHelpers.extends({},l,{productAttribution:C,routeTracePolicy:y})),n[13]=l,n[14]=C,n[15]=y,n[16]=b):b=n[16];var v=b,S;n[17]!==a||n[18]!==i||n[19]!==v.loggingConfig.disableCVCSubscription||n[20]!==v.loggingConfig.disableLogging||n[21]!==v.playerFormat||n[22]!==v.subOrigin||n[23]!==v.videoFBID||n[24]!==s||n[25]!==d||n[26]!==g||n[27]!==h?(S=u.jsx(r("VideoPlayerXImplSurface.react"),{apiRef:a,children:i,disableCVCSubscription:v.loggingConfig.disableCVCSubscription,disableLoadingIndicator:s,disableLogging:v.loggingConfig.disableLogging,instreamVideoAdBreaksPlayer:d,playerFormat:v.playerFormat,subOrigin:v.subOrigin,videoFBID:v.videoFBID,videoPlayerIMFFromVideoMetadata:g,videoPlayerSpherical:h}),n[17]=a,n[18]=i,n[19]=v.loggingConfig.disableCVCSubscription,n[20]=v.loggingConfig.disableLogging,n[21]=v.playerFormat,n[22]=v.subOrigin,n[23]=v.videoFBID,n[24]=s,n[25]=d,n[26]=g,n[27]=h,n[28]=S):S=n[28];var R;return n[29]!==v||n[30]!==c||n[31]!==m||n[32]!==p||n[33]!==_||n[34]!==f||n[35]!==S?(R=u.jsx(r("CoreVideoPlayerWithComponents.react"),{coreVideoPlayerMetaData:v,implementations:c,portalingEnabled:m,portalingFromVideoID:p,portalingPlaceMetaData:_,portalingRenderPlaceholder:f,children:S}),n[29]=v,n[30]=c,n[31]=m,n[32]=p,n[33]=_,n[34]=f,n[35]=S,n[36]=R):R=n[36],R}l.default=c}),98);
__d("addToMap",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){if(e.get(t)===n)return e;var r=new Map(e);return r.set(t,n),r}i.default=e}),66);
__d("computeAspectRatio",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e!=null&&t!=null&&e!==0&&t!==0?e/t:null}i.default=e}),66);
__d("getVideoPlayerUserFacingErrorMessageFromError",["fbt","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return r("gkx")("24345")&&e.message.toLowerCase().indexOf("audio_renderer_error")>=0}function u(e){return e.message.indexOf("DEVICE_CERTIFICATE_REVOKED")>=0}function c(e){return e.name.indexOf("VideoImplementationsDashManifestUnsupportedCodecs")>=0||e.name.indexOf("VideoImplementationsMediaSourceUnsupported")>=0}function d(e){return e.name==="OZ_NETWORK"&&e.message.includes("CDN URL expired")}function m(t){var n=null;return e(t)?n=s._(/*BTDS*/"Audio renderer error: Please restart your computer."):u(t)?n=s._(/*BTDS*/"This video is DRM-protected, but your device certificate appears to be revoked. Please make sure your browser is up to date, and try again."):c(t)?n=s._(/*BTDS*/"This video cannot be played in the browser, operating system, or hardware you're using."):d(t)&&(n=s._(/*BTDS*/"This video content isn't available right now.")),n}l.default=m}),226);
__d("defaultErrorBoundaryFallback",["VideoPlayerFallbackCover.react","getVideoPlayerUserFacingErrorMessageFromError","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=r("getVideoPlayerUserFacingErrorMessageFromError")(e);return s.jsx(r("VideoPlayerFallbackCover.react"),{debugError:e,message:t})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("getVideoPlayerAutoplayProps",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t!=null?t:"respect_user_settings",o=r==="dangerously_always_autoplay",a=n!=null?n:"unknown",i=e.autoplaySetting||"default_autoplay",l=i==="off",s=o||r==="respect_user_settings"&&!l&&e.canAutoplay,u=r==="do_not_autoplay"?a:e.autoplayGatingResult,c=s?"allow":r==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:u,autoplaySetting:i,canAutoplay:c}}i.default=e}),66);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState,m=5e3;function p(e){var t=o("react-compiler-runtime").c(9),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.forceVisible,l=a.forceVisibleOnMount,u=o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter(),p=u.ongoingInteractionsCount,_=u.onUserInteraction,f=(s||(s=o("VideoPlayerHooks"))).useEnded(),g=s.useIsHovering(),h=s.usePaused(),y=s.useIsMouseIdle(),C=s.useVideoPlaybackEnded(),b=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",g&&!y,_);var v=d(l===!0),S=v[0],R=v[1],L,E;t[2]!==S||t[3]!==h?(L=function(){if(!h&&S){var e=r("setTimeout")(function(){R(!1)},m);return function(){r("clearTimeout")(e)}}},E=[S,h],t[2]=S,t[3]=h,t[4]=L,t[5]=E):(L=t[4],E=t[5]),c(L,E);var k;i===!0||i===!1?k=i:b?k=!1:p>0||S?k=!0:h?k=f?C:!0:k=!1;var I;return t[6]!==k||t[7]!==_?(I={isControlsVisible:k,onUserInteraction:_},t[6]=k,t[7]=_,t[8]=I):I=t[8],I}l.default=p}),98);/*FB_PKG_DELIM*/
__d("AdsValidationConsts",[],(function(t,n,r,o,a,i){var e=Object.freeze({ixCanvasPrefix:"https://fb.com/canvas_doc/",maxAge:65,maxAdgroupNameLength:400,maxFriendlyNameLength:128,maxURLLength:1024,minAge:13,minAgeDefault:18,nonDefaultMinAgeByCountryCode:{ID:21,TH:20},minMessagingDestinationAge:18,minLeadGenerationAge:18,minCallNowAge:18,minWAMOStatusAge:13,nameMaxLength:400,maxAdObjectNameLength:400});i.default=e}),66);
__d("ManagedError",[],(function(t,n,r,o,a,i){var e=(function(e){function t(t,n){var r;return r=e.call(this,t!=null?t:"")||this,t!=null?r.message=t:r.message="",r.innerError=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.default=e}),66);
__d("AssertionError",["ManagedError"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){return e.call(this,t)||this}return babelHelpers.inheritsLoose(t,e),t})(r("ManagedError"));l.default=e}),98);
__d("Assert",["AssertionError","sprintf"],(function(t,n,r,o,a,i,l){function e(e,t){if(typeof e!="boolean"||e===!1)throw new(r("AssertionError"))(t);return e}function s(t,n,o){var a;if(n===void 0)a="undefined";else if(n===null)a="null";else{var i=Object.prototype.toString.call(n),l=/\s(\w*)/.exec(i);a=l==null?typeof l:l[1].toLowerCase()}return e(t.indexOf(a)!==-1,o!=null?o:r("sprintf")("Expression is of type %s, not %s",a,t)),n}function u(t,n,r){return e(n instanceof t,r!=null?r:"Expression not instance of type"),n}function c(e,t){m["is"+e]=t,m["maybe"+e]=function(e,n){return e==null?e:t(e,n)}}var d=function(t,n){return t},m={isInstanceOf:u,isTrue:e,isTruthy:function(n,r){return e(!!n,r)},isBoolean:d,isFunction:d,isNumber:d,isObject:d,isString:d,isUndefined:d,maybeObject:d,maybeNumber:d,maybeFunction:d};["Boolean","Function","Number","Object","String","Undefined"].forEach(function(e){c(e,s.bind(null,e.toLowerCase()))});var p=m;l.default=p}),98);
__d("BandicootSession",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",CLOSED:"CLOSED"}),l=600*1e3,s=336*60*60*1e3;function u(e){return Date.now()-e.lastUpdated}function c(e){return!!(typeof e=="object"&&e&&e.lastUpdated&&e.status)}function d(t){return t.status===e.CLOSED?!1:!(t.status===e.INACTIVE&&u(t)>l)}function m(t){return t.status===e.ACTIVE&&u(t)>l}function p(e){return u(e)>s}i.Status=e,i.isValidSession=c,i.isTrackedSession=d,i.isCrashedSession=m,i.isOrphanSession=p}),66);
__d("Bandicoot",["invariant","BandicootSession","FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l,s){"use strict";var e=5e3,u=e*2,c="Bandicoot:";function d(){try{var e=window.localStorage;if(e){var t="__test"+Date.now();e.setItem(t,""),e.removeItem(t)}return e}catch(e){return r("FBLogger")("bandicoot").warn("Local storage is full"),null}}var m=d(),p=(function(){function t(e){this.$5=c+e,this.$4={},this.$1=this.$7.bind(this),this.sessionID=null,this.sessionStartTime=null,this.storage=m}var n=t.prototype;return n.getCrashTimeData=function(){var e=window.performance&&window.performance.memory||{},t=this.sessionStartTime;return{duration:t?Date.now()-t:0,tabs:Object.keys(this.$8()).length,jsHeapSizeLimit:e.jsHeapSizeLimit,totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize,elementsInDOM:document.getElementsByTagName("*").length,uri:window.location.href}},n.getLogTimeData=function(){return{userAgent:window.navigator.userAgent}},n.logCrash=function(t,n,o){r("FBLogger")("bandicoot").warn("Session %s crashed at %s",t,o)},n.logBrowserUnsupported=function(){r("FBLogger")("bandicoot").warn("Browser not supported")},n.logTrackingError=function(){r("FBLogger")("bandicoot").warn("Failed to record data for current session")},n.startSession=function(){var t=this;if(!this.storage){this.logBrowserUnsupported();return}this.$2||(this.sessionID||(this.sessionID=Math.random().toString(36).slice(2,9)),this.sessionStartTime||(this.sessionStartTime=Date.now()),this.$2=setInterval(function(){t.$9()},e),this.$9(),document.addEventListener&&document.addEventListener("visibilitychange",this.$1),this.$10())},n.endSession=function(){this.storage&&this.$2&&(clearInterval(this.$2),this.$2=null,this.$3||this.$11({status:o("BandicootSession").Status.CLOSED}),this.sessionID=null,this.sessionStartTime=null,document.removeEventListener&&document.removeEventListener("visibilitychange",this.$1))},n.logKnownCrashes=function(){var e=this;if(this.storage&&!this.$2){var t=this.$8();t=this.$12(t,function(t,n){return o("BandicootSession").isCrashedSession(t)?(e.logCrash(n,t,e.getLogTimeData()),null):t}),this.$13(t)}},n.$14=function(){var e=this.sessionID;return e||s(0,663),e},n.$9=function(){var e=this.$8();this.$15(e),e=this.$16(e),this.$13(e)},n.$15=function(t){var e=this.$14(),n=t[e]?t[e]:{};t[e]=babelHelpers.extends({},n,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$17()})},n.$12=function(t,n){var e={};return Object.keys(t).forEach(function(r){var a=t[r];if(o("BandicootSession").isValidSession(a)&&o("BandicootSession").isTrackedSession(a)&&!o("BandicootSession").isOrphanSession(a)){var i=n(a,r);i&&(e[r]=i)}}),e},n.$16=function(t){var e=this;return this.$12(t,function(t,n){if(o("BandicootSession").isCrashedSession(t)){var r=t.loggerReportTime||0;if(Date.now()-r>u)t.loggerReportTime=Date.now(),t.loggerReportSession=e.$14();else if(t.loggerReportSession==e.$14())return e.logCrash(n,t,e.getLogTimeData()),e.$4[n]=!0,null}return t})},n.$8=function(t){t=t||this.$5;var e=this.storage.getItem(t)||"{}";try{e=JSON.parse(e)}catch(n){e={},this.storage.removeItem(t),r("FBLogger")("bandicoot").catching(r("getErrorSafe")(n)).warn("Invalid JSON data")}return e},n.$11=function(t){t.lastUpdated=Date.now();var e=this.$8(),n=this.sessionID;n&&e[n]&&(Object.assign(e[n],t),this.$13(e))},n.$13=function(n){var t=JSON.stringify(n);try{this.storage.setItem(this.$5,t)}catch(t){var o=this.$6,a=Date.now();(!o||a>o+e)&&(this.logTrackingError(),this.$6=a);try{this.storage.removeItem(this.$5)}catch(e){this.$3=!0,this.endSession(),r("FBLogger")("bandicoot").catching(r("getErrorSafe")(e)).warn("Removing from storage failed")}}},n.$10=function(){for(var e=0;e<this.storage.length;++e){var t=this.storage.key(e);if(t.indexOf(c)===0&&t!==this.$5){var n=this.$8(t),r=Object.keys(n).every(function(e){var t=n[e];return!o("BandicootSession").isValidSession(t)||o("BandicootSession").isOrphanSession(t)});r&&this.storage.removeItem(t)}}},n.$7=function(){this.$11({status:this.$17()})},n.$17=function(){return document.hidden?o("BandicootSession").Status.INACTIVE:o("BandicootSession").Status.ACTIVE},t})();l.default=p}),98);
__d("BrandedContentSharedToSponsorStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOT_SHARED:0,ALL_SHARED:1});i.default=e}),66);
__d("BrandedContentSponsorRelationship",[],(function(t,n,r,o,a,i){var e=Object.freeze({WITH:0,PAID_RELATIONSHIP_WITH:1,PRESENTED_BY:2,SOCIAL_TAGGING:3,SUPPORT:4,BRAND_INLINE_AD_WITHOUT_CREATOR_PAGE:5,CREATOR_INLINE_AD_WITHOUT_SPONSOR_PAGE:6,SPONSORSHIP:7,AFFILIATE_LINKS:8});i.default=e}),66);
__d("CallToActionTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({OPEN_LINK:"OPEN_LINK",LIKE_PAGE:"LIKE_PAGE",SHOP_NOW:"SHOP_NOW",PLAY_GAME:"PLAY_GAME",INSTALL_APP:"INSTALL_APP",USE_APP:"USE_APP",CALL:"CALL",CALL_ME:"CALL_ME",VIDEO_CALL:"VIDEO_CALL",GET_MOBILE_APP:"GET_MOBILE_APP",INSTALL_MOBILE_APP:"INSTALL_MOBILE_APP",INSTALL_FREE_MOBILE_APP:"INSTALL_FREE_MOBILE_APP",USE_MOBILE_APP:"USE_MOBILE_APP",MOBILE_DOWNLOAD:"MOBILE_DOWNLOAD",BOOK_TRAVEL:"BOOK_TRAVEL",LISTEN_MUSIC:"LISTEN_MUSIC",WATCH_VIDEO:"WATCH_VIDEO",LEARN_MORE:"LEARN_MORE",SIGN_UP:"SIGN_UP",DOWNLOAD:"DOWNLOAD",WATCH_MORE:"WATCH_MORE",NO_BUTTON:"NO_BUTTON",VISIT_PAGES_FEED:"VISIT_PAGES_FEED",MISSED_CALL:"MISSED_CALL",CALL_NOW:"CALL_NOW",DIAL_CODE:"DIAL_CODE",APPLY_NOW:"APPLY_NOW",CONTACT:"CONTACT",BUY_NOW:"BUY_NOW",GET_OFFER:"GET_OFFER",GET_OFFER_VIEW:"GET_OFFER_VIEW",BUY_TICKETS:"BUY_TICKETS",UPDATE_APP:"UPDATE_APP",GET_DIRECTIONS:"GET_DIRECTIONS",BUY:"BUY",SEE_DETAILS:"SEE_DETAILS",SEND_UPDATES:"SEND_UPDATES",MESSAGE_PAGE:"MESSAGE_PAGE",MESSAGE_USER:"MESSAGE_USER",DONATE:"DONATE",SUBSCRIBE:"SUBSCRIBE",SAY_THANKS:"SAY_THANKS",SELL_NOW:"SELL_NOW",SHARE:"SHARE",DONATE_NOW:"DONATE_NOW",GET_QUOTE:"GET_QUOTE",CONTACT_US:"CONTACT_US",ORDER_NOW:"ORDER_NOW",START_ORDER:"START_ORDER",ADD_TO_CART:"ADD_TO_CART",VIEW_CART:"VIEW_CART",VIEW_IN_CART:"VIEW_IN_CART",VIDEO_ANNOTATION:"VIDEO_ANNOTATION",MOMENTS:"MOMENTS",RECORD_NOW:"RECORD_NOW",INQUIRE_NOW:"INQUIRE_NOW",CONFIRM:"CONFIRM",VOTE_NOW:"VOTE_NOW",GIVE_FREE_RIDES:"GIVE_FREE_RIDES",REGISTER_NOW:"REGISTER_NOW",OPEN_MESSENGER_EXT:"OPEN_MESSENGER_EXT",CIVIC_ACTION:"CIVIC_ACTION",SEND_INVITES:"SEND_INVITES",REFER_FRIENDS:"REFER_FRIENDS",SAVE:"SAVE",REQUEST_TIME:"REQUEST_TIME",SEE_MENU:"SEE_MENU",EMAIL_NOW:"EMAIL_NOW",PAY_OR_REQUEST:"PAY_OR_REQUEST",SEARCH:"SEARCH",GET_SHOWTIMES:"GET_SHOWTIMES",TRY_IT:"TRY_IT",LISTEN_NOW:"LISTEN_NOW",TRY_ON:"TRY_ON",TRY_DEMO:"TRY_DEMO",WOODHENGE_SUPPORT:"WOODHENGE_SUPPORT",SOTTO_SUBSCRIBE:"SOTTO_SUBSCRIBE",SEARCH_MORE:"SEARCH_MORE",FOLLOW_USER:"FOLLOW_USER",BLOOD_DONATIONS:"BLOOD_DONATIONS",CLAIM_OFFER:"CLAIM_OFFER",RAISE_MONEY:"RAISE_MONEY",SEE_SHOP:"SEE_SHOP",GET_DETAILS:"GET_DETAILS",FIND_OUT_MORE:"FIND_OUT_MORE",VISIT_WEBSITE:"VISIT_WEBSITE",BROWSE_SHOP:"BROWSE_SHOP",UNLIKE_PAGE:"UNLIKE_PAGE",BET_NOW:"BET_NOW",OPEN_MOVIES:"OPEN_MOVIES",EVENT_RSVP:"EVENT_RSVP",INTERESTED:"INTERESTED",GO_LIVE:"GO_LIVE",SEND_TIP:"SEND_TIP",WHATSAPP_MESSAGE:"WHATSAPP_MESSAGE",GET_EVENT_TICKETS:"GET_EVENT_TICKETS",VIEW_INSTAGRAM_PROFILE:"VIEW_INSTAGRAM_PROFILE",INSTAGRAM_MESSAGE:"INSTAGRAM_MESSAGE",FOLLOW_NEWS_STORYLINE:"FOLLOW_NEWS_STORYLINE",LINK_CARD:"LINK_CARD",PRE_REGISTER:"PRE_REGISTER",SEE_MORE:"SEE_MORE",WATCH_APP_UPGRADE:"WATCH_APP_UPGRADE",LOYALTY_LEARN_MORE:"LOYALTY_LEARN_MORE",ACTIVATE_OFFER:"ACTIVATE_OFFER",BOOK_NOW:"BOOK_NOW",BOOK_TEST_DRIVE:"BOOK_TEST_DRIVE",CHECK_AVAILABILITY:"CHECK_AVAILABILITY",FIND_A_GROUP:"FIND_A_GROUP",FIND_YOUR_GROUPS:"FIND_YOUR_GROUPS",REMIND_ME:"REMIND_ME",SAVE_OFFER:"SAVE_OFFER",SEE_OFFER:"SEE_OFFER",PAY_TO_ACCESS:"PAY_TO_ACCESS",PURCHASE_GIFT_CARDS:"PURCHASE_GIFT_CARDS",FOLLOW_PAGE:"FOLLOW_PAGE",SEND_A_GIFT:"SEND_A_GIFT",JOBS_APPLY_NOW:"JOBS_APPLY_NOW",VIEW_RESUME:"VIEW_RESUME",SWIPE_UP_SHOP:"SWIPE_UP_SHOP",SWIPE_UP_PRODUCT:"SWIPE_UP_PRODUCT",SEND_GIFT_MONEY:"SEND_GIFT_MONEY",SEND_GIFT:"SEND_GIFT",WATCH_MUSIC_VIDEO:"WATCH_MUSIC_VIDEO",TRY_IN_CAMERA:"TRY_IN_CAMERA",WHATSAPP_LINK:"WHATSAPP_LINK",PLAY_GAME_ON_FACEBOOK:"PLAY_GAME_ON_FACEBOOK",GET_STARTED:"GET_STARTED",VISIT_WORLD:"VISIT_WORLD",OPEN_INSTANT_APP:"OPEN_INSTANT_APP",AUDIO_CALL:"AUDIO_CALL",JOIN_GROUP:"JOIN_GROUP",GET_PROMOTIONS:"GET_PROMOTIONS",JOIN_CHANNEL:"JOIN_CHANNEL",VISIT_PROFILE:"VISIT_PROFILE",CHAT_ON_WHATSAPP:"CHAT_ON_WHATSAPP",EXPLORE_MORE:"EXPLORE_MORE",PLAY:"PLAY",MAKE_AN_APPOINTMENT:"MAKE_AN_APPOINTMENT",ASK_ABOUT_SERVICES:"ASK_ABOUT_SERVICES",BOOK_A_CONSULTATION:"BOOK_A_CONSULTATION",GET_A_QUOTE:"GET_A_QUOTE",BUY_VIA_MESSAGE:"BUY_VIA_MESSAGE",ASK_FOR_MORE_INFO:"ASK_FOR_MORE_INFO",CHAT_WITH_US:"CHAT_WITH_US",VIEW_PRODUCT:"VIEW_PRODUCT",VIEW_CHANNEL:"VIEW_CHANNEL",GET_IN_TOUCH:"GET_IN_TOUCH",WATCH_LIVE_VIDEO:"WATCH_LIVE_VIDEO",IMAGINE:"IMAGINE",SHOP_WITH_AI:"SHOP_WITH_AI",TRY_ON_WITH_AI:"TRY_ON_WITH_AI",TRY_NOW:"TRY_NOW"});i.default=e}),66);
__d("fileSliceName",["UserAgent_DEPRECATED"],(function(t,n,r,o,a,i,l){var e="slice",s;(s=o("UserAgent_DEPRECATED").chrome())?s<21&&(e="webkitSlice"):(s=o("UserAgent_DEPRECATED").firefox())?s<13&&(e="mozSlice"):(s=o("UserAgent_DEPRECATED").safari())||o("UserAgent_DEPRECATED").webkit()&&(e="webkitSlice");var u=e;l.default=u}),98);
__d("fileSlice",["fileSliceName"],(function(t,n,r,o,a,i,l){var e=t.File&&t.File.prototype[r("fileSliceName")];e||(e=t.Blob&&t.Blob.prototype[r("fileSliceName")]);var s=e;l.default=s}),98);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],(function(t,n,r,o,a,i,l){function e(){return typeof r("fileSlice")=="function"&&d()}function s(){return!o("UserAgent_DEPRECATED").firefox()}function u(){return"FileList"in window}function c(){return"FileReader"in window&&"DataView"in window}function d(){return"FormData"in window}l.supportsChunking=e,l.supportsFullProgress=s,l.supportsFileAPI=u,l.supportsFileReading=c,l.supportsXHR=d}),98);
__d("VideoUploadFile",["VideoUploadFeatureDetector","fileSlice","md5"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$3=n,this.$4=r==null?void 0:r.toLowerCase()}e.fromBlob=function(n){var t=n.type.indexOf("/")!=-1?"."+n.type.split("/").pop().toLowerCase():"",r="blob"+t,o=new File([n],r,{type:n.type});return e.fromFile(o)},e.fromFile=function(n){var t=e.getExtensionFromFileName(n.name);return new this(null,n,n.size,t)},e.fromFileInput=function(n){var t=null,r=null,a=e.getExtensionFromFileInput(n);return o("VideoUploadFeatureDetector").supportsFileAPI()&&n.files.length&&(t=n.files[0],r=t.size),new this(n,t,r,a)};var t=e.prototype;return t.getFileInput=function(){return this.$1},t.getFile=function(){return this.$2},t.getSize=function(){return this.$3},t.getExtension=function(){return this.$4},t.getCreatorProduct=function(){return this.$4==="gif"?4:2},t.getChunk=function(t,n){return this.$2!=null?r("fileSlice").call(this.$2,t,n):null},t.getFilePath=function(){var e;return(e=this.$2)==null?void 0:e.name},t.getStableAssetID=function(){var e;return(e=r("md5")(this.getFilePath()))!=null?e:"unknown"},e.getExtensionFromFileInput=function(t){return this.getExtensionFromFileName(t.value)},e.getExtensionFromFileName=function(t){return t!=null&&t.indexOf(".")!==-1?t.split(".").pop().toLowerCase():""},e})();l.default=e}),98);
__d("WaterfallIDGenerator",["CurrentUser","md5","uuidv4"],(function(t,n,r,o,a,i,l){function e(){var e=2147483647;return Math.random()*e}function s(){return Math.floor(Date.now()/1e3)}function u(){var t=r("md5")([r("CurrentUser").getID(),s(),e()].join(":"));return t==null?r("uuidv4")():t}l.generate=u}),98);
__d("enumUtils",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return Object.values(t).find(function(t){return t===e})}function s(t,n){return t==null?null:e(t,n)}function u(e,t){if(e!=null){for(var n of Object.keys(t))if(n===e)return n}return null}function c(t,n){return r("nullthrows")(e(t,n))}function d(e,t){return r("nullthrows")(u(e,t))}function m(e,t){var n=[];for(var r of e)n.push(c(r,t));return n}function p(e,t){var n;return(n=t[e])!=null?n:null}function _(e,t){return r("nullthrows")(p(e,t))}function f(e,t){var n=[];for(var r of e)n.push(_(r,t));return n}function g(e,t){var n;return Object.keys(t).forEach(function(r){t[r]===e&&(n=r)}),n}function h(e,t){return r("nullthrows")(g(e,t))}l.coerce=e,l.coerceNullable=s,l.coerceKey=u,l.assert=c,l.assertKey=d,l.assertIterable=m,l.coerceFromKey=p,l.assertFromKey=_,l.assertIterableFromKey=f,l.enumValueToKey=g,l.enumValueToKeyEnforcing=h}),98);
__d("ISOCountryCode",[],(function(t,n,r,o,a,i){var e=Object.freeze({AC:"AC",AD:"AD",AE:"AE",AF:"AF",AG:"AG",AI:"AI",AL:"AL",AM:"AM",AN:"AN",AO:"AO",AQ:"AQ",AR:"AR",AS:"AS",AT:"AT",AU:"AU",AW:"AW",AX:"AX",AZ:"AZ",BA:"BA",BB:"BB",BD:"BD",BE:"BE",BF:"BF",BG:"BG",BH:"BH",BI:"BI",BJ:"BJ",BL:"BL",BM:"BM",BN:"BN",BO:"BO",BQ:"BQ",BR:"BR",BS:"BS",BT:"BT",BV:"BV",BW:"BW",BY:"BY",BZ:"BZ",CA:"CA",CC:"CC",CD:"CD",CF:"CF",CG:"CG",CH:"CH",CI:"CI",CK:"CK",CL:"CL",CM:"CM",CN:"CN",CO:"CO",CR:"CR",CU:"CU",CV:"CV",CW:"CW",CX:"CX",CY:"CY",CZ:"CZ",DE:"DE",DJ:"DJ",DK:"DK",DM:"DM",DO:"DO",DZ:"DZ",EC:"EC",EE:"EE",EG:"EG",EH:"EH",ER:"ER",ES:"ES",ET:"ET",FI:"FI",FJ:"FJ",FK:"FK",FM:"FM",FO:"FO",FR:"FR",GA:"GA",GB:"GB",GD:"GD",GE:"GE",GF:"GF",GG:"GG",GH:"GH",GI:"GI",GL:"GL",GM:"GM",GN:"GN",GP:"GP",GQ:"GQ",GR:"GR",GS:"GS",GT:"GT",GU:"GU",GW:"GW",GY:"GY",HK:"HK",HM:"HM",HN:"HN",HR:"HR",HT:"HT",HU:"HU",ID:"ID",IE:"IE",IL:"IL",IM:"IM",IN:"IN",IO:"IO",IQ:"IQ",IR:"IR",IS:"IS",IT:"IT",JE:"JE",JM:"JM",JO:"JO",JP:"JP",KE:"KE",KG:"KG",KH:"KH",KI:"KI",KM:"KM",KN:"KN",KP:"KP",KR:"KR",KW:"KW",KY:"KY",KZ:"KZ",LA:"LA",LB:"LB",LC:"LC",LI:"LI",LK:"LK",LR:"LR",LS:"LS",LT:"LT",LU:"LU",LV:"LV",LY:"LY",MA:"MA",MC:"MC",MD:"MD",ME:"ME",MF:"MF",MG:"MG",MH:"MH",MK:"MK",ML:"ML",MM:"MM",MN:"MN",MO:"MO",MP:"MP",MQ:"MQ",MR:"MR",MS:"MS",MT:"MT",MU:"MU",MV:"MV",MW:"MW",MX:"MX",MY:"MY",MZ:"MZ",NA:"NA",NC:"NC",NE:"NE",NF:"NF",NG:"NG",NI:"NI",NL:"NL",NO:"NO",NP:"NP",NR:"NR",NU:"NU",NZ:"NZ",OM:"OM",PA:"PA",PE:"PE",PF:"PF",PG:"PG",PH:"PH",PK:"PK",PL:"PL",PM:"PM",PN:"PN",PR:"PR",PS:"PS",PT:"PT",PW:"PW",PY:"PY",QA:"QA",RE:"RE",RO:"RO",RS:"RS",RU:"RU",RW:"RW",SA:"SA",SB:"SB",SC:"SC",SD:"SD",SE:"SE",SG:"SG",SH:"SH",SI:"SI",SJ:"SJ",SK:"SK",SL:"SL",SM:"SM",SN:"SN",SO:"SO",SR:"SR",SS:"SS",ST:"ST",SV:"SV",SX:"SX",SY:"SY",SZ:"SZ",TC:"TC",TD:"TD",TF:"TF",TG:"TG",TH:"TH",TJ:"TJ",TK:"TK",TL:"TL",TM:"TM",TN:"TN",TO:"TO",TR:"TR",TT:"TT",TV:"TV",TW:"TW",TZ:"TZ",UA:"UA",UG:"UG",UM:"UM",US:"US",UY:"UY",UZ:"UZ",VA:"VA",VC:"VC",VE:"VE",VG:"VG",VI:"VI",VN:"VN",VU:"VU",WF:"WF",WS:"WS",XK:"XK",YE:"YE",YT:"YT",ZA:"ZA",ZM:"ZM",ZW:"ZW"});i.default=e}),66);
__d("getIsEligibleFor180SecondReelLimit",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("9083")}l.default=e}),98);
__d("ResumableUploadService",["cr:720"],(function(t,n,r,o,a,i,l){l.default=n("cr:720")}),98);
__d("MediaUploadCancelFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743942"),s=o("FalcoLoggerInternal").create("media_upload_cancel",e),u=s;l.default=u}),98);
__d("MediaUploadFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743943"),s=o("FalcoLoggerInternal").create("media_upload_failure",e),u=s;l.default=u}),98);
__d("MediaUploadFlowFatalFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743945"),s=o("FalcoLoggerInternal").create("media_upload_flow_fatal",e),u=s;l.default=u}),98);
__d("MediaUploadFlowGiveupFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743946"),s=o("FalcoLoggerInternal").create("media_upload_flow_giveup",e),u=s;l.default=u}),98);
__d("MediaUploadFlowStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743948"),s=o("FalcoLoggerInternal").create("media_upload_flow_start",e),u=s;l.default=u}),98);
__d("MediaUploadFlowSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743949"),s=o("FalcoLoggerInternal").create("media_upload_flow_success",e),u=s;l.default=u}),98);
__d("MediaUploadInitFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743950"),s=o("FalcoLoggerInternal").create("media_upload_init_failure",e),u=s;l.default=u}),98);
__d("MediaUploadInitStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743951"),s=o("FalcoLoggerInternal").create("media_upload_init_start",e),u=s;l.default=u}),98);
__d("MediaUploadInitSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743952"),s=o("FalcoLoggerInternal").create("media_upload_init_success",e),u=s;l.default=u}),98);
__d("MediaUploadProcessFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743954"),s=o("FalcoLoggerInternal").create("media_upload_process_failure",e),u=s;l.default=u}),98);
__d("MediaUploadProcessSkippedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743955"),s=o("FalcoLoggerInternal").create("media_upload_process_skipped",e),u=s;l.default=u}),98);
__d("MediaUploadProcessStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743956"),s=o("FalcoLoggerInternal").create("media_upload_process_start",e),u=s;l.default=u}),98);
__d("MediaUploadProcessSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743957"),s=o("FalcoLoggerInternal").create("media_upload_process_success",e),u=s;l.default=u}),98);
__d("MediaUploadStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743958"),s=o("FalcoLoggerInternal").create("media_upload_start",e),u=s;l.default=u}),98);
__d("MediaUploadSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743959"),s=o("FalcoLoggerInternal").create("media_upload_success",e),u=s;l.default=u}),98);
__d("MediaUploadTransferCancelFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743960"),s=o("FalcoLoggerInternal").create("media_upload_transfer_cancel",e),u=s;l.default=u}),98);
__d("MediaUploadTransferFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743961"),s=o("FalcoLoggerInternal").create("media_upload_transfer_failure",e),u=s;l.default=u}),98);
__d("MediaUploadTransferStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743962"),s=o("FalcoLoggerInternal").create("media_upload_transfer_start",e),u=s;l.default=u}),98);
__d("MediaUploadTransferSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743963"),s=o("FalcoLoggerInternal").create("media_upload_transfer_success",e),u=s;l.default=u}),98);
__d("cometComposerMediaUploadLogger",["MediaUploadCancelFalcoEvent","MediaUploadFailureFalcoEvent","MediaUploadFlowFatalFalcoEvent","MediaUploadFlowGiveupFalcoEvent","MediaUploadFlowStartFalcoEvent","MediaUploadFlowSuccessFalcoEvent","MediaUploadInitFailureFalcoEvent","MediaUploadInitStartFalcoEvent","MediaUploadInitSuccessFalcoEvent","MediaUploadProcessFailureFalcoEvent","MediaUploadProcessSkippedFalcoEvent","MediaUploadProcessStartFalcoEvent","MediaUploadProcessSuccessFalcoEvent","MediaUploadStartFalcoEvent","MediaUploadSuccessFalcoEvent","MediaUploadTransferCancelFalcoEvent","MediaUploadTransferFailureFalcoEvent","MediaUploadTransferStartFalcoEvent","MediaUploadTransferSuccessFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e.type){case"MEDIA_RESIZE_START":s(e.fields,t);break;case"MEDIA_RESIZE_SUCCESS":u(e.fields,t);break;case"MEDIA_RESIZE_FAILURE":e.fields;break;case"MEDIA_UPLOAD_START":d(e.fields,t);break;case"MEDIA_UPLOAD_SUCCESS":m(e.fields,t);break;case"MEDIA_UPLOAD_FAILURE":p(e.fields,t);break;case"MEDIA_UPLOAD_CANCEL":_(e.fields,t);break;case"MEDIA_UPLOAD_PROCESS_START":f(e.fields,t);break;case"MEDIA_UPLOAD_PROCESS_FAILURE":g(e.fields,t);break;case"MEDIA_UPLOAD_PROCESS_CANCEL":h(e.fields,t);break;case"MEDIA_UPLOAD_PROCESS_SKIPPED":y(e.fields,t);break;case"MEDIA_UPLOAD_PROCESS_SUCCESS":C(e.fields,t);break;case"MEDIA_UPLOAD_TRANSFER_START":b(e.fields,t);break;case"MEDIA_UPLOAD_TRANSFER_FAILURE":v(e.fields,t);break;case"MEDIA_UPLOAD_TRANSFER_CANCEL":S(e.fields,t);break;case"MEDIA_UPLOAD_TRANSFER_SUCCESS":R(e.fields,t);break;case"MEDIA_UPLOAD_FLOW_START":L(e.fields,t);break;case"MEDIA_UPLOAD_FLOW_SUCCESS":E(e.fields,t);break;case"MEDIA_UPLOAD_FLOW_FATAL":k(e.fields,t);break;case"MEDIA_UPLOAD_FLOW_GIVEUP":I(e.fields,t);break;case"MEDIA_UPLOAD_INIT_START":T(e.fields,t);break;case"MEDIA_UPLOAD_INIT_SUCCESS":D(e.fields,t);break;case"MEDIA_UPLOAD_INIT_FAILURE":x(e.fields,t);break;default:break}}function s(e,t){var n,r,o,a,i,l={creation_session_id:t,media_id:e==null?void 0:e.media_id,media_type:(n=e==null?void 0:e.media_type)!=null?n:"",source_file_size:e==null||(r=e.source_file_size)==null?void 0:r.toString(),source_height_int:e==null||(o=e.source_height_int)==null?void 0:o.toString(),source_type:e==null||(a=e.source_type)==null?void 0:a.toString(),source_width_int:e==null||(i=e.source_width_int)==null?void 0:i.toString()}}function u(e,t){var n,r,o,a,i,l,s,u={creation_session_id:t,media_id:e==null?void 0:e.media_id,media_type:(n=e==null?void 0:e.media_type)!=null?n:"",source_file_size:e==null||(r=e.source_file_size)==null?void 0:r.toString(),source_height_int:e==null||(o=e.source_height_int)==null?void 0:o.toString(),source_type:e==null||(a=e.source_type)==null?void 0:a.toString(),source_width_int:e==null||(i=e.source_width_int)==null?void 0:i.toString(),upload_height_int:e==null||(l=e.upload_height_int)==null?void 0:l.toString(),upload_width_int:e==null||(s=e.upload_width_int)==null?void 0:s.toString()}}function c(e,t){}function d(e,t){r("MediaUploadStartFalcoEvent").log(function(){return $(e,t)})}function m(e,t){r("MediaUploadSuccessFalcoEvent").log(function(){return $(e,t)})}function p(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,error_code:e==null?void 0:e.error_code,error_description:e==null?void 0:e.error_description,error_summary:e==null?void 0:e.error_summary,is_optimistic_upload:e==null?void 0:e.is_optimistic_upload,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_id:e==null?void 0:e.media_id,media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker,video_edits_applied:e==null?void 0:e.video_edits_applied};r("MediaUploadFailureFalcoEvent").log(function(){return s})}function _(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,is_optimistic_upload:e==null?void 0:e.is_optimistic_upload,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker,video_edits_applied:e==null?void 0:e.video_edits_applied};r("MediaUploadCancelFalcoEvent").log(function(){return s})}function f(e,t){r("MediaUploadProcessStartFalcoEvent").log(function(){return $(e,t)})}function g(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,is_optimistic_upload:e==null?void 0:e.is_optimistic_upload,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker,video_edits_applied:e==null?void 0:e.video_edits_applied};r("MediaUploadProcessFailureFalcoEvent").log(function(){return s})}function h(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,is_optimistic_upload:e==null?void 0:e.is_optimistic_upload,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker,video_edits_applied:e==null?void 0:e.video_edits_applied};r("MediaUploadProcessFailureFalcoEvent").log(function(){return s})}function y(e,t){var n,o,a,i,l,s,u={creation_session_id:t,media_type:(n=e==null?void 0:e.media_type)!=null?n:"",original_file_size:e==null||(o=e.original_file_size)==null?void 0:o.toString(),source:e==null?void 0:e.source,source_bit_rate:e==null||(a=e.source_bit_rate)==null?void 0:a.toString(),source_height:e==null||(i=e.source_height)==null?void 0:i.toString(),source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null||(s=e.source_width)==null?void 0:s.toString()};r("MediaUploadProcessSkippedFalcoEvent").log(function(){return u})}function C(e,t){r("MediaUploadProcessSuccessFalcoEvent").log(function(){return $(e,t)})}function b(e,t){var n,o,a,i,l,s,u={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_id:e==null?void 0:e.media_id,media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null||(l=e.source_height)==null?void 0:l.toString(),source_type:e==null||(s=e.source_type)==null?void 0:s.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadTransferStartFalcoEvent").log(function(){return u})}function v(e,t){var n,o,a,i,l,s,u={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null||(l=e.source_height)==null?void 0:l.toString(),source_type:e==null||(s=e.source_type)==null?void 0:s.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadTransferFailureFalcoEvent").log(function(){return u})}function S(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadTransferCancelFalcoEvent").log(function(){return s})}function R(e,t){var n,o,a,i,l,s,u={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_id:e==null?void 0:e.media_id,media_item_fbid:e==null?void 0:e.media_item_fbid,media_session_id:e==null?void 0:e.media_session_id,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null||(l=e.source_height)==null?void 0:l.toString(),source_type:e==null||(s=e.source_type)==null?void 0:s.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadTransferSuccessFalcoEvent").log(function(){return u})}function L(e,t){var n,o={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_id:e==null?void 0:e.media_id,media_type:e==null?void 0:e.media_type,original_file_size:e==null||(n=e.original_file_size)==null?void 0:n.toString(),source:e==null?void 0:e.source,source_type:e==null?void 0:e.source_type,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadFlowStartFalcoEvent").log(function(){return o})}function E(e,t){var n,o,a,i,l,s,u={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_id:e==null?void 0:e.media_id,media_item_fbid:e==null?void 0:e.media_item_fbid,media_type:e==null?void 0:e.media_type,original_file_size:e==null||(o=e.original_file_size)==null?void 0:o.toString(),source:e==null?void 0:e.source,source_bit_rate:e==null||(a=e.source_bit_rate)==null?void 0:a.toString(),source_height:e==null||(i=e.source_height)==null?void 0:i.toString(),source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null||(s=e.source_width)==null?void 0:s.toString(),use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadFlowSuccessFalcoEvent").log(function(){return u})}function k(e,t){var n,o,a,i,l,s,u={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_type:e==null?void 0:e.media_type,original_file_size:e==null||(n=e.original_file_size)==null?void 0:n.toString(),source:e==null?void 0:e.source,source_bit_rate:e==null||(o=e.source_bit_rate)==null?void 0:o.toString(),source_file_size:e==null||(a=e.source_file_size)==null?void 0:a.toString(),source_height:e==null||(i=e.source_height)==null?void 0:i.toString(),source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null||(s=e.source_width)==null?void 0:s.toString(),use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadFlowFatalFalcoEvent").log(function(){return u})}function I(e,t){var n={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_type:e==null?void 0:e.media_type,source:e==null?void 0:e.source,source_type:e==null?void 0:e.source_type,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadFlowGiveupFalcoEvent").log(function(){return n})}function T(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadInitStartFalcoEvent").log(function(){return s})}function D(e,t){var n,o,a,i,l,s,u={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null||(l=e.source_height)==null?void 0:l.toString(),source_type:e==null||(s=e.source_type)==null?void 0:s.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadInitSuccessFalcoEvent").log(function(){return u})}function x(e,t){var n,o,a,i,l,s={author_is_page:e==null?void 0:e.author_is_page,creation_session_id:t,media_data_size:e==null||(n=e.media_data_size)==null?void 0:n.toString(),media_item_fbid:e==null?void 0:e.media_item_fbid,media_type:(o=e==null?void 0:e.media_type)!=null?o:"",original_file_size:e==null||(a=e.original_file_size)==null?void 0:a.toString(),share_type:e==null?void 0:e.share_type,source:e==null?void 0:e.source,source_bit_rate:e==null?void 0:e.source_bit_rate,source_file_size:e==null||(i=e.source_file_size)==null?void 0:i.toString(),source_height:e==null?void 0:e.source_height,source_type:e==null||(l=e.source_type)==null?void 0:l.toString(),source_width:e==null?void 0:e.source_width,use_fb_image_picker:e==null?void 0:e.use_fb_image_picker};r("MediaUploadInitFailureFalcoEvent").log(function(){return s})}function $(e,t){var n={creation_session_id:t};return babelHelpers.extends({},e,n)}l.default=e}),98);
__d("getMediaFile",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.file}i.default=e}),66);
__d("getVideoTrimSettings",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.extra.trimData}i.default=e}),66);
__d("ComposerMediaFileUploader",["fbt","ActorURI","QuickPerformanceLogger","ReactComposerMediaConfig","VideoUploadFile","VideoUploadFlowNotifier","VideoUploadSurface","VideoUploader","XComposerPhotoUploader","cometComposerMediaUploadLogger","getMediaFile","getVideoTrimSettings","qpl"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(function(){function e(){this.subscribers=[]}var t=e.prototype;return t.subscribe=function(t){this.subscribers.push(t)},t.notify=function(t){this.subscribers.forEach(function(e){return e(t)})},t.unsubscribe=function(t){this.subscribers=this.subscribers.filter(function(e){return e!==t})},e})(),c=new Map,d=(function(){function t(e,t,n,r){var a,i;this.startedObserver=new u,this.progressObserver=new u,this.successObserver=new u,this.errorObserver=new u,this.sphericalImageDetectedObserver=new u,this.uploadStatuses=new Map,this.uploadStatusChangeObserver=new u,this.videoUploadsQueue=[],this.actorID=e,this.videoUploaderConfig=t,this.creationSessionID=n!=null?n:"",this.photoUploader=this.$1(this.actorID,r),this.videoUploader=this.$2(this.videoUploaderConfig,this.creationSessionID),this.videoUploadFlowNotifier=o("VideoUploadFlowNotifier").createVideoUploadFlowNotifier({cancel_on_leave:!1,composer_entry_point_ref:(a=this.videoUploaderConfig.composer_entry_point_ref)!=null?a:"unknown",composer_session_id:(i=this.creationSessionID)!=null?i:"",extended_flow_logging_enabled:!0,source:this.videoUploaderConfig.source}),o("VideoUploadSurface").VideoUploadSurface.getOrCreate(o("VideoUploadSurface").VideoUploadSurfaceIDs.FEED).notifiers().register(this.videoUploadFlowNotifier,this.creationSessionID)}var n=t.prototype;return n.$3=function(t,n){var e,r=(e=this.uploadStatuses.get(t))==null?void 0:e.bytesTotal;r!=null&&(this.uploadStatuses.set(t,{bytesLoaded:n!=null?n:r,bytesTotal:r}),this.uploadStatusChangeObserver.notify(this.uploadStatuses))},n.$1=function(n,a){var t=this;return new(r("XComposerPhotoUploader"))({concurrentLimit:r("ReactComposerMediaConfig").photo.concurrentLimit,onUploadFailure:function(n,r){var e,o;t.$4(n,"PHOTO",(e=r.response.getErrorDescriptionString())!=null?e:"",null,r.response.error.toString()),t.errorObserver.notify({entID:(o=r.response.payload)==null?void 0:o.photoID,error:r.response.getErrorSummary(),uploadID:n})},onUploadIsSpherical:function(n,r,o){n&&r&&t.sphericalImageDetectedObserver.notify({isSpherical:n,sphericalImage:r,uploadID:o})},onUploadProgress:function(n,r){var e=Math.min(1,Math.max(0,r.event.loaded/r.event.total));t.progressObserver.notify({percentComplete:e,uploadID:n}),t.$3(n,r.event.loaded)},onUploadStart:function(n,r){t.$5(n,"PHOTO"),t.startedObserver.notify({uploadID:n})},onUploadSuccess:function(o,a){var n=a.response.payload;if(n==null){var i;t.$4(o,"PHOTO",(i=a.response.getErrorDescriptionString())!=null?i:""),t.errorObserver.notify({entID:null,error:a.response.getErrorSummary(),uploadID:o})}else t.$6(o,n.photoID,"PHOTO"),t.successObserver.notify({attachmentType:"PHOTO",entID:n.photoID,imageURL:n.imageSrc,takenTime:n.mediaTakenTime?n.mediaTakenTime*1e3:null,uploadID:o}),t.$3(o),(e||(e=r("QuickPerformanceLogger"))).markerStart(r("qpl")._(741087294,"2028")),e.markerAnnotate(r("qpl")._(741087294,"2028"),{int:{height:n.height,width:n.width}}),e.markerEnd(r("qpl")._(741087294,"2028"),2)},retryLimit:r("ReactComposerMediaConfig").photo.retryLimit,uploadData:babelHelpers.extends({},r("ReactComposerMediaConfig").photo.uploadData,{source:8},a?{work_shared_draft_mode:"drafter_creating"}:{}),uploadEndpoint:o("ActorURI").create(r("ReactComposerMediaConfig").photo.uploadEndpoint,this.actorID)})},n.$2=function(t,n){var e=babelHelpers.extends({},t,{isMultiMediaPost:!0,waterfall_id:n});return new(r("VideoUploader"))(e)},n.upload=function(t,n){var e=this;t.forEach(function(t){var n=t.file,r=n.uploadID;r!=null&&e.uploadStatuses.get(r)==null&&e.uploadStatuses.set(r,{bytesLoaded:0,bytesTotal:n.size})}),this.uploadStatusChangeObserver.notify(this.uploadStatuses),this.$7(t.filter(function(e){var t=e.extra;return t.fileType==="PHOTO"}).map(function(e){var t=e.file;return t}),n),this.$8(t.filter(function(e){var t=e.extra;return t.fileType==="VIDEO"}))},n.$7=function(t,n){t.length>0&&this.photoUploader.getAsyncUploadRequest(t,{preventDefaultErrorHandler:n}).send()},n.$8=function(t){var e=this;if(t.length>0&&(this.videoUploadsQueue=this.videoUploadsQueue.concat(t)),this.videoUploadsQueue.length>0&&!this.videoUploader.isSessionExist()){var n=this.videoUploadsQueue.shift(),o=r("getMediaFile")(n);this.currentVideoUploadID=o.uploadID,this.videoUploader=this.$2(this.videoUploaderConfig,this.creationSessionID);var a=this.videoUploader;a.subscribe("upload-started",function(t,n){var r=o.uploadID;e.$5(r!=null?r:"","VIDEO"),r!=null&&e.startedObserver.notify({uploadID:r})}),a.subscribe("upload-progressed",function(t,n){var r=Math.min(1,Math.max(0,(n.start_offset+n.sent_bytes)/n.file_size)),i=o.uploadID;i!=null&&(e.progressObserver.notify({entID:a.getVideoID(),percentComplete:r,uploadID:i}),e.$3(i,n.start_offset+n.sent_bytes))}),a.subscribe("upload-finished",function(t,n){a.reset();var r=o.uploadID;e.$6(r!=null?r:"",n.video_id,"VIDEO"),r!=null&&(e.successObserver.notify({attachmentType:"VIDEO",entID:n.video_id,uploadID:r}),e.$3(r)),e.$8([])}),a.subscribe("upload-failed",function(t,n){var r=o.uploadID;if(e.$4(r!=null?r:"","VIDEO",n.error_description,n.video_id,n.error_code,n.error_summary),r!=null){var a;e.errorObserver.notify({entID:n.video_id,error:(a=n.error_description)!=null?a:s._(/*BTDS*/"Something went wrong and your video couldn't be uploaded. Please try again."),uploadID:r})}e.$8([])}),a.subscribe("upload-canceled",function(t){var n=o.uploadID;e.$9(n!=null?n:"","VIDEO")}),this.videoUploadFlowNotifier.registerVideoUpload(a,o.uploadID);var i=null,l=r("getVideoTrimSettings")(n);l!=null&&(i=[{params:{trim_end:l.videoTrimEnd,trim_start:l.videoTrimStart},type:"VideoTrim"}]),a.upload(r("VideoUploadFile").fromFile(o),{creativeTools:i})}},n.$5=function(t,n){r("cometComposerMediaUploadLogger")({fields:{media_id:t,media_type:n},type:"MEDIA_UPLOAD_TRANSFER_START"},this.creationSessionID)},n.$6=function(t,n,o){r("cometComposerMediaUploadLogger")({fields:{media_id:t,media_item_fbid:n,media_type:o},type:"MEDIA_UPLOAD_TRANSFER_SUCCESS"},this.creationSessionID),r("cometComposerMediaUploadLogger")({fields:{media_id:t,media_item_fbid:n,media_type:o},type:"MEDIA_UPLOAD_SUCCESS"},this.creationSessionID),r("cometComposerMediaUploadLogger")({fields:{media_id:t,media_item_fbid:n,media_type:o},type:"MEDIA_UPLOAD_FLOW_SUCCESS"},this.creationSessionID)},n.$4=function(t,n,o,a,i,l){r("cometComposerMediaUploadLogger")({fields:{error_code:i,error_description:o,error_summary:l,media_id:t,media_item_fbid:a,media_type:n},type:"MEDIA_UPLOAD_FAILURE"},this.creationSessionID)},n.$9=function(t,n){r("cometComposerMediaUploadLogger")({fields:{media_id:t,media_type:n},type:"MEDIA_UPLOAD_CANCEL"},this.creationSessionID)},n.getCreationSessionID=function(){return this.creationSessionID},n.cancelUpload=function(t,n){n==="VIDEO"&&(this.videoUploadsQueue=this.videoUploadsQueue.filter(function(e){return r("getMediaFile")(e).uploadID!==t}),this.currentVideoUploadID===t&&(this.videoUploader.cancel(),this.$8([])))},t})(),m={createOrGetInstance:function(t,n,r,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1);var e=c.get(t)||new d(t,n,r,a);if(e.creationSessionID!==r||i){var l;e.creationSessionID=r!=null?r:"",e.videoUploaderConfig=n,e.videoUploadFlowNotifier=o("VideoUploadFlowNotifier").createVideoUploadFlowNotifier({cancel_on_leave:!1,composer_entry_point_ref:(l=e.videoUploaderConfig.composer_entry_point_ref)!=null?l:"unknown",composer_session_id:r!=null?r:"",extended_flow_logging_enabled:!0,source:e.videoUploaderConfig.source}),o("VideoUploadSurface").VideoUploadSurface.getOrCreate(o("VideoUploadSurface").VideoUploadSurfaceIDs.FEED).notifiers().register(e.videoUploadFlowNotifier,e.creationSessionID)}c.set(t,e);var s=function(){c.delete(t)};return[e,s]},getInstance:function(t){return c.get(t)}};l.default=m}),226);
/**
 * License: https://www.facebook.com/legal/license/BDuAztjQnAL/
 */
__d("CryptoJS",[],(function(t,n,r,o,a,i){(function(e,t){typeof i=="object"?a.exports=i=t():typeof define=="function"&&define.amd?define([],t):e.CryptoJS=t()})(this,function(){var e=e||(function(e,t){var n=Object.create||(function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}})(),r={},o=r.lib={},a=o.Base=(function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),i=o.WordArray=a.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<o;a++){var i=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=i<<24-(r+a)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var o=(n<<16)+t&r;return o/=4294967296,o+=.5,o*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var l=o(4294967296*(n||e.random()));n=987654071*l(),r.push(4294967296*l()|0)}return new i.init(r,t)}}),l=r.enc={},s=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},u=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var a=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},c=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){typeof e=="string"&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,l=4*a,s=o/l;s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);var u=s*a,c=e.min(4*u,o);if(u){for(var d=0;d<u;d+=a)this._doProcessBlock(r,d);var m=r.splice(0,u);n.sigBytes-=c}return new i.init(m,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(o.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r})(Math);return(function(){function t(e,t,n){for(var r=[],a=0,i=0;i<t;i++)if(i%4){var l=n[e.charCodeAt(i-1)]<<i%4*2,s=n[e.charCodeAt(i)]>>>6-i%4*2;r[a>>>2]|=(l|s)<<24-a%4*8,a++}return o.create(r,a)}var n=e,r=n.lib,o=r.WordArray,a=n.enc;a.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],a=0;a<n;a+=3)for(var i=t[a>>>2]>>>24-a%4*8&255,l=t[a+1>>>2]>>>24-(a+1)%4*8&255,s=t[a+2>>>2]>>>24-(a+2)%4*8&255,u=i<<16|l<<8|s,c=0;c<4&&a+.75*c<n;c++)o.push(r.charAt(u>>>6*(3-c)&63));var d=r.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var n=e.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<r.length;a++)o[r.charCodeAt(a)]=a}var i=r.charAt(64);if(i){var l=e.indexOf(i);l!==-1&&(n=l)}return t(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),(function(t){function n(e,t,n,r,o,a,i){var l=e+(t&n|~t&r)+o+i;return(l<<a|l>>>32-a)+t}function r(e,t,n,r,o,a,i){var l=e+(t&r|n&~r)+o+i;return(l<<a|l>>>32-a)+t}function o(e,t,n,r,o,a,i){var l=e+(t^n^r)+o+i;return(l<<a|l>>>32-a)+t}function a(e,t,n,r,o,a,i){var l=e+(n^(t|~r))+o+i;return(l<<a|l>>>32-a)+t}var i=e,l=i.lib,s=l.WordArray,u=l.Hasher,c=i.algo,d=[];(function(){for(var e=0;e<64;e++)d[e]=4294967296*t.abs(t.sin(e+1))|0})();var m=c.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var l=t+i,s=e[l];e[l]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var u=this._hash.words,c=e[t+0],m=e[t+1],p=e[t+2],_=e[t+3],f=e[t+4],g=e[t+5],h=e[t+6],y=e[t+7],C=e[t+8],b=e[t+9],v=e[t+10],S=e[t+11],R=e[t+12],L=e[t+13],E=e[t+14],k=e[t+15],I=u[0],T=u[1],D=u[2],x=u[3];I=n(I,T,D,x,c,7,d[0]),x=n(x,I,T,D,m,12,d[1]),D=n(D,x,I,T,p,17,d[2]),T=n(T,D,x,I,_,22,d[3]),I=n(I,T,D,x,f,7,d[4]),x=n(x,I,T,D,g,12,d[5]),D=n(D,x,I,T,h,17,d[6]),T=n(T,D,x,I,y,22,d[7]),I=n(I,T,D,x,C,7,d[8]),x=n(x,I,T,D,b,12,d[9]),D=n(D,x,I,T,v,17,d[10]),T=n(T,D,x,I,S,22,d[11]),I=n(I,T,D,x,R,7,d[12]),x=n(x,I,T,D,L,12,d[13]),D=n(D,x,I,T,E,17,d[14]),T=n(T,D,x,I,k,22,d[15]),I=r(I,T,D,x,m,5,d[16]),x=r(x,I,T,D,h,9,d[17]),D=r(D,x,I,T,S,14,d[18]),T=r(T,D,x,I,c,20,d[19]),I=r(I,T,D,x,g,5,d[20]),x=r(x,I,T,D,v,9,d[21]),D=r(D,x,I,T,k,14,d[22]),T=r(T,D,x,I,f,20,d[23]),I=r(I,T,D,x,b,5,d[24]),x=r(x,I,T,D,E,9,d[25]),D=r(D,x,I,T,_,14,d[26]),T=r(T,D,x,I,C,20,d[27]),I=r(I,T,D,x,L,5,d[28]),x=r(x,I,T,D,p,9,d[29]),D=r(D,x,I,T,y,14,d[30]),T=r(T,D,x,I,R,20,d[31]),I=o(I,T,D,x,g,4,d[32]),x=o(x,I,T,D,C,11,d[33]),D=o(D,x,I,T,S,16,d[34]),T=o(T,D,x,I,E,23,d[35]),I=o(I,T,D,x,m,4,d[36]),x=o(x,I,T,D,f,11,d[37]),D=o(D,x,I,T,y,16,d[38]),T=o(T,D,x,I,v,23,d[39]),I=o(I,T,D,x,L,4,d[40]),x=o(x,I,T,D,c,11,d[41]),D=o(D,x,I,T,_,16,d[42]),T=o(T,D,x,I,h,23,d[43]),I=o(I,T,D,x,b,4,d[44]),x=o(x,I,T,D,R,11,d[45]),D=o(D,x,I,T,k,16,d[46]),T=o(T,D,x,I,p,23,d[47]),I=a(I,T,D,x,c,6,d[48]),x=a(x,I,T,D,y,10,d[49]),D=a(D,x,I,T,E,15,d[50]),T=a(T,D,x,I,g,21,d[51]),I=a(I,T,D,x,R,6,d[52]),x=a(x,I,T,D,_,10,d[53]),D=a(D,x,I,T,v,15,d[54]),T=a(T,D,x,I,m,21,d[55]),I=a(I,T,D,x,C,6,d[56]),x=a(x,I,T,D,k,10,d[57]),D=a(D,x,I,T,h,15,d[58]),T=a(T,D,x,I,L,21,d[59]),I=a(I,T,D,x,f,6,d[60]),x=a(x,I,T,D,S,10,d[61]),D=a(D,x,I,T,p,15,d[62]),T=a(T,D,x,I,b,21,d[63]),u[0]=u[0]+I|0,u[1]=u[1]+T|0,u[2]=u[2]+D|0,u[3]=u[3]+x|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var a=t.floor(r/4294967296),i=r;n[(o+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process();for(var l=this._hash,s=l.words,u=0;u<4;u++){var c=s[u];s[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return l},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}});i.MD5=u._createHelper(m),i.HmacMD5=u._createHmacHelper(m)})(Math),(function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,i=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],l=n[3],s=n[4],u=0;u<80;u++){if(u<16)i[u]=0|e[t+u];else{var c=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=c<<1|c>>>31}var d=(r<<5|r>>>27)+s+i[u];d+=u<20?(o&a|~o&l)+1518500249:u<40?(o^a^l)+1859775393:u<60?(o&a|o&l|a&l)-1894007588:(o^a^l)-899497514,s=l,l=a,a=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+l|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(l),t.HmacSHA1=o._createHmacHelper(l)})(),(function(t){var n=e,r=n.lib,o=r.WordArray,a=r.Hasher,i=n.algo,l=[],s=[];(function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(l[o]=n(t.pow(r,.5))),s[o]=n(t.pow(r,1/3)),o++),r++})();var u=[],c=i.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],i=n[3],l=n[4],c=n[5],d=n[6],m=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var _=u[p-15],f=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,g=u[p-2],h=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[p]=f+u[p-7]+h+u[p-16]}var y=l&c^~l&d,C=r&o^r&a^o&a,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),S=m+v+y+s[p]+u[p],R=b+C;m=d,d=c,c=l,l=i+S|0,i=a,a=o,o=r,r=S+R|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+d|0,n[7]=n[7]+m|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=a._createHelper(c),n.HmacSHA256=a._createHmacHelper(c)})(Math),(function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var n=e,r=n.lib,o=r.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},a.Utf16LE={stringify:function(e){for(var n=e.words,r=e.sigBytes,o=[],a=0;a<r;a+=2){var i=t(n[a>>>2]>>>16-a%4*8&65535);o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var n=e.length,r=[],a=0;a<n;a++)r[a>>>1]|=t(e.charCodeAt(a)<<16-a%2*16);return o.create(r,2*n)}}})(),(function(){if(typeof ArrayBuffer=="function"){var t=e,n=t.lib,r=n.WordArray,o=r.init,a=r.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||typeof Uint8ClampedArray!="undefined"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)};a.prototype=r}})(),(function(t){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function o(e,t,n){return(e|~t)^n}function a(e,t,n){return e&n|t&~n}function i(e,t,n){return e^(t|~n)}function l(e,t){return e<<t|e>>>32-t}var s=e,u=s.lib,c=u.WordArray,d=u.Hasher,m=s.algo,p=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),_=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=c.create([0,1518500249,1859775393,2400959708,2840853838]),y=c.create([1352829926,1548603684,1836072691,2053994217,0]),C=m.RIPEMD160=d.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var u=t+s,c=e[u];e[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var d,m,C,b,v,S,R,L,E,k,I=this._hash.words,T=h.words,D=y.words,x=p.words,$=_.words,P=f.words,N=g.words;S=d=I[0],R=m=I[1],L=C=I[2],E=b=I[3],k=v=I[4];for(var M,s=0;s<80;s+=1)M=d+e[t+x[s]]|0,M+=s<16?n(m,C,b)+T[0]:s<32?r(m,C,b)+T[1]:s<48?o(m,C,b)+T[2]:s<64?a(m,C,b)+T[3]:i(m,C,b)+T[4],M|=0,M=l(M,P[s]),M=M+v|0,d=v,v=b,b=l(C,10),C=m,m=M,M=S+e[t+$[s]]|0,M+=s<16?i(R,L,E)+D[0]:s<32?a(R,L,E)+D[1]:s<48?o(R,L,E)+D[2]:s<64?r(R,L,E)+D[3]:n(R,L,E)+D[4],M|=0,M=l(M,N[s]),M=M+k|0,S=k,k=E,E=l(L,10),L=R,R=M;M=I[1]+C+E|0,I[1]=I[2]+b+k|0,I[2]=I[3]+v+S|0,I[3]=I[4]+d+R|0,I[4]=I[0]+m+L|0,I[0]=M},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,a=o.words,i=0;i<5;i++){var l=a[i];a[i]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return o},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}});s.RIPEMD160=d._createHelper(C),s.HmacRIPEMD160=d._createHmacHelper(C)})(Math),(function(){var t=e,n=t.lib,r=n.Base,o=t.enc,a=o.Utf8,i=t.algo;i.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,typeof t=="string"&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),l=o.words,s=i.words,u=0;u<n;u++)l[u]^=1549556828,s[u]^=909522486;o.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})})(),(function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,a=t.algo,i=a.SHA1,l=a.HMAC,s=a.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=l.create(n.hasher,e),a=o.create(),i=o.create([1]),s=a.words,u=i.words,c=n.keySize,d=n.iterations;s.length<c;){var m=r.update(t).finalize(i);r.reset();for(var p=m.words,_=p.length,f=m,g=1;g<d;g++){f=r.finalize(f),r.reset();for(var h=f.words,y=0;y<_;y++)p[y]^=h[y]}a.concat(m),u[0]++}return a.sigBytes=4*c,a}});t.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}})(),(function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,a=t.algo,i=a.MD5,l=a.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),a=o.create(),i=a.words,l=n.keySize,s=n.iterations;i.length<l;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var c=1;c<s;c++)u=r.finalize(u),r.reset();a.concat(u)}return a.sigBytes=4*l,a}});t.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)}})(),(function(){var t=e,n=t.lib,r=n.WordArray,o=t.algo,a=o.SHA256,i=o.SHA224=a.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=a._createHelper(i),t.HmacSHA224=a._createHmacHelper(i)})(),(function(t){var n=e,r=n.lib,o=r.Base,a=r.WordArray,i=n.x64={};i.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})})(),(function(t){var n=e,r=n.lib,o=r.WordArray,a=r.Hasher,i=n.x64,l=i.Word,s=n.algo,u=[],c=[],d=[];(function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,o=(2*e+3*t)%5;e=r,t=o}for(var e=0;e<5;e++)for(var t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,i=0;i<24;i++){for(var s=0,m=0,p=0;p<7;p++){if(1&a){var _=(1<<p)-1;_<32?m^=1<<_:s^=1<<_-32}128&a?a=a<<1^113:a<<=1}d[i]=l.create(s,m)}})();var m=[];(function(){for(var e=0;e<25;e++)m[e]=l.create()})();var p=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var a=e[t+2*o],i=e[t+2*o+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);var l=n[o];l.high^=i,l.low^=a}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var _=0,f=0,g=0;g<5;g++){var l=n[p+5*g];_^=l.high,f^=l.low}var h=m[p];h.high=_,h.low=f}for(var p=0;p<5;p++)for(var y=m[(p+4)%5],C=m[(p+1)%5],b=C.high,v=C.low,_=y.high^(b<<1|v>>>31),f=y.low^(v<<1|b>>>31),g=0;g<5;g++){var l=n[p+5*g];l.high^=_,l.low^=f}for(var S=1;S<25;S++){var l=n[S],R=l.high,L=l.low,E=u[S];if(E<32)var _=R<<E|L>>>32-E,f=L<<E|R>>>32-E;else var _=L<<E-32|R>>>64-E,f=R<<E-32|L>>>64-E;var k=m[c[S]];k.high=_,k.low=f}var I=m[0],T=n[0];I.high=T.high,I.low=T.low;for(var p=0;p<5;p++)for(var g=0;g<5;g++){var S=p+5*g,l=n[S],D=m[S],x=m[(p+1)%5+5*g],$=m[(p+2)%5+5*g];l.high=D.high^~x.high&$.high,l.low=D.low^~x.low&$.low}var l=n[0],P=d[s];l.high^=P.high,l.low^=P.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(8*this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var i=this._state,l=this.cfg.outputLength/8,s=l/8,u=[],c=0;c<s;c++){var d=i[c],m=d.high,p=d.low;m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),u.push(p),u.push(m)}return new o.init(u,l)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=a._createHelper(p),n.HmacSHA3=a._createHmacHelper(p)})(Math),(function(){function t(){return i.create.apply(i,arguments)}var n=e,r=n.lib,o=r.Hasher,a=n.x64,i=a.Word,l=a.WordArray,s=n.algo,u=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],c=[];(function(){for(var e=0;e<80;e++)c[e]=t()})();var d=s.SHA512=o.extend({_doReset:function(){this._hash=new l.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],i=n[3],l=n[4],s=n[5],d=n[6],m=n[7],p=r.high,_=r.low,f=o.high,g=o.low,h=a.high,y=a.low,C=i.high,b=i.low,v=l.high,S=l.low,R=s.high,L=s.low,E=d.high,k=d.low,I=m.high,T=m.low,D=p,x=_,$=f,P=g,N=h,M=y,w=C,A=b,F=v,O=S,B=R,W=L,q=E,U=k,V=I,H=T,G=0;G<80;G++){var z=c[G];if(G<16)var j=z.high=0|e[t+2*G],K=z.low=0|e[t+2*G+1];else{var Q=c[G-15],X=Q.high,Y=Q.low,J=(X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7,Z=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25),ee=c[G-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ae=c[G-7],ie=ae.high,le=ae.low,se=c[G-16],ue=se.high,ce=se.low,K=Z+le,j=J+ie+(K>>>0<Z>>>0?1:0),K=K+oe,j=j+re+(K>>>0<oe>>>0?1:0),K=K+ce,j=j+ue+(K>>>0<ce>>>0?1:0);z.high=j,z.low=K}var de=F&B^~F&q,me=O&W^~O&U,pe=D&$^D&N^$&N,_e=x&P^x&M^P&M,fe=(D>>>28|x<<4)^(D<<30|x>>>2)^(D<<25|x>>>7),ge=(x>>>28|D<<4)^(x<<30|D>>>2)^(x<<25|D>>>7),he=(F>>>14|O<<18)^(F>>>18|O<<14)^(F<<23|O>>>9),ye=(O>>>14|F<<18)^(O>>>18|F<<14)^(O<<23|F>>>9),Ce=u[G],be=Ce.high,ve=Ce.low,Se=H+ye,Re=V+he+(Se>>>0<H>>>0?1:0),Se=Se+me,Re=Re+de+(Se>>>0<me>>>0?1:0),Se=Se+ve,Re=Re+be+(Se>>>0<ve>>>0?1:0),Se=Se+K,Re=Re+j+(Se>>>0<K>>>0?1:0),Le=ge+_e,Ee=fe+pe+(Le>>>0<ge>>>0?1:0);V=q,H=U,q=B,U=W,B=F,W=O,O=A+Se|0,F=w+Re+(O>>>0<A>>>0?1:0)|0,w=N,A=M,N=$,M=P,$=D,P=x,x=Se+Le|0,D=Re+Ee+(x>>>0<Se>>>0?1:0)|0}_=r.low=_+x,r.high=p+D+(_>>>0<x>>>0?1:0),g=o.low=g+P,o.high=f+$+(g>>>0<P>>>0?1:0),y=a.low=y+M,a.high=h+N+(y>>>0<M>>>0?1:0),b=i.low=b+A,i.high=C+w+(b>>>0<A>>>0?1:0),S=l.low=S+O,l.high=v+F+(S>>>0<O>>>0?1:0),L=s.low=L+W,s.high=R+B+(L>>>0<W>>>0?1:0),k=d.low=k+U,d.high=E+q+(k>>>0<U>>>0?1:0),T=m.low=T+H,m.high=I+V+(T>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),t[(r+128>>>10<<5)+31]=n,e.sigBytes=4*t.length,this._process();var o=this._hash.toX32();return o},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});n.SHA512=o._createHelper(d),n.HmacSHA512=o._createHmacHelper(d)})(),(function(){var t=e,n=t.x64,r=n.Word,o=n.WordArray,a=t.algo,i=a.SHA512,l=a.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=i._createHelper(l),t.HmacSHA384=i._createHmacHelper(l)})(),e.lib.Cipher||(function(t){var n=e,r=n.lib,o=r.Base,a=r.WordArray,i=r.BufferedBlockAlgorithm,l=n.enc,s=(l.Utf8,l.Base64),u=n.algo,c=u.EvpKDF,d=r.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function e(e){return typeof e=="string"?R:b}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}})()}),m=(r.StreamCipher=d.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),n.mode={}),p=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),_=m.CBC=(function(){function e(e,n,r){var o=this._iv;if(o){var a=o;this._iv=t}else var a=this._prevBlock;for(var i=0;i<r;i++)e[n+i]^=a[i]}var n=p.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize;e.call(this,t,n,o),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize,a=t.slice(n,n+o);r.decryptBlock(t,n),e.call(this,t,n,o),this._prevBlock=a}}),n})(),f=n.pad={},g=f.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],l=0;l<r;l+=4)i.push(o);var s=a.create(i,r);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h=(r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:_,padding:g}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=n.format={},C=y.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=a.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(s)},parse:function(e){var t=s.parse(e),n=t.words;if(n[0]==1398893684&&n[1]==1701076831){var r=a.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:r})}},b=r.SerializableCipher=o.extend({cfg:o.extend({format:C}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),a=o.finalize(t),i=o.cfg;return h.create({ciphertext:a,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=e.createDecryptor(n,r).finalize(t.ciphertext);return o},_parse:function(e,t){return typeof e=="string"?t.parse(e,this):e}}),v=n.kdf={},S=v.OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var o=c.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,h.create({key:o,iv:i,salt:r})}},R=r.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:S}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=o.iv;var a=b.encrypt.call(this,e,t,o.key,r);return a.mixIn(o),a},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=o.iv;var a=b.decrypt.call(this,e,t,o.key,r);return a}})})(),e.mode.CFB=(function(){function t(e,t,n,r){var o=this._iv;if(o){var a=o.slice(0);this._iv=void 0}else var a=this._prevBlock;r.encryptBlock(a,0);for(var i=0;i<n;i++)e[t+i]^=a[i]}var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o,r),this._prevBlock=e.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,a=e.slice(n,n+o);t.call(this,e,n,o,r),this._prevBlock=a}}),n})(),e.mode.ECB=(function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t})(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,n){var r=4*n,o=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=(function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._keystream;o&&(a=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var i=0;i<r;i++)e[t+i]^=a[i]}});return t.Decryptor=n,t})(),e.pad.NoPadding={pad:function(){},unpad:function(){}},(function(t){var n=e,r=n.lib,o=r.CipherParams,a=n.enc,i=a.Hex,l=n.format;l.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return o.create({ciphertext:t})}}})(),(function(){var t=e,n=t.lib,r=n.BlockCipher,o=t.algo,a=[],i=[],l=[],s=[],u=[],c=[],d=[],m=[],p=[],_=[];(function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var n=0,r=0,t=0;t<256;t++){var o=r^r<<1^r<<2^r<<3^r<<4;o=o>>>8^255&o^99,a[n]=o,i[o]=n;var f=e[n],g=e[f],h=e[g],y=257*e[o]^16843008*o;l[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,c[n]=y;var y=16843009*h^65537*g^257*f^16843008*n;d[o]=y<<24|y>>>8,m[o]=y<<16|y>>>16,p[o]=y<<8|y>>>24,_[o]=y,n?(n=f^e[e[e[h^f]]],r^=e[e[r]]):n=r=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,o=4*(r+1),i=this._keySchedule=[],l=0;l<o;l++)if(l<n)i[l]=t[l];else{var s=i[l-1];l%n?n>6&&l%n==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=s<<8|s>>>24,s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=f[l/n|0]<<24),i[l]=i[l-n]^s}for(var u=this._invKeySchedule=[],c=0;c<o;c++){var l=o-c;if(c%4)var s=i[l];else var s=i[l-4];c<4||l<=4?u[c]=s:u[c]=d[a[s>>>24]]^m[a[s>>>16&255]]^p[a[s>>>8&255]]^_[a[255&s]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,l,s,u,c,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,m,p,_,i);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,a,i,l){for(var s=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],m=e[t+3]^n[3],p=4,_=1;_<s;_++){var f=r[u>>>24]^o[c>>>16&255]^a[d>>>8&255]^i[255&m]^n[p++],g=r[c>>>24]^o[d>>>16&255]^a[m>>>8&255]^i[255&u]^n[p++],h=r[d>>>24]^o[m>>>16&255]^a[u>>>8&255]^i[255&c]^n[p++],y=r[m>>>24]^o[u>>>16&255]^a[c>>>8&255]^i[255&d]^n[p++];u=f,c=g,d=h,m=y}var f=(l[u>>>24]<<24|l[c>>>16&255]<<16|l[d>>>8&255]<<8|l[255&m])^n[p++],g=(l[c>>>24]<<24|l[d>>>16&255]<<16|l[m>>>8&255]<<8|l[255&u])^n[p++],h=(l[d>>>24]<<24|l[m>>>16&255]<<16|l[u>>>8&255]<<8|l[255&c])^n[p++],y=(l[m>>>24]<<24|l[u>>>16&255]<<16|l[c>>>8&255]<<8|l[255&d])^n[p++];e[t]=f,e[t+1]=g,e[t+2]=h,e[t+3]=y},keySize:8});t.AES=r._createHelper(g)})(),(function(){function t(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function n(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var r=e,o=r.lib,a=o.WordArray,i=o.BlockCipher,l=r.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=l.DES=i.extend({_doReset:function(){for(var e=this._key,t=e.words,n=[],r=0;r<56;r++){var o=s[r]-1;n[r]=t[o>>>5]>>>31-o%32&1}for(var a=this._subKeys=[],i=0;i<16;i++){for(var l=a[i]=[],d=c[i],r=0;r<24;r++)l[r/6|0]|=n[(u[r]-1+d)%28]<<31-r%6,l[4+(r/6|0)]|=n[28+(u[r+24]-1+d)%28]<<31-r%6;l[0]=l[0]<<1|l[0]>>>31;for(var r=1;r<7;r++)l[r]=l[r]>>>4*(r-1)+3;l[7]=l[7]<<5|l[7]>>>27}for(var m=this._invSubKeys=[],r=0;r<16;r++)m[r]=a[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,r,o){this._lBlock=e[r],this._rBlock=e[r+1],t.call(this,4,252645135),t.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),t.call(this,1,1431655765);for(var a=0;a<16;a++){for(var i=o[a],l=this._lBlock,s=this._rBlock,u=0,c=0;c<8;c++)u|=d[c][((s^i[c])&m[c])>>>0];this._lBlock=s,this._rBlock=l^u}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,t.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[r]=this._lBlock,e[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=i._createHelper(p);var _=l.TripleDES=i.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=p.createEncryptor(a.create(t.slice(0,2))),this._des2=p.createEncryptor(a.create(t.slice(2,4))),this._des3=p.createEncryptor(a.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});r.TripleDES=i._createHelper(_)})(),(function(){function t(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){t=(t+1)%256,n=(n+e[t])%256;var a=e[t];e[t]=e[n],e[n]=a,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}var n=e,r=n.lib,o=r.StreamCipher,a=n.algo,i=a.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;for(var o=0,a=0;o<256;o++){var i=o%n,l=t[i>>>2]>>>24-i%4*8&255;a=(a+r[o]+l)%256;var s=r[o];r[o]=r[a],r[a]=s}this._i=this._j=0},_doProcessBlock:function(e,n){e[n]^=t.call(this)},keySize:8,ivSize:0});n.RC4=o._createHelper(i);var l=a.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});n.RC4Drop=o._createHelper(l)})(),e.mode.CTRGladman=(function(){function t(e){if((e>>24&255)===255){var t=e>>16&255,n=e>>8&255,r=255&e;t===255?(t=0,n===255?(n=0,r===255?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return(e[0]=t(e[0]))===0&&(e[1]=t(e[1])),e}var r=e.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0),n(i);var l=i.slice(0);r.encryptBlock(l,0);for(var s=0;s<o;s++)e[t+s]^=l[s]}});return r.Decryptor=o,r})(),(function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)l[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16,i=((o*o>>>17)+o*a>>>15)+a*a,u=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=i^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n=e,r=n.lib,o=r.StreamCipher,a=n.algo,i=[],l=[],s=[],u=a.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,n=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)t.call(this);for(var r=0;r<8;r++)a[r]^=o[r+4&7];if(n){var i=n.words,l=i[0],s=i[1],u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=u>>>16|4294901760&c,m=c<<16|65535&u;a[0]^=u,a[1]^=d,a[2]^=c,a[3]^=m,a[4]^=u,a[5]^=d,a[6]^=c,a[7]^=m;for(var r=0;r<4;r++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var o=0;o<4;o++)i[o]=16711935&(i[o]<<8|i[o]>>>24)|4278255360&(i[o]<<24|i[o]>>>8),e[n+o]^=i[o]},blockSize:4,ivSize:2});n.Rabbit=o._createHelper(u)})(),e.mode.CTR=(function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0);var i=a.slice(0);n.encryptBlock(i,0),a[r-1]=a[r-1]+1|0;for(var l=0;l<r;l++)e[t+l]^=i[l]}});return t.Decryptor=n,t})(),(function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)l[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16,i=((o*o>>>17)+o*a>>>15)+a*a,u=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=i^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n=e,r=n.lib,o=r.StreamCipher,a=n.algo,i=[],l=[],s=[],u=a.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,n=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)t.call(this);for(var a=0;a<8;a++)o[a]^=r[a+4&7];if(n){var i=n.words,l=i[0],s=i[1],u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=u>>>16|4294901760&c,m=c<<16|65535&u;o[0]^=u,o[1]^=d,o[2]^=c,o[3]^=m,o[4]^=u,o[5]^=d,o[6]^=c,o[7]^=m;for(var a=0;a<4;a++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var o=0;o<4;o++)i[o]=16711935&(i[o]<<8|i[o]>>>24)|4278255360&(i[o]<<24|i[o]>>>8),e[n+o]^=i[o]},blockSize:4,ivSize:2});n.RabbitLegacy=o._createHelper(u)})(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e})}),null);
__d("MediaUploadFBCryptoJSHasher",["CryptoJS","MediaUploadTime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}var s=(function(){function e(e,t){var n=t.currentTimeProvider;this.$2=e,this.$1=n}var t=e.prototype;return t.$3=function(){switch(this.$2.hashingAlgorithm){case"sha256":return r("CryptoJS").algo.SHA256;case"md5":return r("CryptoJS").algo.MD5;default:return null}},t.$4=function(){switch(this.$2.outputEncoding){case"base64":return r("CryptoJS").enc.Base64;case"hex":return r("CryptoJS").enc.Hex;default:return null}},t.$5=function(t,n,r){return new Promise(function(e){var o=new FileReader;o.onload=function(){o.result instanceof ArrayBuffer?e({isSuccess:!0,data:o.result}):e({isSuccess:!1,rawErrorCode:"INVALID_TYPE_FILE_READER"})},o.onerror=function(){e({isSuccess:!1,rawErrorObject:o.error})},o.readAsArrayBuffer(t.slice(n,n+r))})},t.$6=async function(t,n){for(var e=this.$2.takeFirstBytes==null?t.size:Math.min(this.$2.takeFirstBytes,t.size),o=0;o<e;){var a=Math.min(this.$2.maxChunkSize,e-o),i=await this.$5(t,o,a);if(i.isSuccess)n.update(r("CryptoJS").lib.WordArray.create(i.data));else return i;o+=a}return null},t.hash=async function(t){if(this.$2.maxFileSize!=null&&t.size>this.$2.maxFileSize)return{outcome:"FILE_TOO_LARGE"};var e=this.$3();if(e==null)return{outcome:"FAILURE",rawErrorCode:"INVALID_ALGORITHM"};var n=this.$4();if(n==null)return{outcome:"FAILURE",rawErrorCode:"UNSUPPORTED_OUTPUT_ENCODING"};var r=this.$1(),a=e.create();try{var i=await this.$6(t,a);if(i==null||i.isSuccess)return{outcome:"SUCCESS",value:{algorithm:this.$2.hashingAlgorithm,hashValue:a.finalize().toString(n),encoding:this.$2.outputEncoding,calculationTimeCost:o("MediaUploadTime").subtractTime(this.$1(),r)}};var l;return{outcome:"FAILURE",rawErrorCode:(l=i==null?void 0:i.rawErrorCode)!=null?l:"INTERNAL_ERROR",rawErrorObject:i==null?void 0:i.rawErrorObject}}catch(e){return{outcome:"FAILURE",rawErrorCode:"INTERNAL_ERROR",rawErrorObject:e}}},e})();l.default=s}),98);
__d("ResumableUploadServiceComet",["CometAsyncFetchError","ConstUriUtils","EventEmitter","Promise","ResumableUploadServiceState.enum","cometAsyncFetch","isStringNullOrEmpty","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rupload",u="facebook.com",c=(function(t){function a(e,n,o,a,i,l,c,d,m,p,_,f,g){var h;return h=t.call(this)||this,h.returnFullResponseToClient=!1,h.$ResumableUploadServiceComet$p_1=!1,h.consumer=e,h.accessToken=n,h.sessionKey=r("isStringNullOrEmpty")(o)?r("uuidv4")():o,h.contentKey=a||"",h.contentValue=i||"",h.serviceName=r("isStringNullOrEmpty")(l)?s:l,h.serviceDomain=r("isStringNullOrEmpty")(c)?u:c,h.receiveParameters=d,h.skipOffsetFetching=m,h.thriftParams=p!=null?p:new Map,h.tracingHeaderValue=_,h.customHttpHeaders=f!=null?f:new Map,h.returnFullResponseToClient=g!=null?g:!1,h.$ResumableUploadServiceComet$p_1=!1,h}babelHelpers.inheritsLoose(a,t),a.create=function(t){return new a(t.consumer,null,t.sessionKey||"",t.contentKey,t.contentValue,t.serviceName,t.serviceDomain,t.receiveParameters,t.skipOffsetFetching,t.thriftParams,t.tracingHeaderValue,t.customHttpHeaders,t.returnFullResponseToClient)};var i=a.prototype;return i.$ResumableUploadServiceComet$p_2=function(){var e,t,n={};if(((e=this.receiveParameters)==null?void 0:e.xpv_asset_id)!=null){var r;n.xpv_asset_id=String((r=this.receiveParameters)==null?void 0:r.xpv_asset_id)}if(((t=this.receiveParameters)==null?void 0:t.is_xpv_single_prod)!=null){var o;n.is_xpv_single_prod=String((o=this.receiveParameters)==null?void 0:o.is_xpv_single_prod)}return n},i.resume=function(a){var t=this;this.$ResumableUploadServiceComet$p_1=!1;var i=this.getServiceName(),l=o("ConstUriUtils").getUri("https://"+i+"/"+this.consumer+"/"+this.sessionKey);if(l!=null&&this.contentKey&&this.contentValue&&(l=l.addQueryParam(this.contentKey,this.contentValue)),l==null){var s=new Error("ResumableUploadService: Invalid uploadURI");throw s.stack,s}var u=l.toString(),c=function(){return r("cometAsyncFetch")(u,{data:{},getFullPayload:!0,method:"GET",requestHeaders:t.$ResumableUploadServiceComet$p_2(),withCredentials:!0})},d=function(n){var e=0;typeof n=="object"&&n!=null&&typeof n.offset=="number"&&(e=n.offset),t.emit(r("ResumableUploadServiceState.enum").START,{offset:e,sessionKey:t.sessionKey});var o=t.$ResumableUploadServiceComet$p_2();if(o["X-Entity-Name"]=encodeURIComponent(a.name),o["X-Entity-Type"]=a.type,o["X-Entity-Length"]=String(a.size),o.Offset=String(e),t.receiveParameters){var i=t.receiveParameters;o.start_offset=String(i.start_offset),o.end_offset=String(i.end_offset),o.composer_session_id=String(i.composer_session_id),o.id=String(i.upload_session_id),o.product_media_id=String(i.product_media_id),i.fb_region!=null&&(o["X-FB-Region"]=String(i.fb_region)),i.total_file_size!=null&&(o["X-Total-Asset-Size"]=String(i.total_file_size))}if(t.thriftParams.size>0&&(o["X-Thrift-Params"]=JSON.stringify(Object.fromEntries(t.thriftParams.entries()))),t.tracingHeaderValue!=null&&(o["x-fb-product-log"]=t.tracingHeaderValue),t.customHttpHeaders.size>0)for(var l of t.customHttpHeaders){var s=l[0],c=l[1];o[s]=c}var d=new AbortController;t.abortController=d;var m=function(o){var n=new ProgressEvent("upload-service",{loaded:o.loadedBytes+Number(e),total:a.size});t.emit(r("ResumableUploadServiceState.enum").PROGRESS,n)};return r("cometAsyncFetch")(u,{abortSignal:d.signal,data:{},formData:a.slice(e),getFullPayload:!0,method:"POST",onUploadProgress:m,requestHeaders:o,withCredentials:!0})},m=function(n){if(n==null){t.emit(r("ResumableUploadServiceState.enum").FAIL,"uploading failed");return}t.returnFullResponseToClient||n.h==null?t.emit(r("ResumableUploadServiceState.enum").SUCCESS,n):t.emit(r("ResumableUploadServiceState.enum").SUCCESS,n.h)},p=function(n){if(t.$ResumableUploadServiceComet$p_1!==!0)if(n instanceof r("CometAsyncFetchError")){var e={getError:function(){return n.errorCode},getErrorDescription:function(){return n.errorMsg},getErrorDescriptionString:function(){return n.errorMsg},getErrorIsWarning:function(){return!1},getErrorSummary:function(){return n.errorType},getPayload:function(){return null},getRequest:function(){return null},getResponseHeader:function(){return n.errorRawResponseHeaders},isBlockedAction:function(){return!1},isSilent:function(){return!1},isTransient:function(){return!0},toError:function(){return n}};t.emit(r("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,e,{method:"POST",offset:0})}else t.emit(r("ResumableUploadServiceState.enum").FAIL,n)},_=this.skipOffsetFetching==!0?(e||(e=n("Promise"))).resolve():c();return _.then(d,p).then(m,p)},i.getServiceName=function(){return this.serviceName+"."+this.serviceDomain},i.cancel=function(){this.$ResumableUploadServiceComet$p_1=!0,this.abortController&&this.abortController.abort(),this.emit(r("ResumableUploadServiceState.enum").CANCEL)},i.emitFileSizeWarning=function(t){this.emit(r("ResumableUploadServiceState.enum").FILE_TOO_LARGE,t)},a})(r("EventEmitter"));l.default=c}),98);
__d("StoriesCreateMediaTypeEnum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({PHOTO:"photo",SATP:"satp",VIDEO:"video",CHANNEL:"channel"}),l=e;i.default=l}),66);
__d("VideoUploadCallbacksMixin",[],(function(t,n,r,o,a,i){"use strict";function e(e){return Array.isArray(e)?e:[e]}var l={inform:function(n,r){var t=this.__callbacksByType;if(t!=null){var o=e(n);o.forEach(function(e){var n=t[e];n!=null&&n.forEach(function(t){try{t(e,r)}catch(e){}})})}},subscribe:function(n,r){var t,o=this.__callbacksByType=(t=this.__callbacksByType)!=null?t:{},a=e(n);a.forEach(function(e){var t,n=o[e]=(t=o[e])!=null?t:[];n.push(r)});var i=!1;return{remove:function(){i!==!0&&(i=!0,a.forEach(function(e){var t=o[e];if(t!=null){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length===0&&delete o[e]}}))}}}};a.exports=l}),null);
__d("VideoUploadLoggingConfigJSModuleWrapper",["VideoUploadLoggingConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoUploadLoggingConfig")}),98);